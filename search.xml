<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[OpenSSL: ç®€å•æ˜“ä¸Šæ‰‹çš„RSAåŠ è§£å¯†]]></title>
    <url>%2F2019%2F12%2F29%2FOpenSSL-%E7%AE%80%E5%8D%95%E6%98%93%E4%B8%8A%E6%89%8B%E7%9A%84RSA%E5%8A%A0%E8%A7%A3%E5%AF%86%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹è¿™ç¯‡æ–‡ç« æ˜¯ç»§ OpenSSL: ç”¨VS2017åˆ›å»ºCå·¥ç¨‹ã€OpenSSL: å®ŒæˆVS2017çš„é…ç½® ä¸¤ç¯‡æ–‡ç« çš„ç¬¬3ç¯‡ï¼Œå‰ä¸¤ç¯‡åˆ†åˆ«è·Ÿå¤§å®¶åˆ†äº«äº†å¦‚ä½•åœ¨ visual studio2017 ä¸­åˆ›å»ºCå·¥ç¨‹ï¼Œé…ç½®OpenSSLçš„å¼€å‘çŽ¯å¢ƒä»¥åŠä½¿ç”¨ openssl å¼€æºåº“å®žçŽ°base64çš„ç¼–è§£ç ã€‚ æœ¬ç¯‡è·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•ä½¿ç”¨ openssl å¼€æºåº“å®žçŽ° RSA çš„åŠ å¯†å’Œè§£å¯†ï¼Œä¸è¿‡è¿™ä¸€ç¯‡æ˜¯å¯¹ç®€å•çš„æ•°æ®è¿›è¡ŒåŠ è§£å¯†ï¼Œä¸‹ä¸€ç¯‡ç»§ç»­è·Ÿå¤§å®¶åˆ†äº«å¤æ‚ä¸€ç‚¹çš„ RSA åŠ è§£å¯†è¿‡ç¨‹ä»¥åŠå®žä¾‹ä»£ç ã€‚ 2019 å³å°†è¢«ç”»ä¸Šå¥å·ï¼Œè‡ªå·±è¿˜æœ‰å¾ˆå¤šæ„¿æœ›æ²¡æœ‰å®žçŽ°ã€‚ä¸€æ‹¿èµ·ä¹¦å°±æ„Ÿè§‰å›°ï¼Œä¸€æ‹¿èµ·æ‰‹æœºè§‰å¾—é»‘å¤œé‡Œé˜³å…‰æ˜Žåªšï¼Œæ— è¯å¯æ•‘äº†å‘€ï¼ èŽ·å–å…¬ã€ç§é’¥åœ¨ c-openssl èŽ·å–çš„åŽ‹ç¼©åŒ…ä¸­ï¼Œè§£åŽ‹å¯ä»¥åœ¨ bin64æˆ–è€…binï¼ˆ32ä½æ“ä½œç³»ç»Ÿä½¿ç”¨ï¼‰ ç›®å½•ä¸‹é¢æ‰¾åˆ° openssl.exe æ–‡ä»¶ï¼ŒåŒå‡»æ‰“å¼€å³å¯ã€‚ ç”Ÿæˆç§é’¥æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1genrsa -out rsa_private_key.pem 1024 æ­¤æ—¶åœ¨ bin64 ç›®å½•ä¸‹ä¼šç”Ÿæˆ rsa_private_key.pem æ–‡ä»¶ï¼Œå³ç§é’¥æ–‡ä»¶ï¼› å°† RSA ç§é’¥è½¬æ¢æˆ PKCS8 æ ¼å¼ï¼Œæ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š 1pkcs8 -topk8 -inform PEM -in rsa_private_key.pem -outform PEM -nocrypt ç”Ÿæˆå…¬é’¥æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem æ­¤æ—¶åœ¨ bin64 ç›®å½•ä¸‹ä¼šç”Ÿæˆ rsa_public_key.pem æ–‡ä»¶ï¼Œå³å…¬é’¥æ–‡ä»¶ï¼› ç”¨VS Codeæ‰“å¼€è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å…·ä½“å†…å®¹ï¼Œåœ¨æˆ‘çš„æœºå™¨ä¸Šç”Ÿæˆçš„å…¬é’¥ï¼š 123456-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrPgCMJW17JN2DW7tZFk/FB6pUpLvLOo6G/EuND8XZptffXbyiY2VscMRhP+kKVeaLO9HuEYR3Zl78x8oR6prytstc/MueersWDxh4iGSHsZXGxA41hXrXLRElrSTRc43ea18o0zMxZoVZiR2JFt7QcgM+T6eOrvj59MhXv9O46QIDAQAB-----END PUBLIC KEY----- ç§é’¥ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516-----BEGIN PRIVATE KEY-----MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKs+AIwlbXsk3YNbu1kWT8UHqlSku8s6job8S40Pxdmm199dvKJjZWxwxGE/6QpV5os70e4RhHdmXvzHyhHqmvK2y1z8y556uxYPGHiIZIexlcbEDjWFetctESWtJNFzjd5rXyjTMzFmhVmJHYkW3tByAz5Pp46u+Pn0yFe/07jpAgMBAAECgYBj1YH8MtXhNVzveEuBZMCc3hsvvdq+YSU3DV/+nXN7sQmp77xJ8CjxT80t5VS38dy2z+lUImJYOhamyNPGHkC2y84V7i5+e6ScQve1gnwHqRKGBjtSCaYOqm9rTDECCTT1oMU26sfYznWlJqMrkJp1jWn7aAwr+3FcX2XhD74ZAQJBAN34Y6fmHLRPv21MsdgGqUjKgyFvJfLUmtFFgb6sLEWck22J3BAFAcNCTLYHFZwMhL/nwaw9/7rIUJD+lcl6n3cCQQDFfrN14qKC3GJfoBZ8k9S6F7Ss514DDPzIuenbafhoUjZDVcjLw9EmYZQjpfsQ3WdNICUKRrDHZay1Pz+sYkKfAkB+OKfaquS5t/t/2LPsxuTuipIEqiKnMjSTOfYsidVnBEFlcZZc2awF76aVf/PO1+OJCO2910ebXBtMSCi++GbDAkEAmc7zNPwsVH4OnyquWJdJNSUBMSd/sCCNPkaMOrVtINHmMMq+dvMqEBoupRS/U4Ma0JYYQsiLJL+qof2AOWDNQQJAcquLGHLTeGDDLluHo+kkIGwZi4aK/fDoylZ0NCEtYyMtShQ3JmllST9kmb9NJX2gMsejsircH6ObxqZPbka6UA==-----END PRIVATE KEY----- ç´§æŽ¥ç€æˆ‘ä¼šä½¿ç”¨è¿™å¯¹å…¬ç§é’¥è¿›è¡Œç¼–ç ã€‚ RSA å®žæˆ˜ å…³äºŽä»€ä¹ˆæ˜¯ RSA ä»¥åŠ RSA åŽŸç†ï¼Œæœ¬æ–‡å¹¶æ²¡æœ‰å†™ï¼Œè¯·å¤§å®¶è‡ªè¡Œæœç´¢å­¦ä¹ å’Œäº†è§£ã€‚ æ–°å»ºå¤´æ–‡ä»¶ mzc_rsa.hï¼Œå£°æ˜Žå‡ ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š 12345678910111213#pragma once/* å…¬é’¥è§£å¯† */int public_key_decrypt(unsigned char *enc_data, int data_len, unsigned char *key, unsigned char *decrypted);/* ç§é’¥åŠ å¯† */int private_key_encrypt(unsigned char *data, int data_len, unsigned char *key, unsigned char *encrypted);/* å…¬é’¥åŠ å¯† */int public_key_encrypt(unsigned char *data, int data_len, unsigned char *key, unsigned char *encrypted);/* ç§é’¥è§£å¯† */int private_key_decrypt(unsigned char *enc_data, int data_len, unsigned char *key, unsigned char *decrypted); å¯¹åº”çš„å®žçŽ°æ–‡ä»¶ mzc_rsa.cï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667#include "mzc_rsa.h"#include &lt;openssl/pem.h&gt;#include &lt;openssl/ssl.h&gt;#include &lt;openssl/rsa.h&gt;#include &lt;openssl/evp.h&gt;#include &lt;openssl/bio.h&gt;#include &lt;openssl/err.h&gt;#include &lt;openssl/buffer.h&gt;#include &lt;stdio.h&gt;const int PADDING = RSA_PKCS1_PADDING;RSA *createRSA(unsigned char *key, int public_token)&#123; RSA *rsa = NULL; BIO *keybio; keybio = BIO_new_mem_buf(key, -1); if (keybio == NULL) &#123; printf("Failed to create key BIO"); return 0; &#125; if (public_token) &#123; rsa = PEM_read_bio_RSA_PUBKEY(keybio, &amp;rsa, NULL, NULL); &#125; else &#123; rsa = PEM_read_bio_RSAPrivateKey(keybio, &amp;rsa, NULL, NULL); &#125; if (rsa == NULL) &#123; printf("Failed to create RSA"); &#125; return rsa;&#125;int public_key_decrypt(unsigned char *enc_data, int data_len, unsigned char *key, unsigned char *decrypted)&#123; RSA *rsa = createRSA(key, 1); int result = RSA_public_decrypt(data_len, enc_data, decrypted, rsa, PADDING); return result;&#125;int private_key_encrypt(unsigned char *data, int data_len, unsigned char *key, unsigned char *encrypted)&#123; RSA *rsa = createRSA(key, 0); int result = RSA_private_encrypt(data_len, data, encrypted, rsa, PADDING); return result;&#125;int public_key_encrypt(unsigned char *data, int data_len, unsigned char *key, unsigned char *encrypted)&#123; RSA *rsa = createRSA(key, 1); int result = RSA_public_encrypt(data_len, data, encrypted, rsa, PADDING); return result;&#125;int private_key_decrypt(unsigned char *enc_data, int data_len, unsigned char *key, unsigned char *decrypted)&#123; RSA *rsa = createRSA(key, 0); int result = RSA_private_decrypt(data_len, enc_data, decrypted, rsa, PADDING); return result;&#125; æ³¨æ„è¿™é‡Œä½¿ç”¨çš„ RSA å¯¹é½æ¨¡å¼æ˜¯ RSA_PKCS1_PADDINGã€‚ åœ¨æµ‹è¯•çš„ä¸»å‡½æ•°ï¼ˆmainï¼‰ä¸­ï¼Œä½¿ç”¨æ˜Žæ–‡ www.veryitman.com ä½œä¸ºç¤ºä¾‹è¿›è¡ŒåŠ å¯†å’Œè§£å¯†æ“ä½œï¼Œæˆ‘åœ¨ä¸‹é¢åªåˆ—å‡ºå…³é”®å®žçŽ°ã€‚å…·ä½“ä»£ç å¯ä»¥åŽ» Github ä¸‹è½½ï¼Œæ³¨æ„ clone rsa-feature è¿™ä¸ªåˆ†æ”¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/* å…¬é’¥åŠ å¯†ï¼Œ ç§é’¥è§£å¯† */int main()&#123; //åŽŸå§‹æ•°æ®ä¸ºå­—ç¬¦ä¸²ï¼šwww.veryitman.com unsigned char plainText[] = "www.veryitman.com"; unsigned char publicKey[] = "-----BEGIN PUBLIC KEY-----\n" "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrPgCMJW17JN2DW7tZFk/FB6pU\n" "pLvLOo6G/EuND8XZptffXbyiY2VscMRhP+kKVeaLO9HuEYR3Zl78x8oR6prytstc\n" "/MueersWDxh4iGSHsZXGxA41hXrXLRElrSTRc43ea18o0zMxZoVZiR2JFt7QcgM+\n" "T6eOrvj59MhXv9O46QIDAQAB\n" "-----END PUBLIC KEY-----\n"; unsigned char privateKey[] = "-----BEGIN RSA PRIVATE KEY-----\n" "MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKs+AIwlbXsk3YNb\n" "u1kWT8UHqlSku8s6job8S40Pxdmm199dvKJjZWxwxGE/6QpV5os70e4RhHdmXvzH\n" "yhHqmvK2y1z8y556uxYPGHiIZIexlcbEDjWFetctESWtJNFzjd5rXyjTMzFmhVmJ\n" "HYkW3tByAz5Pp46u+Pn0yFe/07jpAgMBAAECgYBj1YH8MtXhNVzveEuBZMCc3hsv\n" "vdq+YSU3DV/+nXN7sQmp77xJ8CjxT80t5VS38dy2z+lUImJYOhamyNPGHkC2y84V\n" "7i5+e6ScQve1gnwHqRKGBjtSCaYOqm9rTDECCTT1oMU26sfYznWlJqMrkJp1jWn7\n" "aAwr+3FcX2XhD74ZAQJBAN34Y6fmHLRPv21MsdgGqUjKgyFvJfLUmtFFgb6sLEWc\n" "k22J3BAFAcNCTLYHFZwMhL/nwaw9/7rIUJD+lcl6n3cCQQDFfrN14qKC3GJfoBZ8\n" "k9S6F7Ss514DDPzIuenbafhoUjZDVcjLw9EmYZQjpfsQ3WdNICUKRrDHZay1Pz+s\n" "YkKfAkB+OKfaquS5t/t/2LPsxuTuipIEqiKnMjSTOfYsidVnBEFlcZZc2awF76aV\n" "f/PO1+OJCO2910ebXBtMSCi++GbDAkEAmc7zNPwsVH4OnyquWJdJNSUBMSd/sCCN\n" "PkaMOrVtINHmMMq+dvMqEBoupRS/U4Ma0JYYQsiLJL+qof2AOWDNQQJAcquLGHLT\n" "eGDDLluHo+kkIGwZi4aK/fDoylZ0NCEtYyMtShQ3JmllST9kmb9NJX2gMsejsirc\n" "H6ObxqZPbka6UA==\n" "-----END RSA PRIVATE KEY-----\n"; unsigned char encrypted_str[128]; unsigned char decrypted_str[128]; // éœ€è¦åˆå§‹åŒ–ï¼Œå¦åˆ™è§£å¯†å‡ºæ¥çš„å­—ç¬¦ä¸²ä¼šæœ‰å¤šä½™çš„ä¹±ç  memset(encrypted_str, '\0', sizeof(encrypted_str)); memset(decrypted_str, '\0', sizeof(decrypted_str)); size_t len = strlen((const char *)plainText); printf("Encrypted length =%d\n", len); // å…¬é’¥åŠ å¯† int encrypted_length = public_key_encrypt(plainText, len, publicKey, encrypted_str); if (encrypted_length == -1) &#123; printf("Private Encrypt failed\n"); exit(0); &#125; // ç§é’¥è§£å¯† int decrypted_length = private_key_decrypt(encrypted_str, encrypted_length, privateKey, decrypted_str); if (decrypted_length == -1) &#123; printf("Public Decrypt failed\n"); exit(0); &#125; printf("Decrypted Text =%s\n", decrypted_str); printf("Decrypted Length =%d\n", decrypted_length); return 0;&#125; ä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ï¼Œç´¯äº†ï¼Œç¡è§‰äº†ðŸ˜œã€‚ æ´»ç€ä¸æ˜¯é æ³ªæ°´æå–åŒæƒ…ï¼Œè€Œæ˜¯é æ±—æ°´èŽ·å¾—æŽŒå£°~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>OpenSSL VS2017 RSA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­å€¼å¾—è¯´çš„Handlerä¹‹æ›´æ–°UI]]></title>
    <url>%2F2019%2F12%2F21%2FAndroid%E4%B8%AD%E5%80%BC%E5%BE%97%E8%AF%B4%E7%9A%84Handler%E4%B9%8B%E6%9B%B4%E6%96%B0UI%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹ç”µè§†å‰§ã€Šåº†ä½™å¹´ã€‹ï¼Œè¢«è°ƒçš®çš„ç¼–å‰§é€—å¾—çˆ±ä¸é‡Šæ‰‹ï¼ŒèŒƒé—²åŒå¿—ä»Žâ€œæ½œé¾™å‹¿ç”¨â€ç›´åˆ°å¤§æ®¿é†‰é…’èƒŒè¯µå”è¯—300é¦–ï¼Œè®©ä¼—å®˜çž ç›®ç»“èˆŒï¼Œä¹Ÿç®—æ˜¯â€œé£žé¾™åœ¨å¤©â€äº†ï¼Œè¿™ä¸€é›†(ç¬¬27é›†)çœ‹çš„é‚£å«ä¸€ä¸ªè¿‡ç˜¾ã€‚å°¤å…¶èŒƒé—²é‚£å¥â€œæˆ‘é†‰æ¬²çœ å›ä¸”åŽ»ï¼ŒåŽ»ä½ å¦ˆçš„â€¦â€ï¼Œå·®ç‚¹è®©æˆ‘å–·é¥­ã€‚ æŽ¨èå¤§å®¶å‘¨æœ«å¯ä»¥çœ‹çœ‹ï¼Œç®—æ˜¯ä¼‘é—²ä¸€ä¸‹å§ï¼ ç®€ä»‹ä¸ªäººæ€»æ˜¯æ„Ÿè§‰ Androidä¸­æ›´æ–° UI å¾ˆè®©äººçº ç»“ï¼ç‰¹æ­¤å°ç»“ä¸€ä¸‹ï¼Œç®—æ˜¯æŠ›ç –å¼•çŽ‰ã€‚ è¯»è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œå‡è®¾ä½ å·²ç»æ˜Žç™½å¤šçº¿ç¨‹ã€Handler å¦‚ä½•ä½¿ç”¨ã€‚ åœ¨æ–‡ç« çš„æœ€åŽï¼Œé™„å½•ä¸€å¼ è‰å›¾ï¼Œä¸»è¦ç”¨äºŽè¯´æ˜Ž Handlerã€Messageã€MessageQueueã€Looper ä¹‹é—´çš„å…³ç³»ã€‚ æ›´æ–°UIçš„éªšæ“ä½œ1ã€åœ¨ onCreate() æ–¹æ³•ä¸­å¼€å¯çº¿ç¨‹æ›´æ–° UIç›´æŽ¥ä¸Šä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819public class MasterActivity extends Activity &#123; TextView tv = null; Button btn = null; @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.main); System.out.println(Thread.currentThread().getName() + ": " + Thread.currentThread().getId()); tv = (TextView)findViewById(R.id.text); /*onCreateä¸­å¼€å¯æ–°çº¿ç¨‹ï¼Œæ›´æ–°UIã€‚æ²¡æœ‰æŠ¥é”™æˆ–è€…å¼‚å¸¸ä¿¡æ¯ï¼*/ btn = (Button)findViewById(R.id.btn); Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + ": " + Thread.currentThread().getId()); tv.setText("update UI is success!"); btn.setText("update UI is success!"); &#125; &#125;); thread.start(); &#125; éšä¾¿æŠ˜è…¾ï¼Œä¸ä¼šæŠ¥é”™ä¹Ÿä¸ä¼šæŠ¥ä»»ä½•å¼‚å¸¸ï¼ ä»¥ä¸ºå¼€å¯çš„çº¿ç¨‹å’Œ UI çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å¾ˆä¸å¹¸ï¼Œä»–ä»¬çš„çº¿ç¨‹idé£Žç‰›é©¬ä¸ç›¸åŠï¼ å¤§å®¶å¯ä»¥æŸ¥ä¸€ä¸‹ Android æºç ï¼Œè¿™ä¸ªä¸»è¦æ˜¯å› ä¸ºåœ¨åŠ è½½ Activity çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰è§¦å‘æ£€æŸ¥å•çº¿ç¨‹çš„æ¨¡åž‹ï¼ˆå³å­çº¿ç¨‹ä¸å¯ä»¥æ›´æ–°UIï¼‰ã€‚ å¦‚æžœä½ ä¸ç›¸ä¿¡çš„è¯ï¼Œå¯ä»¥åœ¨ä¸Šé¢çš„çº¿ç¨‹é‡Œé¢ while trueï¼Œé‚£ä¹ˆä¸€å®šä¼šæŠ¥é”™çš„ã€‚ 2ã€åœ¨ Activity ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­æ›´æ–° UIå¦‚ Activity çš„ onResumeã€onStartã€åæ­£æ˜¯ä»¥ on å¼€å¤´çš„å›žè°ƒæ–¹æ³•ä¸­åœ¨éžä¸»çº¿ç¨‹ä¸­æ›´æ–° UIï¼Œå®žä¾‹å¦‚ä¸‹ï¼š 12345678910111213@Overrideprotected void onRestart() &#123; super.onRestart(); /*onRestartä¸­å¼€å¯æ–°çº¿ç¨‹ï¼Œæ›´æ–°UI*/ Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + ": " + Thread.currentThread().getId()); tv.setText("update UI is success!"); btn.setText("update UI is success!"); &#125; &#125;); thread.start();&#125; ä¸å¥½æ„æ€ï¼ŒæŒ‰ä¸‹è¿”å›žæŒ‰é’®åœ¨å¯åŠ¨ç¨‹åºï¼Œæˆ–è€…æŒ‰ Home é”®å†å¯åŠ¨ç¨‹åºï¼Œå°±è¿™ä¹ˆæŠ˜è…¾å‡ ä¸‹ï¼Œå°±ä¼šåŒ…å¼‚å¸¸ï¼ å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š 12UI.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. å¤§æ¦‚æ„æ€æ˜¯ï¼šåªæœ‰åœ¨ä¸»çº¿ç¨‹ä¸­æ‰å¯ä»¥è¿›è¡Œæ›´æ–° UI çš„æ“ä½œã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå¤§å®¶éƒ½åº”è¯¥æƒ³åˆ° postInvalidate() è¿™ä¸ªæ–¹æ³•äº†ã€‚ä¿®æ”¹å®žä¾‹å¦‚ä¸‹ï¼š 123456789101112@Override protected void onRestart() &#123; super.onRestart(); /*onRestartä¸­å¼€å¯æ–°çº¿ç¨‹ï¼Œæ›´æ–°UI*/ Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + ": " + Thread.currentThread().getId()); tv.postInvalidate(); btn.postInvalidate(); tv.setText("update UI is success!"); btn.setText("update UI is success!"); &#125; &#125;); thread.start(); &#125; postInvalidate() æ–¹æ³•ï¼Œæºç ï¼š 1234567891011121314public void postInvalidate() &#123; postInvalidateDelayed(0); &#125; public void postInvalidateDelayed(long delayMilliseconds) &#123; // We try only with the AttachInfo because there's no point in invalidating // if we are not attached to our window if (mAttachInfo != null) &#123; Message msg = Message.obtain(); msg.what = AttachInfo.INVALIDATE_MSG; msg.obj = this; mAttachInfo.mHandler.sendMessageDelayed(msg, delayMilliseconds); &#125;&#125; å¯ä»¥çœ‹å‡ºï¼ŒpostInvalidate() æœ¬è´¨æ˜¯ä½¿ç”¨äº† Handler å¤„ç†æ¶ˆæ¯çš„æœºåˆ¶ï¼è¯¥æ–¹æ³•å¯ä»¥åœ¨å­çº¿ç¨‹ä¸­ç›´æŽ¥ç”¨æ¥æ›´æ–°UIã€‚å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªæ–¹æ³• invalidate()ï¼Œç¨å€™å†è¯´ï¼ 3ã€åœ¨ Button çš„äº‹ä»¶ä¸­å¼€å¯çº¿ç¨‹ï¼Œæ›´æ–° UI1234567891011121314151617181920212223public class MasterActivity extends Activity &#123; TextView tv = null; Button btn = null; @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.main); System.out.println(Thread.currentThread().getName() + ": " + Thread.currentThread().getId()); tv = (TextView)findViewById(R.id.text); btn = (Button)findViewById(R.id.btn); btn.setOnClickListener(new OnClickListener() &#123; @Override public void onClick(View v) &#123; Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + ": " + Thread.currentThread().getId()); tv.setText("update UI is success!"); btn.setText("update UI is success!"); &#125; &#125;); thread.start(); &#125; &#125;); &#125; Sorryï¼ŒæŠ¥é”™ï¼å³ä½¿ä½ åŠ ä¸Š postInvalidate() æ–¹æ³•ï¼Œä¹Ÿä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚ 1UI.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 4ã€ä½¿ç”¨ Handler ç»“åˆå¤šçº¿ç¨‹æ›´æ–° UIa. å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨ run æ–¹æ³•ä¸­é€šçŸ¥ Handler b. Handler ä¸­ä½¿ç”¨ handleMessage æ–¹æ³•æ›´æ–° UI 5ã€Handler å’Œ invalidate æ–¹æ³•ç»“åˆå¤šçº¿ç¨‹æ›´æ–° UIæ–¹æ³• invalidate ä¸»è¦ç”¨åœ¨ä¸»çº¿ç¨‹ä¸­ï¼ˆå³UI çº¿ç¨‹ä¸­ï¼‰ï¼Œä¸å¯ä»¥ç”¨äºŽå­çº¿ç¨‹ã€‚å¦‚æžœåœ¨å­çº¿ç¨‹ä¸­éœ€è¦ä½¿ç”¨ postInvalidate æ–¹æ³•ã€‚ Android çš„ API æœ‰è¯´æ˜Žï¼š public void invalidate () Since: API Level 1 Invalidate the whole view. If the view is visible, onDraw(Canvas) will be called at some point in the future. This must be called from a UI thread. To call from a non-UI thread, call postInvalidate(). çœ‹çœ‹è¯¥æ–¹æ³•æºç ï¼š 1234567891011121314public void invalidate() &#123; if (ViewDebug.TRACE_HIERARCHY) &#123; ViewDebug.trace(this, ViewDebug.HierarchyTraceType.INVALIDATE); &#125; if ((mPrivateFlags &amp; (DRAWN | HAS_BOUNDS)) == (DRAWN | HAS_BOUNDS)) &#123; mPrivateFlags &amp;= ~DRAWN &amp; ~DRAWING_CACHE_VALID; final ViewParent p = mParent; final AttachInfo ai = mAttachInfo; if (p != null &amp;&amp; ai != null) &#123; final Rect r = ai.mTmpInvalRect; r.set(0, 0, mRight - mLeft, mBottom - mTop); // Don't call invalidate -- we don't want to internally scroll // our own bounds p.invalidateChild(this, r); &#125; &#125; &#125; &#125; &#125; &#125; invalidate æ–¹æ³•å¦‚æžœä½ ç›´æŽ¥åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œæ˜¯çœ‹ä¸åˆ°ä»»ä½•æ›´æ–°çš„ã€‚éœ€è¦ä¸Ž Handler ç»“åˆï¼ Android åœ¨ onDraw äº‹ä»¶å¤„ç†ç»˜å›¾ï¼Œè€Œ invalidate() å‡½æ•°å¯ä»¥å†ä¸€æ¬¡è§¦å‘ onDraw äº‹ä»¶ï¼Œç„¶åŽå†ä¸€æ¬¡è¿›è¡Œç»˜å›¾åŠ¨ä½œã€‚å®žä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637public class MasterActivity extends Activity &#123; static int times = 1; /** Called when the activity is first created. */ @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView( new View(null) &#123; Paint vPaint = new Paint(); //ç»˜åˆ¶æ ·å¼ç‰©ä»¶ private int i = 0; //å¼§å½¢è§’åº¦ @Override protected void onDraw (Canvas canvas) &#123; super.onDraw(canvas); System.out.println("this run " + (times++) +" times!"); // è®¾å®šç»˜å›¾æ ·å¼ vPaint.setColor( 0xff00ffff ); //ç”»ç¬”é¢œè‰² vPaint.setAntiAlias( true ); //åé”¯é½¿ vPaint.setStyle( Paint.Style.STROKE ); // ç»˜åˆ¶ä¸€ä¸ªå¼§å½¢ canvas.drawArc(new RectF(60, 120, 260, 320), 0, i, true, vPaint ); // å¼§å½¢è§’åº¦ if( (i+=10) &gt; 360 ) &#123; i = 0; &#125; // é‡ç»˜, å†ä¸€æ¬¡æ‰§è¡ŒonDraw ç¨‹åº invalidate(); &#125; &#125;); &#125;&#125; ç»è¿‡æµ‹è¯•ï¼Œå‘çŽ° times ä¸€ç›´åœ¨è¢« ++ï¼Œè¯´æ˜Ž onDraw è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå¹¶ä¸”ä¸€ç›´åœ¨ç”»å›¾ï¼ Android çš„ API æœ‰æ—¶å€™è®©äººçœ‹çš„å¾ˆéƒé—·å¾ˆæ— è¯­â€¦..å…³äºŽ invalidate çš„ä½¿ç”¨ï¼Œè¿˜å¾…æŽ¢ç´¢ã€‚é©å‘½å°šæœªæˆåŠŸï¼ŒåŒå¿—ä»éœ€åŠªåŠ›ï¼ å°ç»“é™„å½•ï¼š Handlerã€Messageã€MessageQueueã€Looper ä¹‹é—´çš„å…³ç³» è¿™é‡Œè¯´æ˜Ž Looper ä½¿ç”¨æ— é™å¾ªçŽ¯å–å‡ºæ¶ˆæ¯ï¼Œæ˜¯æœ‰ UI OS æŽ§åˆ¶çš„ï¼› UI çº¿ç¨‹æ˜¯éžå®‰å…¨çš„ï¼Œå³ä¸è¦åœ¨å­çº¿ç¨‹ä¸­æ›´æ–° UIï¼› Looper å–å‡ºæ¥çš„æ¶ˆæ¯ï¼ŒHandler å¯ä»¥é€šè¿‡ whatã€obj ç­‰é‡æ¥åŒºåˆ«åˆ†åˆ«èŽ·å–å±žäºŽè‡ªå·±çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥æŽ¨èä½¿ç”¨è¿™äº›å†…ç½®å˜é‡ã€‚ å¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨ï¼Œåƒé‡‘æ•£å°½è¿˜å¤æ¥ã€‚]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>UI Handler</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: MySQLåŸºæœ¬æ“ä½œ]]></title>
    <url>%2F2019%2F12%2F07%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-MySQL%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹æœ¬ç¯‡æ˜¯ å¾®æœåŠ¡ç³»åˆ— çš„ç¬¬ N ç¯‡ï¼Œä»Žæœ¬ç¯‡å¼€å§‹æˆ‘ä»¬å°±è¦æŽ¥è§¦å’Œå­¦ä¹ æ•°æ®åº“ç›¸å…³çš„çŸ¥è¯†äº†ã€‚ æ•°æ®åº“æˆ‘ä»¬é€‰æ‹© MySQL æ•°æ®åº“ï¼Œå…è´¹ä¸”èµ„æ–™å¤šï¼Œå¤§éƒ¨åˆ†å…¬å¸éƒ½ä¼šä½¿ç”¨è¯¥æ•°æ®åº“ã€‚æˆ‘æ˜¯åœ¨ Windows 10 ä¸Šé¢æ­å»ºçš„å¾®æœåŠ¡å¼€å‘çŽ¯å¢ƒï¼ŒåŒç†ï¼ŒMySQL æ•°æ®åº“ä¹Ÿæ˜¯åœ¨è¿™ä¸ªç³»ç»Ÿä¸Šé¢å®‰è£…çš„å¹¶ä¸”ä½¿ç”¨çš„æ˜¯ MySQL8.0 ç‰ˆæœ¬ï¼Œå¦‚æžœä½ è¿˜æ²¡æœ‰å®‰è£…æˆ–è€…åœ¨å®‰è£… MySQL8.0 é‡åˆ°é—®é¢˜å¯ä»¥å‚è€ƒ MySQL8.0.15åœ¨Win10ä¸Šçš„æŠ˜è…¾è®° è¿™ç¯‡æ–‡ç« ã€‚ ä»Šå¤©ä¸»è¦è·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•ä½¿ç”¨ SpringBoot ç»“åˆ JDBC è¿žæŽ¥å’Œæ“ä½œ MySQL æ•°æ®åº“ï¼Œä¸»è¦è¿˜æ˜¯ä»¥å®žä¾‹ä¸ºä¸»ã€‚ JDBCã€ODBCã€MySQL Connectorsåœ¨è¯´å®žä¾‹ä¹‹å‰ï¼Œå¸¦å¤§å®¶å…ˆäº†è§£ä¸€ä¸‹æ ‡é¢˜ä¸­å‡ ä¸ªåè¯çš„æ¦‚å¿µã€‚ JDBCï¼ˆJava database connectivityï¼Œæ•°æ®è¿žæŽ¥ï¼‰ï¼Œæ˜¯ Sun å…¬å¸ç¼–çš„ä¸€å †ç±»å’Œæ–¹æ³•ï¼Œéƒ½å°è£…åœ¨ java.sql åŒ…ä¸­ï¼Œå¯ä»¥åˆ©ç”¨è¿™äº›ç±»å’Œæ–¹æ³•æ¥æŠŠä½ çš„ Java ç¨‹åºå’Œä»»æ„çš„æ•°æ®åº“è¿žé€šã€‚å³é€šè¿‡ä½¿ç”¨ JDBCï¼ŒJava å¼€å‘äººå‘˜å¯ä»¥å°† SQL è¯­å¥ä¼ é€ç»™å‡ ä¹Žä»»ä½•ä¸€ç§æ•°æ®åº“ã€‚ å¯¹åº”çš„è¿˜æœ‰ ODBCï¼ˆ Open Database Connectivityï¼Œ å¼€æ”¾æ•°æ®åº“äº’è¿žï¼‰ï¼ŒODBC æ˜¯ Microsoft æå‡ºçš„æ•°æ®åº“è®¿é—®æŽ¥å£æ ‡å‡†ã€‚å¼€æ”¾æ•°æ®åº“äº’è¿žå®šä¹‰äº†è®¿é—®æ•°æ®åº“ API çš„ä¸€ä¸ªè§„èŒƒï¼ŒMicrosoft çš„ ODBC æ–‡æ¡£æ˜¯ç”¨ C è¯­è¨€æè¿°çš„ï¼Œè®¸å¤šå®žé™…çš„ ODBC é©±åŠ¨ç¨‹åºä¹Ÿæ˜¯ç”¨ C è¯­è¨€å†™çš„ã€‚ODBC æä¾›äº†å¯¹ SQL è¯­è¨€çš„æ”¯æŒï¼Œç”¨æˆ·å¯ä»¥ç›´æŽ¥å°† SQL è¯­å¥é€ç»™ ODBCã€‚ JDBC å’Œ ODBC éƒ½æ˜¯ç”¨æ¥è¿žæŽ¥æ•°æ®åº“çš„å¯åŠ¨ç¨‹åºï¼Œä¸¤è€…å…·æœ‰æ•°æ®åº“ç‹¬ç«‹æ€§ç”šè‡³å¹³å°æ— å…³æ€§ã€‚ MySQL Connectors æ˜¯ MySQL æ•°æ®åº“çš„é©±åŠ¨ï¼ˆç¨‹åºï¼‰ï¼Œæœ‰å¯¹å„ç§è¯­è¨€çš„æ”¯æŒã€‚mysql-connector-javaï¼ˆä¹Ÿç§°ä¹‹ä¸º Connector/J æˆ–è€… mysql-connector-jdbcï¼‰ æ˜¯ MySQL-Connectors çš„ Java ç‰ˆæœ¬çš„ä¸€ä¸ªå®žçŽ° ï¼Œç”¨å®ƒå¯ä»¥è¿žæŽ¥ MySQL ç³»ç»Ÿã€‚ åŒç†ï¼Œè¿˜æœ‰ mysql-connector-pythonã€mysql-connector-cã€ mysql-connector-ODBCã€mysql-connector-jdbc ç­‰ï¼Œå¦‚ä¸‹å›¾ï¼ˆæ¥è‡ª MySQL Connectors å®˜ç½‘ï¼‰ï¼š å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å›¾ç®€å•æè¿°ä¸€ä¸‹JDBCå’Œæ•°æ®è¿žæŽ¥çš„ç¤ºæ„å›¾ï¼Œå¦‚ä¸‹å›¾ï¼š ä¸€å›¾èƒœåƒè¨€ï¼ŒJava åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ JDBC å’Œæ•°æ®åº“é©±åŠ¨ç¨‹åºè¿žæŽ¥ã€è®¿é—®ã€æ“ä½œæ•°æ®åº“ï¼ˆMySQLã€Oracleç­‰ï¼‰ã€‚ é…ç½® pom æ–‡ä»¶æˆ‘è¿˜æ˜¯ç”¨ Github ä»£ç ä»“åº“çš„ä¾‹å­ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œ Clone ä»£ç ã€‚ æ‰“å¼€å·¥ç¨‹çš„ pom.xml æ–‡ä»¶ï¼Œå¢žåŠ  mysql-connector-java å’Œ spring-boot-starter-jdbc ä¾èµ–ï¼Œä»Žä¸Šé¢å†…å®¹å¤§å®¶åº”è¯¥å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆè¦åŠ å…¥è¿™ä¸¤é¡¹äº†å§ï¼ 12345678910&lt;!--mysql-connector-java--&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;&lt;/dependency&gt; ç­‰å¾… Maven ä¸‹è½½å®Œæˆè¿™ä¸¤é¡¹ä¾èµ–ã€‚ é…ç½® propertiesæ‰“å¼€ application-dev.properties æ–‡ä»¶ï¼Œå¢žåŠ å¦‚ä¸‹å†…å®¹ï¼š 1234567891011# jdbc# spring.datasource.driver-class-name=com.mysql.jdbc.Driver# JDBC spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver# è¿žæŽ¥çš„æ•°æ®åº“# spring.datasource.url=jdbc:mysql://127.0.0.1:3306/mzc_userspring.datasource.url=jdbc:mysql://127.0.0.1:3306/mzc_user?serverTimezone=GMT%2B8&amp;useUnicode=true&amp;characterEncoding=utf-8# æ•°æ®åº“ç”¨æˆ·åspring.datasource.username=root# æ•°æ®åº“å¯†ç spring.datasource.password=pwd123 å…¶ä¸­ mzc_user æ˜¯æˆ‘åˆ›å»ºçš„æ•°æ®åº“æ–‡ä»¶åç§°ï¼Œå¤§å®¶è¦æ ¹æ®è‡ªå·±çš„å®žé™…æƒ…å†µåšç›¸å…³çš„ä¿®æ”¹ã€‚é…ç½® properties æ³¨æ„ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ã€‚ 1ã€spring.datasource.driver-class-name çš„é…ç½®å¦‚æžœé…ç½®å€¼ä¸º com.mysql.jdbc.Driverï¼Œä¼šæŠ¥ä¸‹é¢çš„è­¦å‘Šï¼š 123Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary. æ„æ€æ˜¯è¿™ä¸ªç±»å·²ç»è¿‡æ—¶äº†ï¼Œè¯·ä½¿ç”¨æœ€æ–°çš„ jdbc.driver ä¿®æ”¹æ•°æ®æºé…ç½®ï¼Œå¦‚ä¸‹ï¼š 1spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver 2ã€spring.datasource.url çš„é…ç½®å…³äºŽè¿™ä¸ªurl çš„é…ç½®ï¼Œå®˜æ–¹æœ‰æ›´åŠ è¯¦ç»†çš„é…ç½®è¯´æ˜Žï¼Œå¯ä»¥å‚è€ƒ Connection URL Syntax å’Œ Configuration Properties ä¸¤ç¯‡æ–‡æ¡£ã€‚ å¦‚æžœé…ç½®ä¸º spring.datasource.url=jdbc:mysql://127.0.0.1:3306/mzc_userï¼Œä¼šä¸€ç›´æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12The server time zone value 'ï¿½Ð¹ï¿½ï¿½ï¿½×¼Ê±ï¿½ï¿½' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support. è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å¦‚ä¸‹3ç§è§£å†³æ–¹æ¡ˆã€‚ 1ã€æŒ‡å®šæ—¶åŒº 12// åŒ—äº¬æ—¶é—´ä¸œå…«åŒºserverTimezone=GMT%2B8 æ³¨æ„ï¼Œ%2B æ˜¯ + çš„ç¼–ç æ ¼å¼ã€‚å¦‚æžœä½ è®¾ç½® serverTimezone=UTCï¼Œè¿žæŽ¥ä¸æŠ¥é”™ï¼Œ ä½†åœ¨ç”¨javaä»£ç æ’å…¥åˆ°æ•°æ®åº“æ—¶é—´çš„æ—¶å€™å´å‡ºçŽ°äº†é—®é¢˜ã€‚ æ¯”å¦‚åœ¨ Java ä»£ç é‡Œé¢æ’å…¥çš„æ—¶é—´ä¸º 2018-06-24 17:29:56ï¼Œä½†æ˜¯åœ¨æ•°æ®åº“é‡Œé¢æ˜¾ç¤ºçš„æ—¶é—´å´ä¸º 2018-06-24 09:29:56ï¼Œè¿™æ ·å°±æœ‰äº†8ä¸ªå°æ—¶çš„æ—¶å·®ã€‚UTC ä»£è¡¨çš„æ˜¯å…¨çƒæ ‡å‡†æ—¶é—´ ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨çš„æ—¶é—´æ˜¯åŒ—äº¬æ—¶åŒºä¹Ÿå°±æ˜¯ä¸œå…«åŒºï¼Œé¢†å…ˆ UTC å…«ä¸ªå°æ—¶ã€‚ 12345// äº¬æ—¶é—´ä¸œå…«åŒºserverTimezone=GMT%2B8// æˆ–è€…ä½¿ç”¨ä¸Šæµ·æ—¶é—´serverTimezone=Asia/Shanghai 2ã€ä¿®æ”¹ MySQL é…ç½®æ–‡ä»¶ æˆ‘åœ¨ Windows 10 æ‰¾åˆ° MySQL é…ç½®æ–‡ä»¶ my.ini ï¼Œå¦‚æžœä½ æ²¡æœ‰æ‰¾åˆ°å¯ä»¥å‚è€ƒ MySQL8.0.15åœ¨Win10ä¸Šçš„æŠ˜è…¾è®° è¿™ç¯‡æ–‡ç« ï¼Œéž Windows ç³»ç»Ÿå¯èƒ½é…ç½®æ–‡ä»¶æ—¶ my.cnfã€‚ åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¢žåŠ é»˜è®¤æ—¶åŒºé…ç½®ï¼š 1default-time-zone=&apos;+08:00&apos; åœ¨ my.ini æˆ–è€… my.cnf æ–‡ä»¶çš„ [mysqld] ä¸‹é¢å¢žåŠ ä¸Šé¢é…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789[mysqld]# Set default time-zonedefault-time-zone=&apos;+08:00&apos;# The TCP/IP Port the MySQL Server will listen onport=3306# ... ä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹åŽï¼Œé‡å¯MySQLæœåŠ¡å°±å¯ä»¥äº†ã€‚ 3ã€ä¿®æ”¹æ•°æ®åº“ï¼Œ é…ç½®å…¨å±€æ—¶åŒº åˆ‡æ¢åˆ°åç§°ä¸º mysql çš„æ•°æ®åº“ï¼Œç„¶åŽæ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼š 1234show variables like '%time_zone%';# è®¾ç½®å…¨å±€æ—¶åŒºï¼Œå³æ—¶ç”Ÿæ•ˆï¼Œä½œç”¨äºŽæ‰€æœ‰sessionset global time_zone='+8:00'; è®¾ç½®å®ŒæˆåŽï¼Œå¯ä»¥ä½¿ç”¨ show variables like &#39;%time_zone%&#39;; çœ‹çœ‹æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚ ä½ ä¹Ÿå¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯åªèƒ½å¯¹å½“å‰çš„ session ç”Ÿæ•ˆï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12# è®¾ç½®å½“å‰sessionæ—¶åŒºï¼Œå³æ—¶ç”Ÿæ•ˆï¼Œä½†ä»…ä½œç”¨äºŽå½“å‰sessionset time_zone='+8:00'; æˆ‘ä¸ªäººä½¿ç”¨çš„æ˜¯ä¸Šè¿°ä¸­çš„ç¬¬1ç§æ–¹æ³•ï¼Œæˆ‘ä¹ŸæŽ¨èå¤§å®¶ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œç®€å•ä¸”æ— å‰¯ä½œç”¨ã€‚ è¿™é‡Œæœ‰ä¸€ç¯‡å‘è®° jdbc mysql connector 6 æ—¶åŒºé—®é¢˜ï¼Œå…³äºŽè®¾ç½® time_zone çš„å‘ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹ã€‚ ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä»£ç é…ç½®å®Œæˆä¹‹åŽï¼Œæˆ‘ä»¬å¯ä»¥å†™ç‚¹æµ‹è¯•ä»£ç äº†ã€‚ æœ¬èŠ‚çš„ä»£ç ä¸»è¦é›†ä¸­åœ¨ MSUserServiceã€MSUserServiceImplã€MSDBTests ä¸­ï¼Œå…¶ä¸­ MSUserService æ˜¯æŽ¥å£ï¼Œå®šä¹‰äº†ä¸€äº›æ•°æ®åº“æ“ä½œçš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415import java.util.List;import java.util.Map;public interface MSUserService &#123; int createUser(MSUser user); int deleteByUid(Integer uid); List&lt;Map&gt; queryUserByUid(Integer uid); List&lt;Map&gt; queryUserByUserName(String userName); int deleteUserTable();&#125; è€Œ MSUserServiceImpl åˆ™æ˜¯ MSUserService çš„å®žçŽ°ç±»ï¼Œ MSDBTests ä¸»è¦æ˜¯æµ‹è¯•ç±»ï¼Œç”¨æ¥æµ‹è¯•æ“ä½œ MySQL æ•°æ®è¡¨çš„å¦‚åˆ›å»ºè¡¨ã€æŸ¥è¯¢ã€åˆ é™¤ç­‰æ“ä½œã€‚å¤§å®¶è‡ªè¡Œ Clone ä»£ç åŽ»çœ‹å®žçŽ°å³å¯ï¼Œæˆ‘å°±ä¸åœ¨è¿™é‡Œå ç”¨ç¯‡å¹…è´´ä»£ç äº†ã€‚ åœ¨æœ¬èŠ‚ä»£ç ä¸­ï¼Œæ–°å¢žåŠ äº†ä¸¤ä¸ªæ³¨è§£çš„ä½¿ç”¨å³ @Service å’Œ @Slf4jï¼Œ@Slf4j è¿™ä¸ªæ³¨è§£ä¸»è¦ç”¨æ¥ç®€åŒ–ä½¿ç”¨æ—¥å¿—ã€‚è€Œ @Service æ³¨è§£æ‰¿æ‹…äº†ä¸¤ä¸ªèŒè´£ä¸€æ˜¯ Bean çš„åˆ›å»ºï¼ŒäºŒæ˜¯å°†ä¸€ä¸ªç±»æ ‡è¯†ä¸ºä¸€ä¸ªæœåŠ¡ã€‚åŽç»­æˆ‘ä¼šå†æ·±å…¥è·Ÿå¤§å®¶åˆ†äº« @Service è¿™ä¸ªæ³¨è§£ï¼Œç›®å‰ä½ åªéœ€è¦ç”¨ä¸Šå®ƒå°±å¯ä»¥äº†ã€‚ åœ¨æœ¬èŠ‚çš„ä¾‹å­ä¸­ï¼Œç”¨åˆ°çš„æ•°æ®è¡¨ï¼ˆuserï¼‰çš„æ•°æ®ç»“æž„å¤§æ¦‚å¦‚ä¸‹ï¼š å¯åŠ¨ MySQL æœåŠ¡ï¼Œç„¶åŽå¯åŠ¨ MSDBTests ä¸­çš„æµ‹è¯•ä»£ç ï¼Œå°±å¯ä»¥çœ‹åˆ°å®žé™…æ•ˆæžœäº†ã€‚ 1234567891011121314151617181920212223242526@Testpublic void createUserSQLTest() &#123; MSUser user = new MSUser(); user.setUserID(1); user.setAccountName("mzc"); user.setAccountPwd("123"); user.setNickName("veryitman"); user.setMotto("foo"); user.setAge(25); user.setGender(MSUser.GENDER_MALE); user.setPhone("17122036530"); // å¢žåŠ useræ•°æ® msUserService.createUser(user);&#125;@Testpublic void queryUserBySQLTest() &#123; // æ ¹æ®user_idæŸ¥è¯¢ List&lt;Map&gt; userJson = msUserService.queryUserByUid(1); logger.info("MSBlog Test, userJson by query user's id: " + userJson.get(0)); // æ ¹æ®user_nameæŸ¥è¯¢ userJson = msUserService.queryUserByUserName("mzc"); logger.info("MSBlog Test, userJson by query user's name: " + userJson.get(0));&#125; ä»Šå¤©å°±åˆ†äº«åˆ°è¿™é‡Œï¼Œä¸‹æ¬¡ç»“åˆç™»å½•æ³¨å†Œä¾‹å­æ“ä½œ MySQL æ•°æ®åº“ã€‚ åšäº‹æƒ…ï¼Œä¸é—®èƒ½ä¸èƒ½åšæˆï¼Œè¦é—®åº”ä¸åº”è¯¥åšã€‚]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>MySQL JDBC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çŸ­åœ°å€åŽŸç†]]></title>
    <url>%2F2019%2F11%2F24%2F%E7%9F%AD%E5%9C%B0%E5%9D%80%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹ä¸€ä¸ªåŒäº‹é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä»–è¯´å—é™äºŽç¬¬ä¸‰æ–¹çš„æœåŠ¡ï¼Œè‡ªå·±è¯·æ±‚æ‰€å¸¦è¿‡åŽ»çš„å­—ç¬¦ä¸²å› ä¸ºå¤ªé•¿ï¼Œæ— æ³•ä»Žç¬¬ä¸‰æ–¹æœåŠ¡èŽ·å–ä¿¡æ¯ï¼Œå¾ˆæ˜¯è‹¦æ¼ðŸ˜´ã€‚åŽæ¥æˆ‘ä»¬å•†é‡äº†ä¸€ä¸‹ï¼Œæœ€ç»ˆå€Ÿé‰´çŸ­åœ°å€çš„æ€æƒ³è§£å†³äº†é—®é¢˜ã€‚é“ç†å¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬è¯·æ±‚ä¸­çš„é™„åŠ å­—ç¬¦ä¸²ä¿¡æ¯ç¬¬ä¸‰æ–¹æœåŠ¡åªæ˜¯é€ä¼ å›žæ¥ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠè¿™äº›é™„åŠ ä¿¡æ¯è¿›è¡Œå­—ç¬¦åŽ‹ç¼©å°±å¯ä»¥äº†ï¼Œè¿™æ ·è¯·æ±‚å¸¦è¿‡åŽ»çš„å­—ç¬¦ä¸²é•¿åº¦å°±æ»¡è¶³äº†è¦æ±‚ðŸ˜Šã€‚ æ— è®ºæ˜¯å†™æ–‡ç« è¿˜æ˜¯åˆ¶ä½œä¸€äº›è¡¨æ ¼çš„æ—¶å€™ï¼Œæˆ‘ä¼šæ—¶å¸¸ç”¨åˆ°çŸ­åœ°å€ã€‚çŸ­åœ°å€çš„ä¼˜åŠ¿åœ¨äºŽå…¶çŸ­ï¼ˆå­—ç¬¦å°‘ï¼‰ã€ç®€æ´ï¼Œæ–¹ä¾¿ä¹¦å†™åˆä¸å ä½ç½®ã€‚æ–¹ä¾¿åœ¨ç¤¾äº¤ç½‘ç»œå’Œç¬¬ä¸‰æ–¹å¹³å°ä¸Šåˆ†äº«é“¾æŽ¥ï¼ŒæŠ•æ”¾å¹¿å‘Šã€‚æ¯”å¦‚æœ‰äººä¼šåœ¨å‘æœ‹å‹åœˆçš„æ—¶å€™å¸¦ä¸ŠçŸ­åœ°å€ï¼Œè¿˜æœ‰ä¸€äº›è¥é”€çŸ­ä¿¡é‡Œé¢ä¹Ÿä¼šå¸¦ä¸€äº›çŸ­åœ°å€é“¾æŽ¥ã€‚ æœ‰çŽ°æˆçš„çŸ­åœ°å€ç”Ÿæˆå™¨ï¼Œå¸¸ç”¨çš„çŸ­åœ°å€è½¬æ¢æœ‰ ç™¾åº¦çŸ­ç½‘å€è½¬æ¢ã€GoogleçŸ­ç½‘å€è½¬æ¢ å’Œ æ–°æµªçŸ­åœ°å€è½¬æ¢ï¼Œå¯æƒœçš„æ˜¯è°·æ­Œå…³é—­äº†è¯¥æœåŠ¡ï¼Œå®˜æ–¹å‘è¨€å¦‚ä¸‹ï¼š 12345On March 30, 2018, we turned down support for goo.gl URL shortener. From April 13, 2018, only existing users were able to create short links on the goo.gl console.Analytics data was available for up to one year, until March 30, 2019, when goo.gl was discontinued. Previously created links will continue to redirect to their intended destination. Please see this blog post for more details. æˆ‘ç»å¸¸ä½¿ç”¨ç™¾åº¦çš„çŸ­åœ°å€æœåŠ¡ï¼Œåœ¨å›½å†…è®¿é—®å®ƒæ˜¯æœ€å¿«çš„ä¹Ÿèƒ½æ»¡è¶³æˆ‘çš„å·¥ä½œå’Œå­¦ä¹ éœ€æ±‚ï¼Œå®ƒä¹Ÿæä¾› API æœåŠ¡å¯ä»¥å‚è€ƒ çŸ­ç½‘å€ç”ŸæˆæŽ¥å£æ–‡æ¡£ å­¦ä¹ å’Œäº†è§£ã€‚ æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ HTTP åè®®ä¸­é‚£äº›é‡å®šå‘çš„äº‹ã€‚ HTTP è¯·æ±‚é‡å®šå‘HTTP ä¸­çš„ 301ã€302ã€303ã€307ã€308 å“åº”çŠ¶æ€ç ï¼Œéƒ½è¡¨ç¤ºé‡å®šå‘çš„å“åº”ã€‚ å…¶ä¸­ï¼Œ301ã€308 å“åº”çŠ¶æ€ç è¡¨ç¤ºæ°¸ä¹…é‡å®šå‘ï¼Œ302ã€303ã€307 è¡¨ç¤ºä¸´æ—¶é‡å®šå‘ã€‚ é‚£æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯é‡å®šå‘ï¼Ÿ é‡å®šå‘(Redirect)å°±æ˜¯é€šè¿‡å„ç§æ–¹æ³•å°†å„ç§ç½‘ç»œè¯·æ±‚é‡æ–°å®šä¸ªæ–¹å‘è½¬åˆ°å…¶å®ƒä½ç½®ï¼ˆå¦‚ï¼šç½‘é¡µé‡å®šå‘ã€åŸŸåçš„é‡å®šå‘ã€è·¯ç”±é€‰æ‹©çš„å˜åŒ–ä¹Ÿæ˜¯å¯¹æ•°æ®æŠ¥æ–‡ç»ç”±è·¯å¾„çš„ä¸€ç§é‡å®šå‘ï¼‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œä½ è¦åŽ» A æœºæž„åŠžç†ä¸€ä¸ªè¯ä»¶ï¼Œç­‰ä½ åŽ»äº†ä¹‹åŽAæœºæž„çš„æŸäººå‘Šè¯‰ä½ ä»–ä»¬ä¸å†å—ç†æ­¤äº‹äº†ï¼Œéœ€è¦ä½ åŽ» B æœºæž„åŠžç†ï¼Œç„¶åŽä½ å°±è‡ªå·±åŽ»äº† B æœºæž„ã€‚è¿™ä¸ªè¿‡ç¨‹å°±ç±»ä¼¼äºŽé‡å®šå‘ã€‚ é‚£ä¹ˆï¼ŒHTTP åè®®ä¸­å®šä¹‰çš„è¿™äº›30Xå“åº”çŠ¶æ€ç å°±å¥½æ¯” Aæœºæž„çš„æŸäºº å®ƒä»¬å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œä½ éœ€è¦è®¿é—®å¦å¤–ä¸€ä¸ªåœ°å€äº†ã€‚ é‡å®šå‘åšäº†ä¸¤æ¬¡ HTTP è¯·æ±‚ï¼Œ ç¬¬ä¸€æ¬¡ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ A æœåŠ¡å™¨ï¼ŒA å“åº”å‘Šè¯‰æµè§ˆå™¨ï¼Œä½ åº”è¯¥åŽ» B æœåŠ¡å™¨è®¿é—®ã€‚æ­¤æ—¶å°±åŽ»è®¿é—®æœåŠ¡å™¨ Bï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥çœ‹åˆ°æµè§ˆå™¨ä¸­çš„ç½‘å€å˜äº†ï¼Œè¿™å°±æ˜¯ç¬¬äºŒæ¬¡ HTTP è¯·æ±‚ã€‚ é‡å®šå‘è¿‡ç¨‹ï¼š Step-1ã€æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰å‘é€ HTTP è¯·æ±‚ï¼› Step-2ã€WebæœåŠ¡å™¨AæŽ¥æ”¶åŽå‘é€ 302 çŠ¶æ€ç å“åº”ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æŠŠå¯¹åº”çš„ Location ç»™æµè§ˆå™¨ï¼› Step-3ã€æµè§ˆå™¨æ”¶åˆ°æœåŠ¡å™¨è¿”å›žçš„ 302 å“åº”ç ï¼Œå°±è‡ªåŠ¨å†å‘é€ä¸€ä¸ªæ–°çš„ HTTP è¯·æ±‚ï¼ˆè¯·æ±‚URLæ˜¯æ–°çš„ Location ä¸­çš„åœ°å€ï¼‰ï¼› Step-4ã€WebæœåŠ¡å™¨ï¼ˆå¯èƒ½æ˜¯ A ä¹Ÿå¯èƒ½æ˜¯å…¶ä»–æœåŠ¡å™¨ï¼‰æ ¹æ®æ­¤è¯·æ±‚å¯»æ‰¾èµ„æºå¹¶å‘é€ç»™æµè§ˆå™¨ï¼Œæœ€ç»ˆå±•ç¤ºç»™ç”¨æˆ·ã€‚ å…³äºŽ Location å¯ä»¥çœ‹ä¸‹é¢çš„æˆªå›¾ï¼ˆè¿™æ˜¯ä¸€ä¸ªé‡å®šå‘çš„ HTTP è¯·æ±‚ç¤ºä¾‹ï¼‰ï¼Œå®ƒæ˜¯è¢«æ”¾åœ¨å“åº”å¤´ä¸­çš„ï¼Œå…¶å€¼æ˜¯éœ€è¦é‡å®šå‘çš„ç½‘å€ http://www.veryitman.comï¼Œä»Žè¿™ä¸ªè¿‡ç¨‹æ¥çœ‹å¯ä»¥çœ‹å‡ºé‡å®šå‘æ˜¯å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è¡Œä¸ºã€‚ è¿˜æœ‰ä¸ªå«è½¬å‘çš„æŠ€æœ¯ï¼Œè¿™ä¸ªå’Œé‡å®šå‘æ˜¯ä¸ä¸€æ ·çš„ï¼Œè½¬å‘æ˜¯æœåŠ¡å™¨è¡Œä¸ºï¼Œè¿˜æ‹¿ä¸Šé¢çš„ A æœºæž„ä¾‹å­æ¥è¯´ï¼Œä½ è¦åŽ» A æœºæž„åŠžç†ä¸€ä¸ªè¯ä»¶ï¼Œç­‰ä½ åŽ»äº†ä¹‹åŽ A æœºæž„çš„æŸäººå‘Šè¯‰ä½ ä»–ä»¬ä¸å†å—ç†æ­¤äº‹äº†ï¼Œä½†æ˜¯ A æœºæž„å¯ä»¥è‡ªå·±åè°ƒèµ„æºå¸®ä½ å®Œæˆè€Œä¸éœ€è¦ä½ åŽ»å…¶ä»–æœºæž„åŠžç†äº†ã€‚è¿™ä¸ªè¿‡ç¨‹å°±ç±»ä¼¼äºŽè½¬å‘ã€‚ æ¨¡æ‹Ÿé‡å®šå‘çŽ°åœ¨ä½¿ç”¨ SpringBoot æ¨¡æ‹Ÿä¸€ä¸‹é‡å®šå‘ï¼Œæˆ‘ç”¨çš„ SpringBoot æ˜¯ 2.2.0.RELEASE ç‰ˆæœ¬ã€‚ â‘ ã€æ–°å»º SpringBoot Web å·¥ç¨‹ï¼Œå¯ä»¥å‚è€ƒ å¾®æœåŠ¡-æƒ³åŠžæ³•è®©é¡¹ç›®è¿è¡Œèµ·æ¥ è¿™ç¯‡æ–‡ç« ã€‚ â‘¡ã€ä¿®æ”¹ pom æ–‡ä»¶ï¼Œå¢žåŠ  fastjsonï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.62&lt;/version&gt;&lt;/dependency&gt; â‘¢ã€æ–°å»º MSTestRedirectController æ–‡ä»¶ï¼Œæºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223import com.alibaba.fastjson.JSON;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import javax.servlet.http.HttpServletRequest;@Controller@RequestMapping(value = "testredirect")public class MSTestRedirectController &#123; @GetMapping(value = "/access/web") public String redirect() &#123; return "redirect:/testredirect/index/realweb?parameter=coming"; &#125; @ResponseBody @GetMapping(value = "/index/realweb") public String real(HttpServletRequest request) &#123; return "redirect happenedï¼š" + JSON.toJSONString(request.getParameterMap()); &#125;&#125; è¿™é‡Œè¦æ³¨æ„å‡ ä¸ªé—®é¢˜ï¼š æ—¢ç„¶æ˜¯é‡å®šå‘ï¼Œè¯¥ Controller ä¸èƒ½ä½¿ç”¨ @RestController æ³¨è§£è€Œè¦ä½¿ç”¨ @Controller æ³¨è§£ï¼› è¿™é‡Œä½¿ç”¨äº†å…³é”®å­— redirect å®žçŽ°é‡å®šå‘ï¼› â‘£ã€å¯åŠ¨å·¥ç¨‹ï¼Œå¹¶åœ¨æµè§ˆå™¨è®¿é—®ä¸‹é¢çš„ç½‘å€ 1http://localhost:8080/testredirect/access/web å¯ä»¥çœ‹åˆ°æµè§ˆå™¨å‘ç”Ÿäº†é‡å®šå‘ï¼Œæˆªå›¾å¦‚ä¸‹ï¼š é™¤äº†ä¸Šé¢çš„æ–¹æ³•å¯ä»¥å®žçŽ°é‡å®šå‘å¤–è¿˜å¯ä½¿ç”¨ HttpServletResponse çš„ sendRedirect æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516@GetMapping(value = "/access/web2")public String redirect2(HttpServletResponse response) &#123; try &#123; // æ–¹æ³•1ï¼šè‡ªå®šä¹‰çŠ¶æ€ç æ–¹å¼ // String url = "http://localhost:8080/testredirect/index/realweb?parameter=coming"; //response.setHeader("Location", url); //response.sendError(301); // æ–¹æ³•2ï¼šsendRedirectï¼Œé»˜è®¤è¿”å›žçš„çŠ¶æ€ç æ˜¯ 302 response.sendRedirect("/testredirect/index/realweb?parameter=coming"); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; return ""; &#125;&#125; è¯·æ±‚çŸ­åœ°å€è¿‡ç¨‹æˆ‘æ‹¿ç½‘å€ http://www.veryitman.com/ æ¥ä¸¾å®žä¾‹ï¼Œä½¿ç”¨ç™¾åº¦çŸ­åœ°å€æœåŠ¡ã€‚ åœ¨ ç™¾åº¦çŸ­åœ°å€é¡µé¢ åŽ»ç”Ÿæˆ http://www.veryitman.com/ å¯¹åº”çš„çŸ­åœ°å€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¾—åˆ°çŸ­åœ°å€æ˜¯ https://dwz.cn/hnmau4Zs å¤åˆ¶è¯¥åœ°å€æ‹·è´åˆ°æµè§ˆå™¨ï¼ˆæˆ‘ç”¨çš„æ˜¯ Chrome æµè§ˆå™¨ï¼‰çš„åœ°å€æ ä¸­ï¼Œå¹¶æ‰“å¼€ Chrome çš„å®¡æŸ¥è§†å›¾ã€‚åˆ‡æ¢åˆ° Network é€‰é¡¹ï¼Œæ­¤æ—¶å›žè½¦æ‰“å¼€çŸ­ç½‘å€ã€‚ HTTP å‘é€äº† GET è¯·æ±‚ï¼ˆçº¢è‰²1ï¼‰ï¼Œè¯·æ±‚åœ°å€æ˜¯ https://dwz.cn/hnmau4Zs ï¼ŒæœåŠ¡å™¨ï¼ˆç™¾åº¦çš„çŸ­åœ°å€æœåŠ¡ï¼‰è¿”å›žç»™ Chrome æµè§ˆå™¨ 302 çŠ¶æ€ç ï¼Œæµè§ˆå™¨å‘çŽ°æ˜¯è¯¥é‡å®šå‘ç å°±å†æ¬¡ç”¨ Location é‡Œé¢åŒ…å«çš„åœ°å€å‘é€äº†ç¬¬äºŒæ¬¡è¯·æ±‚å³é‡å®šå‘è¯·æ±‚ã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¾®åšçš„çŸ­åœ°å€æœåŠ¡ï¼Œæé†’ä¸€ç‚¹ï¼Œå¾®åšçš„çŸ­åœ°å€è¯·æ±‚è¿”å›žç æ˜¯ 301 è€Œç™¾åº¦è¿”å›žçš„æ˜¯ 302 å“åº”ç ã€‚302 çŠ¶æ€ç å…è®¸å„ç§å„æ ·çš„é‡å®šå‘ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šå®žçŽ°ä¸ºåˆ° GET çš„é‡å®šå‘ï¼Œä½†æ˜¯ä¸èƒ½ç¡®ä¿ POST ä¼šé‡å®šå‘ä¸º POSTï¼Œ302 è¡¨ç¤ºæ—§åœ°å€Açš„èµ„æºè¿˜åœ¨ï¼ˆä»ç„¶å¯ä»¥è®¿é—®ï¼‰ï¼Œè¿™ä¸ªé‡å®šå‘åªæ˜¯ä¸´æ—¶åœ°ä»Žæ—§åœ°å€Aè·³è½¬åˆ°åœ°å€Bï¼›è€Œ 301 çŠ¶æ€ç è¡¨æ˜Žç›®æ ‡èµ„æºè¢«æ°¸ä¹…çš„ç§»åŠ¨åˆ°äº†ä¸€ä¸ªæ–°çš„ URIï¼Œä»»ä½•æœªæ¥å¯¹è¿™ä¸ªèµ„æºçš„å¼•ç”¨éƒ½åº”è¯¥ä½¿ç”¨æ–°çš„ URIã€‚ çŸ­åœ°å€åŽŸç†åˆšå¼€å§‹æˆ‘å¾ˆå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆæˆ‘æŠŠé•¿åœ°å€ A è½¬æ¢ä¸ºçŸ­åœ°å€ Bï¼Œç„¶åŽç”¨ B åŽ»è®¿é—®å±…ç„¶è¿˜æ˜¯ A åœ°å€çš„å†…å®¹ï¼Œæµè§ˆå™¨æ˜¯æ€Žä¹ˆåšåˆ°çš„ï¼Ÿ é€šè¿‡ä¸Šé¢çš„è¯·æ±‚è¿‡ç¨‹ç¤ºä¾‹ï¼Œç›¸ä¿¡å¤§å®¶åº”è¯¥å¤§æ¦‚ç†è§£äº†è¯·æ±‚çŸ­åœ°å€çš„åŽŸç†äº†ã€‚ åœ¨ç™¾åº¦çŸ­åœ°å€æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬å°† http://www.veryitman.com/ è½¬æ¢ä¸º https://dwz.cn/hnmau4Zs ï¼Œæ­¤æ—¶ç™¾åº¦çŸ­åœ°å€æœåŠ¡ç»´æŒäº† çŸ­-é•¿ åœ°å€çš„æ˜ å°„å…³ç³»äº†è€Œä¸”æ˜¯å”¯ä¸€çš„ï¼Œå½“æˆ‘ä»¬åŽ»è®¿é—® https://dwz.cn/hnmau4Zs ï¼Œå…¶å®žè¯·æ±‚çš„æ˜¯ç™¾åº¦çŸ­åœ°å€æœåŠ¡ï¼Œè¯¥æœåŠ¡å°†çŸ­åœ°å€å¯¹åº”çš„é•¿åœ°å€ï¼ˆæ”¾åœ¨å“åº”å¤´çš„ Location ä¸­ï¼‰è¿”å›žç»™æˆ‘ä»¬çš„æµè§ˆå™¨ï¼Œå¹¶è¿”å›ž 302 çŠ¶æ€ç ï¼Œæ­¤æ—¶æµè§ˆå™¨å°±é‡å®šå‘åˆ°äº† http://www.veryitman.com/ è¿™ä¸ªç½‘å€ä¸Šäº†ã€‚ ç®€å•æ€»ç»“ä¸€ä¸‹å…¶æ­¥éª¤å¦‚ä¸‹ï¼š Step-1ã€ç”¨æˆ·åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ https://dwz.cn/hnmau4Zs è¿™ä¸ªç½‘å€åŽ»è®¿é—®; Step-2ã€æµè§ˆå™¨è§£æž DNSï¼ŒèŽ·å–è¯¥åŸŸåå¯¹åº”çš„ IP åœ°å€; Step-3ã€èŽ·å–åˆ° IP åŽï¼Œæµè§ˆå™¨å‘é€ HTTP GET è¯·æ±‚æŸ¥è¯¢ hnmau4Zs å¹¶èŽ·å–åˆ° https://dwz.cn/hnmau4Zs å¯¹åº”çš„é•¿åœ°å€; Step-4ã€HTTP é€šè¿‡ 302 çŠ¶æ€ç è½¬åˆ°åŽ»è¯·æ±‚å¯¹åº”çš„é•¿åœ°å€ http://www.veryitman.com/ ä¸Šé¢äº†ã€‚ æˆ‘æŠŠ http://www.veryitman.com/ æ”¾åˆ°ç™¾åº¦å’Œå¾®åšçš„çŸ­åœ°å€ç”Ÿæˆåˆ†åˆ«æ˜¯ï¼š 12// ç™¾åº¦çŸ­åœ°å€https://dwz.cn/hnmau4Zs 12// å¾®åšæ®µåœ°å€http://1t.click/aMtD å¯ä»¥çœ‹å‡ºç™¾åº¦ç”Ÿæˆè¾ƒå¤æ‚ï¼Œé¦–å…ˆåè®®å˜æˆäº† HTTPSï¼Œå…¶æ¬¡ç”Ÿæˆä»£ç æ˜¯ 8 ä½ï¼ˆhnmau4Zsï¼‰ï¼Œè€Œå¾®åšç”Ÿæˆçš„æ˜¯ 4 ä½ï¼ˆaMtDï¼‰ä»£ç ã€‚ çŸ­åœ°å€ç ä¸€èˆ¬éƒ½æ˜¯ç”±26ä¸ªå¤§å†™å­—æ¯ A-Z ã€26ä¸ªå°å†™å­—æ¯ a-z å’Œ10ä¸ªæ•°å­— 0-9 å…±62ä¸ªå­—ç¬¦éšæœºç»„åˆè€Œæˆï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·æ¥ç”ŸæˆçŸ­åœ°å€ç ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª62è¿›åˆ¶ï¼ŒæŠŠè¿™62ä¸ªå­—ç¬¦æŒ‰ç…§10è¿›åˆ¶æ•°è½¬æˆ62è¿›åˆ¶æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°æ¯ä¸ªå­—ç¬¦å¯¹åº”çš„62è¿›åˆ¶æ•°äº†ã€‚åŒç†ï¼Œå°†çŸ­åœ°å€è¿˜åŽŸçš„æ—¶å€™æŠŠ62è¿›åˆ¶è½¬æ¢ä¸ºå¯¹åº”çš„10è¿›åˆ¶å°±å¯ä»¥äº†ã€‚ æ ¹æ®ä¸Šé¢ç®—æ³•ï¼Œå¯ä»¥çœ‹å‡ºç™¾åº¦å¯ä»¥æ”¯æŒ 62^8 ä¸ªçŸ­åœ°å€ï¼Œå¾®åšå¯ä»¥æ”¯æŒ 62^4 ä¸ªçŸ­åœ°å€ã€‚ å…³äºŽçŸ­åœ°å€ç”Ÿæˆçš„ç®—æ³•ï¼Œå¤§å®¶å¯ä»¥ç”¨SpringBootè‡ªå·±æ’¸ä¸€ä¸ªæˆ–è€…åŽ»ç½‘ä¸Šæ‰¾æ‰¾åˆ«äººå·²ç»å®žçŽ°çš„ã€‚ æ´»ç€ä¸æ˜¯é æ³ªæ°´æå–åŒæƒ…ï¼Œè€Œæ˜¯é æ±—æ°´èŽ·å¾—æŽŒå£°~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>Short-URL SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OpenSSL: å®ŒæˆVS2017çš„é…ç½®]]></title>
    <url>%2F2019%2F11%2F23%2FOpenSSL-%E5%AE%8C%E6%88%90VS2017%E7%9A%84%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹åœ¨ OpenSSL: ç”¨VS2017åˆ›å»ºCå·¥ç¨‹ ä¸­è·Ÿå¤§å®¶åˆ†äº«äº†å¦‚ä½•åœ¨ Visual Studio 2017 ä¸­åˆ›å»º C å·¥ç¨‹å’Œæ³¨æ„äº‹é¡¹ä»¥åŠé‡åˆ°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä»Šå¤©æˆ‘ä»¬å¼€å§‹åœ¨ Visual Studio 2017 ä¸­æ­å»º OpenSSL çš„å¼€å‘çŽ¯å¢ƒã€‚ å¾ˆå¤šäººåœ¨é…ç½® OpenSSL çŽ¯å¢ƒä¸­é‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œç”šè‡³è¿˜æœ‰æ”¾å¼ƒçš„ã€‚è¯´å®žè¯ï¼Œæˆ‘ä¹Ÿå·®ç‚¹å¥”æºƒäº†:(ï¼Œé…ç½®è¿™äº›é¬¼ä¸œè¥¿ç¡®å®žæœ‰ç‚¹å¤æ‚ï¼Œè¯´ä¸€å¥æ²ƒèŒ¨å¥¥ä¸€ç‚¹ä¹Ÿä¸è¿‡åˆ†ã€‚ å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å’Œä½ ä¸æœŸè€Œé‡ï¼Œèƒ½å¤Ÿå¸®åˆ°ä½ ï¼å†™æ–‡ä¸æ˜“ï¼Œå¦‚æžœæ–‡ä¸­æœ‰ä»»ä½•é”™è¯¯ä¹‹å¤„è¿˜æœ›å¤§å®¶ä¸åèµæ•™ã€‚ ä¸‹è½½OpenSSLä½¿ç”¨ OpenSSL æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€æ˜¯è‡ªå·±ä¸‹è½½å…¶æºç æŒ‰ç…§é…ç½®åŽ»ç¼–è¯‘ï¼Œç„¶åŽä½¿ç”¨ç¼–è¯‘åŽçš„åº“ï¼›å¦ä¸€ç§æ˜¯ä½¿ç”¨åˆ«äººå·²ç»ç¼–è¯‘å¥½çš„åº“æ–‡ä»¶ã€‚ æˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹æ³•ï¼Œåœ¨ precompiled-openssl ä¸‹è½½çš„ OpenSSL Libraryï¼Œä¸‹è½½å®ŒæˆåŽï¼Œè§£åŽ‹ã€‚ è®¾ç½®VS2017 ä¸‹é¢åˆ†å‡ ä¸ªæ­¥éª¤å®Œæˆè®¾ç½®ã€‚ 1ã€æ‹·è´æ–‡ä»¶åˆ°å·¥ç¨‹ä¸­åœ¨å·¥ç¨‹ç›®å½•ä¸‹é¢æ–°å»º vendor-openssl ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾ OpenSSL çš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ï¼Œä¾¿äºŽç®¡ç†ï¼Œä½ ä¹Ÿå¯ä»¥å–ä¸ªå…¶ä»–çš„åç§°ã€‚ è¿›å…¥è§£åŽ‹åŽçš„ openssl-1.1.0f-vs2017 ç›®å½•ï¼Œå¤åˆ¶ lib64 å’Œ include64 åˆ° vendor-openssl ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2ã€æ·»åŠ OpenSSLå¤´æ–‡ä»¶æ‰“å¼€å·¥ç¨‹çš„å±žæ€§è®¾ç½®ï¼Œæ‰“å¼€æ–¹æ³•å¦‚ä¸‹ï¼š æŒ‰ç…§ä¸Šè¿°æˆªå›¾çš„1ã€2ã€3ã€4ç‚¹å‡» Editï¼Œå‡ºçŽ°ä¸‹é¢çš„ç¼–è¾‘æ¡†ï¼Œå¦‚ä¸‹å›¾ï¼š é€‰æ‹© include64ç›®å½•ï¼Œå¦‚ä¸‹æˆªå›¾æ‰€ç¤ºï¼š ç‚¹å‡»OKå³å¯å®Œæˆå¤´æ–‡ä»¶çš„æ·»åŠ ã€‚ 3ã€æ·»åŠ OpenSSLåº“è·¯å¾„åŒç†ï¼Œæ‰“å¼€å±žæ€§è®¾ç½®ï¼Œç„¶åŽé€‰æ‹© Linker/Generalï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç‚¹å‡»Editï¼Œé€‰æ‹© OpenSSL çš„åº“è·¯å¾„ï¼Œå¦‚å›¾ï¼š 4ã€æ·»åŠ åº“åç§°åŒç†ï¼Œæ‰“å¼€å±žæ€§è®¾ç½®ï¼Œåœ¨ Linker/Input ä¸­è®¾ç½®ï¼Œå¦‚å›¾ï¼š ç‚¹å‡»Editï¼Œè¾“å…¥ä¸‹é¢åº“çš„åç§°ï¼ˆç¼–è¯‘åŽçš„OpenSSLåº“æ–‡ä»¶ï¼‰ï¼š ä¹¦å†™å®Œæ¯ä¸€ä¸ªéƒ½è¦æ¢è¡Œç»§ç»­å†™ä¸‹ä¸€ä¸ªåº“åç§°ï¼Œç›´åˆ°å†™å®Œä¸ºæ­¢ï¼Œå¦‚å›¾ï¼š ç‚¹å‡»å¼¹æ¡†çš„OKæŒ‰é’®ï¼Œå…³é—­æ‰€æœ‰å¼¹æ¡†ã€‚ base64ç¼–è§£ç åœ¨èµ„æºç®¡ç†å™¨è§†å›¾ä¸­ï¼Œæ–°å»ºæºæ–‡ä»¶ï¼Œåˆ†åˆ«æ·»åŠ  mzc_base64.hã€mzc_base64.c å’Œ main.c ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š è¿™é‡Œæˆ‘åªç»™å‡ºæµ‹è¯•çš„ä»£ç (main.cæºç )ï¼Œå…·ä½“çš„ç¼–è§£ç ä»£ç ï¼Œå¤§å®¶å¯ä»¥åŽ» GitHub æŸ¥çœ‹ã€‚ 12345678910111213141516171819202122232425#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include "mzc_base64.h"int main()&#123; //Encode To Base64 char *base64EncodeOutput; //Take the web's url of my blog as example:http://veryitman.com char *text = "http:\/\/veryitman.com"; mzc_base64_encode(text, strlen(text), &amp;base64EncodeOutput); printf("Base64 encode output: %s\n", base64EncodeOutput); //Decode From Base64 char* base64DecodeOutput; size_t test; const char *base64Encode_str = "aHR0cDovL3ZlcnlpdG1hbi5jb20="; mzc_base64_decode(base64Encode_str, &amp;base64DecodeOutput, &amp;test); printf("Base64 decode output: %s %d\n", base64DecodeOutput, test); return 0;&#125; åœ¨ Visual Studio 2017 ä¸­ä½¿ç”¨å¿«æ·é”® Ctrl+F5 è¿è¡Œå·¥ç¨‹æŠ¥é”™ï¼ŒæŠ¥é”™å¦‚å›¾ï¼š éœ€è¦æ‹·è´ openssl-1.1.0f-vs2017 ç›®å½•ä¸­çš„bin64é‡Œé¢çš„å†…å®¹ï¼š æŠŠè¿™äº›æ–‡ä»¶æ”¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„ç›®å½•ä¸­ï¼Œå¦‚å›¾ï¼š å†æ¬¡ Ctrl+F5 å°±å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†ã€‚ æ³¨æ„ï¼šç‚¹å‡» æºç æ–‡ä»¶ å¯ä»¥èŽ·å–æœ¬æ–‡çš„ä»£ç ã€‚ æ´»ç€ä¸æ˜¯é æ³ªæ°´æå–åŒæƒ…ï¼Œè€Œæ˜¯é æ±—æ°´èŽ·å¾—æŽŒå£°~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>OpenSSL VS2017</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OpenSSL: ç”¨VS2017åˆ›å»ºCå·¥ç¨‹]]></title>
    <url>%2F2019%2F11%2F23%2FOpenSSL-%E7%94%A8VS2017%E5%88%9B%E5%BB%BAC%E5%B7%A5%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹è¯¥ç³»åˆ—æ–‡ç« ç»™å¤§å®¶ï¼ˆä¸»è¦æ˜¯åˆšæŽ¥è§¦Visual Studioå·¥å…·çš„Cå¼€å‘è€…ï¼‰å¸¦æ¥ä½¿ç”¨å¼€å‘å·¥å…·Visual Studio 2017è¿›è¡ŒOpenSSLç¼–ç¨‹ï¼ŒåŒ…æ‹¬base64ï¼ŒAESã€DESå’ŒRSAåŠ è§£å¯†ç­‰å†…å®¹ã€‚ å¯¹äºŽC/C++çš„ç¼–ç¨‹ï¼Œæˆ‘å·¥ä½œä¹‹åŽåŸºæœ¬éƒ½æ˜¯åœ¨Linuxä¸Šé¢å†™ï¼Œå¾ˆå°‘åœ¨Windowsä¸Šé¢è€•è€˜ã€‚æœ€è¿‘æ”¶åˆ°å‡ ä¸ªå°ä¼™ä¼´çš„é‚®ä»¶ï¼Œæœ‰è¯·æ•™å¦‚ä½•åœ¨Windowsä¸Šé¢è¿›è¡ŒCç¼–ç¨‹çš„ï¼Œä¹Ÿæœ‰é—®å…³äºŽOpenSSLçš„åŸºç¡€çŸ¥è¯†çš„ã€‚è¯´å®žè¯æˆ‘ä¹Ÿä¸æ˜¯å¾ˆç†Ÿæ‚‰Windowsä¸Šé¢çš„Cç¼–ç¨‹ï¼Œä½†å‡­å€Ÿç€ä¸€è‚¡è‡ªä¿¡è¿˜æ˜¯ç¡¬ç€å¤´çš®å®žè·µäº†ä¸€æŠŠï¼Œç®—æ˜¯ç»™å¤§å®¶ä¸€ä¸ªäº¤å¾…ã€‚ åœ¨è¿™é‡Œéžå¸¸æ„Ÿè°¢ç½‘åä¸ºâ€œä¸ºCå¥‹æ–—â€çš„å»ºè®®ï¼Œä¹Ÿæ„Ÿè°¢ç½‘ä¸Šå¼€æºä»£ç çš„ä½œè€…ä»¬ï¼Œå¦‚æžœæ²¡æœ‰ä»–ä»¬çš„è´¡çŒ®ï¼Œæˆ‘å¯èƒ½æ ¹æœ¬åšæŒä¸ä¸‹æ¥æŠŠè¿™äº›çŸ¥è¯†åšä»¥æ€»ç»“å’Œåˆ†äº«ã€‚ å†™æ–‡ä¸æ˜“ï¼ŒæŒ‘ç¯å¤œæˆ˜ï¼Œå¦‚æžœæ–‡ä¸­æœ‰ä»»ä½•é”™è¯¯ä¹‹å¤„è¿˜æœ›å¤§å®¶ä¸åèµæ•™ã€‚ è¯¥ç³»åˆ—æ–‡ç« ä¸­ç›¸å…³ä»£ç æˆ‘éƒ½æ‰˜ç®¡åœ¨Githubä¸Šé¢äº†ï¼Œç‚¹å‡» c-openssl å¯ä»¥èŽ·å–ã€‚ åˆ›å»ºCå·¥ç¨‹ è¿™éƒ¨åˆ†ä»‹ç»å¦‚ä½•åœ¨Visual Studio 2017ä¸­åˆ›å»ºCå·¥ç¨‹ã€‚ æ‰“å¼€Visual Studio 2017ï¼Œé€‰æ‹©File/New/Project...ï¼Œç´§æŽ¥ç€å®Œæˆä¸‹é¢æˆªå›¾ä¸­çš„æ­¥éª¤å³å¯å®Œæˆå·¥ç¨‹åˆ›å»ºã€‚ ç‚¹å‡»OKç¨ç­‰å‡ ç§’å°±å¯ä»¥å®Œæˆå·¥ç¨‹çš„åˆ›å»ºï¼Œåˆ›å»ºæˆåŠŸä¹‹åŽï¼Œè¯¥å·¥ç¨‹æ˜¯ä¸€ä¸ªç©ºå·¥ç¨‹æ²¡æœ‰ä»»ä½•æºæ–‡ä»¶ï¼Œå¦‚å›¾ï¼š åˆ›å»ºCæ–‡ä»¶ è¯¥éƒ¨åˆ†ä»‹ç»å¦‚ä½•åœ¨å·¥ç¨‹ä¸­æ‰‹åŠ¨åˆ›å»ºCæ–‡ä»¶ã€‚ éœ€è¦æ‰‹åŠ¨åˆ›å»ºCæºç æ–‡ä»¶ï¼Œå³é”®ç‚¹å‡» Source Files æ³¨æ„ï¼šæºç åŽç¼€æ˜¯.cï¼Œä¸æ˜¯.cpp. åˆ›å»ºå®ŒæˆåŽï¼Œæ‰“å¼€ mzc_base64.c å†™ä¸Šä¸€æ®µç®€å•çš„ä»£ç ï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦æ­£å¸¸ã€‚ 12345678#include &lt;stdio.h&gt;int main()&#123; printf("Hello OpenSSL, I'm coming.\n"); return 0;&#125; ç›´æŽ¥ä½¿ç”¨å¿«æ·é”® Ctrl+F5 è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°å¼¹å‡ºäº†ç³»ç»Ÿçš„å‘½ä»¤è¡Œå¹¶æ˜¾ç¤ºè¿è¡Œç»“æžœï¼Œæˆªå›¾å¦‚ä¸‹ï¼š è‡³æ­¤åœ¨Visual Studio 2017ä¸­æˆåŠŸåˆ›å»ºäº†Cå·¥ç¨‹ =:ï¼‰ é‡åˆ°çš„é—®é¢˜æœ‰ä¸å°‘å°ä¼™ä¼´è·Ÿæˆ‘è¯´ï¼Œä»–ä»¬åœ¨åˆ›å»ºçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†è¿™æ ·æˆ–è€…é‚£æ ·çš„é—®é¢˜ï¼Œæˆ‘æ€»ç»“äº†ä¸€ä¸‹åˆ†äº«ç»™æœ‰éœ€è¦çš„äººã€‚ 1ã€æ²¡æœ‰æ‰¾åˆ°Windows Desktopé€‰é¡¹è¿™ç§æƒ…å†µåº”è¯¥æ˜¯æ²¡æœ‰åœ¨ Visual Studio 2017 ä¸­å®‰è£…æ¡Œé¢å¼€å‘ç»„ä»¶ï¼Œå¦‚å›¾æ“ä½œï¼š æ‰“å¼€ Visual Studio Inistaller å®‰è£…é€šç”¨Windowså¹³å°å¼€å‘ç»„ä»¶ï¼Œå¦‚å›¾ï¼š å®‰è£…å®ŒæˆåŽï¼Œå†é‡æ–°åˆ›å»ºå·¥ç¨‹å°±æœ‰äº†è¯¥é€‰é¡¹ã€‚ 2ã€ç¼–è¯‘é”™è¯¯ï¼Œæ‰¾ä¸åˆ°printfå‡½æ•°å‡ºçŽ°è¿™ç§é”™è¯¯ï¼Œå¤§éƒ¨åˆ†åŽŸå› æ˜¯æ²¡æœ‰å®‰è£… Windows10 SDKã€‚æ‰“å¼€ C:\Program Files (x86)\ ç›®å½•ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ Windows Kits ç›®å½•ã€‚ å¦‚æžœæ²¡æœ‰ï¼Œå°±ç‚¹å‡» Windows10 SDK ä¸‹è½½ï¼Œå®‰è£…å®ŒæˆåŽï¼Œé‡æ–°åˆ›å»ºå·¥ç¨‹å°±å¯ä»¥äº†ã€‚ å¦‚æžœæœ‰è¯¥ç›®å½•ï¼Œåœ¨å·¥ç¨‹å±žæ€§ä¸­è®¾ç½®ä¸€ä¸‹ï¼Œå¦‚å›¾ï¼š æ‰“å¼€å±žæ€§è§†å›¾ï¼Œå¦‚ä¸‹ï¼š é…ç½®ä½ æ­£ç¡®çš„ Windows10 SDK ç›®å½•å³å¯ï¼Œæˆ‘å®‰è£…çš„æ˜¯ä¸‹é¢çš„ç‰ˆæœ¬ï¼š 3ã€æ— æ³•è®¿é—®å¤´æ–‡ä»¶ç‚¹å‡»ç³»ç»Ÿåº“çš„å¤´æ–‡ä»¶ï¼Œæ˜¾ç¤ºå¦‚ä¸‹æç¤ºï¼š åœ¨å¤´æ–‡ä»¶ä¸Šé¢å³é”®ï¼Œå¯ä»¥çœ‹åˆ°è·³è½¬çš„å‡ ä¸ªé€‰é¡¹éƒ½æ˜¯ä¸å¯ç”¨çš„çŠ¶æ€ï¼Œå¦‚ä¸‹å›¾ï¼š å‡ºçŽ°è¿™æ ·çš„æƒ…å†µä¸è¦æ€•ï¼Œè¿™æ˜¯VSçš„ç—…ï¼Œåªèƒ½ç­‰MicrosoftåŽ»æ ¹æ²»äº†ã€‚æˆ‘ä»¬ä½¿ç”¨ Open Document ä»£æ›¿ï¼Œå¿«æ·é”®æ˜¯Ctrl+Shift+Gï¼Œä¸€æ ·å¯ä»¥æ‰“å¼€å¯¹åº”çš„å¤´æ–‡ä»¶ã€‚ ç”Ÿå‘½ä¸æ˜¯è¦è¶…è¶Šåˆ«äººï¼Œè€Œæ˜¯è¦è¶…è¶Šè‡ªå·±~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>OpenSSL VS2017</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL8.0.15åœ¨Win10ä¸Šçš„æŠ˜è…¾è®°]]></title>
    <url>%2F2019%2F11%2F10%2FMySQL8-0-15%E5%9C%A8Win10%E4%B8%8A%E7%9A%84%E6%8A%98%E8%85%BE%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[å®‰è£…å’Œé…ç½®MySQLæˆ‘åœ¨Windows 10ä¸Šé¢ä½¿ç”¨ MySQL Instller å®‰è£…çš„MySQL8.0.15ï¼Œå®‰è£…å®ŒæˆåŽï¼Œå¯åŠ¨MySQLé‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œç‰¹æ­¤è®°å½•è¸©å‘è®°ã€‚ åªè¦ä½ çš„ç½‘ç»œç¨³å®šï¼ŒæŒ‰ç…§é»˜è®¤å®‰è£…æ•´ä¸ªå®‰è£…è¿‡ç¨‹è¿˜ç®—æ¯”è¾ƒé¡ºåˆ©ã€‚å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦è®¾ç½®å¯†ç ï¼Œæˆ‘è®¾ç½®çš„è´¦å·å’Œå¯†ç éƒ½æ˜¯ rootï¼Œæ‰€ä»¥ä¸‹é¢çš„æ“ä½œéƒ½æ˜¯åŸºäºŽè¿™ä¸ªè´¦å·å’Œå¯†ç è¿›è¡Œçš„ã€‚ å®‰è£…å®ŒæˆåŽï¼Œå°†mysql serverçš„ binç›®å½•åŠ å…¥åˆ°ç³»ç»Ÿçš„pathå˜é‡ä¸­åŽ»ï¼Œå¦‚å›¾ï¼š ç³»ç»ŸçŽ¯å¢ƒå˜é‡pathä¸­åŠ å…¥%MySQL_Home%\bin å³å¯ã€‚ åŠ å…¥æˆåŠŸä¹‹åŽï¼Œå°±å¯ä»¥ä½¿ç”¨mysqlå‘½ä»¤äº†ã€‚ é¢˜å¤–è¯ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä½¿ç”¨çš„mysqlå‘½ä»¤å…¶å®žæ˜¯å¯¹åº”MySQL Server 8.0\bin\mysql.exeï¼Œå¯ä»¥ä½¿ç”¨whereå‘½ä»¤çœ‹ä¸€ä¸‹å…¶å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ï¼Œå¦‚ä¸‹ï¼š 12$ where mysqlC:\Program Files\MySQL\MySQL Server 8.0\bin\mysql.exe åŒç†ï¼Œ mysqldå‘½ä»¤å¯¹åº”çš„æ˜¯mysqld.exeå¯æ‰§è¡Œæ–‡ä»¶ã€‚ æŸ¥çœ‹å®‰è£…çš„mysql-serverç‰ˆæœ¬ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 1mysql --version å¯ä»¥å¾—åˆ°ä¸‹é¢çš„è¾“å‡ºï¼Œå¯ä»¥çœ‹å‡ºå½“å‰ç‰ˆæœ¬æ˜¯ 8.0.15: 1C:\Program Files\MySQL\MySQL Server 8.0\bin\mysql.exe Ver 8.0.15 for Win64 on x86_64 (MySQL Community Server - GPL) æˆ‘ç”¨çš„å‘½ä»¤è¡Œç»ˆç«¯å·¥å…·æ˜¯Git bashï¼ˆå®‰è£…Gitå®¢æˆ·ç«¯å°±è‡ªå¸¦è¯¥å·¥å…·ï¼Œä¸ªäººè§‰å¾—æŒºå¥½ç”¨çš„ï¼Œ[å˜¿å“ˆ]ï¼‰ã€‚ ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1mysqld --install å¦‚æžœä¸ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯çš„è¯ï¼Œä¼šæŠ¥ç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼š 1Install/Remove of the Service Denied! è¿è¡ŒæˆåŠŸçš„è¯ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æç¤ºï¼š 1Service successfully installed. å†æ¬¡å¯åŠ¨ mysql80ï¼Œæ‰§è¡Œï¼š 1net start mysql80 æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨çš„æ˜¯mysql80ï¼Œè¿™ä¸ªæ˜¯æœåŠ¡çš„åç§° ï¼ˆå®‰è£…æ—¶å€™æˆ‘è®¾ç½®çš„æœåŠ¡åç§°ï¼‰ ï¼Œä¸æ˜¯mysqlï¼Œä¸‹é¢ä¼šè®²è§£ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œå¦‚æžœä½ æ²¡æœ‰è¿™ä¸ªmysql80æœåŠ¡åªéœ€è¦å¯åŠ¨mysqlæœåŠ¡å³å¯ã€‚ å¦‚æžœå‡ºçŽ°ç±»ä¼¼ â€œMYSQL æœåŠ¡æ— æ³•å¯åŠ¨â€ çš„æç¤ºï¼Œå¯ä»¥åœ¨Windowsçš„ä»»åŠ¡ç®¡ç†å™¨ä¸­æ‰¾æ‰¾æ˜¯å¦å·²ç»å¯åŠ¨äº†mysqldæœåŠ¡ï¼Œå¯ä»¥æ‰‹åŠ¨å…³é—­åŽå†æ¥å¯åŠ¨ã€‚ å¦‚æžœå§‹ç»ˆå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 1mysqld --initialize å¯åŠ¨æˆåŠŸåŽï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š 12MySQL80 æœåŠ¡æ­£åœ¨å¯åŠ¨ .MySQL80 æœåŠ¡å·²ç»å¯åŠ¨æˆåŠŸã€‚ å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æˆåŠŸå¯åŠ¨mysql80æœåŠ¡ï¼Œå¦‚ä¸‹ï¼š 1netstat -aon|findstr "3306" çœ‹åˆ°å¦‚ä¸‹æç¤ºè¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼Œå¦‚ä¸‹ï¼š 12345TCP 0.0.0.0:3306 0.0.0.0:0 LISTENING 10344TCP 0.0.0.0:33060 0.0.0.0:0 LISTENING 10344TCP [::]:3306 [::]:0 LISTENING 10344TCP [::]:33060 [::]:0 LISTENING 10344TCP [::1]:3306 [::1]:56962 TIME_WAIT 0 ç™»å½•mysql80æœåŠ¡ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 123$ mysql -uroot -prootmysql: [Warning] Using a password on the command line interface can be insecure.ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) å¾ˆä¸å¹¸çš„æ˜¯ï¼Œç™»å½•å¤±è´¥ï¼ˆERROR 1045ï¼‰ã€‚ é‚£æˆ‘ä»¬å°±æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„MySQLå’Œä¹‹å‰çš„8.0.xç‰ˆæœ¬è§£å†³æ–¹æ¡ˆä¸åŒï¼Œç½‘ä¸Šæ‰¾è¿‡å¾ˆå¤šè§£å†³æ–¹æ¡ˆæœ‰ä¿®æ”¹é…ç½®æ–‡ä»¶çš„ï¼Œå¿™äº†åŠå¤©è¿˜æ˜¯æ²¡æœ‰æžå®šï¼Œæœ€åŽåœ¨StackOverflowä¸Šé¢æ‰¾åˆ°æ–¹æ¡ˆï¼Œç»“åˆä¸ªäººå®žè·µæ€»ç»“äº†ä¸€ä¸‹ï¼Œè¿˜çƒ¦è¯·å¤§å®¶åŠ¡å¿…å¾€ä¸‹çœ‹ã€‚ è§£å†³MySQLç™»å½•å—é™åœ¨çœ‹ä¸‹é¢å†…å®¹ä¹‹å‰ï¼ŒåŠ¡å¿…å®Œæˆä¹‹å‰çš„æ­¥éª¤ï¼Œå¦åˆ™ä¸‹é¢çš„å†…å®¹å¯¹ä½ æ¥è¯´æ²¡æœ‰å¤ªå¤§ä»·å€¼ã€‚ æ–°ç‰ˆæœ¬çš„MySQLåŠ å¼ºäº†å®‰å…¨æ–¹ä¾¿çš„è€ƒè™‘ï¼Œæ‰€ä»¥ä½¿ç”¨æ–°ç‰ˆæœ¬æ¯”è¾ƒè´¹åŠ²ï¼Œå¦‚æžœä½ ä¸æƒ³æŠ˜è…¾ï¼Œå¯ä»¥å®‰è£…MySQLçš„5.xç‰ˆæœ¬ã€‚ Step-1ï¼šåœæ­¢MySQL80æœåŠ¡ ä½¿ç”¨å¿«æ·é”® win+R è¾“å…¥ services.mscï¼Œæ‰“å¼€å¦‚ä¸‹è§†å›¾å¹¶æ‰¾åˆ°MySQL80æœåŠ¡ï¼š åœæ­¢MySQL80æœåŠ¡ï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œæ‰§è¡Œnet stop mysql80å‘½ä»¤ã€‚ Step-2ï¼šå¦ä¸€ç§æ–¹å¼å¯åŠ¨MySQL80æœåŠ¡ ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯1ï¼Œå¹¶æ‰§è¡Œï¼š 1mysqld --console --skip-grant-tables --shared-memory æ­¤æ—¶å¯ä»¥æˆåŠŸå¯åŠ¨mysql80æœåŠ¡ï¼Œä½†æ˜¯åœ¨Windowsçš„æœåŠ¡ä¸­æ˜¯çœ‹ä¸åˆ°çš„ï¼Œä¸ç”¨ç†ä¼šã€‚ç»§ç»­ã€‚ Step-3ï¼šå¯åŠ¨å¦ä¸€ä¸ªç»ˆç«¯2 ä¸Šè¿°æ­¥éª¤å¯åŠ¨å®ŒæˆåŽï¼Œå†ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œå¦ä¸€ä¸ªWindowsçš„ç»ˆç«¯2(CMD)ï¼Œç”¨ç³»ç»Ÿè‡ªå¸¦çš„æˆ–è€…Git Bash éƒ½å¯ä»¥ï¼Œä½†æ˜¯å¦‚æžœä½¿ç”¨ Git Bash çš„è¯ï¼Œå¿…é¡»åœ¨ç™»å½•mysqlçš„æ—¶å€™ä½¿ç”¨ winptyï¼ˆGit Bashè‡ªå¸¦çš„å·¥å…·ï¼‰å‘½ä»¤ï¼Œå¦åˆ™ç™»å½•ä¼šå¡ä½ä¸åŠ¨ã€‚å‘½ä»¤ä½¿ç”¨å¦‚ä¸‹ï¼š 1winpty mysql -uroot -proot Step-4ï¼šç»ˆç«¯ç™»å½•mysql æ‰§è¡Œä¸‹é¢å‘½ä»¤ç™»å½•æœåŠ¡ï¼š 1mysql -u root -p root å¦‚ä¸‹å›¾å¯ä»¥ç™»å½•æˆåŠŸï¼Œå¦‚ä¸‹æˆªå›¾ï¼š Step-5ï¼šç½®ç©ºå¯†ç  åœ¨ä¸Šè¿°å‘½ä»¤è¡ŒçŠ¶æ€ä¸‹ï¼Œæ‰§è¡Œï¼š 123use mysqlupdate user set authentication_string='' where user='root'; Step-6ï¼šé€€å‡ºmysqlæœåŠ¡ 1quit Step-7ï¼šå…³é—­mysqldå¯åŠ¨çš„mysql80æœåŠ¡ éœ€è¦å…³é—­ä»¥ -console --skip-grant-tables --shared-memory å¯åŠ¨çš„mysql80æœåŠ¡ï¼Œç›´æŽ¥åœ¨ç»ˆç«¯1ä¸­ctrl+cå³å¯ã€‚ Step-8ï¼šå¯åŠ¨mysql80æœåŠ¡ ä½¿ç”¨Step-1æ­¥éª¤ä¸­çš„æ–¹å¼æ‰“å¼€Windowsçš„æœåŠ¡å¯åŠ¨æˆ–è€…åœ¨ç»ˆç«¯1ä¸­æ‰§è¡Œnet start mysql80å¯åŠ¨mysql80æœåŠ¡ã€‚ Step-9ï¼š æ— å¯†ç ç™»å½•mysql åœ¨æ­¥éª¤Step-5ä¸­å·²å°†å¯†ç ç½®ç©ºï¼ŒçŽ°åœ¨å¯ä»¥æ— å¯†ç çŠ¶æ€ç™»å½•mysqlæœåŠ¡ï¼Œè¾“å…¥ç™»å½•å‘½ä»¤ï¼š 1mysql -u root -p ç™»å½•æˆåŠŸåŽï¼Œä¿®æ”¹å¯†ç ï¼ˆæ°¸è¿œä¸è¿‡æœŸçš„å¯†ç ï¼‰æ‰§è¡Œï¼š 1ALTER USER 'root'@'localhost' IDENTIFIED BY 'newpwd123' PASSWORD EXPIRE NEVER; æˆ‘æŠŠåŽŸæ¥çš„å¯†ç ä¿®æ”¹ä¸ºnewpwd123ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„çˆ±å¥½è®¾ç½®ä¸ºå…¶ä»–çš„å¯†ç ã€‚ å¦‚æžœåœ¨æ­¤æ­¥éª¤å‡ºçŽ°ç±»ä¼¼ä¸‹é¢çš„é”™è¯¯: 1ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statement è¯·æ‰§è¡Œä¸‹é¢çš„SQLè¯­å¥ï¼Œå¦‚ä¸‹å‘½ä»¤ï¼š 1flush privileges; Step-10ï¼šé€€å‡ºmysqlï¼Œé‡æ–°ç™»å½• é€€å‡ºmysqlï¼Œç„¶åŽé‡æ–°ä½¿ç”¨ä¿®æ”¹è¿‡çš„å¯†ç ç™»å½•mysqlï¼Œå®Œäº‹ã€‚ MySQLé…ç½®æ–‡ä»¶ï¼Ÿè¿™ä¹Ÿæ˜¯ä¸ªç¥žå¥‡çš„é—®é¢˜ï¼Œæœ€åŽåœ¨MySQLçš„å®˜æ–¹æ‰‹å†Œé‡Œæ‰¾åˆ°äº†Answerã€‚ åœ¨Windowsç³»ç»Ÿä¸­Cç›˜æœ‰ä¸ªéšè—çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬æ¥æ­å¼€å®ƒçš„ç¥žç§˜é¢çº±ã€‚ æ‰“å¼€Cç›˜æ–‡ä»¶ï¼ŒæŒ‰ç…§ä¸‹é¢1ã€2ã€3é¡ºåºå°±å¯ä»¥çœ‹åˆ°ProgramDataæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹ï¼š è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œå°±å¯ä»¥çœ‹åˆ°MySQLçš„é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š ä¸Šé¢æˆ‘ä»¬å·²ç»è¯´è¿‡ï¼Œå¯åŠ¨mysql80æœåŠ¡å°±é»˜è®¤ä½¿ç”¨çš„æ˜¯è¯¥é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨WindowsæœåŠ¡ä¸­ç‚¹å‡»MySQL80æŸ¥çœ‹å…¶å±žæ€§ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æè¿°ï¼š 12å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼šC:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld.exe" --defaults-file="C:\ProgramData\MySQL\MySQL Server 8.0\my.ini" MySQL80 å…¶ä¸­ï¼Œ--defaults-file=&quot;C:\ProgramData\MySQL\MySQL Server 8.0\my.ini&quot; å°±æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„çš„ã€‚ è€Œåœ¨WindowsæœåŠ¡ä¸­ç‚¹å‡»MySQLï¼Œçœ‹åˆ°çš„å±žæ€§æ˜¯è¿™æ ·çš„ï¼š 12å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼š"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld.exe" MySQL å¹¶æ²¡æœ‰æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè®©å¤§å®¶å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œ net start mysql80 çš„åŽŸå› ã€‚ é¡ºä¾¿ä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼ŒæŠŠé»˜è®¤ç¼–ç æ”¹ä¸ºutf-8ï¼Œå¦‚ä¸‹é…ç½®ï¼ˆè®°å¾—æ˜¯åœ¨[client]å’Œ[mysql]æ ‡ç­¾ä¸‹ï¼‰ï¼š 1234567891011[client]# pipe=# socket=MYSQL# è®¾ç½®mysqlå®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯æ—¶é»˜è®¤ä½¿ç”¨çš„ç«¯å£port=3306default-character-set=utf8[mysql]no-beep# è®¾ç½®é»˜è®¤ç¼–ç default-character-set=utf8 è¿˜æœ‰å¥‡è‘©çš„é”™è¯¯ ä¼šæŒç»­è®°å½•å„ç§å¥‡è‘©é”™è¯¯ã€‚ 1ã€ERROR 2003 (HY000): Canâ€™t connect to MySQL server on â€˜localhostâ€™ (10061) ç™»å½•mysqlæœåŠ¡ï¼ŒæŠ¥ä¸Šé¢çš„é”™è¯¯ï¼Œè¯´æ˜Žæ²¡æœ‰å¯åŠ¨æˆåŠŸmysql80æœåŠ¡ï¼Œæœ€å¤§çš„å¯èƒ½æ˜¯ä½ ä¿®æ”¹äº†é…ç½®æ–‡ä»¶è¦ä¹ˆæ˜¯æ ¼å¼é”™äº†è¦ä¹ˆæ˜¯é…ç½®çš„ä¸œè¥¿mysqlä¸è®¤ã€‚ åªèƒ½æŠŠé…ç½®æ–‡ä»¶ä¿®æ”¹æ­£ç¡®æ‰èƒ½å¯åŠ¨æœåŠ¡ã€‚ æˆ‘ä»¬è¦å­¦ä¼šåšè‡ªå·±ç²¾ç¥žé¢†åŸŸå†…çš„å›çŽ‹ï¼Œä¸è¦æˆä¸ºåˆ«äººæƒ…ç»ªä¸–ç•Œé‡Œé¢çš„å¥´éš¶ã€‚]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>MySQL Win10</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: éƒ¨ç½²æœåŠ¡]]></title>
    <url>%2F2019%2F10%2F31%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹åœ¨ å¾®æœåŠ¡ç³»åˆ— æ–‡ç« ä¸­ï¼Œè·Ÿå¤§å®¶ä»ŽçŽ¯å¢ƒæ­å»ºã€Webå·¥ç¨‹åˆ›å»ºã€æä¾›RestfulæŽ¥å£ã€çƒ­éƒ¨ç½²ã€Gitä½¿ç”¨ä»¥åŠSwaggerç”Ÿæˆæ–‡æ¡£åˆ†äº«äº†SpringBootçš„å…¥é—¨çŸ¥è¯†ã€‚ä»Šå¤©ç»§ç»­åˆ†äº«å¦‚ä½•ä½¿ç”¨IDEAå’Œmavenå¯¹å·¥ç¨‹è¿›è¡Œæ‰“åŒ…æ“ä½œï¼Œç„¶åŽå‘å¸ƒä»£ç åˆ°æœåŠ¡å™¨è¿›è¡Œéƒ¨ç½²çš„è¿‡ç¨‹ã€‚ å¤§å®¶æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æ–‡ä¸­æœ‰ä¸æ­£ç¡®çš„åœ°æ–¹æ¬¢è¿Žç•™è¨€è¯„è®ºï¼Œå…±åŒè¿›æ­¥ï¼Œå†æ¬¡æ„Ÿè°¢å¤§å®¶çš„é˜…è¯»ã€‚ IDEA æ‰“åŒ…åœ¨ File/Project Structure æ‰“å¼€è§†å›¾ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”® Ctrl+Alt+Shift+S æ‰“å¼€è§†å›¾ã€‚ æ‰“å¼€çš„è§†å›¾å¦‚ä¸‹ï¼š æŒ‰ç…§ 1ã€2ã€3 æ­¥éª¤æ‰“å¼€ä¸‹é¢è§†å›¾ï¼Œå¦‚ä¸‹ï¼š é…ç½®è¯¥è§†å›¾çš„å†…å®¹ï¼Œåˆ†åˆ«è®¾ç½® Main Class å’Œ é€‰æ‹© JAR filesï¼Œå¦‚ä¸‹ï¼š è¿™é‡Œç‰¹åˆ«è¦æ³¨æ„ï¼Œé€‰æ‹©ç”Ÿæˆ MANIFEST.MF æ–‡ä»¶ç›®å½•æ”¾åˆ° resources ä¸‹é¢ï¼Œé»˜è®¤ä¼šæ”¾åœ¨ main\java ç›®å½•ä¸‹ã€‚ å¦‚æžœä¸ä¿®æ”¹è¿™ä¸ªç›®å½•ï¼Œæœ€ç»ˆè¿è¡Œç”Ÿæˆçš„ jar æ–‡ä»¶ï¼Œä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼š 1Invalid or corrupt jarfile &#123;project_name&#125;.jar é…ç½®å®ŒæˆåŽï¼Œç‚¹å‡» OK å…³é—­å¯¹è¯æ¡†å³å¯ã€‚ æŽ¥ä¸‹æ¥éœ€è¦ç¼–è¯‘ï¼Œç‚¹å‡» IDEA çš„ Build èœå•ï¼Œé€‰æ‹© Build Artifacts...ï¼Œå¦‚ä¸‹æˆªå›¾ï¼š ç‚¹å‡» Build Artifacts... åŽå‡ºçŽ°è§†å›¾ ç¬¬ä¸€æ¬¡ç›´æŽ¥é€‰æ‹© Build é€‰é¡¹ï¼ŒåŽç»­å¯ä»¥é€‰æ‹© Rebuild æˆ–è€… Clean é€‰é¡¹ï¼Œæ ¹æ®ä½ çš„éœ€è¦è¿›è¡Œé€‰æ‹©å³å¯ã€‚ ç­‰å¾… IDEA æ‰“åŒ…å®ŒæˆåŽï¼Œåœ¨å·¥ç¨‹æ–‡ä»¶ä¸­ä¼šç”Ÿæˆ out ç›®å½•å’Œ resources ç›®å½•ä¸‹é¢ç”Ÿæˆ META-INF ç›®å½•å’Œå¯¹åº”çš„æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨ springboot_jar ç›®å½•ä¸‹é¢æœ‰æ‰“åŒ…æˆåŠŸçš„ jar æ–‡ä»¶ï¼Œå³ springboot.jar æ–‡ä»¶ï¼Œå¦å¤–ä¹Ÿå°† tomcat ç­‰ä¸€äº›å…¶ä»–ä¾èµ–åŒ…éƒ½æ‰“åŒ…åˆ°ä¸€èµ·äº†ã€‚ æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ java -jar springboot.jar å°±å¯ä»¥è¿è¡Œè¯¥é¡¹ç›®äº†ã€‚ å¦‚æžœå‘çŽ°ç”±äºŽç«¯å£è¢«å ç”¨è€Œæ— æ³•å¯åŠ¨çš„æƒ…å†µï¼Œå¯ä»¥æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µï¼š 1netstat -ano | findstr 8080 æŸ¥åˆ°ç±»ä¼¼å¦‚ä¸‹ç»“æžœï¼š 12TCP 0.0.0.0:8080 0.0.0.0:0 LISTENING 18948TCP [::]:8080 [::]:0 LISTENING 18948 è¿™é‡Œæ¼”ç¤ºçš„è¿›ç¨‹IDæ˜¯ 18948ï¼Œå¼ºåˆ¶å…³é—­ç«¯å£è¿›ç¨‹å³å¯ 1taskkill -F -PID 18948 éƒ¨ç½²åˆ°æœåŠ¡å™¨æˆ‘ä½¿ç”¨è™šæ‹Ÿæœºï¼ˆUbuntuï¼‰æ¥ç®€å•ä»‹ç»ä¸€ä¸‹éƒ¨ç½²è¿‡ç¨‹ã€‚è™šæ‹Ÿæœºæ˜¯ VMWare å…¶ç‰ˆæœ¬æ˜¯ 15.0.2ï¼ŒUbuntu ç³»ç»Ÿç‰ˆæœ¬æ˜¯ 19.04ã€‚å¦‚ä½•å®‰è£…è™šæ‹Ÿæœºã€å¦‚ä½•åœ¨è™šæ‹Ÿæœºä¸­å®‰è£… Ubuntu ç³»ç»Ÿä»¥åŠå¦‚ä½•åœ¨ Ubuntu ä¸­å®‰è£… Java çŽ¯å¢ƒè¯·å¤§å®¶è‡ªè¡ŒæŸ¥æ‰¾èµ„æ–™å®Œæˆï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚ å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹å¼ï¼ˆIDEAæ‰“åŒ…ï¼‰å®ŒæˆåŽï¼Œå°†ç”Ÿæˆçš„ springboot_jar ç›®å½•æ‹·è´åˆ°è™šæ‹Ÿæœºçš„ç”¨æˆ·ç›®å½•ä¸‹ï¼Œç„¶åŽé€šè¿‡ java -jar springboot_jar/springboot.jar æ¥å¯åŠ¨æœåŠ¡ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ IDEA çš„ maven å·¥å…·è¿›è¡Œæ‰“åŒ…ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š 1ã€æ‰“å¼€å·¥ç¨‹çš„mavenè§†å›¾ 2ã€æŒ‰ç…§æ ‡çº¢çš„1ã€2ã€3ã€4æ“ä½œå³å¯ æˆåŠŸåŽåœ¨ target ç›®å½•ä¼šç”Ÿæˆå¯¹åº”çš„å¯æ‰§è¡Œçš„ jar æ–‡ä»¶ï¼Œè¯¥ jar åŒ…åŒ…æ‹¬äº†æ‰€æœ‰çš„ SpringBoot ç›¸å…³çš„åŒ…å¦‚ä¸‹å›¾ï¼š åŒç†ï¼Œå¤åˆ¶ springboot-0.0.1-SNAPSHOT.jar åˆ°è™šæ‹Ÿæœºçš„ç”¨æˆ·ç›®å½•ï¼Œé€šè¿‡ java -jar springboot-0.0.1-SNAPSHOT.jar è¿è¡ŒæœåŠ¡å³å¯ã€‚ æŸ¥çœ‹ Ubuntu çš„ä¸»æœºIPåœ°å€ï¼Œå¯ä»¥é€šè¿‡ ifconfig æ¥èŽ·å–ï¼Œä¹Ÿå¯ä»¥åœ¨è®¾ç½®é‡Œé¢æŸ¥æ‰¾å…¶IPåœ°å€ã€‚ ifconfig éœ€è¦æŒ‰ç…§ net-toolsï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š 1sudo apt install net-tools æˆ‘çš„è™šæ‹Ÿæœºçš„IPåœ°å€æ˜¯ 192.168.142.128ï¼Œå³ http://192.168.142.128:8080 æ˜¯ Ubuntu çš„ IP åœ°å€å’Œ Tomcat çš„è¿è¡Œç«¯å£ï¼Œå›žåˆ° Windows ä¸»æœºä¸Šé¢è®¿é—®è™šæ‹Ÿæœºçš„æœåŠ¡ï¼Œé€šè¿‡ä¸‹é¢å›¾å¯ä»¥çœ‹å‡ºæ˜¯æˆåŠŸçš„ã€‚ è¿™é‡Œåªæ˜¯ç®€å•çš„ä»‹ç»äº†ä¸€ä¸‹å¦‚ä½•å°†è‡ªå·±å†™çš„ SpringBoot æœåŠ¡éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šé¢ï¼Œåœ¨ä½ çš„å®žé™…é¡¹ç›®ä¸­éƒ¨ç½²æ²¡è¿™ä¹ˆç®€å•ï¼Œæˆ‘ç®—æ˜¯æŠ›ç –å¼•çŽ‰å§ï¼ŒåŽç»­éšç€å­¦ä¹ çš„æ·±å…¥æˆ‘å†è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹åœ¨å®žé™…å¤§é¡¹ç›®ä¸­éƒ¨ç½²é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚ ç”Ÿæ´»å¹¶æ²¡æœ‰é‚£ä¹ˆå¤æ‚ï¼Œè¦æ˜¯ä½ å–œæ¬¢ï¼Œå¤§å¯ä»¥è¯´æˆ‘æ˜¯åœ¨æŽ¢ç´¢ç”Ÿå‘½ã€‚]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot mvn package</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çœ‹ã€Šé“¶æ²³è¡¥ä¹ ç­ã€‹æœ‰æ„Ÿ]]></title>
    <url>%2F2019%2F10%2F26%2F%E7%9C%8B%E3%80%8A%E9%93%B6%E6%B2%B3%E8%A1%A5%E4%B9%A0%E7%8F%AD%E3%80%8B%E6%9C%89%E6%84%9F%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹å†™è¿™ä¸ªè¯é¢˜ï¼Œæƒ…ä¸è‡ªç¦çš„æƒ³èµ·ä¸Šå­¦è€ƒè¯•çš„ä½œæ–‡é¢˜ç›®ï¼Œæ—¢æœ‰å­—æ•°é™åˆ¶åˆè¦èƒ½è¡¨è¾¾ä¸­å¿ƒæ€æƒ³ï¼Œå¥½ä¸å®¹æ˜“å­å“§å­å“§åœ°å†™å®Œäº†ï¼Œç»“æžœä½œæ–‡åˆ†æ•°ä¹Ÿä¸ä¸€å®šç†æƒ³ï¼Œæ¯•ç«Ÿè€å¸ˆçš„å¿ƒæƒ…æŒ‡æ•°å˜å¹»èŽ«æµ‹ã€‚ çœ‹å®Œç”µå½±ã€Šé“¶æ²³è¡¥ä¹ ç­ã€‹å¿ƒä¸­äº”å‘³æ‚é™ˆï¼Œæƒ³æƒ³è‡ªå·±é™ªå­©å­çš„æ—¶é—´å±ˆæŒ‡å¯æ•°ï¼Œä»Žä»–å‡ºç”Ÿåˆ°çŽ°åœ¨å·²ç»7ä¸ªå¤šå¹´å¤´äº†ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯ä»–å¦ˆå¦ˆé™ªç€ï¼Œæˆ‘è¿™ä¸ªåšçˆ¶äº²çš„è·Ÿé©¬çš“æ–‡æ¯”èµ·æ¥ä¸æ­¢å·®ä¸€ä¸ªé“¶æ²³ç³»ã€‚ ç”µå½±ä¸­æžç¬‘ç‰‡æ®µä¸ç®—å¤šä½†æ°åˆ°å¥½å¤„ï¼Œé©¬é£žæ¯äº²çš„æ‰®æ¼”è€…ä»»ç´ æ±ï¼ˆçœ‹è¿‡ä»–ä¸»æ¼”çš„ç”µå½±ã€Šé©´å¾—æ°´ã€‹ï¼Œå†·å¹½é»˜é£Žæ ¼çš„ä¸€éƒ¨ç”µå½±ï¼‰å’Œé©¬é£žåŽçˆ¹çš„æ‰®æ¼”è€…æ¢è¶…æˆä»½ä¸å¤šä½†å‡ ä¹Žæ‹…å½“äº†ç”µå½±ä¸­æžç¬‘çš„å…¨éƒ¨å†…å®¹ã€‚ç‰¹åˆ«æ˜¯æ¢è¶…é‚£å¥ â€œå„¿å­ï¼Œä½ åˆ«çš„ä¸å¤šï¼Œå°±æ˜¯çˆ¸çˆ¸å¤šâ€ï¼Œè®©äººå³æ„ŸåŠ¨åˆå¥½ç¬‘ã€‚æˆ‘ç›¸ä¿¡æ¯ä¸ªäººçš„ä¸Šå­¦ç”Ÿæ¶¯ä¸­éƒ½ä¼šé‡åˆ°ç±»ä¼¼â€œé—«ä¸»ä»»â€è¿™æ ·è§’è‰²çš„è€å¸ˆï¼Œä¸¥åŽ‰çš„åƒä¸ªè‡ªç§é¬¼ï¼Œåœ¨ç‰‡ä¸­ç®€ç›´å°±åƒä¸€ä¸ªåå‰¯å…¶å®žçš„å¤§åæ´¾ï¼Œé‚£å¥â€œèŽ«åå…¶å¦™ã€è’è°¬ç»ä¼¦â€æ­é…é—«ä¸»ä»»çš„çŸ­è£¤ç®€ç›´ç»äº†ã€‚ ç”µå½±çš„å‰§æƒ…æœ‰ç‚¹ç†æƒ³åŒ–ï¼Œä½†é‡Œé¢çš„å¾ˆå¤šé“ç†å€¼å¾—æˆ‘ä»¬åŽ»å­¦ä¹ å’Œåæ€ï¼Œè¿™æ˜¯ä¸€éƒ¨é€ç»™å„¿å­å’Œçˆ¶äº²çš„ç”µå½±ã€‚ é‡è¦çš„æ˜¯è®©å­©å­çœ‹ä½ åšä»€ä¹ˆå¾ˆå¤šæœ‹å‹è§‰å¾—æˆ‘çš„å­—å†™çš„è¿˜ç®—ä¸é”™ï¼Œé«˜ä¸­æ—¶å€™æˆ‘çš„ç¡®ç»å¸¸å‚åŠ ä¹¦æ³•æ¯”èµ›ä¹Ÿæ‹¿è¿‡å¾ˆå¤šåæ¬¡ï¼Œä½†æ˜¯æˆ‘æ€»æ˜¯æ„Ÿè§‰è‡ªå·±çš„å­—å†™çš„å¾ˆä¸€èˆ¬è¿˜éœ€è¦æ›´åŠ åŠªåŠ›ã€‚æ‰€ä»¥ä¸Šå­¦çš„æ—¶å€™åªè¦æœ‰å†™å­—çš„æœºä¼šæˆ‘å°±ä¼šåˆ©ç”¨ä¸Šï¼Œæ¯”å¦‚å‡ºé»‘æ¿æŠ¥ï¼Œå¸®è€å¸ˆåœ¨é»‘æ¿ä¸Šé¢æŠ„é¢˜ï¼Œè¿™äº›æ´»æˆ‘éƒ½å¾ˆä¹æ„å¹²ã€‚åŽé¢å‚åŠ å·¥ä½œäº†ï¼Œè‡ªå·±ä¹Ÿä¿æŒç€å†™æ—¥è®°çš„ä¹ æƒ¯ï¼Œç”¨ç¬”åœ¨ç¬”è®°æœ¬ä¸Šé¢å†™å‡ºæ¥çš„å­—æ„Ÿè§‰ç‰¹åˆ«äº²åˆ‡ï¼Œé‚£äº›å­—å°±å¥½æ¯”æœ‰æ¸©åº¦çš„çµé­‚ã€‚ åœ¨å†™å­—æ–¹é¢ç‰¹åˆ«è¦æ„Ÿè°¢æˆ‘çš„çˆ¶äº²ï¼Œè®°å¾—åˆšä¸Šåˆä¸­é‚£ä¼šï¼Œçˆ¶äº²ä»Žå¤–åœ°æ‰“å·¥å›žæ¥ç‰¹åœ°ç»™æˆ‘ä¹°äº†ä¸€æœ¬å­—å¸–ï¼Œæœ€è®©æˆ‘æ„ŸåŠ¨çš„æ˜¯ä»–åˆšä¸‹è½¦å°±äº²è‡ªé€åˆ°å­¦æ ¡æ¥äº†ï¼Œä¸€ç›´å€”å¼ºä¸”ä¸å–„äºŽè¡¨è¾¾çˆ±çš„ä»–é€’ç»™æˆ‘å­—å¸–çš„é‚£ä¸€åˆ»ï¼Œæˆ‘æ‰æ˜Žç™½çœŸæ­£çš„çˆ±ä¸æ˜¯ç»å¸¸æŒ‚åœ¨å˜´è¾¹çš„è€Œæ˜¯åœ¨å¿ƒé‡Œåœ¨è¡ŒåŠ¨ä¸Šï¼Œè¯·ç›¸ä¿¡ä¸ç®¡ä¸€ä¸ªå¤šå¹³å‡¡çš„çˆ¸çˆ¸ï¼Œéƒ½ä¼šä»¥è‡ªå·±çš„æ–¹å¼çˆ±ä½ ã€‚çˆ¶äº²çš„å­—å†™çš„æ¯”æˆ‘å¥½ï¼Œé‚£æ—¶å€™æˆ‘å°±æ ‘ç«‹äº†ä¸€ä¸ªç›®æ ‡ï¼šâ€œå°†æ¥ä¸€å®šè¦åƒçˆ¶äº²ä¸€æ ·ï¼ŒæŠŠå­—å†™å¥½ï¼Œä¸èƒ½ç»™ä»–ä¸¢äººâ€œï¼ŒçŽ°åœ¨æƒ³æƒ³è‡ªå·±æŒºå¹¼ç¨šçš„ã€‚ ç”µå½±é‡Œé¢æœ‰ä¸ªç‰‡æ®µï¼Œæ·±å¤œé‡Œé©¬é£žçªç„¶ç¡é†’äº†ï¼Œçœ‹åˆ°è¿˜åœ¨å·¥ä½œçš„é©¬çš“æ–‡è¯´ï¼šâ€œçˆ¸çˆ¸ï¼Œæˆ‘å¯ä»¥ä¸ç¡è§‰å—ï¼Ÿâ€ï¼Œé©¬çš“æ–‡è¯´ï¼šâ€œé‚£æ˜¯ä½ è‡ªå·±çš„äº‹ï¼Œä»¥åŽè¿™ç§äº‹ä¸ç”¨é—®æˆ‘â€ã€‚ æ¯ä¸ªäººéƒ½ä¼šç»åŽ†åˆä¸ºäººçˆ¶äººæ¯ï¼Œéš¾å…è‡ªå·±ä¹Ÿä¼šçŠ¯ä¸‹ä¸€äº›é”™è¯¯ï¼Œå°±åƒç”µå½±é‡Œé¢é©¬çš“æ–‡å¯¹è‡ªå·±çš„å„¿å­é©¬é£žè¯´ï¼šâ€œå¯¹ä¸èµ·ï¼çˆ¸çˆ¸ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡åšçˆ¸çˆ¸â€ï¼Œçœ‹åˆ°è¿™é‡Œæˆ‘ä¸ç¦æ½¸ç„¶æ³ªä¸‹ï¼Œæ„Ÿè§‰ç‰¹åˆ«çœŸè¯šã€‚æˆ‘å’Œè€å©†çº¦å®šä¸€å®šä¸è¦åœ¨å­©å­é¢å‰åµæž¶ï¼Œä¸è¦åœ¨å­©å­é¢å‰éšä¾¿å‘è„¾æ°”ï¼Œå¦‚æžœé‚£æ ·åšäº†ä¼šç»™ä»–ä»¬å¿ƒçµä¸Šé¢é€ æˆä¸€å®šçš„ä¼¤å®³ï¼Œå­©å­ä»¬çš„å­¦ä¹ æ¨¡ä»¿èƒ½åŠ›éƒ½æ¯”è¾ƒå¼ºï¼Œå¤§äººçš„åè„¾æ°”ä¼šå½±å“åˆ°å­©å­ã€‚å‘¨æœ«æœ‰æ—¶é—´ï¼Œæˆ‘éƒ½ä¼šæ•…æ„åœ¨å­©å­é¢å‰çœ‹ä¹¦ï¼Œä»–çœ‹æˆ‘çœ‹çš„é‚£ä¹ˆè®¤çœŸä¹Ÿå¿ä¸ä½è¿‡æ¥å‡‘çƒ­é—¹ï¼Œæ—¶é—´ä¹…äº†ä»–ä¹Ÿçˆ±ä¸Šäº†çœ‹ä¹¦ï¼Œä»–çš„ç¬¬ä¸€ä¸ªä¹¦æž¶å°±æ˜¯è¿™ä¹ˆæ¥çš„ï¼Œä¹¦æž¶ä¸Šé¢çš„ä¹¦æœ‰äº›æ˜¯å›¾ä¹¦é¦†å€Ÿæ¥çš„ï¼Œæœ‰äº›æ˜¯æˆ‘å’Œè€å©†ä¹°ç»™ä»–çš„ï¼Œæœ‰äº›æ˜¯ä»–å’Œå…¶ä»–å°æœ‹å‹æ¢æ¥çš„ã€‚ ä¸€å®šè¦åšè‡ªå·±åšå–œæ¬¢çš„äº‹æƒ… ä»Šå¹´å›½åº†èŠ‚æ”¾å‡å½“å¤©ï¼Œæˆ‘å…­ç‚¹åŠèµ·åºŠå‡†å¤‡åšæ—©é¤ï¼Œå‘çŽ°å„¿å­ä¸€ä¸ªäººååœ¨å®¢åŽ…å†™ä½œä¸šï¼Œæˆ‘å½“æ—¶æƒŠå‘†äº†ï¼Œè¿™å°å­æ€Žä¹ˆè¿™ä¹ˆæ—©å°±èµ·åºŠäº†å±…ç„¶è¿˜åœ¨å†™ä½œä¸šï¼Œå¦‚æžœæŒ‰ç…§æˆ‘ä»¥å‰çš„è„¾æ°”ä¸€å®šä¼šæ‰¹è¯„ä»–ã€‚å°±æ‚„æ‚„èµ°è¿‡åŽ»ï¼Œè½»è½»çš„æ‹æ‹ä»–çš„è‚©è†€è¯´ï¼šâ€œä½ æ€Žä¹ˆè¿™ä¹ˆå‹¤å¥‹å‘€ï¼Ÿâ€ï¼Œä»–å¤´ä¹Ÿä¸å›žçš„è¯´ï¼šâ€œä»Šå¤©ä½ ä¸æ˜¯è¦å¸¦æˆ‘åŽ»çŽ©å—ï¼Œæˆ‘æƒ³å…ˆæŠŠä½œä¸šå†™å®Œâ€ï¼Œæˆ‘å¿½ç„¶ä¸€æ„£ï¼ŒåŽŸæ¥æˆ‘æœ‰è¿‡è¿™ä¸ªæ‰¿è¯ºï¼Œæˆ‘è¯´ï¼šâ€œè¡Œï¼Œä½ å†™å®Œä¹‹åŽç»™æˆ‘æ£€æŸ¥ä¸€ä¸‹ï¼Œå¦‚æžœé—®é¢˜ä¸å¤§æˆ‘ä»¬ä»Šå¤©å°±æ—©æ—©å‡ºå‘â€ï¼Œä»–è‡ªä¿¡çš„è¯´ï¼šâ€æ²¡é—®é¢˜â€œã€‚ å°çš„æ—¶å€™å®¶é‡Œæ¯”è¾ƒè´«å¯’ï¼Œæˆ‘åˆæ¯”è¾ƒå–œæ¬¢è¯»ä¹¦ï¼Œç™½å¤©é™¤äº†ä¸Šå­¦å¤–å…¶ä»–æ—¶é—´å‡ ä¹Žéƒ½éœ€è¦å¸®åŠ©çˆ¶æ¯å¹²å†œæ´»ï¼Œä¹Ÿåªæœ‰æ™šä¸Šæœ‰æ—¶é—´æ¥è¯»ä¹¦å’Œå†™ä½œä¸šã€‚åŒ—æ–¹çš„å†¬å¤©å¾ˆå†·ï¼Œæœ‰æ—¶å€™è¿žç”µæˆ‘éƒ½èˆä¸å¾—ç”¨ï¼Œå·å·çš„ç‚¹ä¸Šèœ¡çƒ›ï¼Œæ¯äº²ç»å¸¸åŠå¤œèµ·æ¥çœ‹æˆ‘ï¼Œå¥¹ä¹Ÿæ²¡æœ‰è¯´æˆ‘ä»€ä¹ˆï¼Œåªæ˜¯å‘Šè¯‰æˆ‘ä¸è¦å¤ªæ™šäº†ï¼ŒåŽæ¥å¥¹è¿˜ç»™æˆ‘å‡†å¤‡äº†ä¸€ä¸ªå°ç«ç‚‰ã€‚æ¯æ¬¡è€ƒè¯•ç»“æžœä¸ç®¡æ˜¯å¥½è¿˜æ˜¯å·®ï¼Œå¥¹æ€»æ˜¯å‘Šè¯‰æˆ‘è¦ç»§ç»­åŠªåŠ›ã€‚å¦‚æžœä½ å·²ç»æ˜¯ä¸€åå­¦ç”Ÿçš„å®¶é•¿äº†ï¼Œçœ‹åˆ°å­©å­åœ¨åŠªåŠ›ä¸è¦è½»æ˜“æ‰“æ–­ä»–ï¼Œä½ åªéœ€è¦é¼“åŠ±å’Œæ”¯æŒTaå°±å¥½äº†ã€‚å–œæ¬¢ç”µå½±ä¸­çš„ä¸€å¥å°è¯ï¼šâ€œå­©å­éƒ½æœ‰ä¸€ä¸ªç¥žå¥‡çš„æ„Ÿå—å™¨ï¼Œèƒ½çŸ¥é“ä½ æ˜¯ä¸æ˜¯çœŸçš„çˆ±TAâ€ã€‚ çŽ°åœ¨ç¤¾ä¼šç«žäº‰åŽ‹åŠ›ç¡®å®žå¾ˆå¤§ï¼Œçˆ¶æ¯ä¸ºäº†å­©å­ä¹Ÿæ˜¯æ“ç¢Žäº†å¿ƒï¼Œæ‹…å¿ƒå­©å­å°†æ¥æ€Žä¹ˆåŠžï¼ŒäºŽæ˜¯å„ç§å­¦ä¹ èµ„æ–™ï¼Œè¡¥ä¹ ç­æŠŠå­©å­åŽ‹å¾—æ°”å–˜ååã€‚ä½œä¸ºçˆ¶æ¯ä¸ç£ä¿ƒå­©å­å­¦ä¹ å’Œè¿›æ­¥ï¼Œæ˜¯æˆ‘ä»¬çš„å¤±èŒï¼Œä½†æ˜¯è¿‡åº¦çš„åŽ‹è¿«å­©å­å°±æ˜¯åœ¨çŠ¯ç½ªï¼Œæ¯ä¸ªå­©å­éƒ½æœ‰è‡ªå·±çš„çˆ±å¥½å’Œæ¢¦æƒ³ï¼Œæˆ‘ä»¬åº”è¯¥æ•™å¯¼ä»–è¦åŠªåŠ›åŽ»å®žçŽ°è‡ªå·±çš„ç›®æ ‡ï¼Œè€Œä¸æ˜¯å‘Šè¯‰ä»–ä½ åªæœ‰è€ƒä¸Šæ¸…åŽåŒ—å¤§æ‰èƒ½ç»§ç»­è‡ªå·±çš„äººç”Ÿï¼Œå°±åƒç”µå½±é‡Œé¢è¯´çš„ï¼š â€œä½ æœ‰æ²¡æœ‰æƒ³è¿‡é•¿å¤§è¦å¹²ä»€ä¹ˆâ€ï¼Ÿ â€œæ¸…åŽåŒ—å¤§å•Šï¼Œå¦ˆå¦ˆè¯´çš„â€ã€‚ â€œæ¸…åŽåŒ—å¤§åªæ˜¯è¿‡ç¨‹ï¼Œä¸æ˜¯ç›®çš„â€ã€‚ â€œç­‰ä½ é•¿å¤§äº†ä¸€å®šè¦åšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…â€ã€‚ åªæœ‰åšè‡ªå·±å–œæ¬¢çš„äº‹æ‰æœ‰å¯èƒ½åˆ›é€ å¥‡è¿¹ï¼ éœ€è¦ç‹¬ç«‹æ€è€ƒçš„èƒ½åŠ›æˆ‘å®¶é‚£ä¸ªå°å­å¾ˆå–œæ¬¢æ‹¼å›¾ï¼Œå–œæ¬¢ä¸€ä¸ªäººé»˜é»˜æ— é—»çš„åœ¨æˆ¿é—´æ‹¯æ•‘å„ç§å¡ç‰‡ï¼Œä»¿ä½›åªæœ‰ä»–æ‰èƒ½è®©æ•£è£…çš„å¥¥ç‰¹æ›¼å¤æ´»ã€‚æ¯æ¬¡æ‹¼è£…å®Œæˆä»–éƒ½è¦è¿‡æ¥ç‚«è€€ä¸€ç•ªï¼Œå½“ç„¶æˆ‘ä¹Ÿä¼šç»™ä»–ä¸€ä¸ªå¤§å¤§çš„èµžã€‚ æˆ‘ä»¬åœ¨ç½‘ä¸Šä¹°ä¸€äº›ä¸œè¥¿ï¼Œåªè¦ä»–åœ¨å®¶ä»–éƒ½ä¼šè¦æ±‚åŽ»æ‹†è£…ã€‚è®°å¾—ä¸Šæ¬¡ä¹°äº†ä¸€ä¸ªå¸å°˜å™¨ï¼Œæˆ‘æ‰“ç”µè¯ç»™æˆ‘è€å©†è¯´ç­‰æˆ‘å›žæ¥ç»„è£…ã€‚æ²¡è¿‡ä¸€ä¼šï¼Œæˆ‘è€å©†å‘Šè¯‰æˆ‘è¯´ï¼Œä½ å„¿å­å·²ç»ç»„è£…å¥½äº†ã€‚æˆ‘å›žæ¥ä¸€çœ‹ç»„è£…è™½ç„¶æ²¡æœ‰é‚£ä¹ˆå®Œç¾Žï¼Œä½†æ˜¯å¯¹äºŽä¸€ä¸ªä¸åˆ°6å²çš„å­©å­æ¥è¯´å·²ç»å¾ˆä¸é”™äº†ã€‚ä¹‹å‰æ€»æ˜¯æ‹…å¿ƒå­©å­åšä»»ä½•äº‹ä¸€å®šåšä¸å¥½ï¼Œæ‰€ä»¥å¤„å¿ƒç§¯è™‘çš„é¿å¼€ä»–ï¼Œç”Ÿæ€•ä»–è¦è‡ªå·±åŽ»åšï¼Œè‡ªä»Žè‡ªå·±çœ‹è¿‡å‡ æœŸå…³äºŽå­©å­å¦‚ä½•ç‹¬ç«‹çš„è¯¾ç¨‹åŽå¤§å¤§çš„æ”¹å˜äº†æˆ‘çš„æƒ³æ³•ã€‚ è®°å¾—è‡ªå·±å°æ—¶å€™ï¼Œçˆ¶æ¯éƒ½å¾ˆå¿™ã€‚çœ‹åˆ°ä»–ä»¬å¤ªç´¯äº†å°±æƒ³ç€è‡ªå·±ä¸€å®šè¦å­¦ä¼šåšé¥­ï¼ŒäºŽæ˜¯è‡ªå·±å°±ä»Žä¸‹é¢æ¡å¼€å§‹ï¼Œæ…¢æ…¢çš„ä»Žæ´—ç¢—æ´—é”…å˜æˆäº†ä¸€ä¸ªå°åŽ¨å¸ˆï¼Œå¦ˆå¦ˆä¸ºäº†è¿™ä¸ªäº‹éª„å‚²äº†å¾ˆä¹…ã€‚çˆ¶æ¯ä¸èƒ½æ€»æ˜¯é˜»æ­¢å­©å­åŽ»åšä»–æ„Ÿå…´è¶£çš„äº‹æƒ…ï¼Œæˆ‘ä»¬åªéœ€è¦åšå¥½å¼•å¯¼å³å¯ï¼Œæ”¾å¿ƒï¼Œä»–ä»¬å¾ˆé è°±ï¼å°±æ‹¿å­©å­è·Œå€’è¿™ä»¶äº‹æ¥è¯´ï¼Œå¾ˆå¤šçˆ·çˆ·å¥¶å¥¶çœ‹åˆ°å­©å­ä¸å°å¿ƒæ‘”å€’å°±è¿«ä¸åŠå¾…çš„åŽ»æŠ±èµ·æ¥ï¼Œå…¶å®žè¿™æ˜¯ä¸å¯¹çš„ï¼Œæˆ‘ä»¬åº”è¯¥å¼•å¯¼å­©å­å¦‚ä½•è‡ªå·±ç«™èµ·æ¥ï¼ŒTaä¸‹æ¬¡å°±çŸ¥é“å³ä½¿è·Œå€’ä¹Ÿè¦è‡ªå·±çˆ¬èµ·æ¥ã€‚ å­©å­åœ¨ç”Ÿæ´»ä¸­ä¹Ÿä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå­©å­ä»¬æœ‰è‡ªå·±çš„å°ä¸–ç•Œï¼Œåˆ«ä»¥ä¸ºä»–ä»¬å°±æ²¡æœ‰çƒ¦æ¼å’Œå›°éš¾ã€‚åœ¨é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸è¦ç›´æŽ¥è‡ªä»¥ä¸ºæ˜¯çš„ç»™å‡ºç­”æ¡ˆï¼Œé—®é—®Taèƒ½ä¸èƒ½å†åŠ¨åŠ¨è„‘ç­‹æƒ³æƒ³å…¶ä»–åŠžæ³•ï¼Ÿ æˆ‘ä»¬çš„å­©å­åˆ°åº•éœ€è¦æ€Žä¹ˆæ ·çš„æ•™è‚²ï¼Ÿç­”æ¡ˆæ˜¯ï¼šå­©å­éœ€è¦åŸ¹å…»ç‹¬ç«‹æ€è€ƒï¼Œå‹‡æ•¢é¢å¯¹è¿™ä¸ªä¸–ç•Œã€åšè‡ªå·±å–œæ¬¢äº‹æƒ…çš„æ•™è‚²ã€‚ åœ¨é©¬é£žé‡åˆ°æš´é›¨è€Œè¢«å›°ä½çš„æƒ…å†µä¸‹ï¼Œé©¬çš“æ–‡æ­‡æ–¯åº•é‡Œçš„è¯´ï¼šâ€œæˆ‘æ˜¯çˆ¸çˆ¸ï¼ŒåŠ¨åŠ¨ä½ çš„è„‘å­ï¼Œçœ‹çœ‹ä½ å‘¨å›´æœ‰ä»€ä¹ˆï¼Œä½ ä¸€å®šèƒ½å‡ºæ¥çš„â€ï¼Œç»“æžœå¥‡è¿¹å‡ºçŽ°äº†ï¼Œé©¬é£žè‡ªæ•‘äº†ã€‚è™½ç„¶æœ‰ç‚¹å¤¸å¼ ï¼Œä½†æ˜¯å®ƒå‘Šè¯‰æˆ‘ä»¬å¦‚æžœä¸æ˜¯çˆ¶äº²çš„å¼•å¯¼ä¸æ˜¯å„¿å­çš„è‡ªä¿¡å’Œæ€è€ƒè¿™å°†æ˜¯ä¸€åœºæ‚²å‰§ï¼Œè‡³å°‘æˆ‘çœ‹å“­äº†ã€‚ é“¶æ²³è¡¥ä¹ ç­ï¼Œåˆ°åº•ç»™æˆ‘ä»¬è¡¥äº†ä»€ä¹ˆï¼Ÿ æ¯ä¸ªäººå¿ƒä¸­éƒ½æœ‰è‡ªå·±çš„ç­”æ¡ˆï¼Œå¯¹æˆ‘æ¥è¯´è‡³å°‘è®©æˆ‘è®¤è¯†åˆ°äº†é™ªä¼´å’Œé¼“åŠ±å¾ˆé‡è¦ï¼ è®°å¾—è®©å­©å­åšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…ï¼Œä½ åªéœ€è¦é¼“åŠ±å’Œç›¸ä¿¡ä»–ï¼ çœŸæ­£çš„äººç”Ÿéš¾é¢˜ï¼Œä¸ä¼šåƒè€ƒå·é‚£æ ·ï¼Œä¼šè‡ªåŠ¨è·³å‡ºABCDå››ä¸ªé€‰é¡¹ï¼Œæœ‰ä¸”åªæœ‰ä¸€ç§æ ‡å‡†ç­”æ¡ˆã€‚è€Œæ˜¯ä¼šæœ‰EFGHIJKçš„å²”è·¯ï¼Œç”šè‡³èƒ½å¼€å‡ºXYZçš„è„‘æ´žã€‚~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç”µå½±</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: Swaggerç”ŸæˆMarkdownæ–‡æ¡£]]></title>
    <url>%2F2019%2F10%2F13%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-Swagger%E7%94%9F%E6%88%90Markdown%E6%96%87%E6%A1%A3%2F</url>
    <content type="text"><![CDATA[å›½åº†æ”¾å‡æœŸé—´ï¼Œçœ‹äº†ä¸€éƒ¨ 2018å¹´ä¸Šæ˜ çš„ç”µå½± ã€Šæœ¬æ°æ˜Ž.å·´é¡¿å¥‡äº‹ã€‹ï¼Œè±†ç“£è¯„åˆ† 8.9ã€‚å½±ç‰‡è®²è¿°äº†ä¸€å‡ºç”Ÿä¾¿æ‹¥æœ‰80å²è€äººå½¢è±¡çš„æœ¬æ°æ˜ŽÂ·å·´é¡¿ï¼Œéšç€å²æœˆçš„æŽ¨ç§»é€æ¸å˜å¾—å¹´è½»ï¼Œæœ€ç»ˆå›žåˆ°å©´å„¿å½¢æ€ï¼Œå¹¶åœ¨è‹è€çš„æ‹äººé»›èŒœæ€€ä¸­ç¦»ä¸–çš„å¥‡å¼‚æ•…äº‹ã€‚ å¦‚æžœæ²¡æœ‰çœ‹è¿‡è¿™éƒ¨å½±ç‰‡çš„å°ä¼™ä¼´æŠ½æ—¶é—´å¯ä»¥åŽ»çœ‹çœ‹ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå…³äºŽäººç”Ÿçš„å“²ç†ã€‚ æœ¬æ¬¡æ–‡ç« å°é¢å›¾æ¥è‡ªè¯¥ç”µå½±ã€‚ ç®€ä»‹æ–‡ç«  å¾®æœåŠ¡: Swaggerè®©ä½ å¯ä»¥å¤šæŠ½ä¸€æ”¯çƒŸ ç»™å¤§å®¶åˆ†äº«äº†å¦‚ä½•åœ¨è‡ªå·±çš„ SpringBoot å·¥ç¨‹ä¸­é›†æˆ Swagger ä»¥åŠå¦‚ä½•ä½¿ç”¨ Swagger ç”Ÿæˆåœ¨çº¿æ–‡æ¡£ã€‚ä»Šå¤©è·Ÿå¤§å®¶åˆ†äº«ä»¥ä¸‹å¦‚ä½•ä½¿ç”¨ Swagger ç”Ÿæˆç¦»çº¿çš„ Markdown æ ¼å¼çš„æ–‡æ¡£ï¼Œåœ¨é˜…è¯»ä¸‹é¢å†…å®¹ä¹‹å‰ï¼Œè¿˜æ˜¯å¸Œæœ›å¤§å®¶èƒ½çœ‹ä¸€ä¸‹ å¾®æœåŠ¡: Swaggerè®©ä½ å¯ä»¥å¤šæŠ½ä¸€æ”¯çƒŸ è¿™ç¯‡æ–‡ç« ã€‚ æœ¬äººæ˜¯ä¸€ä¸ªçƒ­çˆ± Markdown çš„ç‹‚çƒ­åˆ†å­ï¼Œæ— è®ºæ˜¯å†™æ—¥è®°è¿˜æ˜¯å·¥ä½œç¬”è®°æˆ‘éƒ½ä¼šä½¿ç”¨ Markdownå·¥å…·æ¥åšï¼Œé‚£ç§æ‰€è§å³æ‰€å¾—çš„æ„Ÿè§‰æœ‰ç‚¹æš—çˆ½ã€‚è‡ªå·±åœ¨ç½‘ä¸Šä¹Ÿæ‰¾äº†å¾ˆå¤šå…³äºŽå¦‚ä½•ä½¿ç”¨ Swagger ç”Ÿæˆ Markdown æ ¼å¼çš„æ–‡æ¡£ï¼Œå¤§å¤šæ•°æ–‡ç« éƒ½æ¯”è¾ƒé™ˆæ—§ï¼Œå¥½ä¸å®¹æ˜“æ‰¾åˆ°ä¸€ç¯‡è‡ªè®¤ä¸ºè¿˜å¯ä»¥çš„æ–‡ç« åŽ»å®žè·µå‘çŽ°è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜ï¼ŒäºŽæ˜¯ç»è¿‡æ‘¸ç´¢è¯žç”Ÿäº†æ­¤æ–‡ã€‚ é›†æˆ swagger2markupæ’ä»¶ Swagger2Markup å¯ä»¥å¸®åŠ©æˆ‘ä»¬å°† Swagger æ–‡æ¡£è½¬æ¢ä¸ºç¦»çº¿çš„ Markdown æ ¼å¼çš„æ–‡æ¡£ï¼ŒSwagger2Markup ä»‹ç»å¦‚ä¸‹ï¼š 1Swagger2Markup converts a Swagger JSON or YAML file into several AsciiDoc or GitHub Flavored Markdown documents which can be combined with hand-written documentation. å¯ä»¥åœ¨ mvnrepository ä»“åº“ä¸­æœç´¢ swagger2markupï¼Œå¦‚å›¾ï¼š æˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬ä¸€ä¸ªï¼Œå½“å‰ç‰ˆæœ¬æ˜¯ 1.3.3ï¼Œåœ¨å·¥ç¨‹çš„ pom æ–‡ä»¶ä¸­ï¼Œéœ€è¦é›†æˆ swagger å’Œ swagger2markupï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718&lt;!--swagger--&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;!--swagger2markup--&gt;&lt;dependency&gt; &lt;groupId&gt;io.github.swagger2markup&lt;/groupId&gt; &lt;artifactId&gt;swagger2markup&lt;/artifactId&gt; &lt;version&gt;1.3.3&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; å¦‚æžœä½ è®¤ä¸ºè¿™æ ·å°±å¯ä»¥äº†ï¼Œé‚£ä½ æŽ¥ä¸‹æ¥æ— æ³•å®Œæˆç¼–è¯‘å·¥ä½œï¼Œå› ä¸ºæ ¹æœ¬ä¸‹è½½ä¸äº† swagger2markupï¼Œè¿˜éœ€è¦åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011&lt;!--ä¸åŠ è¿™ä¸ªï¼Œswagger2markup æ‰¾ä¸åˆ°--&gt;&lt;repositories&gt; &lt;repository&gt; &lt;snapshots&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;id&gt;jcenter-releases&lt;/id&gt; &lt;name&gt;jcenter&lt;/name&gt; &lt;url&gt;http://jcenter.bintray.com&lt;/url&gt; &lt;/repository&gt;&lt;/repositories&gt; ç¼–å†™æµ‹è¯•ä»£ç æ’ä»¶é›†æˆæˆåŠŸä¹‹åŽï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åŽ»å®žçŽ°ç”Ÿæˆ Markdown æ–‡æ¡£çš„æ¢¦æƒ³äº†ï¼Œæœ‰ç‚¹å°é¸¡å†»â€¦ å•å…ƒæµ‹è¯•ä»£ç ç¤ºä¾‹ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940import io.github.swagger2markup.Swagger2MarkupConfig;import io.github.swagger2markup.Swagger2MarkupConverter;import io.github.swagger2markup.builder.Swagger2MarkupConfigBuilder;import io.github.swagger2markup.markup.builder.MarkupLanguage;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.http.MediaType;import org.springframework.mock.web.MockHttpServletResponse;import org.springframework.test.context.junit4.SpringRunner;import org.springframework.test.web.servlet.MockMvc;import org.springframework.test.web.servlet.MvcResult;import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;import java.net.URL;import java.nio.file.Paths;@RunWith(SpringRunner.class)@AutoConfigureMockMvc@SpringBootTestpublic class SpringbootApplicationTests &#123; @Test public void generateMarkdownFile() throws Exception &#123; Swagger2MarkupConfig config = new Swagger2MarkupConfigBuilder() .withMarkupLanguage(MarkupLanguage.MARKDOWN) .build(); URL apiUrl = new URL("http://localhost:8080/v2/api-docs"); // æŒ‡å®šæ–‡ä»¶åç§° String markdownFileName = "src/docs/markdown/generated/MSBlog_Server_API"; Swagger2MarkupConverter.from(apiUrl) .withConfig(config) .build() //æŒ‡å®šç”Ÿæˆç›®å½•ä¸‹ç”ŸæˆæŒ‡å®šæ–‡ä»¶ .toFile(Paths.get(markdownFileName)); &#125;&#125; ç¼–å†™å®ŒæˆåŽï¼Œå¯ä»¥è¿è¡Œ generateMarkdownFile è¿™ä¸ªæ–¹æ³•ï¼Œå³é”®è¯¥æ–¹æ³•ï¼Œå‡ºçŽ°å¼¹æ¡†å¦‚ä¸‹å›¾ï¼š ç›´æŽ¥é€‰æ‹© Run generateMarkdownFile å³å¯å¼€å§‹ã€‚ ä¸å‡ºæ„å¤–çš„è¯ï¼Œä¼šå¤±è´¥å¹¶ä¸”æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 1Failed to read the Swagger source å› ä¸ºæˆ‘ä»¬æ˜¯è¦ä»Ž http://localhost:8080/v2/api-docs è¯»å–å†…å®¹ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦å°†ä¸»å·¥ç¨‹è¿è¡Œèµ·æ¥å³è¿è¡Œé¡¹ç›®ã€‚è¿è¡ŒæˆåŠŸä¹‹åŽï¼Œå†æ¥æ‰§è¡Œæµ‹è¯•ä»£ç å°±å¯ä»¥æˆåŠŸäº†ã€‚ ç”Ÿæˆçš„æ–‡ä»¶å¦‚ä¸‹ï¼š æ­¤æ—¶çš„æˆ‘æƒ…ä¸è‡ªç¦çš„å“¼èµ·äº†ï¼šâ€œåªè¦äººäººéƒ½çŒ®å‡ºä¸€ç‚¹çˆ±ï¼Œä¸–ç•Œå°†å˜æˆç¾Žä¸½çš„äººé—´â€ çš„æ­Œè¯ï¼Œå§æ§½+nâ€¦æ€»ç®—å¯ä»¥äº†ã€‚ åŒç†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ç”Ÿæˆ doc æ ¼å¼çš„æ–‡æ¡£ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516@Testpublic void generateDocsFile() throws Exception &#123; Swagger2MarkupConfig config = new Swagger2MarkupConfigBuilder() .withMarkupLanguage(MarkupLanguage.ASCIIDOC) .build(); // è¯¥åœ°å€ä¸è¦å†™é”™ URL apiUrl = new URL("http://localhost:8080/v2/api-docs"); // æŒ‡å®šç›®å½• String dirName = "src/docs/markdown/generated"; Swagger2MarkupConverter.from(apiUrl) .withConfig(config) .build() //æŒ‡å®šç”Ÿæˆç›®å½• .toFolder(Paths.get(dirName));&#125; æ‰“çƒŠï¼Œæ‰‹å·¥ï¼ ä¸€ä»¶äº‹æ— è®ºå¤ªæ™šæˆ–è€…å¤ªæ—©ï¼Œéƒ½ä¸ä¼šé˜»æ‹¦ä½ æˆä¸ºä½ æƒ³æˆä¸ºçš„é‚£ä¸ªäººï¼Œè¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰æ—¶é—´çš„æœŸé™ï¼Œåªè¦ä½ æƒ³ï¼Œéšæ—¶éƒ½å¯ä»¥å¼€å§‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot Swagger Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: Swaggerè®©ä½ å¯ä»¥å¤šæŠ½ä¸€æ”¯çƒŸ]]></title>
    <url>%2F2019%2F09%2F22%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-Swagger%E8%AE%A9%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%A4%9A%E6%8A%BD%E4%B8%80%E6%94%AF%E7%83%9F%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹Swaggerï¼Œå¯ç”¨äºŽç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ– RESTful é£Žæ ¼æŽ¥å£çš„APIï¼Œæ˜¯ä¸€å¥—è§„èŒƒå’Œå®Œæ•´çš„å¼€å‘æ¡†æž¶ï¼Œå¹¶ä¸”èƒ½å¯¹æŽ¥å£è¿›è¡Œå•ç‹¬æµ‹è¯•ã€‚ å¦å¤–ï¼Œ Swagger åœ¨ Github ä¸Šé¢æ˜¯å¼€æºçš„ã€‚ æ— è®ºå¯¹äºŽåŽç«¯å¼€å‘ï¼Œè¿˜æ˜¯å‰ç«¯å¼€å‘ä»¥åŠæµ‹è¯•åŒäº‹ï¼ŒSwagger éƒ½å¯ä»¥åŸºæœ¬æ»¡è¶³ä½¿ç”¨éœ€æ±‚ã€‚ åœ¨ SpringBoot ä¸­é›†æˆ Swaggerï¼ŒåŽç«¯åŒäº‹å†™å®ŒæŽ¥å£å°±å¯ä»¥è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ï¼Œå¯ä»¥ç»™åˆ°å‰ç«¯åŒäº‹çœ‹ï¼Œæµ‹è¯•åŒäº‹å¯ä»¥ç›´æŽ¥æµ‹è¯•è¯¥æŽ¥å£ã€‚ åœ¨æœ¬ç¯‡ä¸­ï¼Œè·Ÿå¤§å®¶åˆ†äº«å¦‚ä¸‹å†…å®¹ï¼š 1ã€åœ¨ SpringBoot ä¸­é¡¹ç›®å¦‚ä½•é›†æˆ Swaggerï¼Ÿ 2ã€å¦‚ä½•ä½¿ç”¨ Swaggerï¼Œå¦‚ä½•åœ¨ä¸åŒçš„çŽ¯å¢ƒä¸­å¼€å¯å’Œå…³é—­ Swaggerï¼Ÿ 3ã€å¦‚ä½•å°†åŒç±»çš„æŽ¥å£ä½¿ç”¨ Swagger æ³¨è§£è¿›è¡Œèšåˆï¼Ÿ æ›´å¤šå…³äºŽ SpringBoot çš„æ–‡ç« ï¼Œå¯ä»¥ç‚¹å‡» å¾®æœåŠ¡é¡¹ç›®ç³»åˆ—æ–‡ç«  äº†è§£ï¼Œå®Œæ•´ä»£ç ç¤ºä¾‹è¯·å‰å¾€ Github æŸ¥çœ‹ã€‚ é›†æˆ Swaggeråœ¨ MavenEwpository æœç´¢ Springfoxï¼Œå¯ä»¥æ‰¾åˆ° Swagger2 å’Œ Swagger UIï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ æˆªæ­¢åˆ°ç›®å‰ï¼Œ Swagger2 å’Œ Swagger UI æœ€æ–°ç‰ˆæœ¬æ˜¯ 2.9.2 ç‰ˆæœ¬ã€‚ ä¿®æ”¹å·¥ç¨‹çš„pomæ–‡ä»¶ï¼Œå¢žåŠ  Swagger2 å’Œ Swagger UI çš„ä¾èµ–ï¼Œå¦‚ä¸‹ï¼š 1234567891011&lt;!--swagger--&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt; å› ä¸ºæˆ‘çš„é¡¹ç›®å·²ç»é›†æˆäº† starter-webï¼Œå¦‚ä¸‹ pom æ–‡ä»¶ä¸­çš„ dependencyï¼š 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; è¿™æ ·é»˜è®¤ä¼šé›†æˆ com.fasterxml.jackson.core: ç›¸å…³çš„åº“ï¼Œä¸éœ€è¦é¢å¤–å†åŽ»é›†æˆ jackson-databind äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦åˆ™ä½ éœ€è¦å•ç‹¬å¢žåŠ  jackson-databind çš„ä¾èµ–ï¼ŒåŒæ ·çš„é“ç†ä½ å¯ä»¥åœ¨ MavenEwpository æœç´¢ jackson-databind é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬å³å¯ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.8&lt;/version&gt;&lt;/dependency&gt; å·¥ç¨‹å·²ç»é›†æˆäº† Swaggerï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ã€‚ ä½¿ç”¨ Swagger1ã€åˆ›å»ºSwaggeré…ç½®æ–°å»ºä¸€ä¸ªé…ç½®ç±» MSSwaggerConfigï¼Œè¯¥æ–‡ä»¶åç§°å’Œä½ç½®ä½ å¯ä»¥æ”¾åˆ°ä½ çš„å·¥ç¨‹çš„ä»»æ„ç›®å½•ï¼Œæ ¹æ®è‡ªå·±çš„é¡¹ç›®ç›®å½•æ¥æ”¾ç½®å³å¯ã€‚ MSSwaggerConfig ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930@Configuration@EnableSwagger2public class MSSwaggerConfig &#123; @Bean public Docket msblogDocket() &#123; Docket docket = new Docket(DocumentationType.SWAGGER_2); String pkgName = "com.veryitman.springboot.controller"; return docket.apiInfo(msblogAPIInfo()).select() .apis(RequestHandlerSelectors.basePackage(pkgName)) .paths(PathSelectors.any()) .build(); &#125; private ApiInfo msblogAPIInfo() &#123; ApiInfoBuilder apiInfoBuilder = new ApiInfoBuilder(); String apiTitle = "MSBlog Server API"; String apiDes = "API for MSBlog"; String apiVersion = "1.0.0"; String homePage = "http://veryitman.com"; String emailUrl = "veryitman@126.com"; Contact contact = new Contact("itman", homePage, emailUrl); return apiInfoBuilder.title(apiTitle).description(apiDes) .version(apiVersion) .contact(contact) .license("Apache 2.0") .licenseUrl("http://www.apache.org/licenses/LICENSE-2.0.html") .build(); &#125;&#125; è®°å¾—æ·»åŠ  @Configurationã€ @EnableSwagger2 è¿™ä¸¤ä¸ªæ³¨è§£ã€‚ å¯¹äºŽ apis(RequestHandlerSelectors.basePackage(pkgName)) ç›®çš„æ˜¯åªæ‰«ææŒ‡å®šåŒ…åä¸‹é¢ Controller çš„ Swagger æ³¨è§£ï¼Œè¿™æ ·å°±ä¸ä¼šåŽ»æ‰«æå…¶ä»–åŒ…ä¸‹é¢çš„ç±»äº†ã€‚ å¯¹äºŽè¿™ä¸ªé…ç½®ç±»ï¼Œä¸»è¦æ˜¯ç”¨æ¥ç”Ÿæˆä¸€äº›æ‘˜è¦ä¿¡æ¯ï¼Œå¦‚å›¾ï¼š 2ã€æ³¨è§£ Controlleråœ¨ å¾®æœåŠ¡-ç®€å•çš„ç”¨æˆ·åæ³¨å†Œå’Œç™»å½• ç»™å¤§å®¶åˆ†äº«äº†å¦‚ä½•å†™æ³¨å†Œå’Œç™»å½•çš„APIï¼Œä»Šå¤©è¿˜æ˜¯æ‹¿æ³¨å†Œçš„ä¾‹å­æ¥è¿›è¡Œ Swagger çš„æ¼”ç¤ºã€‚ ä¸‹é¢ä»£ç æ˜¯ç”¨æˆ·æ³¨å†Œçš„ç¤ºä¾‹ä»£ç ã€‚ 123456789101112131415@RestController@RequestMapping(value = "signup")public class MSSignupController &#123; @CrossOrigin(origins = &#123;"*"&#125;) @PostMapping(value = "/name") @ApiOperation(value = "ç”¨æˆ·æ³¨å†Œ", httpMethod = "POST", notes = "ç”¨æˆ·åå’Œå¯†ç æ³¨å†Œ") @ApiImplicitParams(&#123; @ApiImplicitParam(name = "username", value = "æ³¨å†Œçš„ç”¨æˆ·å", required = true), @ApiImplicitParam(name = "userpwd", value = "æ³¨å†Œçš„å¯†ç ", required = true) &#125;) public MSResponse signup(@RequestParam(value = "username") String userName, @RequestParam(value = "userpwd") String userPwd) &#123; // çœç•¥ &#125;&#125; å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„æ³¨è§£ï¼š 12345@ApiOperation(value = "ç”¨æˆ·æ³¨å†Œ", httpMethod = "POST", notes = "ç”¨æˆ·åå’Œå¯†ç æ³¨å†Œ")@ApiImplicitParams(&#123; @ApiImplicitParam(name = "username", value = "æ³¨å†Œçš„ç”¨æˆ·å", required = true), @ApiImplicitParam(name = "userpwd", value = "æ³¨å†Œçš„å¯†ç ", required = true)&#125;) è¿™äº›æ³¨è§£å°±æ˜¯ Swagger çš„æ³¨è§£ï¼Œ@ApiOperation è¯´æ˜Žäº†è¯¥æŽ¥å£çš„ç”¨é€”ï¼Œ@ApiImplicitParams ä¸­æœ‰ä¸¤ä¸ª @ApiImplicitParam ç”¨æ¥å¯¹æŽ¥å£çš„å‚æ•°è¿›è¡Œè¯´æ˜Žã€‚ å¦‚æžœæŽ¥å£åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ @ApiImplicitParam æ³¨è§£å³å¯ã€‚ 3ã€åœ¨çº¿æ–‡æ¡£é…ç½®å®Œæˆä¹‹åŽï¼Œå¯ä»¥å¯åŠ¨ SpringBoot é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä¸‹é¢åœ°å€ï¼Œå°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„åœ¨çº¿æ–‡æ¡£äº†ã€‚ 1http://localhost:8080/swagger-ui.html#/ ç‚¹å‡»å¯¹åº”çš„ Controller å°±å¯ä»¥çœ‹åˆ°å¯¹åº”æŽ¥å£çš„è¯¦ç»†è¯´æ˜Žäº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å¯¹æŽ¥å£è¿›è¡Œæµ‹è¯•ã€‚ åˆ†çŽ¯å¢ƒå¼€å¯ Swaggeråœ¨å®žé™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªä¼šåœ¨å¼€å‘å’Œæµ‹è¯•çŽ¯å¢ƒä½¿èƒ½ Swaggerï¼Œåœ¨æ²™ç›’å’Œç”ŸæˆçŽ¯å¢ƒä¼šå…³é—­ Swaggerï¼Œé‚£å¦‚ä½•æŽ§åˆ¶å‘¢ï¼Ÿ åœ¨å·¥ç¨‹çš„ Resources ç›®å½•ä¸‹é¢ï¼Œæ–°å»ºå‡ ä¸ªè·ŸçŽ¯å¢ƒç›¸å…³çš„ properties æ–‡ä»¶ã€‚ è¿™äº›æ–‡ä»¶çš„å‘½ä»¤è¦æ»¡è¶³ application-{profile}.properties çš„æ ¼å¼ï¼Œå…¶ä¸­ {profile} ä½ å¯ä»¥è‡ªå®šä¹‰åå­—ï¼Œå¦‚ä¸‹æˆ‘è‡ªå®šä¹‰äº†4ä¸ªçŽ¯å¢ƒï¼Œåˆ†åˆ«æ˜¯å¼€å‘ã€ç”Ÿäº§ã€æ²™ç›’å’Œæµ‹è¯•çŽ¯å¢ƒã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ application-{profile}.properties ä¸­é…ç½®çš„é€‰é¡¹ä¸Žåœ¨ application.properties ä¸­é…ç½®çš„é€‰é¡¹å¦‚æžœåç§°ç›¸åŒï¼Œä¼˜å…ˆä¼šä½¿ç”¨ application-{profile}.properties ä¸­é…ç½®ã€‚ åœ¨ application.properties ä¸­é…ç½®å¦‚ä¸‹ï¼š 1234# é…ç½®ä½¿ç”¨å“ªä¸ªçŽ¯å¢ƒspring.profiles.active=dev# é»˜è®¤ä¸å¯ç”¨ swaggerswagger.enable=false å¯¹åº”çš„åœ¨ application-dev.properties å’Œ application-test.properties ä¸­å¼€å¯ swaggerï¼Œå¦‚ä¸‹ï¼š 12# å¯ç”¨ swaggerswagger.enable=true é€‰é¡¹é…ç½®å®ŒæˆåŽï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œä¿®æ”¹ MSSwaggerConfig å¦‚ä¸‹(åªåˆ—å‡ºäº†ä¿®æ”¹éƒ¨åˆ†çš„å…³é”®ä»£ç )ï¼š 12345678910111213141516171819@Configuration@EnableSwagger2public class MSSwaggerConfig &#123; @Value("$&#123;swagger.enable&#125;") private boolean enableSwagger; @Bean public Docket msblogDocket() &#123; Docket docket = new Docket(DocumentationType.SWAGGER_2).enable(enableSwagger); String pkgName = "com.veryitman.springboot.controller"; return docket.apiInfo(msblogAPIInfo()) .select() // åªæ‰«ææŒ‡å®šåŒ…åä¸‹é¢çš„Controllerä¸­çš„Swaggeræ³¨è§£ .apis(RequestHandlerSelectors.basePackage(pkgName)) .paths(PathSelectors.any()) .build(); &#125; åœ¨ä¸‹é¢çš„ä»£ç ä¸­è¯»å–é…ç½® 12@Value("$&#123;swagger.enable&#125;")private boolean enableSwagger; ç„¶åŽè°ƒç”¨ Docket çš„ enable(enableSwagger) æ–¹æ³•æ¥å†³å®šæ˜¯å¦å¼€å¯ Swaggerï¼Œå¦‚æžœé…ç½®ä¸å¼€å¯ï¼Œæ•ˆæžœå›¾å¦‚ä¸‹ï¼š è¿˜æœ‰å…¶ä»–æ–¹å¼æ¥æŽ§åˆ¶åœ¨ä¸åŒçŽ¯å¢ƒä¸‹é…ç½® Swagger æ˜¯å¦å¼€å¯ï¼Œæ¯”å¦‚å¯ä»¥ç»“åˆæ³¨è§£ @Profile é€šè¿‡ä¸åŒçš„ profile ç»™ Swagger çš„ä¾èµ–è®¾ç½®ä¸åŒçš„ scopeï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ³¨è§£ @ConditionalOnProperty(name = &quot;swagger.enable&quot;, havingValue = &quot;true&quot;)ï¼Œå¤§å®¶è‡ªè¡Œé€‰æ‹©é€‚åˆè‡ªå·±é¡¹ç›®çš„æ–¹æ¡ˆå³å¯ï¼Œç›®çš„éƒ½æ˜¯ä¸€æ ·ã€‚ èšåˆæŽ¥å£åœ¨ä¸Šé¢å®žä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç™»å½•å’Œæ³¨å†Œéƒ½å±žäºŽç”¨æˆ·æ¨¡å—ï¼Œä½¿ç”¨æ³¨è§£ @API å¯ä»¥èšåˆæ˜¾ç¤ºè¿™äº›æŽ¥å£ã€‚ åœ¨ç™»å½•å’Œæ³¨å†Œçš„ Controller ä¸­å¯ä»¥æ·»åŠ ä¸‹é¢æ³¨è§£ï¼Œä»Žè€Œæ¥èšåˆæ˜¾ç¤ºæŽ¥å£ã€‚ 1@Api(value="xxx", tags="ç”¨æˆ·æ¨¡å—") æ³¨å†Œ Controller æ·»åŠ æ³¨è§£ï¼Œå¦‚ä¸‹ï¼š 12345@Api(value="signup", tags="ç”¨æˆ·æ¨¡å—")@RestController@RequestMapping(value = "signup")public class MSSignupController &#123;&#125; ç™»å½• Controller æ·»åŠ æ³¨è§£ï¼Œå¦‚ä¸‹ï¼š 12345@Api(value=&quot;signin&quot;, tags=&quot;ç”¨æˆ·æ¨¡å—&quot;)@RestController@RequestMapping(value = &quot;signin&quot;)public class MSSigninController &#123;&#125; æ˜¾ç¤ºæ•ˆæžœå¦‚ä¸‹ï¼š ä½ çœ¼ç›çœ‹åˆ°çš„ä¸ä¸€å®šæ˜¯äº‹å®žçš„å…¨éƒ¨~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot Swagger doc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: ç®€å•çš„ç”¨æˆ·åæ³¨å†Œå’Œç™»å½•]]></title>
    <url>%2F2019%2F09%2F15%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E7%AE%80%E5%8D%95%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E6%B3%A8%E5%86%8C%E5%92%8C%E7%99%BB%E5%BD%95%2F</url>
    <content type="text"><![CDATA[å†…å®¹æ¦‚è¦åœ¨æœ¬ç¯‡ä¸­æˆ‘ä»¬è¦å®Œæˆä¸€ä¸ªç›®æ ‡ï¼šæä¾›æ³¨å†Œã€ç™»å½•çš„æŽ¥å£ç»™å‰ç«¯æˆ–è€…å®¢æˆ·ç«¯æ¥ä½¿ç”¨ã€‚ æ¶‰åŠåˆ°çš„å†…å®¹ä¸»è¦æœ‰ä¸‹é¢å‡ ä¸ªï¼š 1ã€SpringBoot ä¸­å¸¸ç”¨çš„æ³¨è§£å¦‚ä½•ä½¿ç”¨ï¼Ÿ 2ã€ å¦‚ä½•å¯¹æŽ¥å£è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿ å…¶ä»–ç›¸å…³çš„å¾®æœåŠ¡æ–‡ç« ï¼Œå¯ä»¥ç‚¹å‡» å¾®æœåŠ¡é¡¹ç›®ç³»åˆ—æ–‡ç«  äº†è§£ã€‚ å¸¸ç”¨æ³¨è§£æŽ§åˆ¶å™¨ Controller æ˜¯ Spring ä¸­æœ€åŸºæœ¬çš„ç»„ä»¶ï¼Œä¸»è¦æ˜¯å¤„ç†è·Ÿç”¨æˆ·äº¤äº’çš„ï¼Œä¸€èˆ¬æ¯ä¸ªä¸šåŠ¡é€»è¾‘éƒ½ä¼šæœ‰ä¸€ä¸ª Controllerï¼Œæä¾› HTTP è¯·æ±‚æŽ¥å£ï¼Œç”¨æˆ·è¯·æ±‚æŽ¥å£è¿›è¡Œæ•°æ®è®¿é—®ã€‚ è·Ÿ Controller ç›¸å…³çš„å‡ ä¸ªæ³¨è§£ä¸»è¦æœ‰ @Controllerï¼Œ@RestControllerï¼Œ@RequestMappingï¼Œ@PathVariableï¼Œ@RequestParamï¼Œ@GetMapping ç­‰ã€‚ @Controllerï¼šæ ‡æ³¨ Controller ç±»ï¼Œå¤„ç† HTTP è¯·æ±‚ã€‚ @RestControllerï¼šæ ‡æ³¨ Controller ç±»ï¼ŒSpring 4 æ–°åŠ æ³¨è§£ï¼Œç›¸å½“äºŽ @Controller + @ResponseBody ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä½¿ HTTP è¯·æ±‚è¿”å›žæ•°æ®æ ¼å¼ä¸º json æ ¼å¼ï¼Œæ­£å¸¸æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªæ³¨è§£ã€‚ @RequestMappingï¼šé…ç½® URL æ˜ å°„ï¼Œå³è¯·æ±‚çš„åœ°å€ã€‚ @PathVariableï¼Œ@RequestParam ï¼Œ@QueryParam ï¼Œ@PathParam æ³¨è§£ï¼Œå¯ä»¥å‚è€ƒ å¾®æœåŠ¡: å­¦ä¹ å‡ ä¸ªå®¹æ˜“æ··æ·†çš„URLæ³¨è§£ è¿™ç¯‡æ–‡ç« ã€‚ @GetMappingï¼Œ@PostMappingï¼Œ@PutMapping ç§°ä¹‹ä¸ºç»„åˆæ³¨è§£ï¼Œå®ƒä»¬ç­‰ä»·äºŽ @RequestMapping å•ç‹¬æŒ‡å®šæ˜ å°„å†æŒ‡å®šè¯·æ±‚æ–¹æ³•ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹: 1@RequestMapping(value = "/signup/name", method = RequestMethod.POST) ç­‰ä»·äºŽä¸‹é¢çš„æ³¨è§£ï¼š 1@PostMapping(value = "/signup/name") ç¼–å†™å®žä½“ä¸ç®¡æ˜¯ç™»å½•è¿˜æ˜¯æ³¨å†Œï¼Œéƒ½æ˜¯æ¯ä¸ªç”¨æˆ·è¿›è¡Œçš„æ“ä½œï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ç”¨æˆ·å®žä½“ç±» MSUserï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223import lombok.Data;import java.io.Serializable;@Datapublic class MSUser implements Serializable &#123; private String userID; // è´¦å·åç§°ï¼Œç”¨äºŽç™»å½•ï¼Œä¸å¯ä»¥ä¿®æ”¹ private String accountName; // è´¦å·å¯†ç  private String accountPwd; // æ˜µç§°é»˜è®¤å’ŒaccountNameä¸€è‡´ï¼Œå¯ä»¥ä¿®æ”¹ private String nickName; private Integer age; private Integer gender; // åº§å³é“­ï¼›æ ¼è¨€ï¼›ç®´è¨€ private String motto;&#125; å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å®žä½“ç±» MSUser ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†æ³¨è§£ @Data ï¼Œè¯¥æ³¨è§£æ¥æºäºŽ lombokï¼Œéœ€è¦è‡ªå·±åœ¨IDEAä¸­å®‰è£…è¯¥æ’ä»¶ï¼Œå®‰è£…æ–¹æ³•è¯·å¤§å®¶è‡ªè¡Œæœç´¢è§£å†³ã€‚ æ³¨è§£ @Data ç›¸å½“äºŽç»™æˆ‘ä»¬è‡ªåŠ¨å®žçŽ°äº† Get ã€Setterã€toStringã€ equals å’Œ hashCode æ–¹æ³•ä»¥åŠæž„é€ æ–¹æ³•ï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å†åŽ»å†™è¿™äº›ä»£ç ã€‚ HTTP çš„è¯·æ±‚å“åº”ç»“æžœï¼Œä¹Ÿå¯ä»¥è¢«å°è£…ä¸ºå®žä½“ç±»ï¼Œå¦‚ä¸‹ MSResponse å°±æ˜¯ç”¨æ¥æ‰¿è½½HTTPè¿”å›žçš„å“åº”ã€‚ 12345678import lombok.Data;@Datapublic class MSResponse&lt;T&gt; &#123; private int code; private String msg; private T results;&#125; ç¼–å†™æŽ¥å£ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·æ³¨å†Œéœ€è¦å°†ç”¨æˆ·çš„ä¿¡æ¯å­˜ä¸‹æ¥ï¼Œå­˜åˆ°æ•°æ®åº“ä¸­æ–¹ä¾¿åŽç»­ä½¿ç”¨è¿™ä»½æ•°æ®ï¼Œè¿™ä¸ªè¡Œä¸ºç§°ä¹‹ä¸º æ•°æ®æŒä¹…åŒ– ï¼ŒçŽ°åœ¨æˆ‘ä»¬ä¸åšè¿™ä¸ªæ“ä½œï¼Œåªæ˜¯çº¯ç²¹çš„æä¾›æŽ¥å£è®©ç”¨æˆ·å¯ä»¥æ³¨å†Œã€ç™»å½•æˆ‘ä»¬çš„ç³»ç»Ÿï¼ŒåŽç»­å†æ¥è€ƒè™‘å’Œå®žçŽ°æ•°æ®æŒä¹…åŒ–ã€‚ è¿™ä¸ªé˜¶æ®µæ³¨å†ŒåŠŸèƒ½åªæä¾› ç”¨æˆ·å+å¯†ç  çš„æ–¹å¼ï¼Œè¯¥è¯·æ±‚æ˜¯ä¸ª POST è¯·æ±‚ï¼Œä¸»è¦æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324@RestController@RequestMapping(value = "signup")public class MSSignupController &#123; @CrossOrigin(origins = &#123;"*"&#125;) @PostMapping(value = "/name") public MSResponse signup(@RequestParam(value = "username") String userName, @RequestParam(value = "userpwd") String userPwd) &#123; MSResponse response = new MSResponse(); MSUser user = null; if (null == userName || null == userPwd || userName.length() &lt;= 0 || userPwd.length() &lt;= 0) &#123; MSResponseEnum signupError = MSResponseEnum.SignupInvalidInfo; response.setMsg(signupError.getMsg()); response.setCode(signupError.getCode()); &#125; else &#123; response.setCode(MSResponseEnum.SUCCESS.getCode()); response.setMsg(MSResponseEnum.SUCCESS.getMsg()); user = MSUserUtil.createUser(userName, userPwd); &#125; response.setResults(user); return response; &#125;&#125; åŒç†ï¼Œç™»å½•åŠŸèƒ½ä¹Ÿåªæä¾› ç”¨æˆ·å+å¯†ç  çš„æ–¹å¼ï¼Œè¯¥è¯·æ±‚æ˜¯ä¸ª GET è¯·æ±‚ï¼Œä¸»è¦æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425@RestController@RequestMapping(value = "signin")public class MSSigninController &#123; @CrossOrigin(origins = &#123;"*", "http://localhost:8082"&#125;) @RequestMapping(value = "/name", method = RequestMethod.GET) public MSResponse sigin(@RequestParam(value = "username") String userName, @RequestParam(value = "userpwd") String userPwd) &#123; MSResponse response = new MSResponse(); MSUser user = null; if (null == userName || null == userPwd || userName.length() &lt;= 0 || userPwd.length() &lt;= 0) &#123; MSResponseEnum responseEnum = MSResponseEnum.Login4SiginInvalidInfo; response.setCode(responseEnum.getCode()); response.setMsg(responseEnum.getMsg()); &#125; else &#123; user = MSUserUtil.createUser(userName, userPwd); MSResponseEnum rspEnum = MSResponseEnum.SUCCESS; response.setCode(rspEnum.getCode()); response.setMsg(rspEnum.getMsg()); &#125; response.setResults(user); return response; &#125;&#125; å•å…ƒæµ‹è¯•åœ¨ IDEA ä¸­æ–°å»º SpringBoot å·¥ç¨‹åŽï¼Œé»˜è®¤å°±ä¼šåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç›®å½•ã€‚ å³ test ç›®å½•ä¸‹ä¼šæœ‰ SpringbootApplicationTests ç±»æ–‡ä»¶ï¼Œå…¶ä¸­ pom æ–‡ä»¶ä¸­å·²ç»æ·»åŠ å¥½äº† spring-boot-starter-test å¯åŠ¨å™¨ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; springbootï¼test åŒ…ä¸­å·²ç»åŒ…æ‹¬äº† junit å’Œ mockito ç±»åº“ï¼Œä¸éœ€è¦æˆ‘ä»¬é¢å¤–å†åŽ»æ·»åŠ è¿™äº›åº“ã€‚ å€ŸåŠ©äºŽ MockMvc æˆ‘ä»¬å¯ä»¥å¯¹æŽ¥å£è¿›è¡Œç®€å•çš„å•å…ƒæµ‹è¯•äº†ã€‚ä¸»è¦çš„æµ‹è¯•æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344@RunWith(SpringRunner.class)@AutoConfigureMockMvc@SpringBootTestpublic class SpringbootApplicationTests &#123; @Autowired private MockMvc mvc; /* ç™»å½•çš„æŽ¥å£æµ‹è¯•ï¼ŒGET è¯·æ±‚ */ @Test public void signinTest() throws Exception &#123; //ç›´æŽ¥å†™æŽ¥å£çš„æ˜ å°„åœ°å€å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å†™hostå’Œport String url = "/signin/name?username=itman&amp;userpwd=123"; MvcResult mvcResult = mvc.perform(MockMvcRequestBuilders.get(url) .accept(MediaType.APPLICATION_JSON)) //æ–­è¨€è¿”å›žç»“æžœæ˜¯json .andReturn(); MockHttpServletResponse response = mvcResult.getResponse(); //HTTPå“åº”çš„è¿”å›žç  int status = response.getStatus(); //HTTPå“åº”çš„å†…å®¹ String contentAsString = response.getContentAsString(); System.err.println(status); System.err.println(contentAsString); &#125; /* æ³¨å†Œçš„æŽ¥å£æµ‹è¯•ï¼ŒPOST è¯·æ±‚ */ @Test public void signupTest() throws Exception &#123; String url = "/signup/name"; MvcResult mvcResult = mvc.perform(MockMvcRequestBuilders.post(url) .accept(MediaType.APPLICATION_JSON) .param("username", "itman") .param("userpwd", "123567")) .andReturn(); MockHttpServletResponse response = mvcResult.getResponse(); int status = response.getStatus(); String contentAsString = response.getContentAsString(); System.err.println(status); System.err.println(contentAsString); &#125;&#125; åœ¨ä¸Šé¢ç¼–å†™çš„æµ‹è¯•ä»£ç ä¸­ï¼Œè§£é‡Šä¸€ä¸‹å‡ ä¸ªç”¨åˆ°çš„æ³¨è§£å’Œç±»ã€‚ 1ã€@RunWith(SpringRunner.class) ï¼ŒSpringRunner æ˜¯ SpringJUnit4ClassRunner çš„ç®€å†™ï¼Œç”¨äºŽæä¾›æµ‹è¯•æ—¶çš„ Spring åº”ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ 2ã€MockMvc ï¼ŒMockMvc æ˜¯æµ‹è¯• Spring MVC åº”ç”¨ç¨‹åºçš„ä¸»è¦å…¥å£ï¼Œä¸ºæˆ‘ä»¬çš„æµ‹è¯•æä¾›äº†ä¸€ä¸ªæ¨¡æ‹Ÿçš„åº”ç”¨ä¸Šä¸‹æ–‡çš„çŽ¯å¢ƒã€‚ 3ã€@Autowiredï¼Œå¯ä»¥å¯¹ç±»æˆå‘˜å˜é‡ã€æ–¹æ³•åŠæž„é€ å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œå®Œæˆè‡ªåŠ¨è£…é…ã€‚ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºè¯¥å¯¹è±¡ï¼Œè¿™ä¸ªè·Ÿ Spring çš„ IOC æœºåˆ¶æœ‰å…³ã€‚ ä»£ç å†™å¥½ä¹‹åŽï¼Œå°±å¯ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•äº†ï¼Œç›´æŽ¥åœ¨ signinTest æˆ–è€… signupTest å³é”®è¿è¡Œå³å¯ï¼Œä¸éœ€è¦å¯åŠ¨æ•´ä¸ªå·¥ç¨‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿è¡Œä¹‹åŽï¼Œå¯ä»¥åœ¨è¾“å‡ºçš„æŽ§åˆ¶å°ä¸­çœ‹åˆ°ä¿¡æ¯ï¼š å‰ç«¯è¯·æ±‚åœ¨ è·¨åŸŸå’ŒOPTIONSè¿™å¯¹æ¬¢å–œå†¤å®¶ å’Œ å‡å°‘è·¨åŸŸä¸­çš„OPTIONSè¯·æ±‚ è¿™ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œå·²ç»è·Ÿå¤§å®¶åˆ†äº«è¿‡å¦‚ä½•åœ¨å‰ç«¯é¡µé¢ä¸­è¿›è¡ŒæŽ¥å£è®¿é—®äº†ï¼Œå…¶ä¸­ä¹Ÿé‡ç‚¹è®²è§£äº†å¦‚ä½•åœ¨ SpringBoot ä¸­è§£å†³è·¨åŸŸé—®é¢˜ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥åŽ»çœ‹çœ‹è¿™ä¸¤ç¯‡æ–‡ç« ã€‚ æ–‡ä¸­çš„å®Œæ•´ç¤ºä¾‹ä»£ç éƒ½åœ¨ Github ä¸Šé¢ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œcloneï¼Œæ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ ä¸´æ¸Šç¾¡é±¼ä¸å¦‚æŒ‰é€€è€Œç»“ç½‘~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot å¾®æœåŠ¡ é¡¹ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‡å°‘è·¨åŸŸä¸­çš„OPTIONSè¯·æ±‚]]></title>
    <url>%2F2019%2F09%2F08%2F%E5%87%8F%E5%B0%91%E8%B7%A8%E5%9F%9F%E4%B8%AD%E7%9A%84OPTIONS%E8%AF%B7%E6%B1%82%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹è¿™ç¯‡æ˜¯ç»§ è·¨åŸŸå’ŒOPTIONSè¿™å¯¹æ¬¢å–œå†¤å®¶ åŽçš„ä¸€ç¯‡æ–‡ç« ï¼Œåœ¨æœ¬ç¯‡ä¸­æˆ‘ä»¬ç»§ç»­æŽ¢ç´¢è·¨åŸŸä¸­çš„OPTIONSè¯·æ±‚ï¼Œä¸»è¦åˆ†äº«ä¸€ä¸‹ï¼š SpringBootä¸­é™¤äº† CrossOrigin æ³¨è§£å¤–è¿˜æœ‰å“ªäº›æ–¹å¼å¯ä»¥è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ å¦‚ä½•ä½¿ç”¨SpringBootç»“åˆCORSå‡å°‘OPTIONSè¯·æ±‚ï¼Ÿ é˜…è¯»ä¸‹é¢å†…å®¹ä¹‹å‰ï¼Œå¼ºçƒˆå»ºè®®å…ˆé˜…è¯»ä¹‹å‰çš„ è·¨åŸŸå’ŒOPTIONSè¿™å¯¹æ¬¢å–œå†¤å®¶ è¿™ç¯‡æ–‡ç« ã€‚ æ–‡ä¸­ä½¿ç”¨çš„ä»£ç éƒ½å¯ä»¥åœ¨ Github æ‰¾åˆ°ï¼Œå¤§å®¶æ ¹æ®éœ€è¦è‡ªè¡Œé‡‡çº³ã€‚ ç”¨ä¸Š Nginxè¿™æ¬¡ä½¿ç”¨Nginxä½œä¸ºWEBå®¹å™¨ï¼Œåœ¨æœ¬åœ°å°†HTMLè·‘èµ·æ¥ï¼Œä¸Šæ¬¡æ˜¯åœ¨Chromeä¸­ç›´æŽ¥æ‰“å¼€HTMLæ–‡ä»¶çš„æ–¹å¼æ¥éªŒè¯è·¨åŸŸé—®é¢˜çš„ã€‚æˆ‘ä»¬çŸ¥é“åªè¦ç«¯å£ä¸åŒä¹Ÿä¼šé€ æˆè·¨åŸŸé—®é¢˜ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨Nginxä¸­é…ç½®ä¸€ä¸ªç«¯å£ä¸åŒäºŽæœåŠ¡ç«¯å£çš„è™šæ‹Ÿä¸»æœºå°±å¯ä»¥è¾¾åˆ°ç›®çš„äº†ã€‚ ç”±äºŽæˆ‘æ˜¯åœ¨Win10ä¸Šé¢åšçš„ä¾‹å­ï¼ŒåŒ…æ‹¬Nginxä¹Ÿæ˜¯Windowsç‰ˆæœ¬çš„ï¼Œå¦‚æžœæ²¡æœ‰å®‰è£…çš„å°ä¼™ä¼´è¯·åŽ» ä¸‹è½½Nginx ç›´æŽ¥è§£åŽ‹å³å¯ã€‚ æˆ‘æŠŠNginxè§£åŽ‹æ”¾åˆ°ï¼šD:\portable\nginx-1.15.12 è¿™ä¸ªç›®å½•ï¼Œä½ å¯ä»¥è§£åŽ‹åˆ°ä½ è®¤ä¸ºæ¯”è¾ƒåˆé€‚çš„åœ°æ–¹ã€‚ æ‰“å¼€Nginxçš„é…ç½®æ–‡ä»¶ nginx.conf å³åœ¨ å®‰è£…ç›®å½•\conf ä¸‹é¢ï¼Œå¢žåŠ ä¸€ä¸ªè™šæ‹Ÿä¸»æœºé…ç½®é¡¹ï¼Œä¿®æ”¹å®ŒæˆåŽä¿å­˜é…ç½®æ–‡ä»¶å³å¯ã€‚ 1234567891011# è‡ªå®šä¹‰è™šæ‹Ÿä¸»æœºï¼Œå¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªè™šæ‹Ÿä¸»æœºserver &#123; listen 8082; # ä¸åŒäºŽæœåŠ¡ç«¯å£ server_name localhost; location / &#123; # æ–‡ä»¶è·¯å¾„ï¼Œæ³¨æ„è·¯å¾„åˆ†éš”ç¬¦æ˜¯ `/` ä¸æ˜¯ `\` root E:/examples/cors-options; # é»˜è®¤é¡µé¢ index index.html index.htm; &#125;&#125; æ³¨æ„ï¼šE:/examples/cors-options; æ˜¯æˆ‘çš„HTMLæ–‡ä»¶(options.html)è·¯å¾„ï¼Œä½ è¦æ ¹æ®è‡ªå·±å®žé™…HTMLè·¯å¾„æ¥é…ç½®è¿™ä¸ªé€‰é¡¹ï¼Œå¦åˆ™åŽé¢æ— æ³•æ‰“å¼€è¯¥æ–‡ä»¶ã€‚ è¿™é‡Œæˆ‘æŠŠè¿™ä¸ªæ–‡ä»¶å‘½åä¸º options.htmlï¼ŒHTMLæ–‡ä»¶å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;options-demo&lt;/title&gt; &lt;script type="text/javascript" src="./jquery-3.4.1.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript" src="./jquery.json.js"&gt;&lt;/script&gt; &lt;script&gt; function getReq() &#123; var url = "http://localhost:8080/signin/name?username=jack&amp;userpwd=123"; $.ajax(&#123; url: url, type: 'GET', dataType: 'json', contentType: 'application/json', headers: &#123; token: "yu7rX98xxxx_iii^ddd", userId: 123, openid: 231232 &#125; &#125;).done(function (result) &#123; console.log("success"); console.log(result); &#125;).fail(function () &#123; console.log("error"); &#125;) &#125; &lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;button onclick="getReq()"&gt;ç”¨æˆ·åç™»å½•-GET&lt;/button&gt;&lt;/html&gt; çŽ°åœ¨å¯åŠ¨Nginxï¼Œå¯åŠ¨Nginxå¾ˆç®€å•ï¼Œæ‰“å¼€Windowsç»ˆç«¯æˆ–è€…Gitçš„ç»ˆç«¯(å¦‚æžœä½ å®‰è£…äº†Gitçš„è¯ï¼Œå³ä½¿æ²¡æœ‰å®‰è£…æˆ‘ä¹Ÿå¼ºçƒˆå»ºè®®ä½ å®‰è£…ï¼Œå› ä¸ºå¤ªå¥½ç”¨äº†)ï¼Œç„¶åŽcdåˆ°Nginxçš„å®‰è£…ç›®å½•ã€‚ 1start nginx.exe æ‰“å¼€Chromeæµè§ˆå™¨ï¼Œè¾“å…¥ä¸‹é¢çš„ç½‘å€è¿›è¡Œè®¿é—®ï¼š 1http://localhost:8082/options.html ä¸å‡ºæ„å¤–çš„è¯ï¼Œå¯ä»¥çœ‹åˆ°æ˜¾ç¤ºä¸€ä¸ªæŒ‰é’®çš„è§†å›¾ï¼Œé¡ºä¾¿æŠŠChromeçš„å®¡æŸ¥è§†å›¾(Ctrl+Shift+i)æ‰“å¼€ï¼Œå¤§æ¦‚æ˜¯ä¸‹é¢æˆªå›¾çš„æ ·å­ã€‚ æŒ‡å®šåŸŸååˆ—è¡¨Nginxé…ç½®å®Œæˆï¼Œæ–‡ä»¶ä¹Ÿå¯ä»¥æ­£å¸¸çš„æ‰“å¼€ï¼Œé‚£æˆ‘ä»¬å°±æ¥è¯•è¯•æ˜¯å¦è·Ÿé¢„æƒ³çš„ä¸€è‡´ï¼Ÿ SpringBootå…³é”®ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678@RestController@RequestMapping(value = "signin") // æ³¨æ„è¿™é‡Œä¸è¦åœ¨signinå‰åŽåŠ "/"public class MSSigninController &#123; @RequestMapping(value = "/name", method = RequestMethod.GET) public MSResponse sigin(@RequestParam(value = "username") String userName, @RequestParam(value = "userpwd") String userPwd) &#123; // çœç•¥ &#125;&#125; å¯åŠ¨SpringBootæœåŠ¡ï¼ˆé»˜è®¤è¿è¡Œåœ¨8080ç«¯å£ä¸åŒäºŽç½‘é¡µè¿è¡Œç«¯å£8082ï¼‰å®ŒæˆåŽï¼Œç‚¹å‡»Chromeè§†å›¾ä¸­çš„æŒ‰é’®è¿›è¡Œè¯·æ±‚ï¼Œæˆªå›¾å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°è·Ÿæˆ‘ä»¬é¢„æœŸä¸€è‡´ï¼Œçš„ç¡®é€ æˆäº†è·¨åŸŸè¯·æ±‚ï¼Œå¹¶ä¸”è¿›è¡Œäº†OPTIONSè¯·æ±‚ã€‚ åœ¨SpringBootçš„æŸä¸ªæ–¹æ³•ä¸Šé¢æ·»åŠ  CrossOrigin æ³¨è§£å¯ä»¥è§£å†³è·¨åŸŸé—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šåŸŸååˆ—è¡¨ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678public class MSSigninController &#123; // æŒ‡å®šåŸŸååˆ—è¡¨ @CrossOrigin(origins = &#123;"http://localhost:8082"&#125;) @RequestMapping(value = "/name", method = RequestMethod.GET) public MSResponse sigin(@RequestParam(value = "username") String userName, @RequestParam(value = "userpwd") String userPwd) &#123; // çœç•¥ &#125;&#125; é‡å¯æœåŠ¡åŽï¼Œå†åŽ»éªŒè¯ä¸€ä¸‹å‘çŽ°è¯·æ±‚å°±å¯ä»¥é€šè¿‡äº†ã€‚ å¦‚æžœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥ä¿®æ”¹ä¸€ä¸‹ CrossOrigin æ³¨è§£ä¸­çš„åŸŸååˆ—è¡¨ç«¯å£å·ï¼Œå†åŽ»è¯·æ±‚å°±ä¼šå¤±è´¥ã€‚ ä½¿ç”¨ CrossOrigin æ³¨è§£æŒ‡å®šåŸŸååˆ—è¡¨ï¼Œå¯ä»¥ä»Žæ›´å°çš„ç²’åº¦ä¸Šé¢æŽ§åˆ¶è·¨åŸŸè¯·æ±‚ã€‚ é‚£ä¹ˆé™¤äº†ä½¿ç”¨ CrossOrigin æ³¨è§£æ„å¤–ï¼Œåœ¨SpringBootä¸­è¿˜å¯ä»¥æ€Žæ ·è§£å†³è·¨åŸŸé—®é¢˜å‘¢ï¼Ÿ è§£å†³è·¨åŸŸçš„å…¶ä»–è®¡ç­–ç›®å‰é™¤äº†ä½¿ç”¨ CrossOrigin æ³¨è§£ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢å‡ ç§æ–¹æ³•æ¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚ 1ã€è‡ªå®šä¹‰Filterè‡ªå®šä¹‰Filterå¯ä»¥è§£å†³è·¨åŸŸé—®é¢˜ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344import org.springframework.stereotype.Component;import javax.servlet.*;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.util.Arrays;import java.util.HashSet;import java.util.Set;@Componentpublic class MSCorsFilter implements Filter &#123; public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException &#123; HttpServletRequest request = (HttpServletRequest) req; if ("OPTIONS".equals(request.getMethod())) &#123; System.out.println("HTTP's OPTIONS Coming"); &#125; HttpServletResponse response = (HttpServletResponse) res; // è®¾ç½®æ‰€æœ‰çš„è¯·æ±‚åŸŸåéƒ½å¯ä»¥ response.setHeader("Access-Control-Allow-Origin", "*"); // è®¾ç½®å…è®¸çš„è¯·æ±‚æ–¹æ³• response.setHeader("Access-Control-Allow-Methods", "POST, GET, OPTIONS, DELETE"); // è®¾ç½®ç¼“å­˜æ—¶é—´å•ä½ä¸ºç§’ï¼Œåœ¨æ”¹æ—¶é—´å†…ä¸éœ€è¦å†å‘é€é¢„æ£€éªŒè¯·æ±‚ï¼Œå³ç¼“å­˜è¯¥ç»“æžœ // è®¾ç½®ä¸º0å°±ç›¸å½“äºŽä¸è®¾ç½®ç¼“å­˜ï¼Œå³æ¯æ¬¡éƒ½ä¼šæœ‰OPTIONSè¯·æ±‚ response.setHeader("Access-Control-Max-Age", "0"); // è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚åŒ…å«content-typeå¤´ response.setHeader("Access-Control-Allow-Headers", "*"); System.out.println("Filter has been used."); chain.doFilter(req, res); &#125; public void init(FilterConfig filterConfig) &#123; &#125; public void destroy() &#123; &#125;&#125; è¿™é‡Œæˆ‘ä»¬æ˜¯é€šè¿‡è®¾ç½® Access-Control-Allow-Origin å…è®¸æ‰€æœ‰çš„åŸŸå(é€šé…ç¬¦*)éƒ½å¯ä»¥è®¿é—®ï¼Œå¦‚ä¸‹ï¼š 1response.setHeader("Access-Control-Allow-Origin", "*"); ä¹Ÿå¯ä»¥è®¾ç½®æŒ‡å®šåŸŸåæ‰å¯ä»¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1response.setHeader("Access-Control-Allow-Origin", "http://localhost:8082"); é‚£æˆ‘ä»¬éœ€è¦æ€è€ƒä¸€ä¸‹äº†ï¼ŒsetHeader æ–¹æ³•åªèƒ½è®¾ç½®ä¸€ä¸ªæŒ‡å®šçš„åŸŸåï¼Œå¦‚æžœæˆ‘æƒ³è®¾ç½®å¤šä¸ªåŸŸåæ€Žä¹ˆåŠžï¼Ÿ é¦–å…ˆå‘Šè¯‰ä½ é€šè¿‡ä¸‹é¢çš„æ–¹å¼è‚¯å®šä¸è¡Œï¼Œå¦‚ä¸‹ï¼š 12response.addHeader("Access-Control-Allow-Origin", "http://localhost:8082");response.addHeader("Access-Control-Allow-Origin", "http://localhost:8083"); å…·ä½“åŽŸå› å¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹æºç å°±ç§’æ‡‚äº†ã€‚ æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ŒæŠŠå¯ä»¥é€šè¿‡è·¨åŸŸè®¿é—®çš„åŸŸååšæˆæ•°ç»„ä¹Ÿæ˜¯å¤§å®¶åœ¨ä¸šåŠ¡ä¸Šé¢ç»å¸¸è¯´çš„ç™½åå•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678// è®¾ç½®å¤šä¸ªåŸŸåæ”¯æŒï¼Œç±»ä¼¼ç™½åå•String[] allowDomain = &#123;"http://localhost:8082", "http://localhost:8083", "http://localhost:8085", "http://localhost:8087"&#125;;Set allowedOrigins = new HashSet(Arrays.asList(allowDomain));String originHeader = ((HttpServletRequest) req).getHeader("Origin");System.out.println("originHeader: " + originHeader);if (allowedOrigins.contains(originHeader)) &#123; response.setHeader("Access-Control-Allow-Origin", originHeader);&#125; å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œä¸Šé¢é‚£ç§æ–¹å¼è‡ªå®šä¹‰Filterä¼šå¯¹æ‰€æœ‰URLå³å…¨å±€çš„è¯·æ±‚éƒ½èµ·ä½œç”¨äº†ï¼Œèƒ½å¦å¯¹æŒ‡å®šURLè¿›è¡Œè¿‡æ»¤å‘¢ï¼Ÿ åšè¿‡Springçš„åŒå­¦è‚¯å®šçŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® WebFilterï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1@WebFilter(urlPatterns = &#123; "/signin/name" &#125;) è¿™æ ·ä¿®æ”¹åŽï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹SpringBootç›¸å…³çš„ä»£ç ï¼Œé¦–å…ˆåŽ»æŽ‰ Component æ³¨è§£ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234//@Component@WebFilter(urlPatterns = &#123; "/signin/name" &#125;)public class MSCorsFilter implements Filter &#123;&#125; ç„¶åŽéœ€è¦åœ¨Applicationä¸­æ·»åŠ  ServletComponentScan æ³¨è§£ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234@ServletComponentScan@SpringBootApplicationpublic class SpringbootApplication &#123;&#125; ç»“åˆFilteræˆ‘ä»¬å¯ä»¥åšå‡ºæ›´ç»†ç²’åº¦æ›´å¤šåŠŸèƒ½æ¥è§£å†³å’ŒæŽ§åˆ¶è·¨åŸŸé—®é¢˜ã€‚Filterè¿™ç§æ–¹å¼å¯¹è·¨åŸŸçš„GETå’ŒPOSTè¯·æ±‚éƒ½æ˜¯æ”¯æŒçš„ã€‚ 2ã€WebMvcConfigurationSupportåœ¨SpringBootä¸­è¿˜å¯ä»¥è‡ªå®šä¹‰é…ç½®æ¥è§£å†³è·¨åŸŸé—®é¢˜ï¼Œé€šè¿‡ç»§æ‰¿ WebMvcConfigurationSupport é…ç½®CROSï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213@Configurationpublic class MSCorsConfig extends WebMvcConfigurationSupport &#123; @Override protected void addCorsMappings(CorsRegistry registry) &#123; super.addCorsMappings(registry); registry.addMapping("/**") .allowedOrigins("*") .allowCredentials(true) .allowedMethods("GET", "POST", "DELETE", "PUT") .maxAge(3600); &#125;&#125; è¿˜å¯ä»¥æŒ‡å®šURLå’ŒåŸŸåï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š 12345678910111213@Configurationpublic class MSCorsConfig extends WebMvcConfigurationSupport &#123; @Override protected void addCorsMappings(CorsRegistry registry) &#123; super.addCorsMappings(registry); registry.addMapping("/signin/name") .allowedOrigins("http://localhost:8082", "http://localhost:8083") .allowCredentials(true) .allowedMethods("GET", "POST", "DELETE", "PUT") .maxAge(3600); &#125;&#125; è¿™æ ·é…ç½®åŽï¼Œåªå…è®¸è¯·æ±‚åŸŸåæ˜¯ http://localhost:8082 å’Œ http://localhost:8082 å¹¶ä¸”è¯·æ±‚æœåŠ¡ç«¯URLæ˜¯ /signin/name çš„è¯·æ±‚æ‰å¯ä»¥ä½¿ç”¨CORSæœºåˆ¶ã€‚ 3ã€CorsFilterè¿™ç§æ–¹æ³•æ—©åœ¨SpringBoot1.xç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.cors.CorsConfiguration;import org.springframework.web.cors.UrlBasedCorsConfigurationSource;import org.springframework.web.filter.CorsFilter;@Configurationpublic class MSCorsFilterConfig &#123; private CorsConfiguration getConfig() &#123; CorsConfiguration corsConfiguration = new CorsConfiguration(); // å…è®¸ä»»ä½•åŸŸåä½¿ç”¨ corsConfiguration.addAllowedOrigin("*"); // å…è®¸ä»»ä½•å¤´ corsConfiguration.addAllowedHeader("*"); // å…è®¸ä»»ä½•HTTPæ–¹æ³• corsConfiguration.addAllowedMethod("*"); corsConfiguration.setAllowCredentials(true); corsConfiguration.setMaxAge(60L); return corsConfiguration; &#125; @Bean public CorsFilter corsFilter() &#123; UrlBasedCorsConfigurationSource source; source = new UrlBasedCorsConfigurationSource(); source.registerCorsConfiguration("/**", getConfig()); return new CorsFilter(source); &#125;&#125; è¿™ç§æ–¹å¼è·Ÿä¸Šé¢çš„è§£å†³æ–¹æ³•åŸºæœ¬éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œå¤§å®¶æ ¹æ®å®žé™…æƒ…å†µé€‰æ‹©ä½¿ç”¨ï¼Œå¯¹æä¾›çš„æ–¹æ³•ä¸¾ä¸€åä¸‰å³å¯ã€‚ å‡å°‘OPTIONSè¯·æ±‚è™½ç„¶æˆ‘ä»¬æ”¯æŒç½‘é¡µå¯¹æœåŠ¡ç«¯è¿›è¡ŒOPTIONSè¯·æ±‚ï¼Œä½†æ˜¯è¯·æ±‚å¦‚æžœå¤šäº†åŠ¿å¿…ä¼šå½±å“æœåŠ¡å™¨æ€§èƒ½ã€‚ å¦‚æžœåœ¨æ²¡æœ‰å¿…è¦çš„æƒ…å†µä¸‹å°½é‡å‡å°‘ç”±äºŽè·¨åŸŸè¯·æ±‚å¸¦æ¥çš„OPTIONSè¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ç¼“å­˜æ—¶é—´æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æ¯”å¦‚ä½¿ç”¨è‡ªå®šä¹‰Filterçš„æ–¹å¼è®¾ç½®600ç§’çš„ç¼“å­˜æ—¶é—´ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1response.setHeader("Access-Control-Max-Age", "600"); åœ¨å¤§å®¶è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œè®°å¾—ä¸è¦å‹¾é€‰Chromeå®¡æŸ¥è§†å›¾ä¸­Networké€‰é¡¹ä¸­ Disable cache è¿™ä¸€é¡¹ï¼Œå¦åˆ™æ¯æ¬¡éƒ½ä¼šè¿›è¡ŒOPTIONSè¯·æ±‚ï¼Œç»™ä½ é€ æˆè®¾ç½®æœåŠ¡ç«¯ç¼“å­˜æ—¶é—´æ²¡æœ‰æ•ˆæžœçš„å‡è±¡ã€‚ å¸¸ç”¨Nginxå‘½ä»¤ä¸‹é¢ç»™å‡ºWindowsç‰ˆæœ¬çš„Nginxå¸¸ç”¨å‘½ä»¤ã€‚ 1ã€å¯åŠ¨Nginx 1start nginx.exe 2ã€éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡® 1nginx.exe -t 3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶åŽï¼Œé‡æ–°åŠ è½½ 1nginx.exe -s reload 4ã€å¿«é€Ÿå…³é—­ 1nginx.exe -s stop 5ã€æ­£å¸¸å…³é—­é€€å‡º 1nginx.exe -quit 6ã€æŸ¥çœ‹Nginxç‰ˆæœ¬ 1nginx.exe -V åšæŒåšå¥½ä¸€ä»¶äº‹ï¼Œéœ€è¦ä»˜å‡ºæ¯”å¸¸äººæ›´å¤šçš„åŠªåŠ›~]]></content>
      <categories>
        <category>ç½‘ç»œåè®®</category>
      </categories>
      <tags>
        <tag>HTTP OPTIONS CORS SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·¨åŸŸå’ŒOPTIONSè¿™å¯¹æ¬¢å–œå†¤å®¶]]></title>
    <url>%2F2019%2F08%2F31%2F%E8%B7%A8%E5%9F%9F%E5%92%8COPTIONS%E8%BF%99%E5%AF%B9%E6%AC%A2%E5%96%9C%E5%86%A4%E5%AE%B6%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹æˆ‘ç›¸ä¿¡åšè¿‡å‰ç«¯å¼€å‘çš„åŒäº‹ï¼ŒåŒ…æ‹¬åšå°ç¨‹åºæˆ–è€…å°æ¸¸æˆçš„ç å‹ä»¬åº”è¯¥éƒ½çœ‹è¿‡ç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯ç”±äºŽJavaScriptä»£ç å‘æœåŠ¡å™¨å‘é€äº†HTTPè¯·æ±‚å¼•èµ·çš„ã€‚ 123Access to XMLHttpRequest at 'http://www.xxx.com/yyy' from origin 'null' has been blocked by CORS policy:Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. å¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œä½ è‚¯å®šä¼šè§‰å¾—å¾ˆå¥½å¥‡ï¼Œå¿ä¸ä½ä¼šåŽ»ä¸€æŽ¢ç©¶ç«Ÿ~ è¿˜æœ‰äº›åŒäº‹ä¼šé‡åˆ°å¦ä¸€ä¸ªç¥žå¥‡çš„é”™è¯¯ï¼Œå³å‘é€GETæˆ–è€…POSTè¯·æ±‚ä¹‹å‰ï¼Œå±…ç„¶å…ˆç»™æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ª OPTIONS è¯·æ±‚ï¼Œè®©äººä¸å¯æ€è®®çš„æ˜¯è¿™ä¸ª OPTIONS è¯·æ±‚æ˜¯è‡ªåŠ¨å‘çš„ï¼ŒæœåŠ¡å™¨åœ¨æ²¡æœ‰ä»»ä½•è®¾ç½®çš„æ¡ä»¶ä¸‹ç›´æŽ¥å°†è¿™ä¸ªè¯·æ±‚å¤­æŠ˜æŽ‰ï¼Œå¦‚ä¸‹è¿”å›ž 403 é”™è¯¯ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶ä»–é”™è¯¯ã€‚ 1OPTIONS http://www.xxx.com/yyy 403 å¼•èµ·è¿™äº›é—®é¢˜çš„ç½ªé­ç¥¸é¦–å°±æ˜¯ è·¨åŸŸ ï¼Œä»Šå¤©æˆ‘è·Ÿå¤§å®¶ä¸€èµ·ä»¥å®žé™…çš„ä¾‹å­æ¥çœ‹çœ‹è¿™ä¸ªç¥žå¥‡çš„ è·¨åŸŸ é—®é¢˜ã€‚ æ–‡ä¸­ä½¿ç”¨çš„ä»£ç éƒ½å¯ä»¥åœ¨ Github æ‰¾åˆ°ï¼Œå¤§å®¶æ ¹æ®éœ€è¦è‡ªè¡Œé‡‡çº³ã€‚ åŒæºç­–ç•¥åœ¨è¯´ è·¨åŸŸ ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦äº†è§£ä¸€ä¸‹ åŒæºç­–ç•¥ æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼ åœ¨ç™¾åº¦ç™¾ç§‘é‡Œé¢æ˜¯è¿™æ ·å®šä¹‰ åŒæºç­–ç•¥ çš„ï¼Œå¦‚ä¸‹ï¼š 123åŒæºç­–ç•¥ï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æžœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œåˆ™æµè§ˆå™¨çš„æ­£å¸¸åŠŸèƒ½å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚å¯ä»¥è¯´Webæ˜¯æž„å»ºåœ¨åŒæºç­–ç•¥åŸºç¡€ä¹‹ä¸Šçš„ï¼Œæµè§ˆå™¨åªæ˜¯é’ˆå¯¹åŒæºç­–ç•¥çš„ä¸€ç§å®žçŽ°ã€‚ å¬èµ·æ¥ï¼Œè¿™çŽ©æ„æŒºé«˜å¤§ä¸Šçš„ï¼Œç®€å•ç†è§£ åŒæºç­–ç•¥ å°±æ˜¯ä¸€ç§å®‰å…¨ç­–ç•¥ã€‚å®ƒæ˜¯ç”± Netscape æå‡ºçš„ä¸€ä¸ªè‘—åçš„å®‰å…¨ç­–ç•¥ï¼ŒçŽ°åœ¨æ‰€æœ‰æ”¯æŒJavaScriptçš„æµè§ˆå™¨éƒ½ä¼šä½¿ç”¨è¿™ä¸ªç­–ç•¥ï¼Œä¹Ÿæ˜¯å¿…é¡»éµå®ˆçš„ä¸€ä¸ªç­–ç•¥ã€‚ é‚£ä¹ˆ åŒæºç­–ç•¥ ä¸­çš„ åŒæº æ˜¯æŒ‡ åŸŸåï¼Œåè®®ï¼Œç«¯å£ ä¸‰è€…å¿…é¡»ç›¸åŒï¼Œå¦‚æžœæœ‰ä»»ä½•ä¸€ä¸ªä¸åŒå°±ä¼šå¼•èµ·è·¨åŸŸã€‚ ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹ http://a.xx.com/yy/zz.html åŒæºæ£€æµ‹çš„ç¤ºä¾‹: URL ç»“æžœ åŽŸå›  http://a.xxx.com/ff/other.html æˆåŠŸ åŸŸåã€åè®®ã€ç«¯å£(é»˜è®¤80)ä¸€è‡´ http://a.xxx.com/gg/hh/another.html æˆåŠŸ åŸŸåã€åè®®ã€ç«¯å£(é»˜è®¤80)ä¸€è‡´ https://a.xxx.com/secure.html å¤±è´¥ ä¸åŒåè®® ( HTTPSå’ŒHTTP ) http://a.xxx.com:81/dir/etc.html å¤±è´¥ ä¸åŒç«¯å£ ( 81å’Œ80) http://a.wpq.com/yy/other.html å¤±è´¥ ä¸åŒåŸŸå ( xxxå’Œwpq) http://123.21.122.12/dir å¤±è´¥ åŸŸåIPä¸ç­‰åŒäºŽåŸŸå http://xx.xxx.com/dir2/ å¤±è´¥ ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒ ç®€å•æ¥è¯´ï¼ŒHTMLä»£ç è¿è¡Œåœ¨ä¸€ä¸ªwebä¸»æœºä¸Šé¢ï¼ˆå‡è®¾åŸŸåæ˜¯ http://a.xx.com/yy/zz.htmlï¼‰ï¼Œè€ŒHTMLä»£ç ä¸­æœ‰éœ€è¦è¯·æ±‚æœåŠ¡å™¨æŸä¸ªAPIæŽ¥å£ï¼ˆhttp://api.user.com/nameï¼‰çš„ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆè·¨åŸŸé—®é¢˜ã€‚ åŒæºç­–ç•¥ä¼šå½±å“ï¼š ï¼ˆ1ï¼‰ Cookieã€LocalStorage å’Œ IndexDB æ— æ³•è¯»å–ã€‚ ï¼ˆ2ï¼‰ DOM æ— æ³•èŽ·å¾—ã€‚ ï¼ˆ3ï¼‰ AJAX è¯·æ±‚ä¸èƒ½æ­£å¸¸å‘é€ï¼Œæœ‰å¯èƒ½è¿˜ä¼šå¼•èµ· OPTIONS è¯·æ±‚ã€‚ OPTIONSè¯·æ±‚å¤§å®¶æ‰€ç†ŸçŸ¥çš„HTTPè¯·æ±‚æœ€å¤šçš„åº”è¯¥å°±æ˜¯GETå’ŒPOSTè¯·æ±‚ï¼Œè¿™ä¸¤ç§è¯·æ±‚ä¹Ÿæ˜¯è½¯ä»¶å¼€å‘ä¸­ç”¨çš„æœ€å¤šçš„ã€‚ GETï¼šå‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ï¼Œä¸€èˆ¬å¯¹æœåŠ¡å™¨æ¥è¯´æ˜¯ä¸€ä¸ªåªè¯»çš„è¯·æ±‚ï¼Œä¸ä¼šå¯¹èµ„æºè¿›è¡Œå†™æ“ä½œã€‚ POSTï¼šå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼Œä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼Œæ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ï¼ˆbodyï¼‰ä¸­ï¼Œè¯¥è¯·æ±‚å¯èƒ½ä¼šå¯¹æœåŠ¡å™¨èµ„æºè¿›è¡Œè¯»å†™æ“ä½œã€‚ é™¤äº†è¿™ä¸¤ç§è¯·æ±‚å¤–ï¼ŒHTTPè¿˜æœ‰å…¶ä»–ç§ç±»çš„è¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š PUTï¼šå‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ï¼Œä¸€èˆ¬ç”¨äºŽèµ„æºçš„æ•´ä½“æ›´æ–°ï¼Œè€Œä¸‹é¢çš„PATCHç”¨äºŽèµ„æºçš„éƒ¨åˆ†æ›´æ–°ã€‚ DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤æ‰€æ ‡è¯†çš„èµ„æºã€‚ HEADï¼šå‘æœåŠ¡å™¨ç´¢è¦ä¸ŽGETè¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›žï¼Œå¯ä»¥åœ¨ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥èŽ·å–åŒ…å«åœ¨å“åº”æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯ã€‚ TRACEï¼šå›žæ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºŽæµ‹è¯•æˆ–è¯Šæ–­ã€‚ OPTIONSï¼šè¿”å›žæœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥åˆ©ç”¨å‘WebæœåŠ¡å™¨å‘é€â€™*â€™çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§ã€‚è¯¥è¯·æ±‚ä¸ä¼šä¿®æ”¹æœåŠ¡å™¨èµ„æºï¼Œç›¸å¯¹æ¯”è¾ƒå®‰å…¨ã€‚ CONNECTï¼šæ˜¯ HTTP/1.1 åè®®é¢„ç•™çš„ï¼Œèƒ½å¤Ÿå°†è¿žæŽ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨äºŽ SSL åŠ å¯†æœåŠ¡å™¨çš„é“¾æŽ¥ä¸ŽéžåŠ å¯†çš„HTTPä»£ç†æœåŠ¡å™¨çš„é€šä¿¡ã€‚ PATCHï¼šæ˜¯å¯¹ PUT æ–¹æ³•çš„è¡¥å……ï¼Œç”¨æ¥å¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚å½“èµ„æºä¸å­˜åœ¨æ—¶ï¼ŒPATCH ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºï¼Œè€Œ PUT åªä¼šå¯¹å·²å­˜åœ¨çš„èµ„æºè¿›è¡Œæ›´æ–°ã€‚ å…¶ä¸­ GET, POST å’Œ HEAD æ–¹æ³•æ˜¯ HTTP1.0 å®šä¹‰çš„ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼Œåœ¨ HTTP1.1 åˆæ–°å¢žäº†å…­ç§è¯·æ±‚æ–¹æ³•ï¼Œå³ OPTIONSã€PUTã€PATCHã€DELETEã€TRACE å’Œ CONNECT æ–¹æ³•ã€‚å¦‚æžœæƒ³äº†è§£æ›´å¤š HTTP åŽ†å²çš„æœ‹å‹ï¼Œå¯ä»¥é˜…è¯»æˆ‘ä¹‹å‰çš„å†™çš„ä¸€ç¯‡æ–‡ç«  HTTP æ¼”è¿›å²ï¼Œå˜¿å“ˆã€‚ å†è¯´ä¸€ä¸‹ OPTIONS è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¸Ž HEAD è¯·æ±‚æœ‰ç‚¹ç±»ä¼¼ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯ç”¨äºŽå®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚ OPTIONS æ–¹æ³•ä¼šè¯·æ±‚æœåŠ¡å™¨è¿”å›žè¯¥èµ„æºæ‰€æ”¯æŒçš„æ‰€æœ‰HTTPè¯·æ±‚æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šç”¨æ¥ä»£æ›¿èµ„æºåç§°ï¼Œå‘æœåŠ¡å™¨å‘é€ OPTIONS è¯·æ±‚ï¼Œå¯ä»¥æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚JavaScriptçš„XMLHttpRequestå¯¹è±¡è¿›è¡ŒCORSè·¨åŸŸèµ„æºå…±äº«æ—¶ï¼Œå°±æ˜¯ä½¿ç”¨ OPTIONS æ–¹æ³•å‘é€å—…æŽ¢è¯·æ±‚ï¼Œä»¥åˆ¤æ–­æ˜¯å¦æœ‰å¯¹æŒ‡å®šèµ„æºçš„è®¿é—®æƒé™ã€‚ é‚£ä¹ˆéœ€è¦æ»¡è¶³å“ªäº›æ¡ä»¶æ‰ä¼šè§¦å‘ OPTINS è¯·æ±‚å‘¢ï¼Ÿ å®žä¾‹éªŒè¯åœ¨æ²¡æœ‰å›žç­”ä¸Šé¢çš„é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥åšä¸ªå®žéªŒå§~ ä½ éœ€è¦å°† Chrome çš„å®¡æŸ¥è§†å›¾æ‰“å¼€ï¼Œæœ€å¥½æŠŠ Disable Cache ä¹Ÿå‹¾é€‰ä¸Šç¦æ­¢ Chrome ä½¿ç”¨ç½‘ç»œç¼“å­˜ï¼Œè¿™æ ·æ‰ä¸ä¼šå½±å“ä¸‹é¢çš„å®žéªŒã€‚ ä¸‹é¢æ˜¯ Springboot å…³äºŽç™»å½•çš„ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526import org.springframework.web.bind.annotation.*;@RestController@RequestMapping(value = "signin")public class MSSigninController &#123; @RequestMapping(value = "/name", method = RequestMethod.GET) public MSResponse sigin(@RequestParam(value = "username") String userName, @RequestParam(value = "userpwd") String userPwd) &#123; MSResponse response = new MSResponse(); MSUser user = null; if (null == userName || null == userPwd || userName.length() &lt;= 0 || userPwd.length() &lt;= 0) &#123; MSResponseEnum responseEnum = MSResponseEnum.Login4SiginInvalidInfo; response.setCode(responseEnum.getCode()); response.setMsg(responseEnum.getMsg()); &#125; else &#123; user = MSUserUtil.createDefaultUser(userName, userPwd); MSResponseEnum rspEnum = MSResponseEnum.SUCCESS; response.setCode(rspEnum.getCode()); response.setMsg(rspEnum.getMsg()); &#125; response.setResults(user); return response; &#125;&#125; ä½ å¤§å¯ä¸å¿…åŽ»äº†è§£è¿™ä¸ªä»£ç çš„å…·ä½“é€»è¾‘ï¼ŒçŽ°åœ¨ä½ åªéœ€è¦çŸ¥é“ä»–æ˜¯ç”¨æ¥ç»™JavaScriptè°ƒç”¨çš„ä¸€ä¸ªç™»å½•APIå³å¯ã€‚ å†æ¥ä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œæ¨¡æ‹Ÿè¯·æ±‚ç™»å½•çš„APIï¼Œè¯·æ±‚HTTPä½¿ç”¨Ajaxï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516&lt;script&gt;function getReq() &#123; var url = "http://localhost:8080/signin/name?username=jack&amp;userpwd=123"; $.ajax(&#123; url: url, type: 'GET', dataType: 'json', &#125;).done(function (result) &#123; console.log("success"); console.log(result); &#125;).fail(function () &#123; console.log("error"); &#125;)&#125;&lt;/script&gt; ä½¿ç”¨Chromeæµè§ˆå™¨ç›´æŽ¥æ‰“å¼€è¿™ä¸ªHTMLæ–‡ä»¶å³å¯ï¼Œç„¶åŽå¯åŠ¨JavaæœåŠ¡ï¼Œåœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»æŒ‰é’®è¿›è¡ŒGETè¯·æ±‚ã€‚ æ­¤æ—¶è¯·æ±‚ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼š 1Access to XMLHttpRequest at 'http://localhost:8080/signin/name?username=jack&amp;userpwd=123' from origin 'null' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. ç¡®å®žæ˜¯é€ æˆäº†è·¨åŸŸè¯·æ±‚ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚ ä½†æ˜¯ä»¤äººé—æ†¾çš„æ˜¯å¹¶æ²¡æœ‰çœ‹åˆ°å‘å‡ºOPTIONSè¯·æ±‚ï¼Œä½¿ç”¨FiddleræŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°åªæœ‰GETè¯·æ±‚ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š éš¾é“æ˜¯è‡ªå·±å†™ä»£ç çš„å§¿åŠ¿ä¸å¯¹å—ï¼Ÿï¼ å…¶å®žï¼Œåœ¨HTMLä¸­ä½¿ç”¨HTTPè¯·æ±‚ï¼Œå‘ç”ŸOPTIONSè¯·æ±‚æ˜¯éœ€è¦å‡ ä¸ªæ¡ä»¶çš„ï¼š 1ã€å¿…é¡»æ˜¯è·¨åŸŸè¯·æ±‚ 2ã€è‡ªå®šä¹‰äº†è¯·æ±‚å¤´ 3ã€è¯·æ±‚å¤´ä¸­çš„ content-type æ˜¯ application/x-www-form-urlencodedï¼Œmultipart/form-dataï¼Œtext/plain ä¹‹å¤–çš„æ ¼å¼ æ»¡è¶³1å’Œ2æˆ–è€…æ»¡è¶³1å’Œ3å°±ä¼šå‘ç”ŸOPTIONSè¯·æ±‚ï¼Œé¦–å…ˆæˆ‘ä»¬ç¡®å®šäº†ä¸Šé¢çš„ç¤ºä¾‹æ˜¯è·¨åŸŸè¯·æ±‚ï¼Œä½†æ˜¯ä¸æ»¡è¶³åŽé¢çš„ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ã€‚ æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹HTMLä»£ç å¢žåŠ ä¸€ä¸ª content-typeï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617&lt;script&gt;function getReq() &#123; var url = "http://localhost:8080/signin/name?username=jack&amp;userpwd=123"; $.ajax(&#123; url: url, type: 'GET', dataType: 'json', contentType: 'application/json', &#125;).done(function (result) &#123; console.log("success"); console.log(result); &#125;).fail(function () &#123; console.log("error"); &#125;)&#125;&lt;/script&gt; æ­¤æ—¶åœ¨æµè§ˆå™¨ä¸­ï¼ˆéœ€è¦ä½¿ç”¨Chromeçš„å®¡æŸ¥è§†å›¾ï¼‰å¯ä»¥çœ‹åˆ°æŠ¥é”™ä¿¡æ¯ï¼š 123OPTIONS http://localhost:8080/signin/name?username=jack&amp;userpwd=123 403Access to XMLHttpRequest at 'http://localhost:8080/signin/name?username=jack&amp;userpwd=123' from origin 'null' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. æŠ“åŒ…å·¥å…·ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°å‘ç”Ÿäº†OPTIONSè¯·æ±‚ï¼Œå¦‚ä¸‹å›¾ï¼š ä¹Ÿå¯ä»¥è‡ªå®šä¹‰Headerå¤´æ¥è¿›è¡ŒéªŒè¯ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021&lt;script&gt;function getReq() &#123; var url = "http://localhost:8080/signin/name?username=jack&amp;userpwd=123"; $.ajax(&#123; url: url, type: 'GET', dataType: 'json', headers: &#123; token: "yu7rX98xxxx_iii^ddd", userId: 123, openid: 231232 &#125; &#125;).done(function (result) &#123; console.log("success"); console.log(result); &#125;).fail(function () &#123; console.log("error"); &#125;)&#125;&lt;/script&gt; éªŒè¯ç»“æžœå’Œä¸Šé¢ä¸€è‡´ï¼Œä¹Ÿä¼šå‘ç”ŸOPTIONSè¯·æ±‚ã€‚ å†èŠOPTIONSåœ¨ RFC2616-HTTP/1.1 ä¸­å…³äºŽOPTIONSæœ‰è¯¦ç»†çš„æè¿°ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ 9.2 OPTIONS å°èŠ‚ã€‚ OPTIONSè¯·æ±‚æ–¹æ³•çš„ä¸»è¦ç”¨é€”æœ‰ä¸¤ä¸ªï¼š 1ã€èŽ·å–æœåŠ¡å™¨æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ã€‚ 2ã€ç”¨æ¥æ£€æŸ¥æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œå¦‚ä¸Šé¢ä¾‹å­ä¸­çš„AJAXè¿›è¡Œè·¨åŸŸè¯·æ±‚æ—¶çš„é¢„æ£€ï¼Œéœ€è¦å‘å¦å¤–ä¸€ä¸ªåŸŸåçš„èµ„æºå‘é€ä¸€ä¸ªHTTP OPTIONSè¯·æ±‚å¤´ï¼Œç”¨ä»¥åˆ¤æ–­å®žé™…å‘é€çš„è¯·æ±‚æ˜¯å¦å®‰å…¨ã€‚ HTTPçš„OPTIONSè¯·æ±‚ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹ä¹Ÿè¢«ç§°ä¹‹ä¸ºé¢„è¯·æ±‚æˆ–è€…é¢„æ£€è¯·æ±‚ï¼Œæ¢å¥è¯è¯´å°±æ˜¯è¯•æŽ¢æ€§çš„è¯·æ±‚ä¸ç®—æ˜¯æ­£å¼è¯·æ±‚ã€‚ ä¸ºäº†é¿å…å¯¹æœåŠ¡å™¨äº§ç”Ÿä¸€äº›å‰¯ä½œç”¨ï¼Œç±»ä¼¼ä¸Šé¢ä¾‹å­ä¸­çš„ç½‘é¡µä¸­çš„è¯·æ±‚å°±ä¼šäº§ç”ŸOPTIONSè¯·æ±‚ï¼Œä¹Ÿç®—æ˜¯ä¸€ç§å¯¹æœåŠ¡å™¨çš„ä¿æŠ¤ã€‚åªæœ‰å½“æœåŠ¡å™¨å…è®¸åŽï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„è¯·æ±‚ï¼Œå¦åˆ™ä¸å‘é€æ­£å¼è¯·æ±‚ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨curlæ¨¡æ‹ŸOPTIONSè¯·æ±‚ï¼Œä¾‹å¦‚ä¸‹é¢è¯·æ±‚è°·æ­Œï¼š 1curl -i -v -X OPTIONS https://www.google.com å¯ä»¥çœ‹åˆ°è¯·æ±‚çš„å“åº”æƒ…å†µï¼š 1234567891011121314151617181920&lt; HTTP/2 405&lt; allow: GET, HEAD&lt; date: Sat, 31 Aug 2019 02:17:03 GMT&lt; content-type: text/html; charset=UTF-8&lt; server: gws&lt; content-length: 1592&lt; x-xss-protection: 0&lt; x-frame-options: SAMEORIGIN&lt; alt-svc: quic=":443"; ma=2592000; v="46,43,39"&lt;&#123; [5 bytes data]100 1592 100 1592 0 0 13606 0 --:--:-- --:-- 13606HTTP/2 405allow: GET, HEADdate: Sat, 31 Aug 2019 02:17:03 GMTcontent-type: text/html; charset=UTF-8server: gwscontent-length: 1592x-xss-protection: 0x-frame-options: SAMEORIGINalt-svc: quic=":443"; ma=2592000; v="46,43,39" SpringBootè§£å†³è·¨åŸŸè§£å†³è·¨è¶Šçš„é—®é¢˜ï¼Œåœ¨ç½‘ä¸Šæœ‰å¾ˆå¤šçš„è·¯å­ï¼Œç›®å‰å¤§æ¦‚æœ‰ä¸‹é¢å‡ ç§è§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸‹ï¼š JSONP ç®€å•å…¼å®¹æ€§å¥½ï¼Œå¯ç”¨äºŽè§£å†³ä¸»æµæµè§ˆå™¨çš„è·¨åŸŸæ•°æ®è®¿é—®çš„é—®é¢˜ã€‚ä½†å®ƒä»…æ”¯æŒGETæ–¹æ³•ä¸æ”¯æŒPOSTç­‰å…¶ä»–è¯·æ±‚æ–¹æ³•ï¼Œè€Œä¸”å¯èƒ½ä¼šé­å—XSSæ”»å‡»ã€‚ cors postMessage websocket Nodeä¸­é—´ä»¶ä»£ç† nginxåå‘ä»£ç† window.name+iframe location.hash+iframe document.domain+iframe ä»Šå¤©æˆ‘ä»¬ä½¿ç”¨SpringBootè‡ªå¸¦çš„æ³¨è§£æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ åœ¨è¯´è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œè¿˜æ˜¯å…ˆäº†è§£ä¸€ä¸‹CORSï¼ˆCross-origin resource sharingï¼‰ï¼Œå…¶å…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€ï¼Œæ˜¯W3Cçš„ä¸€ä¸ªæ ‡å‡†ã€‚ CORSå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨å‘å‡º XMLHttpRequest è¯·æ±‚ï¼Œä»Žè€Œå…‹æœäº†AJAXåªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚ CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚å¹¸è¿çš„æ˜¯ç›®å‰å‡ ä¹Žæ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼Œå”¯ä¸€ç¾Žä¸­ä¸è¶³çš„æ˜¯IEæµè§ˆå™¨çš„ç‰ˆæœ¬ä¸èƒ½ä½ŽäºŽIE10ã€‚ å®žçŽ°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®žçŽ°äº†CORSæŽ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚SpringBootè‡ªå¸¦æ³¨è§£ CrossOrigin å¯ä»¥ç”¨æ¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚ ä¿®æ”¹ä¸€ä¸‹Controllerçš„ä»£ç ï¼Œå¢žåŠ  CrossOrigin æ³¨è§£ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345@CrossOrigin@RequestMapping(value = "/name", method = RequestMethod.GET)public MSResponse sigin(@RequestParam(value = "username") String userName, @RequestParam(value = "userpwd") String userPwd) &#123; // çœç•¥&#125; é‡æ–°å¯åŠ¨æœåŠ¡ï¼ŒæŠ“åŒ…å·¥å…·å¯ä»¥çœ‹åˆ°OPTIONSå’ŒGETè¯·æ±‚éƒ½æ­£å¸¸æ‰§è¡Œï¼Œè¿”å›žç éƒ½æ˜¯200ã€‚ å¯ä»¥é’ˆå¯¹æŸä¸ªæ–¹æ³•æ·»åŠ  CrossOrigin æ³¨è§£ï¼Œä¹Ÿå¯ä»¥å¯¹æ•´ä¸ªControlleræ·»åŠ è¯¥æ³¨è§£ã€‚ å…³äºŽ CrossOrigin æ³¨è§£ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œå®žè·µï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ è¦ä¸€ç›´åœ¨å­¦ä¹ çš„è·¯ä¸ŠåŠªåŠ›~]]></content>
      <categories>
        <category>ç½‘ç»œåè®®</category>
      </categories>
      <tags>
        <tag>HTTP OPTIONS CORS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·³ç»³çš„æ•…äº‹]]></title>
    <url>%2F2019%2F08%2F24%2F%E8%B7%B3%E7%BB%B3%E7%9A%84%E6%95%85%E4%BA%8B%2F</url>
    <content type="text"><![CDATA[å¤å¤©çš„å¤ªé˜³æ°¸è¿œéƒ½æ˜¯é‚£ä¹ˆå¼ºåŠ²æœ‰åŠ›ï¼Œå—æ–¹å°¤ä¸ºçªå‡ºã€‚æ•´ä¸ªåœ°é¢éƒ½å†’ç€çƒ­æ°”ï¼Œåƒä¸€åŒæ— å½¢çš„åŒæ‰‹ç´§ç´§åœ°æŠ±ç€ä½ ï¼Œé©¬è·¯ä¸Šåå°„çš„å…‰çºµç„¶ä½ ç«çœ¼é‡‘é‡‘ä¹Ÿä¼šå¿ƒç”Ÿæ•¬ç•ã€‚ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘çŽ°ï¼Œå³ä½¿è¿™ä¹ˆçƒ­çš„å¤©ï¼Œç¯®çƒåœºä¸Šè¿˜æœ‰å¾ˆå¤šâ€œæˆ˜å£«â€å¥‹ä¸é¡¾èº«çš„æ‹¼ä¸ªä½ æ­»æˆ‘æ´»ã€‚å€’ä¸æ˜¯ä»–ä»¬ä¸æ€•çƒ­ä¸æ€•ç´¯ï¼Œè€Œæ˜¯å› ä¸ºä»–ä»¬å–œæ¬¢è¿™é¡¹è¿åŠ¨æ›´æ„¿æ„ä¸ºäº†è¿™é¡¹è¿åŠ¨è€Œä»˜å‡ºã€‚ è®²ä¸€ä¸ªå¬æ¥çš„æ•…äº‹~ å…¬å¸å°†è¦è¿›è¡Œè·³ç»³æ¯”èµ›ï¼Œå„ä¸ªå°ç»„ç§¯æžå¤‡æˆ˜ï¼Œéœ€è¦å¤§å®¶ä¸€èµ·åŠªåŠ›é…åˆæ‰èƒ½æŠŠç»³è·³å¥½ã€‚ ç»„é•¿å‘çŽ°åˆšå¼€å§‹å¤§å®¶éƒ½å¾ˆéš¾ä¿æŒåŠ¨ä½œçš„ä¸€è‡´æ€§ï¼Œç»è¿‡ä¸€ç•ªç»ƒä¹ ä¹‹åŽï¼Œå¤§éƒ¨åˆ†äººèƒ½åŠ¨ä½œä¸€è‡´äº†ï¼Œè¿˜æœ‰ä¸€å°éƒ¨åˆ†äººåšèµ·æ¥æœ‰ç‚¹å›°éš¾ã€‚ ç»„é•¿è¯•ç€è®©æœ‰ç»éªŒçš„äººå¸¦ç€é‚£äº›è·³ä¸å¥½èŠ‚å¥çš„äººï¼Œè¿™æ ·åˆç»ƒä¹ äº†ä¸€æ®µæ—¶é—´ï¼Œç»å¤§éƒ¨åˆ†äººå·²ç»èƒ½å¾ˆå¥½çš„é…åˆäº†ï¼Œå…¶ä½™è·Ÿä¸å°‘èŠ‚å¥æˆ–è€…æ€Žä¹ˆéƒ½è°ƒæ•™ä¸å¥½çš„äººåªèƒ½åŽ»å•¦å•¦é˜Ÿé‚£é‡Œå‘å–ŠåŠ©å¨äº†ã€‚ åœ¨æˆ‘ä»¬å›¢é˜Ÿä¸­ä¹Ÿä¸€æ ·ï¼Œæœ‰äººèƒ½å¸¦ç€å¤§å®¶å¾€å‰èµ°ï¼Œè‡ªç„¶å°±ä¼šæœ‰äººæ‹–ä½å¤§å®¶çš„åŽè…¿ï¼Œæˆ‘æ›¾ä»ŠæŠŠè¿™ç§çŽ°è±¡å«åšâ€œç›¸å¯¹è®ºâ€ã€‚åœ¨å›¢é˜Ÿä¸­ï¼Œå‘çŽ°æœ‰äººæŽ‰é˜Ÿäº†æˆ–è€…å¾ˆåƒåŠ›çš„åœ¨å‰è¿›ï¼Œè¯•ç€åŽ»è°ƒæ•´ä¸€ä¸‹ä»–çš„å·¥ä½œæˆ–è€…æ‰¾äººå¸®å¸®ä»–ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„è°ƒæ•´å¦‚æžœè¿˜æ˜¯æ²¡æœ‰å¥½è½¬ï¼Œåªèƒ½è®©ä»–å¦è°‹é«˜å°±äº†ï¼Œå¯¹å¤§å®¶éƒ½å¥½ã€‚ è™½ç„¶å¾ˆæ®‹å¿ï¼Œä½†äº‹å®žç¡®å®žå¦‚æ­¤ï¼ æˆ‘ä»¬èƒ½åšçš„å°±æ˜¯æ‰¾å¥½è‡ªå·±çš„ä½ç½®ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªä½ç½®ä¸Šå‘æŒ¥è‡ªå·±æœ€å¤§çš„ä»·å€¼ã€‚ æ—¶é—´å¯ä»¥æ”¹å˜ä¸€åˆ‡ï¼Œä½†ä½ å¾—åšç‚¹ä»€ä¹ˆï¼]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>å›¢é˜Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿˜æœ‰ä½ ä¸çŸ¥é“çš„Javaæžšä¸¾ç‰¹æ€§(ä¸‹ç¯‡)]]></title>
    <url>%2F2019%2F08%2F11%2F%E8%BF%98%E6%9C%89%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84Java%E6%9E%9A%E4%B8%BE%E7%89%B9%E6%80%A7-%E4%B8%8B%E7%AF%87%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹è¿™ç¯‡æ˜¯åšæ–‡ è¿˜æœ‰ä½ ä¸çŸ¥é“çš„Javaæžšä¸¾ç‰¹æ€§(ä¸Šç¯‡) çš„ä¸‹ç¯‡ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹é¢çš„é“¾æŽ¥å‰å¾€ã€‚ æœ¬ç¯‡ä¸»è¦å†…å®¹ï¼š Java æžšä¸¾æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼ŒèŠèŠå…¶æ–¹æ³•çš„é‡å†™ å¦‚ä½•ä½¿ç”¨æŽ¥å£æ¥ç»„ç»‡ Java æžšä¸¾ï¼Ÿ å¦‚ä½•ä½¿ç”¨æžšä¸¾å®žçŽ° Java çš„å•ä¾‹æ¨¡å¼ JDK æ•°æ®ç»“æž„ä¸­å…³äºŽæžšä¸¾çš„é›†åˆ EnumSet å’Œå­—å…¸ EnumMap é‡å†™æžšä¸¾çš„æ–¹æ³•æ‰€æœ‰çš„æžšä¸¾ç±»éƒ½ç»§æ‰¿è‡ª Enumï¼Œåœ¨è¿™ä¸ªçˆ¶ç±»å½“ä¸­ toStringã€equals å’ŒhashCode çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ï¼Œæºç å¦‚ä¸‹ï¼š 1234567891011public String toString() &#123; return name;&#125;public final boolean equals(Object other) &#123; return this == other;&#125;public final int hashCode() &#123; return super.hashCode();&#125; å¯ä»¥çœ‹å‡ºåœ¨è¿™ä¸‰ä¸ªæ–¹æ³•å½“ä¸­ï¼Œæˆ‘ä»¬åªèƒ½é‡å†™ toString æ–¹æ³•ï¼Œå¦å¤–ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ final ä¿®é¥°çš„æ–¹æ³•ï¼Œä¸å¯ä»¥è¢«å­ç±»é‡å†™ã€‚ æˆ‘ä»¬åœ¨è‡ªå®šä¹‰çš„æžšä¸¾ä¸­ï¼Œå¯ä»¥é‡å†™ toString æ–¹æ³•çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617public enum Color &#123; RED("red color"), GREEN("green color"), BLUE("blue color"), YELLOW("yellow color"); Color(String name) &#123; _name = name; &#125; private String _name; @Override public String toString() &#123; return "this.name: " + _name; &#125;&#125; å…³äºŽ Enum çš„æºç ï¼Œå¯ä»¥åœ¨åšæ–‡ Java æžšä¸¾çš„æœ¬è´¨ ä¸­çš„æ–‡æœ«ç¿»é˜…ã€‚ å¯¹äºŽ Java ä¸­æ‰€æœ‰æžšä¸¾éƒ½æ˜¯ç»§æ‰¿è‡ª Enumï¼Œå¤§å®¶å¯ä»¥åŽ»ä½¿ç”¨ javap å‘½ä»¤åç¼–è¯‘çœ‹çœ‹ï¼Œå¦‚ä¸‹ä»£ç æ˜¯ javap åŽçš„ç®€å•ç¤ºä¾‹ï¼š 123456789public final class com.veryitman.Color extends java.lang.Enum&lt;com.veryitman.Color&gt; &#123; public static final com.veryitman.Color RED; public static final com.veryitman.Color GREEN; public static final com.veryitman.Color BLUE; public static final com.veryitman.Color YELLOW; public static com.veryitman.Color[] values(); public static com.veryitman.Color valueOf(java.lang.String); static &#123;&#125;;&#125; å¯ä»¥çœ‹åˆ° Color æ˜¯ç»§æ‰¿è‡ª java.lang.Enum çš„ï¼ŒEnum æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å¹¶å®žçŽ°äº† Comparable å’Œ Serializable è¿™ä¸¤ä¸ªæŽ¥å£ï¼Œå¦‚ä¸‹ï¼š 1public abstract class Enum&lt;E extends Enum&lt;E&gt;&gt; implements Comparable&lt;E&gt;, Serializable ä½¿ç”¨æŽ¥å£ç»„ç»‡æžšä¸¾å½“æˆ‘ä»¬å®šä¹‰çš„æžšä¸¾è¿‡å¤šä¸”åˆæœ‰å¾ˆå¤šåµŒå¥—ï¼Œå¯ä»¥ä½¿ç”¨æŽ¥å£æ¥ç»„ç»‡è¿™äº›æžšä¸¾ï¼Œå°†å…¶å½’ç±»ï¼Œè¿™æ ·ä¸€æ¥ä¸ä»…ä»£ç çœ‹èµ·æ¥å¾ˆè§„èŒƒï¼Œå¹¶ä¸”ä¹Ÿå¾ˆå¥½ç®¡ç†ä»£ç ã€‚ å¦‚ä¸‹ç¤ºä¾‹ï¼Œä½¿ç”¨æŽ¥å£ MobileTool æ¥ç»„ç»‡ä¸¤ä¸ªæžšä¸¾ã€‚ 123456789public interface MobileTool &#123; enum Phone implements MobileTool &#123; HUAWEI, iPhone, OPPO, XIAOMI &#125; enum Pad implements MobileTool &#123; iPad, WEPad, sPad &#125; &#125; ç®€å•çš„å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345MobileTool mphone = MobileTool.Phone.HUAWEI;mphone = MobileTool.Phone.iPhone;MobileTool mpad = MobileTool.Pad.iPad;mpad = MobileTool.Pad.sPad; æžšä¸¾å®žçŽ°å•ä¾‹æ¨¡å¼åœ¨ Effective Java è¿™æœ¬ä¹¦ç±ä¸­ï¼Œä½œè€…æœ‰ä¸ªè¿™æ ·ä¸‹é¢çš„æè¿°ï¼š 1"This approach is functionally equivalent to the public field approach, except that it is more concise, provides the serialization machinery for free, and provides an ironclad guarantee against multiple instantiation, even in the face of sophisticated serialization or reflection attacks. While this approach has yet to be widely adopted, a single-element enum type is the best way to implement a singleton." æ ¸å¿ƒçš„æ„æ€æ˜¯ 1ä½¿ç”¨æžšä¸¾å®žçŽ°å•ä¾‹çš„æ–¹æ³•è™½ç„¶è¿˜æ²¡æœ‰å¹¿æ³›é‡‡ç”¨ï¼Œä½†å•å…ƒç´ çš„æžšä¸¾ç±»åž‹å·²ç»æˆä¸ºå®žçŽ° Java å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ã€‚ æˆ‘ä»¬ç”¨æžšä¸¾å®žçŽ°ä¸€ä¸‹å•ä¾‹æ¨¡å¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567public enum Foo &#123; INSTANCE; public void printFoo() &#123; System.out.println("Foo here."); &#125;&#125; ç›¸æ¯” Java ä¸­å…¶ä»–çš„å•ä¾‹å®žçŽ°æ–¹å¼ï¼Œæ­¤æ—¶æ­¤åˆ»ä½ ä¼šå‘çŽ°ï¼Œæžšä¸¾å®žçŽ°å•ä¾‹çš„ä»£ç ä¼šç²¾ç®€å¾ˆå¤šã€‚ é‚£ä¹ˆï¼Œæžšä¸¾å®žçŽ°å•ä¾‹æ¨¡å¼åˆ°åº•æœ‰å“ªäº›ä¼˜åŠ¿å‘¢ï¼Ÿæˆ–è€…æ¢å¥è¯è¯´ï¼Œå°±è¿™æ ·å®žçŽ°å•ä¾‹é è°±å—ï¼Ÿ ç»è¿‡å¤§é‡ä¾‹å­å’Œ Java ç¼–ç¨‹ä¸“å®¶çš„è®²è§£ï¼Œæžšä¸¾å®žçŽ°å•ä¾‹æ¨¡å¼ç›¸å½“é è°±ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ä¸€äº›ç‰¹ç‚¹ï¼š 1ã€æžšä¸¾å®žçŽ°çš„å•ä¾‹æ¨¡å¼æ˜¯çº¿ç¨‹å®‰å…¨çš„ æœ¬è´¨ä¸Šé¢æ¥è®²ï¼Œæžšä¸¾å®žçŽ°çš„å•ä¾‹ä¹‹æ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™ä¸ªè·Ÿ Java çš„ç±»åŠ è½½æœºåˆ¶æœ‰å…³ã€‚ä»Žä¸Šé¢åç¼–è¯‘çš„ä»£ç æ¥çœ‹ï¼Œæžšä¸¾æ˜¯ final class å¹¶ä¸”æ¯ä¸ªæžšä¸¾å€¼éƒ½æ˜¯ static çš„ï¼Œè¿™é‡Œç‰µæ‰¯åˆ° ClassLoader çš„ç›¸å…³çŸ¥è¯†ï¼Œå¦‚æžœæœ‰å…´è¶£å»ºè®®å¤§å®¶åŽ»ç ”ç©¶ä¸€ä¸‹ã€‚ æ€»ä¹‹ï¼Œå¯¹äºŽæˆ‘ä»¬ä»»ä½•ä¸€ä¸ªæžšä¸¾åœ¨ç¬¬ä¸€æ¬¡è¢«çœŸæ­£ç”¨åˆ°ä¹‹æ—¶ï¼Œä¼šè¢« Java è™šæ‹ŸæœºåŠ è½½å¹¶ä¸”å®Œæˆåˆå§‹åŒ–ï¼Œè€Œè¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦è®°ä½æžšä¸¾å®žçŽ°çš„å•ä¾‹æ¨¡å¼æ˜¯å¤šçº¿ç¨‹å®‰å…¨çš„å°±å¯ä»¥äº†ã€‚ 2ã€æžšä¸¾å¯è§£å†³åå°„/ååºåˆ—åŒ–é—®é¢˜ æˆ‘ä»¬çŸ¥é“ï¼Œä¸€èˆ¬çš„å•ä¾‹æ¨¡å¼éƒ½å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯å¯ä»¥é€šè¿‡åå°„è°ƒç”¨ï¼Œå¦ä¸€ä¸ªå°±æ˜¯å¯ä»¥é€šè¿‡åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ¥ç ´åå•ä¾‹ã€‚ ä¸€èˆ¬è§£å†³åå°„è°ƒç”¨å¯ä»¥é€šè¿‡ç§æœ‰æž„é€ æ–¹æ³•ä¸­åšå¤„ç†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011private static boolean flag = false;private Foo() &#123; synchronized (this) &#123; if (false == flag) &#123; flag = true; &#125; else &#123; throw new RuntimeException("ä¸èƒ½åå¤åˆ›å»º"); &#125; &#125;&#125;; äº†è§£åºåˆ—åŒ–åŽŸç†çš„åŒå­¦ï¼Œå¯ä»¥é€šè¿‡åœ¨å•ä¾‹ç±»ä¸­å®žçŽ° readResolve æ–¹æ³•å°±å¯ä»¥é¿å…ååºåˆ—åŒ–æ”»å‡»è¿™ä¸ªé—®é¢˜äº†ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123private Object readResolve() &#123; return INSTANCE;&#125; Java çš„æžšä¸¾çš„ååºåˆ—åŒ–å®žçŽ°å¹¶ä¸æ˜¯é€šè¿‡åå°„å®žçŽ°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æžšä¸¾çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ˜¯æœ‰ç»è¿‡ç‰¹æ®Šå®šåˆ¶å’Œå¤„ç†çš„ï¼Œè¿™å°±å¯ä»¥é¿å…ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ç”±äºŽåå°„è€Œå¯¼è‡´çš„å•ä¾‹è¢«ç ´åé—®é¢˜ã€‚ æ€»ä¹‹ï¼Œæžšä¸¾å®žçŽ°çš„å•ä¾‹æ¨¡å¼ä¸ä»…å¯ä»¥é˜²æ­¢åå°„ç ´åï¼Œè¿˜å¯ä»¥é˜²æ­¢åºåˆ—åŒ–ç ´åå•ä¾‹ã€‚ é™¤æžšä¸¾å®žçŽ°å•è¿™ç§æ–¹å¼ä»¥å¤–ï¼Œæˆ‘ä¸€èˆ¬ä½¿ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼æ¥å®žçŽ°å•ä¾‹æ¨¡å¼ã€‚ é¥¿æ±‰å¼çš„å•ä¾‹æ¨¡å¼å†™æ³• 1234567891011public class Foo &#123; private static Foo instance = new Foo(); private Foo () &#123; &#125; public static Foo getInstance() &#123; return instance; &#125;&#125; é™æ€å†…éƒ¨ç±»å®žçŽ°å•ä¾‹æ¨¡å¼ 12345678910111213public class Foo &#123; private static class FooHolder &#123; private static final Foo INSTANCE = new Foo(); &#125; private Foo () &#123; &#125; public static final Foo getInstance() &#123; return FooHolder.INSTANCE; &#125;&#125; æžšä¸¾é›†åˆEnumSet æ˜¯ä¸€ä¸ªä¸“ä¸ºæžšä¸¾è®¾è®¡çš„é›†åˆç±»ï¼ŒEnumSet ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å¿…é¡»æ˜¯æŒ‡å®šæžšä¸¾ç±»åž‹çš„æžšä¸¾å€¼ã€‚ EnumSet ç±»ç»“æž„å›¾å¦‚ä¸‹ï¼š EnumSet æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ— æ³•è¢«å®žä¾‹åŒ–ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡é™æ€æ–¹æ³•èŽ·å–è¯¥ç±»çš„å®žä¾‹ã€‚ 12public abstract class EnumSet&lt;E extends Enum&lt;E&gt;&gt; extends AbstractSet&lt;E&gt; implements Cloneable, java.io.Serializable EnumMap ç±»ç»“æž„å›¾å¦‚ä¸‹ï¼š EnumMap å®šä¹‰å¦‚ä¸‹ï¼š 12public class EnumMap&lt;K extends Enum&lt;K&gt;, V&gt; extends AbstractMap&lt;K, V&gt; implements java.io.Serializable, Cloneable EnumSet ä¿è¯é›†åˆä¸­çš„å…ƒç´ ä¸é‡å¤ï¼›EnumMap ä¸­çš„ key æ˜¯ enum ç±»åž‹ï¼Œè€Œ value åˆ™å¯ä»¥æ˜¯ä»»æ„ç±»åž‹ã€‚ å…³äºŽè¿™ä¸¤ä¸ªæ•°æ®ç»“æž„çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒ JDK æ‰‹å†Œã€‚ èµ äººçŽ«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™~]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>java enum</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿˜æœ‰ä½ ä¸çŸ¥é“çš„Javaæžšä¸¾ç‰¹æ€§(ä¸Šç¯‡)]]></title>
    <url>%2F2019%2F08%2F09%2F%E8%BF%98%E6%9C%89%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84Java%E6%9E%9A%E4%B8%BE%E7%89%B9%E6%80%A7(%E4%B8%8A%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹åšæ–‡ Java æžšä¸¾çš„æœ¬è´¨ è·Ÿå¤§å®¶ä¸€èµ·å­¦ä¹ äº† Java è¯­è¨€ä¸­æžšä¸¾åˆ°åº•æ˜¯ä»€ä¹ˆï¼ŒæŽ¢ç´¢å…¶æœ¬è´¨å’ŒåŽŸç†ã€‚ç”¨ä¸€å¥è¯æ¥æ¦‚æ‹¬å…¶æœ¬è´¨å°±æ˜¯ï¼šâ€œJava ä¸­çš„æžšä¸¾æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Java ç±»â€ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç‚¹å‡»äº†è§£ä¸Šé¢é‚£ç¯‡æ–‡ç« ã€‚ ä»Šå¤©è·Ÿå¤§å®¶ä¸€èµ·å­¦ä¹ å’Œæ€»ç»“ä¸€ä¸‹ Java ä¸­çš„æžšä¸¾çš„å…¶ä»–ç‰¹æ€§å’Œç”¨é€”ï¼Œç”±äºŽå†…å®¹è¾ƒå¤šï¼Œè¿™æ¬¡çš„åˆ†äº«åˆ†ä¸ºä¸¤ç¯‡æ–‡ç« æ¥å†™ï¼Œæ¬¢è¿Žå¤§å®¶æ‹ç –ã€æŒ‡æ­£å’Œäº¤æµï¼ æœ¬ç¯‡ä¸»è¦å†…å®¹ï¼š Java switch è¯­å¥æ”¯æŒæžšä¸¾ç±»åž‹ä»¥åŠæ³¨æ„äº‹é¡¹ Java æžšä¸¾çš„å¸¸é‡ä½¿ç”¨ å¦‚ä½•åœ¨è‡ªå®šä¹‰æžšä¸¾ä¸­è‡ªå®šä¹‰æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ã€é™æ€æ–¹æ³• Java æžšä¸¾å®žçŽ°æŽ¥å£ ä¸‹ç¯‡ä¸»è¦å†…å®¹ï¼š Java æžšä¸¾æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼ŒèŠèŠå…¶æ–¹æ³•çš„é‡å†™ å¦‚ä½•ä½¿ç”¨æŽ¥å£æ¥ç»„ç»‡ Java æžšä¸¾ï¼Ÿ JDK æ•°æ®ç»“æž„ä¸­å…³äºŽæžšä¸¾çš„é›†åˆ EnumSet å’Œå­—å…¸ EnumMap switch è¯­å¥æ”¯æŒæžšä¸¾JDK1.5 æ‰å¼€å§‹æœ‰æžšä¸¾ç±»åž‹ï¼ŒåŒæ—¶å¯çˆ±çš„ Java ç»„ç»‡ä¸°å¯Œäº† switch è¯­å¥ï¼Œå³æ”¯æŒæžšä¸¾ã€‚ æˆ‘ä»¬è¿˜æ˜¯åŠ¨æ‰‹å†™ä¸ªä¾‹å­~ å®šä¹‰ä¸€ä¸ªæžšä¸¾ Colorï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940public enum Color &#123; RED("red color", 0), GREEN("green color", 1), BLUE("blue color", 2), YELLOW("yellow color", 3); // æž„é€ æ–¹æ³• Color(String name, int id) &#123; _name = name; _id = id; &#125; private String _name; private int _id; public String getName() &#123; return _name; &#125; public int getId() &#123; return _id; &#125; public static Color getColor(int max) &#123; Random random = new Random(System.currentTimeMillis()); int num = random.nextInt(max); switch (num) &#123; case 0: return Color.RED; case 1: return Color.GREEN; case 2: return Color.BLUE; case 3: return Color.YELLOW; default: return Color.BLUE; &#125; &#125;&#125; ä¸ºæžšä¸¾ Color æä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³• getColorï¼Œå¯ä»¥èŽ·å–éšæœºçš„é¢œè‰²å€¼ã€‚ é‚£ä¹ˆï¼Œå¯ä»¥ç»“åˆ switch è¯­å¥è¿™æ ·ä½¿ç”¨ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021public static void main(String[] args) &#123; int len = Color.values().length; Color color = Color.getColor(len); switch (color) &#123; case RED: System.out.println("select " + "RED"); break; case GREEN: System.out.println("select " + "GREEN"); break; case BLUE: System.out.println("select " + "BLUE"); break; case YELLOW: System.out.println("select " + "YELLOW"); break; default: System.out.println("select " + "unknow!!"); break; &#125;&#125; å¯ä»¥çœ‹å‡ºï¼Œswitch è¯­å¥ä¸­æ¡ä»¶å€¼æ˜¯ Color å¯¹è±¡ã€‚ è¿™é‡Œæé†’å¤§å®¶è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æžœ case çš„æ¡ä»¶å¸¦ä¸Šç±»çš„åå­—ï¼Œä»£ç æ˜¯æ— æ³•é€šè¿‡ç¼–è¯‘çš„ã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼ˆé”™è¯¯ç¤ºä¾‹ï¼‰ï¼š 1234// Errorcase Color.RED: System.out.println("select " + "RED"); break; ç¼–è¯‘çš„é”™è¯¯ä¿¡æ¯ï¼š 1Error: An enum switch case label must be the unqualified name of an enumeration constant å³ switch case è¯­å¥ç»“åˆæžšä¸¾ä½¿ç”¨æ—¶ï¼Œåªèƒ½å†™æžšä¸¾ç±»å®šä¹‰çš„å˜é‡åç§°ï¼Œä¸èƒ½åŠ ç±»åã€‚ å½“å¸¸é‡ä½¿ç”¨ä¸€èˆ¬åœ¨ Java ä¸­æˆ‘ä»¬å®šä¹‰å¸¸é‡æœ€å¸¸ç”¨çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š 1public static final int MAX_NAME_LENGTH = 0x1112; æœ‰äº†æžšä¸¾ä¹‹åŽï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æžšä¸¾æ¥å®šä¹‰å¸¸é‡ã€‚ 123public enum Color &#123; YELLOW, BLANK, RED, GREEN&#125; è¿™æ ·å°±å¯ä»¥æŠŠä¸€äº›ç›¸å…³çš„å¸¸é‡æ”¾åˆ°å®šä¹‰çš„æžšä¸¾å½“ä¸­äº†ã€‚ è‡ªå®šä¹‰æ–¹æ³•ã€æˆå‘˜å˜é‡ä¸Šé¢çš„ä¾‹å­ä¸­è‡ªå®šä¹‰çš„ä¸€ä¸ªæžšä¸¾ Colorï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°å¯ä»¥ç»™å®ƒæ·»åŠ æˆå‘˜å˜é‡ _idã€_nameï¼Œæž„é€ æ–¹æ³•å’Œå…¶ä»–æ–¹æ³• getColorï¼ˆé™æ€æ–¹æ³•ï¼‰ã€‚ å¦‚æžœè¿™éƒ¨åˆ†å¾ˆéš¾ç†è§£ï¼Œå»ºè®®åŽ»é˜…è¯» Java æžšä¸¾çš„æœ¬è´¨ è¿™ç¯‡æ–‡ç« ã€‚ å®žçŽ°æŽ¥å£æ‰€æœ‰çš„æžšä¸¾ç±»éƒ½ç»§æ‰¿è‡ª Enumï¼Œå› ä¸º Java ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œæ‰€ä»¥æžšä¸¾æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ã€‚ æžšä¸¾æ—¢ç„¶æ˜¯å’Œ Java çš„æ™®é€šç±»åŸºæœ¬ä¸€æ ·ï¼Œé‚£ä¹ˆï¼Œæžšä¸¾å½“ç„¶ä¹Ÿå¯ä»¥å®žçŽ°æŽ¥å£ã€‚ ä¸‹é¢æ˜¯æžšä¸¾ Color å®žçŽ°æŽ¥å£ Paint çš„ä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021interface Paint &#123; void setColor(); &#125;public enum Color implements Paint &#123; RED("red color"), GREEN("green color"), BLUE("blue color"), YELLOW("yellow color"); Color(String name) &#123; _name = name; &#125; private String _name; @Override public void setColor() &#123; System.out.println("Current paint color: " + _name); &#125;&#125; è¿˜å¯ä»¥é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼ï¼Œè®©æ¯ä¸ªæžšä¸¾å€¼å®žçŽ°æŽ¥å£ Paint çš„æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637public enum Color implements Paint &#123; RED("red color") &#123; @Override public void setColor() &#123; System.out.println("Current paint color: " + RED._name); &#125; &#125;, GREEN("green color") &#123; @Override public void setColor() &#123; System.out.println("Current paint color: " + GREEN._name); &#125; &#125;, BLUE("blue color") &#123; @Override public void setColor() &#123; System.out.println("Current paint color: " + BLUE._name); &#125; &#125;, YELLOW("yellow color") &#123; @Override public void setColor() &#123; System.out.println("Current paint color: " + YELLOW._name); &#125; &#125;; Color(String name) &#123; _name = name; &#125; private String _name; @Override public void setColor() &#123; System.out.println("Current paint color: " + _name); &#125;&#125; å¯ä»¥å†™ä¸ªæ–¹æ³•æµ‹è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š 12345public static void main(String[] args) &#123; for (Color color : Color.values()) &#123; color.setColor(); &#125;&#125; è¾“å‡ºç»“æžœï¼Œå¦‚ä¸‹ï¼š 1234Current paint color: red colorCurrent paint color: green colorCurrent paint color: blue colorCurrent paint color: yellow color äººç”Ÿæ²¡æœ‰æ°¸è¿œçš„èµ¢å®¶ï¼Œåˆ‡å‹¿å¤§å–œå¤§æ‚²ï¼Œè¦ä»¥å¹³å¸¸å¿ƒå¯¹å¾…ä¸€åˆ‡~]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>java enum switch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: å­¦ä¹ å‡ ä¸ªå®¹æ˜“æ··æ·†çš„URLæ³¨è§£]]></title>
    <url>%2F2019%2F08%2F04%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E5%AD%A6%E4%B9%A0%E5%87%A0%E4%B8%AA%E5%AE%B9%E6%98%93%E6%B7%B7%E6%B7%86%E7%9A%84URL%E6%B3%A8%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[äº†è§£ URLé¦–å…ˆï¼Œå¤§å®¶éœ€è¦çŸ¥é“ä¸‹é¢è¿™ä¸‰ä¸ªä¸œè¥¿çš„å®šä¹‰ï¼š URIï¼ŒUniversal Resource Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦ URLï¼ŒUniversal Resource Locatorï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ URNï¼ŒUniversal Resource Nameï¼Œç»Ÿä¸€èµ„æºåç§° åœ¨ WWW ä¸Šï¼Œæ¯ä¸€ä¿¡æ¯èµ„æºéƒ½æœ‰ç»Ÿä¸€çš„ä¸”åœ¨ç½‘ä¸Šå”¯ä¸€çš„åœ°å€ï¼Œè¯¥åœ°å€å°±å« URLï¼Œå®ƒæ˜¯ WWW çš„ç»Ÿä¸€èµ„æºå®šä½æ ‡å¿—ï¼Œå°±æ˜¯æŒ‡ç½‘ç»œåœ°å€ã€‚ URL æ˜¯ URI çš„å­é›†ï¼Œæ‰€æœ‰çš„ URL éƒ½æ˜¯ URIï¼Œä½†ä¸æ˜¯æ¯ä¸ª URI éƒ½æ˜¯ URLï¼Œè¿˜æœ‰å¯èƒ½æ˜¯ URNï¼Œä»–ä»¬çš„å…³ç³»å¯ä»¥ç”¨ä¸‹é¢çš„å›¾æ¥è¡¨ç¤ºï¼š æ¢å¥è¯è¯´ï¼ŒURI åˆ†ä¸ºä¸‰ç§ï¼ŒURL æˆ–è€… URN æˆ–è€…æ˜¯ URL å’Œ URI çš„ç»„åˆã€‚ ä¸ç®¡æ€Žä¹ˆè¯´ï¼Œå¤§å®¶å¹³æ—¶ä½¿ç”¨HTTPè¯·æ±‚çš„åœ°å€åŸºæœ¬éƒ½æ˜¯ç§°ä¹‹ä¸º URLï¼Œæ‰€ä»¥æš‚æ—¶ä¸å¿…è¦çº ç»“äºŽä¸‰è€…çš„åŒºåˆ«ä¹‹ä¸­è€Œæ— æ³•è‡ªæ‹”ï¼Œæžæ‡‚ URL çš„ç»„æˆéƒ¨åˆ†å’Œè§„èŒƒæ‰æ˜¯é‡ç‚¹ã€‚ URL ç”±ä¸‰éƒ¨åˆ†ç»„æˆå³èµ„æºç±»åž‹ã€å­˜æ”¾èµ„æºçš„ä¸»æœºåŸŸåå’Œèµ„æºæ–‡ä»¶åã€‚ URL çš„ä¸€èˆ¬è¯­æ³•æ ¼å¼ä¸ºï¼š 1scheme:[//[user[:password]@]host[:port]][/path][?query][#fragment] å…·ä½“å‚æ•°é‡Šä¹‰å¦‚ä¸‹ï¼š schemeï¼šä¼ é€åè®®æœ‰äº›åœ°æ–¹ä¹Ÿå†™ä½œprotocolï¼Œå¦‚httpã€httpsã€ftpç­‰ user:passwordï¼šè®¿é—®èµ„æºéœ€è¦çš„å‡­è¯ä¿¡æ¯ï¼Œå¯çœç•¥ hostï¼šæœåŠ¡å™¨åœ°å€ï¼Œé€šå¸¸ä¸ºåŸŸåï¼Œæœ‰æ—¶ä¸ºIPåœ°å€ portï¼šç«¯å£å·ï¼Œä»¥æ•°å­—æ–¹å¼è¡¨ç¤ºï¼Œä¸€èˆ¬ä½¿ç”¨ç«¯å£é»˜è®¤å€¼80ï¼Œå¯çœç•¥ pathï¼šè·¯å¾„ï¼Œä»¥â€œ/â€å­—ç¬¦åŒºåˆ«è·¯å¾„ä¸­çš„æ¯ä¸€ä¸ªç›®å½•åç§° queryï¼šæŸ¥è¯¢ï¼ŒGETæ¨¡å¼çš„çª—ä½“å‚æ•°ï¼Œä»¥â€œ?â€å­—ç¬¦ä¸ºèµ·ç‚¹ï¼Œæ¯ä¸ªå‚æ•°ä»¥â€œ&amp;â€éš”å¼€ï¼Œå†ä»¥â€œ=â€åˆ†å¼€å‚æ•°åç§°ä¸Žæ•°æ®ï¼Œé€šå¸¸ä»¥UTF8çš„URLç¼–ç ï¼Œé¿å¼€å­—ç¬¦å†²çªçš„é—®é¢˜ fragmentï¼šç‰‡æ®µï¼Œä»¥â€œ#â€å­—ç¬¦ä¸ºèµ·ç‚¹ å¸¸ç”¨çš„ URL å¦‚ä¸‹ï¼š 123http://www.veryitman.com/article/name=itman&amp;pwd=123http://www.veryitman.com/article/1/2 å¤§éƒ¨åˆ†çš„ç¼–ç¨‹è¯­è¨€éƒ½ä¼šæœ‰é’ˆå¯¹ URL å¤„ç†çš„ç³»ç»Ÿå‡½æ•°åº“ï¼Œæœ€å¸¸ç”¨çš„å¦‚ URLEncodeã€URLDecode é’ˆå¯¹ URL ç¼–è§£ç çš„ç±»ã€‚ ä¸‹é¢è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹åœ¨ SpringBoot ä¸­ç»å¸¸ä½¿ç”¨çš„ RequestParamã€QueryParamã€PathVariable å’Œ PathParam è¿™ä¸‰ä¸ªæ³¨è§£ã€‚ @RequestParamæ³¨è§£ @RequestParam å¯ä»¥ä»Žæ¯ä¸ª HTTP Request ä¸­èŽ·å–å‚æ•°ï¼Œè¯¥æ³¨è§£æ”¯æŒä¸‹é¢å››ç§å‚æ•°ï¼š defaultValue å¦‚æžœæœ¬æ¬¡è¯·æ±‚æ²¡æœ‰æºå¸¦è¿™ä¸ªå‚æ•°ï¼Œæˆ–è€…å‚æ•°ä¸ºç©ºï¼Œé‚£ä¹ˆå°±ä¼šå¯ç”¨é»˜è®¤å€¼ name ç»‘å®šæœ¬æ¬¡å‚æ•°çš„åç§°ï¼Œè¦è·Ÿ URL ä¸Šé¢çš„ä¸€æ ·ï¼Œå¦åˆ™ä¼šè¯·æ±‚å¤±è´¥ required ç”¨æ¥æ ‡ç¤ºå¯¹åº”çš„å‚æ•°æ˜¯ä¸æ˜¯å¿…é¡»çš„ï¼Œé»˜è®¤æ˜¯ trueï¼Œå¦‚æžœå¯¹æŸä¸ªå‚æ•°åšå¯é€‰å€¼å¯ä»¥è®¾ç½®è¯¥å€¼ä¸º false value æ˜¯ name å±žæ€§çš„ä¸€ä¸ªåˆ«åï¼Œvalue å’Œ name åªèƒ½å‡ºçŽ°ä¸€ä¸ªå¦åˆ™ä¼šè¯·æ±‚æŠ¥é”™ ä¸‹é¢æ˜¯æ³¨è§£ @RequestParam çš„æºç ï¼š 1234567891011121314151617181920212223package org.springframework.web.bind.annotation;import java.lang.annotation.Documented;import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;import org.springframework.core.annotation.AliasFor;@Target(&#123;ElementType.PARAMETER&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface RequestParam &#123; @AliasFor("name") String value() default ""; @AliasFor("value") String name() default ""; boolean required() default true; String defaultValue() default "\n\t\t\n\t\t\n\ue000\ue001\ue002\n\t\t\t\t\n";&#125; è¿™é‡Œé‡ç‚¹è¯´ä¸€ä¸‹ value è¿™ä¸ªå€¼ï¼Œä¸¾ä¸ªä¾‹å­ã€‚ 1234@RequestMapping(value = "/friends", method = RequestMethod.GET)public String getFrieds(@RequestParam(value = "page") String page, @RequestParam(value = "pageSize") String pageSize) &#123; return "Get friend list. " + "page: " + page + " - pagesize: " + pageSize;&#125; è¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ page å’Œ pageSizeï¼Œæ³¨æ„è¿™é‡Œçš„å‚æ•° pageSize æ˜¯å¤§å†™çš„ï¼Œåœ¨æ³¨è§£ @RequestParam ä¸­å¯¹åº”çš„ value å€¼ä¹Ÿæ˜¯å¤§å†™çš„ pageSizeï¼ŒçŽ°åœ¨å¯åŠ¨å·¥ç¨‹åŽï¼Œè¯·æ±‚ä¸€ä¸‹ä¸‹é¢çš„åœ°å€ã€‚ 1http://localhost:8080/friends?page=1&amp;pageSize=2 è¿™ä¸ªæ—¶å€™å¯ä»¥æ­£å¸¸è®¿é—®ä¸”èƒ½è¿”å›žæ­£ç¡®çš„ç»“æžœï¼Œå‡å¦‚æˆ‘ä»¬å°† @RequestParam ä¸­å¯¹åº”çš„ value å€¼æ”¹ä¸ºå°å†™çš„ pagesize å†æ¥ä½¿ç”¨ä¸Šé¢çš„åœ°å€è®¿é—®å‘¢ï¼Ÿ å°±ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š æ‰€ä»¥éœ€è¦ä¿®æ”¹è®¿é—®åœ°å€ï¼Œå³å°† pageSize æ”¹ä¸º pagesizeï¼š 1http://localhost:8080/friends?page=1&amp;pagesize=2 é‚£æˆ‘ä»¬å†æ€è€ƒå¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹æ³¨è§£ @RequestParam ä¸­å¯¹åº”çš„valueå€¼çš„ page å’Œ pageSize ä¸ºå…¶ä»–çš„æ¯”å¦‚ xxã€yyï¼Ÿ åŠ¨æ‰‹è¯•è¯•å°±çŸ¥é“äº†ï¼ 1234@RequestMapping(value = "/friends", method = RequestMethod.GET)public String getFrieds(@RequestParam(value = "xx") String page, @RequestParam(value = "yy") String pageSize) &#123; return "Get friend list. " + "page: " + page + " - pagesize: " + pageSize;&#125; å‡½æ•°æœ¬èº«çš„å‚æ•°åç§° page å’Œ pageSize æ²¡æœ‰åšä»»ä½•ä¿®æ”¹ï¼Œåªæ˜¯å°†æ³¨è§£ä¸­çš„ä¿®æ”¹ä¸º xx å’Œ yy äº†ï¼Œå†æ¬¡è®¿é—®ä¸‹é¢çš„URLï¼š 1http://localhost:8080/friends?xx=1&amp;yy=2 ä¸€å¦‚æ—¢å¾€çš„æ­£å¸¸~ æ‰€ä»¥ï¼Œå¯¹äºŽæ³¨è§£ @RequestParam çš„å‚æ•°ï¼ŒURLä¸­å¯¹åº”çš„å‚æ•°ä¸€å®šè¦å’Œvalueå¯¹åº”ã€‚ @QueryParamè¿™ä¸ªè·Ÿ @RequestParam åŸºæœ¬ä¸€è‡´ï¼Œéƒ½æ˜¯ä»¥é”®å€¼å¯¹çš„æ–¹å¼æ¥æˆ–è€…å‚æ•°ã€‚ åªä¸è¿‡ï¼Œè¯¥æ³¨è§£éœ€è¦åœ¨ pom æ–‡ä»¶ä¸­å¯¼å…¥ä¾èµ–ï¼Œå¦‚ä¸‹ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt; &lt;artifactId&gt;jsr311-api&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt;&lt;/dependency&gt; ç„¶åŽåœ¨å·¥ç¨‹ç±»ä¸­éœ€è¦å¯¼å…¥åŒ…ï¼Œå¦‚ä¸‹ï¼š 1import javax.ws.rs.QueryParam; æ³¨è§£ @QueryParam æºç ï¼š 12345678910111213@Target(&#123;ElementType.PARAMETER, ElementType.METHOD, ElementType.FIELD&#125;)@Retention(RetentionPolicy.RUNTIME)public @interface QueryParam &#123; /** * Defines the name of the HTTP query parameter whose value will be used * to initialize the value of the annotated method argument, class field or * bean property. The name is specified in decoded form, any percent encoded * literals within the value will not be decoded and will instead be * treated as literal text. E.g. if the parameter name is "a b" then the * value of the annotation is "a b", &lt;i&gt;not&lt;/i&gt; "a+b" or "a%20b". */ String value();&#125; å¯ä»¥çœ‹åˆ° @QueryParam åªæœ‰ value ä¸€ä¸ªå±žæ€§ï¼Œvalue å¯¹åº”çš„å€¼è¦å’Œå‡½æ•°å‚æ•°ä¿æŒä¸€è‡´ï¼Œå¦åˆ™å¯èƒ½è¯·æ±‚ä¼šå¾—ä¸åˆ°é¢„æœŸçš„å“åº”ç»“æžœï¼Œè¿™ä¸ªè·Ÿæ³¨è§£ @RequestParam æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸‹é¢ç»™ä¸ªç¤ºä¾‹ï¼Œå¦‚ä¸‹ï¼š 1234@RequestMapping(value = "/friends", method = RequestMethod.GET)public String getFrieds(@QueryParam(value = "page") String page, @QueryParam(value = "pageSize") String pageSize) &#123; return "Get friend list. " + "page: " + page + " - pageSize: " + pageSize;&#125; åœ¨æµè§ˆå™¨è¯·æ±‚ä¸‹é¢çš„åœ°å€å³å¯ã€‚ 1http://localhost:8080/friends?page=1&amp;pageSize=2 @PathVariableæ³¨è§£ @PathVariable ä¸Žä¸Šé¢çš„åˆšè¯´çš„æ³¨è§£ @RequestParam æ˜¯ä¸åŒçš„ï¼Œ@PathVariable éœ€è¦ä»Ž URI ä¸­èŽ·å–å‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 1234@RequestMapping(value = "/friends/&#123;page&#125;/&#123;pagesize&#125;", method = RequestMethod.GET)public String getFrieds(@PathVariable(value = "page") String page, @PathVariable(value = "pagesize") String pageSize) &#123; return "Get friend list. " + "page: " + page + " - pagesize: " + pageSize;&#125; åœ¨ @RequestMapping ä¸­å†™äº† {page}/{pagesize}ï¼ŒäºŒè€…å¸¦ä¸Šäº† {} è¿™æ · @PathVariable æ‰èƒ½è¯†åˆ«ã€‚ è¯·æ±‚ä¸‹é¢çš„åœ°å€ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ã€‚ 1http://localhost:8080/friends/1/2 ç›¸å½“äºŽ page=1ï¼Œpagesize=2ï¼Œæ‰€ä»¥æ³¨è§£ @PathVariable æ˜¯ä»ŽURI ä¸­åŒ¹é…å‚æ•°çš„ï¼Œä»–ä¸æ˜¯ä»¥é”®å€¼å¯¹æ–¹å¼èŽ·å–å¯¹åº”çš„å€¼ã€‚ @PathVariable æºç å¦‚ä¸‹ï¼š 123456789101112131415161718192021package org.springframework.web.bind.annotation;import java.lang.annotation.Documented;import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;import org.springframework.core.annotation.AliasFor;@Target(&#123;ElementType.PARAMETER&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface PathVariable &#123; @AliasFor("name") String value() default ""; @AliasFor("value") String name() default ""; boolean required() default true;&#125; æœ‰ä¸‰ä¸ªå±žæ€§ valueã€name å’Œ requiredï¼Œå…¶ä¸­ value ä¹Ÿæ˜¯ name çš„åˆ«åã€‚ @PathParamæ³¨è§£ @PathParam æºç å¦‚ä¸‹ï¼š 123456789101112package javax.websocket.server;import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;@Retention(RetentionPolicy.RUNTIME)@Target(&#123;ElementType.PARAMETER&#125;)public @interface PathParam &#123; String value();&#125; å¯ä»¥çœ‹å‡ºï¼Œ@PathVariable å’Œ @RequestParam æ˜¯ org.springframework.x åŒ…ä¸‹é¢çš„å³å±žäºŽspringæ¡†æž¶ï¼Œè€Œ @PathParam å±žäºŽ javax.websocket.x åŒ…ä¸‹é¢çš„ã€‚ æ³¨è§£ @PathParam åªæœ‰ä¸€ä¸ªå±žæ€§ valueï¼Œæ²¡æœ‰å…¶ä»–å±žæ€§äº†ã€‚@PathParam é‡Œé¢çš„valueå¯¹åº”çš„å€¼ä¸€å®šè¦å’Œå‡½æ•°å‚æ•°åç§°ä¸€è‡´ï¼ˆåŒ…æ‹¬å¤§å°å†™ï¼‰ï¼Œç¤ºä¾‹ï¼š 1234@RequestMapping(value = "/friends", method = RequestMethod.GET)public String getFrieds(@PathParam(value = "page") String page, @PathParam(value = "pageSize") String pageSize) &#123; return "Get friend list. " + "page: " + page + " - pageSize: " + pageSize;&#125; åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ä¸‹é¢çš„åœ°å€ï¼Œè¯·æ±‚å’Œå“åº”éƒ½æ˜¯æ­£å¸¸çš„ã€‚ 1http://localhost:8080/friends?page=1&amp;pageSize=2 å¦‚æžœ @PathParam ä¸­ value å¯¹åº”çš„å€¼å’Œå‡½æ•°å‚æ•°ä¸ä¸€è‡´ï¼Œè¯·æ±‚å¾—ä¸åˆ°é¢„æœŸçš„å“åº”ã€‚çŽ°åœ¨ä¿®æ”¹ value çš„ pageSize ä¸º pagesizeï¼Œå¦‚ä¸‹ï¼š 1234@RequestMapping(value = "/friends", method = RequestMethod.GET)public String getFrieds(@PathParam(value = "page") String page, @PathParam(value = "pagesize") String pageSize) &#123; return "Get friend list. " + "page: " + page + " - pageSize: " + pageSize;&#125; åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ä¸‹é¢çš„åœ°å€ï¼š 1http://localhost:8080/friends?page=1&amp;pagesize=2 å°±ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æžœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä½†æ˜¯ä½ ä½¿ç”¨ http://localhost:8080/friends?page=1&amp;pageSize=2 å¯¹äºŽä¸Šé¢çš„ä»£ç è¯·æ±‚å’Œå“åº”ä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œè¿™å°±è¯´æ˜Žæ³¨è§£ @PathParam ä¸­è¯·æ±‚çš„ URL å‚æ•°æ˜¯ä»¥å‡½æ•°å‚æ•°ä¸ºä¸»çš„ï¼Œä»–å’Œæ³¨è§£ @QueryParam ã€@RequestParam éƒ½æ˜¯ä»¥é”®å€¼å¯¹æ–¹å¼èŽ·å–å¯¹åº”çš„å€¼ã€‚ æ‰€ä»¥ï¼Œæ³¨è§£ @PathParam ä¸­ value å¯¹åº”çš„å€¼å’Œå‡½æ•°å‚æ•°å°½é‡ä¿æŒä¸€è‡´ã€‚ å­¦æµ·æ— æ¶¯è‹¦ä½œèˆŸ~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot å¾®æœåŠ¡ æ³¨è§£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: ç«‹å¿—åšä¸ªä¼Ÿå¤§çš„é¡¹ç›®]]></title>
    <url>%2F2019%2F07%2F03%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E7%AB%8B%E5%BF%97%E5%81%9A%E4%B8%AA%E4%BC%9F%E5%A4%A7%E7%9A%84%E9%A1%B9%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹åœ¨å¼€ç¯‡ å¾®æœåŠ¡: æ­¥æ­¥ä¸ºè¥ é‡Œé¢æˆ‘ä»¬å·²ç»å®šä¸‹ä¸€ä¸ªå°ç›®æ ‡ï¼ˆä»¥ç»ˆä¸ºå§‹çš„ç­–ç•¥ï¼‰ï¼Œå³ä½¿ç”¨ Spring Boot å†™ API æä¾›ç»™ iOSã€Android å®¢æˆ·ç«¯æˆ–è€…ç½‘é¡µç«¯æ¥è°ƒç”¨ã€‚ æŽ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å®Œæˆæˆ‘ä»¬è¿™ä¸ªè¶…çº§æ¢¦æƒ³å§ï¼åœ¨å¯èˆªä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç»™è¿™ä¸ª App èµ·ä¸ªåå­—å§ï¼Œè¯¥ App å°±æ˜¯ç»™ç”¨æˆ·å±•ç¤º Blog çš„ï¼Œæ‰€ä»¥æš‚ä¸”ç§°ä¹‹ä¸º MSBlog å§ï¼ æœ‹å‹åšäº†ä¸€ä¸ªå…³äºŽ äººå·¥æ™ºèƒ½çš„æ•™ç¨‹ï¼Œæ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼ç‚¹ è¿™é‡Œ å¯ä»¥è·³è½¬åˆ°æ•™ç¨‹ï¼Œå¯¹äººå·¥æ™ºèƒ½æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚ åŽŸåž‹å›¾é¡¹ç›® MSBlog çš„åŽŸåž‹å›¾æ˜¯ç”¨ Balsamiq Mockups 3 ç”»çš„ï¼Œè¿™ä¸ªç”»å›¾å·¥å…·ä½¿ç”¨èµ·æ¥éžå¸¸ç®€å•ï¼Œç”»å‡ºæ¥çš„æ•ˆæžœä¹Ÿç›¸å½“å‡‘åˆï¼ 1ã€ç™»å½•ã€æ³¨å†Œé¡µé¢ ç™»å½•å’Œæ³¨å†Œé¡µé¢ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬æˆ‘ä»¬åªæ”¯æŒç”¨æˆ·åç™»å½•ï¼ŒåŽé¢å†æ”¯æŒå…¶ä»–ç™»å½•æ–¹å¼ã€‚ ä¸‹å›¾å·¦è¾¹æ˜¯ç™»å½•é¡µé¢ï¼Œå³è¾¹æ˜¯æ³¨å†Œé¡µé¢ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 2ã€å››ä¸ªTabé¡µé¢ è¿™å››ä¸ªä¸»é¡µé¢ï¼Œåˆ†åˆ«æ˜¯é¦–é¡µã€æ–‡ç« åˆ†ç±»ã€å¥½å‹ã€ä¸ªäººé¡µé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸Šé¢çš„åŽŸåž‹å›¾åªåšäº†ç™»å½•ã€æ³¨å†Œå’Œ Tab ä¸»é¡µé¢ï¼Œä»Žè¿™å‡ ä¸ªé¡µé¢å·²ç»å¯ä»¥çœ‹å‡ºè¿™ä¸ª App çš„æž„é€ äº†ã€‚ 1ã€é¦–é¡µï¼ˆHomeï¼‰ï¼šä¸»è¦å±•ç¤ºæŽ¨èçš„æ–‡ç« ï¼Œä»¥åŠå¹¿å‘Šå±•ç¤ºé¡µï¼ˆBannerï¼‰ã€‚ 2ã€åˆ†ç±»ï¼ˆCategoryï¼‰ï¼šæ–‡ç« åˆ†ç±»ï¼ŒæŒ‰ç…§è¯„è®ºæ•°ã€å‘å¸ƒæ—¶é—´ã€çƒ­åº¦å¯¹æ‰€æœ‰æ–‡ç« è¿›è¡Œåˆ†ç±»ã€‚ 3ã€å¥½å‹ï¼ˆFriendsï¼‰ï¼šApp ä¸­æ‰€æœ‰çš„å¥½å‹ï¼Œéœ€è¦æ”¯æŒæœ¬åœ°æœç´¢ã€‚ 4ã€ä¸ªäººï¼ˆProfileï¼‰ï¼šä¸ªäººä¸­å¿ƒï¼ŒåŸºæœ¬æ˜¯ä»»ä½•ä¸€ä¸ª App çš„æ ‡é…ã€‚ é¡¹ç›®è®¡åˆ’ä»Žä¸Šé¢çš„åŽŸåž‹å›¾ä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬äº†è§£æŽ¥ä¸‹æ¥è¦åšä»€ä¹ˆäº†ã€‚ é¦–å…ˆï¼ŒæŠŠç™»å½•ã€æ³¨å†Œé¡µé¢æžå®šï¼ŒæŽ¥ç€å†æŠŠå››ä¸ª Tab é¡µé¢æžèµ·æ¥ï¼Œå¯¹äºŽ App åˆå­¦è€…æ¥è¯´ï¼Œè¿™ä¸ªåŽ‹åŠ›ç€å®žä¸å°äº†ï¼Œæ²¡å…³ç³»æ…¢æ…¢æ¥ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°çš„èµ°ä¸‹åŽ»ã€‚ æ— è®ºæ˜¯å“ªä¸ªé¡µé¢ï¼Œéƒ½éœ€è¦æœåŠ¡ç«¯æä¾›ç›¸å…³çš„æŽ¥å£ï¼ˆAPIï¼‰å’Œæ•°æ®ï¼Œç®€å•æè¿°ä¸€ä¸‹å§ï¼Œå¦‚ä¸‹ï¼š 1ã€ç™»å½•ï¼ˆSigninï¼‰ï¼šéœ€è¦æœåŠ¡ç«¯æä¾›ç™»å½•æŽ¥å£ï¼Œå³æ”¯æŒç”¨æˆ·åå’Œå¯†ç ç™»å½•çš„APIèƒ½åŠ›ã€‚ 2ã€æ³¨å†Œï¼ˆSignupï¼‰ï¼šéœ€è¦æœåŠ¡ç«¯æä¾›æ³¨å†Œçš„æŽ¥å£ï¼Œå³æ”¯æŒç”¨æˆ·åå’Œå¯†ç æ³¨å†Œçš„APIèƒ½åŠ›ã€‚ 3ã€é¦–é¡µï¼ˆHomeï¼‰ï¼šéœ€è¦æä¾›æŸ¥è¯¢æŽ¨èæ–‡ç« çš„APIï¼ŒåŽæœŸéœ€è¦è€ƒè™‘æ™ºèƒ½æŽ¨èã€‚ 4ã€åˆ†ç±»ï¼ˆCategoryï¼‰ï¼šéœ€è¦æä¾›æŸ¥è¯¢æ‰€æœ‰æ–‡ç« åˆ†ç±»çš„APIã€‚ 5ã€å¥½å‹ï¼ˆFriendsï¼‰ï¼šéœ€è¦æä¾›æŸ¥è¯¢æ¯ä¸ªäººæ‰€æœ‰å¥½å‹çš„APIã€‚ 6ã€ä¸ªäººï¼ˆProfileï¼‰ï¼šéœ€è¦æä¾›å½“å‰ç™»å½•ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åã€å¤´åƒã€æ˜µç§°ç­‰ä¿¡æ¯ã€‚ ç¬¬ä¸€æ­¥ï¼Œå…ˆæŠŠè¿™ç™»å½•æ³¨å†Œåšå¥½ï¼ŒæœåŠ¡ç«¯æŠŠç™»å½•ã€æ³¨å†Œçš„ API å‡†å¤‡å¥½ï¼› ç¬¬äºŒæ­¥ï¼Œç„¶åŽå†åš Tab é¡µé¢ï¼ŒæœåŠ¡ç«¯æŠŠå…¶ä»– API å‡†å¤‡å¥½ï¼› ç¬¬ä¸‰æ­¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è”è°ƒæ•°æ®ï¼Œç¡®ä¿æˆ‘ä»¬èƒ½æ­£å¸¸ä½¿ç”¨å®¢æˆ·ç«¯ã€‚ å®¢æˆ·ç«¯å…ˆä»Ž iOS å¼€å§‹ï¼ŒAndroid ç‰ˆæœ¬çš„ MSBlog åŽç»­å†è¡¥ä¸Šï¼ŒiOS å®¢æˆ·ç«¯çš„é¡¹ç›®é‡‡ç”¨ MVC çš„æž¶æž„ï¼Œå¼€å‘è¯­è¨€é‡‡ç”¨ Swiftï¼ˆSwiftç‰ˆæœ¬ä¸º5.0ï¼‰ï¼ŒIDE é‡‡ç”¨é«˜å¤§ä¸Šçš„ Xcodeï¼Œé¡¹ç›®ä»£ç ä½¿ç”¨ Git æ¥ç®¡ç†ï¼Œç”¨ Github ä½œä¸ºä»£ç ä»“åº“ã€‚ åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±è¿˜æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å­¦ä¹ æ¯”å¦‚ Swift ç¼–ç¨‹è¯­è¨€ã€‚å½“ç„¶äº†ï¼Œå¦‚æžœä½ ä¼š Flutter æˆ–è€… Javascript ä¹Ÿå¯ä»¥å†™å®¢æˆ·ç«¯ä»£ç ã€‚åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»Žå®¹çš„å‘Šè¯‰ä½ ï¼Œç¼–ç¨‹è¯­è¨€è¿™ä¸ªä¸œè¥¿æ²¡æœ‰ä½ æƒ³è±¡ä¸­çš„é‚£ä¹ˆéš¾ï¼Œå¤šåŠ¨æ‰‹å†™å°±å¯ä»¥äº†ï¼Œé‡åˆ°ä¸ä¼šå°±åŽ»æŸ¥æ‰‹å†Œã€‚ä¸–ä¸Šæœ¬æ²¡æœ‰è·¯ï¼Œèµ°çš„å¤šäº†å°±æœ‰äº†ï¼Œå¯¹äºŽç¼–ç¨‹ä¹Ÿä¸€æ ·ï¼Œå†™çš„å¤šäº†å°±èƒ½èžä¼šè´¯é€šï¼Œä¸¾ä¸€åä¸‰ã€‚çœŸæ­£éš¾çš„æ˜¯ä½ ä¸åŠ¨æ‰‹æ€»æ˜¯åœ¨é‚£é‡ŒåŸ‹æ€¨ï¼ åŽæœŸæœ‰å¯èƒ½ä¼šä½¿ç”¨ Flutter æ¥å†™è¿™ä¸ª Appï¼Œå¾…å®šã€‚ ç¥å¥½ï¼ŒåŠ æ²¹ï¼æ˜¯æ—¶å€™åŠ¨æ‰‹å†™èµ·æ¥äº†ï¼ æ”¹å˜ï¼Œä»Žä½ æˆ‘ç›¸è¯†å¼€å§‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot å¾®æœåŠ¡ é¡¹ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡ï¼šæœ¬åœ°çƒ­éƒ¨ç½²]]></title>
    <url>%2F2019%2F06%2F30%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1%EF%BC%9A%E6%9C%AC%E5%9C%B0%E7%83%AD%E9%83%A8%E7%BD%B2%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œéš¾å…ä¼šç»å¸¸ä¿®æ”¹ä»£ç æ¥éªŒè¯ä¸€äº›é—®é¢˜ï¼Œå¦‚æžœæ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦è¿›è¡Œé‡æ–°å…³é—­ã€å¯åŠ¨è¿™æ ·çš„æ“ä½œä¼šè®©äººæœ‰ç‚¹ä¸çˆ½ï¼Œå¦‚æžœèƒ½å®žçŽ°ä»£ç çš„çƒ­éƒ¨ç½²å°±å¥½äº†ã€‚ æ‰€è°“çƒ­éƒ¨ç½²ï¼Œå°±æ˜¯åœ¨åº”ç”¨æ­£åœ¨è¿è¡Œçš„æ—¶å€™å‡çº§è½¯ä»¶ï¼Œå´ä¸éœ€è¦é‡æ–°å¯åŠ¨åº”ç”¨ã€‚é€šä¿—æ¥è®²ï¼Œçƒ­éƒ¨ç½²å°±æ˜¯åœ¨ä¿®æ”¹ä»£ç åŽï¼Œä¸éœ€è¦é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œå°±å¯ä»¥åŠ è½½ä¿®æ”¹åŽçš„ä»£ç ï¼Œçœ‹åˆ°ä¿®æ”¹åŽçš„æ•ˆæžœã€‚å¯¹äºŽ IDEA æ¥è¯´ï¼Œçƒ­éƒ¨ç½²å°±æ˜¯ä¸éœ€è¦åå¤çš„é€šè¿‡å¼€å§‹ã€åœæ­¢æ¥è¿›è¡Œé¡¹ç›®çš„å¯åŠ¨ï¼Œè€Œæ˜¯ä¿®æ”¹ä»£ç ä¿å­˜åŽè‡ªåŠ¨åŠ è½½ä¿®æ”¹åŽçš„ä»£ç ã€‚ Spring Boot æä¾›äº†çƒ­éƒ¨ç½²èƒ½åŠ›ã€‚å¯ä»¥ä½¿ç”¨ Spring Boot Loader çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Spring Boot Devtoolsçš„æ–¹å¼æ¥è¿›è¡Œï¼ŒäºŒè€…å®žçŽ°æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œå¤§è‡´æ€»ç»“å¦‚ä¸‹ï¼š Spring Boot Loaderï¼šçœŸæ­£çš„çƒ­éƒ¨ç½²ã€‚ Spring Boot Devtoolsï¼šé‡æ–°éƒ¨ç½²æ¥å®žçŽ°çƒ­éƒ¨ç½²ã€‚ è¿™ä¸¤ç§çƒ­éƒ¨ç½²ä¹Ÿæ˜¯æœ¬åœ°çƒ­éƒ¨ç½²ï¼ŒçœŸæ­£çš„è¿œç¨‹æœåŠ¡å™¨çƒ­éƒ¨ç½²æ–¹æ¡ˆå¦æœ‰æ–¹æ¡ˆï¼Œè¿™ä¸ªä¸æ˜¯ä»Šå¤©åˆ†äº«çš„ç‚¹åŽç»­ç‰µæ¶‰åˆ°éƒ¨ç½²æ–¹æ¡ˆå†è¯´ï¼ä»Šå¤©åªåˆ†äº«å¦‚ä½•ä½¿ç”¨ devtools å®žçŽ° Spring Boot é¡¹ç›®çš„çƒ­éƒ¨ç½²ã€‚ æœ‹å‹åšäº†ä¸€ä¸ªå…³äºŽ äººå·¥æ™ºèƒ½çš„æ•™ç¨‹ï¼Œæ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼ç‚¹ è¿™é‡Œ å¯ä»¥è·³è½¬åˆ°æ•™ç¨‹ï¼Œå¯¹äººå·¥æ™ºèƒ½æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚ spring-boot-devtoolsåœ¨ IDEA ä¸­ä½¿ç”¨ devtools éœ€è¦ä¿®æ”¹ IDEA çš„è®¾ç½®å’Œå·¥ç¨‹çš„ pom æ–‡ä»¶ï¼Œå…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ã€‚ 1ã€ä¿®æ”¹pom.xmlæ–‡ä»¶ï¼Œå¢žåŠ devtools åœ¨ pom.xml æ–‡ä»¶ä¸­çš„ dependency ä¸‹å¢žåŠ  devtoolsï¼Œå¦‚ä¸‹ï¼š 1234567&lt;!--Devtools--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;scope&gt;true&lt;/scope&gt;&lt;/dependency&gt; åœ¨ build æ ‡ç­¾ä¸‹å¢žåŠ  configuration/fork é…ç½®ï¼Œå¦‚æžœæ²¡æœ‰è¯¥é¡¹é…ç½®ï¼Œdevtools ä¸ä¼šèµ·ä½œç”¨ï¼Œå³åº”ç”¨ä¸ä¼šé‡å¯ã€‚ 1234567891011&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 2ã€ä¿®æ”¹IDEAç¼–è¯‘é€‰é¡¹ åœ¨IDEAä¸­æ‰“å¼€ File/Settingsï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3ã€ä¿®æ”¹IDEAä¸­çš„Registry åœ¨ IDEA ä¸­ Help/Find Action...ï¼Œæ‰“å¼€ä¸‹é¢çš„å¯¹è¯æ¡†ï¼Œè¾“å…¥registry è¿›è¡Œæœç´¢ï¼Œå¦‚ä¸‹å›¾ï¼š åŒå‡» Registryï¼Œå‡ºçŽ°ä¸‹é¢å¼¹æ¡†ï¼Œå¦‚å›¾æ“ä½œï¼Œé€‰ä¸­ Compiler autoMake allow when app running å³å¯ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨å¿«æ·é”® ctrl + shift + alt + / æ‰“å¼€ Registryï¼Œå¦‚å›¾ï¼š 4ã€é‡æ–°å¯åŠ¨é¡¹ç›® é‡æ–°è¿è¡Œé¡¹ç›®è¿›è¡ŒéªŒè¯ã€‚ 1234@RequestMapping(value = "/user")public String user() &#123; return "Greate user!";&#125; æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:8080/user å¯ä»¥çœ‹åˆ°æ•ˆæžœã€‚ ä¿®æ”¹åŽŸæ¥çš„ user æ–¹æ³•å’Œå¢žåŠ ä¸€ä¸ª user2 æ–¹æ³•ï¼Œå†æ¥éªŒè¯ã€‚ 123456789@RequestMapping(value = "/user")public String user() &#123; return "Greate user, welcome!";&#125;@RequestMapping(value = "/user2")public String user2() &#123; return "Greate user!";&#125; åˆ†åˆ«åœ¨æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:8080/user å’Œ http://localhost:8080/user2 çŽ°åœ¨ä¸éœ€è¦åœ¨ IDEA ä¸­é‡æ–°å¯åŠ¨ã€å…³é—­è¿™ç§éº»çƒ¦æ“ä½œäº†ã€‚ å¦‚æžœä½ è¶³å¤Ÿç»†å¿ƒå°±ä¼šå‘çŽ°ï¼Œä½¿ç”¨ devtools åŽï¼Œæ¯æ¬¡ä¿®æ”¹æŽ§åˆ¶å°è‡ªåŠ¨çš„é‡æ–°å¯åŠ¨äº† Spring Boot é¡¹ç›®ï¼Œæ‰€ä»¥ devtools æ˜¯ä½¿ç”¨äº†é‡æ–°éƒ¨ç½²çš„æ–¹å¼ä»Žè€Œå®žçŽ°äº†çƒ­éƒ¨ç½²çš„åŠŸèƒ½ã€‚ æ³¨æ„å‡ ä¸ªé—®é¢˜1ã€ä»£ç ä¿®æ”¹ä¸ä¼šç«‹å³ç”Ÿæ•ˆéšç€å·¥ç¨‹è¶Šæ¥è¶Šå¤§ï¼Œä¿®æ”¹ä»£ç æˆ–è€…é…ç½®åŽéœ€è¦ç¨ç­‰å‡ ç§’é’Ÿï¼ˆä¸€èˆ¬3sä»¥å†…ï¼‰å°±ä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨å·¥ç¨‹ï¼ŒæŽ§åˆ¶å°å°±ä¼šçœ‹åˆ°æ—¥å¿—çš„è¾“å‡ºã€‚ 2ã€ä»£ç ä¿®æ”¹åŽæŽ§åˆ¶å°æ²¡æœ‰è‡ªåŠ¨çš„é‡æ–°å¯åŠ¨å·¥ç¨‹è¿™ä¸ªå°±éœ€è¦æŒ‰ç…§è¿™ç¯‡æ–‡ç« è¯´çš„ï¼Œé‡æ–°æ£€æŸ¥ä¸€ä¸‹å¦‚ä¸‹è®¾ç½®ï¼š pom æ–‡ä»¶ï¼Œæ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æŠŠå¿…è¦çš„é…ç½®è¢«ä¿®æ”¹äº†ã€‚ IDE çš„è®¾ç½®æ˜¯å¦å’Œæœ¬æ–‡ä¸€è‡´ã€‚ æ”¹å˜ï¼Œä»Žä½ æˆ‘ç›¸è¯†å¼€å§‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot å¾®æœåŠ¡ çƒ­éƒ¨ç½²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¤çŸ¥]]></title>
    <url>%2F2019%2F06%2F23%2F%E8%AE%A4%E7%9F%A5%2F</url>
    <content type="text"><![CDATA[ä»»ä½•æ—¶å€™éƒ½ä¸è¦è½»æ˜“çš„å¼€å£è¯´ï¼šâ€œè¿™ä¸å¯èƒ½â€ï¼Œå°±è·Ÿåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸è¦è½»æ˜“è¯´æ”¾å¼ƒä¸€æ ·é‡è¦ã€‚ åœ¨å¾ˆå¤šåœºåˆä¸‹ï¼Œä½ è¿™ä¹ˆä¸€è¯´ä¸ä»…æš´éœ²äº†ä½ çš„å­¦è¯†ï¼Œè€Œä¸”è¿˜ä¼šæš´éœ²ä½ çš„å¿ƒæ€ã€‚ç‰¹åˆ«æ˜¯ç¨‹åºå‘˜ï¼Œåœ¨äº§å“è¯´è¦å®žçŽ°xxxåŠŸèƒ½æˆ–è€…UEè¯´è¦å®žçŽ°yyyæ•ˆæžœçš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“ç”¨â€œè¿™ä¸ªæ— æ³•å®žçŽ°â€è¿™æ ·çš„è¯­å¥æ¥â€œæŠ—æ‹’â€éœ€æ±‚ã€‚ æˆ‘è®°å¾—æœ‰è¿™æ ·ä¸€ä»¶å°äº‹ã€‚ ç¨‹åºå‘˜Aè¯´ï¼šâ€œè¿™ä¸ªæ¡†æž¶å·²ç»é™åˆ¶äº†ï¼Œæ— æ³•å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œåˆ«ç™½è´¹åŠ›æ°”äº†!â€ã€‚ ç¨‹åºå‘˜Bè¯´ï¼šâ€œæˆ‘ä»¬å¯ä»¥å†è¯•è¯•ï¼Œæˆ–è®¸è¿˜æœ‰å…¶ä»–åŠžæ³•å‘¢ï¼Ÿâ€ã€‚ Aæ˜¾å¾—å¾ˆä¸è€çƒ¦ï¼Œè¯´åˆ°ï¼šâ€œä½ è¦æ˜¯ä¸ç›¸ä¿¡æˆ‘ï¼Œä½ å°±è‡ªå·±æžå§ï¼Œæˆ‘ä¸ç®¡äº†!â€ã€‚ Bæ²¡æœ‰å’ŒAç»§ç»­äº‰è®ºè€Œæ˜¯é»˜é»˜åœ°è½¬åŽ»æƒ³åŠžæ³•è§£å†³é—®é¢˜ã€‚åŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œä¸‹åˆBå°±æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œè¿™ä¸ªæ–¹æ¡ˆä¸ä»…ç®€å•è€Œä¸”é«˜æ•ˆï¼Œåªéœ€è¦åœ¨æ¡†æž¶çš„åŸºç¡€ä¸Šç®€å•å°è£…ä¸€ä¸‹å°±å¥½ã€‚ è¿™æ ·çš„åœºæ™¯ï¼Œæˆ‘ç›¸ä¿¡å‚åŠ è¿‡å·¥ä½œçš„å¼€å‘å¤§å¤§ä»¬ç»å¸¸é‡åˆ°ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬è¯´å‡ºä¸€äº›ç±»ä¼¼â€œä¸å¯èƒ½â€çš„åŽè¯­ï¼Œè¦ä¹ˆæ˜¯å¿ƒæ€ä¸å¯¹ï¼Œè¦ä¹ˆæ˜¯è®¤çŸ¥ä¸å¤Ÿã€‚å¾ˆå¤šäººåœ¨å·¥ä½œå½“ä¸­é¢å¯¹å¤æ‚äº‹æƒ…çš„æ—¶å€™ä¼šè¯´â€œè¿™ä¸å¯èƒ½â€æˆ–è€…â€œè¿™ç»ä¸å¯èƒ½â€çš„è¯ï¼Œå¯èƒ½ä½ éƒ½æ²¡æœ‰æ€è€ƒè¿‡å°±éšå£è¯´å‡ºæ¥äº†ï¼Œä¸€æ–¹é¢æ˜¾å¾—è‡ªå·±çŸ¥è¯†ä¸è¶³ï¼Œå¦ä¸€æ–¹é¢ä¼šæ‹’åˆ«äººäºŽåƒé‡Œä¹‹å¤–ã€‚ åˆšå…¥èŒåœºçš„ç¨‹åºå‘˜å’Œå·¥ä½œå·²ä¹…ä¸”çˆ±æ€è€ƒçš„ç¨‹åºå‘˜æœ‰ç€å¾ˆä¸ä¸€æ ·çš„è®¤çŸ¥ã€‚åˆšå…¥èŒåœºçš„ç¨‹åºå‘˜æˆ–è€…å·¥ç¨‹å¸ˆï¼Œé¢å¯¹äº§å“ç»ç†æå‡ºçš„éœ€æ±‚åŸºæœ¬éƒ½æ˜¯ä¸€ä¸€é¡ºä»Žï¼Œæ— è®ºéœ€æ±‚æ˜¯å¦åˆç†ï¼Œä»–ä»¬éƒ½ä¼šè€è€å®žå®žçš„æŠŠéœ€æ±‚è½¬åŒ–ä¸ºä¸€è¡Œè¡Œçš„ä»£ç ï¼Œç¨å¾®æœ‰ç‚¹æƒ³æ³•çš„ä¼°è®¡å› ä¸ºâ€œèƒ†å°â€è€Œä¸æ•¢å‘å£°ã€‚éšç€èŒåœºçš„ç£¨ç»ƒï¼Œä¸šåŠ¡èƒ½åŠ›çš„å¢žå¼ºä»–ä»¬å¼€å§‹æœ‰äº†è‡ªå·±çš„æƒ³æ³•å’Œæ€è€ƒï¼Œæ•¢äºŽäº§å“ç»ç†â€œæŠ—è¡¡â€äº†ï¼Œå¯¹äºŽä¸åˆç†çš„éœ€æ±‚ä¼šä¸Žäº§å“å¤§å¤§ä»¬é’ˆé”‹ç›¸å¯¹ï¼Œæœ‰æ—¶å€™ä½ ä¼šå‘çŽ°äº§å“éœ€æ±‚ä¼šè®®ä¿¨ç„¶ä¸€åœºåˆ†å´©ç¦»æžçš„å†…æˆ˜ã€‚é¡¹ç›®åšçš„å¤šäº†ï¼Œç¼–ç¨‹èƒ½åŠ›ã€ä¸šåŠ¡èƒ½åŠ›å’Œæ²Ÿé€šèƒ½åŠ›åˆä¸Šäº†ä¸€å±‚æ¥¼ï¼Œä¼˜ç§€çš„ç¨‹åºå‘˜ä»¬ä¸ä»…èƒ½æŒ‘å‡ºä¸åˆç†çš„éœ€æ±‚ï¼ˆä¼ªéœ€æ±‚ï¼‰è€Œä¸”è¿˜èƒ½æå‡ºæ›´åˆç†çš„éœ€æ±‚å¸®åŠ©äº§å“æ›´ä¸Šä¸€å±‚æ¥¼ï¼Œæå‡äº§å“çš„é€¼æ ¼å’Œå®žç”¨æ€§ï¼Œä¸ä»…å‡å°‘äº†å¼€å‘æˆæœ¬è€Œä¸”è¿˜æå‡äº†å›¢é˜Ÿä½œæˆ˜çš„å£«æ°”ï¼Œæ›´é‡è¦çš„æ˜¯äº§å“ç»ç†ä»¥åŽä¸æ•¢å°çž§ä½ äº†ï¼Œä½ è‡ªå·±ä¹Ÿä¼šèŽ·å¾—æ— è¡Œçš„æˆå°±æ„Ÿã€‚ç»åŽ†äº‹æƒ…ï¼ˆå¦‚é¡¹ç›®ç»åŽ†ï¼‰ï¼Œæ€è€ƒå’Œæ€»ç»“äº‹æƒ…çš„å‘å±•ã€ç»è¿‡ã€ç»“å±€ï¼Œä»Žè€Œä¸æ–­çš„æé«˜è‡ªå·±çš„ä¸šåŠ¡æ°´å¹³æ˜¯æå‡è‡ªæˆ‘è®¤çŸ¥çš„ä¸€ä¸ªæœ‰æ•ˆé€”å¾„ã€‚ å¹´è½»æ—¶å€™çš„å¬´æ”¿æ•¢çˆ±æ•¢æ¨ï¼Œä¸ªæ€§å¾ˆå¼ºï¼Œä¸‹é¢æ˜¯å•ä¸éŸ¦å’Œå¬´æ”¿çš„ä¸€æ®µå¯¹è¯ã€‚ å•ä¸éŸ¦ï¼šæˆ‘ä¸ºäº†çŽ‹ä¸Šçš„åƒç§‹å¤§ä¸šï¼Œæœ‰äº›äº‹æƒ…ï¼ŒçŽ‹ä¸Šä¸€æ—¶ä¸å¯ç†è§£ã€‚å¬´æ”¿ï¼šä¸å¯ç†è§£ï¼Ÿæœ‰äº›äº‹æƒ…ï¼Œè¿˜è¦ä½¿åŠ²æ‰èƒ½ç†è§£å‘€ï¼Ÿå•ä¸éŸ¦ï¼šæˆ‘åªèƒ½å‘Šè¯‰ä½ ï¼Œå½“ä¸€ä¸ªäººè¿˜ä¸å¤Ÿæˆç†Ÿçš„æ—¶å€™ï¼Œä»–æ‰€çœ‹åˆ°çš„äº‹æƒ…ï¼Œæœªå¿…æ˜¯çœŸå®žçš„ã€‚å¬´æ”¿ï¼šæœªå¿…çœŸå®žï¼Ÿé‚£æˆ‘çœ‹åˆ°çš„æ˜¯ä»€ä¹ˆï¼Ÿå•ä¸éŸ¦ï¼šä½ çœ‹åˆ°çš„ï¼Œåªæ˜¯çœŸå®žçš„å½±å­ã€‚å¬´æ”¿ï¼šé‚£å°±è¯·ä»²çˆ¶å‘Šè¯‰æˆ‘ï¼Œå¦‚ä½•æ‰èƒ½ç†è§£ä½ çš„çœŸå®žï¼Ÿå•ä¸éŸ¦ï¼šçŽ‹ä¸ŠçŽ°åœ¨è¿˜æ²¡è¿™ä¸ªèƒ½åŠ›ï¼ ç»Ÿä¸€å…­å›½ä¹‹åŽï¼Œå¬´æ”¿é¢å¯¹æŽæ–¯æ„Ÿæ…¨ï¼šâ€œå¦‚ä»Šå¤©ä¸‹å·²ç»ä¸€ç»Ÿï¼Œé‚£ä¹ˆå¤§ç§¦çŽ°å¦‚ä»Šçš„ä»²çˆ¶åˆæ˜¯è°å‘¢ï¼Ÿâ€å¯è§å•ä¸éŸ¦åœ¨å¬´æ”¿å¿ƒä¸­çš„åœ°ä½ä¸¾è¶³è½»é‡ï¼ŒéžåŒä¸€èˆ¬ã€‚ æˆ‘ä»Ž â€œæ·±å…¥ç†è§£Linuxå†…æ ¸â€ è¿™æœ¬ä¹¦ä¸­ï¼Œçœ‹åˆ°äº†è¿™æ ·ä¸€æ®µè¯: Linux æ˜¯éžæŠ¢å å¼ï¼ˆnonpreemptiveï¼‰å†…æ ¸ã€‚ è‡ªä»ŽæŽ¥è§¦Linuxä»¥æ¥ï¼Œåœ¨ä¸ªäººçš„è®¤çŸ¥ä¸­Linuxéƒ½æ˜¯æŠ¢å å¼çš„ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¿™é‡Œå´è¯´å®ƒæ˜¯éžæŠ¢å å¼çš„å‘¢ï¼Ÿ è¿™æœ¬ä¹¦åˆå¾ˆæƒå¨ï¼Œéš¾é“æ˜¯è‡ªå·±é”™äº†ï¼Ÿæˆ‘å°±ç¡¬ç€å¤´çš®åˆåŽ»æ‰¾ç›¸å…³çš„èµ„æ–™ï¼Œç»“æžœç®—æ˜¯æžæ¸…æ¥šäº†æ¥é¾™åŽ»è„‰ã€‚ Linuxåˆ†ä¸ºå†…æ ¸æŠ¢å å’Œç”¨æˆ·æŠ¢å ï¼ŒLinuxå†…æ ¸ç‰ˆæœ¬2.4æ”¯æŒå†…æ ¸æŠ¢å ä½†ä¸æ”¯æŒç”¨æˆ·æŠ¢å ï¼Œä¸€ç›´åˆ°Linuxå†…æ ¸ç‰ˆæœ¬2.6æ‰éƒ½æ”¯æŒå†…æ ¸æŠ¢å å’Œç”¨æˆ·æŠ¢å ï¼Œâ€æ·±å…¥ç†è§£Linuxå†…æ ¸â€ è¿™æœ¬ä¹¦æ˜¯åŸºäºŽLinuxå†…æ ¸ç‰ˆæœ¬2.4ä¹‹å‰è®²è§£çš„ï¼Œæ‰€ä»¥è¯´æ³•å¹¶æ²¡æœ‰é”™è¯¯ã€‚ æ´»åˆ°è€å­¦åˆ°è€ï¼Œè®²çš„æ˜¯äººæ— è®ºåœ¨é‚£ä¸ªé˜¶æ®µéƒ½ä¸åº”è¯¥æ”¾å¼ƒå­¦ä¹ ï¼Œå› ä¸ºåªæœ‰ä¸æ–­çš„å­¦ä¹ æ‰èƒ½æé«˜è‡ªå·±çš„è®¤çŸ¥ã€‚å¯¹äºŽæ–°é²œäº‹ç‰©ï¼Œæˆ‘ä»¬ä¸€å®šè¦ä¿æŒæ•¬ç•ä¹‹å¿ƒï¼Œå› ä¸ºä½ æ²¡æœ‰è¿™æ–¹é¢çš„ç»éªŒï¼Œè™šå¿ƒè¯·æ•™å’Œå€Ÿé‰´æ‰èƒ½é¿å…ä¸€å®šçš„æŸå¤±ã€‚æˆ‘è®°å¾—æœ‰ä¸€æ¬¡å‚åŠ ä¸€ä¸ªæŠ€æœ¯åŸ¹è®­ï¼Œè€å¸ˆæé—®ï¼šâ€œè°èƒ½ç®€å•è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ å¢¨è²å®šå¾‹ ï¼Ÿâ€ï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹å…¨åœºï¼ŒåŠåˆ†é’Ÿæ²¡æœ‰äººå›žç­”ï¼ŒäºŽæ˜¯è‡ªå·±å°±æ–—èƒ†ç«™èµ·æ¥è¯´äº†ï¼šâ€œä½ æ€»æ˜¯æ‹…å¿ƒçš„äº‹æƒ…ï¼Œå®ƒæ€»ä¼šå‘ç”Ÿçš„ã€‚â€ï¼Œè€å¸ˆæ»¡æ„çš„ç‚¹äº†ç‚¹å¤´ï¼Œæˆ‘ç›¸ä¿¡å½“æ—¶ä¼šåœºä¸­æœ‰èƒ½æ¯”æˆ‘è§£é‡Šæ›´å¥½çš„äººï¼Œå¯èƒ½æ˜¯ä»–ä¸æ•¢ä¹Ÿæœ‰å¯èƒ½æ˜¯ä»–ä¸å±‘äºŽå›žç­”ã€‚è¯´è¿™ä¸ªäº‹æƒ…å¹¶ä¸æ˜¯è¦å½°æ˜¾æˆ‘è‡ªå·±æœ‰å¤šä¹ˆåŽ‰å®³ï¼Œè€Œæ˜¯è¦å‘Šè¯‰å¤§å®¶å¤šè¯»ä¹¦æ˜¯æé«˜è‡ªæˆ‘è®¤çŸ¥èƒ½åŠ›çš„ä¸€ç§æ–¹å¼ã€‚ å¢¨è²å®šå¾‹ä¸»è¦å†…å®¹æœ‰å››ä¸ªæ–¹é¢ï¼š ä¸€ã€ä»»ä½•äº‹éƒ½æ²¡æœ‰è¡¨é¢çœ‹èµ·æ¥é‚£ä¹ˆç®€å•ï¼› äºŒã€æ‰€æœ‰çš„äº‹éƒ½ä¼šæ¯”ä½ é¢„è®¡çš„æ—¶é—´é•¿ï¼› ä¸‰ã€ä¼šå‡ºé”™çš„äº‹æ€»ä¼šå‡ºé”™ï¼› å››ã€å¦‚æžœä½ æ‹…å¿ƒæŸç§æƒ…å†µå‘ç”Ÿï¼Œé‚£ä¹ˆå®ƒå°±æ›´æœ‰å¯èƒ½å‘ç”Ÿã€‚ â€œå¢¨è²å®šå¾‹â€çš„æ ¹æœ¬å†…å®¹æ˜¯â€œå‡¡æ˜¯å¯èƒ½å‡ºé”™çš„äº‹æœ‰å¾ˆå¤§å‡ çŽ‡ä¼šå‡ºé”™â€ï¼ŒæŒ‡çš„æ˜¯ä»»ä½•ä¸€ä¸ªäº‹ä»¶ï¼Œåªè¦å…·æœ‰å¤§äºŽé›¶çš„æœºçŽ‡ï¼Œå°±ä¸èƒ½å¤Ÿå‡è®¾å®ƒä¸ä¼šå‘ç”Ÿã€‚ å¯¹äºŽäººçš„è®¤çŸ¥å¤§æ¦‚å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä»¥åŽå·¥ä½œä¸­æˆ–è€…ç”Ÿæ´»ä¸­é‡åˆ°ä¸€äº›è‡ªå·±ä¸çŸ¥é“çš„äº‹æƒ…ï¼Œé¦–å…ˆè¦æ‘†æ­£å¿ƒæ€ï¼Œç„¶åŽåŽ»æ‰¾æ¯”ä½ æ›´å¼ºçš„äººæ¥è¯·æ•™ã€‚è¿™æ ·åšçš„è¯ï¼Œä½ å³ç»“äº¤äº†æœ‹å‹åˆå­¦åˆ°äº†çŸ¥è¯†ï¼Œä¸¤å…¨å…¶ç¾Žï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ çŸ¥ä¹‹ä¸ºçŸ¥ä¹‹ï¼Œä¸çŸ¥ä¸ºä¸çŸ¥~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>è®¤çŸ¥ è‡ªæˆ‘æˆé•¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: Gitå…¥é—¨]]></title>
    <url>%2F2019%2F06%2F09%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-Git%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[ä»£ç ç®¡ç†å¦‚æžœä½ è¿˜æ²¡æœ‰Githubè´¦å·ï¼Œèµ¶ç´§ç‚¹å‡» è¿™é‡Œ åŽ»åˆ›å»ºä¸€ä¸ªï¼Œå¾ˆç®€å•ï¼Œç„¶åŽä¸‹è½½ Git GUI å®‰è£…å³å¯ï¼Œå¦‚æžœä½ è¿˜ä¸ä¼šè¿™äº›æ“ä½œï¼Œè¯·è¡ŒåŠ¨èµ·æ¥åŽ»æœç´¢å¯¹åº”çš„æ–¹æ³•ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé™¤äº†å†™ä»£ç ä¹‹å¤–ï¼Œè¿˜éœ€è¦å¯¹ä»£ç è¿›è¡Œç®¡ç†ã€‚åœ¨è¯´å¦‚ä½•ç®¡ç†ä»£ç ä¹‹å‰ï¼Œå…ˆè·Ÿå¤§å®¶åˆ†äº«å‡ ä¸ªå®žé™…å¼€å‘ä¸­å…³äºŽä»£ç ç®¡ç†çš„åœºæ™¯ã€‚ æ¡ˆä¾‹1ï¼šå…¥é—¨çš„å°æ—º å°æ—ºæ˜¯åå…¥é—¨ä¸ä¹…å¼€å‘ä¹‹è·¯çš„ç¼–ç¨‹ç‹‚é­”ï¼Œå¯¹ä»£ç æœ‰é¢—æ‰§ç€çš„å¿ƒã€‚å¹³æ—¶ç¼–å†™çš„ä»£ç å…¨éƒ¨æ”¾åœ¨è‡ªå·±çš„é‚£å°Macbook Proä¸Šé¢ï¼Œæœ‰ä¸€å¤©å°æ—ºä¸å°å¿ƒæŠŠè‡ªå·±ç¼–å†™çš„é‡è¦ä»£ç ç»™åˆ é™¤äº†ï¼Œä¸‡æ¶çš„ rm -fr code å‘€ï¼å¿ƒä¸­ä¸€ä¸‡å¤´è‰æ³¥é©¬å¥”é©°è€Œè¿‡ã€‚è¿™è®©å°æ—ºä¼¤é€äº†è„‘ç­‹ï¼Œåªèƒ½ç†¬å¤œç¡¬ç€å¤´çš®å†æŠŠå®ƒç»™ç èµ·æ¥ï¼Œè‡ªå·±çŠ¯çš„é”™åªèƒ½é»˜é»˜åœ°æ‰¿å—ç€ã€‚ æ¡ˆä¾‹2ï¼šæ–°æ‰‹å°æŽå’Œå°åˆš å°æŽå’Œå°åˆšæ˜¯ä¸€å¯¹ç¼–ç¨‹æ­æ¡£ï¼ˆå…¬å¸åªæœ‰ä»–ä»¬ä¸¤ä¸ªAndroidå¼€å‘ï¼Œç›¸ä¾ä¸ºå‘½å§ï¼‰ï¼Œä¸¤ä½éƒ½æ˜¯å¼€å‘çš„æ–°æ‰‹ã€‚æ¯æ¬¡å°æŽå’Œå°åˆšåˆ†åˆ«æäº¤ä»£ç åˆ°ä»“åº“ï¼Œéƒ½è¦ç»åŽ†ä¸€åœºæƒ¨ç›®å¿ç¹çš„åšå¼ˆã€‚æ‰€è°“çš„åšå¼ˆæŒ‡çš„æ˜¯ä¸¤ä½è¦èŠ±å¾ˆé•¿æ—¶é—´æ¥è§£å†³ä»£ç å†²çªçš„é—®é¢˜ï¼Œå“Žï¼Œé™¤äº†å†™ä»£ç è¿˜è¦è§£å†³è¿™äº›æ— èŠçš„é—®é¢˜ï¼Œçƒ¦ï¼ å¦‚æžœå°æ—ºçŸ¥é“ä½¿ç”¨Gitç®¡ç†ä»£ç ï¼Œä¹Ÿå¯ä»¥é¿å…è¯¯åˆ çš„é£Žé™©ã€‚ å°æŽå’Œå°åˆšè¦æ¯”å°æ—ºæœºæ™ºï¼Œè‡³å°‘çŸ¥é“ä»£ç è¦æäº¤åˆ°ä»“åº“ï¼Œå½“ç„¶å°æŽå’Œå°åˆšå·¥ä½œç»éªŒä¸°å¯Œï¼Œå…¬å¸ä¹Ÿè¦æ±‚ä»£ç å¿…é¡»æäº¤ã€‚ä½†æ˜¯äºŒä½å´æ²¡æœ‰ç”¨å¥½ä»£ç ç®¡ç†å·¥å…·ï¼Œä»Žè€Œå¸¦æ¥äº†ä¸€äº›çƒ¦æ¼ã€‚ æ˜¯çš„ï¼Œç®¡ç†ä»£ç å¾ˆé‡è¦ï¼Œæ— è®ºä½¿ç”¨SVNè¿˜æ˜¯Gitï¼Œè‡³å°‘ä½ è¦ç†Ÿç»ƒæŽŒæ¡å…¶ä¸­ä¸€ä¸ªï¼Œæˆ‘å»ºè®®è¿˜æ˜¯ç›´æŽ¥å­¦ä¹ Gitå§ï¼Œæ¯•ç«ŸçŽ°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ç”¨å®ƒã€‚ åœ¨ Spring Boot ç³»åˆ—çš„æ–‡ç« ä¸­ï¼Œä½¿ç”¨ Github ä½œä¸ºæˆ‘ä»¬çš„ä»£ç ç®¡ç†ä»“åº“ï¼Œä½¿ç”¨Gitå·¥å…·è¿›è¡Œä»£ç çš„æäº¤ã€ä¿®æ”¹ã€åˆå¹¶å’Œåˆ é™¤ä»¥åŠå¯¹åˆ†æ”¯çš„ç®¡ç†å’Œä½¿ç”¨ã€‚ Git æäº¤æŠŠåœ¨ å¾®æœåŠ¡: æƒ³åŠžæ³•è®©é¡¹ç›®è¿è¡Œèµ·æ¥ å†™å¥½çš„ä»£ç æäº¤åˆ°ä»£ç ä»“åº“ä¸­ï¼Œè¿™æ ·å³ä½¿æœ¬åœ°ä»£ç è¢«è¯¯åˆ ä¹Ÿå¯ä»¥ä»Žè¿œç¨‹æ‰¾å›žæ¥ï¼Œå®‰å…¨ã€‚å‡å¦‚ä½ æ›´æ¢ä¸€å°ç”µè„‘è¿›è¡Œç¼–ç¨‹ä¹Ÿå¯ä»¥ä»Žè¿œç¨‹ä»“åº“æ‹‰ä¸‹ä»£ç è¿›è¡Œç¼–ç¨‹ï¼Œéšæ—¶éšåœ°æ’¸ä»£ç ã€‚ æäº¤ä»£ç ï¼Œå¾ˆç®€å•ï¼Œwindowsä¸Šé¢å®‰è£…gitå·¥å…·å³å¯ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ Git GUIï¼Œå®ƒè‡ªå¸¦ Git Bashï¼Œæœ‰ç§Unixç»ˆç«¯çš„é£ŽèŒƒï¼Œè´¼äº²åˆ‡ï¼ æˆ‘æ¯”è¾ƒå–œæ¬¢ä½¿ç”¨å‘½ä»¤è¡Œæ¥è¿›è¡Œæ“ä½œï¼Œæ‰“å¼€å·¥ç¨‹ç›®å½•ï¼Œå¦‚ä¸‹ï¼š ç„¶åŽåœ¨ç©ºç™½åœ°æ–¹å³é”®ï¼Œä¼šæ˜¾ç¤º Git Bashï¼Œé€‰ä»–å°±ä¼šæ‰“å¼€å‘½ä»¤ç»ˆç«¯å·¥å…·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨ç»ˆç«¯æ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š 123456# æ·»åŠ æ‰€æœ‰æ–‡ä»¶git add -A *# æäº¤åˆ°æœ¬åœ°ä»“åº“å¹¶åŠ ä¸Šæ³¨é‡Šgit commit -m "Create a greate project"# æŽ¨é€åˆ°è¿œç¨‹masteråˆ†æ”¯git push origin master å¦‚æžœä½ ä¹‹å‰æ²¡æœ‰è¿›è¡Œä»»ä½•gitæäº¤çš„è¯ï¼Œé¦–æ¬¡æäº¤ä¼šæç¤ºä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæ­¤æ—¶ä½ è¾“å…¥è‡ªå·±çš„githubè´¦å·å’Œå¯†ç å³å¯ã€‚ ä¸‰æ­¥æ“ä½œå®ŒæˆåŽï¼Œå·¥ç¨‹ä¹Ÿå°±æäº¤æˆåŠŸäº†ã€‚ä¸ºäº†éªŒè¯æäº¤æ˜¯å¦æˆåŠŸï¼Œä½ ä¹Ÿå¯ä»¥åˆ°è¿œç¨‹ä»“åº“(ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ä½ çš„ä»“åº“åœ°å€)åˆ·æ–°çœ‹çœ‹æœ‰æ²¡æœ‰åˆšæ‰æäº¤çš„å†…å®¹ï¼Œå¦‚æžœç½‘ç»œä¸å¥½å°±ç­‰ä¼šåœ¨çž…çž…ã€‚ åˆ›å»ºåˆ†æ”¯ä¸ºäº†ä¸å½±å“ä¸»å¹²(master)ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸ªäººåˆ†æ”¯æ¥è¿›è¡Œå¼€å‘ï¼Œä¾‹å¦‚æˆ‘çš„ä¸ªäººåˆ†æ”¯ veryitman-feature åˆ†æ”¯ã€‚ 1git chekcout -b veryitman-feature ä¸Šé¢çš„gitå‘½ä»¤æ„æ€æ˜¯åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªåä¸º veryitman-feature çš„åˆ†æ”¯ã€‚ æ³¨æ„ï¼šgit chekcout -b xxx ç›¸å½“äºŽè¿›è¡Œä¸‹é¢ä¸¤æ­¥æ“ä½œ 123git branch xxxgit checkout xxx ä¸»å¹² master æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œåªæ˜¯å¼€å‘è€…ä¸ºäº†ååŠ©å’Œä»£ç ç®¡ç†æ–¹ä¾¿åˆ›å»ºäº†å„è‡ªçš„åˆ†æ”¯ï¼Œç­‰ä»£ç æµ‹è¯•æˆ–è€…éªŒæ”¶é€šè¿‡å†ä»Žè‡ªå·±çš„åˆ†æ”¯åˆå¹¶ä»£ç åˆ°ä¸»å¹² master ä¸Šé¢ï¼Œæ‰€ä»¥ä¸€èˆ¬ master åˆ†æ”¯ä¸Šé¢çš„ä»£ç éƒ½ä¼šè®¤ä¸ºæ˜¯ç›¸å¯¹ç†æ€§ã€å®‰å…¨çš„ä»£ç ã€‚ åˆ†æ”¯çš„å­˜åœ¨æ˜¯ä¸ºäº†æ–¹ä¾¿ä»£ç çš„ç®¡ç†ï¼Œç±»ä¼¼äºŽSVNçš„trunkã€tagã€branchæ–‡ä»¶å¤¹ç®¡ç†ä»£ç ä¸€æ ·ã€‚ åˆ›å»ºå®ŒæˆåŽï¼Œæäº¤åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“å³å¯ï¼Œç»ˆç«¯æ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š 1git push origin veryitman-feature åŽ»è¿œç¨‹ä»£ç ä»“åº“ä¸­ï¼Œåˆ·æ–°é¡µé¢åŽï¼Œåœ¨Branchå¯ä»¥çœ‹åˆ°åˆšæ‰åˆ›å»ºçš„ veryitman-feature åˆ†æ”¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼è¿›è¡Œåˆ›å»ºå’ŒæŽ¨é€åˆ†æ”¯ä»£ç ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š 123456# åœ¨æœ¬åœ°åˆ›å»ºæ–°çš„veryitman-featureåˆ†æ”¯ git branch veryitman-feature# åˆ‡æ¢åˆ°æ–°çš„veryitman-featureåˆ†æ”¯ git checkout veryitman-feature# å°†æ–°çš„åˆ†æ”¯æŽ¨é€åˆ°ä»“åº“git push origin veryitman-feature åˆ‡æ¢åˆ†æ”¯åœ¨ä¸Šé¢çš„æ“ä½œä¸­ï¼Œå¤§å®¶å·²ç»çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºäº† veryitman-feature åˆ†æ”¯ï¼ŒåŠ ä¸ŠåŽŸæ¥é»˜è®¤çš„ master åˆ†æ”¯ï¼Œä¸€å…±æ˜¯ä¸¤ä¸ªåˆ†æ”¯äº†ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œmaster åˆ†æ”¯ä¸Šé¢çš„ä»£ç åº”è¯¥æ˜¯ç»è¿‡æµ‹è¯•å¹¶ä¸”ç¨³å®šçš„ç‰ˆæœ¬ï¼Œä¿è¯å…¶ç¨³å®šä¸ä¼šå‡ºé”™ã€‚è€Œå…¶ä»–åˆ†æ”¯å¦‚ä¸Šé¢çš„ veryitman-feature æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå¼€å‘çš„ä¸ªäººåˆ†æ”¯ï¼Œä¸ä¿è¯å…¶ç¨³å®šæ€§ï¼ˆå› ä¸ºåœ¨å¼€å‘å˜›ï¼‰ã€‚ç­‰ veryitman-feature å¼€å‘å®Œæˆå†åˆå¹¶åˆ° master åˆ†æ”¯ä¸Šé¢ï¼Œå…³äºŽåˆ†æ”¯çš„åˆå¹¶æ“ä½œï¼ŒåŽç»­å†è¯´å§ï¼ Git æ”¯æŒåœ¨åˆ†æ”¯ä¹‹é—´è‡ªç”±åˆ‡æ¢ï¼Œæ¯”å¦‚ä½ åœ¨ veryitman-feature åˆ†æ”¯ï¼Œæäº¤å®Œæˆä»£ç åŽï¼Œå¯ä»¥åˆ‡æ¢åˆ° master åˆ†æ”¯ã€‚åˆ‡æ¢åˆ†æ”¯çš„å‘½ä»¤å¦‚ä¸‹ï¼š 1git checkout master å¦‚æžœå†æƒ³ä»Ž master åˆ†æ”¯åˆ‡æ¢åˆ° veryitman-feature ä¹Ÿå¯ä»¥ï¼Œå¦‚ä¸‹ï¼š 1git chekcout veryitman-feature åˆ‡æ¢åˆ†æ”¯ä¸€èˆ¬ç”¨åœ¨ä¸‹é¢å‡ ä¸ªåœºæ™¯ä¸­ï¼š åˆå¹¶ä»£ç  å¤šåˆ†æ”¯å¼€å‘ ä¿®å¤é—®é¢˜ åˆ é™¤åˆ†æ”¯Git æä¾›äº†å¯ä»¥åˆ é™¤åˆ†æ”¯çš„æ–¹æ³•å’Œå‘½ä»¤ã€‚ åˆ é™¤åˆ†æ”¯åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ä¸ªæ˜¯ä»…ä»…åˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼Œå¦ä¸€ä¸ªæ˜¯åˆ é™¤è¿œç¨‹åˆ†æ”¯ã€‚ åˆ é™¤æœ¬åœ°åˆ†æ”¯æ„æ€æ˜¯åˆ é™¤å·²ç»å­˜å‚¨åœ¨ä½ æœ¬åœ°è®¡ç®—æœºä¸Šé¢çš„æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 12# åœ¨æœ¬åœ°åˆ é™¤veryitman-featureåˆ†æ”¯git branch -d veryitman-feature åˆ é™¤è¿œç¨‹åˆ†æ”¯æ„æ€æ˜¯åˆ é™¤å­˜åœ¨ GitHub ä¸Šé¢çš„ä»£ç æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 12# åœ¨githubè¿œç¨‹ç«¯åˆ é™¤veryitman-featureåˆ†æ”¯git push origin --delete veryitman-feature å…³äºŽGitçš„ä½¿ç”¨è¿˜æœ‰å¾ˆå¤šï¼Œä»Šå¤©å…ˆè¯´è¿™ä¹ˆå¤šï¼Œç”¨åˆ°çš„æ—¶å€™å†è¡¥å……ã€‚çŽ°åœ¨æœ€é‡è¦çš„æ˜¯éœ€è¦ä½ åŽ»æ³¨å†Œä¸€ä¸ª Github è´¦å·æŠ˜è…¾èµ·æ¥ï¼Œç†Ÿèƒ½ç”Ÿå·§ï¼ŒåŠ¨æ‰‹å®žè·µæ‰æ˜¯çŽ‹é“ï¼ æ”¹å˜ï¼Œä»Žä½ æˆ‘ç›¸è¯†å¼€å§‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot SpringCloud å¾®æœåŠ¡ Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è°ƒä¾ƒCä¸­çš„define]]></title>
    <url>%2F2019%2F06%2F08%2F%E8%B0%83%E4%BE%83C%E4%B8%AD%E7%9A%84define%2F</url>
    <content type="text"><![CDATA[äºŒç‹—å­äºŒç‹—å­è¿™ä¸ªåå­—ï¼Œåœ¨å¤§è¡—å°å··ï¼Œåœ¨ç”µè§†å‰§ä¸­å‡ ä¹Žéƒ½èƒ½å¬åˆ°ã€‚æˆ‘ä¹Ÿä¸çŸ¥é“è€ä¸€è¾ˆçš„çˆ¶æ¯ä¸ºä»€ä¹ˆè¿™ä¹ˆå–œæ¬¢ç»™è‡ªå·±çš„å­©å­å–è¿™æ ·çš„åå­—ï¼Œå”¯ä¸€èƒ½è®©æˆ‘ä¿¡æœçš„ç†ç”±æ˜¯ï¼šé¡ºå£ï¼å¤§å”å¤§ä¼¯ä»¬ä¹‹æ‰€ä»¥å«è¿™ä¸ªåå­—è¿˜æœ‰ä¸€ä¸ªç†ç”±ï¼Œä¹‹å‰å­©å­å¤šï¼Œå¸Œæœ›å­©å­åƒå°ç‹—å„¿ä¸€æ ·å¥½å–‚å…»ã€‚ æ­£å¥½æˆ‘ä»¬æ‘æœ‰ä¸ªå­©å­ä¹Ÿå«äºŒç‹—å­ï¼Œå¤§åå«å¼ åŠ›ä¸‡ï¼Œæ— è®ºæ˜¯å«äºŒç‹—å­è¿˜æ˜¯å«å¼ åŠ›ä¸‡ï¼Œéƒ½æŒ‡çš„æ˜¯åŒä¸€ä¸ªäººã€‚æˆ‘ä»¬å¤§å¤šæ•°æƒ…å†µä¸‹è¿˜æ˜¯å«ä»–äºŒç‹—å­ï¼Œä»–ä¹Ÿä¹ æƒ¯äº†å€’ä¹Ÿè§‰å¾—äº²åˆ‡ï¼Œå«å¼ åŠ›ä¸‡ä¸€èˆ¬éƒ½æ˜¯åœ¨æ­£å¼åœºåˆã€‚ æœ‰äº›ä¼ä¸šæ–‡åŒ–ä¸­è§„å®šï¼šâ€œä¸å…è®¸åœ¨å…¬å¸ç›´æŽ¥å–ŠåŒäº‹çš„åå­—ï¼Œæ¯ä¸ªäººå¿…é¡»æœ‰ä¸ªè‹±æ–‡åâ€ã€‚æ¯”å¦‚äºŒç‹—å­å…¥èŒåˆ°è¿™æ ·çš„ä¼ä¸šï¼Œå¤§å®¶ä¸å…è®¸å–Šä»–äºŒç‹—å­æˆ–è€…å¼ åŠ›ä¸‡ï¼ŒäºŽæ˜¯äºŒç‹—å­åˆæœ‰äº†ä¸€ä¸ªè‹±æ–‡åï¼šâ€œJackâ€ï¼Œä½ çœ‹ â€œJackâ€ è¿™ä¸ªåå­—æ—¢ç¬¦åˆä¼ä¸šæ–‡åŒ–åˆå¬èµ·æ¥é«˜å¤§å°šã€‚ æ— è®ºæ˜¯ â€œäºŒç‹—å­â€œ è¿˜æ˜¯ â€œJackâ€œ éƒ½æ˜¯å¼ åŠ›ä¸‡çš„åˆ«åã€‚ åœ¨ C è¯­è¨€ä¸­ï¼Œå…³é”®å­— define å’Œ typedef å°±å¯ä»¥ç”¨æ¥å–åˆ«åï¼Œä½†æ˜¯äºŒè€…åˆæœ‰ä¸åŒç‚¹ï¼Œä»Šå¤©ä¸»è¦åˆ†äº«ä¸€ä¸‹ define çš„ç”¨æ³•ã€‚ ä¸‹é¢æ˜¯ä½¿ç”¨ define æ¥æ¨¡æ‹Ÿåˆ«åï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011#define Zhangliwan1 "äºŒç‹—å­"#define Zhangliwan2 "Jack"#define Zhangliwan "å¼ åŠ›ä¸‡"int main(int argc, const char *argv[])&#123; printf("æˆ‘ä»¬æ‘çš„%så¯ä»¥å«ä»–%sä¹Ÿå¯ä»¥å«ä»–%s\n", Zhangliwan, Zhangliwan1, Zhangliwan2); return 0;&#125; è¾“å‡ºç»“æžœï¼š 1æˆ‘ä»¬æ‘çš„å¼ åŠ›ä¸‡å¯ä»¥å«ä»–äºŒç‹—å­ä¹Ÿå¯ä»¥å«ä»–Jack è™šæž„ä¸€ä¸‹ä¸¹å°¼æ–¯Â·é‡Œå¥‡ ä¸€ä¸ªä¼Ÿå¤§è€Œä½Žè°ƒçš„ç‰›äººï¼Œæ˜¯Unixä¹‹çˆ¶ã€Cè¯­è¨€ä¹‹çˆ¶ã€‚ ä¸¹å°¼æ–¯Â·é‡Œå¥‡è¿˜å°†Unixçš„è®¾è®¡åŽŸåˆ™å®šä¸º KISS åŽŸåˆ™ å³ Keep it simple stupidï¼Œä¿æŒç®€å•å’Œç›´æŽ¥ï¼Œæ‰€ä»¥Unixä¸€ç›´éƒ½æ˜¯ç»å…¸ä¸­çš„ç»å…¸ã€‚è¿™ä¹Ÿè¯´æ˜Žä¸¹å°¼æ–¯Â·é‡Œå¥‡ä¸ä»…æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯ä¸€ä¸ªä¼˜ç§€çš„äº§å“ç»ç†ã€‚ æˆ‘åœ¨æƒ³ï¼Œå½“åˆä¸¹å°¼æ–¯Â·é‡Œå¥‡å’Œè‚¯Â·æ±¤æ™®é€Šåœ¨å®žéªŒå®¤é‡Œæ²¡äº‹ä¹Ÿä¼šè®¨è®ºCè¯­è¨€çš„äº‹æƒ…ã€‚ ä¸¹å°¼æ–¯Â·é‡Œå¥‡ï¼šâ€œè€å…„ï¼Œä½ çœ‹æˆ‘ä»¬çŽ°åœ¨çš„è¯­è¨€æ˜¯ä¸æ˜¯è¿‡äºŽå¤æ‚äº†ï¼Ÿâ€ è‚¯Â·æ±¤æ™®é€Šï¼šâ€œçš„ç¡®æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘æœ‰ä¸ªå¤§èƒ†çš„æƒ³æ³•ï¼Œä¸çŸ¥å½“è®²ä¸å½“è®²ï¼Ÿâ€ ä¸¹å°¼æ–¯Â·é‡Œå¥‡ï¼šâ€œä½ è¿˜è·Ÿæˆ‘å¢¨è¿¹å•¥ï¼Œæœ‰è¯ç›´æŽ¥è¯´å‘—ï¼Œå‘µå‘µï¼â€ è‚¯Â·æ±¤æ™®é€Šï¼šâ€œå—¯ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œä»–è¦è¶³å¤Ÿçš„ç®€å•ã€é«˜æ•ˆã€‚â€ ä¸¹å°¼æ–¯Â·é‡Œå¥‡ï¼šâ€œæƒ³æ³•æ˜¯æŒºå¥½çš„ï¼Œé‚£å°±å¼€å¹²å§ï¼â€ äºŽæ˜¯Cè¯­è¨€è¯žç”Ÿäº†ã€‚ è‚¯Â·æ±¤æ™®é€Šï¼šâ€œä½ æœ‰æ²¡æœ‰è§‰å¾—æˆ‘ä»¬åœ¨å®šä¹‰å¸¸é‡çš„æ—¶å€™ä¸å¤ªæ–¹ä¾¿ï¼Ÿâ€ ä¸¹å°¼æ–¯Â·é‡Œå¥‡ï¼šâ€œæ˜¯å‘€ï¼Œè¿™æ ·ä½ çœ‹è¡Œä¸è¡Œï¼Œå¼„ä¸ªé¢„å¤„ç†å™¨å¯ä»¥è®©æˆ‘ä»¬ä»»æ„å®šä¹‰å¸¸é‡ï¼Œæš‚æ—¶ç§°ä»–ä¸º â€˜å®â€™ å§ï¼â€ è‚¯Â·æ±¤æ™®é€Šï¼šâ€œæˆ‘è§‰å¾—å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œæ¥ï¼Œå¾’æ‰‹å†™ä¸€ä¸ªã€‚â€ ä¸¹å°¼æ–¯Â·é‡Œå¥‡ï¼šâ€œå“ˆå“ˆï¼Œç»™åŠ›ï¼â€ äºŽæ˜¯ define å°±æœ‰äº†ã€‚ ä»¥ä¸Šçº¯å±žä¸ªäººçŒœæƒ³ï¼Œå¹¶ä¸æ˜¯å†’çŠ¯ä¸¤ä½å¤§å¸ˆï¼Œæœ¬æ•…äº‹çº¯å±žè™šæž„ï¼Œå¦‚æœ‰é›·åŒï¼Œçº¯å±žå·§åˆã€‚Unixå’ŒCè¯­è¨€çš„å¤§é“è‡³ç®€ï¼Œå¯¹åŽä»£ç§‘å­¦çš„å‘å±•å¥ å®šäº†ä¸å¯ç£¨ç­çš„è´¡çŒ®å’Œå½±å“ã€‚ åŸºæœ¬ç”¨æ³•å…³é”®å­— define æ˜¯ C è¯­è¨€ä¸­çš„é¢„å¤„ç†å‘½ä»¤ï¼Œå®ƒç”¨äºŽå®å®šä¹‰ï¼Œåœ¨å¤§å¤šæ•°å®šä¹‰ä¸‹å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œä¸ºç¼–ç¨‹æä¾›æ–¹ä¾¿ã€‚ åœ¨ C è¯­è¨€ä¸­é¢„å¤„ç†å‘½ä»¤ä»¥ â€œ#â€ å·å¼€å¤´ï¼Œå¦‚ #includeã€#ifdefã€#endif å’Œå®å®šä¹‰å‘½ä»¤ #define ç­‰ã€‚ å…³é”®å­— define çš„ç”¨æ³•å¦‚ä¸‹ï¼š 1#define æ–°ç±»åž‹å åŽŸç±»åž‹å 12345678#define INTEGER intINTEGER a = 100;#define PI 3.1415927#define UserName "user_name"#define MAX(x, y) (x)&gt;(y)?(x):(y); åœ¨ C è¯­è¨€ä¸­ï¼Œå…³é”®å­— define çš„å®šä¹‰çš„å¸¸é‡éƒ½ä¼šåœ¨é¢„å¤„ç†é˜¶æ®µå°†ç”¨åˆ°çš„åˆ«åç›´æŽ¥è¢«åŽŸæ ·æ›¿æ¢æŽ‰ã€‚ä¾‹å¦‚åœ¨ç¼–å†™æºç¨‹åºæ—¶ï¼Œæ‰€æœ‰ç”¨åˆ° 3.1415927 çš„åœ°æ–¹éƒ½å¯ç”¨ PI ä»£æ›¿ï¼Œè€Œç¼–è¯‘æ—¶ï¼Œå°†å…ˆç”±é¢„å¤„ç†ç¨‹åºè¿›è¡Œå®ä»£æ¢å³ç”¨ 3.1415927 åŽ»ç½®æ¢æ‰€æœ‰çš„å®å PIï¼Œç„¶åŽå†è¿›è¡Œç¼–è¯‘ã€‚ å…³é”®å­— define è¿˜å¯ä»¥ç»“åˆ â€œ#â€ã€â€œ##â€ã€â€œ#@â€ ä½¿ç”¨ã€‚ ç¬¦å· â€œ#â€ï¼Œè¡¨ç¤ºå°†å…¶å­—ç¬¦ä¸²åŒ–ã€‚ ç¬¦å· â€œ##â€ï¼Œè¡¨ç¤ºè¿žæŽ¥å˜é‡ã€‚ ç¬¦å· â€œ#@â€ï¼Œè¡¨ç¤ºå°†å…¶å­—ç¬¦åŒ–ã€‚ 12345678#define M(x) x##x#define L(x) #xint main(int argc, const char *argv[])&#123; // M(1): 11, L(1): "1" printf("M(1): %i, L(1): %s\n", M(1), L(1));&#125; æˆ‘ä½¿ç”¨ â€œ#@â€ å®šä¹‰ï¼Œæ— è®ºæ˜¯GCCç¼–è¯‘å™¨è¿˜æ˜¯Clangç¼–è¯‘å™¨éƒ½æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œé”™è¯¯ä¿¡æ¯ï¼šâ€œ â€˜#â€™ is not followed by a macro parameter â€ï¼Œä½†æ˜¯åœ¨ Visual Studio ä¸­ç¼–è¯‘å°±æ²¡æœ‰é—®é¢˜ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1#define K(x) #@x å…³é”®å­— define ç»™æˆ‘ä»¬å†™ä»£ç å¸¦æ¥äº†ä¸€å®šçš„ä¾¿åˆ©ï¼Œä½†æ˜¯å¦‚æžœè¿‡å¤šçš„ä¹±ç”¨å®ƒä¹Ÿä¼šä»£ç ä¸å°çš„éº»çƒ¦ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 12345678910#define square(x) x*xint main()&#123; int i; i = 64/square(4); printf("i = %d\n", i); return 0;&#125; å®šä¹‰å® square(x) æœ¬æ¥æ˜¯æ±‚æŸä¸ªæ•°çš„å¹³æ–¹ï¼ŒæŒ‰ç†è¯´ 64/16 ç»“æžœåº”è¯¥æ˜¯ 4ï¼Œä½†æ˜¯è¿è¡Œç¨‹åºä½ ä¼šå‘çŽ°ç»“æžœæ˜¯ 64. æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¾‹å­å±•å¼€ï¼Œå› ä¸º define æ˜¯ç›´æŽ¥åŽŸæ ·æ›¿æ¢ï¼Œå¦‚ä¸‹ï¼š 123i = 64/4*4;i = 16*4;i = 64; ä¿®æ”¹ä¸€ä¸‹ç¨‹åºä¸­ define çš„å®šä¹‰ï¼Œç»“æžœå°±å¯¹äº†ã€‚ 1234567891011#define square(x) (x*x)int main()&#123; int i; i = 64/square(4); // 4 printf("i = %d\n", i); return 0;&#125; å…¶å®žæœ€å®‰å…¨çš„åšæ³•æ˜¯è¿™æ ·å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š 1234#define square(x) (&#123; \typeof(x) y = (x); \y*y; \&#125;) ä½œç”¨åŸŸå¯ä»¥åœ¨Cæ–‡ä»¶çš„å¼€å¤´ï¼Œä¹Ÿå¯ä»¥åœ¨æ–¹æ³•ä½“é‡Œé¢ï¼Œè¿˜å¯ä»¥åœ¨æ–¹æ³•çš„å£°æ˜Žå‰éƒ½å¯ä»¥ä½¿ç”¨ define å…³é”®å­—ã€‚ å®šä¹‰åœ¨æ–‡ä»¶å¼€å¤´ï¼š 1234567#define NAME "name"int main()&#123; printf("Define NAME: %s\n", NAME); return 0;&#125; å®šä¹‰åœ¨æ–¹æ³•ä¸­ï¼š 12345void play()&#123; #define NAME "name" printf("Define NAME: %s\n", NAME);&#125; è¿™é‡Œè¦æ³¨æ„ï¼Œå®šä¹‰åœ¨æ–¹æ³•ä¸­ï¼Œå¹¶ä¸æ˜¯æŒ‡è¯¥å®å®šä¹‰ NAME åªèƒ½ç”¨åœ¨è¯¥æ–¹æ³•é‡Œé¢ï¼Œå…¶ä»–åœ°æ–¹ç…§æ ·å¯ä»¥ä½¿ç”¨ã€‚ 1234567891011void play()&#123; #define NAME "name" printf("Define NAME: %s\n", NAME);&#125;/* æ³¨æ„ï¼šè¯¥æ–¹æ³•ä¸€å®šæ˜¯åœ¨defineå®šä¹‰ä¹‹åŽæ‰èƒ½ä½¿ç”¨NAME */void eat()&#123; printf("Define NAME: %s\n", NAME);&#125; æ¡ä»¶ç¼–è¯‘åœ¨Cè¯­è¨€ä¸­æˆ–è€…åœ¨ç±»Cè¯­è¨€ä¸­å¦‚Objective-Cå’ŒC++ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°æ¡ä»¶ç¼–è¯‘è¯­å¥ï¼Œå¦‚ä¸‹ï¼š 12345#ifdef NAME#else#endif å¤§å®¶åœ¨åšä¸€äº›è·¨å¹³å°å¼€å‘å·¥ä½œçš„æ—¶å€™ï¼Œä¹Ÿä¼šç”¨åˆ°æ¡ä»¶ç¼–è¯‘è¯­å¥ã€‚ 12345#ifdef ANDROID#define PLAYFORM 1#else#define PLAYFORM 2#endif è¿˜æœ‰å°±æ˜¯ç±»ä¼¼é˜²æ­¢é‡å¤åŒ…å«ï¼ˆé‡å¤å®šä¹‰ï¼‰å¤´æ–‡ä»¶ï¼Œä¹Ÿä¼šç”¨åˆ°æ¡ä»¶ç¼–è¯‘ï¼Œå¦‚ä¸‹ï¼š 123#ifndef __Header_Person_H__#define __Header_Person_H__#endif ä¸‹é¢æ˜¯æ¥è‡ªLinux Kernelé‡Œé¢çš„ä»£ç ç‰‡æ®µï¼š 1234567#if defined(CONFIG_ALPHA_GENERIC)#define GAMMA_BIAS alpha_mv.sys.t2.gamma_bias#elif defined(CONFIG_ALPHA_GAMMA)#define GAMMA_BIAS _GAMMA_BIAS#else#define GAMMA_BIAS 0#endif æ—¢ç„¶æˆ‘ä»¬å¯ä»¥å®šä¹‰å®ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥å–æ¶ˆå®å®šä¹‰å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å½“ç„¶å¯ä»¥ã€‚ 12345678910111213141516void play()&#123; #define NAME "name" printf("Define NAME: %s\n", NAME);&#125;#ifdef NAME// å–æ¶ˆå®å®šä¹‰#undef NAME#endifvoid eat()&#123; // Compile errror: Use of undeclared identifier 'NAME' printf("Define NAME: %s\n", NAME);&#125; è¿™ä»½ GNU Macors åœ¨çº¿æ–‡æ¡£ä»‹ç»äº†å¾ˆå¤šå…³äºŽå®å®šä¹‰çš„çŸ¥è¯†ï¼Œå¯ä»¥ç‚¹å‡»å‰å¾€å­¦ä¹ ã€‚ æ—¶é—´å¯ä»¥æ”¹å˜ä¸€åˆ‡ï¼Œä½†ä½ å¾—åšç‚¹ä»€ä¹ˆï¼]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>define typedef</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›žå¿†é«˜è€ƒ]]></title>
    <url>%2F2019%2F06%2F07%2F%E5%9B%9E%E5%BF%86%E9%AB%98%E8%80%83%2F</url>
    <content type="text"><![CDATA[æ¥”å­è½¬çœ¼é—´ï¼Œæˆ‘äººç”Ÿä¸­çš„é«˜è€ƒè·ä»Šå·²åå‡ å¹´æœ‰ä½™äº†ï¼Œé‚£æ—¶å€™æ„æ°”é£Žå‘ï¼Œè¸Œèº‡æ»¡å¿—ï¼Œéšæ—¶è¿ŽæŽ¥é«˜è€ƒçš„çµé­‚æ‹·é—®ã€‚å¹¸è¿çš„æ˜¯è‡ªå·±è·Œè·Œæ’žæ’žçš„è€ƒä¸Šäº†å¤§å­¦ï¼Œé˜´å·®é˜³é”™çš„å˜æˆäº†ä¸€åç¨‹åºçŒ¿ã€‚ ä»Šå¤©æ˜¯2019å¹´é«˜è€ƒçš„ç¬¬ä¸€å¤©ï¼Œä½œä¸ºä¸€å â€œèµ„æ·±â€ çš„ç¨‹åºçŒ¿æˆ‘è¿˜æ˜¯æƒ³ç”¨ç¼–ç¨‹çš„æ–¹å¼æ¥è®°å½•è¿™ä¸€å¤©ï¼Œç®—æ˜¯å¯¹å­¦å­ä»¬çš„ç¥ç¦å’Œå¯¹è‡ªå·±çš„é«˜ä¸­ç”Ÿæ´»çš„ä¸€ç‚¹å›žå¿†å§ã€‚ ç¥æ‰€æœ‰é«˜è€ƒä¸­çš„å­¦è€…ä»¬éƒ½èƒ½å¦‚æ„¿ä»¥å¿çš„è€ƒä¸Šè‡ªå·±å¿ƒä¸­çš„é‚£æ‰€å¤§å­¦ï¼Œä½ ä»¬çš„äººç”Ÿå³å°†è¾‰ç…Œï¼ŒåŠ æ²¹ï¼ ä¸æœŸè€Œé‡åœ¨æˆ‘ä»¬é‚£ä¸ªå¹´ä»£ç‰¹åˆ«æ˜¯åœ¨æˆ‘ä»¬è€å®¶äººå¤šä¸”ç©·ï¼Œè°èƒ½ä¸Šå¤§å­¦ç®€ç›´å°±æ˜¯ â€œå…‰å®—è€€ç¥–â€ çš„äº‹æƒ…ï¼Œç„¶è€Œå¾ˆå¤šäººå¯¹å­¦ä¹ çš„æ¬²æœ›å¹¶ä¸å¼ºï¼Œä»–ä»¬å¤§éƒ¨åˆ†éƒ½å‘å¾€ç€å¤–é¢çš„ä¸–ç•Œã€‚å…¶å®žï¼Œæˆ‘ä¹Ÿå¾ˆæ¸´æœ›å¤–é¢çš„ä¸–ç•Œï¼Œæœ‰è¿‡é€ƒç¦»é‚£ç§åŽ‹æŠ‘çš„é«˜ä¸­ç”Ÿæ´»çš„æƒ³æ³•ã€‚ä½†æ˜¯å›žè¿‡å¤´ä»”ç»†æƒ³æƒ³å‡ºåŽ»åŽçŽ¯å¢ƒéš¾é“å°±æ²¡æœ‰éšœç¢å—ï¼Ÿç”Ÿæ´»å°±èƒ½å¦‚æ—¥ä¸­å¤©å—ï¼Ÿä¸å¯èƒ½çš„ï¼Œå°¤å…¶æ˜¯å¯¹å†œæ‘å‡ºæ¥çš„å­©å­æ¥è¯´æ²¡æœ‰å­¦åŽ†æƒ³åœ¨å¤§åŸŽå¸‚ä¸­å¥½å¥½çš„æ´»ä¸‹åŽ»çŠ¹å¦‚å¤©æ–¹å¤œè°­ã€‚å‡ºæ¥å·¥ä½œè¿™ä¹ˆå¤šå¹´ï¼Œç”Ÿæ´»çš„è‰°è¾›å°è¯äº†æˆ‘å½“åˆçš„æƒ³æ³•ã€‚ å‡¡äº‹ä¸å¿˜åˆå¿ƒï¼Œæ¯å½“ä½ æƒ³æ”¾å¼ƒçš„æ—¶å€™å°±å¥½å¥½æƒ³æƒ³å½“åˆè‡ªå·±ä¸ºä»€ä¹ˆè¿™ä¹ˆåšã€‚ æˆ‘è®°å¾—é«˜è€ƒç»“æŸçš„é‚£å¤©ä¸‹åˆï¼Œçˆ¶æ¯ä¸€èµ·æ¥å­¦æ ¡å‡†å¤‡æŽ¥æˆ‘å›žå®¶ï¼Œè¿™æ˜¯ä¸Šé«˜ä¸­ä¸‰å¹´ä»¥æ¥ç¬¬ä¸€æ¬¡çˆ¶æ¯ä¸€èµ·æ¥å­¦æ ¡ã€‚æˆ‘çŸ¥é“çˆ¶æ¯æ˜¯æ‹…å¿ƒæˆ‘ï¼Œä»–ä»¬æ²¡æœ‰é—®æˆ‘è€ƒçš„æ€Žä¹ˆæ ·ï¼Œè®©æˆ‘æŠŠè¢«å­æ”¶æ‹¾ä¸€ä¸‹è·Ÿä»–ä»¬å›žå®¶ã€‚æˆ‘æ€•ä»–ä»¬æ‹…å¿ƒå°±å‘Šè¯‰ä»–ä»¬ï¼šâ€œåˆ«æ‹…å¿ƒï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±è€ƒçš„è¿˜å¯ä»¥â€ï¼Œæˆ‘æ°¸è¿œå¿˜ä¸äº†çˆ¶æ¯é‚£ä¸€åˆ»å±•éœ²å‡ºçš„æ¬£æ…°çš„ç¬‘å®¹ã€‚ é«˜è€ƒç»“æŸçš„é‚£ä¸€å¤œæˆ‘æ²¡æœ‰å’Œçˆ¶æ¯ä¸€èµ·å›žå®¶ï¼Œè€Œæ˜¯è·ŸåŒå­¦ä»¬åœ¨ç½‘å§å®ˆäº†ä¸€å¤œç­‰ç€é«˜è€ƒè¯•é¢˜çš„ç­”æ¡ˆå‡ºæ¥ï¼Œæƒ³ç»™è‡ªå·±å’Œçˆ¶æ¯ä¸€ä¸ªäº¤ä»£ï¼Œé‚£ä¸ªæ™šä¸Šé™ªå—ç…Žç†¬ã€‚ è¿™æ˜¯æˆ‘äººç”Ÿä¸­ç¬¬ä¸€æ¬¡çœŸæ­£çš„æŽ¥è§¦ç”µè„‘ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ„Ÿè§‰åˆ°è¦ä¸Šå¤§å­¦çš„å–œæ‚¦ã€‚ åŸºç¡€å¾ˆé‡è¦å¤§å®¶åº”è¯¥å¬è¯´è¿‡è¿™æ ·çš„è¯é¢˜ï¼šâ€œå…„å¼Ÿï¼ŒæŠŠæ•°å­¦å­¦é‚£ä¹ˆå¥½å¹²ä»€ä¹ˆï¼Œä½ ä¸Šè¡—ä¹°èœä¼šç”¨å¯¹æ•°(log)è·Ÿå¤§å¦ˆç®—è´¦å—ï¼Œä¹°é¸¡è›‹éœ€è¦å¼€æ ¹å·å—ï¼Ÿâ€ã€‚ å¬ä¸ŠåŽ»å¥½åƒå¾ˆæœ‰é“ç†çš„æ ·å­ï¼Œä½†æ˜¯è¿™é‡Œä¸å®Œå…¨åˆç†ã€‚ é¦–å…ˆï¼Œè¯´è¯è€…æ˜¯æŠ±ç€ä¸€ç§å«‰å¦’çš„å¿ƒæ€è€Œä¸æ˜¯å­¦ä¹ çš„å¿ƒæ€ï¼Œå¾ˆæ¶ˆæžçš„ä¸€ç§è¯´æ³•ã€‚ å…¶æ¬¡ï¼Œè¯´è¯è€…æŠŠæ•°å­¦çŸ¥è¯†çš„ä½¿ç”¨çš„èŒƒç•´å»ºç«‹åœ¨ä¹°èœä¹°é¸¡è›‹çš„åŸºç¡€ä¸Šäº†ï¼Œå‡å¦‚ä½ è¦æžç®—æ³•æ‰Žå®žçš„æ•°å­¦åŸºç¡€å’Œæ€ç»´å¿…é¡»è¦å…·å¤‡ï¼Œå¦åˆ™å¯¸æ­¥éš¾è¡Œï¼Œéšç€æœºå™¨å­¦ä¹ ã€AI å’Œå¤§æ•°æ®åˆ†æžçš„å‘å±•ï¼Œæ•°å­¦çŸ¥è¯†æˆä¸ºäº†ä¸€ä¸ªå¿…å¤‡å­¦ç§‘ã€‚ å†è€…ï¼Œéšç€æ—¶ä»£å’Œç§‘æŠ€çš„å‘å±•ï¼Œè¯´ä¸å®šå–èœçš„å¤§çˆ·å¤§å¦ˆä»¬ç”¨çš„æ•°å­¦çŸ¥è¯†è®©ä½ åº”æŽ¥ä¸æš‡ã€‚ æ‰€ä»¥ï¼Œå¥½å¥½å­¦ä¹ å¹¶æ²¡æœ‰é”™ã€‚åŸºæœ¬å­¦ç§‘èƒ½è®©ä½ æ‰Žå®žè‡ªå·±çš„åŸºç¡€ï¼Œæ‹“å±•è‡ªå·±çš„æ€ç»´ã€‚ å­¦ç‚¹ç¼–ç¨‹å‡ å¹´å‰å›½å¤–ã€å›½å†…çš„å¾ˆå¤šäººéƒ½åœ¨è¯´ï¼šâ€œä»¥åŽç¼–ç¨‹æ˜¯äººäººéƒ½åº”è¯¥å…·å¤‡çš„åŸºæœ¬æŠ€èƒ½ï¼Œå°±åƒä¼šéª‘è½¦å­ä¸€æ ·é‚£ä¹ˆç®€å•ï¼â€ã€‚ å¯¹äºŽè¿™ä¸ª â€œä»¥åŽâ€ è°ä¹Ÿæ²¡æœ‰ç»™å‡ºå…·ä½“æœŸé™ï¼Œå°±å¥½æ¯”æˆ‘å°æ—¶å€™ç¾¡æ…•åˆ«äººå®¶æœ‰å½©è‰²ç”µè§†ä¸€æ ·ï¼Œæ²¡æƒ³åˆ°è¿‡äº†å‡ å¹´è¿™ä¸ªä¸œè¥¿å±…ç„¶ä¹Ÿå‡ºçŽ°åœ¨äº†è‡ªå·±çš„å®¶ä¸­ï¼Œå¦‚èŽ·è‡³å®ï¼Œæ¬£å–œè‹¥ç‹‚ã€‚ çŽ°åœ¨å¾ˆå¤šæ•™è‚²æœºæž„å·²ç»æä¾›äº†é’ˆå¯¹å„¿ç«¥ç¼–ç¨‹çš„è¯¾ç¨‹ï¼Œå¤§å¤šæ˜¯å¯è§†åŒ–ç¼–ç¨‹ã€‚æœ‰å­©å­çš„å®¶é•¿ä»¬ä¹Ÿè®¸éƒ½å‘çŽ°äº†çŽ°åœ¨çš„å­©å­æŽ¥å—é¢å’ŒæŽ¥å—èƒ½åŠ›éƒ½è¿œè¶…æˆ‘ä»¬é‚£ä»£äººï¼Œè¿™è·Ÿç¤¾ä¼šçŽ¯å¢ƒã€å®¶åº­çŽ¯å¢ƒå’Œè¥å…»é¥®é£Ÿéƒ½æœ‰ä¸€å®šçš„å…³ç³»ï¼Œå†åŠ ä¸Šå…´è¶£ç­çš„å‚¬åŒ–è®©çŽ°åœ¨å¤§å¤šæ•°å­©å­å˜å¾—æœ‰ç‚¹ â€œé¬¼æœºçµâ€ã€‚æ¯”å¦‚ä½ çš„ç”µè„‘èŽ«åå…¶å¦™çš„è¢«æ‰“å¼€å¹¶ä¸”è¿˜èƒ½è‡ªåŠ¨è¢«æ’­æ”¾åŠ¨ç”»ç‰‡ï¼Œè¿˜æœ‰ä½ æ˜Žæ˜Žè®¾ç½®çš„ iPad å¯†ç å¾ˆå¤æ‚ç«Ÿç„¶ä¹Ÿèƒ½è®©ä»–ä»¬ç»™ â€œç ´è§£â€ï¼Œæœ€æ°”æ„¤çš„æ˜¯ä»–å±…ç„¶å¯ä»¥è¶ä½ ä¸æ³¨æ„ç”¨ä½ çš„é›¶é’±ç»™å¯¹æ–¹å‘äº†çº¢åŒ…~ å¦‚æžœæœ‰æ¡ä»¶çš„è¯ï¼Œå®¶é•¿ä»¬å¯ä»¥å­©å­æŽ¥è§¦ç¼–ç¨‹çŸ¥è¯†ï¼ŒåŸ¹å…»ä»–ä»¬æ€è€ƒé—®é¢˜çš„ä¹ æƒ¯ã€‚åŸ¹å…»å­¦ä¹ ç¼–ç¨‹çŸ¥è¯†ï¼Œä¸ä¸€å®šéžè¦ä¹°ä¸ªé«˜ç«¯çš„ PC æˆ–è€…æ˜‚è´µçš„ iPadï¼Œå¯ä»¥ä»Žæ­ç§¯æœ¨å’Œä¸€äº›ç®€å•çš„æ•°å­¦çŸ¥è¯†å¼€å§‹ï¼Œä¹Ÿå¯ä»¥è®©ä»–å‚åŠ ä¸€äº›ä¾‹å¦‚æœºå™¨äººè¯¾çš„å…´è¶£ç­ï¼Œå‚è§‚å‚è§‚ç§‘æŠ€åšç‰©é¦†ä¹‹ç±»çš„ã€‚ é«˜è€ƒçš„å­¦å­ä»¬ï¼Œæ— è®ºé«˜è€ƒç»“æžœå¦‚ä½•ï¼Œä¸è¦åˆ»æ„çš„åŽ»å¼ºè¿«è‡ªå·±ï¼Œå› ä¸ºäººç”Ÿçš„è·¯è¿˜æœ‰å¾ˆé•¿ï¼ŒåŠæ—¶çš„è°ƒæ•´å¿ƒæ€åŽé¢æ¯”é«˜è€ƒæ›´éš¾çš„ â€è€ƒè¯•è¯•é¢˜â€œ è¿˜ç­‰ç€ä½ ä»¬å‘¢ï¼ é«˜è€ƒç»“æŸäº†ï¼Œå¦‚æžœä½ æ˜¯ç†ç§‘çš„å­¦ç”Ÿå»ºè®®å¤§å®¶å¯ä»¥åŽ»çœ‹çœ‹ç¼–ç¨‹æ–¹é¢çš„çŸ¥è¯†ï¼Œæ‡‚ç‚¹ç¼–ç¨‹çš„çŸ¥è¯†å¯¹ä½ ä»¥åŽçš„å·¥ä½œè¿˜æ˜¯å¾ˆæœ‰å¥½å¤„çš„ã€‚æŠŠç¼–ç¨‹å½“åšä¸€ç§ä¹è¶£è€Œä¸æ˜¯å·¥ä½œï¼Œè¿™æ ·æ‰æœ‰å¯èƒ½åˆ›é€ æ— é™çš„å¯èƒ½ã€‚ ç¥å¤§å®¶é‡‘æ¦œé¢˜åï¼Œç«¯åˆå®‰åº·ï¼ æ—¶é—´å¯ä»¥æ”¹å˜ä¸€åˆ‡ï¼Œä½†ä½ å¾—åšç‚¹ä»€ä¹ˆï¼]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>é«˜è€ƒ ç«¯åˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: æƒ³åŠžæ³•è®©é¡¹ç›®è¿è¡Œèµ·æ¥]]></title>
    <url>%2F2019%2F06%2F02%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E6%83%B3%E5%8A%9E%E6%B3%95%E8%AE%A9%E9%A1%B9%E7%9B%AE%E8%BF%90%E8%A1%8C%E8%B5%B7%E6%9D%A5%2F</url>
    <content type="text"><![CDATA[å¿…å¤‡å·¥å…·æœ€æ–°çš„ Spring Boot å‘å¸ƒç‰ˆæœ¬æ˜¯ 2.1.4ï¼Œéœ€è¦JDKç‰ˆæœ¬æœ€å°ä¸º8å³ JDK8ï¼Œæž„å»ºå·¥ç¨‹çš„å·¥å…· Maven æœ€å°ç‰ˆæœ¬ä¸º3.3ï¼ŒGradle æœ€å°ç‰ˆæœ¬ä¸º4.4ï¼Œå½“ç„¶äº† Maven å’Œ Gradle ä»»é€‰ä¸€ä¸ªå³å¯ï¼ŒæŽ¥ä¸‹æ¥åˆ†äº«çš„æ–‡ç« ä¸­åŸºæœ¬éƒ½ä½¿ç”¨ Maven æ¥æž„å»ºå·¥ç¨‹ã€‚ 1ã€Spring Boot 2.1.4 2ã€JDK8 3ã€IntelliJ IDEA2019 æ”¶è´¹ç‰ˆ æœ‰ç¨³å®šå¯ç”¨çš„ç½‘ç»œï¼Œä¿è¯å·¥ç¨‹æž„å»ºå’Œä¸€äº›ä¾èµ–çš„ä¸‹è½½ã€‚ å…·ä½“ Spring Boot å¯¹å…¶ä»–å·¥å…·çš„ç‰ˆæœ¬è¦æ±‚ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œçš„ getting-started-system-requirements æ–‡ç« å†…å®¹ã€‚ å»ºè®®å¤§å®¶ä½¿ç”¨Chromeä½œä¸ºé»˜è®¤æµè§ˆå™¨ï¼Œæµ‹è¯•ã€è°ƒè¯•APIæ•°æ®å’Œå®‰è£…å¯¹åº”çš„æ’ä»¶å¾ˆæ–¹ä¾¿ã€‚ è®¤è¯† Githubå¦‚æžœä½ è¿˜æ²¡æœ‰ Github è´¦å·ï¼Œå°±åŽ»æ³¨å†Œä¸€ä¸ªï¼Œæ‰“å¼€ è¿™ä¸ªåœ°å€ å³å¯ã€‚ æ³¨å†Œå®ŒæˆåŽï¼Œå¯ä»¥æ–°å»ºä¸€ä¸ª Repo(å¯ä»¥å­˜æ”¾ä»£ç çš„ä»“åº“)ï¼Œæœ¬æ–‡æ¶‰åŠçš„æ‰€æœ‰ä»£ç éƒ½æ”¾åœ¨ Github ä¸Šé¢ã€‚ Spring Boot ç³»åˆ—æ–‡ç« ä¹Ÿä¼šè·Ÿå¤§å®¶ä¸€èµ·å­¦ä¹  Git çš„ä½¿ç”¨ã€‚ åˆ›å»ºå·¥ç¨‹æ–°å»ºå·¥ç¨‹ï¼Œæ‰“å¼€IDEAï¼ŒFile/New/Projectï¼Œä¸‹ä¸€æ­¥å³å¯ å¡«å†™å·¥ç¨‹ä¿¡æ¯ï¼Œç„¶åŽä¸‹ä¸€æ­¥ è¿™é‡Œæ³¨æ„ï¼šArtifact è¦æ±‚æ˜¯å…¨æ˜¯å°å†™å­—æ¯ï¼Œå¦åˆ™æ— æ³•åˆ›å»ºå·¥ç¨‹ã€‚ é€‰æ‹©ä¾èµ–ï¼ŒCore ä¸­é€‰æ‹© Lombokï¼Œè¿™ä¸ªä½¿ç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œå»ºè®®å¤§å®¶é€‰æ‹©ï¼Œä¸é€‰ä¹Ÿå¯ä»¥çš„ã€‚ ç´§æŽ¥ç€åœ¨ Web ä¸­é€‰æ‹© Web å³å¯ï¼Œä¸‹ä¸€æ­¥ ä¿å­˜å·¥ç¨‹ï¼Œå¯åŠ¨åŽåœ¨å³å°è§’æç¤ºä¸‹é¢å†…å®¹ï¼Œç›´æŽ¥ Enable Auto-Import å’Œ Enable plgins å³å¯ï¼Œå¦‚æžœä½ ä¹‹å‰å®‰è£…è¿‡ Lombok æ’ä»¶ï¼Œè¿™é‡Œä¹Ÿä¸ä¼šæç¤º Enable plgins äº†ã€‚ ç„¶åŽå®‰è£… Lombok æ’ä»¶ï¼Œç‚¹å‡» ok å³å¯ã€‚ ç­‰å¾…IDEAæž„å»ºå®Œæˆï¼Œå·¥ç¨‹æ˜¾ç¤ºå¦‚ä¸‹ï¼š å¦‚æžœä½ çš„å·¥ç¨‹åŠ è½½å…¶ä»–åº“åŠ è½½å¤±è´¥ï¼Œå¯ä»¥é‡æ–°å¯¼å…¥ï¼Œæ“ä½œå¦‚ä¸‹ï¼š Runèµ·æ¥ç›´æŽ¥è¿è¡Œå·²ç»æž„å»ºæˆåŠŸçš„å·¥ç¨‹ã€‚ æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ http://localhost:8080/ èƒ½çœ‹åˆ°ä¸‹é¢çš„å†…å®¹ï¼š è¯´æ˜Žå·¥ç¨‹å·²ç»æˆåŠŸè¿è¡Œèµ·æ¥äº†ï¼Œä½ è·ç¦»ä¼Ÿå¤§çš„ç›®æ ‡è¶Šæ¥è¶Šè¿‘äº†ã€‚ ä¸ºäº†è®©æµè§ˆå™¨æ˜¾ç¤ºä¸€ä¸ªæ­£å¸¸çš„è¯­å¥ï¼Œæˆ‘ä»¬éœ€è¦å¢žåŠ ç‚¹ä¸œè¥¿ã€‚ æ–°å»ºä¸€ä¸ª MSUserControllerï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213package com.veryitman.springboot.controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class MSUserController &#123; @RequestMapping(value = "/user") public String user() &#123; return "Greate user"; &#125;&#125; æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ http://localhost:8080/user èƒ½çœ‹åˆ°ä¸‹é¢çš„å†…å®¹ï¼š è¯´ç‚¹ç¥žå¥‡çš„1ã€åˆ›å»ºå·¥ç¨‹è¿˜æœ‰å…¶ä»–æ–¹å¼å—ï¼Ÿ é™¤äº†ä½¿ç”¨IDEAæä¾›çš„æ–¹æ³•æ¥åˆ›å»º Spring Boot å·¥ç¨‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ Spring Initializr æ¥åˆ›å»ºå·¥ç¨‹ã€‚ æœ¬è´¨ä¸Šï¼ŒIDEAæ˜¯é›†æˆäº† Spring Initializr è¿™ä¸ªå·¥å…·ï¼Œæ‰€ä»¥äºŒè€…åŒå®—åŒæºã€‚ 2ã€ä¸ºä»€ä¹ˆç‚¹ä¸ªæŒ‰é’®å°±Runèµ·æ¥äº†ï¼Ÿ Spring Boot å·²ç»å†…ç½®äº† Tomcat æœåŠ¡å™¨ä½œä¸º Web Serverï¼Œæ‰€ä»¥å¯ä»¥ç›´æŽ¥è·‘èµ·æ¥ã€‚ Spring Boot å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œçº¦å®šå¤§äºŽé…ç½®çš„æ€æƒ³è´¯å½»å…¶å§‹ç»ˆã€‚ æ”¹å˜ï¼Œä»Žä½ æˆ‘ç›¸è¯†å¼€å§‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot SpringCloud å¾®æœåŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡: æ­¥æ­¥ä¸ºè¥]]></title>
    <url>%2F2019%2F05%2F28%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E6%AD%A5%E6%AD%A5%E4%B8%BA%E8%90%A5%2F</url>
    <content type="text"><![CDATA[ä¸Šå›¾æ˜¯æˆ‘ä»Ž spring.io é¦–é¡µä»‹ç»æˆªå›¾è¿‡æ¥çš„ï¼Œç®€æ´è€Œä¸å¤±éœ¸æ°”ï¼ æœ€è¿‘ä¸¤å¹´ï¼ŒSpring Boot ä¼´éšç€å¾®æœåŠ¡çš„å‘å±•è€Œè¶Šå‘ç«çƒ­ï¼Œå¾ˆå¤šå…¬å¸ä¹Ÿçº·çº·å¼€å§‹ä½¿ç”¨ Spring Boot å’Œ Spring Cloud æ¥å¼€å‘è‡ªå·±çš„æœåŠ¡ï¼ŒJavaå¼€å‘çš„æµªæ½®æ„ˆå‘æ±¹æ¶Œã€‚è¿™å¹´å¤´ä¸çŸ¥é“å¾®æœåŠ¡ä¸çŸ¥é“ Spring Boot å°±æ„Ÿè§‰ç”Ÿæ´»ç¼ºç‚¹ä»€ä¹ˆä¼¼çš„ã€‚æˆ‘ä»¬è¿˜æ˜¯æŠ±ç€å­¦ä¹ çš„å¿ƒæ€æ¥å­¦ä¹ ä¸€ä¸‹è¿™ä¸ªæ—¶ä»£å® å„¿å§ï¼Œä¸è¦ç›²ç›®å¹æ§å°±å¯ä»¥äº†ã€‚ ç”± Pivotal æä¾›çš„ Spring Boot æ˜¯ä¸€å¥—åŸºäºŽJavaè¯­è¨€çš„å¼€å‘æ¡†æž¶ï¼Œä¹‹å‰çš„ Spring æ¡†æž¶é…ç½®æ¯”è¾ƒå¤æ‚ï¼Œè®¾è®¡ Spring Boot ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ– Spring çš„å¼€å‘è¿‡ç¨‹ï¼Œä¸€å®šç¨‹åº¦çš„åŽ»å°½åŠ›è§£æ”¾ç¨‹åºå‘˜ï¼Œæ¢å¥è¯è¯´ Spring Boot æ˜¯å»ºç«‹åœ¨ Spring åŸºç¡€ä¹‹ä¸Šçš„ã€‚Spring Boot æ›´åƒæ˜¯ä¸€ä¸ªæ¡†æž¶ä»“åº“ï¼Œå®ƒæ‹¥æœ‰ä½ åŸºæœ¬æƒ³è¦çš„ä¸œè¥¿ï¼Œç®€å•åˆ°åªéœ€è¦ä½ æ·»åŠ é…ç½®å°±å¯ä»¥ï¼Œå¹¶ä¸” Spring Boot å¯ä»¥å¸®ä½ å¤„ç†å„ä¸ªåº“ä¹‹é—´çš„ä¾èµ–å…¼å®¹é—®é¢˜ï¼Œä¸ç”¨æˆ‘ä»¬åŽ»å…³å¿ƒè¿™äº›é—®é¢˜ã€‚â€œçº¦å®šä¼˜äºŽé…ç½®â€ çš„æ€æƒ³è´¯ç©¿ Spring Boot çš„å§‹ç»ˆï¼Œçº¦å®šä¼˜äºŽé…ç½®ï¼ˆConvention Over Configurationï¼‰ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºæŒ‰çº¦å®šç¼–ç¨‹ï¼Œå®ƒæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡èŒƒå¼ã€æ€æƒ³ï¼Œçº¦å®šä¼˜äºŽé…ç½®æ—¨åœ¨å‡å°‘å¼€å‘äººå‘˜éœ€åšå†³å®šçš„æ•°é‡ã€èŽ·å¾—ç®€å•çš„å¥½å¤„ï¼Œè€Œåˆä¸å¤±çµæ´»æ€§ï¼Œå¯¹äºŽæˆ‘ä»¬æ¥è¯´æ˜¯ä¸€ç§ç¼–ç¨‹çš„æ–°ä½“éªŒã€‚ ä¸ºäº†è‡ªå·±å­¦ä¹ ï¼Œä¹Ÿä¸ºäº†æ–¹ä¾¿æƒ³å­¦ä¹  Spring Boot çš„å°ä¼™ä¼´ï¼Œå‡†å¤‡æžä¸€å¥— Spring Boot ç³»åˆ—æ–‡ç« æ¥æ»‹æ¶¦ä¸€ä¸‹æ— èŠçš„ç”Ÿæ´»ã€‚ Spring Boot ç³»åˆ—æ–‡ç« æˆ‘å‡†å¤‡é‡‡ç”¨ä»¥ç»ˆä¸ºå§‹çš„æ–¹å¼æ¥åˆ†äº«ï¼Œæ‰€è°“çš„ä»¥ç»ˆä¸ºå§‹å°±æ˜¯æˆ‘ä»¬å…ˆç»™è‡ªå·±é¡¶ä¸ªç›®æ ‡ï¼Œç„¶åŽå†æƒ³æ–¹æ¡ˆæ¥å®Œæˆç›®æ ‡ï¼Œç»†åŒ–æ¯ä¸ªå®žæ–½æ­¥éª¤ã€‚ è‡³äºŽä»€ä¹ˆæ˜¯ å¾®æœåŠ¡ï¼Œä»€ä¹ˆæ˜¯ Spring Boot å¤§å®¶å¯ä»¥åŽ»ç½‘ä¸Šæœç´¢äº†è§£ï¼ŒåŽç»­åˆ†äº«çš„æ–‡ç« ä¸­æˆ‘ä¹Ÿä¼šæ¸—é€å¼çš„åˆ†äº«ä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†ã€‚è¿™é‡Œå¼ºè°ƒä¸€ç‚¹ï¼Œå¾®æœåŠ¡ä¸ç­‰äºŽ Spring Boot æˆ–è€… Spring Cloudï¼Œä»–ä»¬åªæ˜¯å®žçŽ°å¾®æœåŠ¡çš„ä¸€ç§æ‰‹æ®µè€Œå·²ã€‚ å­¦ä¹ è¦æ±‚ 1ã€ä½ å¾—ä¼šJavaåŸºç¡€çŸ¥è¯†ï¼Œè‡³å°‘ä¼šç”¨JDKçš„åŸºæœ¬ç±»ã€‚å¦‚æžœä¸ä¼šï¼Œèµ¶ç´§åŽ»è¡¥è¡¥ï¼Œå­¦ä¹ æ²¡é‚£ä¹ˆéš¾ï¼Œåªè¦ä½ åˆ«å¤ªæ‡’ï¼ 2ã€ä½ è¦ä½¿ç”¨è¿‡IDEAè¿™ä¸ªæ— ä¸Žä¼¦æ¯”çš„é›†æˆå¼€å‘å·¥å…·ï¼Œæ”¾å¼ƒ Eclipse å§ï¼ä¸æ˜¯å®ƒä¸å¥½ï¼Œåªæ˜¯IDEAå¤ªä¼˜ç§€ã€‚ 3ã€è‹±è¯­è¦å‡‘åˆï¼Œæœ‰æ²¡æœ‰å››çº§è¯ä¹¦çœŸçš„æ— æ‰€è°“ï¼Œå®˜æ–¹æ–‡æ¡£å¤§å¤šéƒ½æ˜¯è‹±æ–‡çš„å´éƒ½æ˜¯ç²¾åŽã€‚ 4ã€åšå¼ºçš„æ¯…åŠ›ï¼Œä¹è§‚çš„å¿ƒæ€ï¼Œå¾ˆå¤šå›°éš¾éƒ½æ˜¯çº¸è€è™Žï¼Œå½“ä½ æžå®šå®ƒäº†ä¹‹åŽä½ å°±çŸ¥é“è‡ªå·±æœ‰å¤šåŽ‰å®³äº†ã€‚ 5ã€å¤šè¿åŠ¨å¤šæ€è€ƒï¼Œèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ‰¯æ·¡ï¼ ä»¥ç»ˆä¸ºå§‹ å¤§ç›®æ ‡ï¼šåŸºäºŽ Spring Cloud æž„å»ºå¾®æœåŠ¡å¼€å‘ä¸€ä¸ªAPPã€‚ å®žæ–½è®¡åˆ’ï¼š 1ã€äº†è§£å’Œå­¦ä¹  Spring Boot ç›®æ ‡ï¼šä½¿ç”¨ Spring Boot æž„å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯æˆ–è€…WEBç«¯å¯è®¿é—®è¯¥æœåŠ¡ã€‚ å¦‚æžœä½ ä¸ä¼šç§»åŠ¨å¼€å‘ï¼Œå¯ä»¥ä½¿ç”¨C/C++ã€C#æˆ–è€…JSæ¥å¼€å‘ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå“ªæ€•ç»ˆç«¯ç¨‹åºä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ åˆšå¼€å§‹å­¦ä¹ çš„æ—¶å€™ï¼Œå¦‚æžœé‡åˆ°ä¸ç†è§£çš„çŸ¥è¯†ç‚¹å…ˆè®°ä¸‹æ¥ï¼Œä¸è¦å› ä¸ºè¿™äº›ä¸œè¥¿é˜»æŒ¡ä½ çš„å­¦ä¹ ï¼Œç­‰å­¦åˆ°ä¸€å®šçš„æ—¶å€™å†å›žè¿‡å¤´æ¥ç ”ç©¶ï¼Œè¿™å°±å¥½æ¯”ä½ åˆšä¸Šçƒåœºå­¦ä¹ æ‰“ç¯®çƒä¸€æ ·ï¼Œèƒ½å…ˆç¨³ç¨³çš„æ‹¿ä½çƒå†ä¼ ç»™é˜Ÿå‹å°±å¾ˆäº†ä¸èµ·äº†ï¼Œå¾—ä¸å¾—åˆ†é‚£æ˜¯åŽé¢çš„äº‹æƒ…ã€‚ åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬åšå¥½ç™»å½•å’Œæ³¨å†Œå³å¯ã€‚ 2ã€æ·±å…¥å­¦ä¹  Spring Boot ç»§ç»­å­¦ä¹  Spring Boot çš„çŸ¥è¯†ï¼Œç”¨æˆ·å®Œæˆäº†æ³¨å†Œï¼Œç„¶åŽç™»å½•è¿›å…¥æˆ‘ä»¬çš„APPéœ€è¦ç»™ä»–ä»¬å±•ç¤ºæ›´åŠ ä¸°å¯Œçš„åœºæ™¯ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦é…åˆåŽå°æœåŠ¡è¿›è¡Œå¼€å‘å·¥ä½œï¼Œå€ŸåŠ©è¿™æ¬¡æœºä¼šå¯ä»¥æ›´åŠ æ·±å…¥çš„å­¦ä¹ å’Œè®¤è¯† Spring Bootäº†ã€‚ 3ã€ äº†è§£å’Œå­¦ä¹  Spring Cloud åœ¨è¿™ä¸ªé˜¶æ®µï¼Œéœ€è¦ä½¿ç”¨ Spring Cloud æ”¹é€ æˆ‘ä»¬å·²ç»å¼€å‘çš„å•ä½“åº”ç”¨æœåŠ¡äº†ã€‚ å¾®æœåŠ¡çš„å…³é”®ä¸æ˜¯å¦‚ä½•å°†ä½ çš„æœåŠ¡æ‹†çš„å¦‚ä½• â€œå¾®â€ï¼Œè€Œæ˜¯å¦‚ä½•åšå¥½æœåŠ¡æ²»ç†ã€‚äºŽæ˜¯åœ¨ Spring Boot åŸºç¡€ä¹‹ä¸Šä¾¿æœ‰äº† Spring Cloudï¼Œå®ƒæ˜¯å®Œå…¨åŸºäºŽ Spring Boot å¼€å‘çš„ï¼Œå¯¹å¤–æä¾›äº†åœ¨å¾®æœåŠ¡æž¶æž„ä¸­å¦‚ä½•åšå¥½æœåŠ¡æ²»ç†çš„ä¸€å¥—è§£å†³æ–¹æ¡ˆã€‚ å­¦ä¹ å®Œ Spring Boot ä¹‹åŽéœ€è¦äº†è§£ä¸€äº›å…³äºŽ Spring Cloud çš„çŸ¥è¯†ï¼Œè¿›å…¥ Spring Cloud çš„ä¸–ç•Œä¸€çª¥ç©¶ç«Ÿï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬ä¸€èµ·å­¦ä¹ å¦‚ä½•åšæœåŠ¡æ²»ç†ï¼ŒæœåŠ¡éƒ¨ç½²ç­‰çŸ¥è¯†ã€‚ 4ã€åšä¸€æ¬¡æž¶æž„å¸ˆ ç»¼åˆ Spring Boot å’Œ Spring Cloud ç›¸å…³çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬é‡æ–°æ¢³ç†ä¸€ä¸‹ä¹‹å‰åšçš„ä¸œè¥¿ã€‚æŠŠæ•´ä¸ªç³»ç»Ÿä¸²èµ·æ¥ï¼Œç”»å‡ºæµç¨‹å›¾å’Œæž¶æž„å›¾ã€‚ è®¾è®¡åŒ…æ‹¬æœåŠ¡æœ¬èº«çš„è®¾è®¡ã€æ•°æ®åº“å’Œç¼“å­˜ç­‰è®¾è®¡ã€‚ 5ã€å®Œå–„å’Œä¼˜åŒ–æœåŠ¡ å€Ÿé‰´ä¸šç•Œå¥½çš„æ¡ˆä¾‹å¯¹æˆ‘ä»¬çš„æœåŠ¡è¿›è¡Œä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€ç¼“å­˜ã€APIå’Œå…¶ä»–è®¾è®¡åšä¸€æ¬¡é‡æž„ï¼Œå¹¶å¯¹æˆ‘ä»¬è¿™ä¸ªå¾®é¡¹ç›®è¿›è¡Œä¸€æ¬¡å¤ç›˜ã€‚ æœ€é‡è¦çš„æ˜¯è¦å¥–åŠ±ä¸€ä¸‹è‡ªå·±ã€‚ Spring Boot ç³»åˆ—æ–‡ç« æˆ‘ä¼šåŠªåŠ›åšæŒå†™ä¸‹åŽ»ï¼Œå¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ã€‚ å¹²å°±å®Œäº†ï¼ æ”¹å˜ï¼Œä»Žä½ æˆ‘ç›¸è¯†å¼€å§‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot SpringCloud å¾®æœåŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®æœåŠ¡é¡¹ç›®ç³»åˆ—æ–‡ç« ]]></title>
    <url>%2F2019%2F05%2F28%2F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%2F</url>
    <content type="text"><![CDATA[ç‹‚é£Žæš´é›¨çš„é‚£ä¸ªå‘¨æœ«ï¼Œçªå‘å¥‡æƒ³ï¼Œæƒ³æŠŠå¾®æœåŠ¡ç›¸å…³çš„å†…å®¹åˆ†äº«ç»™å¤§å®¶ï¼Œæ€å‰æƒ³åŽè¿˜æ˜¯å†³å®šç”¨é¡¹ç›®çš„å½¢å¼æ¥æŽ¨è¿›å¦åˆ™å¾ˆéš¾è¿›è¡Œä¸‹åŽ»ï¼ŒäºŽæ˜¯å°±æœ‰äº†é¡¹ç›®çš„è¿™äº›æ–‡ç« ï¼ˆæŒç»­æ›´æ–°ä¸­â€¦ï¼‰ã€‚ ä»–ä»¬éƒ½æ˜¯æœ‰ç”Ÿå‘½çš„ï¼Œå¯¹æˆ‘æ¥è¯´ã€‚ é¡¹ç›®å¼€ç¯‡ å¾®æœåŠ¡-æ­¥æ­¥ä¸ºè¥ å­¦ä¹ å¾®æœåŠ¡çš„è®¡åˆ’ Spring Boot å¾®æœåŠ¡: æƒ³åŠžæ³•è®©é¡¹ç›®è¿è¡Œèµ·æ¥ ä½¿ç”¨IDEAæ­å»ºç¬¬ä¸€ä¸ªSpringBooté¡¹ç›® å¾®æœåŠ¡: Gitå…¥é—¨ å†™è¿‡çš„ä»£ç å°±æ˜¯è‡ªå·±çš„è´¢å¯Œï¼Œéœ€è¦æŠŠä»–ç®¡ç†èµ·æ¥ï¼Œä»£ç ç®¡ç†æˆ‘ç”¨Gitç®¡ç†å·¥å…· å¾®æœåŠ¡: æœ¬åœ°çƒ­éƒ¨ç½² å¦‚ä½•çƒ­éƒ¨ç½²é¡¹ç›®ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½æ‰‹åŠ¨é‡å¯ å¾®æœåŠ¡: ç«‹å¿—åšä¸ªä¼Ÿå¤§çš„é¡¹ç›® ç¡®å®šå­¦ä¹ å¾®æœåŠ¡çš„é¡¹ç›® å¾®æœåŠ¡: å­¦ä¹ å‡ ä¸ªå®¹æ˜“æ··æ·†çš„URLæ³¨è§£ å­¦ä¹ è·ŸURLç›¸å…³çš„å‡ ä¸ªæ³¨è§£ï¼Œå¦‚ @RequestParamã€@QueryParamã€@PathVariableã€@PathParam å¾®æœåŠ¡: ç®€å•çš„ç”¨æˆ·åæ³¨å†Œå’Œç™»å½• å†™æ³¨å†Œå’Œç™»å½•çš„æŽ¥å£ï¼Œå¹¶å®ŒæˆæŽ¥å£çš„å•å…ƒæµ‹è¯•ã€‚ å¾®æœåŠ¡-Swaggerè®©ä½ å¯ä»¥å¤šæŠ½ä¸€æ”¯çƒŸ æŽ¥å£ç¼–ç å®Œæˆä¹‹åŽï¼Œç»“åˆ Swagger å¯ä»¥åŒæ—¶å®Œæˆæ–‡æ¡£çš„ç¼–å†™ã€‚ å¾®æœåŠ¡-Swaggerç”ŸæˆMarkdownæ–‡æ¡£ å¦‚ä½•ç”Ÿæˆç¦»çº¿æ–‡æ¡£ã€‚ å¾®æœåŠ¡-éƒ¨ç½²æœåŠ¡ å¦‚ä½•éƒ¨ç½²å·²ç»å†™å¥½çš„æœåŠ¡ã€‚ MySQL8-0-15åœ¨Win10ä¸Šçš„æŠ˜è…¾è®° å®‰è£…MySQLã€‚ å¾®æœåŠ¡: MySQLåŸºæœ¬æ“ä½œ ä½¿ç”¨MySQLæ•°æ®åº“ã€‚ Spring Boot ç•ªå¤–ç¯‡ è·¨åŸŸå’ŒOPTIONSè¿™å¯¹æ¬¢å–œå†¤å®¶ è§£å†³è·¨åŸŸé—®é¢˜ å‡å°‘è·¨åŸŸä¸­çš„OPTIONSè¯· å¦‚ä½•å‡å°‘è·¨åŸŸè¯·æ±‚ çŸ­åœ°å€åŽŸç† å®žä¾‹ï¼ˆSpringBootï¼‰è®²è§£çŸ­åœ°å€å®žçŽ°åŽŸç†ã€‚ Spring Cloudä¸ç»åŽ†é£Žé›¨æ€Žä¹ˆè§å½©è™¹ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿéšéšä¾¿ä¾¿æˆåŠŸ~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>SpringBoot SpringCloud å¾®æœåŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¨‹åºå‘˜è¿™ä¸ªèŒä¸š]]></title>
    <url>%2F2019%2F05%2F25%2F%E7%A8%8B%E5%BA%8F%E5%91%98%E8%BF%99%E4%B8%AA%E8%81%8C%E4%B8%9A%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æƒ³è·Ÿå¤§å®¶èŠèŠå…³äºŽç¨‹åºå‘˜èŒä¸šçš„è¯é¢˜~ è°£è¨€å¯ç•å¦‚æžœä½ æ˜¯åšç¼–ç¨‹è¿™ä¸ªè¡Œä¸šçš„ï¼Œä¸€å®šä¼šå¬åˆ°å¾ˆå¤šäººæŠ±æ€¨è¿™ä¸ªè¡Œä¸šå¤ªè¾›è‹¦äº†ï¼Œç½‘ä¸Šä¹Ÿæµè¡Œç€è¿™ä¹ˆä¸€å¥è¯ï¼šâ€œç¨‹åºå‘˜æŒ£å¾—å¤šï¼Œæ­»å¾—æ—©â€ï¼Œç®€ç›´æ‰Žå¿ƒï¼ å…³äºŽ â€œç¨‹åºå‘˜æŒ£å¾—å¤šï¼Œæ­»å¾—æ—©â€ è¿™å¥è¯å…¶å®žæ˜¯ä¸å®Œå…¨åˆç†çš„ã€‚ æˆ‘è®°å¾—å‡ å¹´å‰ï¼Œä¸€ä¸ªåŠ ç­çš„å‘¨æœ«æˆ‘ä¸€ä¸ªäººåç”µæ¢¯ä¸ŠåŽ»æ­£å¥½ç¢°åˆ°ä¸€ä½é€æ°´çš„å¤§çˆ·ã€‚å¤§çˆ·çž„äº†æˆ‘ä¸€çœ¼è¯´ï¼šâ€å°ä¼™å­è¿™ä¸ªç‚¹å†è¿™é‡Œè¿˜ä¸Šç­çš„ä¸€å®šæ˜¯æžç¼–ç¨‹çš„å§ï¼Ÿâ€œã€‚æˆ‘ç‚¹äº†ç‚¹å¤´ï¼šâ€å¤§çˆ·ï¼Œè¡Œå®¶å‘€ï¼Œæ²¡æƒ³åˆ°è¢«ä½ ä¸€çœ¼è¯†ç ´â€œã€‚å¤§çˆ·æŽ¥ç€è¯´é“ï¼šâ€è¿™ä¸ªè¡Œä¸šå¥½å‘€ï¼ŒæŒ£å¾—å¤šï¼Œä½ ä»¬ä¸€ä¸ªæœˆæœ€å°‘ä¹Ÿæœ‰å¥½å‡ ä¸‡å§ï¼Ÿâ€œï¼Œæˆ‘å½“æ—¶è¢«å¤§çˆ·è¯´å‡ºæ¥çš„æ•°å­—å“äº†ä¸€è·³ï¼Œé‚£å¯æ˜¯æˆ‘ä¸åƒä¸å–ä¸€å¹´çš„å·¥èµ„å‘€ï¼æˆ‘å°´å°¬çš„ç¬‘ç€è¯´ï¼šâ€å¤§çˆ·ï¼Œä½ çœŸé€—ï¼â€œï¼Œç„¶åŽç®€å•èŠäº†å‡ å¥å°±ä¸‹äº†ç”µæ¢¯ï¼Œå¤§çˆ·çš„è¯ä¹…ä¹…ä¸èƒ½è®©æˆ‘é‡Šæ€€ï¼Œæ„Ÿè§‰è‡ªå·±åšäº†ä¸€ä»½å‡å·¥ä½œã€‚ â€œæŒ£å¾—å¤šâ€ å®Œå…¨æ˜¯è°£è¨€ï¼Œâ€œæ­»å¾—æ—©â€ å€’æ˜¯æœ‰å¯èƒ½ï¼Œæƒ³æƒ³éƒ½ç–¼ã€‚å…³äºŽç¨‹åºå‘˜ï¼ŒåŠ ç­åˆ°æ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œåœ¨ä½ èŒä¸šç”Ÿæ¶¯çš„æ—©æœŸåŠ ç­æ˜¯å› ä¸ºè‡ªå·±èƒ½åŠ›ä¸è¶³ï¼Œéšç€ä½  â€œé”®â€æ­¥å¦‚é£žèƒ½åŠ›çš„æå‡ï¼Œè‡ªä»¥ä¸ºä¸ç”¨å†è¿™ä¹ˆæ‹¼å‘½äº†ï¼Œè°æ›¾æƒ³â€¦æ–°çš„ç¼–ç¨‹è¯­è¨€æ¨ªç©¿å‡ºä¸–ï¼Œæ–°çš„æŠ€æœ¯å±‚å‡ºä¸ç©·ï¼Œå¦‚æžœä¸å­¦ä¹ ä¸åŠªåŠ›åªèƒ½è¢«è¿™ä¸ªè¡Œä¸šç»™æ·˜æ±°æŽ‰ã€‚ å¦‚æžœä½ æœ‰è¶³å¤Ÿå¥½çš„è¿æ°”èƒ½é‡åˆ°å¥½çš„é¡¹ç›®ï¼Œé‡åˆ°å¥½çš„å›¢é˜Ÿï¼Œè‚¯å®šèƒ½ä»Žä¸­èŽ·ç›Šï¼Œæ¯”å¦‚ä½ åœ¨æ”¯ä»˜å®ã€æˆ–è€…åœ¨çŽ‹è€…è£è€€å›¢é˜Ÿï¼Œæˆ–è€…ä½ åœ¨å¾®ä¿¡ï¼Œåˆæˆ–è€…ä½ åœ¨ä»Šæ—¥å¤´æ¡ã€‚ å¥½çš„è¿æ°”å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½æœ‰ï¼Œå› ä¸ºå¥½çš„è¿æ°”æ›´éœ€è¦å¥½çš„è‡ªå·±ï¼Œä½ è¦åšå¥½å……åˆ†çš„å‡†å¤‡åŽ»è¿ŽæŽ¥ â€å¥½è¿æ°”â€œ çš„åˆ°æ¥ã€‚ å»ºç«‹äººè„‰å’Œä½ ç›¸å¤„çš„åŒäº‹å½“ä¸­ï¼Œè‚¯å®šä¼šæœ‰è¯™è°å¹½é»˜çš„åž‹çš„ï¼Œç†æ™ºç†æ€§åž‹çš„ï¼Œè¿˜æœ‰æ„Ÿæƒ…ç”¨äº‹è¯´è¯å¾ˆç›´æŽ¥çš„ç±»åž‹çš„äººï¼Œä¹Ÿè®¸è¿˜æœ‰å°è‚šé¸¡è‚ å‘é„™å°äººåž‹çš„ã€‚ç›´åˆ°æˆ‘è¯»åˆ°æ˜ŽæœåŽ†å²ï¼Œæˆ‘æ‰çŸ¥é“çš‡å¸è¿˜å¯ä»¥å‡ åå¹´ä¸ä¸Šæœçš„ï¼Œç§°å…¶ä¸º â€æ— ä¸ºè€Œæ²»â€œã€‚æ‰€ä»¥ï¼Œä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œé‡åˆ°å½¢å½¢è‰²è‰²çš„äººæ˜¯ä¸€ä»¶å†æ­£å¸¸ä¸è¿‡çš„äº‹æƒ…ï¼Œæ²¡ä»€ä¹ˆå¤§æƒŠå°æ€ªçš„ã€‚ ä¸è¿‡æˆ‘æŽ¥è§¦çš„ç¨‹åºå‘˜çš„åŒäº‹ä¸­ï¼Œå¹½é»˜è¯™è°çš„äººä¸å¤šï¼Œå’Œè¿™ç±»äººä¸€èµ·å·¥ä½œä½ ä¼šè§‰å¾—å¾ˆå¼€å¿ƒã€‚è¿™ç±»äººæ›´å®¹æ˜“ç¼“è§£å›¢é˜Ÿç´§å¼ è€Œåˆæ²‰é—·çš„æ°›å›´ï¼Œæ›´å®¹æ˜“è¢«äººé€‰ä¸ºç»„é•¿ã€‚æˆ‘å»ºè®®å¤§å®¶è¯¥æ”¾æ¾çš„æ—¶å€™å°±æ”¾æ¾ï¼Œåˆ«æ•´å¤©æ‘†ç€è„¸ç»™äººä¸€ç§ â€æ¬ ä½ é’±â€œ çš„é”™è§‰ã€‚ å’ŒåŒäº‹æžå¥½å…³ç³»ï¼Œå¯ä»¥ç»™ä½ æ—¥åŽçš„å·¥ä½œå¸¦æ¥å¾ˆå¤§çš„å¸®åŠ©ã€‚æ¯”å¦‚ï¼Œä½ åœ¨å·¥ä½œä¸­é‡åˆ°é˜»ç¢æˆ–è€…å›°éš¾ï¼ŒåŒäº‹ä»¬éƒ½ä¼šå¸®ä½ å‡ºè°‹åˆ’ç­–ï¼Œå“ªæ€•ä¸€ä¸ªå°å°çš„æç¤ºå¯èƒ½å°±èƒ½è®©ä½ çµå…‰ä¸€é—ªï¼Œè½»æ¾è§£å†³é—®é¢˜ã€‚ä½ åœ¨å…¬å¸çš„æ—¶é—´ä¹…äº†ï¼Œé™¤äº†å’ŒåŒéƒ¨é—¨çš„åŒäº‹å¤„ç†å¥½å…³ç³»ï¼Œè¿˜æœ‰è·Ÿå…¶ä»–éƒ¨é—¨çš„åŒäº‹å¤šæŽ¥è§¦ã€‚å¼€å‘å’Œè´¨é‡ç®¡ç†éƒ¨ã€è¿ç»´ä¸­å¿ƒã€è®¾è®¡éƒ¨ä»¥åŠä¸šåŠ¡éƒ¨é—¨å¤šå°‘éƒ½ä¼šæœ‰ä¸€äº›å·¥ä½œä¸Šçš„æŽ¥è§¦ï¼Œä¸å¦¨è·Ÿä»–ä»¬å¤šå’¨è¯¢ä¸€äº›éžä½ æœ¬ä¸“ä¸šçš„çŸ¥è¯†ï¼Œè¿™æ ·æ—¢å¯ä»¥å­¦åˆ°çŸ¥è¯†åˆå¯ä»¥ç»“äº¤æœ‹å‹ï¼ŒèŒåœºçš„äº¤é™…èƒ½åŠ›æ˜¯é—¨å¤§å­¦é—®ã€‚ ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘çŽ°ï¼Œå…¬å¸å¾ˆå¤šçš„ä¸šåŠ¡ä¸»ç®¡éƒ½æ˜¯å…¬å¸æœ‰äº¤é™…èƒ½åŠ›çš„è€å‘˜å·¥æ¥æ‹…å½“ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸ºè¿™äº›äººåœ¨å…¬å¸å¾…çš„æ—¶é—´ä¹…ï¼Œæ²Ÿé€šèƒ½åŠ›æœ‰å¼ºï¼Œæ‰€ä»¥å¾ˆå¤šè·¨éƒ¨é—¨çš„åè°ƒå·¥ä½œä»–éƒ½èƒ½è½»è€Œæ˜“ä¸¾çš„æžå®šã€‚ é™¤äº†è‡ªå·±è¦åŠ å¼ºäº¤é™…èƒ½åŠ›ï¼Œè¿˜æœ‰åŠ å¼ºè‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›ä»¥åŠæŠ€æœ¯å½±å“åŠ›ï¼Œæ¯”å¦‚ä½ å¸¦å¤´åœ¨çŸ­æ—¶é—´å†…è§£å†³äº†ä¸€ä¸ªé—ç•™å¾ˆä¹…çš„é—®é¢˜ï¼Œè¿™ä¸ªä¼šå¾ˆå¿«è®©ä½ æˆä¸ºå¤§å®¶å¿ƒç›®ä¸­çš„æŠ€æœ¯ä½¼ä½¼è€…ã€‚ å¦å¤–ï¼Œè‡ªå·±è¦å¤šåŽ»å¸®åŠ©åˆ«äººï¼Œå½“ä½ æœ‰å›°éš¾çš„æ—¶å€™æœ‰äººå¸®åŠ©ä½ ï¼Œé‚£ä¹ˆå½“åˆ«äººæœ‰å›°éš¾çš„æ—¶å€™ä½ ä¹Ÿè¦èƒ½åŠæ—¶çš„å¸®åŠ©åˆ«äººï¼Œè¿™æ ·å¤§å®¶å½¼æ­¤æ‰èƒ½å»ºç«‹ä¿¡ä»»æ„Ÿï¼Œé€äººçŽ«ç‘°æ‰‹ç•™ä½™é¦™ï¼Œå¾ˆç®€å•çš„é“ç†ã€‚ è‡ªæˆ‘å®šä½ä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œä½ è¢«å…¬å¸é«˜å±‚ç›¯ä¸Šäº†ã€‚é«˜å±‚è§‰å¾—ä½ å¾ˆä¸é”™ï¼Œå„æ–¹é¢éƒ½æ¯”è¾ƒä¼˜ç§€ï¼Œå†³å®šé€‰ä½ ä¸ºéƒ¨é—¨è´Ÿè´£äººã€‚ ä½œä¸ºéƒ¨é—¨è´Ÿè´£äººï¼Œä½ æ–°å®˜ä¸Šä»»å¯åƒä¸‡åˆ«ä¹±æ”¾ç«ï¼Œä½ è¦çŸ¥é“æ°´èƒ½è½½èˆŸäº¦èƒ½è¦†èˆŸï¼å¾ˆå¤šäººå½“ä¸Šéƒ¨é—¨é¢†å¯¼åŽï¼Œå–œæ¬¢åŠ¨ç”¨äººäº‹éƒ¨é—¨å¼€å§‹è¿›è¡Œè£å‘˜è¡ŒåŠ¨ï¼Œæœ‰äº›å¾ˆä¼˜ç§€çš„å‘˜å·¥éƒ½è¢«ä»–ç»™èµ¶èµ°äº†ã€‚å¤§å“¥ï¼Œè¿™ä¸æ˜¯å°å»ºç¤¾ä¼šäº†ï¼Œä½ ä»¥ä¸ºè‡ªå·±æ˜¯ç§¦å§‹çš‡å—ï¼Ÿï¼åˆ‡ï¼ å°±è·Ÿå¤§å®¶ä¸Šå­¦é€‰ç­é•¿ä¸€æ ·ï¼Œå¤§å®¶ä¸ºä»€ä¹ˆé€‰ä½ åšç­é•¿ï¼Ÿä¸€èˆ¬æ˜¯å› ä¸ºä½ å­¦ä¹ åŠªåŠ›æˆç»©ä¼˜ç§€å¹¶ä¸”èƒ½å¸¦åŠ¨å¤§å®¶ä¸€èµ·å­¦ä¹ å’Œè¿›æ­¥ï¼Œåœ¨å·¥ä½œå½“ä¸­ä¹Ÿä¸€æ ·ï¼Œé€‰ä½ åšè´Ÿè´£äººï¼Œæ˜¯è®©ä½ èƒ½å¸¦é¢†å›¢é˜Ÿä¸€èµ·ä½œæˆ˜æ‹¿ä¸‹å…¬å¸å®šä¸‹çš„ç›®æ ‡ï¼Œè®©ä½ å¸®åŠ©å¤§å®¶è§£å†³é—®é¢˜è€Œä¸æ˜¯è®©ä½ ä»—åŠ¿æ¬ºäººï¼Œæ‘†å‡ºä¸€å‰¯é«˜é«˜åœ¨ä¸Šçš„å§¿æ€è®©äººéš¾ä»¥ â€æœ›å…¶é¡¹èƒŒâ€œã€‚ ç‰¹åˆ«æ˜¯æŠ€æœ¯å‡ºèº«çš„éƒ¨é—¨é¢†å¯¼ï¼Œä¸€å®šè¦åšå¥½è‡ªæˆ‘å®šä½ã€‚é™¤äº†å¸®å¤§å®¶å¸®å›¢é˜Ÿè§£å†³é—®é¢˜ï¼Œä½ è‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›ä¸èƒ½è½ä¸‹ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ä¸§å¤±ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œå¦åˆ™ä½ è¿žæœ€åŽä¿ä½é¥­ç¢—çš„èƒ½åŠ›éƒ½æ²¡æœ‰äº†ã€‚ ä¸‡ä¸€ï¼Œé‚£å¤©ä½ åšäº†ç®¡ç†è€…ï¼Œè¦æƒ³æ¸…æ¥šä½ èƒ½åšä»€ä¹ˆä»¥åŠä½ ä¸èƒ½åšä»€ä¹ˆï¼Œæœ€é‡è¦çš„æ˜¯æ‰¾å¥½è‡ªæˆ‘å®šä½ï¼Œåˆ«å¿˜äº†ä½ ä»¥å‰ä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åºå‘˜ã€‚ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç¨‹åºå‘˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaIOä¸­ç¥žå¥‡çš„flush]]></title>
    <url>%2F2019%2F05%2F19%2FJavaIO%E4%B8%AD%E7%A5%9E%E5%A5%87%E7%9A%84flush%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« åœ¨ä¹‹å‰å·²ç»å†™è¿‡ï¼Œåªæ˜¯æ²¡æœ‰åœ¨å…¬ä¼—å·å‘å¸ƒè¿‡ã€‚è¯¥æ–‡é˜…è¯»é‡å·²ç»è¾¾åˆ°äº† 36553 æ¬¡äº†ï¼Œæœ‰å¿…è¦åˆ†äº«ç»™å¤§å®¶ã€‚ åŽç»­æˆ‘ä¼šé™†ç»­çš„æŠŠä¸€äº›å¤§å®¶è¯„è®ºæ¯”è¾ƒå¤šå¹¶ä¸”å¾ˆå¥½çš„çŸ¥è¯†ç‚¹åœ¨å…¬ä¼—å·åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å’Œå¤§å®¶åœ¨ç¼–ç¨‹çš„é“è·¯ä¸Šä¸€èµ·è¿›æ­¥ï¼ŒæŠŠè‹¦æ¶©çš„æ—¥å­å˜å¾—æœ‰è¶£ä¸€ç‚¹ã€‚ å†…å®¹æ¦‚è¦Java IOæµçš„è®¾è®¡ä¸å¾—ä¸è®©äººæ‹æ¡ˆå«ç»ï¼Œä½©æœè®¾è®¡è€…é¬¼æ–§å¤©å·¥çš„æ‰‹æ³•ã€‚ å¦‚æžœä½ æ˜¯Javaåˆå­¦è€…ï¼Œæˆ‘æ•¢ä¿è¯ç¬¬ä¸€æ¬¡æŽ¥è§¦Javaçš„IOç±»ï¼Œä¸€å®šä¼š â€ç‹‚æ™•ï¼â€ï¼Œå€’ä¸æ˜¯å› ä¸ºå®ƒæœ‰å¤šä¹ˆéš¾å­¦è€Œæ˜¯å¤ªå¤šï¼Œè€Œä¸”åŠå…¶è®©äººæœ‰ç§ â€œä¸è¯†åºå±±çœŸé¢ç›®â€ çš„æ„Ÿè§‰ï¼Œå½“ä½ å­¦å®Œä»–ä¹‹åŽåˆæœ‰ç§ â€œåªç¼˜èº«åœ¨æ­¤å±±ä¸­â€ çš„é¡¿æ‚Ÿã€‚ åœ¨Javaç¼–ç¨‹çš„æ—¥å­ä¸­å°¤å…¶æ˜¯åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œå‡ ä¹Žç¦»ä¸å¼€Javaçš„IOæµï¼Œæ‰€ä»¥å­¦å¥½ä»–æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ å…³äºŽJavaçš„IOæµçš„åˆ†ç±»ï¼Œå¯ä»¥åˆ°ç½‘ä¸Šsosoï¼Œä»Šå¤©è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ç¥žå¥‡çš„ flush æ–¹æ³•ã€‚ flush ä¸Ž OutputStreamè¯¥ç±»å®žçŽ°äº† Flushable æŽ¥å£ï¼Œæ‰€ä»¥é‡å†™äº† flush æ–¹æ³•ï¼Œçœ‹çœ‹ flush() æºç ï¼Œä¼šæ›´åŠ çš„è®©ä½ æ˜Žç™½ï¼š 1public void flush() throws IOException &#123; &#125; Sorryï¼Œè¯¥å®žçŽ°ä¸ºç©ºã€‚è¿™é‡Œçš„ flush() å±…ç„¶æ˜¯ä¸€ä¸ªç©ºæ–¹æ³•ï¼Œä»€ä¹ˆä¹Ÿæ²¡åšã€‚çœ‹æ¸…æ¥šå•Šï¼Œè¯¥æ–¹æ³•ä¸æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªå®žå®žåœ¨åœ¨çš„æ–¹æ³•ã€‚é™¤äº†æ–¹æ³•ä½“ä¸­ä¸€æ— æ‰€æœ‰ï¼Œå…¶å®ƒè¿˜å¥½ï¼çœ‹JDKçš„APIå¦‚ä½•è§£é‡Šå§ï¼ 12345678flush public void flush() throws IOException åˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºæ‰€æœ‰ç¼“å†²çš„è¾“å‡ºå­—èŠ‚ã€‚flush çš„å¸¸è§„åå®šæ˜¯ï¼šå¦‚æžœæ­¤è¾“å‡ºæµçš„å®žçŽ°å·²ç»ç¼“å†²äº†ä»¥å‰å†™å…¥çš„ä»»ä½•å­—èŠ‚ï¼Œåˆ™è°ƒç”¨æ­¤æ–¹æ³•æŒ‡ç¤ºåº”å°†è¿™äº›å­—èŠ‚ç«‹å³å†™å…¥å®ƒä»¬é¢„æœŸçš„ç›®æ ‡ã€‚ å¦‚æžœæ­¤æµçš„é¢„æœŸç›®æ ‡æ˜¯ç”±åŸºç¡€æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ä¸ªæŠ½è±¡ï¼ˆå¦‚ä¸€ä¸ªæ–‡ä»¶ï¼‰ï¼Œåˆ™åˆ·æ–°æ­¤æµåªèƒ½ä¿è¯å°†ä»¥å‰å†™å…¥åˆ°æµçš„å­—èŠ‚ä¼ é€’ç»™æ“ä½œç³»ç»Ÿè¿›è¡Œå†™å…¥ï¼Œä½†ä¸ä¿è¯èƒ½å°†è¿™äº›å­—èŠ‚å®žé™…å†™å…¥åˆ°ç‰©ç†è®¾å¤‡ï¼ˆå¦‚ç£ç›˜é©±åŠ¨å™¨ï¼‰ã€‚OutputStream çš„ flush æ–¹æ³•ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚æŒ‡å®šè€…ï¼š æŽ¥å£ Flushable ä¸­çš„ flush æŠ›å‡ºï¼š IOException - å¦‚æžœå‘ç”Ÿ I/O é”™è¯¯ã€‚ å¼€å§‹ï¼Œæˆ‘å®‰æ…°è‡ªå·±ï¼Œè¯¥ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒçš„å­ç±»è‚¯å®šé‡å†™äº†è¯¥æ–¹æ³•ã€‚ å¥½å§ï¼ŒOutputStream çš„ç›´æŽ¥å­ç±»æœ‰ï¼šByteArrayOutputStream ã€FileOutputStreamã€FilterOutputStreamã€ObjectOutputStream ã€OutputStreamã€PipedOutputStream ç­‰å‡ ä¸ªç±»ã€‚ æ³¨æ„ï¼šè¿™é‡Œçš„å­ç±» OutputStream æ˜¯åŒ… org.omg.CORBA.portable çš„ã€‚ å¯¹äºŽ FileOutputStreamã€ByteArrayOutputStreamã€org.omg.CORBA.portable.OutputStream ç±»å®ƒä»¬çš„flush() æ–¹æ³•å‡æ˜¯ä»Žçˆ¶ç±»ç»§æ‰¿çš„ flush æ–¹æ³•ã€‚ FilterOutputStream ç±»é‡å†™äº† flush() æ–¹æ³•ï¼Œä½†æ˜¯å®žè´¨è¿˜æ˜¯è°ƒç”¨çˆ¶ç±»çš„ flush() æ–¹æ³•ã€‚ ObjectOutputStreamã€PipedOutputStream ç±»é‡å†™äº† flush() æ–¹æ³•ã€‚ æ¥ä¸¾ä¸¤ä¸ªå°ä¾‹å­ï¼Œç¬¬ä¸€ä¸ªä¾‹å­ä¸»è¦æ˜¯å‘æ–‡æœ¬ä¸­å†™å…¥å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªä¾‹å­å‘æ–‡æœ¬ä¸­å†™å…¥ä¸€å®šå­—èŠ‚çš„æ•°æ®ã€‚ 1ã€ä¾‹å­1ï¼šå‘æ–‡æœ¬ä¸­å†™å…¥å­—ç¬¦ä¸² 1234567891011121314151617import java.io.BufferedOutputStream; import java.io.DataOutputStream; import java.io.File; import java.io.FileOutputStream;public class Test &#123; public static void main(String[] args) throws Exception &#123; File file = new File("text.txt"); if (!file.exists()) &#123; file.createNewFile(); &#125; FileOutputStream fos = new FileOutputStream(file); BufferedOutputStream bos = new BufferedOutputStream(fos); DataOutputStream dos = new DataOutputStream(fos); dos.writeBytes("java io"); &#125; &#125; 2ã€ä¾‹å­2ï¼šå‘æ–‡æœ¬ä¸­å†™å…¥ä¸€å®šå­—èŠ‚çš„æ•°æ® 1234567891011121314151617import java.io.BufferedOutputStream; import java.io.File; import java.io.FileOutputStream; public class Test &#123; public static void main(String[] args) throws Exception &#123; File file = new File("text.txt"); if (!file.exists()) &#123; file.createNewFile(); &#125; FileOutputStream fos = new FileOutputStream(file); BufferedOutputStream bos = new BufferedOutputStream(fos); byte[] b = new byte[1024*8]; bos.write(b); bos.flush(); &#125;&#125; è¿™ä¸¤æ®µä»£æ‰§è¡ŒåŽï¼Œåˆ†åˆ«ä¼šåœ¨å½“å‰ç›®å½•ä¸‹äº§ç”Ÿ7å­—èŠ‚çš„æ–‡ä»¶ï¼ˆå†…å®¹ä¸º java ioï¼‰å’Œ1KBå­—èŠ‚çš„æ–‡ä»¶ã€‚ è¯´åˆ°è¿™é‡Œï¼Œæœ‰äº›äººä¼šè¯´ï¼Œè¿™æœ‰ä»€ä¹ˆç¨€å¥‡ï¼Œè‡³äºŽå—ï¼Ÿï¼Ÿï¼Ÿå‘µå‘µï¼Œåˆ«æ€¥å“ˆï¼ çŽ°åœ¨æˆ‘ä»¬ä¿®æ”¹ç¬¬äºŒä¸ªä»£ç ï¼Œä¸»è¦æ˜¯æ³¨é‡ŠæŽ‰è°ƒç”¨ flush() æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617import java.io.BufferedOutputStream;import java.io.File;import java.io.FileOutputStream;public class Test &#123; public static void main(String[] args) throws Exception &#123; File file = new File("text.txt"); if (!file.exists()) &#123; file.createNewFile(); &#125; FileOutputStream fos = new FileOutputStream(file); BufferedOutputStream bos = new BufferedOutputStream(fos); byte[] b = new byte[1024]; bos.write(b); //bos.flush(); &#125;&#125; OKï¼Œå†æ¬¡è¿è¡Œä»£ç ï¼Œé¢çš„ç¥žå•Šï¼Ÿï¼Ÿï¼Ÿæ–‡ä»¶å¤§å°å±…ç„¶æ˜¯0å­—èŠ‚ã€‚ whyï¼Ÿ ä»”ç»†çš„ä½ ä¼šå‘çŽ°ï¼Œç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„ä»£ç ä¸­å¹¶æ²¡æœ‰è°ƒç”¨ flush() æ–¹æ³•ï¼Œå±…ç„¶å¯ä»¥æ­£å¸¸çš„å†™å…¥ã€‚ä¸ºä»€ä¹ˆç¬¬äºŒä¸ªå°±ä¸å¯ä»¥å‘¢ï¼Ÿè¿˜æ˜¯ä»Žæºç å…¥æ‰‹æ‰¾ç­”æ¡ˆå§ï¼ DataOutputStream ç»§æ‰¿ FilterOutputStream ï¼Œå®žçŽ°äº† DataOutput æŽ¥å£ã€‚æˆ‘ä»¬çŸ¥é“ FilterOutputStream ç±»é‡å†™äº† flush() æ–¹æ³•ï¼Œä½†æ˜¯å®žè´¨è¿˜æ˜¯è°ƒç”¨çˆ¶ç±»çš„ flush() æ–¹æ³•ã€‚DataOutputStream ç±»çš„ flush() æ–¹æ³•æ•ˆä»¿å…¶çˆ¶ç±» FilterOutputStream çš„åšæ³•ï¼Œå¦‚ä¸‹ï¼š 123public void flush() throws IOException &#123; out.flush(); &#125; é‚£ä¹ˆï¼Œå³ä½¿ä½ åœ¨ç¬¬ä¸€ä¸ªä¾‹å­çš„ä»£ç åŽé¢åŠ ä¸Š dos.flush() ç»“æžœä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œä¸Žä¸åŠ æ˜¯ä¸€æ ·çš„æ•ˆæžœï¼Œå› ä¸ºå®ƒä»¬çš„çˆ¶ç±» flush() æ–¹æ³•å‡ä¸ºç©ºï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä»£ç çš„ç¥žå¥‡æ‰€åœ¨ã€‚ å†çœ‹çœ‹ç¬¬äºŒä¸ªä»£ç çš„ â€œç—…å› â€ åœ¨å“ªé‡Œï¼Ÿå…ˆçœ‹çœ‹ BufferedOutputStream ç±»çš„ç»“æž„ï¼š 1public class BufferedOutputStream extends FilterOutputStream å†çœ‹çœ‹ï¼Œå®ƒçš„ flush() æ–¹æ³•ï¼š 123456789101112public synchronized void flush() throws IOException &#123; flushBuffer(); out.flush();&#125; /** Flush the internal buffer */ private void flushBuffer() throws IOException &#123; if (count &gt; 0) &#123; out.write(buf, 0, count); count = 0; &#125; &#125; ä¸é”™ï¼Œè¯¥ç±»é‡å†™äº† flush() æ–¹æ³•ï¼Œä¸åƒå‰é¢å‡ ä¸ªç±»é‚£æ ·ä¸æ˜¯ç»§æ‰¿å°±æ˜¯å±±å¯¨çˆ¶ç±»çš„ flush() æ–¹æ³•ã€‚BufferedOutputStream ç±»æ˜¯ä¸€ä¸ªä½¿ç”¨äº†ç¼“å†²æŠ€æœ¯çš„ç±»ï¼Œè¿™ç§ç±»ä¸€æŠŠéƒ½ä¼šè‡ªå·±å®žçŽ° flush() æ–¹æ³•ã€‚ é‚£ä¹ˆï¼Œæœ‰äººä¼šé—®ä½¿ç”¨è¿™ç§ç±»çš„æ—¶å€™ï¼Œéš¾é“å¿…é¡»ä½¿ç”¨ flush() æ–¹æ³•å—ï¼Œå½“ç„¶ä¸æ˜¯å–½ï¼Ÿï¼Ÿï¼ï¼ä¸è¿‡æœ‰ä¸ªå‰æï¼Œä½ çš„å­—èŠ‚æ•°æ®å¿…é¡»ä¸èƒ½å°äºŽ8KBã€‚å®žä¾‹ä»£ç ï¼Œæ³¨æ„æ²¡æœ‰ flush()æ–¹æ³•ã€‚ 1234567891011121314151617import java.io.BufferedOutputStream; import java.io.File; import java.io.FileOutputStream; public class Test &#123; public static void main(String[] args) throws Exception &#123; File file = new File("text.txt"); if (!file.exists()) &#123; file.createNewFile(); &#125; FileOutputStream fos = new FileOutputStream(file); BufferedOutputStream bos = new BufferedOutputStream(fos); byte[] b = new byte[1024*8]; bos.write(b); //bos.flush(); &#125;&#125; æ‰§è¡Œä»£ç ï¼Œä¼šäº§ç”Ÿ8KBçš„æ–‡æœ¬æ–‡ä»¶ã€‚ å½“ç„¶ï¼Œæ€Žä¹ˆå¯èƒ½æ¯æ—¶æ¯åˆ»éƒ½çŸ¥é“ä½ çš„æ•°æ®ä¸€å®šä¼šä¸å°äºŽ8KBå‘¢ï¼Œæ‰€ä»¥è°ƒç”¨ flush() æ–¹æ³•æ¯”è¾ƒå®‰å…¨ã€‚ ä¸è¿‡ï¼Œè¯åˆè¯´å›žæ¥ï¼Œä¸€èˆ¬ç”¨å®ŒIOæµä¹‹åŽï¼ˆå¦‚æžœä½ æœ‰ä¸€ä¸ªå¥½çš„ä¹ æƒ¯ï¼‰æˆ‘ä»¬éƒ½ä¼šåŽ»è°ƒç”¨ close() æ–¹æ³•ï¼Œçœ‹æºç å¯ä»¥çŸ¥é“è¯¥æ–¹æ³•ä¹Ÿæ˜¯è°ƒç”¨ç›¸å¯¹åº”çš„ flush() æ–¹æ³•ã€‚ è¿™é‡Œæé†’ä¸€ä¸‹ï¼Œå¦‚æžœä½ çš„æ–‡ä»¶è¯»å†™æ²¡æœ‰è¾¾åˆ°é¢„æœŸç›®çš„ï¼Œåä¹‹å…«ä¹æ˜¯å› ä¸ºä½ æ²¡æœ‰è°ƒç”¨ flush() æˆ–è€… close() æ–¹æ³•ã€‚ å¦å¤–ï¼Œå­—ç¬¦æµç±»å¤§å¤šæ•°éƒ½å®žçŽ°äº† flush() æˆ–è€… close() æ–¹æ³•ï¼Œåªä¸è¿‡ï¼Œå®ƒä»¬è°ƒç”¨çš„æ˜¯ StreamEncoder ç±»çš„è¯¥æ–¹æ³•ã€‚è¯¥ç±»ä½äºŽ sun.nio.cs åŒ…ä¸‹é¢ï¼Œå…¶æºç åœ¨æˆ‘ä»¬JDKä¸­æ˜¯æ²¡æœ‰çš„ã€‚ å¯ä»¥ç‚¹å‡» StreamEncoder.java æŸ¥çœ‹æºç ã€‚ flush ä¸Ž Writerè¯¥ç±» Writer æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå£°æ˜Žå¦‚ä¸‹ï¼š 1public abstract class Writer implements Appendable, Closeable, Flushable Writer ç±»çš„ flush() æ–¹æ³•æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå…¶å­ç±»ä¸€èˆ¬éƒ½å®žçŽ°äº†è¯¥æ–¹æ³•ã€‚ æ‰€ä»¥ï¼Œä¸€èˆ¬ä½¿ç”¨å­—ç¬¦æµä¹‹åŽéœ€è¦è°ƒç”¨ä¸€ä¸‹ flush() æˆ–è€… close() æ–¹æ³•ã€‚ 1abstract public void flush() throws IOException; ç»†èŠ‚è¯·çœ‹JDKçš„APIï¼Œæˆ–è€…Javaçš„æºç ä»¥åŠä¸Šé¢çš„ StreamEncoder ç±»æºç ã€‚ ä»Šå¤©å°±è¯´åˆ°è¿™é‡Œå§ï¼Œæœ¬æ–‡ä¸»è¦å€ŸåŠ©Java IOä¸­å­—èŠ‚æµä¸Žå­—ç¬¦æµçš„ flush() æ–¹æ³•ï¼Œæ¥è¯´æ˜Žå­¦ç¼–ç¨‹è¯­è¨€çœ‹æºç å’Œæ€è€ƒæ˜¯å¾ˆé‡è¦çš„ã€‚ æ€»ä¹‹ï¼Œä¸ç®¡ä½ ä½¿ç”¨å“ªç§æµï¼ˆå­—ç¬¦ã€å­—èŠ‚ã€å…·æœ‰ç¼“å†²çš„æµï¼‰æŠ€æœ¯ï¼Œä¸å¦¨è°ƒç”¨ä¸€ä¸‹ flush() æˆ–è€… close() æ–¹æ³•ï¼Œé˜²æ­¢æ•°æ®æ— æ³•å†™åˆ°è¾“å‡ºæµä¸­ã€‚ å­¦ä¹ æ²¡æœ‰ä¸€è¹´è€Œå°±çš„æ–¹æ³•ï¼ŒåšæŒæ€è€ƒã€ç»ƒä¹ æ‰æ˜¯çŽ‹é“~]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>flush OutputStream JavaSE</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macOS ç”Ÿæˆ RSA å…¬é’¥å’Œç§é’¥]]></title>
    <url>%2F2019%2F05%2F11%2FmacOS-%E7%94%9F%E6%88%90-RSA-%E5%85%AC%E9%92%A5%E5%92%8C%E7%A7%81%E9%92%A5%2F</url>
    <content type="text"><![CDATA[å¦‚æžœä½ æ²¡æœ‰å®‰è£… opensslï¼Œè¯·å…ˆä½¿ç”¨ brew å®‰è£…å®ƒã€‚ ç”Ÿæˆ RSA ç§é’¥åœ¨ macOS ç»ˆç«¯è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼Œä¼šç”Ÿæˆ1024ä½çš„ç§é’¥ï¼Œå¦‚ä¸‹ï¼š 1openssl genrsa -out rsa_private.pem 1024 æ‰§è¡ŒæˆåŠŸåŽï¼Œåœ¨å½“å‰ç›®å½•ä¼šç”Ÿæˆ rsa_private.pem æ–‡ä»¶äº†ã€‚ æ³¨æ„ï¼šè¿™é‡Œç”Ÿæˆçš„æ˜¯ PKCS1 æ ¼å¼çš„æ–‡ä»¶ï¼Œä¹Ÿç§°ä¹‹ä¸ºä¼ ç»Ÿçš„ç§é’¥æ ¼å¼ã€‚ ç”Ÿæˆ RSA å…¬é’¥å¾—åˆ°ç§é’¥åŽï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯ä»¥å¾—åˆ°å…¬é’¥ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1openssl rsa -in rsa_private.pem -out rsa_public.pem -pubout æ‰§è¡ŒæˆåŠŸåŽï¼Œåœ¨å½“å‰ç›®å½•ä¼šç”Ÿæˆ rsa_public.pem çš„æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯å…¬é’¥ã€‚ æ ¼å¼è½¬æ¢ æœ‰äº›åŽç«¯æœåŠ¡éœ€è¦ PKCS8 æ ¼å¼çš„å¯†é’¥ï¼Œå¯ä»¥ä½¿ç”¨ openssl å·¥å…·æŠŠ PKCS1 å’Œ PKCS8 è¿›è¡Œäº’è½¬ã€‚ PKCS å…¨ç§°æ˜¯ Public-Key Cryptography Standardsï¼Œæ˜¯ç”± RSA å®žéªŒå®¤ä¸Žå…¶å®ƒå®‰å…¨ç³»ç»Ÿå¼€å‘å•†ä¸ºä¿ƒè¿›å…¬é’¥å¯†ç çš„å‘å±•è€Œåˆ¶è®¢çš„ä¸€ç³»åˆ—æ ‡å‡†ã€‚ æŠŠ RSA ç§é’¥è½¬ PKCS1 è½¬æ¢ä¸º PKCS8 æ ¼å¼ï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š 1openssl pkcs8 -topk8 -inform PEM -in rsa_private.pem -outform PEM -nocrypt -out rsa_private_pkcs8.pem æŠŠ RSA ç§é’¥ PKCS8 æ ¼å¼è½¬æ¢ä¸º PKCS1 æ ¼å¼ï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š 1openssl rsa -in rsa_private_pkcs8.pem -out pkcs1.pem ä»¥ä¸Šç”Ÿæˆçš„ RSA(pem) æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ vimã€vscode ç­‰æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æŸ¥çœ‹ã€‚ æ— è®ºæ˜¯ PKCS1 è¿˜æ˜¯ PKCS8ï¼Œå®ƒä»¬éƒ½æ˜¯ PEM ç¼–ç å­˜å‚¨çš„æ ¼å¼ã€‚ PEM æ ¼å¼PEM æ ¼å¼æ—¢æ˜¯å¯¹ DER ç¼–ç è½¬ç ä¸º Base64 å­—ç¬¦æ ¼å¼ï¼Œé€šè¿‡è§£ç ï¼Œå°†ä¼šè¿˜åŽŸä¸º DER æ ¼å¼ã€‚å³ PEM æ˜¯å»ºç«‹åœ¨ DER ç¼–ç ä¹‹ä¸Šçš„ä¸€ç§æ ¼å¼ã€‚ æ€»ä¹‹ï¼ŒPEM æ˜¯æ˜Žæ–‡æ ¼å¼ï¼Œå¯ä»¥åŒ…å«è¯ä¹¦æˆ–è€…æ˜¯å¯†é’¥ï¼Œå…¶å†…å®¹é€šå¸¸æ˜¯ä»¥ç±»ä¼¼ â€”â€“BEGIN â€¦â€”â€“ å¼€å¤´ï¼Œä»¥ â€”â€“END â€¦â€”â€“ ä¸ºç»“å°¾çš„è¿™æ ·çš„æ ¼å¼ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123456789101112131415-----BEGIN RSA PRIVATE KEY-----MIICXQIBAAKBgQDX+VXh+9zZBC3jRLcLyGGygb/vuiQj13x9ElH9pQmUg29UJ0q1hcSFuoKmt4id8jyj82fI2PMISzoGucqQFm9HXIV65UcgeUx7REDhgZOBmSCWZ2lWe2Fnf/htyiy9YVEN4jL7H+b67cIcEDHgYZLtPvSZgyr0UyOMC+E40kTcnQIDAQABAoGBAKKsYD7l6VPgrPuY31LVrJi62ComB2Cjx1WhffZR3+RoF2vImNtkB0E+2Xffl9x3/6ry1IMove3KTzadrHBZJZi1Y6lmHE95uv0O4p16ETnqvKzO8MkcH3qVQe1ZEyNd/wXr4A8DW3ZlNP/QIPOgzK949yTiP53wapiRwExEf7nhAkEA7CbbdoslRzhQ9YY1Sdbmc7NHpZdKhkgZwOVJZBoRwfHtSnFcpQUlOzLGCOxP+tGn5mpzhmpDFeURbv7mgaQvtQJBAOogUtiJbffk0p3uu7r5nCBmC6BqbG8yVqBVk+r/gS5iHBeBQVypFGYYLPQ9daHWluNku07MhqarPcXytEk7ekkCQDBjofK/fmsCkixNTNwNiflJUiVOW/n6CjTphslZQhIGNb5cTkSOMlvYApZPffACR+pCA9wWKBrzbkgVOTx1XUUCQQDEKJLg47wkLy6brhLss6ewqW7iV3hEfhuAOFM3WB1mvEKnGt+lf/AcXfMEK54sGzvOh2475jaG3ABkoiWVGeUpAkAgckc/Pf7KVRF/mDVruMJBbJLYL4H4s78nssFQ4d9VyXKsIM/AHUxZ5ZKiC7vtEtaGrTLAiuIuQZzBgGpSHX/e-----END RSA PRIVATE KEY----- ä»¥ä¸‹æ˜¯è¯ä¹¦æ–‡ä»¶åç§°ï¼Œæ¥è‡ªç»´åŸºç™¾ç§‘ X.509 çš„æˆªå›¾ã€‚ è¦å§‹ç»ˆä¿æŒå­¦ä¹ çš„æ¿€æƒ…~]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>RSA OpenSSL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cå‡½æ•°ä¸­è¿”å›žå­—ç¬¦æ•°ç»„]]></title>
    <url>%2F2019%2F05%2F10%2FC%E5%87%BD%E6%95%B0%E4%B8%AD%E8%BF%94%E5%9B%9E%E5%AD%97%E7%AC%A6%E6%95%B0%E7%BB%84%2F</url>
    <content type="text"><![CDATA[å†…å®¹ç®€ä»‹åœ¨é˜…è¯»æœ¬ç¯‡æ–‡ç« ä¹‹å‰ï¼Œå»ºè®®å¤§å®¶çœ‹ä¸€ä¸‹ä¸‹é¢2ç¯‡æ–‡ç« ï¼š ä¸è§å¾—ä½ ä¼šè®¡ç®—Cå­—ç¬¦ä¸²é•¿åº¦ åŒå®¿åŒé£žçš„ malloc å’Œ free è¿™ç¯‡æ–‡ç« ä¸»è¦åˆ†äº«ä¸‰ä¸ªç‚¹ï¼š 1ã€ä¸ºä»€ä¹ˆä½œä¸ºå±€éƒ¨å˜é‡çš„å­—ç¬¦æ•°ç»„ä¸èƒ½ç›´æŽ¥è¿”å›žï¼Œè€Œå­—ç¬¦æŒ‡é’ˆå´å¯ä»¥? 2ã€å½“å­—ç¬¦æ•°ç»„æ˜¯å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œå‡½æ•°å¦‚ä½•è¿”å›žå®ƒï¼Ÿ 3ã€å­—ç¬¦æ•°ç»„(char [])å’Œå­—ç¬¦æŒ‡é’ˆ(char *)å¦‚ä½•äº’è½¬ï¼Ÿ å±€éƒ¨å˜é‡çš„å­—ç¬¦æ•°ç»„åœ¨Cä¸­å¦‚æžœæˆ‘ä»¬ç›´æŽ¥è¿”å›žå­—ç¬¦æ•°ç»„ï¼Œç¼–è¯‘ä¼šç›´æŽ¥æŠ¥è­¦å‘Šã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š 12345char * fork_user_name()&#123; char name[] = "veryitman"; return name;&#125; åœ¨Xcodeä¸­ç¼–è¯‘è­¦å‘Šä¿¡æ¯æ˜¯è¿™æ ·çš„ï¼š 1Address of stack memory associated with local variable 'name' returned åœ¨Linuxä¸Šé¢GCCç¼–è¯‘æ˜¾ç¤ºè­¦å‘Šæ˜¯è¿™æ ·çš„ï¼š 1warning: function returns address of local variable [-Wreturn-local-addr] æ— è®ºå“ªç§è­¦å‘Šä¿¡æ¯ï¼ŒåŸºæœ¬æ„æ€éƒ½æ˜¯å‘Šè¯‰æˆ‘ä»¬ä¸åº”è¯¥è¿”å›žä¸€ä¸ªå±€éƒ¨å˜é‡ name çš„åœ°å€ï¼ˆå‡½æ•°å†…éƒ¨çš„å˜é‡åœ¨æ ˆå†…å­˜ä¸Šï¼‰ã€‚ å¦‚æžœæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œå°† char æ”¹ä¸ºæŒ‡é’ˆå˜é‡ char * ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345char * fork_user_name2()&#123; char *name = "veryitman"; return name;&#125; æ— è®ºæ˜¯Linuxçš„GCCè¿˜æ˜¯Xcodeçš„Clangç¼–è¯‘å™¨éƒ½ä¸ä¼šæŠ¥å‡ºè­¦å‘Šã€‚ é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œå¸¸é‡æ˜¯æ”¾åœ¨æ•°æ®æ®µé‡Œé¢çš„ã€‚ è¿™é‡Œæ¯”è¾ƒç‰¹æ®Šï¼Œå±€éƒ¨å˜é‡ name ä¿å­˜åœ¨æ ˆä¸­ï¼Œä½†æ˜¯å­—ç¬¦ä¸² veryitman çš„å€¼æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä¿å­˜åœ¨å¸¸é‡åŒºã€‚å³ä¾¿å‡½æ•°è¿”å›žäº†ï¼Œæ•°æ®æ®µé‡Œé¢çš„å¸¸é‡æ•°æ®ä¹Ÿè¿˜ä¸ä¼šæ¶ˆäº¡ï¼Œå®ƒä¼šç›´åˆ°ç¨‹åºç»“æŸæ‰ä¼šæ¶ˆå¤±ï¼Œå…¶å†…å­˜ç©ºé—´ç›´åˆ°ç¨‹åºè¿è¡Œç»“æŸæ‰ä¼šè¢«é‡Šæ”¾ã€‚ æ‰€ä»¥ï¼Œè¿”å›žçš„åœ°å€æ˜¯ä¸€ä¸ªå®žé™…å­˜åœ¨çš„æœ‰æ•ˆåœ°å€ã€‚ 12345678910111213141516171819char * fork_user_name()&#123; char name[] = "veryitman"; return name;&#125;char * fork_user_name2()&#123; char *name = "veryitman"; return name;&#125;int main()&#123; printf("fork_user_name: %s\n", fork_user_name()); printf("fork_user_name2: %s\n", fork_user_name2()); return 0;&#125; ç”¨GCCç¼–è¯‘ã€è¿è¡ŒåŽçš„æ‰“å°ç»“æžœï¼Œå¦‚ä¸‹ï¼š 12fork_user_name: (null)fork_user_name2: veryitman æ€»ä¹‹ï¼Œåœ¨å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡åªè¦æ˜¯è¿”å›žç±»ä¼¼ int[]ã€char[]ã€long[] åœ°å€çš„ï¼Œéƒ½æ˜¯ä¸æ­£ç¡®çš„åšæ³•ã€‚ ä¸€åˆ‡çš†æœ‰å¯èƒ½ä¸‹é¢ä¾‹å­æ˜¯ä¸æ­£ç¡®çš„ï¼Œå¦‚ä¸‹ï¼š 12345char * v_string()&#123; char rest[10] = &#123;'\0'&#125;; return rest;&#125; 1ã€ä½¿ç”¨ static åœ¨Cè¯­è¨€ä¸­ï¼Œç”¨ static é™å®šå¤–éƒ¨å˜é‡ä¸Žå‡½æ•°ï¼Œè¯¥å¤–éƒ¨å˜é‡æˆ–è€…å‡½æ•°é™¤äº†å¯¹è¯¥æ‰€åœ¨çš„æ–‡ä»¶å¯è§å¤–ï¼Œå…¶ä»–æ–‡ä»¶éƒ½æ— æ³•è®¿é—®ã€‚ è€Œç”¨ static å£°æ˜Žå†…éƒ¨å˜é‡ï¼Œåˆ™è¯¥å˜é‡æ˜¯æŸä¸ªç‰¹å®šå‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œåªèƒ½åœ¨è¯¥å‡½æ•°ä¸­ä½¿ç”¨ã€‚ä½†å®ƒä¸Žè‡ªåŠ¨å˜é‡ä¸åŒçš„æ˜¯ï¼Œä¸ç®¡å…¶æ‰€åœ¨å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ï¼Œå®ƒä¸€ç›´å­˜åœ¨ï¼Œè€Œä¸åƒè‡ªåŠ¨å˜é‡é‚£æ ·ï¼Œéšç€æ‰€åœ¨å‡½æ•°çš„è¢«è°ƒç”¨å’Œé€€å‡ºè€Œå­˜åœ¨å’Œæ¶ˆå¤±ã€‚æ¢å¥è¯è¯´ï¼Œstatic ç±»åž‹çš„å†…éƒ¨å˜é‡æ˜¯ä¸€ç§åªèƒ½åœ¨æŸä¸ªç‰¹å®šå‡½æ•°ä¸­ä½¿ç”¨ä½†ä¸€ç›´å æ®å­˜å‚¨ç©ºé—´çš„å˜é‡ã€‚ æ‰€ä»¥ä½¿ç”¨staticä¿®é¥°ä¸€ä¸‹ï¼Œå°±æ²¡æœ‰é—®é¢˜äº†ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345char * v_string()&#123; static char rest[10] = &#123;'\0'&#125;; return rest;&#125; 2ã€ä½¿ç”¨ malloc è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºä½¿ç”¨ malloc åˆ†é…çš„å†…å­˜æ˜¯åœ¨å †ä¸Šè€Œä¸æ˜¯åœ¨æ ˆå†…å­˜ä¸Šé¢ã€‚ä½†æ˜¯è¦è®°å¾—å°†å…¶åœ¨è°ƒç”¨æ–¹ä½¿ç”¨ free é‡Šæ”¾ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œå¦åˆ™å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼é—®é¢˜ã€‚ å…·ä½“å¯ä»¥çœ‹çœ‹ åŒå®¿åŒé£žçš„ malloc å’Œ free) è¿™ç¯‡æ–‡ç« ã€‚ 123456char * v_string()&#123; char *p = (char *)malloc(10 * sizeof(char)); p = "\0"; return p;&#125; 3ã€å…¨å±€å˜é‡ è¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚å…¨å±€å˜é‡åœ¨ç¨‹åºçœŸä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œæ‰€ä»¥ä½¿ç”¨å…¨å±€å˜é‡ä¹Ÿå¯ä»¥è§£å†³ç±»ä¼¼é—®é¢˜ã€‚ ä½†æ˜¯è¿™ç§æ–¹æ¡ˆå°±ä¼šè®©è¿™ä¸ªå°è£…çš„æ–¹æ³•ä¸å¤Ÿå†…èšï¼Œå› ä¸ºå®ƒä¾èµ–äº†å…¨å±€å˜é‡ã€‚ 123456char g_rest[100];char * v_string()&#123; strcpy(g_rest, "verytiamn"); return g_rest;&#125; 4ã€è¿”å›žå½¢å‚æŒ‡é’ˆå˜é‡ åœ¨Linux Kernel(å†…æ ¸æºç ç‰ˆæœ¬5.0.7)ä¸­ï¼Œå‡½æ•° strcpy çš„å®žçŽ°å¦‚ä¸‹ï¼š 1234567891011121314151617#ifndef __HAVE_ARCH_STRCPY/** * strcpy - Copy a %NUL terminated string * @dest: Where to copy the string to * @src: Where to copy the string from */#undef strcpychar *strcpy(char *dest, const char *src)&#123; char *tmp = dest; while ((*dest++ = *src++) != '\0') /* nothing */; return tmp;&#125;EXPORT_SYMBOL(strcpy);#endif å‚è€ƒå†…æ ¸å®žçŽ°ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹è‡ªå·±çš„ä»£ç ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456char * v_string(char *s1, char *s2)&#123; char *tmp = s1; // çœç•¥... return tmp;&#125; è¿™é‡Œè¡¥å……å¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå‡½æ•° strcpy åœ¨glibcå’ŒLinux Kernelä¸­å®žçŽ°ä¸ä¸€æ ·ã€‚ åœ¨glibcçš„æ–°ç‰ˆä¸­(2.29ç‰ˆæœ¬)ï¼Œæœ¬è´¨æ˜¯è°ƒç”¨äº†å‡½æ•° memcpyï¼Œ å®žçŽ°å¦‚ä¸‹ï¼š 123456789101112131415#include &lt;stddef.h&gt;#include &lt;string.h&gt;#undef strcpy#ifndef STRCPY# define STRCPY strcpy#endif/* Copy SRC to DEST. */char * STRCPY (char *dest, const char *src)&#123; return memcpy (dest, src, strlen (src) + 1);&#125;libc_hidden_builtin_def (strcpy) åŒ…æ‹¬ strncpy åœ¨glibcå’ŒLinux Kernelä¸­å®žçŽ°ä¹Ÿä¸ä¸€æ ·ï¼Œæœ‰å…´è¶£çš„å¯ä»¥åŽ»çœ‹çœ‹æºç ã€‚ å­—ç¬¦æ•°ç»„å’Œå­—ç¬¦æŒ‡é’ˆçš„äº’è½¬char [] è½¬ char *è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æŽ¥è¿›è¡Œèµ‹å€¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678int main()&#123; char c_str_array[] = "veryitman.com"; char *p_str; p_str = c_str_array; printf("p_str: %s\n", p_str); return 0;&#125; char * è½¬ char []æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç›´æŽ¥è¿›è¡Œèµ‹å€¼å‘¢ï¼Ÿæ’¸æ®µä»£ç çœ‹çœ‹ï¼Œå¦‚ä¸‹ï¼š 12345678int main()&#123; char c_str_array[] = "veryitman.com"; char *p_str = "veryitman.com"; c_str_array = p_str; printf("c_str_array: %s\n", c_str_array); return 0;&#125; å¾ˆé—æ†¾ï¼Œç¼–è¯‘æŠ¥é”™ï¼ŒGCCç¼–è¯‘é”™è¯¯æˆªå›¾å¦‚ä¸‹ï¼š Clangç¼–è¯‘é”™è¯¯å¦‚ä¸‹ï¼š 1Array type &apos;char [14]&apos; is not assignable å¯ä»¥è€ƒè™‘ä½¿ç”¨ strncpy æ¥å®žçŽ°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main()&#123; char c_str_array[] = "veryitman.com"; char *p_str = "veryitman.com"; strncpy(c_str_array, p_str, strlen(p_str)); printf("c_str_array: %s\n", c_str_array); return 0&#125; æ—¶é—´å¯ä»¥æ”¹å˜ä¸€åˆ‡ï¼Œä½†ä½ å¾—åšç‚¹ä»€ä¹ˆï¼]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>strcpy char[]</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒå®¿åŒé£žçš„ malloc å’Œ free]]></title>
    <url>%2F2019%2F05%2F02%2F%E5%8F%8C%E5%AE%BF%E5%8F%8C%E9%A3%9E%E7%9A%84-malloc-%E5%92%8C-free%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹å‡½æ•° malloc å’Œ free æ˜¯ä¸€å¯¹å¥½æœ‹å‹ï¼Œå‡ ä¹Žæ˜¯å½¢å½±ä¸ç¦»ã€‚æœ‰ malloc çš„åœ°æ–¹å°±åº”è¯¥æœ‰ free çš„å­˜åœ¨ã€‚ ä»Šå¤©è·Ÿå¤§å®¶èŠèŠ malloc å’Œ free è¿™å¯¹å¥½åŸºå‹ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯å¯¹å †å†…å­˜è¿›è¡Œç®¡ç†çš„å‡½æ•°ï¼Œå¦å¤–è¿˜æœ‰ callocã€reallocã€reallocfã€valloc ç­‰å †å†…å­˜ç®¡ç†å‡½æ•°ã€‚ void *åœ¨è¿›è¡Œä¸‹é¢è¯é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›žå¿†ä¸€ä¸‹ void * æ˜¯ä»€ä¹ˆï¼Ÿ void * è¡¨ç¤ºæœªç¡®å®šç±»åž‹çš„æŒ‡é’ˆã€‚C/C++è§„å®šï¼Œvoid * ç±»åž‹å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºä»»ä½•å…¶å®ƒç±»åž‹çš„æŒ‡é’ˆã€‚ void * ä¹Ÿè¢«ç§°ä¹‹ä¸ºæ— ç±»åž‹æŒ‡é’ˆï¼Œvoid * å¯ä»¥æŒ‡å‘ä»»æ„ç±»åž‹çš„æ•°æ®ï¼Œå°±æ˜¯è¯´å¯ä»¥ç”¨ä»»æ„ç±»åž‹çš„æŒ‡é’ˆå¯¹ void * èµ‹å€¼ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123void *p1;int *p2;p1 = p2; ä½†ä¸€èˆ¬ä¸ä¼šåè¿‡æ¥ä½¿ç”¨ï¼Œå¦‚ä¸‹ç¤ºä¾‹åœ¨æœ‰äº›ç¼–è¯‘å™¨ä¸Šé¢å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œæœ‰äº›å°±ä¸è¡Œï¼š 123void *p1;int *p2;p2 = p1; å¯ä»¥ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œå°† void * è½¬æ¢ä¸ºå¯¹åº”çš„æŒ‡é’ˆç±»åž‹å†è¿›è¡Œèµ‹å€¼ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123void *p1;int *p2;p2 = (char *)p1; ç”±äºŽ GNU å’Œ ANSI å¯¹ void * ç±»åž‹æŒ‡é’ˆå‚ä¸Žè¿ç®—çš„è§„å®šä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸ºäº†å…¼å®¹äºŒè€…å¹¶ä¸”è®©ç¨‹åºæœ‰æ›´å¥½çš„å…¼å®¹æ€§ï¼Œæœ€å¥½è¿˜æ˜¯å°† void * è½¬æ¢ä¸ºæœ‰æ˜Žç¡®ç±»åž‹çš„æŒ‡é’ˆå†å‚ä¸Žè¿ç®—ï¼Œå¦‚ä¸‹ç¤ºä¾‹ã€‚ 1234void *pd;char *pc = (char *)pd;pc ++;pc += 1; mallocå‡½æ•°åŽŸåž‹ï¼š 1void * malloc(size_t size); malloc å‘ç³»ç»Ÿç”³è¯·åˆ†é…æŒ‡å®š size ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œå³ malloc å‡½æ•°ç”¨æ¥ä»Žå †ç©ºé—´ä¸­ç”³è¯·æŒ‡å®šçš„ size ä¸ªå­—èŠ‚çš„å†…å­˜å¤§å°ï¼Œè¿”å›žç±»åž‹æ˜¯ void * ç±»åž‹ï¼Œå¦‚æžœæˆåŠŸï¼Œå°±ä¼šè¿”å›žæŒ‡å‘ç”³è¯·åˆ†é…çš„å†…å­˜ï¼Œå¦åˆ™è¿”å›žç©ºæŒ‡é’ˆï¼Œæ‰€ä»¥ malloc ä¸ä¿è¯ä¸€å®šæˆåŠŸã€‚ æŸ¥çœ‹å‡½æ•°æ‰‹å†Œæˆ–è€…ç›´æŽ¥åœ¨Linuxã€macOSç­‰Unixç³»ç»Ÿä¸Šé¢ç›´æŽ¥ man malloc ä¼šæ˜¾ç¤ºå¯¹åº”çš„å‡½æ•°ä¿¡æ¯ï¼š 1234The malloc() function allocates size bytes of memory and returns a pointer to the allocated memory.If successful, malloc() function return a pointer to allocated memory. If there is an error, they return a NULL pointer and set errno to ENOMEM. å¦å¤–éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ malloc å‡½æ•°åˆ†é…å†…å­˜ç©ºé—´æˆåŠŸåŽï¼Œmalloc ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œåˆå§‹åŒ–ï¼Œé‡Œè¾¹æ•°æ®æ˜¯éšæœºçš„åžƒåœ¾æ•°æ®ï¼Œæ‰€ä»¥ä¸€èˆ¬ç»“åˆ memset å‡½æ•°å’Œ malloc å‡½æ•° ä¸€èµ·ä½¿ç”¨ã€‚ 123456int *arr;arr = (int *)malloc(10 * sizeof(int));if (NULL != arr) &#123; memset(arr, 0, 10 * sizeof(int)); printf("arr: %p\n", arr);&#125; 123456char *arr;arr = (char *)malloc(10 * sizeof(char));if (NULL != arr) &#123; memset(arr, '\0', 10 * sizeof(char)); printf("arr string: %s\n", arr);&#125; ä¸ºäº†å®‰å…¨èµ·è§ï¼Œå»ºè®®å¯ä»¥è€ƒè™‘ä½¿ç”¨ calloc() å‡½æ•°ï¼ŒåŽé¢ä¼šæåˆ°å®ƒã€‚ å‡½æ•° freeã€mallocã€calloc() éƒ½è¢«åŒ…å«åœ¨ stdlib.h å¤´æ–‡ä»¶ä¸­ï¼Œå½“ç„¶äº† malloc.h å¤´æ–‡ä»¶ä¹Ÿæœ‰å¯¹åº”çš„å‡½æ•°å£°æ˜Žï¼Œå®žçŽ°åœ¨ malloc.c æ–‡ä»¶ä¸­ã€‚ å…³äºŽ malloc å‡½æ•°ä¸­çš„ size å‚æ•°åŠ¡å¿…è¦å¤§äºŽæŒ‡é’ˆæœ¬èº«çš„æ•°å€¼ï¼Œåœ¨32ä½æ“ä½œç³»ç»Ÿä¸Šï¼ŒæŒ‡é’ˆå ç”¨4å­—èŠ‚çš„å¤§å°ï¼›åœ¨64ä½æ“ä½œç³»ç»Ÿä¸Šï¼ŒæŒ‡é’ˆå ç”¨8å­—èŠ‚çš„å¤§å°ã€‚ freeå‡½æ•°åŽŸåž‹ï¼š 1void free(void *ptr); æˆ‘ä»¬çŸ¥é“åœ¨ C è¯­è¨€ä¸­ï¼Œ å †ä¸Šçš„å†…å­˜ç©ºé—´ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼ˆJava æœ‰è‡ªåŠ¨å›žæ”¶æœºåˆ¶ï¼Œè€Œ C è¯­è¨€æ²¡æœ‰ï¼‰ï¼Œç›´åˆ°è°ƒç”¨ free å‡½æ•°ï¼Œæ‰ä¼šé‡Šæ”¾å †ä¸Šçš„å­˜å‚¨ç©ºé—´ï¼Œå³ free å‡½æ•°ä¼šé‡Šæ”¾æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åˆ†é…ç©ºé—´ã€‚ ä¸‹é¢æ˜¯å‡½æ•°æ‰‹å†ŒæŸ¥åˆ°å…³äºŽ free å‡½æ•°çš„èµ„æ–™ï¼š 12The free() function deallocates the memory allocation pointed to by ptr.If ptr is a NULL pointer, no operation is performed. å¯¹äºŽ free å‡½æ•°æˆ‘ä»¬è¦èµ°å‡ºä¸€ä¸ªè¯¯åŒºï¼Œä¸è¦ä»¥ä¸ºè°ƒç”¨äº† free å‡½æ•°ï¼Œå˜é‡å°±å˜ä¸º NULL å€¼äº†ã€‚æœ¬è´¨æ˜¯ free å‡½æ•°åªæ˜¯å‰²æ–­äº†æŒ‡é’ˆæ‰€æŒ‡çš„ç”³è¯·çš„é‚£å—å†…å­˜ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶æ²¡æœ‰æ”¹å˜æ‰€æŒ‡çš„åœ°å€ï¼ˆæœ¬èº«ä¿å­˜çš„åœ°å€å¹¶æ²¡æœ‰æ”¹å˜ï¼‰ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š 12345678910111213char *pchar = (char *)malloc(10 * sizeof(char)); if (NULL != pchar) &#123; strcpy(pchar, "blog"); /* pcharæ‰€æŒ‡çš„å†…å­˜è¢«é‡Šæ”¾ï¼Œä½†æ˜¯pcharæ‰€æŒ‡çš„åœ°å€ä»ç„¶ä¸å˜ */ free(pchar); /* è¯¥åˆ¤æ–­æ²¡æœ‰èµ·åˆ°é˜²é”™ä½œç”¨ï¼Œæ­¤æ—¶ pchar å¹¶ä¸ä¸º NULL */ if (NULL != pchar) &#123; strcpy(pchar, "it"); printf("pchar: %s", pchar); &#125;&#125; æ­£ç¡®ä¸”å®‰å…¨çš„åšæ³•æ˜¯å¯¹æŒ‡é’ˆå˜é‡å…ˆè¿›è¡Œ free ç„¶åŽå†å°†å…¶å€¼ç½®ä¸º NULLï¼Œå¦‚ä¸‹ä¸‹é¢ç¤ºä¾‹ï¼š 123456789101112131415char *pchar = (char *)malloc(10 * sizeof(char)); if (NULL != pchar) &#123; strcpy(pchar, "blog"); /* pcharæ‰€æŒ‡çš„å†…å­˜è¢«é‡Šæ”¾ï¼Œä½†æ˜¯pcharæ‰€æŒ‡çš„åœ°å€ä»ç„¶ä¸å˜ */ free(pchar); /* å°†å…¶ç½®ä¸º NULL å€¼ */ pchar = NULL; /* è¯¥åˆ¤æ–­æ²¡æœ‰èµ·åˆ°é˜²é”™ä½œç”¨ï¼Œæ­¤æ—¶ pchar å¹¶ä¸ä¸º NULL */ if (NULL != pchar) &#123; strcpy(pchar, "it"); printf("pchar: %s", pchar); &#125;&#125; å‡½æ•° free åªèƒ½é‡Šæ”¾allocçš„å†…å­˜ç©ºé—´ï¼Œå¯¹äºŽå…¶ä»–éžallocçš„æŒ‡é’ˆå˜é‡ä½¿ç”¨freeä¼šå‡ºçŽ°é”™è¯¯ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 1234int a = 0x2010;int *p;p = &amp;a;free(p); è¿è¡ŒåŽç›´æŽ¥è·ªäº†ï¼ŒæŠ¥ç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯ï¼š 1pointer being freed was not allocated. å¦å¤–ï¼Œå‘Šè¯‰å¤§å®¶ä¸€ä¸ªç§˜å¯†ï¼Œfree ä¸€ä¸ªç©ºæŒ‡é’ˆæ²¡é—®é¢˜ã€‚å¦‚ä¸‹ä¾‹å­ï¼š 123int *p;p = NULL;free(p); ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œåœ¨ free å‡½æ•°æºç ä¸ºè¯ï¼š 1234/* free(0) has no effect */if (mem == 0)&#123; return; &#125; è€Œ NULL åœ¨æºç ï¼ˆåœ¨ morecore.c æ–‡ä»¶ä¸­ï¼‰ä¸­å®šä¹‰å°±æ˜¯0ï¼Œå¦‚ä¸‹ï¼š 123#ifndef NULL# define NULL 0#endif mallocã€free å°ç»“1ã€è¿žç»­å†…å­˜å— malloc å‡½æ•°ç”³è¯·çš„æ˜¯è¿žç»­çš„ä¸€å—å†…å­˜ï¼Œå¦‚æžœæ‰€ç”³è¯·çš„å†…å­˜å—å¤§äºŽç›®å‰å †ä¸Šå‰©ä½™å†…å­˜å—ï¼Œåˆ™å†…å­˜åˆ†é…ä¼šå¤±è´¥ï¼Œå‡½æ•°è¿”å›ž NULL å€¼ã€‚ æ³¨æ„ï¼šä¸Šé¢è¯´çš„ å †ä¸Šå‰©ä½™å†…å­˜å— ä¸æ˜¯æ‰€æœ‰å‰©ä½™å†…å­˜å—ä¹‹å’Œï¼Œè€Œæ˜¯è¿žç»­çš„å†…å­˜ã€‚ 2ã€åŒå®¿åŒé£žæ‰å¥½ è°ƒç”¨ malloc å‡½æ•°å¤šä½™ free å‡½æ•°ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºç”³è¯·è¿‡çš„å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾å®Œã€‚è°ƒç”¨ malloc å‡½æ•°å°‘äºŽfree å‡½æ•°ï¼Œè‚¯å®šä¼šå‡ºé”™ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ç¨‹åºä¸­ malloc çš„ä½¿ç”¨æ¬¡æ•°åŠ¡å¿…è¦å’Œ free ç›¸ç­‰ï¼Œå¦åˆ™å¿…æœ‰éšæ‚£æˆ–è€…å‘ç”Ÿé”™è¯¯ã€‚ å¦‚ä¸‹é¢çš„ä¾‹å­ free ä¸¤æ¬¡æŒ‡é’ˆå˜é‡å°±ä¼šåœ¨è¿è¡Œæ—¶æŠ¥é”™ï¼š malloc: *** error for object 0x10071be90: pointer being freed was not allocatedï¼Œä¹Ÿç§°ä¹‹ä¸º double freeã€‚ 123char *pchar = (char *)malloc(10 * sizeof(char));free(pchar);free(pchar); å¯¹æŒ‡é’ˆå˜é‡è¿›è¡Œ free ä¹‹åŽï¼Œä¸€å®šè¦è®°å¾—å¯¹å…¶èµ‹å€¼ä¸º NULLï¼Œå¦åˆ™è¯¥æŒ‡é’ˆå°±æ˜¯ä¸€ä¸ªé‡ŽæŒ‡é’ˆï¼Œè¿™ä¸ªåœ¨ä¸Šé¢å·²ç»è¯´æ˜Žã€‚ 3ã€0å­—èŠ‚çš„å†…å­˜æœ‰æ¯’ ä½¿ç”¨ malloc å‡½æ•°ä¹Ÿå¯ä»¥ç”³è¯·0å­—èŠ‚çš„å†…å­˜ï¼Œè¯¥å‡½æ•°çš„è¿”å›žå€¼å¹¶ä¸æ˜¯ NULLï¼Œè€Œæ˜¯è¿”å›žä¸€ä¸ªæ­£å¸¸çš„å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¦‚æžœä½¿ç”¨è¿™ç§æ–¹å¼ç”³è¯·çš„å†…å­˜å¾ˆå±é™©ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼ŒæŒ‡é’ˆ pchar æ˜¯ä¸€ä¸ªä½¿ç”¨ malloc å‡½æ•°åˆ›å»ºçš„å ç”¨0å­—èŠ‚çš„å†…å­˜ç©ºé—´çš„ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œif (NULL == pchar) å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œè€Œæ˜¯æ‰§è¡Œäº† else è¯­å¥ä¸­çš„ä»£ç ï¼Œæ‰§è¡Œåˆ° strcpy(pchar, &quot;blog&quot;) å°±ç›´æŽ¥å´©æºƒäº†ã€‚ 123456789char *pchar = (char *)malloc(0);if (NULL == pchar) &#123; printf("malloc 0 byte memory failed.\n");&#125; else &#123; printf("malloc 0 byte successfully and pchar: %s.\n", pchar); pchar = "veryitman"; strcpy(pchar, "blog"); printf("pchar: %s.\n", pchar);&#125; 4ã€è°ƒçš®çš„free ä½¿ç”¨éžallocæ–¹å¼åˆ›å»ºçš„å†…å­˜ï¼Œä½¿ç”¨ free å‡½æ•°ä¼šæŠ¥é”™ï¼Œè¿™ä¸ªè¦æ³¨æ„ã€‚å¦å¤–ï¼Œfree ç©ºæŒ‡é’ˆæ²¡æœ‰å½±å“ã€‚ callocã€reallocã€reallocfã€valloc1ã€calloc å‡½æ•° 1void * calloc(size_t count, size_t size); åœ¨å †ä¸Šï¼Œåˆ†é… n*size ä¸ªå­—èŠ‚ï¼Œå¹¶åˆå§‹åŒ–ä¸º0ï¼Œè¿”å›ž void *ç±»åž‹ï¼Œè¿”å›žå€¼æƒ…å†µè·Ÿ malloc ä¸€è‡´ã€‚ å‡½æ•° malloc() å’Œå‡½æ•° calloc() çš„ä¸»è¦åŒºåˆ«æ˜¯å‰è€…ä¸èƒ½åˆå§‹åŒ–æ‰€åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œè€ŒåŽè€…èƒ½ã€‚å¦‚æžœç”± malloc() å‡½æ•°åˆ†é…çš„å†…å­˜ç©ºé—´åŽŸæ¥æ²¡æœ‰è¢«ä½¿ç”¨è¿‡ï¼Œåˆ™å…¶ä¸­çš„æ¯ä¸€ä½å¯èƒ½éƒ½æ˜¯0ï¼›åä¹‹ï¼Œå¦‚æžœè¿™éƒ¨åˆ†å†…å­˜æ›¾ç»è¢«åˆ†é…è¿‡ï¼Œåˆ™å…¶ä¸­å¯èƒ½é—ç•™æœ‰å„ç§å„æ ·çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ malloc() å‡½æ•°çš„ç¨‹åºå¼€å§‹æ—¶(å†…å­˜ç©ºé—´è¿˜æ²¡æœ‰è¢«é‡æ–°åˆ†é…)èƒ½æ­£å¸¸è¿›è¡Œï¼Œä½†ç»è¿‡ä¸€æ®µæ—¶é—´(å†…å­˜ç©ºé—´è¿˜å·²ç»è¢«é‡æ–°åˆ†é…)å¯èƒ½ä¼šå‡ºçŽ°é—®é¢˜ã€‚ å‡½æ•° calloc() ä¼šå°†æ‰€åˆ†é…çš„å†…å­˜ç©ºé—´ä¸­çš„æ¯ä¸€ä½éƒ½åˆå§‹åŒ–ä¸ºé›¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä½ æ˜¯ä¸ºå­—ç¬¦ç±»åž‹æˆ–æ•´æ•°ç±»åž‹çš„å…ƒç´ åˆ†é…å†…å­˜ï¼Œé‚£ä¹ˆè¿™äº›å…ƒç´ å°†ä¿è¯ä¼šè¢«åˆå§‹åŒ–ä¸º0ï¼›å¦‚æžœä½ æ˜¯ä¸ºæŒ‡é’ˆç±»åž‹çš„å…ƒç´ åˆ†é…å†…å­˜ï¼Œé‚£ä¹ˆè¿™äº›å…ƒç´ é€šå¸¸ä¼šè¢«åˆå§‹åŒ–ä¸ºç©ºæŒ‡é’ˆï¼›å¦‚æžœä½ ä¸ºå®žåž‹æ•°æ®åˆ†é…å†…å­˜ï¼Œåˆ™è¿™äº›å…ƒç´ ä¼šè¢«åˆå§‹åŒ–ä¸ºæµ®ç‚¹åž‹çš„é›¶ã€‚ 123The calloc() function contiguously allocates enough space for count objects that are size bytes of memory each and returns a pointer to the allocated memory.The allocated memory is filled with bytes of value zero. 2ã€realloc() å‡½æ•° 1void * realloc(void *ptr, size_t size); realloc() ä¼šå°† ptr æ‰€æŒ‡å‘çš„å†…å­˜å—çš„å¤§å°ä¿®æ”¹ä¸º sizeï¼Œå¹¶å°†æ–°çš„å†…å­˜æŒ‡é’ˆè¿”å›žã€‚å‡è®¾ä¹‹å‰å†…å­˜å—çš„å¤§å°ä¸º nï¼Œå¦‚æžœ size &lt;= nï¼Œé‚£ä¹ˆæˆªå–çš„å†…å®¹ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¦‚æžœ size &gt; nï¼Œé‚£ä¹ˆæ–°åˆ†é…çš„å†…å­˜ä¸ä¼šè¢«åˆå§‹åŒ–ã€‚ å¯¹äºŽä¸Šé¢è¯´çš„æ–°çš„å†…å­˜æŒ‡é’ˆåœ°å€å¯èƒ½å˜ä¹Ÿå¯èƒ½ä¸å˜ï¼Œå‡å¦‚åŽŸæ¥allocçš„å†…å­˜åŽé¢è¿˜æœ‰è¶³å¤Ÿå¤šå‰©ä½™å†…å­˜çš„è¯ï¼ŒreallocåŽçš„å†…å­˜=åŽŸæ¥çš„å†…å­˜+å‰©ä½™å†…å­˜ï¼Œreallocè¿˜æ˜¯è¿”å›žåŽŸæ¥å†…å­˜çš„åœ°å€å³ä¸ä¼šåˆ›å»ºæ–°çš„å†…å­˜ã€‚å‡å¦‚åŽŸæ¥allocçš„å†…å­˜åŽé¢æ²¡æœ‰è¶³å¤Ÿå¤šå‰©ä½™å†…å­˜çš„è¯ï¼Œreallocå°†ç”³è¯·æ–°çš„å†…å­˜ï¼Œç„¶åŽæŠŠåŽŸæ¥çš„å†…å­˜æ•°æ®æ‹·è´åˆ°æ–°å†…å­˜é‡Œï¼ŒåŽŸæ¥çš„å†…å­˜å°†è¢«freeæŽ‰ï¼Œreallocè¿”å›žæ–°å†…å­˜çš„åœ°å€ã€‚ å¦å¤–è¦æ³¨æ„ï¼Œå¦‚æžœ ptr = NULLï¼Œé‚£ä¹ˆç›¸å½“äºŽè°ƒç”¨ malloc(size)ï¼›å¦‚æžœ ptr != NULLä¸”size = 0ï¼Œé‚£ä¹ˆç›¸å½“äºŽè°ƒç”¨ free(ptr)ã€‚ å½“è°ƒç”¨ realloc å¤±è´¥çš„æ—¶å€™ï¼Œè¿”å›žNULLï¼Œå¹¶ä¸”åŽŸæ¥çš„å†…å­˜ä¸æ”¹å˜ï¼Œä¸ä¼šé‡Šæ”¾ä¹Ÿä¸ä¼šç§»åŠ¨ã€‚ 123456789The realloc() function tries to change the size of the allocation pointed to by ptr to size, and returns ptr. If there is not enough room to enlarge the memory allocation pointed to by ptr, realloc() creates a new allocation, copies as much of the old data pointed to by ptr as will fit to the new allocation, frees the old allocation, and returns a pointer to the allocated memory. If ptr is NULL, realloc() is identical to a call to malloc() for size bytes. If size is zero and ptr is not NULL, a new, minimum sized object is allocated and the original object is freed. When extending a region allocated with calloc(3), realloc(3) does not guarantee that the additional memory is also zero-filled. çœ‹ä¸€ä¸‹æºç çš„å…³é”®éƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š 123456789101112void * __libc_realloc (void *oldmem, size_t bytes)&#123; // çœç•¥... #if REALLOC_ZERO_BYTES_FREES if (bytes == 0 &amp;&amp; oldmem != NULL) &#123; __libc_free (oldmem); return 0; &#125;#endif // çœç•¥...&#125; è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œå¦‚æžœ oldmem ä¸ä¸ºNULLä¸” bytes ä¸º0çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œ free æ“ä½œã€‚å¦‚ä¸‹é¢çš„ä¾‹å­è¿è¡ŒåŽä¼šæŠ¥é”™ã€‚ 123456789101112131415#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt; int main()&#123; char *pre_ptr = (char *)malloc(20); int bytes = 0; if(NULL != pre_ptr) &#123; void *ptr = realloc(pre_ptr, bytes); // å¯¹pre_ptrè¿›è¡Œäº†double freeï¼Œè¿™ç§æ¡ä»¶ä¸‹æºç ä¸­ä¼šè¿›è¡Œä¸€æ¬¡free free(pre_ptr); &#125; return 0;&#125; æ‰€ä»¥ä¸ºäº†ä¿é™©èµ·è§ï¼Œè¦å¯¹ bytes è¿›è¡Œåˆ¤æ–­å†åšå¤„ç†ã€‚ ä¼ é€’ç»™ realloc çš„æŒ‡é’ˆå˜é‡å¿…é¡»æ˜¯å…ˆå‰é€šè¿‡ malloc()ã€ calloc() æˆ– realloc() ç­‰allocåˆ†é…çš„ï¼Œå¦åˆ™ä¼šæŠ¥ pointer being realloc&#39;d was not allocated. é”™è¯¯ã€‚å¦‚ä¸‹ä¾‹å­ï¼ˆè¿è¡Œç›´æŽ¥æŠ¥é”™ï¼‰ï¼š 12char *p = "";void *newP = realloc(p, 10); 3ã€reallocf() å‡½æ•° 1void * reallocf(void *ptr, size_t size); reallocf() å‡½æ•°æ˜¯ç”± FreeBSD å®žçŽ°çš„ï¼Œå®ƒä¼šåœ¨ä»»ä½•æƒ…å†µä¸‹é‡Šæ”¾è¾“å…¥çš„æŒ‡é’ˆï¼ˆå³ä½¿æ˜¯å†åˆ†é…å¤±è´¥ä¹‹åŽï¼‰ã€‚reallocf() ä¸€æ ·ä¼šè°ƒç”¨ realloc å‡½æ•°ï¼Œä½†æ˜¯åªæœ‰æˆ‘ä»¬åœ¨èŽ·å¾—ç©ºçš„æŒ‡é’ˆä¹‹åŽæ‰ä¼šè°ƒç”¨ free å‡½æ•°ã€‚ ä¸‹é¢æ˜¯ reallocf å‡½æ•°å…·ä½“çš„å®žçŽ°éƒ¨åˆ†ï¼š 12345678void * reallocf(void *p, size_t size) &#123; void *ptr = realloc(p, size); if (!p) &#123; free(p); &#125; return ptr;&#125; 123The reallocf() function is identical to the realloc() function, except that it will free the passed pointer when the requested memory cannot be allocated.This is a FreeBSD specific API designed to ease the problems with traditional coding styles for realloc causing memory leaks in libraries. 4ã€valloc() å‡½æ•° 1void * valloc(size_t size); è¿™ä¸ªå‡½æ•°æ˜¯æœ€å°‘è§ä¹Ÿæ˜¯æœ€å°‘ç”¨çš„ä¸€ä¸ªå‡½æ•°ã€‚ malloc æˆ– realloc è¿”å›žçš„æ˜¯ä»¥8å­—èŠ‚å¯¹é½çš„å†…å­˜åœ°å€ï¼Œåœ¨64bitsä¸Šæ˜¯16å­—èŠ‚å¯¹é½ã€‚ç„¶è€Œ memalign æˆ– valloc å¯ä»¥æ›´å¤§çš„ç²’åº¦è¿›è¡Œå­—èŠ‚å¯¹é½ã€‚ valloc æ˜¯ä¸€ä¸ªåºŸå¼ƒçš„å‡½æ•°ï¼Œåˆ†é… size å¤§å°çš„å­—èŠ‚ï¼Œè¿”å›žå·²åˆ†é…çš„å†…å­˜åœ°å€æŒ‡é’ˆï¼Œå…¶å†…å­˜åœ°å€å°†æ˜¯é¡µå¤§å°(page size)çš„å€æ•°ï¼Œå¦‚æžœåˆ†é…å¤±è´¥è¿”å›ž NULLã€‚ 123The valloc() function allocates size bytes of memory and returns a pointer to the allocated memory. The allocated memory is aligned on a page boundary. è¯´äº†è¿™ä¹ˆå¤šï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¾‹å­ï¼Œå¦‚ä¸‹ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627// å¯¹å…¶åˆ†é…å†…å­˜ï¼Œè¿™ä¸ªæ—¶å€™pcharå€¼æ˜¯éšæœºçš„åžƒåœ¾å€¼char *pchar = (char *)malloc(16);// æ‰‹åŠ¨åˆå§‹åŒ–pcharçš„å€¼ï¼Œä¸‹é¢çš„æ–¹æ³•åˆ™ä¸éœ€è¦memset(pchar, 0, 16);// callocåˆ†é…å†…å­˜ï¼Œä¼šè‡ªåŠ¨è®¾ç½®ä¸º0ï¼Œä¸éœ€è¦memsetchar *pchar_orig = (char *)calloc(12, sizeof(char));// åœ¨åŽŸå†…å­˜åŸºç¡€ä¸Šï¼Œåœ¨å †å†…å­˜ç©ºé—´ä¸­è¿žç»­å¢žåŠ å†…å­˜// å¦‚æžœåŽŸå†…å­˜æ²¡æœ‰è¿žç»­ç©ºé—´å¯æ‹“å±•ï¼Œreallocä¼šæ–°åˆ†é…ä¸€ä¸ªç©ºé—´ï¼Œå°†åŽŸæœ‰å†…å­˜copyåˆ°æ–°ç©ºé—´ï¼Œç„¶åŽé‡Šæ”¾åŽŸå†…å­˜ // æ³¨æ„ï¼šreallocå’Œmallocï¼Œåªåˆ†é…å†…å­˜ä¸è¿›è¡Œèµ‹å€¼æ“ä½œchar *pchar_dest = (char *)realloc(pchar_orig, 10); // ç›¸å½“äºŽ malloc(60)char *pchar_ini = (char *)realloc(NULL, 60);free(pchar);pchar = NULL;free(pchar_orig);pchar_orig = NULL;free(pchar_dest);pchar_dest = NULL;free(pchar_ini);pchar_ini = NULL; glibc ä¸Ž libcä¸Šé¢è¯´è¿‡è¿™äº›å†…å­˜ç®¡ç†å‡½æ•°éƒ½åœ¨å¤´æ–‡ä»¶ stdlib.h ä¸­ï¼Œå‡½æ•°å®žçŽ°éƒ½åœ¨ malloc.c æ–‡ä»¶ä¸­ï¼Œè¿™äº›éƒ½å¯ä»¥åœ¨ glibc ä¸­æ‰¾åˆ°å¯¹åº”çš„ä»£ç ï¼Œæˆ‘ä¸‹è½½çš„ glibc æ˜¯ 2.29 è¿™ä¸ªç‰ˆæœ¬ã€‚ libc æ˜¯ Stantard C Library çš„ç®€ç§°ï¼Œå®ƒæ˜¯ç¬¦åˆANSI Cæ ‡å‡†çš„ä¸€ä¸ªæ ‡å‡†å‡½æ•°åº“ã€‚libcåº“æä¾›Cè¯­è¨€ä¸­æ‰€ä½¿ç”¨çš„å®ï¼Œç±»åž‹çš„å®šä¹‰ï¼Œå­—ç¬¦ä¸²æ“ä½œç¬¦ï¼Œæ•°å­¦è®¡ç®—å‡½æ•°ä»¥åŠè¾“å…¥è¾“å‡ºå‡½æ•°ç­‰ã€‚æ­£å¦‚ANSI Cæ˜¯Cè¯­è¨€çš„æ ‡å‡†ä¸€æ ·ï¼Œlibcåªæ˜¯ä¸€ä¸ªå‡½æ•°åº“æ ‡å‡†ï¼Œæ¯ä¸ªæ“ä½œç³»ç»Ÿéƒ½ä¼šæŒ‰ç…§è¯¥æ ‡å‡†å¯¹æ ‡å‡†åº“è¿›è¡Œå…·ä½“å®žçŽ°ã€‚é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„libcæ˜¯ç‰¹æŒ‡æŸä¸ªæ“ä½œç³»ç»Ÿçš„æ ‡å‡†åº“ï¼Œæ¯”å¦‚ï¼šåœ¨Linuxæ“ä½œç³»ç»Ÿä¸‹æ‰€è¯´çš„libcå³glibcã€‚glibcæ˜¯ç±»Unixæ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„libcåº“ï¼Œå®ƒçš„å…¨ç§°æ˜¯GNU C Library. glibcæ˜¯ Linux ä¸‹çš„ C å‡½æ•°åº“ã€‚libc åº“æ˜¯Linuxä¸‹çš„ANSI Cçš„å‡½æ•°åº“ä¹Ÿæ³›æŒ‡ä¸€åˆ‡ç¬¦åˆCè§„èŒƒçš„åº“ï¼Œglibc æ˜¯Linuxä¸‹çš„GNU Cå‡½æ•°åº“ï¼Œæ˜¯ä¸€ç§ libc çš„å®žçŽ°ã€‚glibc æœ¬èº«æ˜¯GNUæ——ä¸‹çš„Cæ ‡å‡†åº“ï¼ŒåŽæ¥é€æ¸æˆä¸ºäº†Linuxçš„æ ‡å‡†Cåº“ã€‚Linuxä¸‹é¢çš„æ ‡å‡†Cåº“ä¸ä»…æœ‰è¿™ä¸€ä¸ªï¼Œå¦‚ uclibcã€klibcï¼Œä½†æ˜¯ glibc æ— ç–‘æ˜¯ç”¨å¾—æœ€å¤šçš„ï¼Œç”¨ glibc ä½œä¸ºç³»ç»Ÿçš„Cå‡½å¼åº“ï¼Œæ˜¯GNU/Linuxæ¼”è¿›çš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ï¼Œå¯ä»¥æŸ¥çœ‹ ç»´åŸºç™¾ç§‘ å¯¹ glibc çš„ä»‹ç»ã€‚ è¿˜æœ‰æ¯”å¦‚Androidçš„Bionicåº“ä¹Ÿæ˜¯ä¸€ç§libcçš„å®žçŽ°ï¼Œåªæ˜¯åœ¨Androidä¸Šé¢ä½¿ç”¨ç½¢äº†ã€‚Bionicæ˜¯Googleä¸ºAndroidæ“ä½œç³»ç»Ÿæä¾›çš„BSDæ ‡å‡†Cåº“çš„è¡ç”Ÿåº“ï¼Œä¸“é—¨ä¸ºç§»åŠ¨è®¡ç®—è€Œç²¾å¿ƒè®¾è®¡çš„ï¼Œé’ˆå¯¹ç§»åŠ¨è®¾å¤‡ä¸Šæœ‰é™çš„CPUå‘¨æœŸå’Œå¯ç”¨å†…å­˜è¿›è¡Œäº†è£å‰ªä»¥æé«˜å·¥ä½œæ•ˆçŽ‡ã€‚ è¿™é‡Œä¹Ÿè¯´ä¸€ä¸‹åŸºæœ¬çš„Cè¯­è¨€å‡½æ•°åº“ï¼Œè¿™ä¸ªåº“å¯ä»¥æ ¹æ®å¤´æ–‡ä»¶åˆ’åˆ†ä¸º 15 ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š æ–‡ä»¶ assert.hï¼šåŒ…å«å®å’Œä¿¡æ¯ï¼Œç”¨äºŽè¿›è¡Œè¯Šæ–­ï¼Œå¸®åŠ©ç¨‹åºè°ƒè¯•ï¼› æ–‡ä»¶ ctype.hï¼šåŒ…å«ç”¨æ¥æµ‹è¯•æŸä¸ªç‰¹å¾å­—ç¬¦çš„å‡½æ•°çš„å‡½æ•°åŽŸåž‹ï¼Œä»¥åŠç”¨æ¥è½¬æ¢å¤§å°å†™å­—æ¯çš„å‡½æ•°åŽŸåž‹ï¼› æ–‡ä»¶ errno.hï¼šå®šä¹‰ç”¨æ¥æŠ¥å‘Šé”™è¯¯æ¡ä»¶çš„å®ï¼› æ–‡ä»¶ float.hï¼šåŒ…å«ç³»ç»Ÿçš„æµ®ç‚¹æ•°å¤§å°é™åˆ¶ï¼› æ–‡ä»¶ math.hï¼šåŒ…å«æ•°å­¦åº“å‡½æ•°çš„å‡½æ•°åŽŸåž‹ï¼› æ–‡ä»¶ stddef.hï¼šåŒ…å«æ‰§è¡ŒæŸäº›è®¡ç®— C æ‰€ç”¨çš„å¸¸è§çš„å‡½æ•°å®šä¹‰ï¼› æ–‡ä»¶ stdio.hï¼šåŒ…å«æ ‡å‡†è¾“å…¥è¾“å‡ºåº“å‡½æ•°çš„å‡½æ•°åŽŸåž‹ï¼Œä»¥åŠä»–ä»¬æ‰€ç”¨çš„ä¿¡æ¯ï¼› æ–‡ä»¶ stdlib.hï¼šåŒ…å«æ•°å­—è½¬æ¢åˆ°æ–‡æœ¬ï¼Œä»¥åŠæ–‡æœ¬è½¬æ¢åˆ°æ•°å­—çš„å‡½æ•°åŽŸåž‹ï¼Œè¿˜æœ‰å†…å­˜åˆ†é…ã€éšæœºæ•°å­—ä»¥åŠå…¶ä»–å®žç”¨å‡½æ•°çš„å‡½æ•°åŽŸåž‹ï¼› æ–‡ä»¶ string.hï¼šåŒ…å«å­—ç¬¦ä¸²å¤„ç†å‡½æ•°çš„å‡½æ•°åŽŸåž‹ï¼› æ–‡ä»¶ time.hï¼šåŒ…å«æ—¶é—´å’Œæ—¥æœŸæ“ä½œçš„å‡½æ•°åŽŸåž‹å’Œç±»åž‹ï¼› æ–‡ä»¶ stdarg.hï¼šåŒ…å«å‡½æ•°åŽŸåž‹å’Œå®ï¼Œç”¨äºŽå¤„ç†æœªçŸ¥æ•°å€¼å’Œç±»åž‹çš„å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼› æ–‡ä»¶ signal.hï¼šåŒ…å«å‡½æ•°åŽŸåž‹å’Œå®ï¼Œç”¨äºŽå¤„ç†ç¨‹åºæ‰§è¡ŒæœŸé—´å¯èƒ½å‡ºçŽ°çš„å„ç§æ¡ä»¶ï¼› æ–‡ä»¶ setjmp.hï¼šåŒ…å«å¯ä»¥ç»•è¿‡ä¸€èˆ¬å‡½æ•°è°ƒç”¨å¹¶è¿”å›žåºåˆ—çš„å‡½æ•°çš„åŽŸåž‹ï¼Œå³éžå±€éƒ¨è·³è½¬ï¼› æ–‡ä»¶ locale.hï¼šåŒ…å«å‡½æ•°åŽŸåž‹å’Œå…¶ä»–ä¿¡æ¯ï¼Œä½¿ç¨‹åºå¯ä»¥é’ˆå¯¹æ‰€è¿è¡Œçš„åœ°åŒºè¿›è¡Œä¿®æ”¹ã€‚åœ°åŒºçš„è¡¨ç¤ºæ–¹æ³•å¯ä»¥ä½¿è®¡ç®—æœºç³»ç»Ÿå¤„ç†ä¸åŒçš„æ•°æ®è¡¨è¾¾çº¦å®šï¼Œå¦‚å…¨ä¸–ç•Œçš„æ—¥æœŸã€æ—¶é—´ã€ç¾Žå…ƒæ•°å’Œå¤§æ•°å­—ï¼› æ–‡ä»¶ limits.hï¼šå†³å®šäº†å„ç§å˜é‡ç±»åž‹çš„å„ç§å±žæ€§ã€‚å®šä¹‰åœ¨è¯¥å¤´æ–‡ä»¶ä¸­çš„å®é™åˆ¶äº†å„ç§å˜é‡ç±»åž‹ï¼ˆæ¯”å¦‚ charã€int å’Œ longï¼‰çš„å€¼ï¼› åœ¨ glibc åº“ä¸­å¯ä»¥æ‰¾åˆ° malloc.c æ–‡ä»¶(è·¯å¾„æ˜¯ glibc-2.29/malloc/malloc.c )ï¼Œä»Žä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹åˆ«åçš„å®šä¹‰ï¼š 1234567891011strong_alias (__libc_calloc, __calloc) weak_alias (__libc_calloc, calloc)strong_alias (__libc_free, __free) strong_alias (__libc_free, free)strong_alias (__libc_malloc, __malloc) strong_alias (__libc_malloc, malloc)strong_alias (__libc_memalign, __memalign)weak_alias (__libc_memalign, memalign)strong_alias (__libc_realloc, __realloc) strong_alias (__libc_realloc, realloc)strong_alias (__libc_valloc, __valloc) weak_alias (__libc_valloc, valloc)strong_alias (__libc_pvalloc, __pvalloc) weak_alias (__libc_pvalloc, pvalloc)strong_alias (__libc_mallinfo, __mallinfo)weak_alias (__libc_mallinfo, mallinfo)strong_alias (__libc_mallopt, __mallopt) weak_alias (__libc_mallopt, mallopt) __malloc æ˜¯ __libc_malloc çš„åˆ«åï¼Œmalloc ä¹Ÿæ˜¯ __libc_malloc çš„åˆ«åã€‚å…¶ä»–ä»¥æ­¤ç±»æŽ¨ã€‚ æ‰€ä»¥çœ‹ malloc å‡½æ•°çš„æºç ï¼Œç›´æŽ¥çœ‹ __libc_realloc å‡½æ•°å®žçŽ°å³å¯ï¼Œçœ‹ free çš„æºç å¯ä»¥çœ‹ __libc_free çš„å®žçŽ°ã€‚ 12void *__libc_realloc (void *oldmem, size_t bytes) ä¹Ÿå¯ä»¥åœ¨çº¿æŸ¥çœ‹ glibc çš„æºç ï¼Œç‚¹å‡» è¿™é‡Œ å‰å¾€æ¬£èµï¼ ä»¥åŽè¦æ˜¯æœ‰äººé—®ä½ åœ¨å“ªé‡Œå¯ä»¥ä¸‹è½½libcçš„æºç ï¼Œä½ å°±å¯ä»¥å‘Šè¯‰ä»–libcåªæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œä¸åŒçš„å¹³å°ä¸Šé¢æœ‰ä¸åŒçš„libcå®žçŽ°ï¼Œæ¯”å¦‚glibcï¼Œbionicç­‰ã€‚ é”„ç¦¾æ—¥å½“åˆï¼Œæ±—æ»´ç¦¾ä¸‹åœŸï¼Œäº”ä¸€èŠ‚å¿«ä¹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>malloc free</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨Objective-Cå®žçŽ°æŠ½è±¡ç±»]]></title>
    <url>%2F2019%2F04%2F21%2F%E7%94%A8Objective-C%E5%AE%9E%E7%8E%B0%E6%8A%BD%E8%B1%A1%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[æ’å›¾çš„èŠ±æ˜¯æˆ‘ä¸Šä¸ªæœˆå‘å·¥èµ„å½“å¤©æ™šä¸ŠåŠ ç­å›žå®¶çš„è·¯ä¸Šä»Žä¸€ä¸ªè€äººå®¶é‚£é‡Œä¹°çš„ï¼Œä¸€æžç‹¬ç§€ï¼ ä¸Šå‘¨åœ¨å¾®ä¿¡å…¬ä¼—å·å‘å¸ƒçš„ä¸€ç¯‡åä¸º åå‘ä»£ç†) çš„æ–‡ç« ï¼Œå±…ç„¶çœŸè¢«å¾®ä¿¡ç»™å°æŽ‰äº†ï¼Œå½“æ—¶åœ¨å†™çš„æ—¶å€™æˆ‘è¿˜åœ¨æƒ³æ˜¯ä¸æ˜¯ä¼šè¢«å¾®ä¿¡ç»™å°æ€æŽ‰ï¼ŒçœŸæ˜¯æ€•ä»€ä¹ˆæ¥ä»€ä¹ˆï¼Œå®Œå…¨ç¬¦åˆå¢¨è²å®šå¾‹ï¼é‚£ç¯‡æ–‡ç« æˆ‘å°±æ˜¯æƒ³ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹å¦‚ä½•è®¾ç½® Nginx çš„åå‘ä»£ç†ï¼Œå…¶ä¸­çš„ä¸€äº›æ¦‚å¿µå¯èƒ½æ˜¯å› ä¸ºç‰µæ¶‰åˆ°äº†æ•æ„Ÿè¯æ±‡ï¼Œæœ¬æ— æ¶æ„ï¼ ä¸è¯´è¿™ä»¶äº‹æƒ…äº†ï¼Œè¿˜æ˜¯å›žåˆ°ä»Šå¤©åˆ†äº«çš„ä¸»é¢˜ä¸Šé¢æ¥å§~ åœ¨è½¯ä»¶è®¾è®¡æˆ–è€…æž¶æž„è®¾è®¡é¢†åŸŸï¼Œæž¶æž„å¸ˆéƒ½ä¼šè·Ÿå¤§å®¶å¼ºè°ƒå¯¹ä¸šåŠ¡ä¸€å®šè¦æŠ½è±¡ï¼ŒæŠŠå…·ä½“çš„ä¸šåŠ¡åœºæ™¯æŠ½è±¡ä¸ºç¨‹åºå®žçŽ°å¾ˆè€ƒéªŒä¸€ä¸ªäººçš„ç¼–ç¨‹å’Œæ€ç»´èƒ½åŠ›ã€‚æ‰€ä»¥åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼ŒæŠ½è±¡æ˜¯ä¸€ç§å¿…å¤‡çš„èƒ½åŠ›ã€‚ è®¾è®¡æ¡†æž¶çš„æ—¶å€™ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šçº¦å®šä¸€äº›åè®®ï¼Œå„ä¸ªæ¨¡å—åœ¨äº¤äº’é€šä¿¡ä¸­èƒ½å¤Ÿéµå®ˆå’Œå®žçŽ°è¿™äº›åè®®ï¼Œå°±å¯ä»¥ä¿è¯é€šä¿¡çš„ç•…é€šæ€§ï¼Œå°±å¥½æ¯”å¤§å®¶éµå®ˆæŽ’é˜Ÿè§„åˆ™ä¸€æ ·ï¼Œä¸€ä¸ªä¸€ä¸ªæ¥å°±ä¸ä¼šä¹±ã€‚ åè®®å¯ä»¥ä½¿ç”¨æŽ¥å£çš„å½¢å¼æˆ–è€…æŠ½è±¡ç±»çš„å½¢å¼éƒ½å¯ä»¥å®šä¹‰ï¼Œä¸åŒçš„ç¼–ç¨‹è¯­è¨€æœ‰ä¸åŒçš„å½¢å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨Javaä¸­æä¾›ç»™å¼€å‘è€…çš„æœ‰æŽ¥å£ Interface è¿˜æœ‰æŠ½è±¡ç±» Abstractï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789/** æŽ¥å£ */interface ISeverListener &#123; public void covertService(String name);&#125;/** æŠ½è±¡ç±» */abstract class AbstractServer &#123; protected abstract String destroyService(String serverID);&#125; åœ¨ C++ ä¸­ä¹Ÿæœ‰æŠ½è±¡ç±»ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678class Point&#123;protected: int x, y;public: //çº¯è™šå‡½æ•° virtual void disp()=0;&#125;; åœ¨ Objective-C ä¸­æä¾›äº†åè®® protocolï¼Œæ²¡æœ‰æä¾›æŠ½è±¡ç±»çš„ä¸œè¥¿ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å€ŸåŠ© protocol æ¨¡æ‹Ÿå®žçŽ°æŠ½è±¡ç±»ã€‚ DownloaderProtocol.h åè®® 123456789101112131415#import &lt;Foundation/Foundation.h&gt;@protocol DownloaderProtocol &lt;NSObject&gt;@required- (BOOL)checkDownloader;- (void)startDownload:(id)url;- (void)stopDownload;- (void)deleteAllDownloadFile;@end AbstractDownloader.h 12345678#import &lt;Foundation/Foundation.h&gt;#import "DownloaderProtocol.h"@interface AbstractDownloader : NSObject &lt;DownloaderProtocol&gt;- (void)setDownloadUrl:(NSString *)url;@end AbstractDownloader.m 12345678910111213141516171819202122232425262728293031323334353637383940414243#import "AbstractDownloader.h"#define AbstractMethodNotImplemented() \@throw [NSException exceptionWithName:NSInternalInconsistencyException \reason:[NSString stringWithFormat:@"You must override %@ in a subclass.", NSStringFromSelector(_cmd)] \userInfo:nil]@implementation AbstractDownloader- (instancetype)init&#123; NSAssert(![self isMemberOfClass:[AbstractDownloader class]], @"AbstractDownloader is an abstract class, you should not instantiate it directly."); return [super init];&#125;- (BOOL)checkDownloader&#123; AbstractMethodNotImplemented();&#125;- (void)startDownload:(id)url&#123; AbstractMethodNotImplemented();&#125;- (void)stopDownload&#123; AbstractMethodNotImplemented();&#125;- (void)deleteAllDownloadFile&#123; AbstractMethodNotImplemented();&#125;- (void)setDownloadUrl:(NSString *)url&#123; NSLog(@"AbstractDownloader's url = %@", url);&#125;@end ä»Žä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºAbstractMethodNotImplemented()æ˜¯æ¨¡æ‹ŸæŠ½è±¡ç±»çš„å…³é”®ï¼Œæœ‰äº†è¿™ä¸ªå®åŠ¨è®®ä¹‹åŽï¼Œå‡¡æ˜¯éœ€è¦ç»§æ‰¿AbstractDownloaderå¿…é¡»è¦å®žçŽ°å¯¹åº”çš„æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ImageDownloaderç»§æ‰¿ AbstractDownloader å¹¶ä¸”å®žçŽ°å¯¹åº”çš„æ–¹æ³•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š ImageDownloader.h 12345#import "AbstractDownloader.h"@interface ImageDownloader : AbstractDownloader@end ImageDownloader.m 123456789101112131415161718192021222324252627#import "ImageDownloader.h"@implementation ImageDownloader- (BOOL)checkDownloader&#123; NSLog(@"ImageDownloader checkDownloader..."); return YES;&#125;- (void)startDownload:(id)url&#123; NSLog(@"ImageDownloader startDownload...");&#125;- (void)stopDownload&#123; NSLog(@"ImageDownloader stopDownload...");&#125;- (void)deleteAllDownloadFile&#123; NSLog(@"ImageDownloader deleteAllDownloadFile...");&#125;@end è¿™æ ·åšçš„è¯ï¼Œå›¢é˜Ÿç›¸å…³çš„å¼€å‘äººå‘˜å°±çŸ¥é“è‡ªå·±ç»§æ‰¿è‡ª AbstractDownloader åº”è¯¥åšä»€ä¹ˆäº†ã€‚ è¿™é‡Œåªæ˜¯ç»™å¤§å®¶æä¾›ä¸€ç§è®¾è®¡æ€è·¯ï¼Œæœ‰æ›´å¥½çš„æ€è·¯æ¬¢è¿Žäº¤æµï¼Œæ„Ÿè°¢æ¯ä¸€ä½å…³æ³¨è€…ã€é˜…è¯»è€…ã€‚ ä¸€ç›´è‡´åŠ›äºŽè®©å¼€å‘å˜å¾—æ›´ç¾Žå¥½çš„å…¬ä¼—å·~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS æŠ½è±¡ç±» Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu19å®‰è£…Swift5]]></title>
    <url>%2F2019%2F04%2F20%2FUbuntu19%E5%AE%89%E8%A3%85Swift5%2F</url>
    <content type="text"><![CDATA[å†…å®¹æ¦‚è¦é€šè¿‡å®žè·µï¼Œåˆ†äº«å¦‚ä½•åœ¨ Ubuntu19 ä¸‹é¢å¦‚ä½•å®‰è£… Swift5. å®‰è£…å¿…å¤‡åº“åœ¨ä½¿ç”¨ apt-get ä¹‹å‰ï¼Œæœ‰å¿…è¦åšä¸€æ¬¡æ›´æ–°ï¼Œå¦‚ä¸‹ï¼š 1sudo apt-get update æ›´æ–°å®ŒæˆåŽï¼Œå®‰è£…å¯¹åº”çš„åº“æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 1sudo apt-get install git cmake ninja-build clang python uuid-dev libicu-dev icu-devtools libbsd-dev libedit-dev libxml2-dev libsqlite3-dev swig libpython-dev libncurses5-dev pkg-config libblocksruntime-dev libcurl4-openssl-dev systemtap-sdt-dev tzdata rsync ç„¶åŽå†å®‰è£…ä¸‹é¢çš„åº“ï¼Œå¦‚ä¸‹ï¼š 1sudo apt-get install clang libicu-dev libpython2.7 æœ€åŽï¼Œä¸€å®šè¦å®‰è£…ä¸‹é¢çš„åº“ï¼Œæ‰§è¡Œå®‰è£…å³å¯ã€‚ 12sudo apt-get install libtinfo5sudo apt install python-dev å¦åˆ™ä¼šæŠ¥é”™ï¼š 123/bin/lldb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory/bin/lldb: error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directory ä¸‹è½½ Swiftä¸‹è½½ Swift æºç ï¼Œä½¿ç”¨ wget ä¸‹è½½å³å¯ã€‚ 1wget https://swift.org/builds/swift-5.0-release/ubuntu1804/swift-5.0-RELEASE/swift-5.0-RELEASE-ubuntu18.04.tar.gz ä¸‹è½½æˆåŠŸåŽï¼Œè§£åŽ‹æºæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 1tar zxvf swift-5.0-RELEASE-ubuntu18.04.tar.gz ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œå¯ä»¥å¯¹è§£åŽ‹åŽçš„æ–‡ä»¶é‡æ–°å‘½åï¼Œè¿™é‡Œæˆ‘æ”¹ä¸ºäº† swift5.0 1mv swift-5.0-RELEASE-ubuntu18.04 swift5.0 é…ç½®çŽ¯å¢ƒå˜é‡å°† swift å¯¹åº”çš„åŠ å…¥åˆ°çŽ¯å¢ƒå˜é‡ä¸­ï¼Œç¼–è¾‘ ~/.bashrc æ–‡ä»¶å³å¯ã€‚ 1vim ~/.bashrc æ·»åŠ ä¸‹é¢å†…å®¹åœ¨æ–‡ä»¶æœ€åŽï¼Œå¦‚ä¸‹ï¼š 1export PATH=/home/username/developer/swift_linux/swift5.0/usr/bin:$&#123;PATH&#125; æ³¨æ„ï¼š/home/username/developer/swift_linux/swift5.0/usr/bin æ˜¯ä½ è‡ªå·±è§£åŽ‹åŽçš„ç›®å½•ã€‚ ä¸ºäº†éªŒè¯ Swift æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¯ä»¥è®© ~/.bashrc æ–‡ä»¶ ç«‹å³ç”Ÿæ•ˆï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1source ~/.bashrc åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹ä¸‹é¢å‘½ä»¤ï¼š 1swift -version æˆåŠŸä¼šæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š 12Swift version 5.0 (swift-5.0-RELEASE)Target: x86_64-unknown-linux-gnu Done. äººç”Ÿæ€»æ˜¯åœ¨ä¸æ–­çš„ä¸Šæ¼”ç€é‡é€¢å’Œç¦»åˆ«~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>swift linux Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åå‘ä»£ç†]]></title>
    <url>%2F2019%2F04%2F14%2F%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡å†…å®¹æ¦‚è¦ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰é—®è¿‡åˆ«äººï¼Œæˆ–è€…æ˜¯è‡ªå·±å·å·åœ¨ç½‘ä¸Šæœè¿‡ â€œä»€ä¹ˆæ˜¯æ­£å‘å’Œåå‘ä»£ç†â€œ ç±»ä¼¼çš„é—®é¢˜ï¼Œå³ä½¿é—®è¿‡ã€æœè¿‡æ˜¯ä¸æ˜¯ä¹Ÿå¾ˆæ‡µï¼Ÿ æ€»ç»“ä¸€å¥è¯ï¼Œæ­£å‘ä»£ç†å°±æ˜¯ä»£ç†å®¢æˆ·ç«¯çš„ä»£ç†æœåŠ¡ï¼Œåå‘ä»£ç†å°±æ˜¯ä»£ç†æœåŠ¡ç«¯çš„ä»£ç†æœåŠ¡ã€‚ é‚£æˆ‘ä»¬ä»Šå¤©å°±æ¥æŽ°æ‰¯æŽ°æ‰¯è¿™ä¸ªé—®é¢˜ã€‚ VPN å’Œæ­£å‘ä»£ç†å°æ˜Žï¼šâ€œä½ æ˜¨å¤©çœ‹äº†æˆ‘ç»™ä½ å‘çš„YouTubeè§†é¢‘é“¾æŽ¥äº†å—ï¼Ÿè¶…çº§ç²¾å½©å“Ÿï¼â€ã€‚å°ä¸½ï¼šâ€œå“¦ï¼Œé‚£ä¸ªé“¾æŽ¥æ ¹æœ¬æ‰“ä¸å¼€å‘€ï¼Œçœ‹ä¸ªå±ï¼â€ï¼Œå°æ˜Žå¤±æœ›çš„çœ‹äº†çœ‹å°ä¸½ã€‚å°æ˜Žï¼šâ€œå¥½å§ï¼Œè‚¯å®šæ˜¯ä½ æ²¡æœ‰ä½¿ç”¨ VPN(fanqiang) è½¯ä»¶ï¼Œæ€ªä¸å¾—ä½ çœ‹ä¸äº†â€¦â€ã€‚ ç›¸ä¿¡ä½ ä¹Ÿæœ‰ç»åŽ†è¿‡ç±»ä¼¼çš„åœºæ™¯ï¼Œæœ‹å‹ç»™äº†ä¸€ä¸ªéœ€è¦ä½ æ‹¥æœ‰VPNæœåŠ¡æ‰èƒ½æ‰“å¼€çš„é“¾æŽ¥ï¼Œæ— è®ºä½ æ˜¯ä¸‡å…†å…‰çº¤ä¹Ÿå¥½è¿˜æ˜¯äº¿å…†å…‰çº¤ä¹Ÿç½¢ï¼Œæ­»æ´»éƒ½æ— æ³•æ‰“å¼€ã€‚ è¿™é‡Œæ‰€è¯´çš„ VPN å°±æ˜¯äººä»¬é€šå¸¸æ‰€è¯´çš„æ­£å‘ä»£ç†æœåŠ¡å™¨ï¼ŒVPN(è™šæ‹Ÿç§äººç½‘ç»œ Virtual Private Network)ï¼Œæ˜¯ä¸€ç§åŠ å¯†é€šè®¯æŠ€æœ¯ã€‚VPN æœ‰å¾ˆå¤šçš„å…·ä½“å®žçŽ°ï¼Œæ¯”å¦‚ PPTPã€L2TPã€IPSec å’Œ openvpnã€‚VPN ä¸æ˜¯ä¸ºäº†ç¿»å¢™è€Œç”Ÿçš„ï¼Œä»–åªæ˜¯ä¸€ä¸­æŠ€æœ¯ï¼Œå°±å¥½æ¯”èœåˆ€æœ¬æ¥æ˜¯ç”¨æ¥åˆ‡èœçš„é“ç†ä¸€æ ·ã€‚ä½¿ç”¨ VPN æ¥ç¿»å¢™åŸºæœ¬å·²ç»ä½œåºŸäº†ï¼Œä½†å½“å¤§å®¶è°ˆåŠç¿»å¢™çš„æ—¶å€™è¯´å¾—æœ€å¤šçš„è¿˜æ˜¯ â€œä½ æœ‰å¥½ç”¨çš„ VPN å—ï¼Ÿâ€ï¼Œæ‰€ä»¥æŠŠ VPN å½“æˆç¿»å¢™å·¥å…·çš„ä»£åè¯ä¹Ÿæƒ…æœ‰å¯åŽŸã€‚ å¦‚æžœä½ æœ‰äº†ç¿»å¢™è½¯ä»¶å°±å¯ä»¥è½»æ¾è®¿é—®å…¨ä¸–ç•Œçš„ç½‘ç«™äº†ï¼Œç‰¹åˆ«æ˜¯ç¨‹åºå‘˜ï¼Œå¯ä»¥åœ¨çŸ¥è¯†çš„æµ·æ´‹é‡Œé¨æ¸¸ã€‚ç®€å•æ¥è¯´æ­£å‘ä»£ç†æœåŠ¡å™¨ç±»ä¼¼äºŽä¸‹é¢å›¾æ‰€ç¤ºï¼š åå‘ä»£ç†å’Œ Nginxè¿™é‡Œå¯ä»¥ç»™å¤§å®¶ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ä½ æƒ³è®©ç”µä¿¡å…¬å¸ç»™ä½ å®‰è£…å®½å¸¦æˆ–è€…ç½‘ç»œç”µè§†ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯èƒ½éœ€è¦æ‰“ç”µè¯å’¨è¯¢ä¸€ä¸‹ç›¸å…³çš„å†…å®¹ï¼ŒäºŽæ˜¯ä½ æ‹¿èµ·äº†æ‰‹æœºç»™ç”µä¿¡å…¬å¸æ‰“ç”µè¯ï¼Œç»è¿‡ä¸€ç•ªå¤æ‚æ“ä½œåŽç»ˆäºŽå¯ä»¥ç­‰å¾…äººå·¥æœåŠ¡äº†ã€‚ç”µä¿¡çš„äººå·¥å®¢æœäººå‘˜æœ‰å¾ˆå¤šï¼Œç³»ç»Ÿä¼šæ ¹æ®ä¸€å®šçš„è§„åˆ™ç»™ä½ åˆ†é…ä¸€ä¸ªäººï¼ŒæŽ¥ä¸‹æ¥å¯èƒ½æ˜¯ç¾Žçœ‰ä¹Ÿå¯èƒ½æ˜¯æ±‰å­ä¸ºä½ æœåŠ¡ï¼Œç©¶ç«Ÿæ˜¯è°ç»™ä½ æä¾›è¯­éŸ³æœåŠ¡å–å†³ä¸Žç³»ç»Ÿçš„åˆ†é…ï¼Œè€Œä¸æ˜¯ä½ å¯ä»¥å†³å®šçš„ã€‚ ç³»ç»Ÿåˆ†é…å’Œè°ƒåº¦çš„åŠŸèƒ½å°±ç±»ä¼¼äºŽåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ²¡æœ‰æ„ŸçŸ¥ã€‚ç±»ä¼¼äºŽä¸‹é¢å›¾æ‰€ç¤ºï¼š åœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼ŒæœåŠ¡ç«¯å¼€å‘ç»å¸¸ä¼šç”¨åˆ°åå‘ä»£ç†æœåŠ¡å™¨ï¼Œæ¯”å¦‚ Nginxã€Apache ç­‰ï¼Œå®ƒä»¬ç»å¸¸ä¹Ÿè¢«ç”¨ä½œä¸º WEB æœåŠ¡å™¨ï¼ŒNginx è¢«å½“åšä»£ç†æœåŠ¡å™¨æ¯”è¾ƒå¤šï¼Œæ‰€è°“çš„ä»£ç†æœåŠ¡å™¨æ˜¯æž¶è®¾åœ¨ WEB æœåŠ¡å™¨å’Œç½‘ç»œä¸­æ–­(æ¯”å¦‚æ‰‹æœºå®¢æˆ·ç«¯)ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œæ¢å¥è¯è¯´ï¼ŒNginx æä¾›äº†åå‘ä»£ç†æœåŠ¡çš„èƒ½åŠ›ã€‚ ç”±äºŽ Nginx å’Œ Apache å„è‡ªçš„ä¼˜åŠ¿ï¼ŒçŽ°åœ¨å¾ˆå¤šå¼€å‘è€…é€‰æ‹©è®©ä¸¤è€…åœ¨æœåŠ¡å™¨ä¸­å…±å­˜ã€‚åœ¨æœåŠ¡å™¨ç«¯è®© Nginx åœ¨å‰ Apache åœ¨åŽï¼Œç”± Nginx åšè´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç†ï¼Œå¹¶ä¸”å¤„ç†é™æ€æ–‡ä»¶ï¼Œå°†åŠ¨æ€è¯·æ±‚äº¤ç»™ Apache åŽ»å¤„ç†ã€‚ ä¸‹å›¾æ˜¯ä¸€ä¸ªå…¸åž‹çš„ Nginx ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨éƒ¨ç½² ELK çš„æž¶æž„å›¾ï¼Œå¦‚ä¸‹ï¼š ç”¨ Nginx çš„åå‘ä»£ç†ï¼Œç”¨æˆ·å¯ä»¥ä»Žå¤–éƒ¨è®¿é—®åˆ° Kibanaï¼Œå¹¶ä¸”å®ƒæœ¬èº«å…·æœ‰è´Ÿè½½å‡è¡¡çš„ä½œç”¨ï¼Œä¹Ÿèƒ½å¤Ÿæé«˜äº†å…¶æ€§èƒ½ã€‚ å†çœ‹ä¸€ä¸ªå¾®æœåŠ¡æž¶æž„ä¸­çš„æž¶æž„å›¾ï¼ˆåœ¨ç½‘å…³å‰é¢ä¹Ÿéƒ¨ç½²äº† Nginxï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…³äºŽ Nginx ä½œä¸ºè´Ÿè½½å‡è¡¡å™¨çš„é…ç½®å’Œå®žä¾‹ï¼Œä¸‹ä¸€æ¬¡è·Ÿå¤§å®¶åˆ†äº«ã€‚ä½ çŽ°åœ¨åªéœ€è¦èšç„¦åœ¨ Nginx ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ä¸Šé¢çš„åŠŸèƒ½å³å¯ã€‚ Nginx é…ç½®åå‘ä»£ç†Nginx æœ¬èº«å·²ç»æä¾›äº†åå‘ä»£ç†æœåŠ¡çš„èƒ½åŠ›ï¼Œä¸‹é¢æˆ‘ä»¬ç»“åˆå®žä¾‹ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œå‡è®¾ä½ æœ¬æœºå·²ç»å®‰è£…äº† Nginx å¹¶ä¸”ä¼šåŸºæœ¬çš„æ“ä½œå‘½ä»¤ã€‚ 1ã€å¯åŠ¨ Nginx 1sudo nginx åœ¨æµè§ˆå™¨æ‰“å¼€ http://localhost:80ï¼Œç¡®ä¿ Nginx å¯åŠ¨æˆåŠŸã€‚ 2ã€é…ç½® host æˆ‘ä»¬é…ç½®ä¸€ä¸‹æœ¬æœºçš„ hostï¼Œvim ç¼–è¾‘å³å¯ã€‚ 1sudo vim /etc/hosts å¢žåŠ ä¸‹é¢ä¸€è¡Œï¼š 1127.0.0.1 www.ithome.com åœ¨æµè§ˆå™¨æ‰“å¼€ http://www.ithome.com:80ï¼Œè·Ÿåˆšæ‰æ˜¾ç¤ºä¸€æ ·çš„WEB ç•Œé¢ã€‚ 3ã€é…ç½® Nginx ç¼–è¾‘ Nginx é…ç½®ï¼Œå¦‚ä¸‹ï¼š 1sudo vim /usr/local/etc/nginx/nginx.conf åœ¨ http { èŠ‚ç‚¹ä¸‹å¢žåŠ ä¸‹é¢å†…å®¹ï¼š 12345678910111213141516server &#123; # ç›‘å¬80ç«¯å£å· listen 80; # ç›‘å¬è®¿é—®çš„åŸŸå server_name www.ithome.com; # æ ¹æ®è®¿é—®è·¯å¾„é…ç½® location / &#123; # è®¾ç½® http ç‰ˆæœ¬ proxy_http_version 1.1; proxy_set_header Connection ""; # æŠŠè¯·æ±‚è½¬å‘åˆ° https://www.baidu.com proxy_pass https://www.baidu.com; &#125;&#125; é‡æ–°å¯åŠ¨ Nginxï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š 1sudo nginx -s reload åœ¨æµè§ˆå™¨æ‰“å¼€ http://www.ithome.com:80ï¼Œæ­¤æ—¶æ‰“å¼€çš„æ˜¯ç™¾åº¦é¦–é¡µã€‚è‡³æ­¤ï¼Œç®€å•çš„é…ç½® Nginx ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨çš„åŠŸèƒ½å·²ç»å®Œæˆï¼Œå½“ç„¶æƒ³é…ç½®å¥½ Nginx è¿˜éœ€è¦å¤§å®¶å¤šåŽ»å®žè·µå’Œçœ‹å®˜æ–¹æŠ€æœ¯æ‰‹å†Œã€‚ proxy_pass é»˜è®¤ä½¿ç”¨çš„æ˜¯ http 1.0ï¼Œå¯ä»¥é€šè¿‡ proxy_http_versionæŒ‡ä»¤è®©å®ƒä½¿ç”¨ http 1.1ï¼Œä»¥ä¾¿å¼€å¯ keepalive ä¹‹ç±»çš„åŠŸèƒ½ã€‚å®˜æ–¹è¯´æ˜Ž å¦‚ä¸‹ï¼š 123Sets the HTTP protocol version for proxying. By default, version 1.0 is used. Version 1.1 is recommended for use with keepalive connections and NTLM authentication. é™„å½•ï¼šNginx å‘½ä»¤1ã€æŸ¥çœ‹ nginx çš„é…ç½®ä¿¡æ¯ 1nginx -V æ³¨æ„ï¼šæ˜¯å¤§å†™å­—æ¯ Vã€‚ 2ã€æŸ¥çœ‹ nginx ç‰ˆæœ¬ä¿¡æ¯ 1nginx -v 3ã€å¯åŠ¨ nginx 1sudo nginx 4ã€æŸ¥çœ‹ nginx è¿›ç¨‹ 1ps -ef|grep nginx 5ã€é‡å¯ nginx 1234567nginx -s reload``` **6ã€å®Œç¾Žåœæ­¢ nginx**```shkill -QUIT `cat /var/run/nginx.pid` 7ã€å¿«é€Ÿåœæ­¢ nginx 1kill -TERM `cat /var/run/nginx.pid` æˆ–è€… 1kill -INT `cat /var/run/nginx.pid` 8ã€å®Œç¾Žåœæ­¢å·¥ä½œè¿›ç¨‹ï¼Œä¸»è¦ç”¨äºŽå¹³æ»‘å‡çº§ 1kill -WINCH `cat /var/run/nginx.pid` 9ã€å¼ºåˆ¶åœæ­¢ nginx 1pkill -9 nginx 10ã€æ£€æŸ¥ nginx.conf ä¿®æ”¹æ˜¯å¦æ­£ç¡® 1nginx -t 11ã€åœæ­¢ nginx çš„å‘½ä»¤ 1nginx -s stop ä¸ç»åŽ†é£Žé›¨æ€Žä¹ˆè§å½©è™¹ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿéšéšä¾¿ä¾¿æˆåŠŸ~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>Nginx VPN ä»£ç†æœåŠ¡å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å¼•èµ·çš„è€—æ—¶]]></title>
    <url>%2F2019%2F04%2F07%2FJava-%E8%87%AA%E5%8A%A8%E8%A3%85%E7%AE%B1%E3%80%81%E6%8B%86%E7%AE%B1%E5%BC%95%E8%B5%B7%E7%9A%84%E8%80%97%E6%97%B6%2F</url>
    <content type="text"><![CDATA[è€—æ—¶é—®é¢˜åœ¨è¯´ Java çš„è‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªä¾‹å­ã€‚ è¿™ä¸ªé”™è¯¯æˆ‘åœ¨é¡¹ç›®ä¸­çŠ¯è¿‡(å°´å°¬)ï¼Œæ‹¿å‡ºæ¥å…±å‹‰ï¼ 12345678910111213141516private static long getCounterResult() &#123; Long sum = 0L; final int length = Integer.MAX_VALUE; for (int i = 0; i &lt; length; i++) &#123; sum += i; &#125; return sum;&#125;public static void main(String[] args) &#123; long startCountTime = System.currentTimeMillis(); long result = getCounterResult(); long endCountTime = System.currentTimeMillis(); System.out.println("result = " + result + ", and take up time : " + (endCountTime - startCountTime) / 1000 + "s");&#125; åœ¨æˆ‘çš„ç”µè„‘(macOS 64ä½ç³»ç»Ÿï¼Œé…ç½®è¾ƒé«˜)ï¼Œæ‰“å°ç»“æžœå¦‚ä¸‹ï¼š 1result = 2305843005992468481, and take up time : 12s å±…ç„¶ä½¿ç”¨äº† 12sï¼Œæ˜¯å¯å¿å”ä¸å¯å¿ï¼Œå†æ­£å¸¸ä¸è¿‡çš„ä»£ç æ€Žä¹ˆä¼šè€—æ—¶è¿™ä¹ˆä¹…å‘¢ï¼Ÿå¦‚æžœåœ¨é…ç½®å·®ä¸€ç‚¹çš„ç”µè„‘ä¸Šè¿è¡Œè€—æ—¶ä¼šæ›´ä¹…(æƒŠå‘†äº†.jpg)ã€‚ æˆ‘ä»¬ä¸å¦¨å…ˆé˜…è¯»ä¸‹é¢çš„å†…å®¹ï¼Œå†æ¥åˆ†æžã€è§£å†³ä¸Šè¿°è€—æ—¶çš„é—®é¢˜ã€‚ åŸºæœ¬æ¦‚å¿µ è‡ªä»Ž jdk1.5 ä¹‹åŽå°±æœ‰äº†è‡ªåŠ¨è£…ç®±(Autoboxing)å’Œè‡ªåŠ¨æ‹†ç®±(AutoUnboxing)ã€‚ è‡ªåŠ¨è£…ç®±ï¼Œå°±æ˜¯ Java è‡ªåŠ¨å°†åŽŸå§‹(åŸºæœ¬)ç±»åž‹è½¬æ¢æˆå¯¹åº”çš„å°è£…å™¨(å¯¹è±¡)ç±»åž‹çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚å°† int çš„å˜é‡è½¬æ¢æˆ Integer å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè£…ç®±ã€‚ è‡ªåŠ¨æ‹†ç®±ï¼Œå°±æ˜¯ Java è‡ªåŠ¨å°†å°è£…å™¨(å¯¹è±¡)ç±»åž‹è½¬æ¢æˆåŸºæœ¬ç±»åž‹çš„è¿‡ç¨‹ï¼Œå¦‚å°† Integer å¯¹è±¡è½¬æ¢æˆ int ç±»åž‹å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšæ‹†ç®±ã€‚ ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Œæ˜¯å› ä¸ºè¿™äº›æ“ä½œå¹¶éžäººå·¥(ç¨‹åºçŒ¿)æ“ä½œçš„ï¼Œè€Œæ˜¯ Java è‡ªå¸¦çš„ä¸€ä¸ªç‰¹æ€§ã€‚ ä¸‹è¡¨æ˜¯ Java ä¸­çš„åŸºæœ¬ç±»åž‹å’Œå¯¹åº”çš„å°è£…ç±»åž‹çš„å¯¹åº”è¡¨ï¼š åŸºæœ¬ç±»åž‹ å°è£…å™¨ç±» int Integer byte Byte long Long float float double Double char Character boolean Boolean è‡ªåŠ¨è£…ç®±ç¤ºä¾‹ï¼š 12int a = 3;Integer b = a; è‡ªåŠ¨æ‹†ç®±ç¤ºä¾‹ï¼š 12Integer b = new Integer(7);int a = b; Integer/int è‡ªåŠ¨æ‹†ç®±å’Œè£…ç®±ä¸‹é¢è¿™æ®µä»£ç æ˜¯ Integer çš„æºç ä¸­ valueOf æ–¹æ³•ã€‚ 1234567891011121314151617181920212223/** * Returns an &#123;@code Integer&#125; instance representing the specified * &#123;@code int&#125; value. If a new &#123;@code Integer&#125; instance is not * required, this method should generally be used in preference to * the constructor &#123;@link #Integer(int)&#125;, as this method is likely * to yield significantly better space and time performance by * caching frequently requested values. * * This method will always cache values in the range -128 to 127, * inclusive, and may cache other values outside of this range. * * @param i an &#123;@code int&#125; value. * @return an &#123;@code Integer&#125; instance representing &#123;@code i&#125;. * @since 1.5 */public static Integer valueOf(int i) &#123; // å¦‚æžœiçš„å€¼å¤§äºŽ-128å°äºŽ127åˆ™è¿”å›žä¸€ä¸ªç¼“å†²åŒºä¸­çš„ä¸€ä¸ªIntegerå¯¹è±¡ if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high) return IntegerCache.cache[i + (-IntegerCache.low)]; // å¦åˆ™è¿”å›ž new ä¸€ä¸ªInteger å¯¹è±¡ return new Integer(i);&#125; æˆ‘ä»¬åœ¨æ‰§è¡Œä¸‹é¢çš„è¿™å¥ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1Integer i = 100; ä¸Šé¢çš„ä»£ç ç­‰åŒäºŽä¸‹é¢çš„ä»£ç ï¼š 1Integer i = Integer.valueOf(100); ç»“åˆä¸Šé¢çš„æºç å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¦‚æžœæ•°å€¼åœ¨ [-128ï¼Œ127] ä¹‹é—´(åŒé—­åŒºé—´)ï¼Œä¸ä¼šé‡æ–°åˆ›å»º Integer å¯¹è±¡ï¼Œè€Œæ˜¯ä»Žç¼“å­˜ä¸­(å¸¸é‡æ± )ç›´æŽ¥èŽ·å–ï¼Œä»Žå¸¸é‡æ± ä¸­èŽ·å–è€Œä¸æ˜¯å †æ ˆæ“ä½œï¼Œè¯»å–æ•°æ®è¦å¿«å¾ˆå¤šã€‚ æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹å¸¸è§çš„åŸºç¡€é¢è¯•é¢˜(è¯·ç»™å‡ºæ‰“å°ç»“æžœ)ï¼Œå¦‚ä¸‹: 123456789101112131415161718192021public static void main(String[] args) &#123; // â“µ Integer a = new Integer(121); Integer b = new Integer(121); System.out.println(a == b); // â“¶ Integer c = 121; Integer d = 121; System.out.println(c == d); // â“· Integer e = 129; Integer f = 129; System.out.println(e == f); // â“¸ int g = 50; Integer h = new Integer(50); System.out.println(g == h);&#125; åˆ†æžç»“æžœï¼š â“µ: false, ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒåˆ†åˆ«æŒ‡å‘äº†ä¸åŒå †å†…å­˜â“¶: true, è‡ªåŠ¨è£…ç®±ä¸”æ•°å€¼åœ¨ [-128ï¼Œ127] ä¹‹é—´(åŒé—­åŒºé—´)â“·: false, è‡ªåŠ¨è£…ç®±ä¸”æ•°å€¼ä¸åœ¨ [-128ï¼Œ127] ä¹‹é—´(åŒé—­åŒºé—´)â“¸: true, è‡ªåŠ¨æ‹†ç®±ä¸”æ•°å€¼åœ¨ [-128ï¼Œ127] ä¹‹é—´(åŒé—­åŒºé—´) è§£æžè€—æ—¶é—®é¢˜ç±» Long å¯¹åº”çš„ä¹Ÿæœ‰ä¸€ä¸ª valueof æ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š 1234567public static Long valueOf(long l) &#123; final int offset = 128; if (l &gt;= -128 &amp;&amp; l &lt;= 127) &#123; // will cache return LongCache.cache[(int)l + offset]; &#125; return new Long(l);&#125; è¿™ä¸ªå’Œ Integer çš„å¾ˆåƒï¼Œé“ç†ä¸Šé¢è¯´è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ åœ¨å¼€ç¯‡çš„ä¾‹å­ä¸­ï¼ŒgetCounterResult æ–¹æ³•æœ‰ä¸‹é¢è¿™å¥ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1Long sum = 0L; å¾ˆæ˜Žæ˜¾æˆ‘ä»¬å£°æ˜Žäº†ä¸€ä¸ª Long çš„å¯¹è±¡ sumï¼Œç”±äºŽè‡ªåŠ¨è£…ç®±ï¼Œè¿™å¥ä»£ç å¹¶æ²¡æœ‰è¯­æ³•ä¸Šé¢çš„é”™è¯¯ï¼Œç¼–è¯‘å™¨å½“ç„¶ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ä¸Šé¢ä»£ç ç­‰åŒäºŽå¦‚ä¸‹ä»£ç ï¼š 1Long sum = Long.valueof(0); åœ¨ for å¾ªçŽ¯ä¸­ï¼Œè¶…è¿‡ [-128ï¼Œ127] å°±ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè¿™æ ·ä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼Œä¸åœçš„ç”³è¯·å †å†…å­˜ï¼Œç¨‹åºæ‰§è¡Œè‡ªç„¶ä¹Ÿå°±æ¯”è¾ƒè€—æ—¶äº†ã€‚ ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617private static long getCounterResult() &#123; // ä¿®æ”¹ä¸ºæ™®é€šçš„åŸºæœ¬ç±»åž‹æ•°æ® long sum = 0L; final int length = Integer.MAX_VALUE; for (int i = 0; i &lt; length; i++) &#123; sum += i; &#125; return sum;&#125;public static void main(String[] args) &#123; long startCountTime = System.currentTimeMillis(); long result = getCounterResult(); long endCountTime = System.currentTimeMillis(); System.out.println("result = " + result + ", and take up time : " + (endCountTime - startCountTime) / 1000 + "s");&#125; æ‰§è¡Œæ—¶é—´å¤§å¤§ç¼©çŸ­ã€‚ ä¼˜æŸ”å¯¡æ–­ï¼Œæ˜¯äººç”Ÿæœ€å¤§çš„è´Ÿèƒ½é‡ã€‚å¯¹ï¼Œåˆ«çŠ¹è±«äº†èµ¶ç´§æ‰«ç å…³æ³¨~]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>è‡ªåŠ¨æ‹†ç®± è‡ªåŠ¨è£…ç®± autoboxing unboxing</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dumpdecrypted ç ¸å£³ï¼šå¯¼å‡ºå¤´æ–‡ä»¶]]></title>
    <url>%2F2019%2F04%2F07%2Fdumpdecrypted-%E7%A0%B8%E5%A3%B3%EF%BC%9A%E5%AF%BC%E5%87%BA%E5%A4%B4%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ å¯¼å‡ºå¤´æ–‡ä»¶åœ¨ iOS é€†å‘: dumpdecrypted ç ¸å£³è®°ä¸­å·²ç»ç»™å¤§å®¶åˆ†äº«äº†å¯¹ ipa æ–‡ä»¶å¦‚ä½•ç ¸å£³äº†ï¼Œ æŽ¥ä¸‹æ¥å°±å¯ä»¥å¯¼å‡ºå…¶å¤´æ–‡ä»¶äº†ã€‚ è¿™é‡Œéœ€è¦ç”¨åˆ° class-dump å·¥å…·ã€‚å¦‚æžœä½ ä½¿ç”¨ class-dump, å‡ºçŽ°å¦‚ä¸‹é”™è¯¯ï¼š 1Error: Cannot find offset for address 0xxxxxxxxx in stringAtAddress æŠ¥è¿™ç§é”™è¯¯è¯´æ˜Žä½ å³å°† dump çš„æ–‡ä»¶æ˜¯ OC å’Œ Swift æ··ç¼–çš„é¡¹ç›®ï¼Œclass-dump è¿™ä¸ªå·¥å…·å¯¹å®ƒä»¬æ— èƒ½ä¸ºåŠ›ã€‚ è¿˜å¥½, ä¼Ÿå¤§çš„ç¨‹åºå‘˜ä»¬ç»™æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ åŽ»èŽ·å– class-dump æ”¹è¿›ç‰ˆ æºç , ç„¶åŽä½¿ç”¨ Xcode ç¼–è¯‘å³å¯. ç¼–è¯‘å®ŒæˆåŽç”Ÿæˆçš„ class-dump å°±å¯ä»¥æ‹¿æ¥ä½¿ç”¨äº†. æ”¹å˜å…¶å¯æ‰§è¡Œçš„æƒé™: 1234567chmod +x class-dump``` æŸ¥çœ‹ decrypted æ–‡ä»¶çš„ arm æž¶æž„:```shclass-dump --list portkey-prod.decrypted æ˜¾ç¤ºä¸ºï¼šarm64 å¼€å§‹ dump: 123mkdir portkey-headerclass-dump -H portkey-prod.decrypted -o portkey-header/ é‡åˆ°é—®é¢˜dumpdecrypted ç ¸å£³å‡ºçŽ°äº†é—®é¢˜, é”™è¯¯ä¿¡æ¯å¦‚ä¸‹: 12dyld: could not load inserted library 'dumpdecrypted.dylib' because no suitable image found. Did find:dumpdecrypted.dylib: required code signature missing for 'dumpdecrypted.dylib' è§£å†³æ–¹æ¡ˆ, é‡æ–°ç­¾å dumpdecrypted åŽå°†å…¶æ‹·è´åˆ° Documents ç›®å½•. 12345## åˆ—å‡ºå¯ç­¾åè¯ä¹¦, æ‰¾åˆ° mac ä¸Šé¢å·²ç»å®‰è£…çš„è¯ä¹¦security find-identity -v -p codesigning## ä¸º dumpecrypted.dylib ç­¾åcodesign --force --verify --verbose --sign "iPhone Developer: xxx xxxx (xxxxxxxxxx)" dumpdecrypted.dylib æ³¨æ„ï¼šiPhone Developer: xxx xxxx (xxxxxxxxxx) ä¸ºä½ è‡ªå·±æœ¬æœºå®‰è£…çš„å¼€å‘è€…è¯ä¹¦åç§°. çœ‹åˆ°çš„å·¥å…· class-dump-swift é’ˆå¯¹ Swift çš„å·¥å…·ã€‚è¿™ä¸ªéœ€è¦è‡ªå·±å…ˆç¼–è¯‘ llvmï¼Œç„¶åŽæ‰èƒ½ä½¿ç”¨. dumpdecrypted, æ¯”è¾ƒè‡ªåŠ¨åŒ–çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œä½†æˆ‘ä½¿ç”¨è¿™ä¸ªæ²¡æœ‰ç ¸å£³æˆåŠŸ(ä¼°è®¡æ˜¯éœ€è¦é’ˆå¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œç­¾å)ã€‚ Clutch è¶Šç‹±ç³»åˆ—æ–‡ç«  åŸºäºŽ iOS10.3.1 è¿›è¡Œçš„å®žè·µã€‚ iOS é€†å‘: dumpdecrypted ç ¸å£³è®° iOS é€†å‘: ç ¸å£³ iOS é€†å‘: æŸ¥çœ‹ç³»ç»Ÿæ–‡ä»¶ç›®å½•å’Œç»“æž„ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH dumpdecrypted ç ¸å£³ï¼šå¯¼å‡ºå¤´æ–‡ä»¶ ä¸€ä¸ªç¥žå¥‡çš„äºŒç»´ç ~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSå®‰å…¨ è¶Šç‹± jailbreak</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[oh-my-zsh é…ç½®]]></title>
    <url>%2F2019%2F04%2F03%2Foh-my-zsh-%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[å–œæ¬¢ä½¿ç”¨ç»ˆç«¯çš„æœ‹å‹éƒ½çŸ¥é“åœ¨ linuxã€macOS ä¸Šé¢é»˜è®¤ä½¿ç”¨çš„æ˜¯ bash shellï¼Œè™½ç„¶ bash æ¯”è¾ƒå¼ºå¤§ï¼Œä½†æ˜¯æ¯”èµ· zsh è¿˜æ˜¯ç¨é€Šä¸€ç­¹ã€‚zsh è™½ç„¶å¥½ç”¨ä½†é…ç½®æ¯”è¾ƒå¤æ‚ï¼ŒäºŽæ˜¯ä¹Ž oh-my-zsh å°±è¯žç”Ÿäº†ï¼Œå®ƒç»Ÿä¸€ç®¡ç† zsh çš„é…ç½®ã€‚ macOS ä¸Šé¢å®‰è£… oh-my-zsh åŽï¼Œæ„Ÿè§‰æ•²å‘½ä»¤æ›´çˆ½äº†ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿›è¡Œ git æ“ä½œçš„æ—¶å€™ï¼Œå¾ˆæ–¹ä¾¿ã€‚ å®‰è£…æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥åœ¨ç»ˆç«¯é€šè¿‡ curl ä¹Ÿå¯ä»¥é€šè¿‡ wget æ–¹å¼ï¼Œå®‰è£…æ–¹æ³•å¦‚ä¸‹ã€‚ 1ã€é€šè¿‡ curl æ–¹å¼ 1sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)" 2ã€é€šè¿‡ wget æ–¹å¼ 1sh -c "$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)" oh-my-zsh æ”¯æŒ linuxã€macOS å’Œ windowsï¼Œä½†æ˜¯åœ¨ linux å’Œ macOS ä¸Šé¢æ”¯æŒæœ€å¥½ã€‚ å®‰è£…æˆåŠŸåŽï¼ŒåŽŸæ¥åœ¨ç³»ç»Ÿ shell é…ç½®çš„çŽ¯å¢ƒå˜é‡éœ€è¦è®© oh-my-zsh çŸ¥é“ï¼Œé…ç½®ä¸€ä¸‹ ~/.zshrc æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­çš„ User configuration ä¸‹é¢å¢žåŠ ä¸‹é¢ä¸¤è¡Œé…ç½®å°±å¯ä»¥äº†ã€‚ 12source ~/.bash_profilesource /etc/profile é…ç½®å®ŒæˆåŽä¿å­˜æ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œï¼š 1source ~/.zshrc è¿™æ ·ä¹‹å‰é…ç½®çš„çŽ¯å¢ƒå˜é‡åœ¨ oh-my-zsh ä¸‹å°±ç”Ÿæ•ˆäº†ã€‚ oh-my-zsh æ”¯æŒä¸‰æ–¹æ’ä»¶å’Œä¸»é¢˜é…ç½®ï¼Œé»˜è®¤çš„é…ç½®å·²ç»å¤Ÿç”¨äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡ŒæŽ¢ç´¢ã€‚ å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>zsh git tool</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Follow your heart]]></title>
    <url>%2F2019%2F03%2F24%2FFollow-your-heart%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©ä¸èŠæŠ€æœ¯ï¼ŒèŠèŠäººç”Ÿ~ æœ€è¿‘å¤©æ°”åƒç–¯äº†ä¸€æ ·ï¼Œæ°”æ¸©åå¤æ— å¸¸ï¼Œæ—¶å†·æ—¶çƒ­ï¼Œè®©äººæœ‰ç‚¹åº”æŽ¥ä¸æš‡ã€‚ æ­£å¥½åˆšæ¬å®Œå®¶ï¼Œå®¶é‡Œå¾ˆå¤šä¸œè¥¿éœ€è¦è´­ä¹°ï¼Œé¦–å…ˆè€ƒè™‘çš„æ˜¯ç»™è‡ªå·±ä¹°å¯¹èˆ’æœçš„æ¡Œæ¤…ã€‚å®žä½“åº—é‡Œé¢çš„æ¡Œæ¤…å®žåœ¨æ˜¯è´µçš„ç¦»è°±ï¼ŒåŠ¨è¾„å‘Šè¯‰æˆ‘è¯´æ˜¯å®žæœ¨å“Ÿï¼ŒçŽ°åœ¨ä½Žä»·å¤„ç†ä¹‹ç±»çš„ï¼Œè¿˜å¥½æˆ‘ä¸æ˜¯å¾ˆå‚»ã€‚æœ€åŽç´¢æ€§å°±åœ¨ç½‘ä¸Šè´­ä¹°äº†ï¼Œæ€§ä»·æ¯”ä¹Ÿæ¯”è¾ƒé«˜ï¼Œæˆ‘ä¹Ÿç®—æ˜¯æ¥äº†ä¸€æŠŠæ²‰æµ¸å¼çš„ç–¯ç‹‚è´­ç‰©ä½“éªŒã€‚ çŽ°åœ¨ç‰©æµæœåŠ¡å¾ˆæ˜¯è´´å¿ƒï¼Œå…³æ³¨å¯¹åº”çš„å…¬ä¼—å·å°±å¯ä»¥åŠæ—¶å‘Šè¯‰ä½ å½“å‰ç‰©æµçš„è¿›åº¦ã€‚ç›¸æ¯”ä¹‹å‰ï¼Œæ— è®ºæ˜¯é€è´§é€Ÿåº¦è¿˜æ˜¯æœåŠ¡éƒ½æœ‰æ˜¾è‘—æå‡ï¼Œä¸»è¦æ˜¯å®žæƒ ã€‚ ç½‘ä¸Šæ·˜çš„è¿™ä¸ªæ¡Œå­æ¯”è¾ƒé‡ï¼Œè¦æƒ³è‡ªå·±æŠŠè¿™ä¸ªæ¡Œå­å¼„åˆ°å®¶è¿˜æ˜¯ç›¸å½“è´¹åŠ²çš„ã€‚å¿«é€’å‘˜çœ‹å‡ºäº†æˆ‘çš„çª˜å¢ƒï¼Œè¯´ï¼šâ€œæˆ‘è¿™ä¸ªæŽ¨è½¦åæ­£çŽ°åœ¨ä¹Ÿé—²ç€ï¼Œä½ å…ˆæ‹¿åŽ»ç”¨å§ï¼â€ï¼Œæˆ‘è¿žå¿™é“è°¢ï¼Œæœ‰äº†è¿™ä¸ªæŽ¨è½¦æ¬èµ·æ¥å°±å®¹æ˜“å¤šäº†ã€‚ ä¸åˆ°ååˆ†é’Ÿçš„æ—¶é—´ï¼Œæˆ‘å°±æŠŠè´§é€åˆ°å®¶äº†ã€‚å¿ƒç†ä¸€ç›´æƒ³åˆ«äººä¹Ÿè®¸è¿™ä¼šéœ€è¦æ€¥ç€ç”¨è½¦ï¼Œå°±èµ¶ç´§ä¸‹æ¥¼ï¼Œèµ°åˆ°æ¥¼ä¸‹æ‹è§’çš„æ—¶å€™ï¼Œçªç„¶è¢«ä¸€ä¸ªäººå–Šä½ï¼Œæˆ‘å›žå¤´ä¸€çœ‹æ˜¯ä¸€ä¸ªé™Œç”Ÿçš„å¿«é€’å‘˜ã€‚ ä»–è¯­è°ƒæ¯”è¾ƒé«˜ï¼šâ€œå–‚ï¼Œå…ˆç”Ÿï¼Œä½ é‚£ä¸ªè½¦å­æ”¾åˆ°æˆ‘è¿™é‡Œå°±å¯ä»¥äº†ï¼Œæ˜¯æˆ‘ä»¬çš„ï¼â€ã€‚æˆ‘çž„äº†ä»–ä¸€çœ¼ï¼Œè¯´é“ï¼šâ€œä½ æ˜¯å“ªä¸ªå¿«é€’å…¬å¸çš„ï¼Œæˆ‘ä¸æ˜¯ä»Žä½ æ‰‹ä¸Šæ‹¿çš„è½¦å‘€ï¼â€ï¼Œè¿™å“¥ä»¬ä¾æ—§å¼ºåŠ¿ï¼šâ€œæˆ‘æ˜¯xxå¿«é€’ï¼Œè¿™è½¦å°±æ˜¯æˆ‘ä»¬çš„ã€‚â€ã€‚ æˆ‘å¿ƒæƒ³è¿™ä¸¤ä¸ªå¿«é€’å‘˜æ˜¯ä¸æ˜¯è®¤è¯†ï¼Œè¿™ä¸ªè½¦å­åŽŸæœ¬å°±æ˜¯çœ¼å‰è¿™ä¸ªæ°”åŠ¿æ±¹æ±¹çš„äººçš„ï¼Ÿ å¿ƒç†æ­£åœ¨çŠ¯ç€å˜€å’•ï¼Œå†³å®šè¿˜æ˜¯è¦ç‰©å½’åŽŸä¸»ã€‚ æˆ‘æ²¡æœ‰å†ç†ä»–ï¼Œç»§ç»­æœç€åŽŸæ¥æ”¶å¿«é€’çš„åœ°æ–¹èµ°åŽ»ï¼ŒæŠŠè½¦è¿˜ç»™äº†ä¸»äººã€‚æˆ‘é¡ºä¾¿é—®é“ï¼šâ€œåˆšæ‰æœ‰ä¸ªxxå¿«é€’çš„å°å“¥è¯´è½¦å­æ˜¯ä»–çš„ï¼Ÿâ€ï¼Œä»–è¯´ï¼šâ€œå¯èƒ½æ˜¯ä»–çœ‹é”™äº†ï¼Œä½ çœ‹è¿™è½¦å­ä¸Šé¢æœ‰æˆ‘ä»¬å…¬å¸çš„æ ‡è®°å‘¢â€ã€‚æˆ‘ä»”ç»†ä¸€çœ‹æžœç„¶æ˜¯ï¼Œåº†å¹¸è‡ªå·±æ²¡æœ‰æŠŠè½¦äº¤ç»™åˆ«äººã€‚ äººç”Ÿä¸­ï¼Œä»¿ä½›ä¹Ÿæœ‰å¾ˆå¤šç±»ä¼¼ä¸Šé¢çš„åœºæ™¯ï¼Œå‡å¦‚ä½ é‡åˆ°äº†ä¼šæ€Žä¹ˆå¤„ç†å‘¢ï¼Ÿ å°±æ‹¿å©šå§»æ¥è¯´ï¼Œä½ è®¤å®šçš„è‡ªå·±çš„å¦ä¸€åŠå°±æ˜¯è¿™è¾ˆå­è¦å¨¶æˆ–è€…è¦å«çš„é‚£ä¸ªäººï¼Œä½†æ˜¯ä½ èº«è¾¹çš„æœ‹å‹æˆ–è€…å®¶äººå¹¶ä¸çœ‹å¥½ä½ ä»¬ï¼Œç”šè‡³ä»–ä»¬åŽ‹æ ¹ä¸æ‰¿è®¤ä½ çš„å¦ä¸€åŠï¼Œä½ åˆä¼šæ€Žä¹ˆåŠžï¼Ÿ æˆ‘è§‰å¾—é‡åˆ°è¿™æ ·çš„äº‹æƒ…ï¼Œè¦å¬ä»Žè‡ªå·±çš„å†…å¿ƒ(Follow your heart)ï¼Œä¸è¦å› ä¸ºåˆ«äººçš„ä¸‰è¨€ä¸¤è¯­ï¼Œä½ å°±è½»æ˜“æ”¾å¼ƒå½“åˆçš„é€‰æ‹©ï¼Œè€Œåº”è¯¥æ›´åŠ ç†æ€§çš„åšå‡ºåˆ¤æ–­ï¼Œç›¸ä¿¡è‡ªå·±çš„åˆ¤æ–­ä¸ä¼šé”™ï¼Œåªæœ‰è¿™æ ·ä½ æ‰ä¸ä¼šåŽæ‚”ï¼Œè‡³å°‘çˆ±è¿‡ã€‚ å­¦ä¹ ã€å·¥ä½œå’Œç”Ÿæ´»ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ—¢å®šäº†ç›®æ ‡å°±åº”è¯¥å‹‡å¾€ç›´å‰ï¼Œåœ¨è·¯ä¸Šé‡åˆ°çš„ä»»ä½•å›°éš¾é‚£æ˜¯å†æ­£å¸¸ä¸è¿‡çš„ï¼Œåˆ«äººçš„å†·å˜²çƒ­è®½ä¹Ÿå¥½ï¼Œæ‰“å‡»åˆºæ¿€ä¹Ÿç½¢ï¼Œä½ è¦åšçš„å°±æ˜¯åšå®ˆä½ è‡ªå·±çš„å†…å¿ƒï¼Œä¸€å¸†é£Žé¡ºå¾—åˆ°çš„å¹¸ç¦ç»ˆç©¶ä¼šæ˜™èŠ±ä¸€çŽ°ã€‚ ~ å……æ»¡é…¸ç”œè‹¦è¾£çš„äººç”Ÿæ‰å€¼å¾—å›žå‘³ï¼Œä¸æ˜¯å—ï¼Ÿ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java æžšä¸¾çš„æœ¬è´¨]]></title>
    <url>%2F2019%2F03%2F16%2FJava-%E6%9E%9A%E4%B8%BE%E7%9A%84%E6%9C%AC%E8%B4%A8%2F</url>
    <content type="text"><![CDATA[æ¦‚è¦æœ¬æ–‡è·Ÿå¤§å®¶ä¸€èµ·æŽ¢è®¨ä¸€ä¸‹ Java æžšä¸¾çš„æœ¬è´¨ï¼Œè¿™ç¯‡æ–‡ç« çš„å†…å®¹æ˜¯æˆ‘åœ¨ 2012å¹´09æœˆ05æ—¥ å‘å¸ƒåˆ° CSDN ä¸Šé¢çš„ä¸€ç¯‡åšæ–‡ Java æžšä¸¾ï¼šç†è§£æžšä¸¾æœ¬è´¨ï¼Œè™½ç„¶å·²ç»ä¸åœ¨ CSDN ä¸Šé¢è€•è€˜äº†ï¼Œä½†å¶å°”ä¹Ÿä¼šåŽ»çœ‹çœ‹æœ‹å‹ä»¬çš„ç•™è¨€ï¼Œæ¯•ç«Ÿæ„Ÿæƒ…åœ¨é‚£é‡Œï¼ä»Šå¤©å¶ç„¶çœ‹åˆ°æœ‰å°ä¼™ä¼´è¯„è®ºè¿™ç¯‡æ–‡ç« ï¼Œä¸€æ—¶å…´èµ·å°±æƒ³å†æ¬¡åˆ†äº«ç»™å¤§å®¶ã€‚ å­¦ä¹ ç¼–ç¨‹è¯­è¨€ï¼Œä¼šç”¨åªæ˜¯æœ€åŸºæœ¬çš„è¦æ±‚ï¼Œäº†è§£å’Œç†Ÿæ‚‰å…¶å®žçŽ°ã€è¿è¡Œæœºåˆ¶æ‰ä½¿å¾—ä½ æœ‰åˆ«äºŽå¸¸äººï¼ C æžšä¸¾åœ¨ C è¯­è¨€ä¸­ï¼Œå¯ä»¥è¿™æ ·æ¥å®šä¹‰æžšä¸¾ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123enum color &#123; RED=0, GREEN, BLUE, YELLOW&#125; col; å…³é”®å­— enum å®šä¹‰æžšä¸¾ï¼Œåœ¨å®šä¹‰æžšä¸¾çš„åŒæ—¶ï¼Œå£°æ˜Žè¯¥æžšä¸¾å˜é‡ col. æ³¨æ„ï¼šC è¯­è¨€ä¸­æžšä¸¾æˆå‘˜çš„å€¼æ˜¯æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨åŠ  1 çš„ï¼ˆGREEN = 1ï¼ŒBLUE = 2 ç­‰ï¼‰ã€‚ C è¯­è¨€ä¸­ switch è¯­å¥æ”¯æŒæžšä¸¾ç±»åž‹ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536#include&lt;stdio.h&gt;int main() &#123; enum color &#123; RED=0, GREEN, BLUE, YELLOW &#125; col; int cl; printf("0=red, 1=green, 2=blue, 3=yellow. seclect:\n"); scanf("%d",&amp;cl); col=(enum color) cl; switch(col) &#123; case RED: printf("the color is red\n"); break; case GREEN: printf("the color is green\n"); break; case BLUE: printf("the color is blue\n"); break; case YELLOW: printf("the color is yellow\n"); break; defalut: printf("no this color\n"); break; &#125; return 0;&#125; Java æžšä¸¾é‚£ä¹ˆï¼ŒJava é‡Œé¢çš„æžšä¸¾ä¸Žå…¶ç±»ä¼¼ï¼Œä½†æ˜¯åˆä¸æ˜¯å®Œå…¨ä¸€æ ·ã€‚Java è¯­è¨€ä¸­å®šä¹‰æžšä¸¾ä¹Ÿæ˜¯ä½¿ç”¨ enum å…³é”®å­—ï¼Œå¦‚ä¸‹ç¤ºä¾‹æ˜¯ Java è¯­è¨€çš„æžšä¸¾ï¼š 123public enum Color &#123; RED, GREEN, BLUE, YELLOW;&#125; ä¸Šè¿°å®šä¹‰äº†ä¸€ä¸ªæžšä¸¾ç±»åž‹ Colorï¼ˆå¯ä»¥è¯´æ˜¯ç±»ï¼Œç¼–è¯‘ä¹‹åŽæ˜¯ Color.classï¼‰. ä¸Šé¢çš„å®šä¹‰ï¼Œè¿˜å¯ä»¥æ”¹æˆä¸‹é¢çš„è¿™ç§å½¢å¼: 123public enum Color &#123; RED(), GREEN(), BLUE(), YELLOW();&#125; åˆ°è¿™é‡Œä½ å¯èƒ½ä¼šè§‰å¾—è¿·èŒ«ï¼ˆå¦‚æžœä½ æ˜¯åˆå­¦è€…çš„è¯ï¼‰ï¼Œä¸ºä»€ä¹ˆè¿™æ ·å­ä¹Ÿå¯ä»¥ï¼Œwhyï¼Ÿ å…¶å®žï¼Œæžšä¸¾çš„æˆå‘˜å°±æ˜¯æžšä¸¾å¯¹è±¡ï¼Œåªä¸è¿‡å®ƒä»¬æ˜¯é™æ€å¸¸é‡è€Œå·²ã€‚ ä½¿ç”¨ javap å‘½ä»¤ï¼ˆjavap æ–‡ä»¶å&lt;æ²¡æœ‰åŽç¼€.class&gt;ï¼‰å¯ä»¥åç¼–è¯‘ class æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼šâ€‹â€‹â€‹â€‹ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ™®é€šç±»æ¥æ¨¡æ‹Ÿæžšä¸¾ï¼Œä¸‹é¢å®šä¹‰ä¸€ä¸ª Color ç±»ï¼Œå¦‚ä¸‹ï¼š 123456public class Color &#123; private static final Color RED = new Color(); private static final Color GREEN = new Color(); private static final Color BLUE = new Color(); private static final Color YELLOW = new Color();&#125; ç»“åˆä¸Šå›¾åç¼–è¯‘çš„ç»“æžœï¼Œåšä¸€ä¸‹å¯¹æ¯”ï¼Œä½ æ˜¯å¦çœ‹å‡ºäº†ä¸€ç‚¹ç«¯å€ªï¼ˆåç¬‘ï¼‰ï¼Œå¦‚æžœæ²¡æœ‰çœ‹å‡ºæ¥ï¼Œé‚£å°±æŽ¥ç€å¾€ä¸‹çœ‹å§ã€‚ å¦‚æžœæŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œæ˜¯å¦è¿˜å¯ä»¥ä¸ºå…¶æ·»åŠ å¦å¤–çš„æž„é€ æ–¹æ³•ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼ 123456789101112public enum Color &#123; RED("red color", 0), GREEN("green color", 1), BLUE("blue color", 2), YELLOW("yellow color", 3); Color(String name, int id) &#123; _name = name; _id = id; &#125; String _name; int _id;&#125; ä¸º Color å£°æ˜Žäº†ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œå¹¶ä¸ºå…¶æž„é€ å¸¦å‚æ•°çš„æž„é€ å™¨ã€‚ å¦‚æžœä½ è¿™æ ·åˆ›å»ºä¸€ä¸ªæžšä¸¾: 1234public enum Color &#123; RED("red color", 0), GREEN("green color", 1), BLUE("blue color", 2), YELLOW("yellow color", 3);&#125; ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™: 1The constructor EnumDemo.Color(String, int) is undefined åˆ°æ­¤ï¼Œä½ åº”è¯¥çœ‹æ˜Žç™½äº†ï¼Œæžšä¸¾å’Œæ™®é€šçš„ Java ç±»å¾ˆåƒã€‚ å¯¹äºŽç±»æ¥è®²ï¼Œæœ€å¥½å°†å…¶æˆå‘˜å˜é‡ç§æœ‰åŒ–ï¼Œå¹¶ä¸”ä¸ºæˆå‘˜å˜é‡æä¾› getã€set æ–¹æ³•ã€‚ æŒ‰ç…§è¿™ä¸ªåŽŸåˆ™ï¼Œå¯ä»¥è¿›ä¸€æ­¥å†™å¥½ enum Colorï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728public enum Color &#123; RED("red color", 0), GREEN("green color", 1), BLUE("blue color", 2), YELLOW("yellow color", 3); Color(String name, int id) &#123; _name = name; _id = id; &#125; private String _name; private int _id; public void setName(String name) &#123; _name = name; &#125; public void setId(int id) &#123; _id = id; &#125; public String getName() &#123; return _name; &#125; public int getId() &#123; return _id; &#125;&#125; ä½†æ˜¯ Java è®¾è®¡æžšä¸¾çš„ç›®çš„æ˜¯æä¾›ä¸€ç»„å¸¸é‡ï¼Œæ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ã€‚å¦‚æžœæˆ‘ä»¬å†’ç„¶çš„æä¾› set æ–¹æ³•ï¼ˆå¤–ç•Œå¯ä»¥æ”¹å˜å…¶æˆå‘˜å±žæ€§ï¼‰ï¼Œå¥½åƒæœ‰ç‚¹è¿èƒŒäº†è®¾è®¡çš„åˆè¡·ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥èˆå¼ƒ set æ–¹æ³•ï¼Œä¿ç•™ get æ–¹æ³•ã€‚ 1234567891011121314151617181920public enum Color &#123; RED("red color", 0), GREEN("green color", 1), BLUE("blue color", 2), YELLOW("yellow color", 3); Color(String name, int id) &#123; _name = name; _id = id; &#125; private String _name; private int _id; public String getName() &#123; return _name; &#125; public int getId() &#123; return _id; &#125;&#125; å¯¹äºŽæ™®é€šçš„åŸºæœ¬ç±»å¯ä»¥å°†å…¶å®žä¾‹åŒ–ï¼Œé‚£ä¹ˆï¼Œèƒ½å¦å®žä¾‹åŒ–æžšä¸¾å‘¢ï¼Ÿ åœ¨å›žç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ Color.class æ–‡ä»¶: 1234567891011121314151617181920public static enum Color &#123; RED("red color", 0), GREEN("green color", 1), BLUE("blue color", 2), YELLOW("yellow color", 3); private String _name; private int _id; private Color(String name, int id) &#123; this._name = name; this._id = id; &#125; public String getName() &#123; return this._name; &#125; public int getId() &#123; return this._id; &#125;&#125; å¯ä»¥çœ‹å‡ºï¼Œç¼–è¯‘å™¨æ·˜æ°”çš„ä¸ºå…¶æž„é€ æ–¹æ³•åŠ ä¸Šäº† privateï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ— æ³•å®žä¾‹åŒ–æžšä¸¾ã€‚ æ‰€æœ‰æžšä¸¾ç±»éƒ½ç»§æ‰¿äº† Enum ç±»çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ toStringã€equalsã€hashcode ç­‰æ–¹æ³•ã€‚å› ä¸º equalsã€hashcode æ–¹æ³•æ˜¯ final çš„ï¼Œæ‰€ä»¥ä¸å¯ä»¥è¢«æžšä¸¾é‡å†™ï¼ˆåªå¯ä»¥ç»§æ‰¿ï¼‰ï¼Œä½†å¯ä»¥é‡å†™ toString æ–¹æ³•ã€‚ æ–‡æœ«çš„é™„å½•ä¸­æä¾›äº† Enum çš„æºç ï¼Œæœ‰å…´è¶£å¯ä»¥æŸ¥çœ‹é˜…è¯»ï¼ é‚£ä¹ˆï¼Œä½¿ç”¨ Java çš„ç±»æ¥æ¨¡æ‹Ÿä¸€ä¸‹æžšä¸¾ï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041package mark.demo;import java.util.ArrayList;import java.util.List;public class Color &#123; private static final Color RED = new Color("red color", 0); private static final Color GREEN = new Color("green color", 1); private static final Color BLUE = new Color("blue color", 2); private static final Color YELLOW = new Color("yellow color", 3); private final String _name; private final int _id; private Color(String name, int id) &#123; _name = name; _id = id; &#125; public String getName() &#123; return _name; &#125; public int getId() &#123; return _id; &#125; public static List&lt;Color&gt; values() &#123; List&lt;Color&gt; list = new ArrayList&lt;Color&gt;(); list.add(RED); list.add(GREEN); list.add(BLUE); list.add(YELLOW); return list; &#125; @Override public String toString() &#123; return "the color _name=" + _name + ", _id=" + _id; &#125;&#125; é™„å½•Enum.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209package java.lang;import java.io.Serializable;import java.io.IOException;import java.io.InvalidObjectException;import java.io.ObjectInputStream;import java.io.ObjectStreamException;/** * This is the common base class of all Java language enumeration types. * * @author Josh Bloch * @author Neal Gafter * @version %I%, %G% * @since 1.5 */public abstract class Enum&lt;E extends Enum&lt;E&gt;&gt; implements Comparable&lt;E&gt;, Serializable &#123; /** * The name of this enum constant, as declared in the enum declaration. * Most programmers should use the &#123;@link #toString&#125; method rather than * accessing this field. */ private final String name; /** * Returns the name of this enum constant, exactly as declared in its * enum declaration. * * &lt;b&gt;Most programmers should use the &#123;@link #toString&#125; method in * preference to this one, as the toString method may return * a more user-friendly name.&lt;/b&gt; This method is designed primarily for * use in specialized situations where correctness depends on getting the * exact name, which will not vary from release to release. * * @return the name of this enum constant */ public final String name() &#123; return name; &#125; /** * The ordinal of this enumeration constant (its position * in the enum declaration, where the initial constant is assigned * an ordinal of zero). * * Most programmers will have no use for this field. It is designed * for use by sophisticated enum-based data structures, such as * &#123;@link java.util.EnumSet&#125; and &#123;@link java.util.EnumMap&#125;. */ private final int ordinal; /** * Returns the ordinal of this enumeration constant (its position * in its enum declaration, where the initial constant is assigned * an ordinal of zero). * * Most programmers will have no use for this method. It is * designed for use by sophisticated enum-based data structures, such * as &#123;@link java.util.EnumSet&#125; and &#123;@link java.util.EnumMap&#125;. * * @return the ordinal of this enumeration constant */ public final int ordinal() &#123; return ordinal; &#125; /** * Sole constructor. Programmers cannot invoke this constructor. * It is for use by code emitted by the compiler in response to * enum type declarations. * * @param name - The name of this enum constant, which is the identifier * used to declare it. * @param ordinal - The ordinal of this enumeration constant (its position * in the enum declaration, where the initial constant is assigned * an ordinal of zero). */ protected Enum(String name, int ordinal) &#123; this.name = name; this.ordinal = ordinal; &#125; /** * Returns the name of this enum constant, as contained in the * declaration. This method may be overridden, though it typically * isn't necessary or desirable. An enum type should override this * method when a more "programmer-friendly" string form exists. * * @return the name of this enum constant */ public String toString() &#123; return name; &#125; /** * Returns true if the specified object is equal to this * enum constant. * * @param other the object to be compared for equality with this object. * @return true if the specified object is equal to this * enum constant. */ public final boolean equals(Object other) &#123; return this==other; &#125; /** * Returns a hash code for this enum constant. * * @return a hash code for this enum constant. */ public final int hashCode() &#123; return super.hashCode(); &#125; /** * Throws CloneNotSupportedException. This guarantees that enums * are never cloned, which is necessary to preserve their "singleton" * status. * * @return (never returns) */ protected final Object clone() throws CloneNotSupportedException &#123; throw new CloneNotSupportedException(); &#125; /** * Compares this enum with the specified object for order. Returns a * negative integer, zero, or a positive integer as this object is less * than, equal to, or greater than the specified object. * * Enum constants are only comparable to other enum constants of the * same enum type. The natural order implemented by this * method is the order in which the constants are declared. */ public final int compareTo(E o) &#123; Enum other = (Enum)o; Enum self = this; if (self.getClass() != other.getClass() &amp;&amp; // optimization self.getDeclaringClass() != other.getDeclaringClass()) throw new ClassCastException(); return self.ordinal - other.ordinal; &#125; /** * Returns the Class object corresponding to this enum constant's * enum type. Two enum constants e1 and e2 are of the * same enum type if and only if * e1.getDeclaringClass() == e2.getDeclaringClass(). * (The value returned by this method may differ from the one returned * by the &#123;@link Object#getClass&#125; method for enum constants with * constant-specific class bodies.) * * @return the Class object corresponding to this enum constant's * enum type */ public final Class&lt;E&gt; getDeclaringClass() &#123; Class clazz = getClass(); Class zuper = clazz.getSuperclass(); return (zuper == Enum.class) ? clazz : zuper; &#125; /** * Returns the enum constant of the specified enum type with the * specified name. The name must match exactly an identifier used * to declare an enum constant in this type. (Extraneous whitespace * characters are not permitted.) * * @param enumType the &lt;tt&gt;Class&lt;/tt&gt; object of the enum type from which * to return a constant * @param name the name of the constant to return * @return the enum constant of the specified enum type with the * specified name * @throws IllegalArgumentException if the specified enum type has * no constant with the specified name, or the specified * class object does not represent an enum type * @throws NullPointerException if &lt;tt&gt;enumType&lt;/tt&gt; or &lt;tt&gt;name&lt;/tt&gt; * is null * @since 1.5 */ public static &lt;T extends Enum&lt;T&gt;&gt; T valueOf(Class&lt;T&gt; enumType, String name) &#123; T result = enumType.enumConstantDirectory().get(name); if (result != null) return result; if (name == null) throw new NullPointerException("Name is null"); throw new IllegalArgumentException( "No enum const " + enumType +"." + name); &#125; /** * prevent default deserialization */ private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException &#123; throw new InvalidObjectException("can't deserialize enum"); &#125; private void readObjectNoData() throws ObjectStreamException &#123; throw new InvalidObjectException("can't deserialize enum"); &#125; /** * enum classes cannot have finalize methods. */ protected final void finalize() &#123; &#125;&#125; æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>macOS java enum</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[json-c]]></title>
    <url>%2F2019%2F03%2F10%2Fjson-c%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹json-c æ˜¯ C è¯­è¨€å†™çš„ä¸€å¥—æž„å»ºå’Œè§£æž JSON çš„åº“ã€‚ 12JSON-C implements a reference counting object model that allows you to easily construct JSON objects in C, output them as JSON formatted strings and parse JSON formatted strings back into the C representation of JSON objects. It aims to conform to RFC 7159. ä½¿ç”¨ C è¯­è¨€ç¼–å†™çš„ JSON åº“è¿˜æœ‰å¾ˆå¤šï¼Œå¯ä»¥åœ¨ ä»‹ç» JSON ä¸­æŸ¥æ‰¾åˆ°ï¼Œé™¤äº† Cè¯­è¨€çš„è¿˜æœ‰å…¶ä»–è¯­è¨€ç¼–å†™çš„ JSON å¼€æºåº“ã€‚ æ‰€æœ‰å‘å¸ƒçš„ json-c åº“ç‰ˆæœ¬åœ¨ è¿™é‡Œ éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œæœ¬ç¯‡ç¼–è¯‘çš„æ˜¯ json-c-0.13.1-20180305 è¿™ä¸ªç‰ˆæœ¬ã€‚ ç¼–è¯‘ä¸€ã€ä¸‹è½½ã€è§£åŽ‹ ç›´æŽ¥ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ json-c-0.13.1-20180305ï¼Œæˆªæ­¢åˆ°æœ¬æ–‡å‘å¸ƒè¯¥ç‰ˆæœ¬ä¸ºæœ€æ–°ç‰ˆæœ¬ã€‚ è§£åŽ‹åˆšæ‰ä¸‹è½½å¥½çš„æ–‡ä»¶ï¼Œè§£åŽ‹åŽå°†æ–‡ä»¶å¤¹é‡å‘½åä¸º json-c-srcï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸é‡åå®ƒã€‚ æ‰“å¼€ macOS ç»ˆç«¯ï¼Œè¿›å…¥ json-c-src æ–‡ä»¶å¤¹ 1cd json-c-src äºŒã€æºç ç¼–è¯‘ åœ¨ç¼–è¯‘ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²ç»åœ¨ macOS ä¸­å®‰è£…äº†ä¸‹é¢çš„å·¥å…·ï¼š 1ã€gcc, clang, æˆ–è€…å…¶ä»– C ç¼–è¯‘å™¨ï¼›2ã€libtool å·¥å…·ï¼Œç‰ˆæœ¬ä¸èƒ½ä½ŽäºŽ 2.2.6bï¼›3ã€autoconf å·¥å…·ï¼Œç‰ˆæœ¬ä¸èƒ½ä½ŽäºŽ 2.64 (autoreconf)ï¼›4ã€automakeå·¥å…·ï¼Œç‰ˆæœ¬ä¸èƒ½ä½ŽäºŽ 1.13ï¼› å¦‚æžœæ²¡æœ‰å®‰è£…ä¸Šé¢çš„å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ Homebrew è¿›è¡Œå®‰è£…ã€‚ åœ¨æ¡Œé¢æ–°å»ºä¸ªæ–‡ä»¶å¤¹ json-cï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥æ”¾å¾…ä¼šç¼–è¯‘åŽçš„æ–‡ä»¶ï¼ˆåº“å’Œå¤´æ–‡ä»¶ï¼‰ã€‚ æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¼€å§‹é…ç½®å’Œç¼–è¯‘ï¼Œå¦‚ä¸‹ï¼š 12345./configure --prefix=/Users/man/Desktop/json-cmakemake install æ³¨æ„ï¼š/Users/man/Desktop/json-c è¦å†™ç»å¯¹è·¯å¾„ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™ã€‚ å¦‚æžœè¦æ”¯æŒå¤šçº¿ç¨‹ï¼Œå¯ä»¥åŠ ä¸Š --enable-threading è¿™ä¸ªé€‰é¡¹ï¼Œå³ï¼š 12345./configure --enable-threading --prefix=/Users/man/Desktop/json-cmakemake install ç¼–è¯‘æˆåŠŸåŽï¼Œåœ¨ json-c ä¼šç”Ÿæˆå¯¹åº”çš„åº“å’Œå¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š ä½¿ç”¨ json-cç¼–è¯‘æˆåŠŸåŽï¼Œå¯ä»¥è¯•ç”¨ä¸€ä¸‹ json-c è¿™ä¸ªåº“äº†ï¼Œæˆ‘æŠŠ libjson-c.a å’Œå¯¹åº”çš„ include æ–‡ä»¶å¤¹æ”¾è¿› macOS å·¥ç¨‹ï¼Œç¼–è¯‘æ— æ³•é€šè¿‡ï¼ŒæŠ¥é”™ï¼Œç„¶åŽæ¢ä¸º libjson-c.4.dylib ç¼–è¯‘é€šè¿‡ä½†æ˜¯è¿è¡ŒæŠ¥é”™ï¼Œæ„æ€æ˜¯æ— æ³•åŠ è½½è¯¥åº“ã€‚ åŒæ ·é“ç†ï¼Œåœ¨ iOS å·¥ç¨‹ä¸Šé¢ç›´æŽ¥ä½¿ç”¨è¿™ä¸¤ä¸ªåº“ä¹Ÿæ˜¯æ— æ³•ä½¿ç”¨ã€‚ äºŽæ˜¯æˆ‘å°±ä½¿ç”¨ lipo æ¥æŸ¥çœ‹ä¸€ä¸‹åº“æ‰€æ”¯æŒçš„æž¶æž„ï¼Œçœ‹ä¸€ä¸‹ä¸‹é¢çš„ç»“æžœã€‚ 1234567$ lipo -info libjson-c.a Non-fat file: libjson-c.a is architecture: x86_64$ lipo -info libjson-c.4.dylib Non-fat file: libjson-c.4.dylib is architecture: x86_64 å¯ä»¥çœ‹å‡ºä¸¤ä¸ªåº“å‡å¯ä»¥æ”¯æŒ x86_64ï¼ŒæŒ‰é“ç†æ˜¯å¯ä»¥æ”¯æŒ macOS å’Œ iOS æ¨¡æ‹Ÿå™¨è¿è¡Œçš„ï¼ŒmacOS ä¸Šé¢å¯ä»¥ä½¿ç”¨ set | grep &quot;MACHTYPE&quot; å‘½ä»¤æŸ¥çœ‹å…¶æ“ä½œç³»ç»Ÿæž¶æž„ã€‚ libjson-c.a æ˜¯é™æ€åº“ï¼Œlibjson-c.4.dylib æ˜¯åŠ¨æ€åº“ï¼Œå¯ä»¥ä½¿ç”¨ file å‘½ä»¤æŸ¥çœ‹ã€‚ 1234567$ file libjson-c.a libjson-c.a: current ar archive$ file libjson-c.4.dylib libjson-c.4.dylib: Mach-O 64-bit dynamically linked shared library x86_64 æ³¨æ„ï¼šæ˜¾ç¤º ar archive è¡¨ç¤ºæ˜¯é™æ€åº“ã€‚ æœ€åŽè‡ªå·±æ²¡æœ‰æ‰¾åˆ°å¥½çš„åŠžæ³•ï¼Œåªèƒ½é‡‡å–ç¬¬äºŒä¸ªåŠžæ³•ï¼Œæºç ç›´æŽ¥æ”¾è¿› Xcode å·¥ç¨‹é‡Œé¢ç¼–è¯‘ä½¿ç”¨ã€‚ åœ¨æ”¾è¿› Xcode å·¥ç¨‹ä¹‹å‰ï¼Œéœ€è¦å°†ä¸‹è½½çš„æºç è¿›è¡Œé…ç½®æ“ä½œï¼Œå³ï¼š 1./configure è¿™æ ·ä¼šäº§ç”Ÿå¯¹åº” config.h ç­‰æ–‡ä»¶ï¼Œç„¶åŽå°†æºç ä¸­æ‰€æœ‰ .h å’Œ .c çš„æ–‡ä»¶æ‹·è´è‡³å·¥ç¨‹ä¸­å³å¯ç¼–è¯‘ä½¿ç”¨äº†ã€‚ æ³¨æ„ï¼šå¦‚æžœä¸æ‰§è¡Œ ./configure æ“ä½œï¼Œæ‹·è´çš„æºæ–‡ä»¶ä¸å…¨ï¼Œæ— æ³•é€šè¿‡ç¼–è¯‘ã€‚ ç®€å•ä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223#import "ViewController.h"#import "json-c/json.h"@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad&#123; [super viewDidLoad]; json_object *jsonObj = NULL; jsonObj = json_tokener_parse("&#123; \"uid\": 12, \"name\": \"foobar\", \"isComer\": 1, \"age\": 21, \"extras\": [ 11, 52, 3, \"unknow\", 75 ] &#125;"); const char *jsonString = json_object_to_json_string(jsonObj); printf("obj.to_string()=%s\n", jsonString);&#125;@end å¯¹åº”è¾“å‡ºç»“æžœï¼Œå¦‚ä¸‹ï¼š 1obj.to_string()=&#123; &quot;uid&quot;: 12, &quot;name&quot;: &quot;foobar&quot;, &quot;isComer&quot;: 1, &quot;age&quot;: 21, &quot;extras&quot;: [ 11, 52, 3, &quot;unknow&quot;, 75 ] &#125; ç–‘é—®Objective-C å·²ç»æä¾›äº†å…³äºŽ JSON çš„åº“äº†ï¼Œå¹²å˜›è¿˜æŠ˜è…¾ json-c å‘¢ï¼Ÿ çš„ç¡®ï¼Œè‡ªä»Ž iOS 5.0+ï¼ŒmacOS 10.7+ ä¹‹åŽï¼ŒFoundation æ¡†æž¶å·²ç»æä¾›äº† NSJSONSerializationï¼Œæˆ‘ä¸»è¦æ˜¯å¥½å¥‡ json-c è¿™ä¸ªåº“ï¼Œçœ‹ä»–çš„è·¨å¹³å°èƒ½åŠ›è€Œå·²ã€‚ å…³äºŽ NSJSONSerialization å¯ä»¥æŸ¥çœ‹ API æ–‡æ¡£ã€‚ æœ¬æ¬¡åˆ†äº«ï¼Œå‘Šè¾žï¼ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>C json json-c</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸è§å¾—ä½ ä¼šè®¡ç®—Cå­—ç¬¦ä¸²é•¿åº¦]]></title>
    <url>%2F2019%2F03%2F07%2F%E4%B8%8D%E8%A7%81%E5%BE%97%E4%BD%A0%E4%BC%9A%E8%AE%A1%E7%AE%97C%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ C å­—ç¬¦ä¸²åœ¨ C è¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²å®žé™…ä¸Šæ˜¯ä½¿ç”¨å­—ç¬¦ &#39;\0&#39; ç»ˆæ­¢çš„ä¸€ç»´å­—ç¬¦æ•°ç»„ã€‚ ä»¥ä¸‹å‡ ç§æ–¹å¼è¡¨ç¤ºçš„éƒ½æ˜¯ C å­—ç¬¦ä¸²çš„æ­£ç¡®è¡¨è¾¾æ–¹å¼ã€‚ 1234567891011121314// è¦ä»¥ '\0' ç»“å°¾char greeting[6] = &#123;'H', 'e', 'l', 'l', 'o', '\0'&#125;;// è¦ä»¥ '\0' ç»“å°¾char greeting[] = &#123;'H', 'e', 'l', 'l', 'o', '\0'&#125;;// é»˜è®¤ä¼šåœ¨æœ«å°¾å¢žåŠ '\0'char greeting[] = &#123;"Hello"&#125;;// ä¸Šé¢çš„ç®€å†™å½¢å¼char greeting[] = "Hello";// é»˜è®¤ä¼šåœ¨æœ«å°¾å¢žåŠ '\0'char *greeting = "Hello"; çœ‹ä¸‹é¢å¦å¤–ä¸€ç§å£°æ˜Žæ–¹å¼ï¼š 123char greeting[] = &#123;'h', 'e', 'l', 'l', 'o'&#125;;printf("greeting: %s\n", greeting); è¾“å‡ºç»“æžœï¼š 1greeting: hello\376 è¿™ä¸ªç»“æžœåœ¨ä¸åŒç¼–è¯‘å™¨ä¸‹é¢å¯èƒ½è¿˜ä¼šä¸ä¸€æ ·ï¼Œæ€»ä¹‹è¾“å‡ºéƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æžœã€‚è¿™ç§æ–¹å¼åˆ›å»ºçš„å­—ç¬¦ä¸²æ²¡æœ‰ &#39;\0&#39;ï¼Œä¸ç®—æ˜¯çœŸæ­£çš„ C å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å»ºè®®å¤§å®¶åœ¨å£°æ˜Ž C å­—ç¬¦ä¸²çš„æ—¶å€™ä½¿ç”¨å­—ç¬¦æŒ‡é’ˆï¼ˆchar *ï¼‰çš„æ–¹å¼ã€‚ string.h é‡Œé¢å£°æ˜Žäº†å¾ˆå¤šå…³äºŽæ“ä½œ C å­—ç¬¦ä¸²çš„åº“å‡½æ•°ã€‚ å­—ç¬¦ä¸²é•¿åº¦è¿™é‡Œåœ¨è¯´è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦çš„å‰ææ˜¯å­—ç¬¦ç¼–ç éƒ½æ˜¯æŒ‰ç…§UTF-8ï¼ˆä¸­æ–‡å ç”¨3ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡å ç”¨1ä¸ªå­—èŠ‚ï¼‰çš„ç¼–ç å½¢å¼ä¸ºå‰æçš„ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 123456789101112char *greeting1 = "hello";char greeting2[] = &#123;'h', 'e', 'l', 'l', 'o'&#125;;char greeting3[] = &#123;'h', 'e', 'l', 'l', 'o', '\0'&#125;;char greeting4[] = "hello"; printf("greeting1 sizeOf: %ld, strlen: %ld\n", sizeof(greeting1), strlen(greeting1));printf("greeting2 sizeOf: %ld, strlen: %ld\n", sizeof(greeting2), strlen(greeting2));printf("greeting3 sizeOf: %ld, strlen: %ld\n", sizeof(greeting3), strlen(greeting3));printf("greeting4 sizeOf: %ld, strlen: %ld\n", sizeof(greeting4), strlen(greeting4)); å¦‚æžœä½ èƒ½è¯´å‡ºä¸Šé¢ printf çš„ç»“æžœï¼ŒåŸºæœ¬ä¸Šå…³äºŽè®¡ç®—å­—ç¬¦ä¸²é•¿åº¦çš„é—®é¢˜å°±è¿Žåˆƒè€Œè§£äº†ã€‚ æŒ‰ç…§ UTF-8 ç¼–ç ï¼Œä¸Šé¢ä¾‹å­çš„è¾“å‡ºç»“æžœå¦‚ä¸‹æ‰€ç¤ºï¼š 1234greeting1 sizeOf: 8, strlen: 5greeting2 sizeOf: 5, strlen: 7greeting3 sizeOf: 6, strlen: 5greeting4 sizeOf: 6, strlen: 5 å¦‚æžœè¾“å‡ºç»“æžœä»¤ä½ æ— æ³•ç›¸ä¿¡ï¼Œå¯ä»¥é€‰æ‹©ç»§ç»­å¾€ä¸‹çœ‹æˆ–è€…ä½ è‡ªå·±å†™ä»£ç è¯•è¯•ã€‚ sizeofã€strlenåœ¨ linux.die å¯ä»¥æŸ¥åˆ° strlen çš„è¯´æ˜Žï¼Œå¦‚ä¸‹ï¼š 123456789Synopsis:#include &lt;string.h&gt;size_t strlen(const char *s);Description:The strlen() function calculates the length of the string s, excluding the terminating null byte (aq\0aq).Return Value:The strlen() function returns the number of bytes in the string s. å‡½æ•° strlen è¿”å›žå­—ç¬¦ä¸²é‡Œçš„å­—ç¬¦æ•°ï¼Œä¸åŒ…æ‹¬ç»ˆæ­¢å­—ç¬¦ &#39;\0&#39;ï¼Œè¿™é‡Œæ³¨æ„ strlen æ˜¯ä¸€ä¸ª C çš„å‡½æ•°ï¼Œè€Œ sizeof åªæ˜¯ä¸€ä¸ªæ“ä½œç¬¦ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œsizeof æ“ä½œç¬¦çš„å‚æ•°å¯ä»¥æ˜¯æ•°ç»„ã€æŒ‡é’ˆã€ç±»åž‹ã€å¯¹è±¡ã€å‡½æ•°ç­‰ï¼Œå‡½æ•° strlen çš„å‚æ•°åªèƒ½æ˜¯å­—ç¬¦ä¸²ã€‚ å¯¹äºŽ sizeofï¼Œ å…¶å‚æ•°ä¸åŒæ—¶ï¼Œå…¶è¿”å›žçš„å€¼ä¹Ÿä¸ä¸€æ ·ï¼Œå¦‚ä¸‹ï¼š 1ã€æ•°ç»„ï¼šç¼–è¯‘æ—¶åˆ†é…çš„æ•°ç»„ç©ºé—´å¤§å°ï¼›2ã€æŒ‡é’ˆï¼šå­˜å‚¨è¯¥æŒ‡é’ˆæ‰€ç”¨çš„ç©ºé—´å¤§å°(32ä½æœºå™¨ä¸Šæ˜¯4ï¼Œ64ä½æœºå™¨ä¸Šæ˜¯8)ï¼›3ã€ç±»åž‹ï¼šè¯¥ç±»åž‹æ‰€å çš„ç©ºé—´å¤§å°ï¼›4ã€å¯¹è±¡ï¼šå¯¹è±¡çš„å®žé™…å ç”¨ç©ºé—´å¤§å°(è¿™ä¸ªæŒ‡çš„æ˜¯åœ¨ C++ ä¸­)ï¼›5ã€å‡½æ•°ï¼šå‡½æ•°çš„è¿”å›žç±»åž‹æ‰€å çš„ç©ºé—´å¤§å°ã€‚å‡½æ•°çš„è¿”å›žç±»åž‹ä¸èƒ½æ˜¯ void ç±»åž‹ï¼› é‚£æˆ‘ä»¬å†å›žå¤´çœ‹çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘æŠŠè¦è¯´æ˜Žçš„å†™åœ¨æ³¨é‡Šä¸Šé¢äº†ã€‚ 1234567891011121314151617181920212223242526// æ³¨æ„è¿™é‡Œæ˜¯æŒ‡é’ˆchar *greeting1 = "hello";// æ²¡æœ‰ç»“æŸç¬¦ '\0'ï¼Œå…¶ strlen ç»“æžœä¸ç¡®å®šchar greeting2[] = &#123;'h', 'e', 'l', 'l', 'o'&#125;;char greeting3[] = &#123;'h', 'e', 'l', 'l', 'o', '\0'&#125;;char greeting4[] = "hello"; /* ç»“æžœæ˜¯ 8ã€5 *//* greeting1æ˜¯æŒ‡é’ˆï¼ŒsizeOfè®¡ç®—çš„æ˜¯å…¶å­˜å‚¨è¯¥æŒ‡é’ˆæ‰€ç”¨çš„ç©ºé—´å¤§å°ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯64ä½ macOSï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯8 *//*strlen è®¡ç®—çš„æ˜¯å­—ç¬¦ä¸ªæ•°ä½†æ˜¯ä¸åŒ…æ‹¬ç»“æŸç¬¦ '\0'*/printf("greeting1 sizeOf: %ld, strlen: %ld\n", sizeof(greeting1), strlen(greeting1));/* ç»“æžœæ˜¯ 5ã€7 *//* sizeof è®¡ç®—çš„æ˜¯ç¼–è¯‘æ—¶åˆ†é…çš„æ•°ç»„ç©ºé—´å¤§å°ï¼Œè¿™é‡Œæ˜¯5 *//* greeting2æ²¡æœ‰ç»“æŸç¬¦ï¼Œstrlen çš„è®¡ç®—ç»“æžœä¸ç¡®å®š */printf("greeting2 sizeOf: %ld, strlen: %ld\n", sizeof(greeting2), strlen(greeting2));/* ç»“æžœæ˜¯ 6ã€5 *//* sizeof è®¡ç®—çš„æ˜¯ç¼–è¯‘æ—¶åˆ†é…çš„æ•°ç»„ç©ºé—´å¤§å°ï¼Œè¿™é‡Œæ˜¯6ï¼Œå› ä¸ºå¤šäº†ç»“æŸç¬¦ *//*strlen è®¡ç®—çš„æ˜¯å­—ç¬¦ä¸ªæ•°ä½†æ˜¯ä¸åŒ…æ‹¬ç»“æŸç¬¦ '\0'*/printf("greeting3 sizeOf: %ld, strlen: %ld\n", sizeof(greeting3), strlen(greeting3));/* ç»“æžœæ˜¯ 6ã€5ï¼Œè¿™é‡Œç±»ä¼¼ä¸Šé¢çš„æƒ…å†µï¼Œä¸å†èµ˜è¿° */printf("greeting4 sizeOf: %ld, strlen: %ld\n", sizeof(greeting4), strlen(greeting4)); å°ç»“ï¼š 1ã€sizeof æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œè€Œ strlen æ˜¯ C è¯­è¨€çš„åº“å‡½æ•°ã€‚ 2ã€sizeof çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»åž‹æˆ–è€…è¡¨è¾¾å¼ï¼Œè€Œ strlen åªèƒ½ä»¥ç»“å°¾ä¸º &#39;\0&#39; çš„å­—ç¬¦ä¸²ä½œå‚æ•°ã€‚ 3ã€sizeof çš„ç»“æžœåœ¨ç¼–è¯‘æ—¶å°±è®¡ç®—å‡ºäº†ï¼Œè€Œ strlen å¿…é¡»åœ¨è¿è¡Œæ—¶æ‰èƒ½è®¡ç®—å‡ºæ¥ã€‚ 4ã€sizeof è®¡ç®—æ•°æ®ç±»åž‹å å†…å­˜çš„å¤§å°ï¼Œstrlen è®¡ç®—å­—ç¬¦ä¸²å®žé™…é•¿åº¦ï¼Œè¦è®°ä½ strlen è®¡ç®—å‡ºæ¥çš„ç»“æžœä¸åŒ…æ‹¬ç»“æŸç¬¦ &#39;\0&#39;ã€‚ 5ã€sizeof ååº”çš„å¹¶éžçœŸå®žå­—ç¬¦ä¸²é•¿åº¦è€Œæ˜¯æ‰€å ç©ºé—´å¤§å°ï¼Œæ‰€ä»¥memset åˆå§‹åŒ–å­—ç¬¦ä¸²çš„æ—¶å€™ç”¨ sizeof è¾ƒå¥½ã€‚ 6ã€ç³»ç»Ÿå‡½æ•°è¿”å›žå€¼æ˜¯ char * (å­—ç¬¦æŒ‡é’ˆ)ç±»åž‹çš„ä¼šåœ¨æœ«å°¾åŠ ä¸Šç»“æŸç¬¦ &#39;\0&#39;ã€‚ 7ã€æ— è®ºæ˜¯ sizeof è¿˜æ˜¯ strlen è®¡ç®—ç»“æžœçš„å•ä½éƒ½æ˜¯å­—èŠ‚ã€‚ æˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œstrlen å‡½æ•°ï¼Œå½“æ•°ç»„åä½œä¸ºå‚æ•°ä¼ å…¥æ—¶ï¼Œå®žé™…ä¸Šæ•°ç»„å°±é€€åŒ–æˆæŒ‡é’ˆäº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹å‡ºä¼ å…¥è¿›æ¥çš„å‚æ•°ä¼šè¢«é€€åŒ–ä¸ºæŒ‡é’ˆã€‚ æŽ¢ç´¢æ— æ­¢å¢ƒåœ¨æ–‡ç« çš„å¼€å§‹ï¼Œæˆ‘ç»™å‡ºäº†å‡ ç§ C å­—ç¬¦ä¸²çš„æ­£ç¡®è¡¨è¾¾æ–¹å¼ï¼Œé‚£æˆ‘ä»¬å†æ¥çœ‹å¦å¤–ä¸€ç§ã€‚ 1char greeting[4] = "blog"; è¿™ç§æ–¹å¼çœ‹èµ·æ¥å¥½åƒå¾ˆå®Œç¾Žçš„æ ·å­ï¼Œå…¶å®žæ˜¯ä¸å¯¹çš„ï¼Œå†™ä¸ªä¾‹å­ç»™å¤§å®¶ï¼Œå¦‚ä¸‹ï¼š 123456789int main(int argc, const char *argv[])&#123; char greeting[4] = "blog"; size_t len = strlen(greeting); printf("greeting len: %ld\n", len); printf("greeting: %s\n", greeting); return 0;&#125; ç¼–è¯‘è¿è¡Œï¼Œç»“æžœå¦‚ä¸‹ï¼š 12greeting len: 10greeting: blog\330\365\277\357\376 è‹å¤©å‘€ï¼Œè¿™ç»“æžœè®©äººæ— è¯­ã€‚ã€‚ã€‚ å¯¹äºŽ char greeting[4] = &quot;blog&quot; å…¶å®žæ˜¯å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º 4 çš„å­—ç¬¦æ•°ç»„ï¼Œä½†æ˜¯å­—ç¬¦ä¸² &quot;blog&quot; å®žé™…æ˜¯è¦åŒ…æ‹¬ç»“æŸç¬¦ \0 çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢çš„ä»£ç  1char greeting[4] = "blog"; æœ¬è´¨å’Œä¸‹é¢ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸‹ï¼š 1char greeting[] = &#123;'b', 'l', 'o', 'g'&#125;; æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ï¼Œé‚£æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œå¦‚ä¸‹ï¼š 12345678910int main(int argc, const char *argv[])&#123; // æ³¨æ„è¿™é‡Œæ˜¯ 5 char greeting[5] = "blog"; size_t len = strlen(greeting); printf("greeting len: %ld\n", len); printf("greeting: %s\n", greeting); return 0;&#125; æˆ–è€…è¿™æ ·å†™ï¼š 12345678910int main(int argc, const char *argv[])&#123; // è¿™é‡Œå¹²è„†ä¸è¦å†™æ•°å­— char greeting[] = "blog"; size_t len = strlen(greeting); printf("greeting len: %ld\n", len); printf("greeting: %s\n", greeting); return 0;&#125; è¿™æ ·ä¿®æ”¹åŽï¼Œå†ç¼–è¯‘è¿è¡Œç»“æžœå°±å¯¹äº†ï¼Œå¦‚ä¸‹ï¼š 12greeting len: 4greeting: blog æˆ‘ä»¬çŸ¥é“çš„ä¸œè¥¿æ˜¯æœ‰é™çš„ï¼Œæˆ‘ä»¬ä¸çŸ¥é“çš„ä¸œè¥¿åˆ™æ˜¯æ— ç©·çš„ã€‚]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>C char strlen sizeof</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä½¿ç”¨ libcurl]]></title>
    <url>%2F2019%2F03%2F03%2FiOS-%E4%BD%BF%E7%94%A8-libcurl%2F</url>
    <content type="text"><![CDATA[libcurl ç®€ä»‹libcurl æ˜¯ç”¨Cè¯­è¨€å†™çš„ä¸€å¥— å¼€æº åº“ï¼Œæ˜¯ä¸ºç½‘ç»œå®¢æˆ·ç«¯æä¾›æ•°æ®ä¼ è¾“åŠŸèƒ½çš„å‡½æ•°åº“ã€‚ libcurl æ”¯æŒ SMTPã€HTTPã€HTTPSã€FTPã€TELNET ç­‰åè®®å’Œå„ç§ SSL å®‰å…¨è®¤è¯ï¼Œæ”¯æŒ Solaris, NetBSD, FreeBSD, OpenBSD, Darwin, HPUX, IRIX, AIX, Tru64, Linux, UnixWare, HURD, Windows, Amiga, OS/2, BeOs, Mac OS X, Ultrix, QNX, OpenVMS, RISC OS, Novell NetWare, DOS ç­‰å¹³å°ï¼Œåœ¨ Android å’Œ iOS ä¸Šé¢ä¹Ÿå¯ä»¥ä½¿ç”¨ libcurl è¿™ä¸ªåº“ã€‚ ä¸‹é¢æ˜¯å®˜ç½‘çš„è‹±æ–‡ç®€ä»‹ï¼š 123456libcurl is a free and easy-to-use client-side URL transfer library, supporting DICT, FILE, FTP, FTPS, Gopher, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMTP, SMTPS, Telnet and TFTP. libcurl supports SSL certificates, HTTP POST, HTTP PUT, FTP uploading, HTTP form based upload, proxies, cookies, user+password authentication (Basic, Digest, NTLM, Negotiate, Kerberos), file transfer resume, http proxy tunneling and more!libcurl is highly portable, it builds and works identically on numerous platforms, including Solaris, NetBSD, FreeBSD, OpenBSD, Darwin, HPUX, IRIX, AIX, Tru64, Linux, UnixWare, HURD, Windows, Amiga, OS/2, BeOs, Mac OS X, Ultrix, QNX, OpenVMS, RISC OS, Novell NetWare, DOS and more...libcurl is free, thread-safe, IPv6 compatible, feature rich, well supported, fast, thoroughly documented and is already used by many known, big and successful companies. åˆ†äº«å†…å®¹ä»Šå¤©è·Ÿå¤§å®¶åˆ†äº« libcurl åœ¨ iOS ä¸Šé¢å¦‚ä½•ä½¿ç”¨ï¼Œä¸»è¦åˆ†äº«å†…å®¹å¦‚ä¸‹ï¼š 1ã€iOS å·¥ç¨‹é›†æˆ libcurlä»¥åŠé›†æˆæ³¨æ„äº‹é¡¹ã€‚2ã€åˆ©ç”¨ libcurl å‘é€ HTTP GET å’Œ POST è¯·æ±‚ã€‚3ã€ä½¿ç”¨ springboot æ­å»ºæœ¬åœ°æœåŠ¡ï¼Œè¿™ä¸ªåªæ˜¯ä¸ºäº†æ¼”ç¤ºä¸æ˜¯åˆ†äº«çš„é‡ç‚¹ã€‚ æ­å»ºæœ¬åœ°æœåŠ¡æœ¬åœ°æœåŠ¡é‡‡ç”¨ Spring Boot å¼€å‘ï¼Œå¼€å‘è¯­è¨€æ˜¯ Javaï¼ŒJDK ç‰ˆæœ¬1.8ï¼ŒSpring Boot ç‰ˆæœ¬æ˜¯ v2.1.3.RELEASEï¼Œé›†æˆ Web ç»„ä»¶å³å¯ï¼Œæ¯”è¾ƒç®€å•ã€‚å…³äºŽå¦‚ä½•æ­å»º Spring Bootçš„å¼€å‘çŽ¯å¢ƒï¼Œå¤§å®¶è‡ªè¡Œæœç´¢è§£å†³ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨æˆ‘çš„ git å·¥ç¨‹ï¼ŒçŒ›æˆ³å‰å¾€ å³å¯èŽ·å–å®Œæ•´ä»£ç ç¤ºä¾‹ã€‚ å·¥ç¨‹ç»“æž„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…³é”®ä»£ç å¦‚ä¸‹ï¼š è¯¥å·¥ç¨‹åªæ˜¯ä¸ºäº†é…åˆ libcurl çš„ä½¿ç”¨è€Œè¯žç”Ÿçš„ï¼Œæ²¡æœ‰ä»€ä¹ˆéš¾åº¦ã€‚ é›†æˆ libcurl1ã€æ–°å»º iOS å·¥ç¨‹ è¿™é‡Œå·¥ç¨‹ä¸º tutorial_libcurl_iOSã€‚ 2ã€å‡†å¤‡åº“æ–‡ä»¶ã€å¤´æ–‡ä»¶ libcurl å¯ä»¥è‡ªå·±ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«äººç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ curl-android-ios è¿™ä¸ªå·¥ç¨‹é‡Œé¢ç¼–è¯‘å¥½çš„æ–‡ä»¶ã€‚ 3ã€ç»™å·¥ç¨‹ tutorial_libcurl_iOS æ·»åŠ åº“å’Œå¤´æ–‡ä»¶ å°†ä¸Šé¢çš„æ–‡ä»¶æ‹·è´è‡³å·¥ç¨‹ç›®å½•å³å¯ï¼ŒçŽ°åœ¨å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š 4ã€è®¾ç½®è·¯å¾„ åœ¨ xcode ä¸­ Building Settings æ‰¾åˆ° User Header Search Paths ä¸ºå¦‚ä¸‹å†…å®¹ï¼š 1$(SRCROOT)/tutorial_libcurl_iOS/Classes è¿™ä¸€æ­¥ä¸æ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢è¿™æ ·æ•´ç†å’Œè®¾ç½®ç›®å½•ã€‚ 5ã€æ·»åŠ  libz.tbd å¦‚æžœä¸æ·»åŠ è¿™ä¸ªåº“ï¼Œç¼–è¯‘æ— æ³•é€šè¿‡ï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹é”™è¯¯ï¼š å‘é€ HTTP è¯·æ±‚ä¸‹é¢è¯´ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ libcurl æ¥å‘é€ HTTP çš„ GET å’Œ POST è¯·æ±‚ã€‚åªç»™å‡ºæ ¸å¿ƒç¤ºä¾‹ä»£ç ï¼Œå…¶ä½™çš„å¤§å®¶åŽ» tutorial_libcurl èŽ·å–å®Œæ•´ç¤ºä¾‹ä»£ç ï¼ŒåŒ…æ‹¬ Spring Boot çš„ã€‚ ViewController.m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119#import "ViewController.h"#import "curl/curl.h"// æˆ‘æœ¬æœºçš„ IP å’Œç«¯å£ï¼Œå®žé™…ä½ è¦æ¢æˆä½ è‡ªå·±çš„#define HOST_URL @"http://172.20.10.2:8080/user"@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad&#123; [super viewDidLoad];&#125;- (IBAction)doHTTPGETToFileAction:(id)sender&#123; NSString *reqUrl = [NSString stringWithFormat:@"%@%@", HOST_URL, @"?id=1&amp;name=veryitman"]; const char *url = [reqUrl cStringUsingEncoding:NSUTF8StringEncoding]; http_get_req(url);&#125;- (IBAction)doHTTPPOSTToFileAction:(id)sender&#123; const char *url = [HOST_URL cStringUsingEncoding:NSUTF8StringEncoding]; const char *data = "id=2&amp;name=veryitman"; http_post_req(url, data);&#125;#pragma mark - Cvoid http_get_req(const char *url)&#123; CURL *curl; const char *fpath = rspDataPath(@"http_get_rsp_data.log"); FILE *fp; fp = fopen(fpath, "wt+"); struct curl_slist *headers = NULL; //å¢žåŠ HTTP header headers = curl_slist_append(headers, "Accept:application/json"); headers = curl_slist_append(headers, "Content-Type:application/json"); headers = curl_slist_append(headers, "charset:utf-8"); //åˆå§‹åŒ– curl = curl_easy_init(); if (curl) &#123; //æ”¹åè®®å¤´ curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers); curl_easy_setopt(curl, CURLOPT_URL, url); curl_easy_setopt(curl, CURLOPT_POST, url); //wt+ï¼šè¯»å†™æ‰“å¼€æˆ–ç€å»ºç«‹ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼›å…è®¸è¯»å†™ if (NULL != fp) &#123; // è¯·æ±‚ç»“æžœå†™å…¥åˆ°æ–‡ä»¶å½“ä¸­ curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp); &#125; CURLcode rsp_code = curl_easy_perform(curl); if (CURLE_OK == rsp_code) &#123; NSLog(@"è¯·æ±‚è¿”å›žæˆåŠŸ"); &#125; else &#123; NSLog(@"è¯·æ±‚è¿”å›žå¤±è´¥ï¼Œè¿”å›žç æ˜¯ %i", rsp_code); &#125; curl_slist_free_all(headers); curl_easy_cleanup(curl); &#125; fclose(fp);&#125;void http_post_req(const char *url, const char *req_data)&#123; const char *fpath = rspDataPath(@"http_post_rsp_data.log"); FILE *fp; fp = fopen(fpath, "wt+"); CURL *curl; curl = curl_easy_init(); if (curl) &#123; curl_easy_setopt(curl, CURLOPT_URL, url); NSLog(@"length: %ld", strlen(req_data)); /* size of the POST data */ curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, strlen(req_data) + 1); /* pass in a pointer to the data - libcurl will not copy */ curl_easy_setopt(curl, CURLOPT_POSTFIELDS, req_data); if (NULL != fp) &#123; // è¯·æ±‚ç»“æžœå†™å…¥åˆ°æ–‡ä»¶å½“ä¸­ curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp); &#125; CURLcode rsp_code = curl_easy_perform(curl); if (CURLE_OK == rsp_code) &#123; NSLog(@"è¯·æ±‚è¿”å›žæˆåŠŸ"); &#125; else &#123; NSLog(@"è¯·æ±‚è¿”å›žå¤±è´¥ï¼Œè¿”å›žç æ˜¯ %i", rsp_code); &#125; curl_easy_cleanup(curl); &#125; fclose(fp);&#125;@end å¯åŠ¨ Spring Boot é¡¹ç›®ï¼Œå¯åŠ¨æˆåŠŸåŽï¼Œå†è¿è¡Œ xcode å·¥ç¨‹ï¼Œå¯ä»¥æµ‹è¯•ã€‚ ç‚¹å‡»å¯¹åº”çš„æŒ‰é’®å°±å¯ä»¥å‘é€ GET å’Œ POST è¯·æ±‚äº†ã€‚ è¯·æ±‚è¿”å›žçš„ç»“æžœè¢«å†™å…¥åˆ°äº†æ²™ç›’æ–‡ä»¶ä¸­ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨ cat å‘½ä»¤æŸ¥çœ‹å¯¹åº”çš„å“åº”ç»“æžœã€‚ GET å“åº”ç»“æžœï¼š 1cat ~/Library/Developer/CoreSimulator/Devices/BA882AC3-7977-49C7-8B0D-65EFD1541B68/data/Containers/Data/Application/3A21CFC5-3044-4FC0-9BFA-B311A59187AF/Documents/http_get_rsp_data.log 1user info: id=2 name=veryitman POST å“åº”ç»“æžœ: 1cat ~/Library/Developer/CoreSimulator/Devices/BA882AC3-7977-49C7-8B0D-65EFD1541B68/data/Containers/Data/Application/86E7D457-97B1-4D8C-80D5-E8179B691F76/Documents/http_post_rsp_data.log 1user info: id=2 name=veryitman åŽç»­ä¸ºå¤§å®¶åˆ†äº«å¦‚ä½•ä½¿ç”¨å›žè°ƒæ¥æŽ¥æ”¶ HTTP å“åº”æ•°æ®ã€å…¶ä»–ç½‘ç»œè¯·æ±‚çš„æƒ…å†µä»¥åŠ Android ä¸Šé¢å¦‚ä½•ä½¿ç”¨ libcurl åº“ã€‚ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>curl libcurl springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Emscriptenï¼šJS è°ƒç”¨ Cã€C++]]></title>
    <url>%2F2019%2F03%2F02%2FEmscripten%EF%BC%9AJS-%E8%B0%83%E7%94%A8-C%E3%80%81C%2F</url>
    <content type="text"><![CDATA[åœ¨ äº†è§£ Emscripten ä¸­ï¼Œç»™å¤§å®¶ç®€å•åˆ†äº«äº† Emscripten æ˜¯ä»€ä¹ˆä»¥åŠå…¶ä½¿ç”¨åœºæ™¯ã€‚ä»Šå¤©ç»§ç»­åˆ†äº«å¦‚ä½•ä½¿ç”¨ JS è°ƒç”¨ C/C++ ä»£ç ã€‚ ç¥žå¥‡çš„ main å‡½æ•°ä¸‹é¢æ˜¯ äº†è§£ Emscripten ä¸­çš„ä¾‹å­ä»£ç ï¼Œåªæœ‰ä¸€ä¸ª main å‡½æ•°ã€‚ 123456#include &lt;stdio.h&gt;int main(int argc, char ** argv) &#123; printf(&quot;Emscripten show in browser...\n&quot;);&#125; ä½¿ç”¨ Emscripten SDK ç¼–è¯‘åŽç”Ÿæˆäº†å¯¹åº”çš„ htmlã€js å’Œ wasm æ–‡ä»¶ã€‚ ç¬¬ä¸€æ¬¡ç¼–è¯‘ä¼šè¾ƒæ…¢, ç¼–è¯‘å®ŒæˆåŽä¼šåœ¨ ~/.emscripten_cache ç”Ÿæˆç¼“å­˜ç›®å½•å’Œç¼“å­˜æ–‡ä»¶, ä»¥åŽå†æ¬¡ç¼–è¯‘å°±æ¯”è¾ƒå¿«äº†. å¯ä»¥åœ¨ç«ç‹æˆ–è€… Chrome æˆ–è€… Safari ä¸Šé¢è¿è¡Œ h_emcc.html æ–‡ä»¶. è¿™é‡Œåœ¨ç«ç‹æµè§ˆå™¨ä¸Šé¢å¯ä»¥ç›´æŽ¥æ‰“å¼€ mz.html æ–‡ä»¶, å¦‚æžœæ˜¯åœ¨ Chrome æˆ–è€… Safari éœ€è¦æ‰§è¡Œä¸‹é¢å‘½ä»¤: 1emrun mz.html æˆ–è€…æŒ‡å®šæµè§ˆå™¨æ‰“å¼€è¯¥æ–‡ä»¶. 1emrun --browser chrome mz.html å…³äºŽ emrun çš„å…¶ä»–ç”¨æ³•ï¼Œå¯ä»¥ä½¿ç”¨ emrun --help æ¥æŸ¥çœ‹ã€‚è¿™é‡Œåœ¨æµè§ˆå™¨å¯ä»¥çœ‹åˆ°å¯¹åº” main å‡½æ•°çš„è¾“å‡ºï¼Œè¯´æ˜Ž Emscripten ç”Ÿæˆçš„ä»£ç é»˜è®¤ä¼šè°ƒç”¨ main å‡½æ•°ã€‚ EMSCRIPTEN_KEEPALIVEæ—¢ç„¶ Emscripten ç”Ÿæˆçš„ä»£ç é»˜è®¤ä¼šè°ƒç”¨ main å‡½æ•°ï¼Œé‚£ä¹ˆå¦‚æžœæƒ³ä½¿ç”¨å…¶ä»–å‡½æ•°æ€Žä¹ˆåŠžå‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°å‰æ·»åŠ  EMSCRIPTEN_KEEPALIVEï¼Œå®ƒåœ¨emscripten.h æ–‡ä»¶ä¸­æœ‰å£°æ˜Žï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡æºç æŸ¥çœ‹ã€‚ ä¸‹é¢è¿˜æ˜¯ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜Žã€‚ my.html 123456789101112131415161718&lt;!doctype html&gt;&lt;html lang="en-us"&gt;&lt;!-- çœç•¥... --&gt; &lt;body&gt;document.querySelector('.mybutton').addEventListener('click', function()&#123; alert('æ£€æŸ¥æŽ§åˆ¶å°'); var result = Module.ccall('sum', // name of C function null, // return type null, // argument types null); // arguments &#125;); &lt;/script&gt; &lt;script async type="text/javascript" src="hello3.js"&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; é‡Œé¢å¼•ç”¨äº† hello3.js å¹¶ä¸”ä½¿ç”¨ Module.ccall è°ƒç”¨äº† C å‡½æ•° sumã€‚ hello.c 12345678910111213141516171819202122#include &lt;stdio.h&gt;#include &lt;emscripten/emscripten.h&gt;int main(int argc, char ** argv) &#123; printf("Hello emcc\n");&#125;#ifdef __cplusplusextern "C" &#123;#endifint EMSCRIPTEN_KEEPALIVE sum() &#123; printf("sum = %i\n", 100); return 1;&#125;#ifdef __cplusplus&#125;#endif ç¼–è¯‘ hello.c 1emcc -o hello.html hello.c -O3 -s &quot;EXTRA_EXPORTED_RUNTIME_METHODS=[&apos;ccall&apos;]&quot; æ³¨æ„ï¼šEXTRA_EXPORTED_RUNTIME_METHODS è®¾ç½®äº† Module çš„å¯¼å‡ºå‡½æ•°ï¼Œä¸å¯¼å‡º ccall çš„è¯ï¼Œä¼šæŠ¥ä»¥ä¸‹é”™è¯¯: 1&apos;ccall&apos; was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ) çŽ°åœ¨å¯ä»¥è¿è¡Œ my.html 1emrun my.html å¯ä»¥ä¿®æ”¹ä¸€ä¸‹ sum å‡½æ•°ï¼Œä½¿å…¶å¸¦å‚æ•°ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122#include &lt;stdio.h&gt;#include &lt;emscripten/emscripten.h&gt;int main(int argc, char ** argv) &#123; printf("Hello World emcc\n");&#125;#ifdef __cplusplusextern "C" &#123;#endifint EMSCRIPTEN_KEEPALIVE sum(int a, int b) &#123; printf("sum = %i\n", (a+b)); return 1;&#125;#ifdef __cplusplus&#125;#endif éœ€è¦ä¿®æ”¹ my.html æ–‡ä»¶ï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š 1234var result = Module.ccall('sum', // name of C function null, // return type ['number'], // argument types [12, 13]); // arguments æ³¨æ„ argument types å’Œ arguments çš„å¡«å†™ï¼Œè¿è¡Œå¯ä»¥çœ‹åˆ°é¢„æœŸæ•ˆæžœã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>Emscripten wasm JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†·ç¬‘è¯çš„å¯ç¤º]]></title>
    <url>%2F2019%2F02%2F24%2F%E5%86%B7%E7%AC%91%E8%AF%9D%E7%9A%84%E5%90%AF%E7%A4%BA%2F</url>
    <content type="text"><![CDATA[å‡ ä¹Žæ‰€æœ‰äººéƒ½æ¯”è¾ƒå–œæ¬¢å¬æˆ–è€…çœ‹ç¬‘è¯æ•…äº‹ï¼Œç¬‘è¯æ•…äº‹å¯ä»¥è®©ä½ å¼€å¿ƒï¼Œä¹Ÿå¯èƒ½è®©ä½ éšæ—¶å“ˆå“ˆå¤§ç¬‘ã€‚ä¸‹é¢å‡ åˆ™ç¬‘è¯æ•…äº‹ï¼Œåœ¨ç¬‘çš„åŒæ—¶å¯ä»¥æƒ³æƒ³å…¶ä¸­è•´è—çš„é“ç†ã€‚ å¥³æµ´å®¤èµ·ç«ï¼Œé‡Œé¢äººä¹±ä½œä¸€å›¢ï¼Œèµ¤è£¸èº«ä½“å¾€å¤–è·‘ï¼Œåªè§å¤§è¡—ä¸Šç™½èŠ±èŠ±ä¸€å¤§ç¾¤ï¼Œä¸€è€è€…å¤§å–Šâ€œå¿«æ‚ä½â€ï¼Œä¼—è£¸å¥³çªç„¶é†’æ‚Ÿï¼Œä½†èº«ä¸Šè¦ç´§éƒ¨ä½æœ‰ä¸‰å¤„ï¼Œæ‰‹å¿™è„šä¹±æ‚ä¸è¿‡æ¥ï¼Œä¸çŸ¥æ‰€æŽªã€‚è¿™æ—¶è€è€…åˆå¤§å–Šï¼šâ€œæ‚è„¸å°±è¡Œï¼Œä¸‹é¢éƒ½ä¸€æ ·ï¼â€ ðŸ˜† åœ¨ç‰¹æ®Šæƒ…å†µä¸‹æŠ“å·¥ä½œä¸å¯èƒ½é¢é¢ä¿±åˆ°ï¼Œè¦æŠ“ä½é‡ç‚¹ã€‚ å°‘å¦‡æŠ¥æ¡ˆï¼šâ€œæˆ‘æŠŠé’±æ”¾åœ¨èƒ¸è¡£å†…ï¼Œåœ¨æ‹¥æŒ¤çš„åœ°é“å†…è¢«ä¸€å¸…å“¥å·èµ°äº†â€¦â€è­¦å¯Ÿçº³é—·ï¼šâ€œè¿™ä¹ˆæ•æ„Ÿçš„åœ°æ–¹ä½ å°±æ²¡è§‰å¯Ÿåˆ°ï¼Ÿâ€å°‘å¦‡çº¢ç€è„¸ç­”ï¼šâ€œè°èƒ½æƒ³åˆ°ä»–æ˜¯æ‘¸é’±å‘¢ï¼Ÿâ€ ðŸ˜† è®©å®¢æˆ·çš„é’±åœ¨æ„‰å¿«ä½“éªŒä¸­ä¸çŸ¥ä¸è§‰åœ°è¢«æ‘¸èµ°ï¼Œæ˜¯å•†ä¸šæ¨¡å¼çš„æœ€é«˜å¢ƒç•Œã€‚ æŸå¯Œç¿æƒ³å¨¶è€å©†ï¼Œæœ‰ä¸‰ä¸ªäººé€‰ï¼Œå¯Œç¿ç»™äº†ä¸‰ä¸ªå¥³å­©å„ä¸€åƒå…ƒï¼Œè¯·å¥¹ä»¬æŠŠæˆ¿é—´è£…æ»¡ã€‚ç¬¬ä¸€ä¸ªå¥³å­©ä¹°äº†å¾ˆå¤šæ£‰èŠ±ï¼Œè£…æ»¡æˆ¿é—´çš„1/2ã€‚ç¬¬äºŒä¸ªå¥³å­©ä¹°äº†å¾ˆå¤šæ°”çƒï¼Œè£…æ»¡æˆ¿é—´çš„3/4ã€‚ç¬¬ä¸‰ä¸ªå¥³å­©ä¹°äº†å¾ˆå¤šèœ¡çƒ›ï¼Œè®©å…‰çº¿å……æ»¡æˆ¿é—´ã€‚ æœ€ç»ˆï¼Œå¯Œç¿é€‰äº†èƒ¸éƒ¨æœ€å¤§çš„é‚£ä¸ªã€‚ ðŸ˜† æŠŠæ¡å®¢æˆ·å†…å¿ƒçŒ¥çä½†çœŸå®žçš„éœ€æ±‚è‡³å…³é‡è¦ã€‚ å¾ˆå¤šå¹´å‰è®¤è¯†ä¸€å°ä¸‰ï¼Œå½“ç„¶æ˜¯åˆ«äººçš„å°ä¸‰ï¼Œä½†è¿™å°ä¸‰ç®—æ˜¯æœ‰æœ¬é¢†çš„ï¼Œä¸ä»…äººé•¿çš„æ¼‚äº®ï¼Œé•¿å‘é£˜é£˜ï¼Œä¹Ÿå¾ˆæœ‰è„‘ã€‚çˆ±ä¸ŠæŸé‡‘èžç•Œäººå£«ï¼Œä½†äººå®¶å·²æœ‰å¦»å®¤ï¼Œè¿™å°ä¸‰ä¸å±ˆä¸æŒ ï¼ŒæŠ•å…¶æ‰€å¥½ï¼ŒçŸ¥é“ç”·äººçƒ­çˆ±å¤è¯—è¯ï¼Œå°ä¸‰æ¥žæ˜¯ç”¨äº†ä¸é•¿çš„æ—¶é—´å°†å”è¯—ä¸‰ç™¾é¦–å€’èƒŒå¦‚æµï¼Œå°ä¸‰ä¾¿è½¬æ­£äº†ã€‚ ðŸ˜† æ²¡æœ‰æ‹†ä¸æ•£çš„å¤«å¦»ï¼Œåªæœ‰ä¸åŠªåŠ›çš„å°ä¸‰ï¼ ä¸€ç”·å­åœ¨ç‹±ä¸­é—²æ¥æ— äº‹è®­ç»ƒèš‚èšï¼Œèš‚èšå¯åœ¨ä»–æŒ‡ä»¤ä¸‹å€’ç«‹ã€ç¿»è·Ÿå¤´ ã€éž èº¬â€¦. å‡ºç‹±åŽï¼Œç”·å­è¿«ä¸åŠå¾…åŽ»é…’å§ç‚«è€€ä»–çš„ç»æ´»ï¼Œä»–ç‚¹äº†ä¸€æ¯å•¤é…’ï¼Œç„¶åŽï¼ŒæŽå‡ºèš‚èšæ”¾åœ¨æ¡Œä¸Šå¯¹æœåŠ¡å‘˜è¯´ï¼šçœ‹ï¼Œè¿™åªèš‚èšã€‚æœåŠ¡å‘˜è½¬èº«ä¸€æŽŒæ‹æ­»äº†èš‚èšï¼ŒæŠ±æ­‰åœ°å¯¹ä»–è¯´è¯´ï¼šå¯¹ä¸èµ·å…ˆç”Ÿï¼Œæˆ‘é©¬ä¸Šç»™æ‚¨æ¢ä¸€æ¯! ðŸ˜† é‡äº‹è¦ä¸‰æ€è€ŒåŽè¡Œã€‚ ä»Žå‰æœ‰åªç¾Šï¼Œå®ƒä¸€å¤©å¹²10ä¸ªå°æ—¶çš„æ´»ã€‚æœ‰ä¸€å¤©å®ƒçš„ä¸»äººå‘Šè¯‰å®ƒï¼Œä½ å¥½å¥½å¹²ï¼Œå¤šå¹²æ´»æœ‰å¥–åŠ±ï¼ŒäºŽæ˜¯å®ƒç…§åšäº†ã€‚æŽ¥ä¸‹æ¥æ¯ä¸ªæœˆå®ƒçš„ä¸»äººæŠŠå®ƒèº«ä¸Šçš„ç¾Šæ¯›å‰ªäº†ä¸‰åˆ†ä¹‹ä¸€ ï¼Œå¹´åº•åˆ°äº†ï¼Œç»™å®ƒç»‡äº†ä»¶æ¯›è¡£ï¼Œç„¶åŽå‘Šè¯‰å®ƒï¼šè¯ºï¼Œè¿™æ˜¯ä½ çš„å¥–åŠ±ï¼Œæ­å–œä½ ï¼Œç»§ç»­åŠªåŠ›å§ï¼ ðŸ˜† è¿™ç¬‘è¯å‘Šè¯‰æˆ‘ä»¬ï¼šç¾Šæ¯›å‡ºåœ¨ç¾Šèº«ä¸Šã€‚ èµµå››å°å§ä»Žåå…­å²å¼€å§‹è·Ÿå¼ å­¦è‰¯ã€‚è·Ÿä¸€å¹´ï¼Œå±žå¥¸æƒ…ï¼›è·Ÿä¸‰å¹´ï¼Œç®—{æ•æ„Ÿè¯}ï¼›è·Ÿå…­åå¹´ï¼Œä¾¿æˆä¸ºåƒå¤çˆ±æƒ…ï¼ ðŸ˜† å¾ˆå¤šäº‹æƒ…ä¸çœ‹åšä¸åšï¼Œè€Œçœ‹ä½ åšå¤šä¹…ã€‚ æ°‘å›½åˆåå¦“å°å‡¤ä»™ï¼Œå¦‚æžœè·Ÿäº†æ°‘å·¥ï¼Œå°±å±žäºŽæ‰«é»„å¯¹è±¡ï¼›å¥¹è·Ÿäº†è”¡é”·ï¼Œåˆ™åƒå¤ç•™èŠ³äº†ï¼›å€˜è‹¥å¥¹è·Ÿäº†å­™ä¸­å±±ï¼Œé‚£ä¾¿å¯èƒ½æˆä¸ºå›½æ¯ã€‚ ðŸ˜† ä¸åœ¨äºŽä½ å¹²ä»€ä¹ˆï¼Œè€Œçœ‹ä½ è·Ÿè°å¹²ã€‚ ç»„ç»‡å‡ ä¸ªäººæ”¶ä¿æŠ¤è´¹ï¼Œé‚£æ˜¯é»‘ç¤¾ä¼šã€‚æœ±å…ƒéšœç»„ç»‡å‡ ç™¾ä¸‡äººæŠ¢ä¸‹çŽ‹ä½ï¼Œå°±æ˜¯ä¼Ÿå¤§çš„çš‡å¸ã€‚æ­¦åˆ™å¤©ç¡äº†å…¬å…¬ç¡å„¿å­ï¼Œè™½å±žä¹±*ä¼¦ï¼Œä½†ä¹±çš„å¤Ÿå¤§ï¼Œæ•…æˆä¸ºå¥³çš‡ã€‚ ðŸ˜† ä¸åœ¨ä½ å¹²æ²¡å¹²åäº‹ï¼Œè€Œåœ¨äºŽå¹²å¤šå¤§ï¼ ä¸€å…¬å¸åœ¨å°ä¾¿æ± ä¸Šè´´ä¸Šæ¡ï¼šâ€œå¾€å‰ä¸€å°æ­¥ï¼Œæ–‡æ˜Žä¸€å¤§æ­¥â€ï¼Œç»“æžœåœ°ä¸Šä»æœ‰è®¸å¤šå°¿æ¸ã€‚åŽæ¥å…¬å¸è®¤çœŸå¸å–æ•™è®­ï¼Œé‡æ–°è®¾è®¡æˆï¼šâ€œå°¿ä¸åˆ°æ± é‡Œè¯´æ˜Žä½ çŸ­ï¼›å°¿åˆ°æ± å¤–è¯´æ˜Žä½ è½¯â€ï¼Œç»“æžœåœ°ä¸Šæ¯”ä»¥å‰å¹²å‡€è®¸å¤šã€‚ ðŸ˜† ç»™å®¢æˆ·çš„æŠ•èµ„å»ºè®®ä¸€å®šè¦å…·ä½“ï¼Œç¡®åˆ‡ï¼Œä¸­è¦å®³ã€‚ æŸæ—¥ï¼Œå¥³ç§˜ä¹¦ç¥žè‰²å‡é‡åœ°è¯´ï¼šçŽ‹æ€»ï¼Œæˆ‘æ€€å­•äº†ã€‚ çŽ‹ç»§ç»­ä½Žå¤´çœ‹æ–‡ä»¶ï¼Œç„¶åŽæ·¡æ·¡ä¸€ç¬‘ï¼šæˆ‘æ—©ç»“æ‰Žäº†ã€‚ å¥³ç§˜ä¹¦æ¥žäº†ä¸€ä¼šåªšç¬‘é“ï¼šæˆ‘å’Œæ‚¨å¼€çŽ©ç¬‘å‘¢! çŽ‹æŠ¬èµ·å¤´çœ‹äº†å¥¹ä¸€çœ¼ï¼Œå–äº†å£èŒ¶è¯´ï¼šæˆ‘ä¹Ÿæ˜¯ã€‚ ðŸ˜† åœ¨æ±Ÿæ¹–ä¸Šæ··çš„äººï¼Œé‡äº‹ä¸è¦æ…Œï¼Œå…ˆè®©å­å¼¹é£žä¸€ä¼šã€‚ ç”·å­åŽ»æäº²ï¼Œå¥³æ–¹å®¶é•¿ï¼šè¯·è‡ªæˆ‘ä»‹ç»ã€‚ Aè¯´ï¼šæˆ‘æœ‰ä¸€åƒä¸‡ï¼› Bè¯´ï¼šæˆ‘æœ‰ä¸€æ ‹è±ªå®…ï¼Œä»·å€¼ä¸¤åƒä¸‡ï¼› å®¶é•¿å¾ˆæ»¡æ„ã€‚å°±é—®Cï¼Œä½ å®¶æœ‰ä»€ä¹ˆï¼Ÿ Cç­”ï¼šæˆ‘ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œåªæœ‰ä¸€ä¸ªå­©å­ï¼Œåœ¨ä½ å¥³å„¿è‚šå­é‡Œã€‚ ABæ— è¯­ï¼Œèµ°äº†ã€‚ ðŸ˜† æ ¸å¿ƒç«žäº‰åŠ›ä¸æ˜¯é’±å’Œæˆ¿å­ï¼Œæ˜¯åœ¨å…³é”®çš„å²—ä½æœ‰è‡ªå·²çš„äººã€‚ ä¸€ç”·å¹²éƒ¨æ€•åƒè‹¦ä¸æ„¿æ´è—ï¼Œè°Žç§°çœ¼ç›çªç„¶å¤±æ˜Žã€‚é¢†å¯¼é—»å¬ï¼Œå‡ºé¢è®©ä¸€ç¾Žå¥³è„±å…‰ç«™åœ¨ä»–é¢å‰ï¼Œé—®â€œçœ‹è§äº†å—â€ï¼Ÿç­”ï¼šçœ‹ä¸è§ã€‚é¢†å¯¼é£žèµ·ä¸€è„šç»™ä»–è‡€éƒ¨ï¼šç‹—æ—¥çš„ï¼Œè€äºŒéƒ½ç›´äº†è¿˜çœ‹ä¸è§ï¼Ÿæ”¶æ‹¾è¡ŒæŽï¼Œæ˜Žå¤©è¿›è—ã€‚ ðŸ˜†1.äººæ€§åŒ–æ‰èƒ½çœŸæ­£äº†è§£äººã€‚2.ç»„ç»‡æ¯”ä¸ªäººé«˜æ˜Žã€‚3.æœ¬èƒ½ä¼šå‡ºå–ä½  ä¸€å°æœ‹å‹é—®ä¸€å¯Œç¿è¯´ å”å”ä½ ä¸ºä»€ä¹ˆè¿™ä¹ˆæœ‰é’±ã€‚å¯Œç¿æ‘¸æ‘¸å°æœ‹å‹çš„å¤´è¯´ï¼šå°æ—¶å€™æˆ‘çˆ¸ç»™äº†æˆ‘ä¸€ä¸ªè‹¹æžœï¼Œæˆ‘å–æŽ‰äº†å®ƒæœ‰äº†ä¸¤ä¸ªè‹¹æžœï¼ŒåŽæ¥æˆ‘åˆèµšåˆ°äº†å››ä¸ªè‹¹æžœã€‚å°æœ‹å‹è‹¥æœ‰æ‰€æ€çš„è¯´ å“¦â€¦å”å”ï¼Œæˆ‘å¥½åƒæ‡‚äº†ã€‚å¯Œç¿è¯´ï¼Œâ€œä½ æ‡‚ä½ å¦¹é˜¿ï¼ŒåŽæ¥æˆ‘çˆ¸æ­»äº†ï¼Œæˆ‘ç»§æ‰¿äº†ä»–çš„è´¢äº§â€¦ ðŸ˜† ä¸è¦ç—´è¿·äºŽä»Žé˜…è¯»æˆåŠŸäººå£«çš„ä¼ è®°ï¼Œä»Žä¸­å¯»æ‰¾ç»éªŒï¼Œè¿™äº›ä¹¦å¤§éƒ¨åˆ†ç»è¿‡äº†ç²¾è‡´çš„åŒ…è£…ï¼Œå¾ˆå¤šé‡è¦çš„äº‹å®žä¸ä¼šå‘Šè¯‰ä½ ã€‚ä¾‹å¦‚ç›–èŒ¨çš„çš„ä¹¦ä¸ä¼šå‘Šè¯‰ä½ ä»–æ¯äº²æ˜¯IBMè‘£äº‹ï¼Œæ˜¯å¥¹ç»™å„¿å­ä¿ƒæˆäº†ç¬¬ä¸€å•å¤§ç”Ÿæ„ï¼Œå·´è²ç‰¹çš„ä¹¦åªä¼šå‘Šè¯‰ä½ ä»–8å²å°±çŸ¥é“åŽ»å‚è§‚çº½äº¤æ‰€ï¼Œä½†ä¸ä¼šå‘Šè¯‰ä½ ä»–å›½ä¼šè®®å‘˜çš„çˆ¶äº²å¸¦ä»–åŽ»çš„ï¼Œæ˜¯é«˜ç››çš„è‘£äº‹æŽ¥å¾…çš„ã€‚ å‚è€ƒ lupaworld æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç¬‘è¯ å†·ç¬‘è¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»™ Homebrew è®¾ç½®ä»£ç†]]></title>
    <url>%2F2019%2F02%2F23%2F%E7%BB%99-Homebrew-%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ å¯ä»¥ç»™ Homebrew å·¥å…·è®¾ç½®ä»£ç†ï¼Œè®¾ç½®æ–¹æ³•å’Œæ­¥éª¤å¦‚ä¸‹ã€‚ 1ã€æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç”¨æˆ·æ ¹ç›®å½• 1cd ~/ 2ã€æŸ¥çœ‹å½“å‰ç›®å½• 1ls -al æŸ¥çœ‹æ˜¯å¦æœ‰ .curl æ–‡ä»¶ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œæ–°å»ºä¸€ä¸ªå§ 1touch .curl 3ã€ç¼–è¾‘ .curl æ–‡ä»¶ å†™å…¥ä¸‹é¢å†…å®¹ï¼Œå¦‚ä¸‹ï¼š 1proxy=ip:port æŠŠ ip å’Œ port æ”¹ä¸ºä½ çš„ä»£ç† ip å’Œç«¯å£å€¼ï¼Œå¦‚: 1proxy=127.0.0.1:8087 ä¿å­˜æ–‡ä»¶å³å¯ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>MacOS brew proxy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº†è§£ Emscripten]]></title>
    <url>%2F2019%2F02%2F15%2F%E4%BA%86%E8%A7%A3-Emscripten%2F</url>
    <content type="text"><![CDATA[å¹¿å‘Šæ—¶é—´ï¼Œè§è°…å‹¿æ€ªï¼Œçœ‹åˆ°äº†å°±ç‚¹ä¸€ä¸‹é“¾æŽ¥å§ï¼Œæ„Ÿæ¿€ä¸å°½ðŸ™‡â€ï¼ æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ## Emscripten æ˜¯ä»€ä¹ˆï¼ŸEmscripten æ˜¯ä¸€ä¸ª å¼€æºçš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥å°† C/C++ çš„ä»£ç ç¼–è¯‘åŽé«˜æ•ˆè¿è¡Œåœ¨çŽ°ä»£æµè§ˆå™¨ä¸Šé¢ã€‚Emscripten çš„åº•å±‚æ˜¯åŸºäºŽ LLVM ç¼–è¯‘å™¨çš„ï¼Œå¯ä»¥æŸ¥çœ‹å…¶å¼€æºçš„ emscripten llvm å’Œ emscripten clangã€‚ ä¸‹å›¾æ˜¯å…¶ç¼–è¯‘ C/C++ çš„ä»£ç çš„æµç¨‹å›¾ï¼š å®˜ç½‘ å¯¹ Emscripten çš„å®šä¹‰ï¼š Emscripten is a toolchain for compiling to asm.js and WebAssembly, built using LLVM, that lets you run C and C++ on the web at near-native speed without plugins. æˆªæ­¢æœ¬æ–‡å‘å¸ƒï¼ŒEmscripten æœ€æ–°ç‰ˆæœ¬æ˜¯ 1.38.27. å®‰è£…æ¡ä»¶ä»¥ä¸‹æ˜¯æˆ‘å®‰è£…å’Œä½¿ç”¨ Emscripten çš„æ¡ä»¶ã€‚ macOS ç‰ˆæœ¬ 10.14 Gitï¼Œå¯é€šè¿‡ Homebrew å®‰è£… CMakeï¼Œå¯é€šè¿‡ Homebrew å®‰è£… Xcode 10.1 Python 2.7.xï¼ŒMac ç³»ç»Ÿè‡ªå¸¦ ç¨³å®šå¿«é€Ÿçš„ç½‘ç»œçŽ¯å¢ƒï¼Œæœ€é‡è¦å’Œæœ€å…³é”®çš„çš„æ˜¯è¦æœ‰(neng)æ¢¯(fan)å­(qiang) è§£å†³é—®é¢˜çš„æ€åº¦å’Œæ¯…åŠ› é€šè¿‡ emsdk å®‰è£…å®‰è£… Emscripten å¯ä»¥é€šè¿‡å®‰è£… emscripten SDK æ¥å®Œæˆï¼Œemscripten SDK å¯ä»¥ç®€å•çš„ç†è§£ä¸ºæ˜¯ Emscripten çš„ä¸€å¥—å·¥å…·é“¾ã€‚ åœ¨ä½ è‡ªå·±çš„ç”µè„‘ä¸Šé¢ä»»æ„æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå¦‚æˆ‘çš„ ~/dev/emscworkï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥æ­¤ç›®å½•ã€‚ 1ã€ä¸‹è½½ emsdk 1git clone https://github.com/juj/emsdk.git 2ã€è¿›å…¥ emsdk ç›®å½• 1cd emsdk 3ã€å¼€å§‹å®‰è£… 1234567891011# Fetch the latest version of the emsdk (not needed the first time you clone)git pull# Download and install the latest SDK tools../emsdk install latest# Make the &quot;latest&quot; SDK &quot;active&quot; for the current user. (writes ~/.emscripten file)./emsdk activate latest# Activate PATH and other environment variables in the current terminalsource ./emsdk_env.sh æ³¨æ„: æ¯æ¬¡æ›´æ–°å®Œ emsdk åŽï¼Œä¾æ—§éœ€è¦æ‰§è¡Œä¸Šé¢å‘½ä»¤é‡æ–°å®‰è£…å’Œæ¿€æ´»ã€‚ å¦å¤–ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ ./emsdk update-tags è¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥ç›´æŽ¥æ›´æ–° emsdk çš„æœ€æ–° tags ç‰ˆæœ¬ï¼Œæ›´æ–° tags å®ŒæˆåŽï¼Œé‡æ–°å®‰è£…å’Œæ¿€æ´»æœ€æ–°ç‰ˆçš„ emsdk å¥—ä»¶ã€‚ é…ç½® emsdkå¦‚æžœä½ æƒ³åœ¨ä»»æ„è·¯å¾„ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ emsdk é‡Œé¢çš„å„ç§å·¥å…·(å°±æ˜¯ä¸€äº›äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶)ï¼Œéœ€è¦ä¸ºå…¶è®¾ç½®çŽ¯å¢ƒå˜é‡ã€‚ ç¼–è¾‘ ~/.bash_profile æ–‡ä»¶ï¼Œæ–°å¢žå¦‚ä¸‹ä»£ç : 1234export EMSDK=~/emscwork/emsdkexport EMSCRIPTEN=$EMSDK/emscripten/1.38.27export BINARYEN_ROOT=$EMSDK/binaryen/master_64bit_binaryenexport PATH=$EMSDK:$EMSCRIPTEN:$BINARYEN_ROOT:$PATH æ‰§è¡Œä¸‹é¢å‘½ä»¤, ä½¿åˆšé…ç½®çš„æ–‡ä»¶ç”Ÿæ•ˆã€‚ 1source ~/.bash_profile è‡³æ­¤ï¼Œå®‰è£…å’Œè®¾ç½®çŽ¯å¢ƒå˜é‡å®Œæˆã€‚ å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ¥æŸ¥çœ‹ emsdk çš„å®‰è£…æƒ…å†µã€‚ 1emcc --version 1234emcc (Emscripten gcc/clang-like replacement) 1.38.27 (commit ea5d631a5446632e195765d89a53ead71cd6de45)Copyright (C) 2014 the Emscripten authors (see AUTHORS.txt)This is free and open source software under the MIT license.There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. emcc æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œè„šæœ¬ï¼Œè¯¥è„šæœ¬åœ¨ emsdk/emscripten/1.38.27 ç›®å½•ä¸‹ã€‚ 1emcc --help ä¸Šé¢å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ›´å¤šå…³äºŽ emcc çš„ä½¿ç”¨æ–¹æ³•. ç¼–è¯‘ C/C++ ä»£ç è¿™é‡Œä¸¾ä¸ªå®žé™…çš„ä¾‹å­ã€‚ main.c 123456#include &lt;stdio.h&gt;int main(int argc, char ** argv) &#123; printf("Emscripten show in browser...\n");&#125; ä½¿ç”¨ emcc ç¼–è¯‘ï¼Œå¦‚ä¸‹ï¼š 1emcc main.c -s WASM=1 -o mz.html è¿™é‡Œè¦æ³¨æ„ WASM=1 è¿™ä¸ªé€‰é¡¹ï¼ŒçŽ°åœ¨æ–°ç‰ˆ SDK é»˜è®¤ WASM=1 äº†ï¼Œå¦‚æžœä¸æƒ³ç”Ÿæˆ .wasm è¿™ä¸ªæ–‡ä»¶ï¼Œéœ€è¦æŒ‡å®š WASM=0 é€‰é¡¹ã€‚ ç”Ÿæˆå¦å¤–ä¸‰ä¸ªæ–‡ä»¶å¦‚ä¸‹ï¼š 1mz.html mz.js mz.wasm ç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸‰ä¸ªæ–‡ä»¶ 1ã€mz.wasm äºŒè¿›åˆ¶çš„ wasm æ¨¡å—ä»£ç  2ã€mz.js èƒ¶æ°´ä»£ç ï¼ŒåŒ…å«äº†åŽŸç”Ÿ C å‡½æ•°å’Œ JavaScript/wasm ä¹‹é—´è½¬æ¢çš„ JS æ–‡ä»¶ 3ã€mz.html ç”¨æ¥åŠ è½½ã€ç¼–è¯‘å’Œå®žä¾‹åŒ– wasm ä»£ç å¹¶ä¸”å°†å…¶è¾“å‡ºåœ¨æµè§ˆå™¨æ˜¾ç¤ºä¸Šçš„ HTML æ–‡ä»¶ æœ€åŽæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥åœ¨ Safari æµè§ˆå™¨ä¸­æ˜¾ç¤ºæ•ˆæžœ 1emrun mz.html main.cpp 12345678910#include &lt;iostream&gt;using namespace std;int main(int argc, char ** argv)&#123; cout &lt;&lt; "Emscripten show in browser..." &lt;&lt; endl; return 0;&#125; ç¼–è¯‘ C++ æ–‡ä»¶(main.cpp) 1emcc main.cpp -s WASM=1 -o mzcpp.html åŒæ ·çš„æ–¹å¼ç¼–è¯‘å’Œè¿è¡Œ mzcpp.html å³å¯çœ‹åˆ°åŒæ ·çš„æ•ˆæžœã€‚ Emscripten åº”ç”¨åœºæ™¯Emscripten åªæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œèƒ½å°†æˆ‘ä»¬çš„é«˜çº§è¯­è¨€ç¼–è¯‘ä¸ºæµè§ˆå™¨å¯ä»¥è¯†åˆ«å¹¶è¿è¡Œçš„ç¨‹åºï¼Œè¿™ä¸ªçœ‹èµ·æ¥ç¡®å®žå¾ˆè¯±äººã€‚ å°±ç›®å‰æ¥è¯´ï¼ŒEmscripten åº”ç”¨åœºæ™¯å¯ä»¥ä½¿ç”¨åœ¨å®‰å…¨å’Œæ¸¸æˆä¸Šé¢ã€‚ 1ã€å®‰å…¨ C/C++ ä»£ç ç»è¿‡ç¼–è¯‘ä¹‹åŽï¼Œä¼šç”Ÿæˆ wasm æ ¼å¼ çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™ä¸ªå®‰å…¨çº§åˆ«è¾ƒé«˜ï¼Œå³ä½¿åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œç ´è§£è€…ä¹Ÿä¸ä¼šå¾ˆè½»æ¾çš„ç ´è§£ä»£ç ï¼Œè¿™æ ·ä¸€äº›åœ¨ JS ä¸­æ¶‰åŠåˆ°å®‰å…¨çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ C/C++ æ¥å†™ç»“åˆä¸€äº›åŠ å¯†æŠ€æœ¯ï¼Œç„¶åŽç”¨ Emscripten ç¼–è¯‘ã€‚ 2ã€æ¸¸æˆ å¦‚æžœèƒ½æŠŠç”¨ C/C++ è¯­è¨€å†™çš„æ¸¸æˆï¼Œè½¬ä¸ºå¯åœ¨æµè§ˆå™¨ç›´æŽ¥è¿è¡Œçš„H5æ¸¸æˆï¼Œé‚£å°±å¾ˆç¾Žå¥½äº†ï¼Œç”¨æˆ·ä¸éœ€è¦ä¸‹è½½æ¸¸æˆï¼Œç›´æŽ¥çŽ©ã€‚çŽ°ä»£æµè§ˆå™¨æŠ€æœ¯çš„æ›´æ–°å’Œå‘å±•å·²ç»è®©è¿™ä¸ªæƒ³æ³•å˜æˆäº†çŽ°å®žï¼Œè‡³å°‘åœ¨ä¸»æµçš„æµè§ˆå™¨ä¸Šé¢ã€‚ æŽ¨èå¤§å®¶çœ‹çœ‹è¿™ç¯‡æ–‡ç«  JavaScriptæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼šä¸ŽWebAssemblyæ¯”è¾ƒåŠå…¶ä½¿ç”¨åœºæ™¯ å‚è€ƒæ–‡æ¡£About Emscripten Download and install ç¼–è¯‘ C/C++ ä¸º WebAssembly WebAssembly æ¦‚å¿µ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>Emscripten wasm JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[C ç»“æž„ä½“æŒ‡é’ˆåˆå§‹åŒ–]]></title>
    <url>%2F2019%2F02%2F08%2FC-%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88%E5%88%9D%E5%A7%8B%E5%8C%96%2F</url>
    <content type="text"><![CDATA[åœ¨ä½¿ç”¨æŒ‡é’ˆä¹‹å‰ï¼ŒåŠ¡å¿…è¦å°†å…¶åˆå§‹åŒ–ã€‚è¿™ä¸ªæ˜¯æˆ‘ä»¬æœ€æ—©å­¦ä¹  C è¯­è¨€çš„æ—¶å€™ï¼Œä¹¦ä¸Šç»å¸¸è¯´çš„ä¸€ä¸ªé—®é¢˜ã€‚åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬åè€Œä¼šç»å¸¸å¿˜è®°è¿™æ¡é‡‘ç§‘çŽ‰å¾‹ã€‚ æœ¬ç¯‡æ–‡ç« çš„æ‰€æœ‰ä»£ç éƒ½ç» gcc-7 ç¼–è¯‘å™¨ç¼–è¯‘è¿‡ã€‚å…³äºŽåœ¨ macOS ä¸­å¦‚ä½•å®‰è£…å’Œä½¿ç”¨ gccï¼Œå¯ä»¥å‚è€ƒ GCC: Homebrew å®‰è£… GCC å’Œ Binutils è¿™ç¯‡æ–‡ç« ã€‚ ç»“æž„ä½“æˆå‘˜æŒ‡é’ˆçš„åˆå§‹åŒ– ç»“æž„ä½“æˆå‘˜æŒ‡é’ˆçš„åˆå§‹åŒ–ï¼ŒæŒ‡çš„æ˜¯åˆå§‹åŒ–ç»“æž„ä½“ä¸­æŒ‡é’ˆå˜é‡çš„æˆå‘˜ã€‚ æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢æ˜¯ Animal çš„ç»“æž„ä½“ã€‚ 123456struct Animal &#123; char *name; //æŒ‡é’ˆæˆå‘˜ int age; char info[200]; //å­—ç¬¦æ•°ç»„ struct Animal *nextAnimal; //æŒ‡é’ˆæˆå‘˜&#125;; ç»“æž„ä½“ Animal å«æœ‰4ä¸ªæˆå‘˜å˜é‡ï¼Œå…¶ä¸­ nameã€info å’Œ nextAnimal æ˜¯æŒ‡é’ˆå˜é‡ã€‚ å†™ä¸€æ®µæµ‹è¯•ä»£ç ï¼Œå¦‚ä¸‹ï¼š 12345678int main(int argc, const char *argv[])&#123; struct Animal animal; printf("animal's name: %s, age: %i, info: %s\n", animal.name, animal.age, animal.info); return 0;&#125; è¿è¡Œç»“æžœæ­£å¸¸ï¼Œç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ï¼š 1animal&apos;s name: (null), age: 0, info: æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ Animal *nextAnimal åœ¨æ²¡æœ‰åˆå§‹åŒ–çš„æƒ…å†µä¸‹ï¼Œä¼šä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ 123456789101112int main(int argc, const char *argv[])&#123; struct Animal animal; printf("animal's name: %s, age: %i, info: %s\n", animal.name, animal.age, animal.info); printf("animal.nextAnimal: %p\n", animal.nextAnimal); printf("animal.nextAnimal-&gt;name: %s, age: %i, info: %s\n", animal.nextAnimal-&gt;name, animal.nextAnimal-&gt;age, animal.nextAnimal-&gt;info); return 0;&#125; ç¨‹åºç¼–è¯‘æ²¡æœ‰é—®é¢˜ï¼Œè¿è¡ŒæŠ¥é”™ 123animal's name: (null), age: 0, info: animal.nextAnimal: 0x1127fa036Segmentation fault: 11 ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œåˆå§‹åŒ–ä¸€ä¸‹ animal.nextAnimal è¿™ä¸ªæŒ‡é’ˆï¼Œå¦‚ä¸‹ï¼š 123456789101112131415int main(int argc, const char *argv[])&#123; struct Animal animal; printf("animal's name: %s, age: %i, info: %s\n", animal.name, animal.age, animal.info); printf("animal.nextAnimal: %p\n", animal.nextAnimal); // åˆå§‹åŒ–æŒ‡é’ˆå˜é‡ animal.nextAnimal = (struct Animal *)malloc(sizeof(struct Animal)); printf("animal.nextAnimal-&gt;name: %s, age: %i, info: %s\n", animal.nextAnimal-&gt;name, animal.nextAnimal-&gt;age, animal.nextAnimal-&gt;info); return 0;&#125; å†æ¬¡ç¼–è¯‘é‡æ–°è¿è¡Œï¼Œè¿˜æ˜¯æŠ¥é”™ã€‚è¿˜éœ€è¦åˆå§‹åŒ– animal.nextAnimal-&gt;name è¿™ä¸ªå˜é‡ã€‚ 1234567891011121314151617181920212223242526int main(int argc, const char *argv[])&#123; struct Animal animal; printf("animal's name: %s, age: %i, info: %s\n", animal.name, animal.age, animal.info); printf("animal.nextAnimal: %p\n", animal.nextAnimal); // åˆå§‹åŒ–æŒ‡é’ˆå˜é‡ animal.nextAnimal = (struct Animal *)malloc(sizeof(struct Animal)); // åˆå§‹åŒ– name å˜é‡ animal.nextAnimal-&gt;name = "cat"; printf("animal.nextAnimal-&gt;name: %s, age: %i, info: %s\n", animal.nextAnimal-&gt;name, animal.nextAnimal-&gt;age, animal.nextAnimal-&gt;info); return 0;&#125;``` ç¼–è¯‘è¿è¡Œï¼Œä¸€åˆ‡æ­£å¸¸ã€‚```canimal's name: (null), age: 0, info: animal.nextAnimal: 0x10f0f1036animal.nextAnimal-&gt;name: cat, age: 0, info: é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œç»“æž„ä½“æŒ‡é’ˆå˜é‡æœ‰äº›ä¼šç»™é»˜è®¤å€¼ï¼Œæœ‰äº›åˆä¸ä¼šç»™ï¼Œæ‰€ä»¥éƒ½è¦åˆå§‹åŒ–æŒ‡é’ˆå˜é‡ã€‚ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;struct Animal &#123; char *name; //æŒ‡é’ˆæˆå‘˜ int age; char info[200]; //å­—ç¬¦æ•°ç»„ struct Animal *nextAnimal; //æŒ‡é’ˆæˆå‘˜&#125;;int main(int argc, const char *argv[])&#123; struct Animal animal; animal.name = "cat"; strcpy(animal.info, "This is a cat."); printf("animal's name: %s, age: %i, info: %s\n", animal.name, animal.age, animal.info); printf("animal.nextAnimal: %p\n", animal.nextAnimal); // åˆå§‹åŒ–æŒ‡é’ˆå˜é‡ animal.nextAnimal = (struct Animal *)malloc(sizeof(struct Animal)); // åˆå§‹åŒ–å˜é‡ animal.nextAnimal-&gt;name = "cat"; strcpy(animal.nextAnimal-&gt;info, "This is a cat."); printf("animal.nextAnimal-&gt;name: %s, age: %i, info: %s\n", animal.nextAnimal-&gt;name, animal.nextAnimal-&gt;age, animal.nextAnimal-&gt;info); return 0;&#125; ç»“æž„ä½“æŒ‡é’ˆçš„åˆå§‹åŒ– æŒ‡çš„æ˜¯åˆå§‹åŒ–ç»“æž„ä½“æŒ‡é’ˆå˜é‡ã€‚ 12345678int main(int argc, const char *argv[])&#123; struct Animal *ptAnimal; printf("ptAnimal's name: %s, age: %iï¼Œ info: %s\n", ptAnimal-&gt;name, ptAnimal-&gt;age, ptAnimal-&gt;info); return 0;&#125; ç¼–è¯‘è¿è¡ŒæŠ¥é”™ï¼š 1Segmentation fault: 11 åŒæ ·çš„é“ç†ï¼Œéœ€è¦åˆå§‹åŒ–æŒ‡é’ˆå˜é‡ã€‚å®ŒæˆåŽçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122int main(int argc, const char *argv[])&#123; struct Animal *ptAnimal; // åˆå§‹åŒ–ç»“æž„ä½“æŒ‡é’ˆ ptAnimal = (struct Animal *)malloc(sizeof(struct Animal)); ptAnimal-&gt;name = "dog"; strcpy(ptAnimal-&gt;info, "This is a big dog"); printf("ptAnimal's name: %s, age: %iï¼Œ info: %s\n", ptAnimal-&gt;name, ptAnimal-&gt;age, ptAnimal-&gt;info); // åˆå§‹åŒ–ç»“æž„ä½“æŒ‡é’ˆçš„æˆå‘˜æŒ‡é’ˆå˜é‡ nextAnimal ptAnimal-&gt;nextAnimal = (struct Animal *)malloc(sizeof(struct Animal)); ptAnimal-&gt;nextAnimal-&gt;name = "dog"; strcpy(ptAnimal-&gt;nextAnimal-&gt;info, "This is a big dog"); printf("ptAnimal-&gt;nextAnimal's name: %s, age: %iï¼Œ info: %s\n", ptAnimal-&gt;nextAnimal-&gt;name, ptAnimal-&gt;nextAnimal-&gt;age, ptAnimal-&gt;nextAnimal-&gt;info); return 0;&#125; å®Œæ•´ç¤ºä¾‹main.c 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;struct Animal &#123; char *name; //æŒ‡é’ˆæˆå‘˜ int age; char info[200]; //å­—ç¬¦æ•°ç»„ struct Animal *nextAnimal; //æŒ‡é’ˆæˆå‘˜&#125;;int main(int argc, const char *argv[])&#123; /// éªŒè¯ç»“æž„ä½“æŒ‡é’ˆæˆå‘˜å˜é‡ &#123; struct Animal animal; animal.name = "cat"; strcpy(animal.info, "This is a cat."); printf("animal's name: %s, age: %i, info: %s\n", animal.name, animal.age, animal.info); printf("animal.nextAnimal: %p\n", animal.nextAnimal); // åˆå§‹åŒ–æŒ‡é’ˆå˜é‡ animal.nextAnimal = (struct Animal *)malloc(sizeof(struct Animal)); // åˆå§‹åŒ–å˜é‡ animal.nextAnimal-&gt;name = "cat"; strcpy(animal.nextAnimal-&gt;info, "This is a cat."); printf("animal.nextAnimal-&gt;name: %s, age: %i, info: %s\n", animal.nextAnimal-&gt;name, animal.nextAnimal-&gt;age, animal.nextAnimal-&gt;info); &#125; /// éªŒè¯ç»“æž„ä½“æŒ‡é’ˆ &#123; struct Animal *ptAnimal; // åˆå§‹åŒ–ç»“æž„ä½“æŒ‡é’ˆ ptAnimal = (struct Animal *)malloc(sizeof(struct Animal)); ptAnimal-&gt;name = "dog"; strcpy(ptAnimal-&gt;info, "This is a big dog"); printf("ptAnimal's name: %s, age: %iï¼Œ info: %s\n", ptAnimal-&gt;name, ptAnimal-&gt;age, ptAnimal-&gt;info); // åˆå§‹åŒ–ç»“æž„ä½“æŒ‡é’ˆçš„æˆå‘˜æŒ‡é’ˆå˜é‡ nextAnimal ptAnimal-&gt;nextAnimal = (struct Animal *)malloc(sizeof(struct Animal)); ptAnimal-&gt;nextAnimal-&gt;name = "dog"; strcpy(ptAnimal-&gt;nextAnimal-&gt;info, "This is a big dog"); printf("ptAnimal-&gt;nextAnimal's name: %s, age: %iï¼Œ info: %s\n", ptAnimal-&gt;nextAnimal-&gt;name, ptAnimal-&gt;nextAnimal-&gt;age, ptAnimal-&gt;nextAnimal-&gt;info); &#125; return 0;&#125; ç¼–è¯‘ 1gcc-7 main.c -o main è¿è¡Œ 1./main è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š 12345animal's name: cat, age: 0, info: This is a cat.animal.nextAnimal: 0x0animal.nextAnimal-&gt;name: cat, age: 0, info: This is a cat.ptAnimal's name: dog, age: 0ï¼Œ info: This is a big dogptAnimal-&gt;nextAnimal's name: dog, age: 0ï¼Œ info: This is a big dog æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>gcc macOS struct</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è‡´ç»“å©š8å‘¨å¹´]]></title>
    <url>%2F2019%2F01%2F30%2F%E8%87%B4%E7%BB%93%E5%A9%9A8%E5%91%A8%E5%B9%B4%2F</url>
    <content type="text"><![CDATA[è‡ªå·±æ˜Žæ˜Žæ˜¯ä¸ªç†ç§‘ç”Ÿï¼Œååæœ‰é¢—æ–‡ç§‘ç”Ÿçš„å¿ƒï¼Œå¤šæ„å–„æ„Ÿï¼Œå¿ƒç†æ€»æœ‰é“ä¸å®Œçš„æƒ…ç»“ã€‚ å¾ˆå¤šäººé—®æˆ‘ï¼šâ€œå†™åšå®¢æ˜¯ä¸æ˜¯å¾ˆè´¹æ—¶é—´ï¼ŒæŠŠå†™åšå®¢çš„æ—¶é—´è…¾å‡ºæ¥åšç‚¹å…¶ä»–çš„ä¸æ˜¯æ›´å¥½å—ï¼Ÿâ€œ è¨€ä¸‹ä¹‹æ„åœ¨è¯´ï¼Œåæ­£ä½ ä¹Ÿæˆä¸äº†ä½œå®¶ï¼Œå¹²å˜›æµªè´¹è¿™ä¸ªæ—¶é—´å‘¢ï¼Ÿäººç”Ÿæœ‰å¾ˆå¤šæœ‰ä¹è¶£çš„äº‹æƒ…å¯ä»¥åšï¼Œå…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œä¸æ˜¯å—ï¼Ÿå†™åšå®¢çš„ç¡®æ˜¯è´¹æ—¶é—´ï¼Œä½†è¿™æ˜¯ä¸ªäººçš„ä¸€ä¸ªå°çˆ±å¥½ï¼Œæ‰€ä»¥ï¼Œåœ¨æˆ‘çœ‹æ¥ä¸ç®—æ˜¯æµªè´¹æ—¶é—´ã€‚åšæŒé˜…è¯»å’Œå†™ä½œæ˜¯æˆ‘å”¯ä¸€æ²¡æœ‰æ”¾å¼ƒçš„çˆ±å¥½ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒä»¬èƒ½ç»™æˆ‘å¸¦æ¥å¿«ä¹ï¼Œä¹Ÿæ˜¯æˆ‘å¿™ç¢Œä¹‹åŽåœæ­‡çš„æ¸¯æ¹¾ï¼Œèƒ½è®©æˆ‘ç‹¬ç«‹æ€è€ƒï¼Œé™ä¸‹å¿ƒæ¥æ†§æ†¬ç¾Žå¥½çš„æœªæ¥ã€‚ æ‰€ä»¥ï¼Œçˆ±ä½ æ‰€çˆ±å§ï¼ 2010å¹´å†œåŽ†12æœˆ21æ—¥æˆ‘ä»¬ç»“å©šäº†ï¼Œåœ¨ç»“å©šä¹‹å‰æˆ‘å’Œå¤ªå¤ªè®¤è¯†äº†å¤§æ¦‚5å¹´çš„æ—¶é—´ï¼Œé£Žé£Žé›¨é›¨çš„ä¸€è·¯èµ°æ¥ï¼ŒåŽå·è€Œåˆå¹¸ç¦ï¼Œä¸€ä¸ªå¥³äººèƒ½ä¸ºä½ åšå®ˆè¿™ä¹ˆå¤šå¹´ï¼Œå¹¶ä¸”æ€»æ˜¯èƒ½å¸®ä½ ï¼Œå¨¶å¥¹ä¸¤ééƒ½ä¸ä¸ºè¿‡ï¼Œå“ˆå“ˆï¼ é‚£ä¸ªæ—¶å€™å®¶é‡Œæ¡ä»¶å¾ˆä¸å¥½ï¼Œåœ¨æˆ‘çš„è®°å¿†æ·±å¤„ï¼Œå®¶é‡Œæ€»æ˜¯æœ‰è¿˜ä¸å®Œçš„å€ºï¼Œæ¯ä¸ªå­¦æœŸçš„å­¦æ‚è´¹è®©çˆ¶æ¯ç„¦å¤´çƒ‚é¢ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯è¢«çˆ¶æ¯æžå®šäº†ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—ä»–ä»¬å¾ˆäº†ä¸èµ·ã€‚æˆ‘åšæŒç€è‡ªå·±çš„ä¿¡å¿µï¼šâ€œå¿…é¡»è¦è€ƒä¸Šå¤§å­¦ï¼Œèµ°å‡ºè¿™é‡Œï¼â€ï¼Œæ¯äº²æ˜¯å®¶é‡Œæœ€èµžæˆæˆ‘ä¸Šå­¦çš„ï¼Œå¯èƒ½æ˜¯è¢«æˆ‘ç‚½çƒ­çš„å­¦ä¹ çƒ­æƒ…ç»™æ„ŸæŸ“åˆ°äº†ï¼Œè¿™è¾ˆå­ä¸èƒ½å¿˜è®°æ¯äº²ä¸ºæˆ‘ä¸Šå­¦å¥”æ³¢çš„æ—¥å­ï¼Œæ¯çˆ±ä¹‹æ‰€ä»¥ä¼Ÿå¤§æ˜¯å› ä¸ºä»–ä¸ºè‡ªå·±çš„å­©å­èƒ½å€¾å‡ºæ‰€æœ‰ï¼Œå¹¶ä¸”ä¸æ±‚å›žæŠ¥ï¼ å¤§å­¦æ—¶æœŸï¼Œå¹³æ—¶è‡ªå·±ä¼šæ‰¾ä¸€äº›å®¶æ•™åšï¼Œç®—æ˜¯è¡¥è´´ä¸€ä¸‹æ—¥å¸¸çš„å¼€é”€ï¼Œå¯’æš‘å‡æ˜¯æˆ‘æœ€ç›¼æœ›çš„æ—¥å­ï¼Œå› ä¸ºå¯ä»¥å’Œå¤ªå¤ªåœ¨ä¸€èµ·æ‰“å·¥æŒ£é’±äº†ï¼Œé‚£æ—¶å€™æŒ£é’±åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œèµšåˆ°å­¦è´¹ï¼ä¸€åˆ°å¼€å­¦å¥¹å°±æŠŠè‡ªå·±ç§¯ç´¯çš„é’±éƒ½ç»™æˆ‘äº†ï¼Œç®€ç›´æ˜¯ä¹‰è–„äº‘å¤©ï¼Œå¥¹è¿˜å£®å¿—è±ªæƒ…çš„è¯´ï¼šâ€œæ‹¿åŽ»èŠ±ï¼â€ï¼Œæˆ‘ä¹ŸåŽšé¢œæ— è€»çš„æŽ¥è¿‡æ¥äº†ã€‚å½“æ—¶æˆ‘åœ¨æƒ³ï¼Œè¿™å§‘å¨˜å°±ä¸æ€•æˆ‘ä»¥åŽè·‘æŽ‰å—ï¼Ÿï¼å…³äºŽè¿™ä¸ªäº‹æƒ…ï¼ŒåŽæ¥æˆ‘é—®è¿‡å¥¹ï¼Œå¥¹è¯´ï¼šâ€œæˆ‘ç›¸ä¿¡ä½ ï¼â€ï¼Œæœ´å®žçš„å›žç­”è®©æˆ‘æ— è¨€ä»¥å¯¹ã€‚å…¶å®žï¼Œå½“æˆ‘çœ‹è§å¥¹çš„ç¬¬ä¸€çœ¼ï¼Œå°±æ¯…ç„¶å†³å®šè¿™è¾ˆå­éžå¥¹ä¸å¨¶äº†ï¼ æˆ‘ä»¬ç»“å©šåŽæ²¡å‡ å¤©ï¼Œå°±ç¦»å¼€äº†è€å®¶èµ¶å¾€æ·±åœ³ï¼Œæˆ‘ä»¬æ‰‹é‡Œä¹Ÿæ²¡æœ‰é’±ï¼Œç©·çš„å®å½“å“ï¼Œè®°å¾—åŽ»æ·±åœ³çš„ç›˜ç¼ è¿˜æ˜¯å¼Ÿå¼Ÿç»™æˆ‘çš„ã€‚åœ¨æ·±åœ³åˆšå·¥ä½œçš„æ—¥å­é‡Œï¼Œæ¯å¤©ä¸­åˆæˆ‘ä»¬è¿˜è¦è‡ªå·±åšé¥­ï¼Œç²—èŒ¶æ·¡é¥­çš„å€’ä¹Ÿè§‰å¾—å¼€å¿ƒï¼Œå°±æ˜¯åœ¨é‚£ä¸ªæ—¶å€™å¤ªå¤ªå¼€å§‹ä¼šåšé¥­äº†ï¼Œç‰¹åˆ«æ˜¯æžé¢å’Œè›‹ç‚’é¥­ï¼Œè‡³ä»Šè¿˜è®©æˆ‘è®°å¿†çŠ¹æ–°ï¼Œæ¯å¤©æ™šä¸Šä¸‹ç­æˆ‘éƒ½ä¼šåŽ»æŽ¥å¥¹ï¼Œåœ¨æœˆå…‰ä¸‹å¥¹ç˜¦å°çš„èº«å½±æ˜¾å¾—æ ¼å¤–åˆ«è‡´ï¼Œä¸€èµ·ç‰µæ‰‹å›žå®¶ï¼Œæˆ‘ä»¬å†³å®šå°±è¿™æ ·å¹¸ç¦çš„å¥‹æ–—ä¸‹åŽ»ï¼ ç»“å©šå‰æˆ‘ä»¬å½¼æ­¤éª‚è¿‡ã€åˆ‡ç£‹è¿‡ï¼Œå¤šåŠæ˜¯æˆ‘çš„è¿‡é”™ä½†æˆ‘æ€»æ˜¯è§‰å¾—è‡ªå·±æ˜¯ä¸ªç”·äººï¼Œä¸èƒ½ä½Žå¤´ï¼Œä¸ç„¶çœŸä»–å¦ˆæ²¡é¢å­ã€‚çŽ°åœ¨æƒ³æƒ³è‡ªå·±æŒºå¯ç¬‘çš„ï¼Œæ‰€ä»¥å©šåŽæˆ‘åŸºæœ¬ä¸Šæ²¡æœ‰å’Œå¤ªå¤ªæ‰“éª‚è¿‡ï¼Œå¥³äººçš„è„¾æ°”å¾ˆå¥‡æ€ªï¼Œä¸€ä¼šæ™´å¤©ä¸€ä¼šé›¨å¤©ï¼Œè‡ªå·±å¿ä¸€å¿å°±è¿‡åŽ»äº†ï¼Œä¸è¦å†ç«ä¸Šæµ‡æ²¹äº†ï¼Œå°±åƒè¿™å¥è¯æ‰€è¯´çš„ï¼šâ€œä½ è™½ç„¶èµ¢äº†åµæž¶ï¼Œä½†æ˜¯ä½ å´è¾“äº†æ„Ÿæƒ…â€ï¼Œé€€ä¸€æ­¥æµ·é˜”å¤©ç©ºï¼ 2012å¹´3æœˆï¼Œå„¿å­å‡ºç”Ÿäº†ï¼Œè¿™ä¸ªå°å®¶ä¼™çš„åˆ°æ¥è®©æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´åŠ å¿™ç¢Œäº†ï¼Œæˆ‘ä»¬ç®—æ˜¯æ­¥å…¥äº†çˆ¶æ¯çš„è¡Œåˆ—äº†ã€‚å¤ªå¤ªç®—å‘Šåˆ«äº†æ‰€æœ‰çš„æ‰“å·¥ç”Ÿæ¶¯ï¼Œå…¨èŒåœ¨å®¶ç…§é¡¾å­©å­ï¼Œæˆ‘è´Ÿè´£åœ¨å¤–æŒ£é’±ï¼Œä¸€å®¶ä¸‰å£å¹¸ç¦çš„ç”Ÿæ´»åœ¨ä¸€èµ·ï¼å¤ªå¤ªè‡ªä»Žæœ‰äº†å„¿å­ä¹‹åŽï¼Œå„¿å­å°±åƒæ˜¯ä»–çš„å…¨éƒ¨ï¼ŒæŠŠå­©å­ç…§é¡¾çš„æ— å¾®ä¸è‡³ï¼Œåšäº‹æƒ…æ¯”ä»¥å‰è®¤çœŸäº†å¾ˆå¤šï¼Œå¼€å§‹å…³æ³¨ä¸€äº›å…¬ä¼—å·ï¼Œè¯»ä¸€äº›è‚²å„¿ä¹¦ç±ï¼Œå­¦ä¹ åˆ«äººæ˜¯æ€Žä¹ˆå…»è‚²å­©å­çš„ï¼Œå­©å­åœ¨æˆé•¿ï¼Œå¤ªå¤ªä¹Ÿåœ¨æˆé•¿ã€‚ä¹Ÿè®¸ï¼Œå¥³äººä»Žä¸€åå¦»å­çš„è§’è‰²è½¬æ¢ä¸ºæ¯äº²çš„è§’è‰²çš„è¿™ä¸ªè¿‡ç¨‹ï¼Œç®—æ˜¯ä¸€æ¬¡èœ•å˜ï¼Œå°¤å…¶æ˜¯æ¯äº²çš„è§’è‰²ï¼Œå¥¹æ‰®æ¼”çš„ååˆ†ç²¾å½©ï¼ 2019å¹´1æœˆï¼Œæˆ‘ä»¬çš„ç¬¬äºŒä¸ªå­©å­å‡ºç”Ÿäº†ï¼Œæ˜¯ä¸ªå¯çˆ±çš„åƒé‡‘ï¼Œæˆ‘ä»¬ä¹‹å‰ä¹Ÿè®¨è®ºè¿‡åˆ°åº•è¦ä¸è¦äºŒèƒŽï¼Œæˆ‘è¯´ç”Ÿå­©å­å¤ªè¾›è‹¦äº†ï¼Œæœ‰ä¸€ä¸ªå­©å­å°±å¤ŸæŠ˜è…¾çš„äº†ï¼Œä¸è¦äºŒèƒŽä¹Ÿç½¢ã€‚å¤ªå¤ªåšå†³åå¯¹ï¼Œè¯´ä¸€ä¸ªå­©å­å¤ªå­¤å•ï¼Œä»¥åŽé‡åˆ°äº‹æƒ…è¿žä¸ªå•†é‡çš„äº²äººéƒ½æ²¡æœ‰ï¼Œå¿…é¡»è¦äºŒèƒŽï¼Œå°±è¿™æ ·æˆ‘ä»¬å­•è‚²äº†è¿™ä¸ªå°åƒé‡‘ã€‚æ— è®ºä½ è·Ÿä½ çš„å¤ªå¤ªæœ‰å¤šå¤§çš„ä»‡å¤šå¤§çš„å†¤ï¼Œå¥¹èƒ½ä¸ºä½ ç”Ÿå­©å­ï¼Œå°±å€¼å¾—ä½ ä¸ºå¥¹ä»˜å‡ºä¸€è¾ˆå­ã€‚ ä»Šå¹´æ˜¯æˆ‘ä»¬ç»“å©š8å‘¨å¹´ï¼Œ7å¹´ä¹‹ç—’çš„ä¼ è¯´æ²¡æœ‰åœ¨æˆ‘ä»¬ä¸¤ä¸ªèº«ä¸Šå‘ç”Ÿï¼Œæˆ‘ä»¬ä¼šè¿™æ ·ç»§ç»­å¹¸ç¦ä¸‹åŽ»ï¼Œè¿ŽæŽ¥ä¸‹ä¸€ä¸ªå‘¨å¹´ã€‚ ç¥å¤§å®¶æ–°å¹´æ–°æ°”è±¡ï¼Œèº«ä½“å¥åº·ï¼Œé˜–å®¶å¹¸ç¦ï¼Œä¸‡äº‹å¦‚æ„ï¼Œè¯¸äº‹é¡ºåˆ©ï¼ç¥å¤©ä¸‹æœ‰æƒ…äººç»ˆæˆçœ·å±žï¼ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Classã€isaã€å…ƒç±»]]></title>
    <url>%2F2019%2F01%2F29%2FClass%E3%80%81isa%E3%80%81%E5%85%83%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[å£°æ˜Žæœ¬æ–‡çš„æ‰€æ¶‰åŠåˆ°çš„æºç æ˜¯ objc4 æºç ï¼Œæˆªæ­¢åˆ°å†™æœ¬æ–‡æœ€æ–°çš„æ˜¯ objc4-750 è¿™ä¸ªç‰ˆæœ¬ã€‚ Classæˆ‘ä»¬åœ¨å­¦ä¹ é¢å‘å¯¹è±¡çš„å­¦ä¹ ä¸­ï¼ŒæŽ¥è§¦æœ€å¤šçš„å°±æ˜¯ç±»ï¼Œé‚£ä¹ˆåœ¨OCç±»æ˜¯ç”±Classç±»åž‹æ¥è¡¨ç¤ºçš„ï¼ŒClassæ˜¯ç”¨Cçš„æ•°æ®ç»“æž„æ¥è¡¨ç¤ºçš„ã€‚ çœ‹ä¸€ä¸‹ NSObject çš„å£°æ˜Žï¼Œåœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 123456@interface NSObject &lt;NSObject&gt; &#123;#pragma clang diagnostic push#pragma clang diagnostic ignored "-Wobjc-interface-ivars" Class isa OBJC_ISA_AVAILABILITY;#pragma clang diagnostic pop&#125; å¯ä»¥çœ‹åˆ°ï¼š1ã€NSObject æ˜¯å®žçŽ°äº† &lt;NSObject&gt; åè®®çš„ã€‚2ã€NSObject ä¸­æœ‰ Class ç±»åž‹çš„ isa æˆå‘˜å˜é‡ï¼Œå¤–ç•Œæ˜¯æ— æ³•è®¿é—®çš„ï¼Œå¦å¤– isa æŒ‡é’ˆå¯èƒ½åœ¨å°†æ¥ä¹Ÿä¼šè¢«éšè—èµ·æ¥(OBJC_ISA_AVAILABILITYæ ‡ç¤ºäº†)ã€‚ ç»§ç»­çœ‹ä¸€ä¸‹ Class åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨ä¸Šé¢çš„æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ° Class çš„å®šä¹‰ï¼Œå¦‚ä¸‹ä»£ç ï¼š 123typedef struct objc_class *Class;typedef struct objc_object *id; å¯ä»¥çœ‹å‡º Class æ˜¯ä¸€ä¸ªæŒ‡å‘ objc_class çš„ç»“æž„ä½“æŒ‡é’ˆï¼ŒObjective-C ä¸­çš„ç±»æ˜¯ç”± Class ç±»åž‹æ¥è¡¨ç¤ºçš„ï¼Œå®ƒå®žé™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘ objc_class ç»“æž„ä½“çš„æŒ‡é’ˆã€‚ åœ¨ä¸‹é¢çš„å¤´æ–‡ä»¶ä¸­çœ‹ä¸€ä¸‹ objc_class çš„å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š 12345678struct objc_class : objc_object &#123; // Class ISA; Class superclass; cache_t cache; // formerly cache pointer and vtable class_data_bits_t bits; // class_rw_t * plus custom rr/alloc flags // ....&#125; å¯ä»¥çœ‹å‡ºï¼Œobjc_class ç”¨æ¥æè¿°OCä¸­çš„ç±»ï¼Œè€Œ objc_object ç”¨æ¥æè¿°OCä¸­çš„å¯¹è±¡ï¼Œç±»(objc_class)å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡(objc_object)ï¼Œå¦å¤– id æ˜¯ä»£è¡¨å¯¹è±¡çš„ï¼Œå®ƒæ˜¯æŒ‡å‘ objc_object çš„ç»“æž„ä½“æŒ‡é’ˆï¼Œå®ƒçš„å­˜åœ¨å¯ä»¥è®©æˆ‘ä»¬å®žçŽ°ç±»ä¼¼äºŽC++ä¸­æ³›åž‹çš„ä¸€äº›æ“ä½œã€‚è¯¥ç±»åž‹çš„å¯¹è±¡å¯ä»¥è½¬æ¢ä¸ºä»»ä½•ä¸€ç§å¯¹è±¡ï¼Œæœ‰ç‚¹ç±»ä¼¼äºŽCè¯­è¨€ä¸­ void * æŒ‡é’ˆç±»åž‹çš„ä½œç”¨ã€‚ è¿™é‡Œè¦æ³¨æ„ï¼Œobjc_class çš„å®šä¹‰åœ¨ objc-runtime-old.hä¸­å’Œ objc-runtime-new.h ä¸­çš„ä¸ä¸€æ ·ã€‚è¿™é‡Œä»¥ objc-runtime-new.h ä¸ºä¸»ï¼Œå»ºè®®å¯ä»¥çœ‹çœ‹ è¢«è¯¯è§£çš„ objc_class è¿™ç¯‡æ–‡ç« ã€‚ å†æ¥çœ‹ä¸€ä¸‹ objc_objectï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 12345struct objc_object &#123;private: isa_t isa;// ...&#125; objc_object æ˜¯ä¸€ä¸ªç»“æž„ä½“ï¼Œé‡Œé¢æœ‰ä¸ªç§æœ‰æˆå‘˜å˜é‡ isa æ˜¯ isa_t ç±»åž‹çš„ã€‚ è€Œ isa_t æ˜¯ä¸€ä¸ª union ç±»åž‹çš„ï¼Œå¦‚ä¸‹ä»£ç ï¼š 123456789101112union isa_t &#123; isa_t() &#123; &#125; isa_t(uintptr_t value) : bits(value) &#123; &#125; Class cls; uintptr_t bits;#if defined(ISA_BITFIELD) struct &#123; ISA_BITFIELD; // defined in isa.h &#125;;#endif&#125;; æ€»ä¹‹åœ¨OCä¸­ï¼Œç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ç§°ä¹‹ä¸ºç±»å¯¹è±¡ï¼Œæ ¹æ®å‡¡æ˜¯å¯¹è±¡éƒ½æœ‰è‡ªå·±çš„ç±»çš„åŽŸç†ï¼Œé‚£ä¹ˆç±»å¯¹è±¡çš„è‚¯å®šå­˜åœ¨è‡ªå·±çš„ç±»ï¼Œè¿™ä¸ªç±»å°±æ˜¯å…ƒç±»(meta-class)ã€‚ å…ƒç±»åœ¨è¯´å…ƒç±»ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼Œåˆ›å»ºä¸€ä¸ª NSMutableDictionary å®žä¾‹å¯¹è±¡ dictï¼Œå³å‘ NSMutableDictionary å‘é€ alloc å’Œ init æ¶ˆæ¯ã€‚ 1NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; ä¸Šé¢ä»£ç çš„å¤§æ¦‚æ‰§è¡Œæµç¨‹å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š 1ã€å…ˆæ‰§è¡Œ [NSMutableDictionary alloc]ï¼Œä½†æ˜¯ NSMutableDictionary æ²¡æœ‰ +alloc æ–¹æ³•ï¼ŒäºŽæ˜¯å†åŽ»çˆ¶ç±»NSObject ä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ã€‚ 2ã€NSObject å“åº” +alloc æ–¹æ³•ï¼Œå¼€å§‹æ£€æµ‹ NSMutableDictionary ç±»ï¼Œå¹¶æ ¹æ®å…¶æ‰€éœ€çš„å†…å­˜ç©ºé—´å¤§å°å¼€å§‹åˆ†é…å†…å­˜ç©ºé—´ï¼Œç„¶åŽæŠŠ isa æŒ‡é’ˆæŒ‡å‘ NSMutableDictionary ç±»ã€‚åŒæ—¶ï¼Œ+alloc ä¹Ÿè¢«åŠ è¿› cache åˆ—è¡¨é‡Œé¢ã€‚ 3ã€æŽ¥ç€ï¼Œæ‰§è¡Œ -init æ–¹æ³•ï¼Œå¦‚æžœ NSMutableDictionary å“åº”è¯¥æ–¹æ³•ï¼Œåˆ™ç›´æŽ¥å°†å…¶åŠ å…¥ cacheï¼Œå¦‚æžœä¸å“åº”ï¼Œåˆ™åŽ»çˆ¶ç±»æŸ¥æ‰¾ã€‚ 4ã€åœ¨åŽæœŸçš„æ“ä½œä¸­ï¼Œå¦‚æžœå†ä»¥ [[NSMutableDictionary alloc] init] è¿™ç§æ–¹å¼æ¥åˆ›å»ºå­—å…¸å¯¹è±¡ï¼Œåˆ™ä¼šç›´æŽ¥ä»Ž cache ä¸­å–å‡ºç›¸åº”çš„æ–¹æ³•ï¼Œç›´æŽ¥è°ƒç”¨ã€‚ ä¸Šé¢æ˜¯åˆ›å»ºä¸€ä¸ªå®žä¾‹å¯¹è±¡çš„å¤§è‡´æµç¨‹ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬è¯´è¯´å…ƒç±»ã€‚ å…ƒç±»ç®€å•æ¥è¯´å°±æ˜¯ç±»å¯¹è±¡çš„ç±»ã€‚ç±»æè¿°çš„æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆå…ƒç±»æè¿°çš„å°±æ˜¯Classç±»å¯¹è±¡çš„ç±»ã€‚å…ƒç±»å®šä¹‰äº†ç±»çš„è¡Œä¸ºï¼ˆç±»æ–¹æ³•ï¼‰ï¼Œåœ¨å¹³æ—¶å¼€å‘æ—¶ï¼Œmeta-class åŸºæœ¬æ˜¯ç”¨ä¸ç€æŽ¥è§¦çš„ï¼Œä½†æœ€å¥½è¿˜æ˜¯è¦çŸ¥é“å®ƒçš„å­˜åœ¨ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„ç†è§£OCçš„è®¾è®¡ã€‚ 1NSMutableDictionary *tDatas = [NSMutableDictionary dictionaryWithCapacity:5]; æ‹¿ä¸Šé¢çš„ç¤ºä¾‹æ¥è¯´ï¼Œå‘ NSMutableDictionary å‘é€ dictionaryWithCapacity è¿™ä¸ªæ¶ˆæ¯çš„æ—¶å€™ï¼ŒRuntime ä¼šåœ¨è¿™ä¸ªç±»çš„ meta-class çš„æ–¹æ³•åˆ—è¡¨ä¸­æŸ¥æ‰¾ï¼Œé€šè¿‡ SEL æ‰¾åˆ°åŽå–å‡ºæ–¹æ³•ä¸­çš„ IMP å‡½æ•°å…¥å£æŒ‡é’ˆï¼Œå¹¶æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¦‚æžœæ‰¾ä¸åˆ°å°±è¿›è¡Œæ¶ˆæ¯è½¬å‘çš„æµç¨‹ä¸­ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå¯¼è‡´ Crashï¼Œæ¶ˆæ¯è½¬å‘çš„åŽŸç†å’Œæœºåˆ¶å¯ä»¥å‚è€ƒ æ¶ˆæ¯æœºåˆ¶ è¿™å‡ ç¯‡æ–‡ç« ã€‚ å…ƒç±»ä¿å­˜äº†ç±»æ–¹æ³•çš„åˆ—è¡¨ã€‚å½“ä¸€ä¸ªç±»æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå…ƒç±»ä¼šé¦–å…ˆæŸ¥æ‰¾å®ƒæœ¬èº«æ˜¯å¦æœ‰è¯¥ç±»æ–¹æ³•çš„å®žçŽ°ï¼Œå¦‚æžœæ²¡æœ‰åˆ™è¯¥å…ƒç±»ä¼šå‘å®ƒçš„çˆ¶ç±»æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œç›´åˆ°ä¸€ç›´æ‰¾åˆ°ç»§æ‰¿é“¾çš„å¤´ã€‚ 1Class object_getClass(id obj); object_getClass å¯ä»¥èŽ·å–ä¸€ä¸ªå¯¹è±¡çš„ class objectï¼Œå…¶æºç å®žçŽ°å¦‚ä¸‹ï¼š 12345Class object_getClass(id obj)&#123; if (obj) return obj-&gt;getIsa(); else return Nil;&#125; ä¸¾ä¸ªä¾‹å­å§ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112131415161718NSObject *obj = [NSObject new];Class obj1 = object_getClass(obj);Class obj2 = object_getClass([NSObject class]);Class obj3 = objc_getMetaClass("NSObject");Class obj4 = object_getClass(obj1);const char *name = [NSStringFromClass(obj1) UTF8String];NSLog(@"name: %s", name); //name: NSObjectClass obj5 = objc_getMetaClass(name);Class obj6 = objc_getClass(name); NSLog(@"obj : %@, -&gt;%p: ", obj, obj); NSLog(@"obj1: %@, -&gt;%p: ", obj1, obj1);NSLog(@"obj2: %@, -&gt;%p: ", obj2, obj2);NSLog(@"obj3: %@, -&gt;%p: ", obj3, obj3);NSLog(@"obj4: %@, -&gt;%p: ", obj4, obj4);NSLog(@"obj5: %@, -&gt;%p: ", obj5, obj5);NSLog(@"obj6: %@, -&gt;%p: ", obj6, obj6); æ‰“å°ç»“æžœå¦‚ä¸‹ï¼š 1234567obj : &lt;NSObject: 0x600002b19d70&gt;, -&gt;0x600002b19d70:obj1: NSObject, -&gt;0x10c96bf38:obj2: NSObject, -&gt;0x10c96bee8:obj3: NSObject, -&gt;0x10c96bee8:obj4: NSObject, -&gt;0x10c96bee8:obj5: NSObject, -&gt;0x10c96bee8:obj6: NSObject, -&gt;0x10c96bf38: å¯ä»¥çœ‹å‡ºï¼Œobj æ˜¯ä¸€ä¸ªå®žä¾‹å¯¹è±¡ï¼Œobj1å’Œobj6æ˜¯ä¸€ä¸ª class objectï¼Œå…¶äºŒè€…åœ°å€ä¹Ÿä¸€è‡´ï¼Œobj2ã€obj3ã€obj4 å’Œ obj5 éƒ½èŽ·å–åˆ°çš„æ˜¯å…ƒç±»ã€‚ é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨çš„ object_getClass å¾—åˆ°çš„æ˜¯è¯¥ç±»å¯¹è±¡çš„ meta-classï¼Œå¦‚ obj2 å’Œ obj4ï¼Œè€Œé€šè¿‡å®žä¾‹å¯¹è±¡è°ƒç”¨çš„object_getClass å¾—åˆ°çš„æ˜¯è¯¥å®žä¾‹å¯¹è±¡çš„ç±»å¯¹è±¡ï¼Œå¦‚ obj1ï¼Œobjc_getClass è¿™ä¸ªæ–¹æ³•èŽ·å–æ˜¯å®žä¾‹å¯¹è±¡çš„ç±»å¯¹è±¡ï¼Œä¸Žobject_getClass è¿˜æ˜¯æœ‰ç‚¹ä¸ä¸€æ ·çš„ã€‚è€Œ objc_getMetaClass å¯ä»¥ç›´æŽ¥èŽ·å– meta-classï¼Œå¦‚ obj3ã€‚ æ€»ä¹‹:1ã€objc_getClass å‚æ•°æ˜¯ç±»åçš„å­—ç¬¦ä¸²ï¼Œè¿”å›žçš„å°±æ˜¯è¿™ä¸ªç±»çš„ç±»å¯¹è±¡ã€‚2ã€object_getClass å‚æ•°æ˜¯ id ç±»åž‹ï¼Œå®ƒè¿”å›žçš„æ˜¯è¿™ä¸ª id çš„ isa æŒ‡é’ˆæ‰€æŒ‡å‘çš„Classï¼›å¦‚æžœä¼ å‚æ˜¯Classï¼Œåˆ™è¿”å›žè¯¥Classçš„meta-classã€‚ åœ¨ NSObject.mm ä¸­ï¼Œå¯ä»¥çœ‹åˆ° self å’Œ class æ–¹æ³•éƒ½è¦å®žä¾‹å’Œç±»æ–¹æ³•ï¼Œclass æ–¹æ³•è¿”å›žçš„éƒ½æ˜¯ç±»å¯¹è±¡ã€‚ 12345678910111213141516171819+ (id)self &#123; return (id)self;&#125;- (id)self&#123; return self;&#125;+ (Class)class &#123; return self;&#125;- (Class)class &#123; return object_getClass(self);&#125; æ‰€ä»¥ï¼Œæ— è®ºæ˜¯ç±»è¿˜æ˜¯å®žä¾‹è°ƒç”¨ class æ–¹æ³•ï¼Œè¿”å›žçš„éƒ½æ˜¯åŒä¸€ä¸ª class objectï¼Œä¸¾ä¾‹ï¼š 123456Class objClz1 = [NSObject class];Class objClz2 = [[[NSObject alloc] init] class]; if (objClz1 == objClz2) &#123; NSLog(@"objClz1: %@, -&gt;%p", objClz1, objClz1);&#125; è¾“å‡ºç»“æžœæ˜¯ï¼š 1objClz1: NSObject, -&gt;0x10fa30f38 isaä¸‹é¢çš„ä¾‹å­æ¥æºè‡ª è¿™é‡Œï¼Œæ„Ÿè°¢ kingizzâ€™s blogï¼Œä»£ç ä¸­ Son æ˜¯ Father çš„å­ç±»ï¼Œè€Œ Father æ˜¯ NSObject çš„å­ç±»ã€‚ 123@interface Father : NSObject@end 123@interface Son : Father@end æˆ‘ä»¬ç»“åˆä¸‹é¢è¿™ä¸ªå›¾æ¥ç†è§£ä¸€ä¸‹ï¼Œå­ç±»ã€çˆ¶ç±»ã€å…ƒç±»ä»¥åŠ isa æŒ‡é’ˆã€‚ ä¸€ä¸ªå®žä¾‹å¯¹è±¡çš„ isa æŒ‡å‘å¯¹è±¡æ‰€å±žçš„ç±»ï¼Œè¿™ä¸ªç±»çš„ isa æŒ‡å‘è¿™ä¸ªç±»çš„å…ƒç±»ï¼Œè€Œè¿™ä¸ªå…ƒç±»çš„ isa åˆæŒ‡å‘ NSObject çš„å…ƒç±»ï¼ŒNSObject çš„å…ƒç±»çš„ isa æŒ‡å‘å…¶æœ¬èº«ï¼Œæœ€ç»ˆå½¢æˆå½¢æˆä¸€ä¸ªå®Œç¾Žçš„é—­çŽ¯ã€‚ åœ¨OCä¸­ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª isa æŒ‡é’ˆï¼ŒæŒ‡å‘å¯¹è±¡æ‰€å±žçš„ç±»ï¼Œç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç±»å¯¹è±¡çš„ isa æŒ‡é’ˆæŒ‡å‘ç±»çš„å…ƒç±»ã€‚ å‚è€ƒæ–‡ç« 1ã€Objective-C ä¸­çš„å¯¹è±¡ã€ç±»ã€å…ƒç±» 2ã€Objective-C Runtime(ä¸€)å¯¹è±¡æ¨¡åž‹åŠç±»ä¸Žå…ƒç±» 3ã€è¢«è¯¯è§£çš„ objc_class æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>å…ƒç±» isa class meta-class</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¢«è¯¯è§£çš„ objc_class]]></title>
    <url>%2F2019%2F01%2F28%2F%E8%A2%AB%E8%AF%AF%E8%A7%A3%E7%9A%84-objc-class%2F</url>
    <content type="text"><![CDATA[ç½‘ä¸Šç»å¤§å¤šæ•°çš„åšå®¢è®² objc_class çš„å®šä¹‰ï¼ŒåŸºæœ¬ä¸Šéƒ½ä½¿ç”¨äº†ä¸‹é¢çš„ä»£ç ä¸€æ¥è®²è§£ï¼Œä¸Ž objc4 æºç  objc-runtime-new.h ä¸­å…³äºŽ objc_class ä¸­çš„å®šä¹‰å®Œå…¨ä¸ä¸€æ ·ï¼Œæˆ‘è®¤çœŸåœ°åŽ»æŽ¢ç©¶äº†ä¸€ä¸‹ï¼Œå‘çŽ°è¿™ä¸ªä¸–ç•Œä¸Šå®žå±žé›·åŒçš„äº‹ä»¶è¿˜æ˜¯è›®å¤šçš„ï¼Œè€å®žåšäº‹åšå­¦é—®çš„ç¼ºå°‘çš„å¯æ€œï¼ æœ¬æ–‡çš„æ‰€æ¶‰åŠåˆ°çš„ objc4 æºç ï¼Œæˆªæ­¢åˆ°å†™æœ¬æ–‡æœ€æ–°çš„æ˜¯ objc4-750 è¿™ä¸ªç‰ˆæœ¬ã€‚ ä»£ç ä¸€ï¼šç®€æ´ç‰ˆä¹Ÿç§°å‘è´§ç‰ˆ 1234567891011121314151617struct objc_class &#123; Class _Nonnull isa OBJC_ISA_AVAILABILITY;#if !__OBJC2__ Class _Nullable super_class OBJC2_UNAVAILABLE; const char * _Nonnull name OBJC2_UNAVAILABLE; long version OBJC2_UNAVAILABLE; long info OBJC2_UNAVAILABLE; long instance_size OBJC2_UNAVAILABLE; struct objc_ivar_list * _Nullable ivars OBJC2_UNAVAILABLE; struct objc_method_list * _Nullable * _Nullable methodLists OBJC2_UNAVAILABLE; struct objc_cache * _Nonnull cache OBJC2_UNAVAILABLE; struct objc_protocol_list * _Nullable protocols OBJC2_UNAVAILABLE;#endif&#125; OBJC2_UNAVAILABLE;/* Use `Class` instead of `struct objc_class *` */ åœ¨ä¸Šé¢çš„ä»£ç ä¸­ OBJC2_UNAVAILABLE çœ‹èµ·æ¥è®©äººè§‰å¾—æœ‰ç‚¹å¥‡æ€ªï¼Œä»Žå­—é¢æ„æ€ä¸Šå¯ä»¥ç†è§£ä¸ºåœ¨OC2.0ç‰ˆæœ¬ä¸å¯ç”¨äº†ï¼Œè¿˜æœ‰ä¸€ä¸ª OBJC_ISA_AVAILABILITY æ˜¯åœ¨è¡¨ç¤º Objective-C éƒ½å¯ä»¥ä½¿ç”¨å—ï¼Ÿ åœ¨ objc-api.h ä¸­æœ‰å…³äºŽè¿™ä¸¤ä¸ªå®çš„å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š ä»£ç äºŒï¼šå…³é”®å®å®šä¹‰ 12345678910111213141516171819202122/* OBJC_ISA_AVAILABILITY: `isa` will be deprecated or unavailable * in the future */#if !defined(OBJC_ISA_AVAILABILITY)# if __OBJC2__# define OBJC_ISA_AVAILABILITY __attribute__((deprecated))# else# define OBJC_ISA_AVAILABILITY /* still available */# endif#endif/* OBJC2_UNAVAILABLE: unavailable in objc 2.0, deprecated in Leopard */#if !defined(OBJC2_UNAVAILABLE)# if __OBJC2__# define OBJC2_UNAVAILABLE UNAVAILABLE_ATTRIBUTE# else /* plain C code also falls here, but this is close enough */# define OBJC2_UNAVAILABLE \ __OSX_DEPRECATED(10.5, 10.5, "not available in __OBJC2__") \ __IOS_DEPRECATED(2.0, 2.0, "not available in __OBJC2__") \ __TVOS_UNAVAILABLE __WATCHOS_UNAVAILABLE __BRIDGEOS_UNAVAILABLE# endif#endif ä»Žå®šä¹‰æ¥çœ‹ï¼ŒOBJC_ISA_AVAILABILITY åœ¨OC2.0ç‰ˆæœ¬ä¸­æ ‡ç¤ºå·²ç»è¿‡æ—¶äº†ï¼ŒOBJC2_UNAVAILABLE æ ‡ç¤ºåœ¨OC2.0ä¸­å·²ç»ä¸å¯ç”¨äº†ï¼Œå°†æ¥ä¼šè¢«ç§»é™¤çš„ã€‚ æˆ‘ä»¬ä¸å¦¨æ¥æ‘˜å½•å®Œæ•´çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š ä»£ç ä¸‰ï¼šå®Œæ•´ç‰ˆä¹Ÿç§°æ•´æ˜Žç™½ç‰ˆ 123456789101112131415161718192021222324252627282930313233#if !OBJC_TYPES_DEFINED/// An opaque type that represents a method in a class definition.typedef struct objc_method *Method;/// An opaque type that represents an instance variable.typedef struct objc_ivar *Ivar;/// An opaque type that represents a category.typedef struct objc_category *Category;/// An opaque type that represents an Objective-C declared property.typedef struct objc_property *objc_property_t;struct objc_class &#123; Class _Nonnull isa OBJC_ISA_AVAILABILITY;#if !__OBJC2__ Class _Nullable super_class OBJC2_UNAVAILABLE; const char * _Nonnull name OBJC2_UNAVAILABLE; long version OBJC2_UNAVAILABLE; long info OBJC2_UNAVAILABLE; long instance_size OBJC2_UNAVAILABLE; struct objc_ivar_list * _Nullable ivars OBJC2_UNAVAILABLE; struct objc_method_list * _Nullable * _Nullable methodLists OBJC2_UNAVAILABLE; struct objc_cache * _Nonnull cache OBJC2_UNAVAILABLE; struct objc_protocol_list * _Nullable protocols OBJC2_UNAVAILABLE;#endif&#125; OBJC2_UNAVAILABLE;/* Use `Class` instead of `struct objc_class *` */#endif è¿™é‡Œå±…ç„¶è¿˜æœ‰ä¸ªå® OBJC_TYPES_DEFINEDï¼Œçœ‹ä¸€ä¸‹å…¶åœ¨ objc-private.h ä¸­çš„å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š 1#define OBJC_TYPES_DEFINED 1 é‚£ä¹ˆ #if !OBJC_TYPES_DEFINED å·²ç»é™åˆ¶äº†å…¶åˆ° #endif ä¸­é—´çš„ä»£ç éƒ½æ˜¯æ— æ•ˆçš„ï¼Œæ‰€ä»¥å…³äºŽä»£ç ä¸€å¤„çš„ä»£ç å…¶å®žå·²ç»æ²¡æœ‰å®žé™…æ„ä¹‰äº†ï¼Œç½‘ä¸Šçš„æœ‹å‹ä»¬è¯·ä¸è¦æ‹¿è¿™æ®µä»£ç å† éª—äºº äº†ã€‚ æºç  objc-runtime-new.h ä¸­å…³äºŽ objc_class ä¸­çš„å®šä¹‰ä»£ç å¦‚ä¸‹ï¼š ä»£ç å››ï¼šæ­£è§£ç‰ˆ 123456789101112131415161718192021222324252627struct objc_class : objc_object &#123; // Class ISA; Class superclass; cache_t cache; // formerly cache pointer and vtable class_data_bits_t bits; // class_rw_t * plus custom rr/alloc flags // ....&#125;struct objc_object &#123;private: isa_t isa;// ...&#125;union isa_t &#123; isa_t() &#123; &#125; isa_t(uintptr_t value) : bits(value) &#123; &#125; Class cls; uintptr_t bits;#if defined(ISA_BITFIELD) struct &#123; ISA_BITFIELD; // defined in isa.h &#125;;#endif&#125;; æ— è®ºæ˜¯å­¦çŸ¥è¯†è¿˜æ˜¯åšçŸ¥è¯†ï¼Œè€å®žè®¤çœŸåº”è¯¥æ˜¯æœ€åŸºæœ¬çš„è¦æ±‚ï¼Œåƒä¸‡ä¸è¦ä»¥è®¹ä¼ è®¹ï¼Œè¯¯äººå­å¼Ÿï¼ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS objc_class</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é›†åˆå¯¹è±¡å¯å˜ä¸Žä¸å¯å˜çš„é‚£ç‚¹äº‹]]></title>
    <url>%2F2019%2F01%2F13%2F%E9%9B%86%E5%90%88%E5%AF%B9%E8%B1%A1%E5%8F%AF%E5%8F%98%E4%B8%8E%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E9%82%A3%E7%82%B9%E4%BA%8B%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹åœ¨æ–‡ç«  NSString NSMutableString å¯å˜ä¸Žä¸å¯å˜çš„é‚£äº›äº‹å„¿ åˆ†äº«äº†å…³äºŽ NSString å’Œ NSMutableString ä¸Ž copy ä»¥åŠ mutableCopy ä¹‹é—´çš„ç‚¹æ»´ã€‚ ä»Šå¤©è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹é›†åˆç±»æ•°æ®çš„å¯å˜ä¸Žä¸å¯å˜æ€§ï¼Œå†ç»“åˆ copy ä»¥åŠ mutableCopy è¯´ä¸€è¯´æ³¨æ„äº‹é¡¹ã€‚å¦‚æžœä½ ä»”ç»†çœ‹è¿‡ NSString NSMutableString å¯å˜ä¸Žä¸å¯å˜çš„é‚£äº›äº‹å„¿ è¿™ç¯‡æ–‡ç« ï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥çœ‹æœ¬ç¯‡ä¼šå¾ˆè½»æ¾ã€‚ æœ¬ç¯‡å†…å®¹ä¸»è¦æ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ–¹é¢: åœ¨ OC ä¸­çš„é›†åˆå¯¹è±¡ é›†åˆå¯¹è±¡çš„ copyã€mutableCopy å¯å˜ä¸Žä¸å¯å˜é›†åˆå¯¹è±¡ä¹‹é—´ç­‰å·èµ‹å€¼ property ä¸­çš„é›†åˆå¯¹è±¡çš„ copy å’Œ strong å®žé™…æ¡ˆä¾‹åˆ†æž ä¸ºäº†è¯´æ˜Žé—®é¢˜ï¼Œè¿™é‡Œï¼Œæˆ‘é€‰ç”¨æ•°ç»„(NSArray)ä½œä¸ºé›†åˆå¯¹è±¡çš„ä»£è¡¨ï¼Œå…¶ä»–çš„é›†åˆç±»ä»¥æ­¤ç±»æŽ¨å³å¯ã€‚ é›†åˆå¯¹è±¡åœ¨ Objective-C ä¸­ï¼Œéžé›†åˆç±»å¯¹è±¡æŒ‡çš„æ˜¯ NSStringã€NSNumberã€NSValue ä¹‹ç±»çš„å¯¹è±¡ï¼Œé™¤äº† NSString æœ‰å¯¹åº”çš„å¯å˜ç±» NSMutableString å¤–ï¼ŒNSNumberã€NSValue éƒ½æ²¡æœ‰å¯å˜ç±»ä¸Žå…¶å¯¹åº”ã€‚ é›†åˆç±»å¯¹è±¡æ˜¯æŒ‡ NSArrayã€NSMutableArrayã€ NSDictionaryã€NSMutableDictionaryã€NSSetã€NSMutableSet ä¹‹ç±»çš„å¯¹è±¡ã€‚ é›†åˆå¯¹è±¡çš„ copyã€mutableCopyçœ‹ä¸€ä¸ªå…·ä½“ä¾‹å­ï¼Œè¯·æŽ¥ç€çœ‹ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å’Œè¯´æ˜Žã€‚ ä¾‹å­1ï¼šNSArray çš„ copyã€mutableCopy 12345678910111213141516171819202122NSArray *array = [NSArray arrayWithObjects:@"veryitman.com", nil];NSLog(@"array addr: %p, array: %@ ", array, array);// åœ°å€æœªå˜å’Œarrayä¸€è‡´ï¼Œå†…å®¹ä¹Ÿä¸€è‡´NSArray *array1 = array;NSLog(@"array1 addr: %p, array1: %@", array1, array1);// åœ°å€æœªå˜å’Œarrayä¸€è‡´ï¼Œå†…å®¹ä¹Ÿä¸€è‡´// copy ä¹‹åŽä»ç„¶æ˜¯ä¸å¯å˜çš„æ•°ç»„å¯¹è±¡id array2 = [array copy];NSLog(@"array2 addr: %p, array2: %@", array2, array2);// åœ°å€æ”¹å˜id array3 = [array mutableCopy];NSLog(@"array3 addr: %p, array3: %@", array3, array3);// è¿›ä¸€æ­¥è¯´æ˜Žäº†ç»è¿‡mutableCopyåŽï¼Œarray3å˜æˆäº†å¯å˜æ•°ç»„[(NSMutableArray *)(array3) addObject:@"my blog"];NSLog(@"array3 addr: %p, array3: %@", array3, array3);// å› ä¸ºarray3åœ°å€å˜äº†ï¼Œä¸ä¼šå½±å“arrayçš„åœ°å€å’Œå€¼NSLog(@"array addr: %p, array: %@ ", array, array); å°ç»“ 1ï¼š 1ã€ä¸å¯å˜æ•°ç»„ copy ä¹‹åŽï¼Œä»ç„¶æ˜¯ä¸å¯å˜æ•°ç»„ï¼Œå…¶åœ°å€å’Œå†…å®¹ä¸å˜ï¼Œå³æ‹·è´äº†åŽŸå¯¹è±¡çš„å†…å®¹å’ŒæŒ‡é’ˆï¼Œå±žäºŽæŒ‡é’ˆæ‹·è´ã€‚ 2ã€ä¸å¯å˜æ•°ç»„ mutableCopy ä¹‹åŽï¼Œå˜æˆäº†å¯å˜æ•°ç»„ï¼Œå…¶åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œå³åªæ‹·è´äº†åŽŸå¯¹è±¡çš„å†…å®¹ï¼ŒæŒ‡é’ˆæ²¡æœ‰æ‹·è´ï¼Œå±žäºŽå†…å®¹æ‹·è´ã€‚ 3ã€ä¸å¯å˜æ•°ç»„ä¹‹é—´çš„ç­‰å·(=)èµ‹å€¼ï¼Œæ˜¯æŒ‡é’ˆæ‹·è´ã€‚ ä¾‹å­2ï¼šNSMutableArray çš„ copyã€mutableCopy 1234567891011121314151617181920212223242526272829NSMutableArray *marray = [NSMutableArray arrayWithObjects:@"veryitman.com", nil];NSLog(@"marray addr: %p, marray: %@ ", marray, marray);// åœ°å€æœªå˜å’Œmarrayä¸€è‡´ï¼Œå†…å®¹ä¹Ÿä¸€è‡´NSMutableArray *marray1 = marray;NSLog(@"marray1 addr: %p, marray1: %@ ", marray1, marray1);// copy ä¹‹åŽï¼Œåœ°å€æ”¹å˜ä¸”å˜æˆäº†ä¸å¯å˜çš„æ•°ç»„å¯¹è±¡id marray2 = [marray copy];NSLog(@"marray2 addr: %p, marray2: %@ ", marray2, marray2);// mutableCopy ä¹‹åŽï¼Œåœ°å€æ”¹å˜ä½†ä»æ˜¯å¯å˜æ•°ç»„å¯¹è±¡id marray3 = [marray mutableCopy];NSLog(@"marray3 addr: %p, marray3: %@ ", marray3, marray3);// Crashï¼šè¿›ä¸€æ­¥è¯´æ˜Žäº†å¯å˜æ•°ç»„å¯¹è±¡ç»è¿‡ copy ä¹‹åŽå˜æˆäº†ä¸å¯å˜çš„marray2// -[__NSSingleObjectArrayI addObject:]: unrecognized selector sent to instance 0x600002cbd320// *** Terminating app due to uncaught exception 'NSInvalidArgumentException',// reason: '-[__NSSingleObjectArrayI addObject:]: unrecognized selector sent to instance 0x600002cbd320'// [(NSMutableArray *)(marray2) addObject:@"my blog"];// NSLog(@"marray2 addr: %p, marray2: %@ ", marray2, marray2);// è¿›ä¸€æ­¥è¯æ˜Žäº†mutableCopy ä¹‹åŽï¼Œmarray3æ˜¯å¯å˜æ•°ç»„[(NSMutableArray *)(marray3) addObject:@"my blog"];NSLog(@"marray3 addr: %p, marray3: %@ ", marray3, marray3);// å› ä¸ºmarray3åœ°å€æ”¹å˜äº†ï¼Œæ‰€ä»¥å¯¹marray3çš„æ“ä½œä¸ä¼šå½±å“åŽŸæ¥çš„æ•°ç»„å¯¹è±¡marray// marray åœ°å€å’Œå†…å®¹ä¿æŒä¸å˜NSLog(@"marray addr: %p, marray: %@ ", marray, marray); å°ç»“ 2ï¼š 1ã€å¯å˜æ•°ç»„ copy ä¹‹åŽï¼Œä¼šå˜æˆä¸å¯å˜æ•°ç»„ï¼Œå…¶å†…å®¹ä¸å˜ï¼Œä½†æ˜¯åœ°å€æ”¹å˜äº†ï¼Œå³åªæ‹·è´äº†åŽŸå¯¹è±¡çš„å†…å®¹ï¼Œæ²¡æœ‰è¿›è¡ŒæŒ‡é’ˆæ‹·è´ï¼Œå±žäºŽå†…å®¹æ‹·è´ã€‚ 2ã€å¯å˜æ•°ç»„ mutableCopy ä¹‹åŽï¼Œä»ç„¶æ˜¯ä¸å¯å˜æ•°ç»„ï¼Œå…¶åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œå†…å®¹æ²¡æœ‰å˜åŒ–ï¼Œå³åªæ‹·è´äº†åŽŸå¯¹è±¡çš„å†…å®¹ï¼ŒæŒ‡é’ˆæ²¡æœ‰æ‹·è´ï¼Œå±žäºŽå†…å®¹æ‹·è´ã€‚ 3ã€å¯å˜æ•°ç»„ä¹‹é—´ç­‰å·(=)èµ‹å€¼ï¼Œæ˜¯æŒ‡é’ˆæ‹·è´ã€‚ ä¾‹å­3ï¼šNSMutableArray å’Œ NSArray ä¹‹é—´ç­‰å·èµ‹å€¼ 123456789101112131415161718192021222324252627/** å‘ä¸å¯å˜æ•°ç»„èµ‹å€¼å¯å˜æ•°ç»„ */&#123; NSMutableArray *tDatas = [NSMutableArray arrayWithObjects:@"veryitman.com", nil]; NSLog(@"--1--- tDatas addr: %p, tDatas: %@", tDatas, tDatas); // ç±»ä¼¼ä½†ä¸åŒäºŽå¯å˜æ•°ç»„çš„mutableCopyæ“ä½œï¼Œæ­¤æ—¶ array çš„åœ°å€æœªå˜å’ŒtDatasåœ°å€ä¸€è‡´ // arrayçš„å†…å®¹å’Œåœ°å€æœªå‘ç”Ÿå˜åŒ–ï¼Œå’ŒtDatasä¸€è‡´ NSArray *array = tDatas; NSLog(@"--2--- array addr: %p, array: %@", array, array);&#125; /** å‘å¯å˜æ•°ç»„èµ‹å€¼ä¸å¯å˜æ•°ç»„ */&#123; NSArray *tDatas = [NSArray arrayWithObjects:@"veryitman.com", nil]; NSLog(@"--1--- tDatas addr: %p, tDatas: %@", tDatas, tDatas); // ç±»ä¼¼è¿›è¡Œäº†ä¸å¯å˜æ•°ç»„çš„ copy æ“ä½œ // array ä»æ—§æ˜¯ä¸å¯å˜çš„ï¼Œåœ°å€å’Œå†…å®¹ä¸ŽtDatasä¸€è‡´ NSMutableArray *array = tDatas; NSLog(@"--2--- array addr: %p, array: %@", array, array); // crash: è¿˜æ˜¯ä¸å¯å˜çš„æ•°ç»„ // -[__NSArrayI addObject:]: unrecognized selector sent to instance 0x6000025499c0 // Terminating app due to uncaught exception 'NSInvalidArgumentException', // reason: '-[__NSArrayI addObject:]: unrecognized selector sent to instance 0x6000025499c0' // [array addObject:@"blog"];&#125; è¾“å‡ºç»“æžœï¼Œå¦‚ä¸‹ï¼š 12345678910111213--1--- tDatas addr: 0x6000023a8bd0, tDatas: ( "veryitman.com")--2--- array addr: 0x6000023a8bd0, array: ( "veryitman.com")--1--- tDatas addr: 0x600002dbbf00, tDatas: ( "veryitman.com")--2--- array addr: 0x600002dbbf00, array: ( "veryitman.com") ä»¥ä¸Šæ˜¯ä½¿ç”¨ NSArrayã€NSMutableArray æ¥è¿›è¡Œæµ‹è¯•çš„ï¼ŒNSDictionary å’Œ NSSet ä»¥åŠå…¶å¯¹åº”çš„å¯å˜ç±»åž‹éƒ½éµå¾ªä¸Šé¢æ€»ç»“çš„å†…å®¹ã€‚ copyã€strong ä¿®é¥°å±žæ€§åœ¨å±žæ€§ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥é€‰æ‹© copy æˆ–è€… strong æ¥ä½œä¸ºé›†åˆæ•°æ®çš„ä¿®é¥°è¯­å‘¢ï¼Ÿ æ ¹æ®ä¸Šé¢ç¤ºä¾‹åˆ†æžç»“æžœå¯ä»¥çœ‹å‡ºï¼Œåœ¨å±žæ€§ä¸­ï¼Œå¦‚æžœä½¿ç”¨ strong ä¿®é¥°ä¸å¯å˜æ•°ç»„ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­(è¢«å¯å˜æ•°ç»„èµ‹å€¼)è¯¥ä¸å¯å˜æ•°ç»„æœ‰å¯èƒ½ä¼šå˜ä¸ºå¯å˜æ•°ç»„ã€‚å¦‚æžœä½¿ç”¨ copy ä¿®é¥°å¯å˜æ•°ç»„ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ˆè¢«ä¸å¯å˜æ•°ç»„èµ‹å€¼ï¼‰è¯¥å¯å˜æ•°ç»„æœ‰å¯èƒ½å˜ä¸ºä¸å¯å˜æ•°ç»„ã€‚ å°ç»“ 3ï¼š å½“ä¿®é¥°å¯å˜ç±»åž‹çš„å±žæ€§æ—¶ï¼Œå¦‚ NSMutableArrayã€NSMutableDictionaryã€NSMutableSet ç­‰é›†åˆç±»åž‹æ—¶ï¼Œç”¨ strong ä¿®é¥°ã€‚ å½“ä¿®é¥°ä¸å¯å˜ç±»åž‹çš„å±žæ€§æ—¶ï¼Œå¦‚ NSArrayã€NSDictionaryã€NSSet ç­‰é›†åˆç±»åž‹æ—¶ï¼Œç”¨ copy ä¿®é¥°ã€‚ å¤§å®¶å¦‚æžœæœ‰å…´è¶£å¯ä»¥å‚è€ƒæ–‡ç«  NSString NSMutableString å¯å˜ä¸Žä¸å¯å˜çš„é‚£äº›äº‹å„¿ çš„åšæ³•æ¥éªŒè¯ä¸Šé¢çš„ç†è®ºçŸ¥è¯†ã€‚ å®žé™…æ¡ˆä¾‹åˆ†æžå†ç»™å¤§å®¶ä¸¾ä¸ªå®žé™…çš„å¼€å‘æ¡ˆä¾‹ï¼Œæˆ‘ä»¬éœ€è¦å®šæ—¶ä¸ŠæŠ¥ç›®é‡‡é›†APPçš„æ•°æ®ï¼Œè¿™ä¸ªéœ€æ±‚çœ‹èµ·æ¥æ˜¯æ²¡æœ‰ä»»ä½•éš¾åº¦çš„ã€‚ æˆ‘ä»¬ä½¿ç”¨ä»£ç æ¥æ¨¡æ‹Ÿä¸€ä¸‹ä¸ŠæŠ¥æ•°æ®çš„è¿™ä¸ªè¿‡ç¨‹ã€‚ 1234567// é‡‡é›†åˆ°çš„æ•°æ®NSMutableDictionary *tDatas = [NSMutableDictionary dictionaryWithCapacity:5];[tDatas setObject:@"https://" forKey:@"req_m"];NSLog(@"--é‡‡é›†æ•°æ®--- tDatas addr: %p, tDatas: %@", tDatas, tDatas);// å¼€å§‹å‘é€[self sendDatas:tDatas];NSLog(@"--ä¸ŠæŠ¥å®Œæˆï¼ŒåŽŸæ•°æ®--- tDatas addr: %p, tDatas: %@", tDatas, tDatas); å‘é€æ•°æ®çš„æ¨¡æ‹Ÿç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011- (void)sendDatas:(NSDictionary *)datas&#123; NSLog(@"--ä¸ŠæŠ¥ä¸­--- datas addr: %p, datas: %@", datas, datas); /** ä¸‹é¢ä¸¤è¡Œä»£ç åªæ˜¯ä¸ºäº†æ¨¡æ‹ŸåŽŸæ•°æ®è¢«å¤–ç•Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«æ”¹å˜ï¼Œæ¯”å¦‚å…¶ä»–é‡‡é›†çº¿ç¨‹æ”¹å˜äº†å®ƒ */ if ([datas isKindOfClass:[NSMutableDictionary class]]) &#123; [(NSMutableDictionary *)datas setObject:@"veryitman.com" forKey:@"test_m"]; &#125; NSLog(@"--ä¸ŠæŠ¥å®Œæˆ--- datas addr: %p, datas: %@", datas, datas);&#125; æ ¹æ®ä¸Šé¢ä¾‹å­3æåˆ°çš„ï¼Œä¸å¯å˜å‘å¯å˜ç­‰å·èµ‹å€¼æ—¶ï¼ŒåŽŸä¸å¯å˜å¯¹è±¡ä¼šå˜æˆå¯å˜å¯¹è±¡ã€‚ æŽ§åˆ¶å°è¾“å‡ºæ—¥å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617--é‡‡é›†æ•°æ®--- tDatas addr: 0x600000b788e0, tDatas: &#123; req_m = https://;&#125;--ä¸ŠæŠ¥ä¸­--- datas addr: 0x600000b788e0, datas: &#123; req_m = https://;&#125;--ä¸ŠæŠ¥å®Œæˆ--- datas addr: 0x600000b788e0, datas: &#123; req_m = https://; test_m = veryitman.com;&#125;--ä¸ŠæŠ¥å®Œæˆï¼ŒåŽŸæ•°æ®--- tDatas addr: 0x600000b788e0, tDatas: &#123; req_m = https://; test_m = veryitman.com;&#125; ä¸‹é¢ä»£ç çš„ä»£ç ï¼Œæˆ‘æ˜¯ä¸ºäº†æ¨¡æ‹ŸåŽŸæ•°æ®è¢«å…¶ä»–ä»£ç æ”¹å˜äº†çš„æƒ…å†µï¼Œåªæ˜¯ä¸ºäº†è¯´æ˜Žï¼Œä¸å¯å˜å¯¹è±¡å®¹æ˜“è¢«å¤–ç•Œå½±å“å’Œæ”¹å˜ã€‚ 1234/** ä¸‹é¢ä¸¤è¡Œä»£ç åªæ˜¯ä¸ºäº†æ¨¡æ‹ŸåŽŸæ•°æ®è¢«å¤–ç•Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«æ”¹å˜ï¼Œæ¯”å¦‚å…¶ä»–é‡‡é›†çº¿ç¨‹æ”¹å˜äº†å®ƒ */if ([datas isKindOfClass:[NSMutableDictionary class]]) &#123; [(NSMutableDictionary *)datas setObject:@"veryitman.com" forKey:@"test_m"];&#125; ä¸Šé¢çš„æ€»ç»“åˆæåˆ°æ— è®ºæ˜¯å¯å˜å¯¹è±¡è¿˜æ˜¯ä¸å¯å˜å¯¹è±¡ç»è¿‡ copy ä¹‹åŽéƒ½æ˜¯ä¸å¯å˜å¯¹è±¡çš„åŽŸç†ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314- (void)sendDatas:(NSDictionary *)datas&#123; NSDictionary *copy_datas = [datas copy]; NSLog(@"--ä¸ŠæŠ¥ä¸­--- copy_datas addr: %p, copy_datas: %@", copy_datas, copy_datas); if ([copy_datas isKindOfClass:[NSMutableDictionary class]]) &#123; [(NSMutableDictionary *)copy_datas setObject:@"veryitman.com" forKey:@"test_m"]; &#125; else &#123; NSLog(@"Yes, copy_datas æ˜¯ä¸å¯å˜å­—å…¸ã€‚"); &#125; NSLog(@"--ä¸ŠæŠ¥å®Œæˆ--- copy_datas addr: %p, copy_datas: %@", copy_datas, copy_datas);&#125; è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š 1234567891011121314151617 --é‡‡é›†æ•°æ®--- tDatas addr: 0x600003b08740, tDatas: &#123; req_m = https://;&#125;--ä¸ŠæŠ¥ä¸­--- copy_datas addr: 0x600003b08700, copy_datas: &#123; req_m = https://;&#125;Yes, copy_datas æ˜¯ä¸å¯å˜å­—å…¸ã€‚--ä¸ŠæŠ¥å®Œæˆ--- copy_datas addr: 0x600003b08700, copy_datas: &#123; req_m = https://;&#125;--ä¸ŠæŠ¥å®Œæˆï¼ŒåŽŸæ•°æ®--- tDatas addr: 0x600003b08740, tDatas: &#123; req_m = https://;&#125; æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS é›†åˆå¯¹è±¡ å¯å˜ ä¸å¯å˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macOSä¸‹ç”Ÿæˆå­—ç¬¦ä¸²md5]]></title>
    <url>%2F2019%2F01%2F13%2FmacOS%E4%B8%8B%E7%94%9F%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2md5%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ åœ¨ macOS ç³»ç»Ÿä¸‹ç”Ÿæˆä»»æ„å­—ç¬¦ä¸²çš„ md5 å€¼ï¼Œå¾ˆç®€å•ï¼Œç›´æŽ¥ä½¿ç”¨ md5 å‘½ä»¤å³å¯ã€‚ ä¾‹å¦‚ï¼Œè¦ç”Ÿæˆ veryitman.com è¿™ä¸ªå­—ç¬¦ä¸²çš„md5å€¼ï¼Œç›´æŽ¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1md5 -s veryitman.com å¯¹åº”ç”Ÿæˆçš„ç»“æžœå¦‚ä¸‹ï¼š 1MD5 (&quot;veryitman.com&quot;) = c5c401dcdacd95052eef360c3533a8bd è¿™é‡Œè¦æ³¨æ„ï¼Œæœ‰äº›ä½¿ç”¨è€…ä¼šè¿™æ ·æ¥è®¡ç®—ï¼š 1echo &quot;veryitman.com&quot; | md5 ç”Ÿæˆç»“æžœå¦‚ä¸‹ï¼š 1bc239ea4ba4ebbd4ef9e61c160fcac3c å‘çŽ°å’Œä¸Šé¢çš„ç»“æžœä¸ä¸€è‡´ï¼Œè¿™æ˜¯å› ä¸º echo é»˜è®¤ä¼šæ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œå¯¼è‡´è®¡ç®—çš„md5å€¼ä¸ä¸€è‡´ï¼Œä¿®æ”¹ä¸€ä¸‹ï¼š 1echo -n &quot;veryitman.com&quot; | md5 ç”Ÿæˆç»“æžœ c5c401dcdacd95052eef360c3533a8bd ä¸Žä¸Šé¢ä¸€è‡´äº†ã€‚ æ³¨æ„ï¼š echo -n ç”¨æ¥ä¸æ˜¾ç¤ºç»“å°¾çš„æ¢è¡Œç¬¦ã€‚ æ›´å¤šå…³äºŽ md5 çš„å‘½ä»¤ å¯ä»¥é—®ç”·äºº(man)ï¼Œå¦‚ä¸‹ï¼š 1man md5 MD5(Message-Digest Algorithm 5) å…¨ç§°æ˜¯æŠ¥æ–‡æ‘˜è¦ç®—æ³•ï¼Œæ­¤ç®—æ³•å¯¹ä»»æ„é•¿åº¦çš„ä¿¡æ¯é€ä½è¿›è¡Œè®¡ç®—ï¼Œäº§ç”Ÿä¸€ä¸ªäºŒè¿›åˆ¶é•¿åº¦ä¸º128ä½ï¼ˆåå…­è¿›åˆ¶é•¿åº¦å°±æ˜¯32ä½ï¼‰çš„â€œæŒ‡çº¹â€ï¼ˆæˆ–ç§°â€œæŠ¥æ–‡æ‘˜è¦â€ï¼‰ï¼Œä¸åŒçš„æ–‡ä»¶ä¹Ÿèƒ½äº§ç”Ÿç›¸åŒçš„æŠ¥æ–‡æ‘˜è¦ï¼Œä½†æ˜¯å¯èƒ½æ€§æ˜¯æžå…¶å°çš„ã€‚ MD5 ç®—æ³• å¸¸å¸¸è¢«ç”¨æ¥éªŒè¯ç½‘ç»œæ–‡ä»¶ä¼ è¾“çš„å®Œæ•´æ€§ï¼Œé˜²æ­¢æ–‡ä»¶è¢«äººç¯¡æ”¹ï¼Œä½†æ˜¯çŽ°åœ¨ MD5 çš„ç®—æ³•å¹¶ä¸å®‰å…¨äº†ã€‚ åœ¨ macOS ä¸Šé¢è¿˜æœ‰ md5sum è¿™ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬ç”¨æ¥è®¡ç®—æ–‡ä»¶çš„md5å€¼ã€‚ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>macOS string md5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä¸­å¦‚ä½•ä½¿ç”¨å¯¹è±¡çš„å¼±å¼•ç”¨]]></title>
    <url>%2F2019%2F01%2F06%2FiOS-%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%B1%E5%BC%95%E7%94%A8%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹æˆ‘ä»¬éƒ½çŸ¥é“ä½¿ç”¨ UIImage imageNamed åˆ›å»ºçš„ UIImage å¯¹è±¡ä¼šè¢«æŒæœ‰(å¼ºå¼•ç”¨)ï¼Œå¦‚æžœå›¾ç‰‡å¤ªå¤§ä¼šå ç”¨å†…å­˜ï¼ŒæŸè€— APP çš„æ€§èƒ½ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œå¦‚æžœèƒ½æ”¹é€ å¯¹å…¶çš„å¼ºå¼•ç”¨å˜ä¸ºå¼±å¼•ç”¨å°±å¯ä»¥è§£å†³é—®é¢˜ã€‚ æˆ‘ä»¬å¯èƒ½ä¼šæœ‰ç±»ä¼¼ä¸Šé¢çš„åœºæ™¯ï¼Œæœ‰äº›å¯¹è±¡æš‚æ—¶ä¿å­˜èµ·æ¥ï¼Œå¯èƒ½åŽé¢ä¼šç”¨åˆ°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸ä¼šä½¿ç”¨ï¼Œä½†æ˜¯åˆä¸æƒ³åŽ»ç®¡ç†å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚æžœå®ƒä»¬èƒ½å¤Ÿè‡ªå·±è¢«é”€æ¯å°±å¾ˆçœäº‹ï¼Œä¸éœ€è¦åŽ»å…³å¿ƒè¿™äº›å¯¹è±¡åˆ°åº•è€—è´¹äº†å¤šå°‘å†…å­˜ã€‚ ä»Šå¤©è·Ÿå¤§å®¶èŠèŠå¦‚ä½•åœ¨ iOS å¼€å‘ä¸­ä¿æŒå¯¹å¯¹è±¡çš„å¼±å¼•ç”¨è€Œä¸æ˜¯å¼ºå¼•ç”¨ï¼Œå¸Œæœ›çœ‹å®Œä¹‹åŽï¼Œèƒ½å¸®åŠ©åˆ°å¤§å®¶åŽ»è§£å†³å®žé™…é—®é¢˜ã€‚ NSObject retainCountåœ¨ iOS ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å°±ä¼šåŠ 1ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 12NSObject *obj = [NSObject alloc] init];NSLog(@"obj retain count: %zd", [obj retainCount]); ä¸Šé¢çš„ä¾‹å­è¾“å‡ºæ˜¯1ï¼Œå½“ç„¶åœ¨ ARC ä¸‹æ˜¯æ— æ³•ä½¿ç”¨ retainCount è¿™ä¸ªæ–¹æ³•çš„ï¼Œåªæœ‰åœ¨éž ARC æ¡ä»¶ä¸‹æ‰å¯ä»¥ï¼Œå¦‚æžœè¦è¿è¡Œä¸Šé¢çš„ä¾‹å­ï¼Œå¯¹åº”çš„æ–‡ä»¶éœ€è¦è®¾ç½®ä¸º -fno-objc-arc. 1- (NSUInteger)retainCount OBJC_ARC_UNAVAILABLE; å¯ä»¥åœ¨ usr/include/objc/NSObject.h ä¸­æŸ¥çœ‹ï¼ŒretainCount æ˜¯ NSObject åè®®ï¼ˆ@protocol NSObjectï¼‰ä¸­å®šä¹‰çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œ NSObject ç±»æ˜¯å®žçŽ°äº†è¯¥åè®®çš„ï¼Œå¦‚ä¸‹ï¼š 1@interface NSObject &lt;NSObject&gt; æ‰€ä»¥ï¼Œä»»ä½•OCå¯¹è±¡éƒ½å…·æœ‰ retainCount æ–¹æ³•ã€‚å¦å¤–ï¼Œä½ æ·»åŠ ä¸€ä¸ªè§†å›¾ï¼Œè§†å›¾å…¶å®žä¹Ÿæ˜¯è¢«å®¹å™¨å¼•ç”¨äº†ï¼Œå…¶è®¡æ•°ä¹Ÿä¼šåŠ 1è¢«å®¹å™¨æŒæœ‰å…¶å¼ºå¼•ç”¨ï¼Œå†ä¾‹å¦‚åœ¨æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šä½¿å¯¹è±¡çš„å¼•ç”¨è®¡æ•°åŠ 1ï¼Œè¢«æ•°ç»„æ‰€æŒæœ‰ã€‚ NSValue valueWithNonretainedObjectåœ¨ iOS ä¸­ï¼ŒNSValue çš„ç±»æ–¹æ³• valueWithNonretainedObject å¯ä»¥ä¿æŒå¯¹å¯¹è±¡çš„å¼±å¼•ç”¨ã€‚ 1+ (NSValue *)valueWithNonretainedObject:(nullable id)anObject; This method is useful if you want to add an object to a Collection but donâ€™t want the collection to create a strong reference to it. å¤§æ¦‚æ„æ€æ˜¯ï¼Œè¯¥æ–¹æ³•å¯ä»¥ä¸æŒæœ‰å¯¹è±¡çš„å¼ºå¼•ç”¨ï¼Œæ¢å¥è¯è¯´ï¼ŒåªæŒæœ‰å¯¹è±¡çš„å¼±å¼•ç”¨ã€‚ ä¸¾ä¸ªæ —å­~ MZDog.h 123@interface MZDog : NSObject@end MZDog.m 12345678910#import "MZDog.h"@implementation MZDog- (NSString *)description&#123; return [NSString stringWithFormat:@"MZDog-obj retain count: %zd", [self retainCount]];&#125;@end è¿™é‡Œ MZDog æ˜¯è®¾ç½®äº†éž ARC çš„ï¼Œå¦‚å›¾ï¼š åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ä½¿ç”¨ MZDogï¼Œå¦‚ä¸‹ï¼š 123456789101112131415// retainCount -&gt; 1MZDog *dog = [MZDog new];NSLog(@"dog: %@", dog); // å¯¹ dog ä½¿ç”¨å¼±å¼•ç”¨ï¼Œæ­¤æ—¶å…¶å¼•ç”¨è®¡æ•°è¿˜æ˜¯1NSValue *value = [NSValue valueWithNonretainedObject:dog];NSLog(@"dog: %@, value: %@", dog, value); // èŽ·å– value å¯¹åº”çš„å¯¹è±¡id obj = value.nonretainedObjectValue;NSLog(@"obj isKindOfClass MZDog: %i", [obj isKindOfClass:[MZDog class]]);if (obj == dog) &#123; NSLog(@"The obj is same dog object.");&#125; å¯¹åº”çš„æŽ§åˆ¶å°è¾“å‡ºï¼Œå¦‚ä¸‹ï¼š 1234dog: MZDog-obj retain count: 1dog: MZDog-obj retain count: 1, value: &lt;308cf600 00600000&gt;obj isKindOfClass MZDog: 1The obj is same dog object. ä»Žä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼ŒvalueWithNonretainedObject å¯¹ MZDog å¯¹è±¡ dog æ˜¯æ²¡æœ‰å¼ºåº”ç”¨çš„ã€‚ä¿®æ”¹ä»£ç ï¼Œç¤ºä¾‹ä¸€ä¸‹ï¼š 123456789101112// retainCount -&gt; 1MZDog *dog = [MZDog new];NSLog(@"dog: %@", dog); // å¯¹ dog ä½¿ç”¨å¼±å¼•ç”¨ï¼Œæ­¤æ—¶å…¶å¼•ç”¨è®¡æ•°è¿˜æ˜¯1NSValue *value = [NSValue valueWithNonretainedObject:dog];NSLog(@"dog: %@, value: %@", dog, value); // ç»è¿‡NSValueåŒ…è£…åŽï¼Œå¯ä»¥æ”¾åˆ°å¯¹åº”çš„é›†åˆå¯¹è±¡(å¦‚æ•°ç»„ï¼Œå­—å…¸ç­‰)ä¸­ï¼Œè¿™æ ·è¿™äº›é›†åˆå°±ä¸ä¼šå¯¹ dog è¿›è¡Œå¼ºå¼•ç”¨äº†NSArray *array = [NSArray arrayWithObjects:value, nil];// dog çš„å¼•ç”¨è®¡æ•°è¿˜æ˜¯1NSLog(@"dog: %@, array: %@", dog, array); å¯¹åº”çš„è¾“å‡ºæ—¥å¿—ï¼š 123dog: MZDog-obj retain count: 1dog: MZDog-obj retain count: 1, value: &lt;40b7a401 00600000&gt;dog: MZDog-obj retain count: 1, array: ("&lt;40b7a401 00600000&gt;") æ–¹æ³• valueWithNonretainedObject ç­‰åŒäºŽ 1NSValue *theValue = [NSValue value:&amp;anObject withObjCType:@encode(void *)]; ä¸Šé¢çš„ç¤ºä¾‹ï¼Œå¯ä»¥æ”¹å†™ä¸€ä¸‹ï¼š 123456789101112// retainCount -&gt; 1MZDog *dog = [MZDog new];NSLog(@"dog: %@", dog); // å¯¹ dog ä½¿ç”¨å¼±å¼•ç”¨ï¼Œæ­¤æ—¶å…¶å¼•ç”¨è®¡æ•°è¿˜æ˜¯1NSValue *value = [NSValue value:&amp;dog withObjCType:@encode(void *)];NSLog(@"dog: %@, value: %@", dog, value);// ç»è¿‡NSValueåŒ…è£…åŽï¼Œå¯ä»¥æ”¾åˆ°å¯¹åº”çš„é›†åˆå¯¹è±¡(å¦‚æ•°ç»„ï¼Œå­—å…¸ç­‰)ä¸­ï¼Œè¿™æ ·è¿™äº›é›†åˆå°±ä¸ä¼šå¯¹ dog è¿›è¡Œå¼ºå¼•ç”¨äº†NSArray *array = [NSArray arrayWithObjects:value, nil];// dog çš„å¼•ç”¨è®¡æ•°è¿˜æ˜¯1NSLog(@"dog: %@, array: %@", dog, array); è¾“å‡ºæ—¥å¿—ï¼š 123dog: MZDog-obj retain count: 1dog: MZDog-obj retain count: 1, value: &lt;40568a02 00600000&gt;dog: MZDog-obj retain count: 1, array: ("&lt;40568a02 00600000&gt;") æ­¤æ—¶ dog çš„å¼•ç”¨è®¡æ•°è¿˜æ˜¯æ²¡æœ‰å¢žåŠ ~ è‡ªå†™å¼±å¼•ç”¨çš„é›†åˆåˆ†ç±»æ ¹æ®ä¸Šé¢çš„ç†è®ºçŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ NSValue å†™å‡ºå¼±å¼•ç”¨çš„é›†åˆå¯¹è±¡ï¼Œæ€è·¯å¾ˆç®€å•ï¼Œåˆ›å»ºé›†åˆç±»çš„åˆ†ç±»ï¼Œç„¶åŽä½¿ç”¨ NSValue æ¥è¿›è¡ŒåŒ…è£…ã€‚çœ‹ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å³å¯ã€‚ NSArray+MZWeak.h 1234567891011@interface NSArray (MZWeak)- (id)mz_weak_objectAtIndex:(NSUInteger)index;@end@interface NSMutableArray (MZWeak)- (void)mz_weak_addObject:(id)obj;@end NSArray+MZWeak.m 123456789101112131415161718192021222324#import "NSArray+MZWeak.h"@implementation NSArray (MZWeak)- (id)mz_weak_objectAtIndex:(NSUInteger)index&#123; NSValue *value = [self objectAtIndex:index]; return value.nonretainedObjectValue;&#125;@end@implementation NSMutableArray (MZWeak)- (void)mz_weak_addObject:(id)obj&#123; NSValue *value = [NSValue valueWithNonretainedObject:obj]; if (nil != value) &#123; [self addObject:value]; &#125;&#125;@end åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910// retainCount -&gt; 1MZDog *dog = [MZDog new];NSLog(@"dog: %@", dog); NSMutableArray *array = [NSMutableArray arrayWithCapacity:1];// å¼±å¼•ç”¨[array mz_weak_addObject:dog]; // æ­¤æ—¶ dog çš„å¼•ç”¨è®¡æ•°è¿˜æ˜¯1NSLog(@"dog: %@", dog); ä¾æ¬¡ç±»æŽ¨ï¼Œå¯¹äºŽå…¶ä»–é›†åˆç±» NSDictionaryã€NSSet éƒ½å¯ä»¥å®žçŽ°ã€‚å½“ç„¶å®žçŽ°æ–¹å¼ä¸æ­¢è¿™ä¸€ç§ï¼Œè¿™é‡Œåªæ˜¯ä¸¾äº†ä¸€ä¸ª NSValue åŒ…è£…å¯¹è±¡æ¥å®žçŽ°çš„ä¾‹å­ã€‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ NSProxy æˆ–è€… block æ¥è§£é™¤å¯¹å¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚å…³äºŽ block çš„è§£é™¤æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒå¼€æºé¡¹ç›® HXImageï¼Œå¦å¤–å¼€æºé¡¹ç›® YYWeakProxy é‡Œé¢ä½¿ç”¨äº† NSProxy æ¥è§£é™¤å¼ºå¼•ç”¨ã€‚ é‚£ä¹ˆï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„æ–¹æ³•ï¼Œç³»ç»Ÿç±»åº“ä¸­æœ‰æ²¡æœ‰çŽ°æˆçš„ç±»å‘¢ï¼Ÿèªæ˜Žçš„ä½ ä¸€å®šçŒœåˆ°äº†ï¼Œä¸€å®šæœ‰ï¼ æ˜¯çš„ï¼Œå¾€ä¸‹çœ‹ã€‚ã€‚ã€‚ NSPointerArrayã€NSMapTableã€NSHashTableé›†åˆç±» NSArrayã€NSDictionary å’Œ NSSet ä»¥åŠå…¶å¯¹åº”çš„å¯å˜ç‰ˆæœ¬ï¼Œéƒ½å¯ä»¥ç”¨æ¥å­˜å‚¨ OCå¯¹è±¡çš„, ä½†æ˜¯å¯¹å…¶ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼ºå¼•ç”¨çš„ã€‚ ä»Ž iOS6.0 ç‰ˆæœ¬åŠä»¥åŽçš„ç‰ˆæœ¬ä¸­ï¼Œç³»ç»Ÿç»™æˆ‘ä»¬æä¾›äº† NSPointerArrayã€NSMapTable å’Œ NSHashTable åˆ†åˆ«å¯¹åº” NSArrayã€NSDictionary å’Œ NSSetï¼Œæœ€å¤§çš„ä¸åŒå°±æ˜¯ï¼ŒNSPointerArrayã€NSMapTable å’Œ NSHashTable å¯¹å¯¹è±¡æ˜¯å¼±å¼•ç”¨è€Œä¸æ˜¯å¼ºå¼•ç”¨ã€‚ çŽ°åœ¨å¤§éƒ¨åˆ†çš„ iOS APP æˆ–è€… iOS æ¸¸æˆåº”è¯¥éƒ½è‡³å°‘åœ¨ iOS7 ä»¥ä¸Šäº†å§ï¼Œæ‰€ä»¥å¯ä»¥å°½æƒ…ä½¿ç”¨è¿™äº›ç³»ç»Ÿæä¾›çš„ç±»åº“äº†ã€‚ ä½¿ç”¨ NSPointerArray ä¿å­˜å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢ä¸‰ç§æ–¹å¼æ¥åˆ›å»º NSPointerArray å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š 12345678// åˆ›å»º NSPointerArray å¯¹è±¡æ–¹å¼ä¸€NSPointerArray *pointerArray = [NSPointerArray weakObjectsPointerArray]; // åˆ›å»º NSPointerArray å¯¹è±¡æ–¹å¼äºŒNSPointerArray *pointerArray1 = [[NSPointerArray alloc] initWithOptions:NSPointerFunctionsWeakMemory]; // åˆ›å»º NSPointerArray å¯¹è±¡æ–¹å¼ä¸‰NSPointerArray *pointerArray2 = [NSPointerArray pointerArrayWithOptions:NSPointerFunctionsWeakMemory]; é‚£ä¹ˆä¸‹é¢è¿˜æ˜¯ä»¥ MZDog æ¥ä¸¾ä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819// retainCount -&gt; 1MZDog *dog = [MZDog new];NSLog(@"dog: %@", dog); // åˆ›å»º NSPointerArray å¯¹è±¡æ–¹å¼ä¸€// æ³¨æ„ weakObjectsPointerArray è€Œä¸æ˜¯ strongObjectsPointerArrayNSPointerArray *pointerArray = [NSPointerArray weakObjectsPointerArray];[pointerArray addPointer:(__bridge void *)(dog)]; // åˆ›å»º NSPointerArray å¯¹è±¡æ–¹å¼äºŒNSPointerArray *pointerArray1 = [[NSPointerArray alloc] initWithOptions:NSPointerFunctionsWeakMemory];[pointerArray1 addPointer:(__bridge void *)(dog)]; // åˆ›å»º NSPointerArray å¯¹è±¡æ–¹å¼ä¸‰NSPointerArray *pointerArray2 = [NSPointerArray pointerArrayWithOptions:NSPointerFunctionsWeakMemory];[pointerArray2 addPointer:(__bridge void *)(dog)]; // dog å¼•ç”¨è®¡æ•°è¿˜æ˜¯1NSLog(@"dog: %@", dog); å¯¹åº”çš„è¾“å‡º dog å¯¹è±¡çš„ retainCount ä»ç„¶æ˜¯ 1ï¼Œå…¶å¼•ç”¨è®¡æ•°æ²¡æœ‰å¢žåŠ ã€‚ å¯¹åº” NSMapTable å’Œ NSHashTable çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š NSMapTable ç¤ºä¾‹ 12345678910// retainCount -&gt; 1MZDog *dog = [MZDog new];NSLog(@"dog: %@", dog); // å¼±åº”ç”¨å¯¹è±¡NSMapTable *map = [NSMapTable weakToWeakObjectsMapTable];[map setObject:dog forKey:@"first"]; // å¼•ç”¨è®¡æ•°è¿˜æ˜¯1ï¼Œæ²¡å˜NSLog(@"dog: %@", dog); NSHashTable ç¤ºä¾‹ 12345678910// retainCount -&gt; 1MZDog *dog = [MZDog new];NSLog(@"dog: %@", dog); // å¼±åº”ç”¨å¯¹è±¡NSHashTable *hashTable = [NSHashTable weakObjectsHashTable];[hashTable addObject:dog]; // å¼•ç”¨è®¡æ•°è¿˜æ˜¯1ï¼Œæ²¡å˜NSLog(@"dog: %@", dog); NSPointerArray ä¸Ž NULLåœ¨ NSMutableArray ä¸­æ·»åŠ çš„å¯¹è±¡ä¸å¯ä»¥æ˜¯ nilï¼Œè€Œ NSPointerArray ä¸­å´å¯å­˜å‚¨ NULL(nil ç»è¿‡è½¬æ¢å¾—åˆ°CæŒ‡é’ˆä¸º NULL)ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å­˜å‚¨weakå¯¹è±¡ã€‚weakç±»åž‹çš„å¯¹è±¡é‡Šæ”¾ä¹‹åŽï¼ŒNSPointerArray çš„å¯¹åº”ä½ç½®ä¼šè‡ªåŠ¨å˜æˆ NULLï¼Œä½¿ç”¨count å±žæ€§, ä¼šå°† NULL å…ƒç´ ä¹Ÿè®¡ç®—è¿›æ¥ï¼Œå³ NULL ç®—æ˜¯å®ƒçš„ä¸€å‘˜ã€‚ä¸‹é¢ç¤ºä¾‹å¯ä»¥è¯æ˜Žï¼Œå¦‚ä¸‹ï¼š 123456789101112MZDog *dog = nil; NSPointerArray *pointerArray = [NSPointerArray weakObjectsPointerArray];void *cobj = (__bridge void *)(dog);NSLog(@"obj: %@", cobj); //NULL[pointerArray addPointer:cobj];// è™½ç„¶å­˜å‚¨çš„æ˜¯ NULLï¼Œä½†æ˜¯ count ä»ç„¶æ˜¯ 1NSLog(@"pointerArray count: %zd", [pointerArray count]);NSArray *array = [pointerArray allObjects];NSLog(@"pointerArray allObjects: %@", array); ä¸€èˆ¬è¿™æ ·åˆ é™¤ NSPointerArray ä¸­çš„ NULL å…ƒç´ ï¼Œå¦‚ä¸‹ï¼š 12[pointerArray addPointer:NULL];[pointerArray compact]; è¿™é‡Œè¦æ³¨æ„ï¼Œå°†OCå¯¹è±¡è½¬æ¢ä¸ºCæŒ‡é’ˆè¦ä½¿ç”¨ (__bridge void *) è¿™ç§æ–¹å¼ï¼Œä¸è¦ä½¿ç”¨ (__bridge_retained void *) æˆ–è€… CFBridgingRetainï¼Œè¿™äºŒè€…ä¼šå¯¹ dog å¯¹è±¡è¿›è¡Œå¼ºå¼•ç”¨ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š 12345678910// retainCount -&gt; 1MZDog *dog = [MZDog new];NSPointerArray *pointerArray = [NSPointerArray weakObjectsPointerArray];// è¿™é‡Œä¼š retain dog å¯¹è±¡ï¼Œä½¿å…¶å¼•ç”¨è®¡æ•°åŠ 1ï¼Œæ­¤æ—¶retainCount æ˜¯ 2[pointerArray addPointer:(__bridge_retained void *)dog];// è¿™é‡Œä¼š retain dog å¯¹è±¡ï¼Œä½¿å…¶å¼•ç”¨è®¡æ•°å†åŠ 1ï¼ŒretainCount æ˜¯ 3[pointerArray addPointer:CFBridgingRetain(dog)]; // æ­¤æ—¶çš„ retainCount æ˜¯ 3NSLog(@"dog: %@", dog); å¦‚æžœä½ å¯¹ (__bridge_retained void *) æˆ–è€… CFBridgingRetain æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹ C æŒ‡é’ˆä¸Ž OC å¯¹è±¡ä¹‹é—´çš„è½¬æ¢ è¿™ç¯‡æ–‡ç« ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>weak strong NSPointerArray</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018ï¼Œä¸ä¼šé‡æ¥]]></title>
    <url>%2F2018%2F12%2F31%2F2018%EF%BC%8C%E4%B8%8D%E4%BC%9A%E9%87%8D%E6%9D%A5%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ˜¯2018å¹´çš„æœ€åŽä¸€å¤©ï¼Œå³2018å¹´12æœˆ31æ—¥ã€‚æå‰ç¥æ„¿æ‰€æœ‰äºº2019èº«ä½“å¥åº·ï¼Œä¸‡äº‹å¦‚æ„ï¼Œé˜–å®¶å¹¸ç¦ï¼ è¿™ç¯‡æ–‡ç«  å†è§ 2016 æ˜¯åœ¨2016å¹´æœ«å†™çš„ï¼Œç®—æ˜¯ä¸€ä¸ªhinéšå¿ƒçš„å°ç»“ã€‚æ¯”è¾ƒé—æ†¾çš„æ˜¯åœ¨2017å¹´æ²¡æœ‰ç»™è‡ªå·±å†™ä¸ªæ€»ç»“ï¼Œæ‰€ä»¥ï¼Œä¸èƒ½å†é”™è¿‡2018äº†ï¼Œæˆ‘æ€•è€äº†æ²¡æœ‰å¯ä»¥å¯»è¿¹çš„å›žå¿†ï¼ 2018 æœ‰å¤ªå¤šéœ€è¦æ„Ÿè°¢çš„äººäº†ï¼Œæ„Ÿè°¢æ‰€æœ‰å·¥ä½œä¸Šï¼Œç”Ÿæ´»ä¸Šå…³å¿ƒã€æ”¯æŒå’Œé¼“åŠ±æˆ‘çš„äººä»¬ï¼Œæ„Ÿè°¢æˆ‘çš„å®¶äººç»™äºˆäº†æˆ‘å¤ªå¤šçš„ç†è§£å’ŒåŒ…å®¹ï¼Œéžå¸¸æ„Ÿè°¢ä½ ä»¬ï¼ å·¥ä½œ2018å¹´æˆ‘çš„èŒä¸šæ²¡æœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œä»ç„¶æ˜¯å¥‹æ–—åœ¨ä¸€çº¿å·¥ä½œå²—ä½ä¸Šçš„ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæˆ‘å–œæ¬¢è¿™ä»½èŒä¸šï¼Œå®ƒæ²¡æœ‰è¿‡å¤šçš„çº·äº‰ï¼Œå·¥ç¨‹å¸ˆä¹‹é—´çš„æ²Ÿé€šç®€å•ã€ç›´æŽ¥ï¼ å”¯ä¸€å’Œä»¥å‰ä¸åŒçš„æ˜¯è‡ªå·±å¼€å§‹è´Ÿè´£ä¸€ä¸ªå›¢é˜Ÿäº†ï¼Œè´£ä»»æ¯”ä»¥å‰è¦å¤§äº†å¾ˆå¤šï¼ŒåŽ‹åŠ›ä¹Ÿéšä¹‹å‰§å¢žã€‚æ…¢æ…¢åœ°ï¼Œå†™ä»£ç å˜æˆäº†å¯æœ›ä¸å¯æ±‚çš„äº‹æƒ…äº†ï¼Œå› ä¸ºä½ è¦å¤„ç†æ¯”å†™ä»£ç æ›´é‡è¦çš„äº‹æƒ…ï¼Œæ¯”å¦‚å›¢é˜Ÿçš„ç£¨åˆï¼Œç›®æ ‡çš„åˆ¶å®šï¼Œä»»åŠ¡çš„è§„åˆ’ç­‰ç­‰ä¸€ç³»åˆ—å·¥ä½œã€‚ åœ¨ ã€Šèš‚èšé‡‘æœï¼šç§‘æŠ€é‡‘èžç‹¬è§’å…½çš„å´›èµ·ã€‹ è¿™æœ¬ä¹¦é‡Œè®²åˆ°è¿‡ï¼š ä½œä¸ºé¢†å¯¼ï¼Œå›¢é˜Ÿé‡Œæ¯ä¸€ä¸ªäººçš„é”™è¯¯éƒ½æ˜¯è‡ªå·±çš„é”™è¯¯ï¼Œä½†å›¢é˜Ÿé‡Œæ¯ä¸€ä¸ªäººçš„æˆæžœæœªå¿…æ˜¯è‡ªå·±çš„æˆæžœï¼Œè¿™æ—¶æ•´ä¸ªäººçš„å¿ƒæ€å°±éœ€è¦é‡æ–°è°ƒæ•´ã€‚ æˆ‘ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¹¸è¿çš„äººï¼Œå› ä¸ºå›¢é˜Ÿä¸­æœ‰å¾ˆå¤šæ¯”è‡ªå·±æ›´ä¼˜ç§€çš„äººï¼Œä»–ä»¬æœ‰æƒ³æ³•ï¼Œæœ‰æ‰§è¡Œï¼Œæ€»æ˜¯èƒ½å¸¦åŠ¨å…¶ä»–äººç§¯æžçš„å·¥ä½œã€‚è¿™äº›äººæ˜¯å›¢é˜Ÿå­¦ä¹ çš„æ¦œæ ·ï¼Œæ›´æ˜¯æˆ‘ä»¬å›¢é˜Ÿçš„è´¢å¯Œã€‚ å…¬å¸åœ¨æ”¹å˜ï¼Œå„ä¸ªæ–¹é¢ä¹Ÿè¶Šæ¥è¶Šæˆç†Ÿï¼Œæ— è®ºæ˜¯å…¬å¸æ–‡åŒ–è¿˜æ˜¯æŠ€æœ¯èƒ½åŠ›éƒ½åœ¨æ­¥æ­¥é«˜å‡ï¼Œä»Šå¹´å°¤ä¸ºçœ‹åˆ°çš„æ˜¯ CTO å¯¹æŠ€æœ¯ä¸­å°ä¸‹å®šçš„ä¸€äº›å†³å¿ƒï¼Œè¿™æ˜¯è®©äººå…´å¥‹çš„ã€‚å…¬å¸ä¸€ç›´åœ¨å¼ºè°ƒèµ‹èƒ½ï¼ŒæŠŠæ›´å¤šä¼˜ç§€ã€æœ‰æ‹…å½“ã€æœ‰è´£ä»»å¿ƒçš„äººææ‹”ä¸Šæ¥ï¼Œç»™ä»–ä»¬é…å¤‡èµ„æºï¼Œä»¥ä¾¿å‘æŒ¥ä»–ä»¬æ›´å¤§çš„æ½œèƒ½ï¼Œå¤§å®¶å·¥ä½œçš„çƒ­æƒ…ä¹Ÿæ›´ä¸Šä¸€å±‚æ¥¼ï¼Œå› ä¸ºå…¬å¸ç›¸ä¿¡ä»–ä»¬ã€‚ å¾ˆå¤šæ—¶å€™ï¼Œå¹¶ä¸æ˜¯ä½ èº«è¾¹æ²¡æœ‰ä¼˜ç§€çš„äººï¼Œåªæ˜¯ä½ ä¸æ„¿æ„ç›¸ä¿¡ä»–ä»¬ï¼Œå‰æ€•ç‹¼åŽæ€•è™Žçš„å¿ƒæ€é˜»æ­¢äº†è¿™äº›ä¼˜ç§€äººçš„å‘æŒ¥ã€‚å…¶å®žï¼Œä»–ä»¬åªæ˜¯éœ€è¦ä½ ä¸€ä¸ªè‚¯å®šçš„ç­”å¤ï¼Œæ‰€ä»¥è¯•ç€åŽ»æ”¹å˜è‡ªå·±ï¼Œç›¸ä¿¡å›¢é˜Ÿé‡Œé¢çš„æ¯ä¸ªäººï¼Œç»™ä»–ä»¬æ›´å¤šçš„è‚¯å®šï¼Œé¼“åŠ±å’Œæ”¯æŒä»–ä»¬ï¼Œç»“æžœä¸ä¼šè®©ä½ å¤±æœ›çš„ã€‚ ç”Ÿæ´»è‡ªä»Žè€å©†å­©å­å›žè€å®¶ä¹‹åŽï¼Œæˆ‘å°±è¿‡ä¸Šäº†â€œå•èº«â€œçš„ç”Ÿæ´»ï¼Œæ¯å¤©æ—©å‡ºæ™šå½’ï¼ŒåŠªåŠ›ç”¨å·¥ä½œæ¥ä»£æ›¿å¯¹ä»–ä»¬çš„æ€å¿µã€‚ æˆ‘å®¶çš„å¤§å®æ˜¯ä¸ªå¤©ç”Ÿçš„è¿åŠ¨ç‹‚ï¼Œæ„Ÿè§‰ä»–æ€»æ˜¯æœ‰ç”¨ä¸å®Œçš„åŠ›æ°”ï¼Œé™¤éžä»–è‡ªå·±åœ¨æ‹¼å›¾æˆ–è€…ç”»ç”»ï¼Œå¦åˆ™ä½ ç”­æƒ³æ¸…é™ã€‚ä¸€ä¼šåœ¨å®¶é‡Œç©¿ä¸Šæºœå†°éž‹ç»™ä½ è¡¨æ¼”å„ç§æºœå†°æŠ€èƒ½ï¼Œä¸€ä¼šæ‹¿èµ·ç¯®çƒç»™ä½ è¡¨æ¼”çƒæŠ€ï¼Œå†ä¸æ˜¯å°±è®©ä½ é™ªä»–çŽ©è·³æ£‹ã€‚ è€å©†å¤§äººåœ¨å®¶å¾…äº§äº†ï¼Œè‡ªå·±ä¸€ä¸ªäººæŒºç€è‚šå­è¿˜è¦ç»™å¤§å®åšé¥­ï¼Œæ¯å¤©æŽ¥é€ä»–åŽ»å­¦æ ¡ï¼ŒçŸ¥é“å¥¹ä¸€ä¸ªäººåœ¨å®¶ä¸å®¹æ˜“ï¼Œæˆ‘ä¹Ÿç»å¸¸é¼“åŠ±å¥¹ï¼Œå¥¹è¯´ï¼šâ€œä¸ºäº†å­©å­ï¼Œè¿™ç‚¹è‹¦ä¸ç®—ä»€ä¹ˆï¼â€ã€‚æœ‰æ—¶å€™ï¼Œæƒ³ä¸€æƒ³äºŒå®å¿«è¦è·Ÿæˆ‘ä»¬è§é¢äº†ï¼ŒæŒºå…´å¥‹çš„ã€‚ æœ‰æ—¶å€™æŒºæƒ³å¿µä»–ä»¬å¨˜ä¿©çš„ï¼Œå·¥ä½œä¸å¿™çš„æ—¶å€™æˆ‘ä¹Ÿä¼šè¯·å‡å›žè€å®¶ï¼Œè®°å¾—ä¸Šæ¬¡å›žåŽ»ç¦»å¼€çš„æ—¶å€™ï¼Œå„¿å­é—®äº†æˆ‘ä¸€ä¸ªé—®é¢˜ï¼Œä»–è¯´ï¼šâ€œçˆ¸çˆ¸ï¼Œä½ è¯´æ˜¯é’±é‡è¦ï¼Œè¿˜æ˜¯äººé‡è¦ï¼Ÿâ€ï¼Œæˆ‘å½“æ—¶æ„£äº†ä¸€ä¸‹ï¼Œå‘Šè¯‰ä»–ï¼šâ€œå½“ç„¶æ˜¯äººé‡è¦å‘€ï¼â€ï¼Œä»–ä¸å¼€å¿ƒçš„ç‚¹äº†ç‚¹å¤´ã€‚æ˜¾ç„¶ï¼Œè¿™å®¶ä¼™å¯¹æˆ‘çš„ç¦»å¼€å¾ˆä¸æ»¡æ„ï¼Œé‚£å¤©æ™šä¸Šæˆ‘èµ¶ç«è½¦èµ°çš„æ—¶å€™ï¼Œå¤§å®åœ¨è¢«çªé‡Œå“­äº†å¾ˆä¹…ï¼Œå…¶å®žï¼Œæˆ‘ä¹Ÿæµæ³ªäº†ï¼Œåªæ˜¯ä¸æ„¿æ„æ‰¿è®¤ç½¢äº†ï¼ ä½ è‡ªå·±é™¤äº†æ˜¯ä¸€åå‘˜å·¥ä¹‹å¤–ï¼Œè¿˜æ˜¯ä¸€åå„¿å­ã€å¥³å„¿ï¼Œæˆ–è€…æ˜¯ä¸€åçˆ¶äº²ã€æ¯äº²ï¼Œä¸€åä¸ˆå¤«ã€å¦»å­ï¼Œåªæœ‰å¤„ç†å¥½ç”Ÿæ´»ä¸Šé¢çš„äº‹æƒ…ï¼Œæ‰èƒ½æ›´å¥½çš„æŠ•å…¥åˆ°å·¥ä½œå½“ä¸­æ¥ã€‚æ— è®ºå¦‚ä½•ï¼Œäººè¿˜æ˜¯éœ€è¦æœ‰æ¢¦æƒ³çš„ï¼æˆ‘çš„æ¢¦æƒ³å°±æ˜¯åŠªåŠ›å­¦ä¹ æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†ï¼Œç„¶åŽç”¨è‡ªå·±çš„çŸ¥è¯†åŽ»æ•™è‚²è‡ªå·±çš„å­å¥³ï¼Œè®©ä»–ä»¬å°†æ¥èƒ½æœ‰æ›´å¥½çš„ç”Ÿæ´»ï¼Œåšä¸€ä¸ªæœ‰ç”¨çš„ç¤¾ä¼šäººã€‚ ç”¨ç”µå½±ã€Šä¸­å›½åˆä¼™äººã€‹æˆä¸œé’çš„ä¸€å¥è¯æ¥è¯´ï¼šâ€œæ¢¦æƒ³æ˜¯ä»€ä¹ˆï¼Œæ¢¦æƒ³å°±æ˜¯ä¸€ç§è®©ä½ æ„Ÿåˆ°åšæŒå°±æ˜¯å¹¸ç¦çš„ä¸œè¥¿ï¼â€ã€‚ é˜…è¯»è¿™äº›å¹´ï¼Œè‡ªå·±å”¯ä¸€æ²¡æœ‰ä¸¢å¼ƒçš„çˆ±å¥½å°±æ˜¯é˜…è¯»ã€‚ å·¥ä½œä¸Šçš„å¿™ç¢Œï¼Œç”Ÿæ´»ä¸Šçš„ç–²æƒ«ï¼Œå¾ˆå¤šæ—¶å€™è®©æˆ‘ä»¬æ— æ³•é™ä¸‹å¿ƒæ¥åŽ»é˜…è¯»ï¼Œç”šè‡³æœ‰æ—¶å€™ä¼šè§‰å¾—é˜…è¯»ç®€ç›´åœ¨æµªè´¹æ—¶é—´ï¼Œæµªè´¹ç”Ÿå‘½ã€‚å¦‚æžœä½ æœ‰è¿™ç§æƒ³æ³•ï¼Œå»ºè®®ä½ è¯·å‡åŽ»å¥½å¥½ä¼‘æ¯å‡ å¤©ï¼ŒæŠ›å¼€å–§åš£çš„å°˜ä¸–ï¼Œæ”¾ç©ºä¸€ä¸‹è‡ªå·±ã€‚ æˆ‘ä¸€ç›´åšæŒé˜…è¯»ï¼Œæ— è®ºæ˜¯æŠ€æœ¯ä¹¦ç±è¿˜æ˜¯äººæ–‡åŽ†å²ï¼ŒæŠ‘æˆ–äººç‰©ä¼ è®°ï¼Œå¹³æ—¶å·¥ä½œä¹Ÿå¾ˆå¿™ï¼Œæˆ‘å°±åˆ©ç”¨é›¶æ•£çš„æ—¶é—´æ¥é˜…è¯»ï¼Œå°±ç®—è¿™æ ·ï¼Œæ¯å‘¨æ¯ä¸ªæœˆç´¯è®¡ä¸‹æ¥é˜…è¯»é‡ä¹Ÿä¸å°‘äº†ï¼Œéšç€é˜…è¯»é‡çš„å¢žå¤šï¼Œæ„Ÿè§‰è‡ªå·±çš„æ°”è‰²å¥½äº†å¾ˆå¤šï¼Œå› ä¸ºå¿ƒæ€å¥½äº†ï¼Œé‡äº‹æ¯”ä»¥å‰æ›´åŠ æ²‰ç€å†·é™äº†ï¼Œä¹Ÿæ›´åŠ ç†æ€§äº†ã€‚ æ‚¨çš„æ°”è´¨é‡Œè—ç€ä½ è¯»è¿‡çš„é‚£äº›ä¹¦ã€‚ ä»Šå¹´è¯»åˆ°è‡ªè®¤ä¸ºä¸é”™çš„ä¹¦ç±ï¼ŒæŽ¨èç»™å¤§å®¶ï¼š 1. èš‚èšé‡‘æœï¼šç§‘æŠ€é‡‘èžç‹¬è§’å…½çš„å´›èµ· 2. èµ‹èƒ½ï¼šæ‰“é€ åº”å¯¹ä¸ç¡®å®šæ€§çš„æ•æ·å›¢é˜Ÿ 3. æˆ‘çš„æƒ…ç»ªä¸ºä½•æ€»è¢«ä»–äººå·¦å³ 4. ç»ˆèº«æˆé•¿ 20191. åŠ å¼ºå¯¹ä¸Šæ²Ÿé€š æ²Ÿé€šä¸èƒ½ä»…é™äºŽå¯¹ä¸‹æ²Ÿé€šï¼Œå¯¹ä¸Šæ²Ÿé€šå°¤ä¸ºé‡è¦ï¼Œè®©ä¸Šçº§çŸ¥é“ç›®å‰é¡¹ç›®çš„è¿›åº¦å’Œè§„åˆ’ï¼Œä»¥åŠé‡åˆ°çš„é—®é¢˜ã€‚è¿™ä¸€ç‚¹è‡ªå·±åšçš„è¿˜ä¸å¤Ÿå¥½ï¼Œåœ¨2019å¹´è¦åŠ å¼ºã€‚ 2. åŠ å¼ºè‡ªæˆ‘ç®¡ç† ç®¡ç†ï¼Œä¸æ˜¯ç®¡ç†åˆ«äººï¼Œè€Œæ˜¯è¦ç®¡ç†å¥½è‡ªå·±ï¼Œæ²¡æœ‰äººæ„¿æ„è¢«ç®¡ç†ï¼Œå¦‚æžœæœ‰éœ€è¦è¢«ä¸¥æ ¼ç®¡ç†çš„ï¼Œä»–å¯èƒ½ä¸é€‚åˆåœ¨ä½ çš„å›¢é˜Ÿä¸­ç”Ÿå­˜ã€‚åŠ å¼ºè‡ªæˆ‘ç®¡ç†æ˜¯æˆ‘ä»¬æ¯ä¸ªäººçš„ç›®æ ‡ã€‚ 3. ä¸ªäººã€å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›å†ä¸Šä¸€å±‚æ¥¼ è¡¥é½è‡ªå·±çš„çŸ­æ¿ï¼Œæƒ³å°½ä¸€åˆ‡åŠžæ³•æé«˜è‡ªå·±å’Œå›¢é˜Ÿå…¶ä»–æŠ€æœ¯äººå‘˜çš„æŠ€æœ¯èƒ½åŠ›ï¼Œåœ¨ç¨³å®šã€é«˜æ•ˆçš„åŒæ—¶å¯»æ‰¾æ›´å¤šè‡ªæˆ‘æˆé•¿çš„é€”å¾„å’Œæ–¹æ³•ã€‚ 4.æ›´åŠ å…³å¿ƒè‡ªå·±çš„å®¶äººå’Œèº«è¾¹çš„æœ‹å‹ æ²¡æœ‰å®¶äººçš„æ”¯æŒå’Œé¼“åŠ±ï¼Œä½ å¾ˆéš¾åŽ»æŠ•å…¥å·¥ä½œï¼Œæ‰€ä»¥è¦å¥½å¥½çš„å¯¹å¾…è‡ªå·±çš„å®¶äººï¼Œå¤šå…³å¿ƒä»–ä»¬ï¼Œå®¶äººå¯¹ä½ çš„è¦æ±‚ä¸å¤šï¼Œå¾€å¾€åªéœ€è¦çŸ¥é“ä½ æœ‰æ²¡æœ‰æƒ¦è®°ä»–ä»¬å°±å¤Ÿäº†ã€‚å½“ç„¶äº†ï¼Œæˆ‘å¾ˆæœŸå¾…å’Œæˆ‘ä»¬å®¶çš„äºŒå®è§é¢ï¼Œå˜¿å˜¿ðŸ˜œï¼ æœ‹å‹å¤šäº†ï¼Œè·¯æ‰å¥½èµ°ï¼Œè®°å¾—è·Ÿæœ‹å‹å¤šèŠå¤©ï¼Œå¤šå¬å¬ä»–ä»¬çš„æ•…äº‹ï¼Œæœ€é‡è¦çš„æ˜¯ç»å¸¸çº¦ä»–ä»¬å–å–é…’ã€‚ æœ€åŽåˆ†äº«ç»™å¤§å®¶ä¸€å¥è¯ï¼Œå…±å‹‰ï¼š ä½ çš„ç›®çš„ä¸æ˜¯ç»™è°æ‰“å·¥ï¼Œè€Œæ˜¯æˆä¸ºæ›´å¥½çš„è‡ªå·±ï¼Œå»ºè®¾æ›´å¥½çš„æœªæ¥ï¼æ‰€ä»¥å°½å¿«åŽ»è°ƒæ•´å¿ƒæ€ï¼Œåœæ­¢æŠ±æ€¨ï¼Œç«‹å³è¡ŒåŠ¨ï¼Œç§¯æžæ²Ÿé€šï¼ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NSStringã€NSMutableString å¯å˜ä¸Žä¸å¯å˜çš„é‚£äº›äº‹å„¿]]></title>
    <url>%2F2018%2F12%2F30%2FNSString%E3%80%81NSMutableString-%E5%8F%AF%E5%8F%98%E4%B8%8E%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹è¿™ç¯‡æ–‡ç« çš„ä¸»è¦åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡ NSString çš„ copy å’Œ mutableCopy NSMutableString çš„ copy å’Œ mutableCopy property ä¸­ copyã€strong ä¿®é¥° NSString property ä¸­ copyã€strong ä¿®é¥° NSMutableString å¾ˆå¤š iOS å¼€å‘çš„æœ‹å‹ä¼šäº‰è®ºä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨ copy å’Œ strong æ¥ä¿®é¥° NSString å¯¹è±¡éƒ½æ˜¯ä¸€æ ·çš„æ•ˆæžœï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™äºŒè€…ç¡®å®žæ˜¯æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼ŒäºŒè€…æˆªç„¶ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æžæ¸…æ¥šé‡Œé¢çš„é“é“ã€‚ æˆ‘å·²ç»å°½åŠ›ç®€åŒ–äº†è¿™ç¯‡æ–‡ç« çš„å†…å®¹äº†ï¼Œä½†ä¾ç„¶éœ€è¦ä½ èŠ±ä¸ª15åˆ†é’Ÿå·¦å³çš„æ—¶é—´ï¼Œæ‰€ä»¥å½“ä½ å¿ƒæƒ…ä¸é”™åˆæ²¡æœ‰å…¶ä»–äº‹æƒ…çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥æ¥é˜…è¯»äº†ã€‚ å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡åœ¨ Objective-C ä¸­æœ€å¸¸ç”¨æ¥å¤„ç†å­—ç¬¦ä¸²çš„æ˜¯ NSString ä¸Ž NSMutableString è¿™ä¸¤ä¸ªç±»ï¼ŒNSString è¢«åˆ›å»ºèµ‹å€¼åŽå­—ç¬¦ä¸²çš„å†…å®¹ä¸Žé•¿åº¦ä¸èƒ½å†åšåŠ¨æ€çš„ä¿®æ”¹ï¼Œé™¤éžé‡æ–°ç»™è¿™ä¸ªå­—ç¬¦ä¸²èµ‹å€¼ã€‚è€Œ NSMutableString è¢«åˆ›å»ºèµ‹å€¼åŽå¯ä»¥åŠ¨æ€çš„ä¿®æ”¹å­—ç¬¦ä¸²çš„å†…å®¹ã€‚ é‚£ä¹ˆç®€å•æ¥è¯´ï¼Œå¯å˜å¯¹è±¡æ˜¯æŒ‡ï¼Œå¯¹è±¡çš„å†…å®¹æ˜¯å¯å˜çš„ï¼Œä¾‹å¦‚ NSMutableString å¯¹è±¡ã€‚ä¸å¯å˜çš„å¯¹è±¡åˆ™ç›¸åï¼Œè¡¨ç¤ºå…¶å†…å®¹ä¸å¯å˜ï¼Œä¾‹å¦‚ NSString å¯¹è±¡ã€‚ å¯å˜ä¸Žä¸å¯å˜æ˜¯é’ˆå¯¹å¯¹è±¡æ¥è¯´çš„ã€‚åœ¨å®žé™…å¼€å‘ä¸­ï¼Œè¦æ ¹æ®å®žé™…çš„ä¸šåŠ¡åœºæ™¯æ¥é€‰æ‹©ä½¿ç”¨å¯å˜è¿˜æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ä»Šå¤©æˆ‘ä»¬åªè®¨è®º Objective-C ä¸­ NSString ä¸Ž NSMutableString è¿™ä¸¤ä¸ªç±»ï¼Œå…³äºŽå…¶ä»–é›†åˆç±»çš„å¯å˜ä¸Žä¸å¯å˜ç‰¹æ€§ï¼ŒåŽé¢ä¸“é—¨å†æ¥å†™æ–‡ç« åˆ†äº«ã€‚ NSString çš„ copy å’Œ mutableCopyåœ¨ NSString.h ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®šä¹‰å¦‚ä¸‹ï¼š 1@interface NSString : NSObject &lt;NSCopying, NSMutableCopying, NSSecureCoding&gt; NSString.h æœ¬èº«å®žçŽ°äº† NSCopying, NSMutableCopying è¿™ä¸¤ä¸ªåè®®ï¼Œåè®®çš„å®šä¹‰å¦‚ä¸‹å†…å®¹æ‰€ç¤ºï¼š 1234567891011@protocol NSCopying- (id)copyWithZone:(nullable NSZone *)zone;@end@protocol NSMutableCopying- (id)mutableCopyWithZone:(nullable NSZone *)zone;@end ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹ NSString å¯¹è±¡è¿›è¡Œ copy å’Œ mutableCopy çš„æ“ä½œï¼Œå¦¥å¦¥çš„ã€‚ ä¸¾ä¸€ä¸ªç®€å•çš„æ —å­ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678NSString *name = @"www.";NSLog(@"name addr: %p, name content: %@", name, name); NSString *name1 = name;NSLog(@"name1 addr: %p, name1 content: %@", name1, name1); NSString *name2 = [name copy];NSLog(@"name2 addr: %p, name2 content: %@", name2, name2); è¾“å‡ºç»“æžœï¼Œå¦‚ä¸‹ï¼š 123name addr: 0x10090ecf8, name content: www.name1 addr: 0x10090ecf8, name1 content: www.name2 addr: 0x10090ecf8, name2 content: www. ä»Žè¾“å‡ºç»“æžœå¯ä»¥çœ‹å‡ºï¼Œä¸‰ä¸ªå¯¹è±¡çš„å†…å®¹å’Œåœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œç»è¿‡ name å¯¹è±¡ copy åŽçš„ name2 ä¸Ž name è¿˜æ˜¯æŒ‡å‘åŒä¸€å—å†…å­˜åœ°å€ã€‚ åœ¨æ–­ç‚¹è¿‡ç¨‹ä¸­ï¼Œå‘çŽ°æ— è®ºæ˜¯ name è¿˜æ˜¯ name1ã€name2 å¯¹è±¡ï¼Œå…¶éƒ½æ˜¯ ConstantStringï¼Œè¡¨æ˜Žä¸‰è€…éƒ½æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä»Žè¿™å¼ å›¾ä¹Ÿè¯´æ˜Žäº†ä¸€ä¸ªé—®é¢˜ï¼ŒNSString å¯¹è±¡ç»è¿‡ copy åŽä»ç„¶æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ ç´§æŽ¥ç€ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ mutableCopy çš„ä½¿ç”¨æƒ…å†µï¼Œä¾‹å­å¦‚ä¸‹ï¼š 1234567891011NSString *name = @"www.";NSLog(@"name addr: %p, name content: %@", name, name); NSString *name1 = name;NSLog(@"name1 addr: %p, name1 content: %@", name1, name1); NSString *name2 = [name copy];NSLog(@"name2 addr: %p, name2 content: %@", name2, name2); id name3 = [name mutableCopy];NSLog(@"name3 addr: %p, name3 content: %@", name3, name3); å¯¹è±¡ name3 æ˜¯ç»è¿‡ name å¯¹è±¡ mutableCopy åŽçš„ï¼Œè¿™ä¸ªæ—¶å€™å› ä¸ºæˆ‘ä¸ç¡®å®š name3 åˆ°åº•æ˜¯å¯å˜çš„è¿˜æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥é‡‡ç”¨äº† id æ¥ä¿®é¥° name3 å¯¹è±¡ã€‚ å¯ä»¥çœ‹ä¸€ä¸‹è¾“å‡ºå†…å®¹ï¼š 1234name addr: 0x104a6acf8, name content: www.name1 addr: 0x104a6acf8, name1 content: www.name2 addr: 0x104a6acf8, name2 content: www.name3 addr: 0x1c0052cf0, name3 content: www. å¯ä»¥çœ‹å‡ºï¼Œname3 çš„åœ°å€å˜äº†ï¼Œå†çœ‹ä¸€ä¸‹æ–­ç‚¹çš„æˆªå›¾ï¼š å……åˆ†è¯´æ˜Žäº† name3 ç»è¿‡ä¸å¯å˜çš„ name è¿›è¡ŒmutableCopy åŽå˜æˆäº†å¯å˜å¯¹è±¡ã€‚é‚£ä¹ˆå¯ä»¥å°†ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ç¨ä½œä¿®æ”¹ï¼š 1234NSMutableString *name3 = [name mutableCopy];NSLog(@"name3 addr: %p, name3 content: %@", name3, name3);[name3 appendString:@"veryitman.com"];NSLog(@"name3 addr: %p, name3 content: %@", name3, name3); ä»Žä¸‹é¢çš„è¾“å‡ºç»“æžœä¹Ÿå……åˆ†è¯´æ˜Žäº† name3 ç»è¿‡ä¸å¯å˜çš„ name è¿›è¡Œ mutableCopy åŽå˜æˆäº†å¯å˜å¯¹è±¡ã€‚è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š 1name3 addr: 0x1d0058270, name3 content: www.veryitman.com ç»“è®º 1ï¼š ä¸å¯å˜çš„ NSString å¯¹è±¡ç»è¿‡ copy åŽï¼Œè¿˜æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ ä¸å¯å˜çš„ NSString å¯¹è±¡ç»è¿‡ mutableCopy åŽï¼Œå˜æˆäº†å¯å˜çš„ NSMutableString å¯¹è±¡ã€‚ NSMutableString çš„ copy å’Œ mutableCopyç±» NSMutableString ç»§æ‰¿è‡ª NSString çš„ï¼Œå…¶å½“ç„¶ä¹Ÿæ˜¯å®žçŽ°äº† NSCopying, NSMutableCopying è¿™ä¸¤ä¸ªåè®®çš„ã€‚ 1@interface NSMutableString : NSString æˆ‘ä»¬è¿˜æ˜¯çœ‹ä¾‹å­ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314NSMutableString *name = [NSMutableString stringWithString:@"www."];NSLog(@"name addr: %p, name content: %@", name, name);// ç®€å•èµ‹å€¼NSMutableString *name1 = name;NSLog(@"name1 addr: %p, name1 content: %@", name1, name1); // ä½¿ç”¨ copy id name2 = [name copy];NSLog(@"name2 addr: %p, name2 content: %@", name2, name2); // ä½¿ç”¨ mutableCopy id name3 = [name mutableCopy];NSLog(@"name3 addr: %p, name3 content: %@", name3, name3); å› ä¸ºäº‹å…ˆæˆ‘ä»¬ä¸çŸ¥é“ NSMutableString ç»è¿‡ copy å’Œ mutableCopy ä¹‹åŽåˆ°åº•ä¼šå˜æˆå¯å˜è¿˜æ˜¯ä¸å¯å˜ï¼Œä¸Šé¢çš„ä¾‹å­æš‚æ—¶å°† name2 å’Œ name3 ç”¨ id æ¥è¡¨ç¤ºã€‚ æ–­ç‚¹æˆªå›¾å¦‚ä¸‹ï¼š ç»“åˆä¸€ä¸‹è¾“å‡ºçš„æ—¥å¿—ï¼š 1234name addr: 0x1d044a980, name content: www.name1 addr: 0x1d044a980, name1 content: www.name2 addr: 0xa0000002e7777774, name2 content: www.name3 addr: 0x1d044a5f0, name3 content: www. å¯ä»¥çœ‹å‡º name2 æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ NSString å¯¹è±¡ï¼Œ nameã€name1 å’Œ name3 éƒ½æ˜¯å¯å˜çš„ NSMutableString å¯¹è±¡ã€‚ ä¹Ÿå¯ä»¥ä»Žå¦å¤–ä¸€ä¸ªè§’åº¦æ¥éªŒè¯ä¸€ä¸‹ä¸Šé¢çš„è¯´æ³•ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼š 1234567NSMutableString *name2 = [name copy];NSLog(@"name2 addr: %p, name2 content: %@", name2, name2);[name2 appendString:@"veryitman.com"]; NSMutableString *name3 = [name mutableCopy];NSLog(@"name3 addr: %p, name3 content: %@", name3, name3);[name3 appendString:@"veryitman.com"]; è¿è¡ŒåŽï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä»£ç  [name2 appendString:@&quot;veryitman.com&quot;] è¿™é‡Œä¼šå¼•èµ· Crashï¼ŒæŠ¥é”™å†…å®¹å¦‚ä¸‹ï¼š 12345 -[NSTaggedPointerString appendString:]: unrecognized selector sent to instance 0xa0000002e7777774 *** Terminating app due to uncaught exception 'NSInvalidArgumentException'reason: '-[NSTaggedPointerString appendString:]: unrecognized selector sent to instance 0xa0000002e7777774' ä¹Ÿå……åˆ†è¯´æ˜Žäº†ï¼Œname2 æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ NSString å¯¹è±¡ã€‚ ç»“è®º 2ï¼š å¯å˜çš„ NSMutableString å¯¹è±¡ç»è¿‡ copy åŽï¼Œä¼šå˜æˆä¸å¯å˜çš„ NSString å¯¹è±¡ã€‚ å¯å˜çš„ NSMutableString å¯¹è±¡ç»è¿‡ mutableCopy åŽï¼Œä»ç„¶æ˜¯å¯å˜çš„ NSMutableString å¯¹è±¡ã€‚ copyã€strong ä¿®é¥° NSStringåˆ›å»º Employee æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 12345@interface Employee : NSObject@property (nonatomic, copy) NSString *userName;@end å…¶ userName å±žæ€§æ˜¯ copyã€‚ ä½¿ç”¨ç¤ºä¾‹ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223Employee *employee = [Employee new];employee.userName = @"John";NSLog(@"--before-- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); // åˆ›å»ºä¸€ä¸ªå¯å˜å¯¹è±¡NSMutableString *newUserName = [[NSMutableString alloc] initWithString:@"new_user_name"];NSLog(@"newUserName addr: %p, newUserName content: %@", newUserName, newUserName); // å°†ä¸€ä¸ªæ–°çš„å¯¹åƒèµ‹å€¼ç»™ employee.userNameï¼Œæ­¤æ—¶ employee.userName çš„åœ°å€è‚¯å®šä¼šå˜åŒ–employee.userName = newUserName;NSLog(@"---after1--- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); // è¯•å›¾æ”¹å˜ newUserName çš„å†…å®¹ï¼Œçœ‹ employee.userName çš„å†…å®¹æ˜¯å¦æ”¹å˜[newUserName appendString:@"_hello"];// newUserName çš„å†…å®¹è¢«æ”¹å˜æˆäº† new_user_name_helloNSLog(@"newUserName addr: %p, newUserName content: %@", newUserName, newUserName);// employee.userName çš„å†…å®¹æœªå˜åŒ–NSLog(@"---after2--- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); // Crashï¼Œå› ä¸º employee.userName è¿˜æ˜¯ä¸å¯å˜å¯¹è±¡// [(NSMutableString *)(employee.userName) appendString:@"nana"]; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ•…æ„å°† NSMutableString å¯¹è±¡ newUserName èµ‹å€¼ç»™ä¸å¯å˜çš„ NSString å¯¹è±¡ employee.userNameï¼Œçœ‹ä¸€ä¸‹è¾“å‡ºç»“æžœï¼Œå¦‚ä¸‹ï¼š 123456789--before-- employee.userName addr: 0x100096cf8, employee.userName content: JohnnewUserName addr: 0x174070a00, newUserName content: new_user_name---after1--- employee.userName addr: 0x174023b80, employee.userName content: new_user_namenewUserName addr: 0x174070a00, newUserName content: new_user_name_hello---after2--- employee.userName addr: 0x174023b80, employee.userName content: new_user_name æŒ‰ç…§ 1å¯å˜çš„ `NSMutableString` å¯¹è±¡ç»è¿‡ `copy` åŽï¼Œä¼šå˜æˆä¸å¯å˜çš„ `NSString` å¯¹è±¡ã€‚ è¿™ä¸ªç»“è®ºæ¥çœ‹ï¼Œemployee.userName è‚¯å®šæ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œå³ä½¿æ”¹å˜ newUserName çš„å†…å®¹ä¹Ÿä¸ä¼šå½±å“ employee.userName è¿™ä¸ªå¯¹è±¡çš„å†…å®¹ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬å°† employee.userName çš„å±žæ€§ä¿®é¥°ç¬¦ copy æ”¹ä¸º strongï¼Œåˆä¼šæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ æˆ‘ä»¬ä¿®æ”¹ä¸¤å¤„ä»£ç  Employee.h 1234567@interface Employee : NSObject//@property (nonatomic, copy) NSString *userName;@property (nonatomic, strong) NSString *userName;@end ç¤ºä¾‹ä»£ç ï¼Œåªæ˜¯æ‰“å¼€ä¹‹å‰ä¼š crash çš„éƒ¨åˆ† 123// employee.userName ç»è¿‡ strong ä¿®é¥°è¿‡åŽï¼Œ å½»åº•å˜æˆäº†å¯å˜å¯¹è±¡[(NSMutableString *)(employee.userName) appendString:@"_oc"];NSLog(@"---after3--- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); çœ‹ä¸€ä¸‹è¾“å‡ºæ—¥å¿—ï¼š 1234567891011--before-- employee.userName addr: 0x1000a6cf8, employee.userName content: JohnnewUserName addr: 0x17426b280, newUserName content: new_user_name---after1--- employee.userName addr: 0x17426b280, employee.userName content: new_user_namenewUserName addr: 0x17426b280, newUserName content: new_user_name_hello---after2--- employee.userName addr: 0x17426b280, employee.userName content: new_user_name_hello---after3--- employee.userName addr: 0x17426b280, employee.userName content: new_user_name_hello_oc å¯ä»¥çœ‹åˆ° employee.userName æœ€ç»ˆå’Œ newUserName çš„åœ°å€ã€å†…å®¹å®Œå…¨ç›¸åŒäº†ï¼Œå½»åº•å˜æˆäº†å¯å˜å¯¹è±¡ã€‚ å¦å¤–ï¼Œå¦‚æžœä¸æ˜¯å°†å¯å˜çš„ NSMutableString å¯¹è±¡èµ‹å€¼ç»™ä¸å¯å˜çš„ NSString å¯¹è±¡ï¼Œæ¢å¥è¯è¯´ï¼ŒNSString å¯¹ NSString èµ‹å€¼ï¼Œé‚£ä¹ˆä½¿ç”¨ strong å’Œ copy æ•ˆæžœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆæ— è®º employee.userName ä½¿ç”¨ strong è¿˜æ˜¯ copyï¼Œæ•ˆæžœéƒ½æ˜¯ employee.userName ä¸å¯å˜çš„ï¼‰ï¼š 1234567891011Employee *employee = [Employee new];employee.userName = @"John";NSLog(@"--before-- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); // åˆ›å»ºä¸€ä¸ªä¸å¯å˜å¯¹è±¡NSString *newUserName = @"new_user_name";NSLog(@"newUserName addr: %p, newUserName content: %@", newUserName, newUserName); // å°†ä¸€ä¸ªæ–°çš„å¯¹åƒèµ‹å€¼ç»™ employee.userNameï¼Œæ­¤æ—¶ employee.userName çš„åœ°å€è‚¯å®šä¼šå˜åŒ–employee.userName = newUserName;NSLog(@"---after1--- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); copyã€strong ä¿®é¥° NSMutableStringåœ¨ property çš„ä¿®é¥°è¯­ä¸­ï¼Œåªæœ‰ copy ä¿®é¥°è¯­è€Œæ²¡æœ‰ mutableCopy çš„ä¿®é¥°è¯­ã€‚ Employee.h 12345@interface Employee : NSObject@property (nonatomic, copy) NSMutableString *userName;@end ç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516Employee *employee = [Employee new];employee.userName = [NSMutableString stringWithString:@&quot;John&quot;];NSLog(@&quot;--before-- employee.userName addr: %p, employee.userName content: %@&quot;, employee.userName, employee.userName);// åˆ›å»ºä¸€ä¸ªå¯å˜å¯¹è±¡NSMutableString *newUserName = [NSMutableString stringWithFormat:@&quot;new_user_name&quot;];NSLog(@&quot;newUserName addr: %p, newUserName content: %@&quot;, newUserName, newUserName);// å°†ä¸€ä¸ªæ–°çš„å¯¹åƒèµ‹å€¼ç»™ employee.userNameï¼Œæ­¤æ—¶ employee.userName çš„åœ°å€è‚¯å®šä¼šå˜åŒ–employee.userName = newUserName;NSLog(@&quot;---after1--- employee.userName addr: %p, employee.userName content: %@&quot;, employee.userName, employee.userName); // employee.userName è™½ç„¶æ˜¯ NSMutableString å¯¹è±¡ï¼Œä½†ç»è¿‡ copy ä¿®é¥°è¿‡åŽï¼Œä»ç„¶æ˜¯ä¸å¯å˜å¯¹è±¡// æ‰€ä»¥ï¼Œè¿è¡Œåˆ°è¿™é‡Œä¼šå¼•èµ· crash[employee.userName appendString:@&quot;_oc&quot;];NSLog(@&quot;---after2--- employee.userName addr: %p, employee.userName content: %@&quot;, employee.userName, employee.userName); å¯ä»¥çœ‹å‡º copy åŽçš„çš„å¯å˜å¯¹è±¡è¿˜æ˜¯ä¸å¯å˜çš„ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬å°† employee.userName çš„å±žæ€§ä¿®é¥°ç¬¦ copy æ”¹ä¸º strongï¼Œåˆä¼šæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ Employee.h 12345@interface Employee : NSObject@property (nonatomic, strong) NSString *userName;@end ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415161718192021Employee *employee = [Employee new];employee.userName = [NSMutableString stringWithString:@"John"];NSLog(@"--before-- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName);// åˆ›å»ºä¸€ä¸ªå¯å˜å¯¹è±¡NSMutableString *newUserName = [NSMutableString stringWithFormat:@"new_user_name"];NSLog(@"newUserName addr: %p, newUserName content: %@", newUserName, newUserName);// å°†ä¸€ä¸ªæ–°çš„å¯¹åƒèµ‹å€¼ç»™ employee.userNameï¼Œæ­¤æ—¶ employee.userName çš„åœ°å€è‚¯å®šä¼šå˜åŒ–employee.userName = newUserName;NSLog(@"---after1--- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); // employee.userName è™½ç„¶æ˜¯ NSMutableString å¯¹è±¡ï¼Œä½†ç»è¿‡ strong ä¿®é¥°è¿‡åŽï¼Œå˜æˆäº†å¯å˜å¯¹è±¡[employee.userName appendString:@"_hello"];NSLog(@"---after2--- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); [newUserName appendString:@"_oc"];// newUserName çš„å†…å®¹è¢«æ”¹å˜æˆäº† new_user_name_hello_ocNSLog(@"newUserName addr: %p, newUserName content: %@", newUserName, newUserName);// employee.userName çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–NSLog(@"---after2--- employee.userName addr: %p, employee.userName content: %@", employee.userName, employee.userName); ç»è¿‡ strong ä¿®é¥°åŽï¼Œå¯å˜çš„ NSMutableString å¯¹è±¡è¿˜æ˜¯å¯å˜çš„å¯¹è±¡ã€‚ åœ¨è¿™ä¸ªéƒ¨åˆ†çš„å¼€å§‹ï¼Œè¯´è¿‡åœ¨ property ä¸­æ²¡æœ‰ mutableCopy çš„ä¿®é¥°è¯­ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½å¦è¾¾åˆ° mutableCopy çš„æ•ˆæžœå‘¢ï¼Ÿ å¾ˆæ˜¾ç„¶æ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™å±žæ€§çš„ set æ–¹æ³•ï¼Œæ”¹é€ ä¸€ä¸‹ Employee çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š Employee.h 12345@interface Employee : NSObject@property (nonatomic, copy) NSMutableString *userName;@end Employee.m 12345678910#import &quot;Employee.h&quot;@implementation Employee- (void)setUserName:(NSMutableString *)userName&#123; _userName = [userName mutableCopy];&#125;@end è¿™æ ·ï¼Œå°±è¾¾åˆ°äº†å’Œæ˜¯ strong ä¿®é¥°è¯­ä¸€æ ·çš„æ•ˆæžœäº†ã€‚ å¤§å®¶ï¼Œå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹æ³•æ¥å®žè·µä¸€ä¸‹ NSArrayã€NSMutableArry ç­‰é›†åˆæ•°æ®çš„ copy ä»¥åŠ mutableCopy çš„æ•ˆæžœäº†ã€‚ å°ç»“ ä¸å¯å˜çš„ NSString å¯¹è±¡ç»è¿‡ copy åŽï¼Œè¿˜æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ ä¸å¯å˜çš„ NSString å¯¹è±¡ç»è¿‡ mutableCopy åŽï¼Œå˜æˆäº†å¯å˜çš„ NSMutableString å¯¹è±¡ã€‚ å¯å˜çš„ NSMutableString å¯¹è±¡ç»è¿‡ copy åŽï¼Œä¼šå˜æˆä¸å¯å˜çš„ NSString å¯¹è±¡ã€‚ å¯å˜çš„ NSMutableString å¯¹è±¡ç»è¿‡ mutableCopy åŽï¼Œä»ç„¶æ˜¯å¯å˜çš„ NSMutableString å¯¹è±¡ã€‚ ä¸å¯å˜çš„ NSString å¯¹è±¡åœ¨ property ä¸­ï¼Œå°½é‡ä½¿ç”¨ copy æ¥ä¿®é¥°ï¼Œå› ä¸ºä½¿ç”¨ strong ä¿®é¥°ç¬¦å¯å˜å­—ç¬¦ä¸²å¦‚æžœç»™ä¸å¯å˜å­—ç¬¦ä¸²èµ‹å€¼åŽï¼Œä¼šå¯¼è‡´ä½ åŽŸæœ¬é¢„æœŸå‘ç”Ÿäº†å˜åŒ–ï¼Œé™¤éžä½ æœ‰ç‰¹æ®Šçš„ç›®çš„æ‰ä½¿ç”¨ strong ä¿®é¥°ç¬¦ã€‚ å¯å˜çš„ NSMutableString å¯¹è±¡åœ¨ property ä¸­ï¼Œå°½é‡ä½¿ç”¨ strong æ¥ä¿®é¥°ï¼Œé™¤éžä½ æœ‰ç‰¹æ®Šçš„ç›®çš„æ‰ä½¿ç”¨ copy ä¿®é¥°ç¬¦ã€‚ è™½ç„¶åœ¨ property ä¸­æ²¡æœ‰ mutableCopy ä¿®é¥°ç¬¦ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡é‡å†™å…¶ set æ–¹æ³•æ¥è¾¾åˆ°ç›®çš„ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>NSString NSMutableString copy mutableCopy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OC: self]]></title>
    <url>%2F2018%2F12%2F23%2FOC-self%2F</url>
    <content type="text"><![CDATA[ä¸ºäº†æ›´å¥½çš„è¯´æ˜Ž Objective-C ä¸­çš„ selfï¼Œæˆ‘ä»¬å…ˆä»Ž Java çš„ this å…³é”®å­—å¼€å§‹æ¥å¼•å…¥è¯é¢˜ã€‚ Java ä¸­çš„ thisåœ¨ Java ä¸­ this å…³é”®å­—è¡¨ç¤ºå½“å‰ç±»å¯¹è±¡ï¼Œå…¶åªèƒ½åœ¨ç±»çš„éžé™æ€æ–¹æ³•ä¸­ä½¿ç”¨ï¼Œé™æ€æ–¹æ³•å’Œé™æ€çš„ä»£ç å—ä¸­ç»å¯¹ä¸èƒ½å‡ºçŽ° thisï¼Œthis åªå’Œç‰¹å®šçš„å¯¹è±¡å…³è”ï¼Œè€Œä¸å’Œç±»å…³è”ï¼ŒåŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡æœ‰ä¸åŒçš„ this. å…ˆçœ‹ä¸€ä¸ª Java ç¤ºä¾‹ï¼Œèƒ½è¯´æ˜Žä¸Šé¢çš„é—®é¢˜ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728// é™æ€ä»£ç å—ä¸­ä¹Ÿä¸å¯ä»¥ä½¿ç”¨ this// Error: non-static variable this cannot be referenced from a static contextstatic &#123; // this.eat();&#125;public void play() &#123; System.out.println("play()"); // this è°ƒç”¨ç±»æ–¹æ³• this.eat(); // this è°ƒç”¨å®žä¾‹æ–¹æ³• this.finish();&#125;public static void eat() &#123; System.out.println("static eat()"); // ä¸å¯ä»¥åœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨ this // Error: non-static variable this cannot be referenced from a static context // this.play(); // System.out.println(this);&#125;public void finish() &#123; System.out.println("finish()");&#125; é€šè¿‡å®žé™…çš„ Java ä¾‹å­ï¼ŒåŸºæœ¬è¡¨æ˜Žäº†åœ¨é™æ€æ–¹æ³•å’Œå®žä¾‹æ–¹æ³•ä¸­ this çš„ä½¿ç”¨åœºæ™¯ã€‚ Objective-C ä¸­çš„ selfåœ¨ Objective-C ä¸­ï¼Œself æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒæ—¢å¯ä»¥æ˜¯å®žä¾‹å¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯ç±»å¯¹è±¡ï¼Œæœ‰ç‚¹ç±»ä¼¼äºŽä¸Šé¢ Java ä¸­çš„ this å…³é”®å­—ã€‚ ä¸‹é¢ç»“åˆå®žé™…ä¾‹å­ï¼Œæ¥è¯´æ˜Ž self è¿™ä¸ªå…³é”®å­—ã€‚ 1ã€å®žä¾‹æ–¹æ³•ä¸­çš„ selfå®žä¾‹æ–¹æ³•ä¸­çš„ self å¯ä»¥ç›´æŽ¥è°ƒç”¨å®žä¾‹æ–¹æ³•ä½†ä¸å¯ä»¥ç›´æŽ¥è°ƒç”¨ç±»æ–¹æ³•ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œè°ƒç”¨å®žä¾‹æ–¹æ³• finishæ²¡æœ‰é—®é¢˜ï¼Œè€Œè°ƒç”¨ç±»æ–¹æ³• eat ç›´æŽ¥æŠ¥ç¼–è¯‘é”™è¯¯ã€‚ 12345678910111213141516171819202122- (void)play&#123; NSLog(@"---------------- '- (void)play' ------------------"); NSLog(@"self: %@, self -&gt; %p", self, self); // æ— æ³•ä½¿ç”¨ self æ¥è°ƒç”¨ç±»æ–¹æ³• // Error: No visible @interface for 'MZPerson' declares the selector 'eat' // [self eat]; // è°ƒç”¨å®žä¾‹æ–¹æ³• [self finish];&#125;+ (void)eat&#123; NSLog(@"---------------- '+ (void)eat' ------------------");&#125;- (void)finish&#123; NSLog(@"--------------- '- (void)finish' ----------------");&#125; æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å®žä¾‹æ–¹æ³•ä¸­å¯ä»¥ç›´æŽ¥é€šè¿‡`[ç±» ç±»æ–¹æ³•] çš„æ–¹å¼æ¥è°ƒç”¨ç±»æ–¹æ³•ï¼Œé‚£ä¹ˆå¦‚æžœæƒ³åœ¨å®žä¾‹æ–¹æ³•ä¸­ä½¿ç”¨ self å…³é”®å­—ï¼Œå¦‚ä½•åŠžå‘¢ï¼Ÿ å¾ˆç®€å•ï¼Œä½¿ç”¨ [self class] å³å¯ã€‚ 1234567- (void)play&#123; NSLog(@"---------------- '- (void)play' ------------------"); NSLog(@"self: %@, self -&gt; %p", self, self); [[self class] eat];&#125; å…³äºŽ class åŽç»­å†åˆ†äº«ç»™å¤§å®¶ï¼Œè¿™é‡Œåªéœ€è¦çŸ¥é“å¯ä»¥è¿™ä¹ˆä½¿ç”¨å°±å¥½äº†ã€‚ 2ã€ç±»æ–¹æ³•ä¸­çš„ selfè¿™ä¸ªè·Ÿ Java çš„ this æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œä¸Šé¢çš„ Java ç¤ºä¾‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ— è®ºæ˜¯æ‰“å° this è¿˜æ˜¯ä½¿ç”¨ this è°ƒç”¨æ–¹æ³•éƒ½ä¸å¯ä»¥ï¼Œä½†æ˜¯åœ¨ Objective-C ä¸­å´å¯ä»¥ä½¿ç”¨ selfï¼Œåªæ˜¯ä¸èƒ½ä½¿ç”¨ self æ¥è°ƒç”¨å®žä¾‹æ–¹æ³•å’Œå®žä¾‹å˜é‡ã€‚ 123456789101112131415161718+ (void)eat&#123; NSLog(@"---------------- '+ (void)eat' ------------------"); // No known class method for selector 'finish' // [self finish]; // è°ƒç”¨ç±»æ–¹æ³• [self beat]; // æ‰“å° self NSLog(@"self: %@", self);&#125;+ (void)beat&#123; NSLog(@"---------------- '+ (void)beat' ------------------");&#125; é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨ç±»æ–¹æ³•ä¸­å¯ä»¥ä½¿ç”¨ self å‘¢ï¼Ÿ åˆ«ç€æ€¥ï¼ŒæŽ¥ç€å¾€ä¸‹çœ‹ã€‚ 3ã€å®žä¾‹å’Œç±»æ–¹æ³•ä¸­çš„ self åŒºåˆ«å…¶å®žï¼Œåœ¨ç±»æ–¹æ³•ä¸­ï¼Œself è¡¨ç¤ºå½“å‰ç±»å¯¹è±¡ï¼Œåœ¨å®žä¾‹æ–¹æ³•ä¸­ self è¡¨ç¤ºå®žä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªæ˜¯æœ¬è´¨åŒºåˆ«ï¼ŒåŠ¡å¿…è¦ç†è§£é€å½»ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233- (void)play&#123; NSLog(@"---------------- '- (void)play' ------------------"); NSLog(@"self: %@, self -&gt; %p", self, self); // æ‰“å°å¯¹åº”çš„ç±»åœ°å€ NSLog(@"self class: %p", [self class]); [[self class] eat]; &#125;+ (void)eat&#123; NSLog(@"---------------- '+ (void)eat' ------------------"); // No known class method for selector 'finish' // [self finish]; // æ‰“å° self åœ°å€ NSLog(@"self: %p", self); // è°ƒç”¨ç±»æ–¹æ³• [self beat];&#125;+ (void)beat&#123; NSLog(@"---------------- '+ (void)beat' ------------------"); // æ‰“å° self åœ°å€ NSLog(@"self: %p", self);&#125; åœ¨å®žä¾‹æ–¹æ³• play ä¸­æ‰“å°ç±»åœ°å€ï¼Œåœ¨ç±»æ–¹æ³• eat å’Œ beat ä¸­æ‰“å° self çš„åœ°å€ï¼Œè¾“å‡ºç»“æžœæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ 0x10adb3f98 è¿™ä¸ªåœ°å€ã€‚ 1234567---------------- &apos;- (void)play&apos; ------------------self: &lt;MZPerson: 0x6000000d8f90&gt;, self -&gt; 0x6000000d8f90self class: 0x10adb3f98---------------- &apos;+ (void)eat&apos; ------------------self: 0x10adb3f98---------------- &apos;+ (void)beat&apos; ------------------self: 0x10adb3f98 ä¸ºäº†æ›´å¥½çš„è¯´æ˜Žï¼Œæˆ‘ç»™å¤§å®¶å†ä¸¾ä¸€ä¸ªå½¢è±¡çš„ä¾‹å­å¸®åŠ©å¤§å®¶ç†è§£ã€‚ åœ¨ MZPerson ä¸­å£°æ˜Žä¸¤ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åŒåï¼Œä¸€ä¸ªæ˜¯å®žä¾‹æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯ç±»æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 1234567891011@interface MZPerson : NSObject- (void)play;+ (void)play;+ (void)eat;- (void)finish;@end 1234567891011121314151617181920212223242526@implementation MZPerson- (void)play&#123; NSLog(@"---------------- '- (void)play' ------------------");&#125;+ (void)play&#123; NSLog(@"---------------- '+ (void)play' ------------------");&#125;+ (void)eat&#123; NSLog(@"---------------- '+ (void)eat' ------------------"); [self play];&#125;- (void)finish&#123; NSLog(@"---------------- '- (void)finish' ------------------"); [self play];&#125;@end åœ¨ç±»æ–¹æ³• eat ä¸­è°ƒç”¨ [self play] åœ¨å®žä¾‹æ–¹æ³• finish ä¸­ä¹Ÿè°ƒç”¨ [self play]ï¼Œé‚£ä¹ˆç»“æžœå¦‚ä½•å‘¢ï¼Ÿ 12345---------------- &apos;- (void)finish&apos; ------------------------------- &apos;- (void)play&apos; --------------------------------- &apos;+ (void)eat&apos; ---------------------------------- &apos;+ (void)play&apos; ----------------- å¯ä»¥çœ‹å‡ºç¬¦åˆå¦‚æœŸï¼Œç±»å’Œå®žä¾‹æ–¹æ³•ä¸­çš„ self åˆ†åˆ«ä»£è¡¨ç±»æœ¬èº«å’Œå®žä¾‹å¯¹è±¡ã€‚ self è¡¨ç¤ºè°ï¼Œåœ¨è¿è¡Œæ—¶æ˜¯ç”±ç¼–è¯‘å™¨æ¥å†³å®šçš„ã€‚ 4ã€æ¯ä¸ªå®žä¾‹å¯¹è±¡çš„ self éƒ½æ˜¯ä¸ä¸€æ ·çš„è¿™ä¸ªè·Ÿ Java çš„ this æ˜¯ä¸€æ ·çš„ï¼Œæ¯ä¸ªç±»çš„å®žä¾‹å¯¹è±¡å¯¹åº”çš„ this éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œself äº¦å¦‚æ­¤ã€‚ ä¸‹é¢çš„ä¾‹å­ï¼Œåˆ†åˆ«åˆ›å»ºä¸¤ä¸ª MZPerson å®žä¾‹å¯¹è±¡ï¼Œç„¶åŽåˆ†åˆ«è°ƒç”¨play æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 12345MZPerson *iperson1 = [MZPerson new];[iperson1 play]; MZPerson *iperson2 = [MZPerson new];[iperson2 play]; è¾“å‡ºç»“æžœè¡¨æ˜Žäº†ä¸Šé¢è¯´æ³•çš„æ­£ç¡®æ€§ã€‚ 1234---------------- &apos;- (void)play&apos; ------------------self: &lt;MZPerson: 0x600000576ee0&gt;, self -&gt; 0x600000576ee0---------------- &apos;- (void)play&apos; ------------------self: &lt;MZPerson: 0x600000576f40&gt;, self -&gt; 0x600000576f40 æœ€åŽåœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œä½¿ç”¨ self è°ƒç”¨æ–¹æ³•æ—¶ï¼Œé¦–å…ˆä»Žå½“å‰ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹å¯»æ‰¾ï¼Œå¦‚æžœæ²¡æœ‰å†ä»Žçˆ¶ç±»ä¸­å¯»æ‰¾ã€‚ è¿è¡Œæ—¶(runtime)ä¼šä½¿ç”¨ objc_msgSend å‘å¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œè¿™ä¸ªä¹Ÿæ˜¯è°ƒç”¨æ–¹æ³•çš„æœ¬è´¨ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Objective-C self keyword</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Wireshark: åˆ†æž TCP å››æ¬¡æŒ¥æ‰‹]]></title>
    <url>%2F2018%2F12%2F16%2FWireshark-%E5%88%86%E6%9E%90-TCP-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹é¦–å…ˆè¦æ˜Žç™½ TCP åè®®æ˜¯ä¸€ç§é¢å‘è¿žæŽ¥çš„ã€å¯é çš„ã€åŸºäºŽå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚ å…¶æ¬¡ï¼ŒTCP æ˜¯å…¨åŒå·¥æ¨¡å¼ï¼Œéœ€è¦ä¸¤è¾¹çš„è¿žæŽ¥å…¨éƒ¨å…³é—­ï¼Œæ­¤ TCP ä¼šè¯æ‰ç®—å®Œå…¨å…³é—­ï¼Œå››æ¬¡æŒ¥æ‰‹ä½¿å¾— TCP çš„å…¨åŒå·¥è¿žæŽ¥èƒ½å¤Ÿå¯é çš„ç»ˆæ­¢ã€‚ TCP çš„è¿žæŽ¥çš„æ‹†é™¤éœ€è¦å‘é€å››ä¸ªåŒ…ï¼Œå› æ­¤ç§°ä¸ºå››æ¬¡æŒ¥æ‰‹(Four-way handshake)ï¼Œä¹Ÿå«åšæ”¹è¿›çš„ä¸‰æ¬¡æ¡æ‰‹ã€‚å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨å‡å¯ä¸»åŠ¨å‘èµ·æŒ¥æ‰‹åŠ¨ä½œï¼Œåœ¨ socket ç¼–ç¨‹ä¸­ï¼Œä»»ä½•ä¸€æ–¹æ‰§è¡Œ close() æ“ä½œå³å¯äº§ç”ŸæŒ¥æ‰‹æ“ä½œã€‚ ä¸‹é¢æ ¹æ®å®¢æˆ·ç«¯(IP: 10.4.17.176)è¯·æ±‚æœåŠ¡ç«¯(IP: 116.211.186.208) æ¥åˆ†æžå››æ¬¡æŒ¥æ‰‹(four-way handshake)çš„è¿‡ç¨‹ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œä»»ä½•ä¸€æ–¹æ‰§è¡Œ close() æ“ä½œå³å¯äº§ç”ŸæŒ¥æ‰‹æ“ä½œï¼Œæ‰€ä»¥æ–­å¼€è¿žæŽ¥ç«¯å¯ä»¥æ˜¯ Client ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ Server ç«¯ã€‚ åœ¨é˜…è¯»ä¸‹é¢å†…å®¹ä¹‹å‰ï¼Œæˆ‘å‡è®¾ä½ å·²ç»é˜…è¯»è¿‡ Wireshark: ç®€å•åˆ†æž TCP ä¸‰æ¬¡æŒ¥æ‰‹ è¿™ç¯‡æ–‡ç« ã€‚ åˆ†æžä½¿ç”¨ iOS è®¾å¤‡çš„æµè§ˆå™¨å®¢æˆ·ç«¯ Safari è®¿é—® 116.211.186.208 è¿™ä¸ªç½‘ç«™ï¼Œå…³äºŽå¦‚ä½•å¼€å¯ iOS è®¾å¤‡çš„è™šæ‹Ÿç½‘å¡å¯ä»¥å‚è€ƒ åˆè¯† Wireshark è¿™ç¯‡æ–‡ç« ã€‚ é’ˆå¯¹ HTTP çš„è¯·æ±‚ï¼Œå¯ä»¥è¿›è¡Œ Followï¼Œé€‰æ‹© TCP Stream å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤æ—¶ï¼Œå¯ä»¥çœ‹åˆ°å››æ¬¡æŒ¥æ‰‹çš„æŠ“åŒ…æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå¦å¤–ï¼Œä»Žä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆå‘èµ· Close çš„æ˜¯æœåŠ¡ç«¯ã€‚ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼Œå‘é€ FIN å’Œ ACK æŠ¥æ–‡ï¼Œå¦‚å›¾ï¼š ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼Œå®¢æˆ·ç«¯å‘é€ ACK æŠ¥æ–‡ç»™æœåŠ¡ç«¯ï¼Œå¦‚å›¾ï¼š ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼Œå®¢æˆ·ç«¯å‘é€ FIN å’Œ ACK æŠ¥æ–‡ç»™æœåŠ¡ç«¯ï¼Œå¦‚å›¾ï¼š ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼ŒæœåŠ¡ç«¯å‘é€ ACK æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œå¦‚å›¾ï¼š ä»Žå›¾ä¸­æŠ“åŒ…æ¥çœ‹ï¼Œseq å’Œ ack çš„å€¼å˜åŒ–å¦‚ä¸‹è¡¨ï¼š æ¬¡æ•° seq å€¼ ack å€¼ 1 140 447 2 447 141 3 447 141 4 141 448 å°ç»“ç»“åˆä¸Šé¢æŠ“åŒ…çš„ç¤ºä¾‹ï¼Œå°ç»“ä¸€ä¸‹å››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ã€‚ åœ¨å‰é¢è¯´è¿‡ï¼Œæ–­å¼€è¿žæŽ¥ç«¯å¯ä»¥æ˜¯ Client ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ Server ç«¯ï¼Œæˆ‘ä¸Šé¢çš„ä¾‹å­é¦–å…ˆå‘èµ· close çš„ä¸€æ–¹æ˜¯ Server ç«¯ã€‚ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯å‘é€ä¸€ä¸ª [FIN+ACK] æŠ¥æ–‡ï¼Œè¡¨ç¤ºè‡ªå·±æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œæƒ³æ–­å¼€è¿žæŽ¥ï¼Œå¹¶è¿›å…¥ fin_wait_1 çŠ¶æ€ï¼ˆä¸èƒ½å†å‘é€æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼Œä½†èƒ½å¤Ÿå‘é€æŽ§åˆ¶ä¿¡æ¯ ACK åˆ°å®¢æˆ·ç«¯ï¼‰ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° [FIN] æŠ¥æ–‡åŽï¼Œå®¢æˆ·ç«¯çŸ¥é“ä¸ä¼šå†æœ‰æ•°æ®ä»ŽæœåŠ¡ç«¯ä¼ æ¥ï¼Œå‘é€ ACK è¿›è¡Œç¡®è®¤ï¼Œå®¢æˆ·ç«¯è¿›å…¥ close_wait çŠ¶æ€ã€‚æ­¤æ—¶æœåŠ¡ç«¯æ”¶åˆ°äº†å®¢æˆ·ç«¯å¯¹ FIN çš„ ACK åŽï¼Œè¿›å…¥ fin_wait2 çŠ¶æ€ã€‚ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ [FIN ACK] æŠ¥æ–‡ç»™å¯¹æ–¹ï¼Œè¡¨ç¤ºè‡ªå·±æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œå®¢æˆ·ç«¯è¿›å…¥ last_ack çŠ¶æ€ã€‚æœåŠ¡ç«¯æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ FIN ä¿¡ä»¤åŽï¼Œè¿›å…¥ time_wait çŠ¶æ€ï¼Œå¹¶å‘é€ ACK ç¡®è®¤æ¶ˆæ¯ã€‚ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯åœ¨ time_wait çŠ¶æ€ä¸‹ï¼Œç­‰å¾… 2MSL(MSLæ˜¯æ•°æ®åˆ†èŠ‚åœ¨ç½‘ç»œä¸­å­˜æ´»çš„æœ€é•¿æ—¶é—´) ä¸€æ®µæ—¶é—´ï¼Œæ²¡æœ‰æ•°æ®åˆ°æ¥çš„ï¼Œå°±è®¤ä¸ºå¯¹é¢å·²ç»æ”¶åˆ°äº†è‡ªå·±å‘é€çš„ ACK å¹¶æ­£ç¡®å…³é—­äº†è¿›å…¥ close çŠ¶æ€ï¼Œè‡ªå·±ä¹Ÿæ–­å¼€äº†åˆ°å®¢æˆ·ç«¯çš„ TCP è¿žæŽ¥ï¼Œé‡Šæ”¾æ‰€æœ‰èµ„æºã€‚å½“å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„ACK å›žåº”åŽï¼Œä¼šè¿›å…¥ close çŠ¶æ€ï¼Œå¹¶å…³é—­æœ¬ç«¯çš„ä¼šè¯æŽ¥å£ï¼Œé‡Šæ”¾ç›¸åº”èµ„æºã€‚ æ ¹æ® wireshark æŠ“åŒ…å’Œä¸Šé¢æµç¨‹çš„åˆ†æžï¼Œå¯ä»¥ç”»å‡ºå¦‚ä¸‹ç¤ºæ„æµç¨‹å›¾ï¼š æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Wireshark tcp ip udp http https</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å½“ NTFS é‡ä¸Š MacOS]]></title>
    <url>%2F2018%2F11%2F24%2F%E5%BD%93-NTFS-%E9%81%87%E4%B8%8A-MacOS%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹è‡ªå·±ä½¿ç”¨çš„ MacBook Pro ç”µè„‘æ˜¯ 256G çš„ï¼Œè¿™ä¸ªæœ¬é™ªäº†æˆ‘5ä¸ªæ˜¥ç§‹ï¼Œæ€§èƒ½ä¾æ—§å¼ºåŠ²ï¼Œä¸€ç›´èˆä¸å¾—æŠ›å¼ƒæ¢æ–°(å¥½å§ï¼Œæˆ‘æ‰¿è®¤è‡ªå·±ç©·)ã€‚ ç”±äºŽå·¥ä½œéœ€è¦ï¼Œé‡Œé¢å®‰è£…äº†ä¸å°‘è½¯ä»¶ï¼Œä¹Ÿå­˜å‚¨äº†ä¸å°‘èµ„æ–™ï¼Œé€æ¸å‘çŽ°ç¡¬ç›˜å®¹é‡ä¸è¶³ï¼Œæˆ‘ä¹Ÿä¸€ç›´åœ¨åˆ é™¤ä¸€äº›éžå¿…è¦çš„ä¸œè¥¿ï¼Œå‘çŽ°è¿˜æ˜¯æ¯æ°´è½¦è–ªï¼Œæ²¡åŠžæ³•ï¼Œåˆä¹°äº†ä¸€å—ç§»åŠ¨ç¡¬ç›˜ï¼Œç½‘ç›˜ç”¨èµ·æ¥è¿˜æ˜¯æ²¡æœ‰ç¡¬ç›˜æ–¹ä¾¿ï¼Œæˆ‘ä½¿ç”¨ç½‘ç›˜çš„é¢‘çŽ‡å¾ˆä½Žã€‚ MacOS æŒ‚è½½æˆ‘è§‰å¾—ç§»åŠ¨ç¡¬ç›˜ä¹°å›žæ¥ï¼Œç›´æŽ¥æ’åœ¨ç”µè„‘ä¸Šå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œæœ€åŽå‘çŽ°ç¡¬ç›˜åªèƒ½è¯»ä¸èƒ½å†™ï¼Œå§æ§½ï¼ ä¸Šç½‘æŸ¥äº†ä¸€ä¸‹ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒNTFS æ ¼å¼çš„ç¡¬ç›˜æ’å…¥åˆ° MacOS é‡Œï¼Œæ˜¯åªèƒ½è¯»ä¸èƒ½å†™çš„ï¼Œéœ€è¦æŒ‚è½½ã€‚ äºŽæ˜¯ç»“åˆç½‘ä¸Šå‰è¾ˆçš„ç»éªŒï¼Œå¼„äº†ä¸€ä¸ª shell è„šæœ¬ï¼Œç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œå‘çŽ°æŒºå¥½ç”¨çš„ï¼Œä½†æ˜¯ç”µè„‘é‡å¯åŽï¼Œè„šæœ¬å°±éœ€è¦ä¿®æ”¹ï¼Œè¿˜è¦æŸ¥æ‰¾å½“å‰ç¡¬ç›˜åˆ°åº•åœ¨ disk0 è¿˜æ˜¯åœ¨ disk2 ä¸Šé¢ï¼Œéº»çƒ¦ã€‚ è¿˜å¥½æœ‰ä¸€äº›æ¯”è¾ƒæˆç†Ÿçš„å·¥å…·å¸®æˆ‘ä»¬è§£å†³é—®é¢˜ï¼ŒParagon NTFS for MAC å°±æ˜¯å…¶ä¸­ä¸€ä¸ªã€‚ è¿™ä¸ªå·¥å…·æ˜¯æ”¶è´¹çš„ï¼Œæˆ‘è¯•ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œæ„Ÿè§‰åŠŸèƒ½æŒºå¼ºå¤§çš„ï¼Œå› ä¸ºç©·ä¹Ÿæ‡’å¾—æŠ˜è…¾ç ´è§£ï¼Œå°±æ‰¾äº†å¦å¤–ä¸€ä¸ªå·¥å…· mountyï¼Œå°å·§å¯çˆ±å…³é”®å…è´¹ï¼Œåœ¨å…¬ä¼—å·ä¸Šé¢æ”¶åˆ°çš„èµžèµæˆ‘ä¹Ÿä¼š donate ç»™ä»–ä»¬ã€‚ mounty æœ€æ–°ç‰ˆæœ¬æ˜¯ 1.9ï¼Œä»‹ç»å¦‚ä¸‹ï¼š 1A tiny tool to re-mount write-protected NTFS volumes under Mac OS X 10.9+ in read-write mode. mounty å¤±æ•ˆåœ¨ä½¿ç”¨ mounty æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜æ—¶, å¼¹æ¡†æç¤ºä»¥ä¸‹é”™è¯¯: 12The volume My Passport is not re-mountable in read/write mode.Probably it was not clean unmounted before. è¿™ç§é”™è¯¯çš„åŽŸå› å¤§éƒ¨åˆ†æ˜¯å› ä¸ºåœ¨ Windows ä¸Šé¢ä½¿ç”¨åŽæ²¡æœ‰å®‰å…¨é€€å‡º(ç›´æŽ¥æ‹¨å‡º)è€Œé€ æˆçš„ï¼Œç½‘ä¸Šæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š æ–¹æ¡ˆ 1 æ’å…¥ç§»åŠ¨ç¡¬ç›˜åˆ° Windows ä¸‹é¢ æ‰“å¼€ dos å‘½ä»¤è¡Œï¼Œè¾“å…¥ chkdsk /f, ç„¶åŽå›žè½¦ï¼Œè¾“å…¥ Y ä½¿ç”¨å³ä¸‹è§’çš„å®‰å…¨åˆ é™¤åŽå†æ‹”å‡ºç§»åŠ¨ç¡¬ç›˜ å°†ç§»åŠ¨ç¡¬ç›˜å†æ¬¡æ’å…¥ Mac æ‰“å¼€ mountyé‡æ–°æŒ‚è½½å°±å¯ä»¥äº† åæ­£è¿™ç§æ–¹æ¡ˆæˆ‘æ˜¯æ²¡æœ‰æˆåŠŸï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š æ–¹æ¡ˆ 2 åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œå°†ç§»åŠ¨ç¡¬ç›˜æ’å…¥ï¼Œä½¿ç”¨ 360è½¯ä»¶ ç‚¹å‡» å®‰å…¨é€€å‡º é€€å‡ºç¡¬ç›˜ï¼Œä¸è¦ç›´æŽ¥æ‹”æŽ‰ï¼Œå†åœ¨ Mac ä¸­æ’å…¥ä½¿ç”¨ mounty é‡æ–°æŒ‚è½½å°±è§£å†³é—®é¢˜äº†ã€‚ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>NTFS MacOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§‚å¯Ÿè€…æ¨¡å¼]]></title>
    <url>%2F2018%2F10%2F28%2F%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[ç»„ä»¶é—´é€šä¿¡ï¼Œæˆ‘ä¼šä¼˜å…ˆä½¿ç”¨è·¯ç”±çš„é€šä¿¡æ–¹å¼(iOSä¸­éœ€è¦ç”¨åˆ° runtimeï¼ŒAndroid ä¸­éœ€è¦ç”¨åˆ°åå°„å’Œæ³¨è§£)ï¼Œç»„ä»¶ä¹‹é—´æŒ‰ç…§è·¯ç”±åè®®(ç±»ä¼¼ url)å®žçŽ°å„è‡ªçš„èŒè´£å³å¯ï¼Œç»„ä»¶é—´çš„æ¾è€¦åˆæ€§å¢žå¼ºäº†è½¯ä»¶è®¾è®¡çš„å¼¹æ€§å’Œé«˜å¯ç”¨æ€§ã€‚ è·¯ç”±ç»“åˆè§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¯ä»¥è®©ä½ çš„ç»„ä»¶è®¾è®¡æ›´ä¸Šä¸€å±‚æ¥¼ã€‚è·¯ç”±å¯ä»¥è§£å†³å•å‘è°ƒç”¨çš„é—®é¢˜ï¼Œè®©ç»„ä»¶ä¹‹é—´æ— éœ€çŸ¥é“å¯¹æ–¹æ˜¯å¦å­˜åœ¨ã€‚è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥è®©è°ƒç”¨è€…(ä½¿ç”¨ä½ æ¡†æž¶çš„)å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“ç»„ä»¶çš„å†…éƒ¨äº‹ä»¶ã€‚ æ­¦æž—è‡³å°Šï¼Œå®åˆ€å± é¾™ï¼Œå·ä»¤å¤©ä¸‹ï¼ŒèŽ«æ•¢ä¸ä»Žï¼Œå€šå¤©ä¸å‡ºï¼Œè°ä¸Žäº‰é”‹? åœ¨è¯´è§‚å¯Ÿè€…æ¨¡å¼ä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸‹ iOS ä¸­çš„ä»£ç†(delegate). ä»£ç† delegateåœ¨ iOS ä¸­ï¼Œä»£ç†(delegate)çš„æœ¬è´¨æ˜¯ protocolï¼Œç±»ä¼¼ java ä¸­çš„ Interfaceï¼Œä¸€èˆ¬ç”¨æ¥å¤„ç† ä¸€å¯¹ä¸€ çš„å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹é¢çš„ä¾‹å­æ¨¡æ‹Ÿäº†è°ƒç”¨å’Œå®žçŽ°è¿‡ç¨‹ï¼Œä½¿ç”¨ Bank å¯¹è±¡å’Œ BankDelegate ä»£ç†æ¥æ¨¡æ‹Ÿè¿™ç§æ¨¡å¼ã€‚Bank æœ‰å˜åŠ¨çš„æ—¶å€™ï¼Œé€šè¿‡ notifyAccount æ¥æŽˆæƒ onAccountChanged é€šçŸ¥ç”¨æˆ·ã€‚ BankDelegate.h 12345@protocol BankDelegate &lt;NSObject&gt;- (void)onAccountChanged:(NSUInteger)account;@end Bank.h 1234567@interface Bank : NSObject@property (nonatomic, weak) id&lt;BankDelegate&gt; delegate;- (void)notifyAccount;@end Bank.m 12345678910@implementation Bank- (void)notifyAccount&#123; if ([self.delegate respondsToSelector:@selector(onAccountChanged:)]) &#123; [self.delegate onAccountChanged:100]; &#125;&#125;@end ä½¿ç”¨è€…å®žçŽ° delegate 12345678910111213- (void)viewDidLoad&#123; [super viewDidLoad]; Bank *bank = [Bank new]; bank.delegate = self; [bank notifyAccount];&#125;- (void)onAccountChanged:(NSUInteger)account&#123; NSLog(@"Bank tell me that account is changed. %zd", account);&#125; å½“ç„¶ï¼Œdelegate ä¹Ÿå¯ä»¥åšåˆ° ä¸€å¯¹å¤šï¼Œæ”¹é€ ä¸€ä¸‹ Bank å°±å¯ä»¥å®žçŽ°ã€‚ 1234567@interface Bank : NSObject- (void)addBankDelegate:(id&lt;BankDelegate&gt;)delegate;- (void)notifyAccount;@end Bank å†…éƒ¨ä½¿ç”¨æ•°ç»„å°† addBankDelegate å¾—åˆ°çš„ delegate å­˜èµ·æ¥ï¼ŒnotifyAccount ä¸­å°±å¯ä»¥è¿›è¡Œé€šçŸ¥äº†ã€‚ 12345Bank *bank = [Bank new];// æ¨¡æ‹Ÿæ·»åŠ å¤šä¸ª delegate[bank addBankDelegate:self];[bank addBankDelegate:self];[bank notifyAccount]; è§‚å¯Ÿè€…æ¨¡å¼ç†è§£äº† delegateï¼Œè§‚å¯Ÿè€…æ¨¡å¼å°±å¾ˆå¥½ç†è§£äº†ã€‚ å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–ç€éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œè¿™æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å¸¸è§„å®šä¹‰ã€‚ è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§ ä¸€å¯¹å¤š çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œä½¿ç”¨ Bank å¯¹è±¡å’Œ BankDelegate æ¥æ¨¡æ‹Ÿè¿™ç§æ¨¡å¼ï¼ŒBank æœ‰å˜åŠ¨çš„æ—¶å€™ï¼Œé€šè¿‡ notifyAccount æ¥æŽˆæƒ onAccountChanged é€šçŸ¥æ‰€æœ‰æ³¨å†Œäº† BankDelegate çš„ç”¨æˆ·ã€‚ Talk is cheap. Show me the code BankDelegate.h 12345@protocol BankDelegate &lt;NSObject&gt;- (void)onAccountChanged:(NSUInteger)account;@end Bank.h 123456789@interface Bank : NSObject- (void)addBankObserver:(id&lt;BankDelegate&gt;)delegate;- (void)removeBankObserver:(id&lt;BankDelegate&gt;)delegate;- (void)notifyAccount;@end Bank.m 123456789101112131415161718192021222324- (void)notifyAccount&#123; for (id&lt;BankDelegate&gt; delegate in self.delegates) &#123; if ([delegate respondsToSelector:@selector(onAccountChanged:)]) &#123; [delegate onAccountChanged:100]; &#125; &#125;&#125;- (void)addBankObserver:(id&lt;BankDelegate&gt;)delegate&#123; if (nil == delegate) &#123; return; &#125; [self.delegates addObject:delegate];&#125;- (void)removeBankObserver:(id&lt;BankDelegate&gt;)delegate&#123; if (self.delegates.count &gt; 0) &#123; [self.delegates removeObject:delegate]; &#125;&#125; è°ƒç”¨è€… 12345678910111213141516171819- (void)viewDidLoad&#123; [super viewDidLoad]; [self registerObserver];&#125;- (void)onAccountChanged:(NSUInteger)account&#123; NSLog(@"Bank tell me that account is changed. %zd", account);&#125;- (void)registerObserver&#123; Bank *bank = [Bank new]; [bank addBankObserver:self]; [bank addBankObserver:self]; [bank notifyAccount];&#125; çœ‹åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥å‘çŽ° delegate çš„è®¾è®¡å…¶å®žå°±æ˜¯è§‚å¯Ÿè€…çš„ä¸€ç§è®¾è®¡æ‰‹æ®µè€Œå·²ï¼Œå®ƒæœ¬èº«ä¹Ÿæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ã€‚ åœ¨ iOS ä¸­ï¼Œé™¤äº† delegateï¼Œè¿˜æœ‰å¾ˆå¤šè¿™ç§è®¾è®¡æ¨¡å¼çš„ä½“çŽ°ï¼Œå¦‚ KVOã€Notificationã€Observerã€Block ç­‰ã€‚ å‘å¸ƒ-è®¢é˜…æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼ä¸­è§‚å¯Ÿè€…å¯¹è¢«è§‚å¯Ÿè€…(Bank)æ˜¯æœ‰æ„ŸçŸ¥çš„ï¼Œè‡³å°‘éœ€è¦å®žçŽ°å¯¹åº”çš„ BankDelegateï¼ŒäºŒè€…ä¹‹é—´è¿˜æ˜¯æ˜¯æœ‰ä¸€å®šçš„è€¦åˆåº¦ã€‚ é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å†æ¥é™ä½Žè¿™ç§è€¦åˆï¼Œè®©åŒæ–¹éƒ½ä¸ç”¨åŽ»å…³å¿ƒå¯¹æ–¹çš„å­˜åœ¨å‘¢ï¼Ÿå‘å¸ƒ-è®¢é˜…æ¨¡å¼æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ å‘å¸ƒ-è®¢é˜…æœ¬è´¨ä¹Ÿæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä½†æ˜¯ä»–æ›´åŠ çš„æ¾è€¦åˆï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…éƒ½ä¸ç”¨æ¸…æ¥šå¯¹æ–¹ï¼Œå…¨éƒ¨ç”±è®¢é˜…ä¸­å¿ƒåšå¤„ç†ï¼Œè¿™æ ·è€¦åˆåº¦å°±å‡ ä¹Žæ²¡æœ‰äº†ã€‚ å¦‚å›¾å±•ç¤ºå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼š åœ¨ iOS ä¸­ï¼ŒNotification å°±æ˜¯å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„ä¸€ç§å®žçŽ°ï¼ŒNSNotificationCenter å°±ç±»ä¼¼è®¢é˜…ä¸­å¿ƒã€‚ 12345678// å‘å¸ƒ[[NSNotificationCenter defaultCenter] postNotificationName:@"name_protocol" object:nil];// è®¢é˜…[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onUpdate:) name:@"name_protocol" object:nil]; äº‰è®ºç½‘ä¸Šæœ‰å¾ˆå¤šäººè¯´ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒ-è®¢é˜…æ¨¡å¼æ˜¯ä¸¤ç§ä¸åŒçš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒä»¬åŽ‹æ ¹å°±æ˜¯ä¸¤ç äº‹ï¼Œä¸èƒ½æ··ä¸ºä¸€è°ˆã€‚ä¹Ÿæœ‰å¾ˆå¤šäººè¯´ï¼Œä¸¤è€…å…¶å®žéƒ½æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œåªæ˜¯å®žçŽ°æ‰‹æ®µæœ‰ç‚¹ä¸ä¸€æ ·ç½¢äº†ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚ æ±Ÿæ¹–çº·äº‰ï¼Œä¼—è¯´çº·çº­ï¼ è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œåœ¨è§‚å¯Ÿè€…æ¨¡å¼åŸºç¡€ä¸Šä½ å¯ä»¥è¡ç”Ÿæ›´å¤šçš„è®¾è®¡æ¨¡å¼å’Œæ›´å¤šçš„è®¾è®¡æ€æƒ³ã€‚æ¨¡å¼çš„å®žçŽ°æ‰‹æ®µå¯ä»¥å¤šæ ·åŒ–ï¼Œæ²¡æœ‰æœ€å¥½åªæœ‰æ›´å¥½ï¼Œå°±å¥½æ¯” MVCã€MVPã€MVVM ç­‰ï¼Œä½ è¯´å®ƒä»¬æ˜¯è®¾è®¡æ¨¡å¼ä¹Ÿå¥½ï¼Œæ˜¯è®¾è®¡æ€è·¯ä¹Ÿç½¢ï¼Œå…³é”®æ˜¯åˆ©ç”¨å®ƒä»¬æœ‰æ²¡æœ‰è§£å†³ä¸šåŠ¡éœ€æ±‚ï¼Œä¸ºäº†æ¨¡å¼è€Œæ¨¡å¼çš„è®¾è®¡åŽè€Œä¸å®žï¼ ä¸ªäººè§‰å¾—ï¼Œå‘å¸ƒ-è®¢é˜…æ¨¡å¼åªæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§å®žçŽ°æ‰‹æ®µï¼Œå®ƒæœ¬è´¨è¿˜æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ã€‚ æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>Philosophy</category>
      </categories>
      <tags>
        <tag>æž¶æž„ æ¨¡å—åŒ– ç»„ä»¶åŒ– Observer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macOS ä¸­ç¥žç§˜çš„ GCC]]></title>
    <url>%2F2018%2F10%2F13%2FmacOS-%E4%B8%AD%E7%A5%9E%E7%A7%98%E7%9A%84-GCC%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ è¿™ä¸ªäº‹æƒ…ï¼Œè¦ä»Žç¼–è¯‘ä¸€ä¸ªç®€å•çš„ä»£ç å¼€å§‹è¯´èµ·ã€‚ gcc å’Œ g++ çš„åŒºåˆ«gcc æ˜¯ GCC ä¸­çš„ GUN C Compilerï¼ŒC ç¼–è¯‘å™¨ã€‚ g++ æ˜¯ GCC ä¸­çš„ GUN C++ Compilerï¼ŒC++ç¼–è¯‘å™¨ã€‚ å°±æœ¬è´¨è€Œè¨€ï¼Œgcc å’Œ g++ å¹¶ä¸æ˜¯ç¼–è¯‘å™¨ï¼Œä¹Ÿä¸æ˜¯ç¼–è¯‘å™¨çš„é›†åˆï¼Œå®ƒä»¬åªæ˜¯ä¸€ç§é©±åŠ¨å™¨ï¼Œæ ¹æ®å‚æ•°ä¸­è¦ç¼–è¯‘çš„æ–‡ä»¶çš„ç±»åž‹ï¼Œè°ƒç”¨å¯¹åº”çš„ GUN ç¼–è¯‘å™¨è€Œå·²ã€‚ gcc ä¸Ž g++ éƒ½å¯ä»¥ç¼–è¯‘ C å’Œ C++ æ–‡ä»¶ï¼Œåªæ˜¯å¤„ç†æ–¹å¼ä¸åŒã€‚ å¯ä»¥å‚è€ƒ GCCçš„gccå’Œg++åŒºåˆ« è¿™ç¯‡æ–‡ç« ã€‚ äº¤æ¢å˜é‡ï¼šç”¨æŒ‡é’ˆä¸‹é¢è¿™æ®µä»£ç å¾ˆç®€å•ï¼Œåˆ©ç”¨ C æŒ‡é’ˆå®žçŽ°äº¤æ¢ä¸¤ä¸ªå˜é‡çš„ç›®çš„ã€‚ æºæ–‡ä»¶ï¼šmz_swap.c 123456789101112131415161718192021222324252627282930313233#include &lt;stdio.h&gt;// ä½¿ç”¨æŒ‡é’ˆçš„æ–¹å¼äº¤æ¢ä¸¤ä¸ªå˜é‡int mz_swap(int *ap, int *bp);int main(int argc, char * argv[]) &#123; int xp = 901; int yp = 902; printf("--Before-- xp = %i, yp = %i\n", xp, yp); mz_swap(&amp;xp, &amp;yp); printf("--After--- xp = %i, yp = %i\n", xp, yp); return 0;&#125;int mz_swap(int *ap, int *bp) &#123; if (NULL == ap || NULL == bp) &#123; return -1; &#125; int tp = *ap; *ap = *bp; *bp = tp; return 0;&#125; åœ¨ macOS ä¸‹ä½¿ç”¨ gcc ç¼–è¯‘ mz_swap.cï¼Œäº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ exec_main.outï¼Œå¦‚ä¸‹æ“ä½œï¼š 1gcc mz_swap.c -o exec_main.out ç¼–è¯‘æˆåŠŸï¼Œæ‰§è¡Œ ./exec_main.outï¼Œæ­£å¸¸è¾“å‡ºç»“æžœï¼š 12--Before-- xp = 901, yp = 902--After--- xp = 902, yp = 901 é‡‡ç”¨ g++ æ¥ç¼–è¯‘ï¼Œå¦‚ä¸‹æ“ä½œï¼š 1g++ mz_swap.c -o exec_main.out æŠ¥å‡ºå¦‚ä¸‹è­¦å‘Šï¼Œè¯¥è­¦å‘Šçš„æ„æ€æ˜¯åœ¨ C++ æ¨¡å¼ä¸‹å¼ºåˆ¶ç¼–è¯‘ C æ–‡ä»¶ï¼Œè¿™é‡Œå¯ä»¥ä¸äºˆç†ä¼šã€‚ 1clang: warning: treating 'c' input as 'c++' when in C++ mode, this behavior is deprecated [-Wdeprecated] è™½ç„¶æœ‰è­¦å‘Šï¼Œä½†æ˜¯ç¼–è¯‘å¯ä»¥äº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ exec_main.out ä¸”å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„ï¼Œæ‰§è¡Œç»“æžœè·Ÿä¸Šé¢ä¸€æ ·ã€‚ äº¤æ¢å˜é‡ï¼šç”¨å¼•ç”¨å¤§å®¶éƒ½çŸ¥é“ï¼ŒC æ²¡æœ‰ å¼•ç”¨ è¿™ä¸ªæ¦‚å¿µï¼Œè€Œ C++ æ˜¯æœ‰ å¼•ç”¨ æ¦‚å¿µçš„ï¼Œå¯ä»¥åœ¨æ­¤äº†è§£ C++ å¼•ç”¨. è¯•ä¸€ä¸‹ä½¿ç”¨ gcc ç¼–è¯‘ä½¿ç”¨ å¼•ç”¨ æ–¹å¼ç¼–å†™çš„ C ä»£ç ï¼ŒæŒ‰ç…§è¯´æ³•ï¼Œgcc æ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ã€‚ æºæ–‡ä»¶ï¼šmz_swap_ref.c 1234567891011121314151617181920212223242526272829#include &lt;stdio.h&gt;// ä½¿ç”¨å¼•ç”¨çš„æ–¹å¼äº¤æ¢ä¸¤ä¸ªå˜é‡int mz_swap_ref(int &amp;ap, int &amp;bp);int main(int argc, char * argv[]) &#123; int xp = 901; int yp = 902; printf("--Before-- xp = %i, yp = %i\n", xp, yp); mz_swap_ref(xp, yp); printf("--After--- xp = %i, yp = %i\n", xp, yp); return 0;&#125;int mz_swap_ref(int &amp;ap, int &amp;bp) &#123; int tp = ap; ap = bp; bp = tp; return 0;&#125; ç¼–è¯‘ 1gcc mz_swap_ref.c -o exec_main.out ç¼–è¯‘å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š 12345mz_swap_ref.c:4:21: error: expected ')'int mz_swap_ref(int &amp;ap, int &amp;bp); ^mz_swap_ref.c:4:16: note: to match this '('int mz_swap_ref(int &amp;ap, int &amp;bp); æ—¢ç„¶æŒ‰ç…§ C çš„ç¼–è¯‘æ–¹å¼ä¸è¡Œï¼Œé‚£å°±æ¢æˆ g++ æ¥ç¼–è¯‘ã€‚ 1g++ mz_swap_ref.c -o exec_main.out ç¼–è¯‘æˆåŠŸï¼Œæ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ 1./exec_main.out 12--Before-- xp = 901, yp = 902--After--- xp = 902, yp = 901 å¤§å®¶å¯ä»¥è‡ªå·±åŠ¨æ‰‹è¯•è¯•ï¼Œä½¿ç”¨ clang æ¥ç¼–è¯‘ mz_swap_ref.c å’Œä½¿ç”¨ gcc æ¥ç¼–è¯‘éƒ½æ˜¯æŠ¥é”™ï¼Œä½¿ç”¨ clang++ å’Œ g++ ç¼–è¯‘éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ åœ¨åšå®¢ GCC: Homebrew å®‰è£… GCC å’Œ Binutils ä¸­ï¼Œæˆ‘å·²ç»åˆ†äº«äº†åœ¨ macOS ä¸­çš„ gcc å’Œ g++ ä¸æ˜¯ GNU æä¾›çš„ï¼Œè€Œæ˜¯ Apple è‡ªå·±çš„ clangã€‚ è¿™é‡Œè¦è¯´æ˜Žçš„æ˜¯å³ä½¿ä½¿ç”¨è‡ªå·±å®‰è£…çš„ gcc(gcc-4.9) æ¥ç¼–è¯‘ mz_swap_ref.c ä¹Ÿæ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ï¼ŒéªŒè¯å¦‚ä¸‹ï¼š 1gcc-4.9 mz_swap_ref.c -o exec_main.out é”™è¯¯ä¿¡æ¯ï¼š 12345mz_swap_ref.c:4:21: error: expected &apos;;&apos;, &apos;,&apos; or &apos;)&apos; before &apos;&amp;&apos; token int mz_swap_ref(int &amp;ap, int &amp;bp); ^mz_swap_ref.c:20:21: error: expected &apos;;&apos;, &apos;,&apos; or &apos;)&apos; before &apos;&amp;&apos; token int mz_swap_ref(int &amp;ap, int &amp;bp) &#123; ^ gccã€g++ å’Œ clang çš„å…³ç³»åœ¨ macOS ä¸­ï¼Œgcc ä»¥æŸç§æ–¹å¼æŒ‡å‘ llvm-gcc ç¼–è¯‘å™¨ï¼Œg++ äº¦å¦‚æ­¤ã€‚ 1In Apple&apos;s version of GCC, both cc and gcc are actually symbolic links to the llvm-gcc compiler. Similarly, c++ and g++ are links to llvm-g++. llvm-gcc æ˜¯ c/c++/oc çš„ç¼–è¯‘å™¨ï¼Œç”¨äº† gcc å‰ç«¯å’Œå‘½ä»¤è¡Œç•Œé¢çš„ llvm. 1llvm-gcc is a C, C++, Objective-C and Objective-C++ compiler. llvm-g++ is a compiler driver for C++. llvm-gcc uses gcc front-end and gcc&apos;s command line interface. æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ llvm-gccï¼Œå¯ä»¥ä½¿ç”¨ which llvm-gcc çœ‹ä¸€ä¸‹ llvm-gcc æ‰€åœ¨ä½ç½®æ˜¯ /usr/bin/llvm-gccï¼Œæ‰“å¼€ç›®å½•å¯ä»¥çœ‹å‡ºå…¶å®žæ˜¯ä¸€ä¸ªç¬¦å·é“¾æŽ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1ls -l /usr/bin/llvm-gcc 1/usr/bin/llvm-gcc -&gt; clang å®ƒä»¬æ˜¯ç»Ÿä¸€æŒ‡å‘ clang çš„ç¬¦å·é“¾æŽ¥ï¼Œå¯ä»¥çœ‹å…¶åŽŸå§‹æŒ‡å‘ï¼Œllvm-gcc æŒ‡å‘ clangï¼Œllvm-g++ æŒ‡å‘ clang++ã€‚ äºŒè€…éƒ½åœ¨ /usr/bin/ ç›®å½•ä¸‹ï¼š å…¶å®žåœ¨ macOS ä¸­ cc ç¼–è¯‘å™¨ä¹ŸæŒ‡å‘ clangã€‚ æ€»ç»“é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥å­¦åˆ°å¦‚ä¸‹å‡ ç‚¹çŸ¥è¯†ï¼š 1ã€C è¯­è¨€è§„èŒƒä¸­æ²¡æœ‰ å¼•ç”¨ çš„æ¦‚å¿µï¼Œä½¿ç”¨ C ç¼–è¯‘å™¨æ— æ³•ä½¿å…¶ç¼–è¯‘é€šè¿‡ï¼Œä½†æ˜¯ä½¿ç”¨ C++ ç¼–è¯‘å™¨æ˜¯å¯ä»¥ç¼–è¯‘é€šè¿‡çš„ã€‚è¿™æ˜¯å› ä¸ºå„è‡ªçš„ç¼–è¯‘å™¨æ˜¯éµå¾ªè¯­è¨€è§„èŒƒçš„ã€‚ 2ã€macOS ä¸­çš„ gcc å’Œ g++ è‹¹æžœå¼€å‘è€…ä»¬å¹¶æ²¡æœ‰åŽ»æ”¹é€ å’Œé‡å†™å®ƒä»¬ï¼Œåªæ˜¯åˆ†åˆ«æŒ‡å‘ clang å’Œ clang++ ç¼–è¯‘å™¨ã€‚ 3ã€å¦‚æžœä¸æƒ³ä½¿ç”¨ macOS ä¸­çš„ gcc å’Œ g++ï¼Œå°±éœ€è¦è‡ªå·±é‡æ–°å®‰è£… GNU çš„ç¼–è¯‘å¥—ä»¶ï¼Œå®‰è£…å’Œä½¿ç”¨æ–¹æ³•å·²ç»åœ¨åšå®¢ä¸­æœ‰è¯´æ˜Žã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>gcc g++ clang clang++ cc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SVN æ£€å‡ºæ–‡ä»¶]]></title>
    <url>%2F2018%2F10%2F06%2FSVN-%E6%A3%80%E5%87%BA%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[éœ€æ±‚å¯¹äºŽä¸€äº›å¤§å·¥ç¨‹, æ•´ä¸ª svn ä»“åº“æ–‡ä»¶è¿‡å¤§(åŠ¨è¾„å‡ åä¸ªGçš„éƒ½æœ‰)ï¼Œä¸æƒ³æŠŠæ•´ä¸ª checkout ä¸‹æ¥ï¼Œä½†æ˜¯åˆæƒ³ç»´æŒæ•´ä¸ªç›®å½•ç»“æž„ä»¥æ–¹ä¾¿åŽç»­ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ Subversion1.5 ä¹‹åŽçš„ --depth å‚æ•°æ¥åª checkout éœ€è¦çš„å­ç›®å½•. å¦‚æžœåªæƒ³æŠŠ svn ä»“åº“é‡Œé¢æŸä¸ªæ–‡ä»¶ checkout åˆ°æœ¬åœ°, ä¸æƒ³ checkout æ•´ä¸ªç›®å½•, å¦‚ä½•æ“ä½œå‘¢? å®žæ–½å‡è®¾éœ€è¦ checkout å‡ºæ¥çš„æ–‡ä»¶æ˜¯ ReadMe.md, å…¶ svn åœ°å€æ˜¯: http://svn.xxx.com/path/ReadMe.mdï¼Œå…¶ä¸Šçº§ç›®å½•çš„è¿œç¨‹åœ°å€æ˜¯ http://svn.xxx.com/path. æ³¨æ„ï¼šä»¥ä¸‹å‡ºçŽ° svn co å°±æ˜¯ svn checkout çš„ç¼©å†™. æ–¹æ¡ˆä¸€å¤§éƒ¨åˆ†äººéƒ½ä¼šåœ¨ç¬¬ä¸€æ—¶é—´æƒ³åˆ°å¦‚ä¸‹çš„æ“ä½œ: 1svn co http://svn.xxx.com/path/ReadMe.md å®žé™…ä¸Šè¿™æ ·æ“ä½œä¼šæŠ¥é”™çš„, æŠ¥é”™ä¿¡æ¯å¤§æ¦‚æ„æ€æ˜¯ ä¸å¯ä»¥ checkout ä¸€ä¸ªæ–‡ä»¶, åªèƒ½ checkout ç›®å½•ã€‚ æ‰€ä»¥ï¼Œè¯¥æ–¹æ¡ˆä¸å¯è¡Œã€‚ æ–¹æ¡ˆäºŒç¬¬ä¸€æ­¥: checkout ç›®å½• 1svn co --depth=empty http://svn.xxx.com/path/ ./ ./ è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œ--depth=empty è¡¨ç¤ºæ£€å‡ºç©ºç›®å½•ã€‚ ç¬¬äºŒæ­¥: æ›´æ–°æ–‡ä»¶ 1svn up ReadMe.md è¿™é‡Œç›´æŽ¥ svn up å°±å¯ä»¥å°†ä½ éœ€è¦çš„æ–‡ä»¶ checkout å‡ºæ¥äº†ã€‚ ä¿®æ”¹æ–‡ä»¶åŽ, ä¹Ÿå¯ä»¥ç›´æŽ¥æäº¤åˆ° svn ä»“åº“. ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤: 1svn ci ReadMe.md -m &quot;update.&quot; æ–¹æ¡ˆä¸‰ä½¿ç”¨ svn export å‘½ä»¤å°†æ–‡ä»¶å¯¼å‡ºï¼Œç„¶åŽå°† svn import å‘½ä»¤å¯¼å…¥æ–‡ä»¶åˆ° svn ä»“åº“ã€‚ ä¸€èˆ¬ä¸´æ—¶æƒ³ checkout ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šä½¿ç”¨ æ–¹æ¡ˆä¸‰, æ¯”è¾ƒæ­£å¼çš„æ“ä½œï¼Œæˆ‘ä¼šé€‰æ‹© æ–¹æ¡ˆäºŒï¼Œå› ä¸º æ–¹æ¡ˆäºŒ è¿™æ ·æ—¢å¯åœ¨ä¸å¢žåŠ ç£ç›˜å¤§å°çš„æƒ…å†µä¸‹ä¿æŒ svn ä»“åº“çš„ç›®å½•ç»“æž„ï¼Œåˆå¯ä»¥ä»»æ„ checkout æ–‡ä»¶ã€‚ ç¨€ç–ç›®å½•ä¸Šé¢çš„ æ–¹æ¡ˆäºŒï¼Œå…¶å®žå°±æ˜¯ svn çš„ä¸€ç§ç¨€ç–æ£€å‡ºçš„æ“ä½œã€‚ Subversion 1.5 å¼€å§‹æ”¯æŒç¨€ç–æ£€å‡ºï¼Œå…è®¸å¯¹ç›®å½•è®¾ç½®æ·±åº¦ï¼ˆdepthï¼‰ã€‚ å…³äºŽ depth å‡ ä¸ªå‚æ•°çš„å«ä¹‰: â€“depth emptyï¼šåªåŒ…å«ç›®å½•è‡ªèº«ï¼Œä¸åŒ…å«ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶å’Œå­ç›®å½•ã€‚ â€“depth filesï¼šåŒ…å«ç›®å½•å’Œç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä¸åŒ…å«å­ç›®å½•ã€‚ â€“depth immediatesï¼šåŒ…å«ç›®å½•å’Œç›®å½•ä¸‹çš„æ–‡ä»¶åŠå­ç›®å½•ã€‚ä½†ä¸å¯¹å­ç›®å½•é€’å½’ã€‚ â€“depth infinityï¼šè¿™æ˜¯é»˜è®¤çš„ï¼ŒåŒ…å«æ•´ä¸ªç›®å½•æ ‘ã€‚ ä½¿ç”¨æ ¼å¼å¦‚ä¸‹: 1svn checkout URL --depth empty|files|immediates|infinity æˆ–è€… 1svn checkout URL --depth=empty|files|immediates|infinity]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>svn depth ç¨€ç–ç›®å½•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cocoapods: ç§æœ‰ä»“åº“]]></title>
    <url>%2F2018%2F09%2F24%2FCocoapods-%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨åœºæ™¯åœ¨æˆ‘ä¹‹å‰çš„åšå®¢ä¸­åˆ†äº«äº†å‡ ç¯‡å…³äºŽ Cocoapods çš„æ–‡ç« ï¼ˆæ–‡æœ«æœ‰é“¾æŽ¥ï¼‰ï¼Œä»Šå¤©åˆ†äº«å¦å¤–ä¸€ä¸ªä¸»é¢˜å³å¦‚ä½•åˆ›å»ºä½ è‡ªå·±çš„ç§æœ‰ä»“åº“ä»¥åŠå¦‚ä½•ä½¿ç”¨ç§æœ‰ä»“åº“ã€‚ ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§éœ€æ±‚å‘¢ï¼Ÿ å¼€å‘ç»„å†…æˆ–è€…å…¬å¸å†…ï¼Œä¸å¸Œæœ›æŠŠä¸€äº›æ ¸å¿ƒçš„å…¬ç”¨ä»£ç ç»™åˆ°å¤–ç•Œä½¿ç”¨ï¼ˆä¸å¼€æºï¼‰ï¼Œä½†æ˜¯è¿™äº›ä»£ç åŸºæœ¬å¾ˆç¨³å®šå¾ˆæˆç†Ÿï¼Œå¯ä»¥åšæˆç»„ä»¶ç»™åˆ°å…¶ä»–äººæˆ–è€…ç»„å†…ä½¿ç”¨ã€‚ é‚£ä¹ˆï¼Œå°±å¯ä»¥ä½¿ç”¨ Cocoapods æ¥åˆ›å»ºè‡ªå·±çš„ç§æœ‰ä»“åº“ï¼Œè®©å¤§å®¶å…±äº«ä»£ç ï¼Œä¹Ÿæ˜¯ç»„ä»¶åŒ–çš„ä¸€ç§æ–¹æ¡ˆã€‚ ä¸‹é¢çš„åˆ†äº«å…¨æ˜¯åŸºäºŽå®žè·µæ‰€å¾—ï¼Œä¸­é—´ä¹Ÿé‡åˆ°å¾ˆå¤šå‘ï¼Œéƒ½è¢«æˆ‘ä¸€ä¸€è§£å†³äº†ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æ­£åœ¨é˜…è¯»æ–‡ç« çš„ä½ ã€‚ åˆ›å»ºä»“åº“è¿™é‡Œçš„åˆ›å»ºä»“åº“ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªä»“åº“ï¼Œä¸€ä¸ªæ˜¯ä»£ç ä»“åº“ï¼Œå¦ä¸€ä¸ªæ˜¯ pod æºçš„ä»“åº“ã€‚ åœ¨ Github åˆ›å»º repositoryï¼Œå¦‚å›¾ï¼š åˆ›å»ºåä¸º iOS_private_lib çš„ repositoryï¼Œè¿™ä¸ªä¸»è¦ç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„ä»£ç ã€‚ åŒæ ·é“ç†ï¼Œåˆ›å»ºä¸€ä¸ª Repo ç”¨äºŽå­˜æ”¾ç§æœ‰çš„ SpecRepo æºï¼Œæˆ‘åˆ›å»ºçš„æ˜¯ https://github.com/veryitman/private_spec_repo.git è¿™ä¸ªä»“åº“ã€‚ ä¸ºäº†è¯´æ˜Žé—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº† Public æ¥æ¨¡æ‹Ÿ Private ä»“åº“ã€‚åœ¨å®žé™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨å…¬å¸è‡ªå·±æ­å»ºçš„ç§æœ‰ git æœåŠ¡å™¨æ¥åšï¼Œæˆ‘è¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†è¯´æ˜Žé—®é¢˜ã€‚ åˆ›å»ºä»£ç å·¥ç¨‹1. å…ˆ clone åˆšæ‰åˆ›å»ºçš„ repo åˆ°æœ¬åœ° 123cd ~/workspace/git clone https://github.com/veryitman/iOS_private_lib 2. åˆ›å»ºå·¥ç¨‹ åœ¨ ~/workspace/iOS_private_lib ä¸‹ä½¿ç”¨ pod lib create åˆ›å»ºå·¥ç¨‹ï¼Œå·¥ç¨‹åå­—ä¸º CoreHTTPï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š 123cd ~/workspace/iOS_private_libpod lib create CoreHTTP æ ¹æ®æç¤ºè¾“å…¥å¯¹åº”çš„ä¿¡æ¯å³å¯å®Œæˆåˆ›å»ºï¼Œå¦‚å›¾ï¼š åˆ›å»ºæˆåŠŸåŽï¼ŒåŒ…å«ä¸€ä¸ª Example ä¾‹å­å·¥ç¨‹ï¼Œå·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š ä½¿ç”¨ Xcode æ‰“å¼€ä¾‹å­å·¥ç¨‹ï¼Œåœ¨ CoreHTTP/Classes ä¸­åˆ›å»ºæ–‡ä»¶å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3. ç¼–è¾‘ podspec æ–‡ä»¶ 12345678910111213141516171819Pod::Spec.new do |s| s.name = &apos;CoreHTTP&apos; s.version = &apos;0.1.0&apos; s.summary = &apos;CoreHTTP for create private pod, it is a demo only.&apos; s.description = &lt;&lt;-DESC The project of CoreHTTP is a private pod, it is a demo only. DESC s.homepage = &apos;https://github.com/veryitman/iOS_private_lib.git&apos; s.license = &#123; :type =&gt; &apos;MIT&apos;, :file =&gt; &apos;LICENSE&apos; &#125; s.author = &#123; &apos;veryitman@126.com&apos; =&gt; &apos;veryitman@126.com&apos; &#125; s.platform = :ios, &quot;7.0&quot; s.source = &#123; :git =&gt; &apos;https://github.com/veryitman/iOS_private_lib.git&apos;, :tag =&gt; s.version.to_s &#125; s.ios.deployment_target = &apos;8.0&apos; s.source_files = &apos;CoreHTTP/Classes/**/*&apos; s.requires_arc = trueend è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æžœ s.source_files å†™çš„ä¸å¯¹ï¼Œä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ã€‚ 1- ERROR | [iOS] file patterns: The `source_files` pattern did not match any file. CoreHTTP çš„åå­—å¿…é¡»æ˜¯ä½ ä»£ç å­˜æ”¾çš„æ–‡ä»¶å¤¹åï¼Œè€Œä¸”è¿™ä¸ªæ–‡ä»¶ä»¶è¦ä¸Ž podspec æ–‡ä»¶åœ¨åŒä¸€çº§æ–‡ä»¶ç›®å½•ä¸‹ï¼Œä»Žä¸Šé¢æˆªå›¾çš„ç›®å½•ç»“æž„å¯ä»¥çœ‹å‡ºã€‚ å¦å¤–ä¸€ä¸ªæç¤ºçš„é”™è¯¯ç‚¹ï¼Œå¯èƒ½æ˜¯å› ä¸ºç©ºç›®å½•çš„é—®é¢˜é€ æˆçš„ï¼Œå¦‚æžœè¿™æ ·çš„è¯ï¼Œå¯ä»¥åœ¨å„ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»º .gitkeep æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„ä½œç”¨æ˜¯ä¸ºäº†æäº¤ç©ºæ–‡ä»¶å¤¹ï¼Œå› ä¸º git é»˜è®¤æ˜¯ä¸ä¼šæ·»åŠ ç©ºæ–‡ä»¶å¤¹åˆ°ä»“åº“çš„ã€‚ åˆ›å»º .gitkeep æ–‡ä»¶çš„å‘½ä»¤å¦‚ä¸‹ï¼š 123cd æ–‡ä»¶å¤¹ä¸‹touch .gitkeep è¿™é‡Œæˆ‘æŠ˜è…¾äº†è›®ä¹…ï¼Œæœ€åŽæ€è€ƒå’Œå‚è€ƒäº†è‡ªå·±ä¹‹å‰çš„å¼€æºé¡¹ç›®ç®¡ç†åšå®¢ï¼Œæ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 4. æ£€æŸ¥å’ŒéªŒè¯æœ¬åœ° podspec æ–‡ä»¶ 123cd CoreHTTP pod lib lint CoreHTTP.podspec éªŒè¯é€šè¿‡ä¼šæ˜¾ç¤ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æˆåŠŸæç¤º ä½¿ç”¨ Xcode æ‰“å¼€å·¥ç¨‹ï¼Œåˆ é™¤å¯¹åº”ä»¥ Testå¼€å¤´ çš„ç›¸å…³çš„åº“å’Œæ–‡ä»¶å¤¹ï¼Œç¡®ä¿ Xcode èƒ½ç¼–è¯‘é€šè¿‡ï¼Œé€‰æ‹©æ¨¡æ‹Ÿå™¨å³å¯ã€‚ è¿™é‡Œä¸€å®šè¦å…ˆæ¸…ç©º cocoapods çš„ç¼“å­˜ï¼Œå¦åˆ™åŽé¢è¿œç¨‹éªŒè¯è¿˜æ˜¯æŠ¥é”™ï¼Œæ— æ³•é€šè¿‡éªŒè¯ã€‚ æ¸…ç©º cocoapods çš„ç¼“å­˜ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 123rm ~/Library/Caches/CocoaPods/Pods/External/CoreHTTPrm ~/Library/Caches/CocoaPods/Pods/Specs/External/CoreHTTP 5. ä¸Šä¼ å·¥ç¨‹åˆ° Github è¿œç¨‹ä»£ç ä»“åº“ 1234567cd ~/workspace/iOS_private_libgit add CoreHTTP/git commit -m "Add lib."git push 6. ç»™ç‰ˆæœ¬æ·»åŠ  tag 12345cd ~/workspace/iOS_private_libgit tag 0.1.0 -m "Add lib and example project."git push --tags 7. è¿›è¡Œè¿œç¨‹éªŒè¯ 123cd ~/workspace/iOS_private_libpod spec lint CoreHTTP/CoreHTTP.podspec --verbose --use-libraries --allow-warnings æ³¨æ„ï¼š--verbose é€‰é¡¹æ˜¯ä¸ºäº†çœ‹ç¼–è¯‘å’ŒéªŒè¯ä¿¡æ¯ï¼Œ--use-libraries æ˜¯ä¸ºäº†èƒ½æ”¯æŒ i386 æž¶æž„ï¼Œå¦‚æžœä¸åŠ æ­¤å‚æ•°ï¼Œç§æœ‰åº“æ— æ³•é€šè¿‡éªŒè¯ï¼Œ--allow-warnings å‚æ•°æ˜¯å…è®¸æœ‰è­¦å‘Šã€‚ éªŒè¯æˆåŠŸçš„ç¤ºæ„å›¾ï¼š æäº¤ç§æœ‰ podspec1. å‘æœ¬åœ°çš„ cocoapods ä»“åº“æ·»åŠ ç§æœ‰ Spec Repo 123cd ~/workspace/iOS_private_libpod repo add PrivateSpec https://github.com/veryitman/private_spec_repo.git è¿™é‡Œä¸€å®šè¦æ³¨æ„ï¼šå¯¹åº”çš„åœ°å€æ˜¯ SpecRepo ä»“åº“åœ°å€è€Œä¸æ˜¯ä»£ç ä»“åº“åœ°å€ã€‚ æœ¬åœ°å­˜æ”¾ spec çš„ç§æœ‰ä»“åº“åç§°ï¼Œæˆ‘è¿™é‡Œå–åä¸º PrivateSpecï¼Œä½ ä¹Ÿå¯ä»¥å–å…¶ä»–åå­—ï¼Œä½†æ˜¯è®°ä½åœ¨ä¸‹é¢çš„æ­¥éª¤ä¸­è¦ä¿æŒä¸€è‡´ã€‚ 1ls -alt ~/.cocoapods/repos/ å¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸæ·»åŠ æœ¬åœ° repo ä¸­ï¼Œå…¶ä»– master æ˜¯ cocoapods å®˜æ–¹å…¬å¼€çš„æºï¼Œå…¶ä»–ä¸ºç§æœ‰æºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2. å‘ç§æœ‰çš„ Spec Repo ä¸­æäº¤ podspec ä¸‹é¢çš„ PrivateSpec æ˜¯ä¸Žä¸Šé¢çš„åç§°å¯¹åº”çš„ã€‚ 123cd ~/workspace/iOS_private_libpod repo push PrivateSpec ./CoreHTTP/CoreHTTP.podspec --verbose --use-libraries --allow-warnings è¿™é‡Œè¦æ³¨æ„ï¼Œæ·»åŠ ç§æœ‰åº“å’Œä¹‹å‰åšæ–‡ Cocoapods ç®¡ç†å¼€æºé¡¹ç›® ä¸­æåˆ°çš„ pod trunk push æ˜¯ä¸ä¸€æ ·çš„æ“ä½œã€‚ ä½¿ç”¨ç§æœ‰åº“1. æœç´¢åº“ 1pod search CoreHTTP å¦‚æžœæœç´¢ä¸åˆ°ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„ä¸¤æ¡å‘½ä»¤: 123rm ~/Library/Caches/CocoaPods/search_index.jsonpod setup ç„¶åŽç»§ç»­æœç´¢å°±å¯ä»¥äº†ï¼Œæœç´¢æˆåŠŸä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š 123456CoreHTTP (0.1.0) CoreHTTP for create private pod, it is a demo only. pod &apos;CoreHTTP&apos;, &apos;~&gt; 0.1.0&apos; - Homepage: https://github.com/veryitman/iOS_private_lib.git - Source: https://github.com/veryitman/iOS_private_lib.git - Versions: 0.1.0 [PrivateSpec repo] ä¸ºäº†é¿å…å’Œå…¶ä»–ç§æœ‰åº“å‘½åå†²çªï¼Œå»ºè®®åœ¨è‡ªå·±çš„ç§æœ‰åº“å‰é¢åŠ ä¸Šå…¬å¸æˆ–è€…å…¶ä»–æ ‡ç¤ºï¼Œå¦‚ TepdCoreHTTPã€FphCoreHTTP ç­‰ã€‚ 2. åœ¨ Podfile æ–‡ä»¶çš„é¡¶éƒ¨æ·»åŠ  source 12source &apos;https://github.com/veryitman/private_spec_repo.git&apos;source &apos;https://github.com/CocoaPods/Specs.git&apos; æ³¨æ„ä¸€ä¸ªæ˜¯æˆ‘ä»¬ç§æœ‰ SpecRepo åœ°å€ï¼ˆéžç§æœ‰ä»£ç åº“åœ°å€ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯å®˜æ–¹å…¬æœ‰æºåœ°å€ã€‚ ä½¿ç”¨ç§æœ‰åº“çš„å·¥ç¨‹çš„ Podfile å†™æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678source &apos;https://github.com/veryitman/private_spec_repo.git&apos;source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;7.0&apos;target &apos;TestCoreHTTP&apos; do pod &apos;CoreHTTP&apos;, &apos;~&gt; 0.1.0&apos;end åœ¨å·¥ç¨‹ä¸­å¯ä»¥ç›´æŽ¥ä½¿ç”¨ç§æœ‰åº“äº†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617#import &quot;ViewController.h&quot;#import &lt;CoreHTTPHeader.h&gt;@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; NSString *lib_desc = [CoreHTTPHeader libDesc]; NSLog(@&quot;The HTTP&apos;s library desc: %@&quot;, lib_desc);&#125;@end pod å‘½ä»¤12345678//å°†å·¥ç¨‹æ·»åŠ åˆ°æœ¬åœ° repo ä¸­ pod repo add [æœ¬åœ°ç§æœ‰ä»“åº“å] [è¿œç¨‹ä»“åº“åœ°å€]//ç§»é™¤æœ¬åœ° repopod repo remove [æœ¬åœ°ç§æœ‰ä»“åº“å]//æŸ¥çœ‹æœ¬åœ° repopod repo 12345//åªä»Žæœ¬åœ°éªŒè¯ä½ çš„podèƒ½å¦é€šè¿‡éªŒè¯pod lib lint *.podspec//ä»Žæœ¬åœ°å’Œè¿œç¨‹éªŒè¯ä½ çš„podèƒ½å¦é€šè¿‡éªŒè¯pod spec lint *.podspec å‚è€ƒæ–‡æ¡£Private Pods æˆ‘çš„å…¶ä»–æ–‡ç« Mac install Cocoapods Cocoapods é—®é¢˜é›†é”¦ Cocoapods ç®¡ç†å¼€æºé¡¹ç›® iOS é¡¹ç›®: æ‰“é€ æœ¬åœ° pod åº“ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>iOS cocoapods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆå®¢æˆ·ç«¯æ¨¡å—åŒ–]]></title>
    <url>%2F2018%2F09%2F23%2F%E6%B5%85%E8%B0%88%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%2F</url>
    <content type="text"><![CDATA[å›žå¿†å¤§å­¦é‚£ä¼šå–œæ¬¢è·Ÿç€è€å¸ˆåœ¨å®žéªŒå®¤æŠ˜è…¾ï¼Œæ„Ÿè§‰æ¯å¤©å¤§è„‘ä¸­éƒ½æœ‰æ–°çŸ¥è¯†é±¼è´¯è€Œå…¥ã€‚ å½“æˆ‘è¢«å‘ŠçŸ¥è¦åšä¸€ä¸ªæœ€å°å•ç‰‡æœºç³»ç»Ÿçš„æ—¶å€™ï¼Œå…´å¥‹è€Œåˆç´§å¼ ï¼ æœ€å°å•ç‰‡æœºç³»ç»Ÿç¤ºæ„å›¾ï¼š ä»Žç”» PCB åˆ°åˆ¶æ¿ã€æ´—æ¿ï¼Œå†åˆ°é€‰æ‹©å…ƒå™¨ä»¶ï¼Œæœ€åŽç»„è£…è°ƒè¯•å’Œå†™ä»£ç ï¼Œæˆ‘èŠ±è´¹äº†ä¸¤ä¸ªå¤šæœˆçš„æ—¶é—´ï¼Œå½“æ¿å­ä¸Šé¢çš„è·‘é©¬ç¯äº®èµ·æ¥çš„é‚£ä¸€åˆ»ï¼Œæˆ‘æ¿€åŠ¨çš„æ— æ³•è¨€è¯­ã€‚ å¤§å®¶å¯ä»¥çœ‹åˆ°è¿™ä¸ªæœ€å°å•ç‰‡æœºç³»ç»Ÿä¸Šé¢æœ‰å¾ˆå¤šç»„ä»¶ç»„æˆï¼Œæœ‰ç”µé˜»ã€ç”µå®¹ã€ç”µé˜»ã€äºŒæžç®¡å’Œå¡æ§½ç­‰ï¼Œå½“ç„¶è¿˜æœ‰æœ€æ ¸å¿ƒçš„ç»„ä»¶å°±æ˜¯å•ç‰‡æœºï¼Œå½“æ—¶ç”¨çš„æ˜¯51å•ç‰‡æœºã€‚ å„ä¸ªå…ƒå™¨ä»¶å°±å¥½æ¯”ç»„ä»¶ï¼ŒåŠŸèƒ½å•ä¸€ï¼ŒèŒè´£æ˜Žæ˜¾ï¼Œç»„ä»¶ä¹‹é—´éµå¾ªåè®®æž„æˆæ¨¡å—ï¼Œæœ€ç»ˆç»„åˆæˆä¸ºï¼ˆæœ€å°å•ç‰‡æœºï¼‰ç³»ç»Ÿã€‚ ä¸Šé¢çš„å›žå¿†æ˜¯ä¸ºäº†å¼•å‡ºä»Šå¤©çš„åˆ†äº«ï¼Œåˆ†äº«çš„ä¸»è¦å†…å®¹æ˜¯å®¢æˆ·ç«¯å¼€å‘ä¸­å¸¸ç”¨çš„æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€æ’ä»¶åŒ–ä»¥åŠçƒ­æ›´æ–°ç­‰æŠ€æœ¯è¾žè—»ï¼Œå¹¶æ²¡æœ‰æ¶‰åŠåˆ°å…·ä½“çš„æŠ€æœ¯é—®é¢˜ã€‚ æ¨¡å—åŒ–å’Œç»„ä»¶åŒ–ä»Žç¨‹åºè®¾è®¡çš„è§’åº¦å‡ºå‘ï¼Œæ— è®ºæ˜¯æ¨¡å—åŒ–è¿˜æ˜¯ç»„ä»¶åŒ–ï¼Œéƒ½æ˜¯æŒ‡è½¯ä»¶æž¶æž„çš„èŒƒç•´ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ã€‚ä¸¤è€…å¹¶æ²¡æœ‰ä¸¥æ ¼æ„ä¹‰ä¸Šé¢çš„åŒºåˆ†ï¼ŒäºŒè€…çš„ç›®çš„ä¸€è‡´ï¼Œå°±æ˜¯å°†å·¥ç¨‹ç»“æž„åŒ–ï¼Œè¾¾åˆ°å¯å¤ç”¨å¯ä¼¸ç¼©çš„èƒ½åŠ›ï¼Œæœ€ç»ˆæä¾›å·¥ä½œæ•ˆçŽ‡ã€‚ åœ¨è¯´æ¨¡å—åŒ–å’Œç»„ä»¶åŒ–ä¹‹å‰ï¼Œå…ˆè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯é«˜å†…èšä½Žè€¦åˆã€‚ é«˜å†…èšï¼šç»„ä»¶å†…å°½å¯èƒ½ç‹¬ç«‹å®Œæˆè‡ªå·±çš„åŠŸèƒ½ï¼ŒåšæŒå•ä¸€èŒè´£çš„åŽŸåˆ™ SRPï¼Œä¸ä¾èµ–äºŽå…¶ä»–ç»„ä»¶çš„ä»£ç ã€‚ ä½Žè€¦åˆï¼šæ¨¡å—ä¸Žæ¨¡å—ä¹‹é—´å°½é‡ä¸è¦äº’ç›¸å¼•ç”¨ï¼Œæ¨¡å—ä¹‹é—´è”ç³»è¶Šå¤æ‚è€¦åˆåº¦è¶Šé«˜ï¼Œä¿®æ”¹çš„æˆæœ¬å°±è¶Šé«˜ã€‚ ç»„ä»¶æ›´åŠ å¼ºè°ƒå¯æ›¿æ¢å¯å¤ç”¨çš„ç‰¹æ€§ï¼ŒèŒè´£å’ŒåŠŸèƒ½æ¯”è¾ƒå•ä¸€ã€ç‹¬ç«‹ï¼Œä¸Žå…¶ä»–ç»„ä»¶ä¹‹é—´æ²¡æœ‰è€¦åˆæ€§ã€‚ æ¨¡å—æ›´åŠ å¼ºè°ƒç»„åˆç‰¹æ€§ï¼Œæ›´åŠ åé‡äºŽä¸šåŠ¡ï¼Œæ¯”å¦‚ä¸€ä¸ªç¤¾åŒºé¡¹ç›®ï¼Œç™»å½•æ³¨å†Œã€è®ºå›å’Œä¸ªäººä¸­å¿ƒéƒ½æ˜¯æ¨¡å—ï¼Œè¿™äº›ä¸šåŠ¡æ¨¡å—åˆæ˜¯æœ‰å¾ˆå¤šä¸ªç»„ä»¶ç»„åˆè€Œæˆã€‚ ä¸‹å›¾å±•ç¤ºçš„æ˜¯ä¸€ä¸ªç®€æ˜“çš„è®ºå›ç³»ç»Ÿç¤ºä¾‹å›¾ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œå„ä¸ªç»„ä»¶å¯ä»¥å•ç‹¬ä½¿ç”¨åˆ°å…¶ä»–æ¨¡å—å½“ä¸­ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´ç›¸å¯¹ç‹¬ç«‹ï¼Œåªè¦å®šä¹‰å¥½æ¨¡å—ä¹‹é—´çš„é€šä¿¡åè®®ï¼Œå°±å¯ä»¥åšåˆ°å¹¶è¡Œå¼€å‘ï¼Œå„ä¸ªæ¨¡å—ç”šè‡³å¯ä»¥å¤ç”¨åˆ°å…¶ä»–ç³»ç»Ÿä¹‹ä¸­ã€‚ é€šä¿¡æœºåˆ¶è¿™é‡Œè¯´çš„é€šä¿¡æœºåˆ¶å¹¶ä¸æ˜¯æŒ‡ HTTP æˆ– TCP çš„é€šä¿¡æ–¹å¼ï¼Œè€Œæ˜¯æŒ‡ç»„ä»¶ä¸Žç»„ä»¶ä¹‹é—´ï¼Œæ¨¡å—å’Œæ¨¡å—ä¹‹é—´çš„äº¤äº’æ–¹å¼ã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå†™ä¸šåŠ¡åŠŸèƒ½çš„ä»£ç ï¼Œåœ¨ä¸åŒç»„ä»¶ä¹‹é—´éœ€è¦ç›¸äº’è°ƒç”¨ï¼Œè¿™æ ·å°±éœ€è¦ import å…¶ä»–ç»„ä»¶ï¼Œæ— å½¢ä¹‹ä¸­å°±å¢žåŠ äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚ æœ‰å¼€å‘ç»éªŒçš„åŒå­¦ï¼Œå¯èƒ½ä¼šç”¨åˆ°ç±»ä¼¼ java çš„åå°„æœºåˆ¶ï¼Œæˆ–è€…ä¸€äº›åŠ¨æ€è¯­è¨€çš„è¿è¡Œæ—¶æœºåˆ¶å¦‚ Objective-C Runtimeï¼Œå¯¹å®ƒä»¬ä¸è¿›è¡Œ importï¼Œè€Œæ˜¯åŠ¨æ€çš„è§£æžä»£ç ï¼Œè¾¾åˆ°ç»„ä»¶ä¹‹é—´æˆ–è€…æ˜¯ç±»ä¹‹é—´ç›¸äº’è°ƒç”¨çš„ç›®çš„ã€‚ çŽ°åœ¨æå€¡ä¹Ÿæ˜¯æ¯”è¾ƒçƒ­é—¨çš„æŠ€æœ¯æ˜¯é€šè¿‡è·¯ç”±é€šä¿¡æœºåˆ¶ï¼Œæ¥è¿›è¡Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚è¿™é‡Œä¸¾ä¸€ä¸ªå®žé™…ä½¿ç”¨åœºæ™¯ã€‚ ç”¨æˆ·å®‰è£…äº†æˆ‘ä»¬çš„ APPï¼Œè¿è¥åŒäº‹åœ¨æŸä¸ªèŠ‚æ—¥æ¥ä¸´ä¹‹é™…åšä¸€ä¸ªä¿ƒæ´»è·ƒçš„æ´»åŠ¨ï¼ŒæœŸæœ›ç”¨æˆ·ç‚¹åœ¨æ‰“å¼€æŽ¨é€é€šçŸ¥çš„æ—¶å€™ï¼Œæ‰“å¼€ APP åŽå¯ä»¥ç›´æŽ¥è·³è½¬åˆ°å¯¹åº”çš„æ´»åŠ¨è¯¦æƒ…é¡µé¢ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š è¿™æ˜¯ä¸€ä¸ªå†å¸¸è§„ä¸è¿‡çš„éœ€æ±‚äº†ï¼Œç›¸ä¿¡ç»åŽ†è¿‡äº§å“å¼€å‘çš„æœ‹å‹éƒ½è§è¿‡è¿™ç§éœ€æ±‚ã€‚ å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è·¯ç”±çš„é€šä¿¡æœºåˆ¶æ¥å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œå¼€å‘çš„æµç¨‹å›¾å¤§è‡´å¦‚ä¸‹ï¼š è¿™é‡Œå…³é”®çš„æ ¸å¿ƒå¾—ç›ŠäºŽ iOS å’Œ Android å¹³å°çš„ scheme æœºåˆ¶ï¼Œå¯¹äºŽ schemeï¼Œé€šä¿—çš„è®²å°±æ˜¯ä¸€ç§å¯ä»¥è·¨è¿›ç¨‹æˆ–è€…è¿›ç¨‹å†…çš„é€šä¿¡åè®®ï¼Œä¾‹å¦‚å¯ä»¥åœ¨ APP ä¸­æ‰“å¼€æŸä¸ªåº”ç”¨å•†åº—ã€‚ ä¾‹å¦‚ä¸‹é¢çš„ URLï¼š 1bbs://page/activity/activity_detail?id=8978&amp;user_id=67890432 å…¶ä¸­ï¼Œbbs å°±æ˜¯ schemeï¼Œå¯ä»¥çœ‹åˆ°è¯¥ URL å®Œå…¨å¯ä»¥è¢«å„è‡ªå¹³å°æ¥è§£æžã€‚ iOS å’Œ Android å¹³å°å„æœ‰å¾ˆå¤šå¼€æºçš„è·¯ç”±æ–¹æ¡ˆï¼Œå®žçŽ°æ‰‹æ³•å„æœ‰å·®å¼‚ï¼Œä½†æ˜¯æ€æƒ³æ˜¯ä¸€æ ·çš„ï¼Œå»ºè®®å¤§å®¶åŽ»äº†è§£å’Œå­¦ä¹ ã€‚ ä¸è¿‡ï¼ŒçŽ°åœ¨ä½ åªè¦çŸ¥é“ï¼Œè·¯ç”±çš„é€šä¿¡æœºåˆ¶å¤§å¤§é™ä½Žäº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§å°±å¤Ÿäº†ã€‚ æ’ä»¶åŒ–æ’ä»¶è¿™ä¸ªè¯ï¼Œå¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰ï¼Œä¾‹å¦‚ Chrome æµè§ˆå™¨ä¸­å¯ä»¥å®‰è£…å„ç§å°å·¥å…·ï¼Œè¿™äº›å°å·¥å…·å°±æ˜¯æ’ä»¶ï¼Œè¿˜æœ‰å„ç§å¼€å‘ä½¿ç”¨çš„ IDE ä¹Ÿæ”¯æŒæ’ä»¶å®‰è£…ï¼Œä¾¿äºŽæé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆçŽ‡ã€‚Chrome å’Œ IDE è¢«ç§°ä¹‹ä¸ºå®¿ä¸»ï¼Œæ’ä»¶å¯„ç”ŸäºŽä»–ä»¬ã€‚ æ”¯ä»˜å®å’Œå¾®ä¿¡é‡Œé¢çš„å°ç¨‹åºä¹Ÿå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªä¸ªæ’ä»¶ï¼Œä½†æ˜¯ä»–ä»¬ä¸èƒ½è„±ç¦»æ”¯ä»˜å®å’Œå¾®ä¿¡ç‹¬ç«‹è¿è¡Œã€‚ å¯ä»¥å‘çŽ°è¿™äº›æ’ä»¶å³ä½¿è¢«å¸è½½æˆ–è€…è¢«åˆ é™¤ï¼Œå¹¶ä¸ä¼šè®© Chrome æˆ–è€… IDE å—åˆ°å½±å“ï¼Œæ¢å¥è¯è¯´ï¼Œæ’ä»¶è®©å®¿ä¸»é”¦ä¸Šæ·»èŠ±ã€‚ è¿™ç§æ’ä»¶æ€æƒ³å½“ç„¶å¯ä»¥è¿ç”¨åˆ° APP ä¸­æ¥ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœæŸä¸ª APP åœ¨çº¿ä¸Šç»è¿‡åŠ¨æ€ä¸‹è½½å°±å…·æœ‰äº†ä¸€ä¸ªå¼ºå¤§æˆ–è€…å¥½ç”¨çš„åŠŸèƒ½ï¼Œå²‚ä¸ç¾Žå“‰ï¼Ÿï¼ æ’ä»¶åŒ–ï¼Œå°† APP æ‹†åˆ†æˆå¾ˆå¤šæ¨¡å—ï¼Œè¿™äº›æ¨¡å—åŒ…æ‹¬ä¸€ä¸ªå®¿ä¸»å’Œå¤šä¸ªæ’ä»¶ï¼Œå®¿ä¸»æä¾›æ’ä»¶çš„ç®¡ç†å’Œé€šä¿¡åè®®åŠè§„èŒƒï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªçš„åº“æˆ–è€…åŠŸèƒ½åŒ…ã€‚ æ’ä»¶åŒ–æ˜¯ä¸€ç§ç¼–ç¨‹å’Œè§£å†³é—®é¢˜çš„æ€æƒ³ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„å®šä¹‰ã€‚åœ¨ Android ä¸Šé¢è¿ç”¨æ¯”è¾ƒå¤šï¼ŒiOS ä¸Šé¢å¾ˆå°‘ï¼Œå¹¶ä¸æ˜¯ iOS æ²¡æœ‰è¿™æ ·çš„æŠ€æœ¯ï¼Œä¸»è¦æ˜¯å› ä¸ºè‹¹æžœå®¡æ ¸ç­‰å„æ–¹é¢çš„é™åˆ¶ã€‚åœ¨ iOS8 ä¸Šçš„ App Extension åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥çœ‹åšæ˜¯æ’ä»¶åŒ–äº†ã€‚ åœ¨ Android å¹³å°ä¸­ï¼Œæ’ä»¶åŒ–å·²ç»ä¸æ˜¯å¾ˆæ–°é²œçš„æŠ€æœ¯äº†ï¼ŒVirtualAPKã€Atlasã€Replugin ç­‰æ¡†æž¶ç›¸ç»§å¼€æºï¼Œæ’ä»¶åŒ–æŠ€æœ¯å·²ç»è¿›å…¥äº†æ¯”è¾ƒæˆç†Ÿçš„é˜¶æ®µäº†ã€‚ æ’ä»¶åŒ–çš„ç¼–ç¨‹æ€æƒ³å’Œå®žçŽ°ï¼Œåœ¨ä¸åŒçš„å¹³å°æœ‰æ‰€å·®å¼‚ï¼Œå³ä½¿åœ¨åŒä¸€ä¸ªå¹³å°ä¸Šé¢éƒ½ä¼šæœ‰ä¸åŒçš„å®žçŽ°æ‰‹æ®µï¼Œå»ºè®®é€‰æ‹©ä¸€ä¸ªå¼€æºæ–¹æ¡ˆåŽ»äº†è§£å…¶åŽŸç†ï¼Œç„¶åŽè¯•ç€åŠ¨æ‰‹åŽ»å®žçŽ°ä¸€ä¸ªï¼Œåƒé‡Œä¹‹è¡Œå§‹äºŽè¶³ä¸‹ï¼ çƒ­æ›´æ–°â€œä¸å¥½äº†ï¼Œæ˜¨å¤©æœ‰å¾ˆå¤šç”¨æˆ·åé¦ˆæˆ‘ä»¬çš„ APP å‡ºçŽ°é—ªé€€ã€‚â€œ å°çŽ‹ä¸€å¤§æ—©çš„å¼€å§‹æ’•å–Šï¼Œååœ¨ä»–æ—è¾¹çš„å¼€å‘å¤§ç¥žä»¬é¡¿æ—¶å¾®ç¬‘å‡å›ºï¼Œé©¬ä¸ŠåŽ»åŽå°çœ‹ä¸ŠæŠ¥çš„å´©æºƒæ—¥å¿—ï¼Œç´§æŽ¥ç€å¼€å§‹å¤çŽ°å’Œè§£å†³é—®é¢˜ï¼Œæœ€ç»ˆå¾—å‡ºç»“è®ºï¼Œéœ€è¦é‡æ–°æå®¡ APPï¼Œå¹¶å‘¨çŸ¥æ¸ é“éƒ¨é—¨åšå¥½æ›´æ–°å‡†å¤‡ã€‚ è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœä¸€ä¸ªæ¸¸æˆå‡ Gçš„å¤§å°ï¼Œä½ è®©ç”¨æˆ·ä¸ºäº†ä½ çš„ä¸€ä¸ªå°å¤±è¯¯æ¥æ•´åŒ…æ›´æ–°æ¸¸æˆï¼Œç”¨æˆ·å’Œä½ ä¼°è®¡éƒ½è¦ç–¯äº†ã€‚ æœ€è¿‘å‡ å¹´ï¼Œéšç€ä¸šåŠ¡å‘å±•çš„éœ€æ±‚ï¼Œçƒ­æ›´æ–°æŠ€æœ¯ä¹Ÿæ˜¯å¾—åˆ°äº†çªé£žçŒ›è¿›çš„å‘å±•ã€‚ç±»ä¼¼äºŽä¸Šé¢çš„åœºæ™¯ï¼Œèƒ½åœ¨ç”¨æˆ·ç¥žä¸çŸ¥é¬¼ä¸è§‰çš„æƒ…å†µä¸‹ä½¿ç”¨çƒ­æ›´æ–°çš„æŠ€æœ¯è§£å†³å´©æºƒçš„é—®é¢˜ï¼Œå²‚ä¸æ˜¯ä¸¤å…¨å…¶ç¾Žã€‚ Android çš„çƒ­æ›´æ–°æŠ€æœ¯å¦‚ç«å¦‚è¼çš„å‘å±•ç€ï¼Œè€Œè‹¹æžœè¿™è¾¹ä¸¥åŽ‰ç¦æ­¢çƒ­æ›´æ–°ï¼Œä¸€æ—¦æ£€æŸ¥åˆ°ç«‹å³ä¼šè´£ä»¤ä½ ä¿®æ”¹æˆ–è€…ä¸‹æž¶ APPã€‚æˆ‘ä»¬è¿˜æ˜¯ä»ŽæŠ€æœ¯çš„è§’åº¦æ¥çœ‹è¿™ä¸ªé—®é¢˜ï¼Œå­¦ä¹ å’Œäº†è§£ä¸€ä¸‹å¯¹åº”çš„æŠ€æœ¯æ€»å½’æ²¡æœ‰é”™ï¼Œè¿™é‡Œ æœ‰ iOS ä¸Šé¢çš„çƒ­æ›´æ–°æ–¹æ¡ˆï¼Œå¦å¤– Androidçƒ­ä¿®å¤æ–¹æ¡ˆæ¯”è¾ƒ ä»‹ç»äº†å¾ˆå¤š Android çƒ­æ›´æ–°çš„å¼€æºçš„æ–¹æ¡ˆï¼Œå¯ä»¥äº†è§£å­¦ä¹ ä¸€ä¸‹ã€‚ ç«™åœ¨è·¨å¹³å°çš„è§’åº¦ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒæŽ¨èä½¿ç”¨ Lua å®žçŽ°çƒ­æ›´æ–°ï¼ŒLua ä¸ä»…ç®€å•é«˜æ•ˆï¼Œè€Œä¸”å¯ä»¥å¾ˆå¥½çš„å’Œ C/C++ ç»“åˆåœ¨ä¸€èµ·ï¼Œè€Œ Android ä¸Šé¢é€šè¿‡ JNI åˆèƒ½ä¸Ž C/C++ é€šä¿¡ï¼ŒiOS ä¸Šé¢å°±æ›´åŠ ä¸ç”¨è¯´äº†ã€‚è¿™åªæ˜¯æˆ‘ä¸ªäººçš„ä¸€ç‚¹çœ‹æ³•ï¼Œä¸å–œå‹¿å–·ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Philosophy</category>
      </categories>
      <tags>
        <tag>æž¶æž„ æ¨¡å—åŒ– ç»„ä»¶åŒ– çƒ­æ›´æ–° æ’ä»¶åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTP æ¼”è¿›å²]]></title>
    <url>%2F2018%2F09%2F16%2FHTTP-%E6%BC%94%E8%BF%9B%E5%8F%B2%2F</url>
    <content type="text"><![CDATA[ç²¾é€š HTTP å—ï¼Ÿåœ¨é¢è¯•ç›¸å…³å¼€å‘å²—ä½çš„åŒå­¦ä¸­ï¼Œæˆ‘ç»å¸¸ä¼šé—®ä¸€äº›è·Ÿç¼–ç¨‹è¯­è¨€ä¸ç›¸å…³çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›é—®é¢˜ï¼š 1. ä½ å¹³æ—¶æ˜¯æ€Žä¹ˆå­¦ä¹ çš„ï¼Ÿå­¦ä¹ æ¸ é“æœ‰å“ªäº›ï¼Ÿ2. é¡¹ç›®ç»„ä¸­ï¼Œä½ è®¤ä¸ºæœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ3. ä½ åœ¨é¡¹ç›®ç»„ä¸­é‡åˆ°çš„æœ€å¤§å›°éš¾ï¼ˆéžç¼–ç¨‹é—®é¢˜ï¼‰æ˜¯ä»€ä¹ˆï¼Œä½ æ˜¯æ€Žä¹ˆè§£å†³çš„ï¼Ÿ4. é¡¹ç›®æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–åŒäº‹é‡åˆ°å›°éš¾ï¼Œä½ æ˜¯å¦‚ä½•åšçš„ï¼Ÿ è¿™äº›é—®é¢˜å¯ä»¥è®©é¢è¯•è€…è‡ªç”±å‘æŒ¥çš„é¢˜ç›®ï¼Œå¹¶æ²¡æœ‰å›ºå®šçš„æ ‡å‡†çš„ç­”æ¡ˆã€‚è¿™æ ·çš„é—®é¢˜é—®å‡ºæ¥æœ‰è¯¸å¤šå¥½å¤„ï¼Œé¦–å…ˆå¯ä»¥è®©é¢è¯•è€…ç¨³å®šä¸€ä¸‹å¿ƒæ€ä¸è‡³äºŽå¤ªç´§å¼ ï¼Œå…¶æ¬¡å¯ä»¥çœ‹çœ‹ä»–çš„è¯­è¨€ç»„ç»‡èƒ½åŠ›å’Œè¡¨è¾¾èƒ½åŠ›ï¼Œä»Žä¸­ä¹Ÿèƒ½çœ‹å‡ºä»–æœ‰æ²¡æœ‰è¿‡å®žé™…çš„é¡¹ç›®ç»éªŒã€‚ å¾ˆå¤šäººçš„ç®€åŽ†ä¸Šé¢å†™çš„å¾ˆå®Œç¾Žï¼Œåšè¿‡è¯¸å¤šé¡¹ç›®ï¼Œç²¾é€šæŸæŸè¯­è¨€çš„ç¼–ç¨‹ï¼Œç²¾é€šå„ç§ç½‘ç»œåè®®ï¼Œç†Ÿæ‚‰å„å¤§æ“ä½œç³»ç»Ÿç­‰ç­‰ï¼Œå½“æ·±å…¥é—®ä»–ä»¬ç†Ÿæ‚‰çš„çŸ¥è¯†æ—¶ï¼Œå‘çŽ°ä»–ä»¬çš„å›žç­”å´å«ç³Šä¸æ¸…ã€‚ä¸æŽ’é™¤ä¸–ç•Œä¸Šæœ‰è¿™æ ·çš„å…¨æ‰ï¼Œä½†æ˜¯è‚¯å®šä¸ä¼šè¢«æˆ‘ä»¬è½»æ˜“é‡åˆ°ï¼Œè‡³å°‘æˆ‘è§‰å¾—è‡ªå·±è¿˜æ²¡æœ‰è¾¾åˆ°é‚£ä¸ªèƒ½åŠ›ã€‚ å¦‚æžœä½ è¿˜æ²¡æœ‰ä½†åˆæƒ³ç²¾é€šå„ç§çŸ¥è¯†ï¼Œå°±æ…¢æ…¢åŽ»å­¦ä¹ å¹¶ç²¾é€šç›¸å…³çš„çŸ¥è¯†ï¼Œå¾ªåºæ¸è¿›ï¼Œç›¸ä¿¡è‡ªå·±ä¼šåšåˆ°çš„ã€‚å¥½äº†ï¼Œä¸æ‰¯äº†ï¼Œä»Šå¤©èŠèŠ HTTP çš„å‘å±•åŽ†å²ã€‚ æˆ‘æ•¢ä¿è¯æœ‰ç»å¤§éƒ¨åˆ†çš„äººä¸çŸ¥é“ HTTP/2ï¼Œè™½ç„¶ä»–æ—©å°±æ¥ä¸´. HTTP 0.x åˆ° HTTP/2HTTP/1 æ˜¯ HTTP 1.0 å’Œ HTTP 1.1 çš„ç»Ÿç§°ï¼Œåˆ†åˆ«æŒ‡ HTTP åè®®çš„ç‰ˆæœ¬æ˜¯ 1.0 å’Œ 1.1. 1960å¹´ç¾Žå›½äºº Ted Nelson æž„æ€äº†ä¸€ç§é€šè¿‡è®¡ç®—æœºå¤„ç†æ–‡æœ¬ä¿¡æ¯çš„æ–¹æ³•ï¼Œå¹¶ç§°ä¹‹ä¸ºè¶…æ–‡æœ¬ï¼ˆhypertextï¼‰, è¿™æˆä¸ºäº† HTTP è¶…æ–‡æœ¬ä¼ è¾“åè®®æ ‡å‡†æž¶æž„çš„å‘å±•æ ¹åŸºï¼Œæ‰€ä»¥ä»–è¢«ç§°ä¹‹ä¸º HTTP ä¹‹çˆ¶ã€‚ 1989å¹´3æœˆåœ¨ CERNï¼ˆæ¬§æ´²æ ¸å­ç ”ç©¶ç»„ç»‡ï¼‰å·¥ä½œçš„ Tim Berners-Leeï¼ˆè’‚å§†.ä¼¯çº³æ–¯.æŽï¼‰ æäº¤äº†ä¸€ä¸ªææ¡ˆ Information Management: A Proposalï¼Œè¯¥ææ¡ˆæç»˜äº†å…¶å¯¹ä¸‡ç»´ç½‘ï¼ˆWorld Wide Webï¼‰æœ€åˆçš„è®¾æƒ³å³èƒ½è®©è¿œéš”ä¸¤åœ°çš„äººä»¬å…±äº«çŸ¥è¯†ï¼ŒTim æ˜¯ ä¸‡ç»´ç½‘ä¹‹çˆ¶ï¼Œæˆå°±å’Œè´¡çŒ®ä¹Ÿæ˜¯ä¸è®¡å…¶æ•°ã€‚ ç›´åˆ°1990å¹´ HTTP æ‰ç®—æ˜¯é—®ä¸–ï¼Œå§‘ä¸”ç§°ä¹‹ä¸º HTTP 0.x ç‰ˆæœ¬ï¼Œä¹Ÿæœ‰äº›åœ°æ–¹ç§°ä¹‹ä¸º HTTP 0.9 ç‰ˆæœ¬ï¼Œæ€»ä¹‹è¿™ä¸æ˜¯ä¸€ä¸ªæ­£å¼ç‰ˆã€‚1996å¹´5æœˆï¼ŒHTTP 1.0 ä½œä¸º HTTP çš„ç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬æ­£å¼å…¬å¸ƒï¼Œå¹¶è®°è½½äºŽ RFC1945 ä¸­ã€‚ éšç€äººä»¬å¯¹äº’è”ç½‘çš„è®¤çŸ¥å’ŒæŠ€æœ¯çš„å‘å±•ï¼ˆå°¤å…¶æ˜¯æµè§ˆå™¨ç­‰ç›¸å…³çš„æŠ€æœ¯ï¼‰ï¼Œå‘çŽ° HTTP 1.0 ç¼ºç‚¹è¿˜æ˜¯æ¯”è¾ƒå¤šï¼Œæ— æ³•æ»¡è¶³å¿«é€Ÿçš„äº’è”ç½‘å‘å±•éœ€æ±‚ã€‚äºŽæ˜¯åœ¨1997å¹´1æœˆå‘å¸ƒäº† HTTP 1.1 ç‰ˆæœ¬ï¼Œå¹¶è®°è½½äºŽ RFC2068 ä¸­ï¼ŒåŽæ¥åœ¨1999å¹´6æœˆï¼Œå¯¹ RFC2068 åˆåšäº†è¡¥å……å’Œä¿®æ­£ï¼Œç§°ä¹‹ä¸º RFC2616, è‡³æ­¤ HTTP 1.1 å¼€å§‹ä¸€ç»Ÿå¤©ä¸‹ï¼Œç›´åˆ°çŽ°åœ¨ç»å¤§æ•°å¼€å‘è€…ä½¿ç”¨çš„éƒ½æ˜¯ HTTP 1.1 ç‰ˆæœ¬ã€‚ å¦å¤–ä¸€ä¸ªç‰ˆæœ¬ HTTP/2 æ ‡å‡†äºŽ2015å¹´5æœˆä»¥ RFC 7540 æ­£å¼å‘è¡¨ï¼Œå¤šæ•°ä¸»æµæµè§ˆå™¨å·²ç»åœ¨2015å¹´åº•æ”¯æŒäº†è¯¥åè®®ï¼Œæ—¶éš”å¤šå¹´ï¼ŒHTTP/2 æ‰é—®ä¸–ã€‚ è‹¹æžœä»Ž iOS9 å¼€å§‹æ”¯æŒ HTTP2.0ï¼Œå¯¹ iOS å¼€å‘äººå‘˜æ¥è¯´ä»Ž iOS9 å¼€å§‹ NSURLSession å¯ä»¥æ”¯æŒ HTTP2.0 äº†ã€‚ç›®å‰ Android ç»å¤§éƒ¨åˆ†ç³»ç»Ÿä¸æ”¯æŒ HTTP/2ï¼ŒAndroid åŽŸç”Ÿ HttpURLConnection æ¡†æž¶å¹¶ä¸æ”¯æŒ HTTP/2ï¼Œä½†å¯ä»¥é€‰ç”¨ä¸‰æ–¹å¼€æºåº“ okhttp ä½œä¸ºç½‘ç»œæ¡†æž¶ï¼ŒAndroid 5.0+ï¼ˆç³»ç»Ÿç‰ˆæœ¬ï¼‰è®¾å¤‡æ‰æ”¯æŒ HTTP/2ã€‚æ‰€ä»¥æƒ³å…¨é¢ä½¿ç”¨ HTTP/2 è¿˜æ˜¯è¦ä»˜å‡ºä¸€å®šçš„ä»£ä»·ï¼Œä¸è¿‡éšç€æŠ€æœ¯çš„é©æ–°ï¼Œç›¸ä¿¡ HTTP/2 å°†ä¼šå¤§æ”¾å…‰å½©ã€‚ HTTP ä¸æ–­çš„æ”¹è¿›ç”¨ä¸€å¼ å›¾æ¥æè¿° HTTP çš„ä¸æ–­æ”¹è¿›å’Œæ¼”å˜å²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹é¢å…·ä½“çœ‹çœ‹è¿™äº›åè®®ç‰ˆæœ¬çš„æ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œç©¶ç«Ÿæ˜¯æ–°å¢žå’Œæ”¹è¿›äº†å“ªäº›ä¸œè¥¿ï¼Ÿ HTTP 0.9HTTP 0.9 å¹¶éžå‡ºè‡ªæŸä¸ªæ ‡å‡†åŒ–ç»„ç»‡ï¼Œåªæ˜¯ Tim çš„ä¸ªäººä½œå“è€Œå·²ï¼Œæ¯”è¾ƒç®€å•ã€‚å¯ä»¥å‚é˜…è¿™ç¯‡æ–‡ç«  The Original HTTP as defined in 1991 ï¼Œè¯¥ç‰ˆæœ¬è§„å®šäº† HTTP ä½¿ç”¨ TCP/IP è¿žæŽ¥ï¼ŒHTTP è¯·æ±‚åªæœ‰ä¸€ä¸ªè¯·æ±‚è¡Œï¼Œåªæœ‰ä¸€ä¸ª GET æ–¹æ³•åŠ ä¸Šè¯·æ±‚çš„URIã€‚HTTP å“åº”åˆ™ç›´æŽ¥è¿”å›ž HTML æ–‡æœ¬ï¼Œæ²¡æœ‰çŠ¶æ€ç ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰åŠžæ³•åŒºåˆ†é”™è¯¯æ¶ˆæ¯å’Œæ­£å¸¸çš„æ–‡æœ¬ã€‚å¯ä»¥çœ‹å‡ºï¼ŒHTTP/0.9å¹¶ä¸å®Œå–„ï¼Œä¹Ÿä¸æ˜¯é‚£ä¹ˆå®Œç¾Žï¼Œä½†æ˜¯è¿™çš„ç¡®æ˜¯ Tim åšæŒä¸‹æ¥çš„ç»“æ™¶ã€‚ HTTP 1.0HTTP 1.0 å¢žåŠ äº†è¯·æ±‚å¤´åŸŸå’Œå“åº”å¤´åŸŸï¼Œå¢žåŠ äº† HEAD å’Œ POST æ–¹æ³•ï¼Œå“åº”å¯¹è±¡ä¸å†å±€é™äºŽ HTML æ–‡æœ¬ï¼Œæ”¯æŒé•¿è¿žæŽ¥å’Œç¼“å­˜æœºåˆ¶ç­‰ç­‰ã€‚ HTTP 1.0 å…·ä½“ç‰¹ç‚¹ 1.å¯ä»¥å‘é€æ›´å¤šæ ¼å¼çš„å†…å®¹ï¼Œå¦‚å›¾åƒã€è§†é¢‘ã€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸ä»…ä»…å±€é™äºŽæ–‡å­—äº†ã€‚ 2.å¢žåŠ äº† POST å’Œ HEAD æ–¹æ³•ã€‚ 3.æ”¹å˜äº† HTTP è¯·æ±‚å’Œå›žåº”çš„æ ¼å¼ã€‚é™¤äº†æ•°æ®éƒ¨åˆ†ï¼Œæ¯æ¬¡é€šä¿¡éƒ½å¿…é¡»åŒ…æ‹¬å¤´ä¿¡æ¯ï¼ˆHTTP headerï¼‰ï¼Œç”¨æ¥æè¿°ä¸€äº›å…ƒæ•°æ®ï¼Œå³å¢žåŠ äº†è¯·æ±‚å¤´ä¿¡æ¯ï¼Œå“åº”æ•°æ®ä¸å†å±€é™äºŽ HTML æ–‡æœ¬ã€‚ 4.æ–°å¢žçŠ¶æ€ç ï¼ˆstatus codeï¼‰ã€å¤šå­—ç¬¦é›†æ”¯æŒã€å¤šéƒ¨åˆ†å‘é€ï¼ˆmulti-part typeï¼‰ã€æƒé™ï¼ˆauthorizationï¼‰ã€ç¼“å­˜ï¼ˆcacheï¼‰ã€å†…å®¹ç¼–ç ï¼ˆcontent encodingï¼‰ç­‰åŠŸèƒ½ã€‚ 5.å¢žåŠ äº†é•¿è¿žæŽ¥çš„æ”¯æŒï¼Œä¸è¿‡ HTTP 1.0 éœ€è¦åœ¨ request ä¸­å¢žåŠ  â€Connectionï¼š keep-aliveâ€œ header æ‰èƒ½å¤Ÿæ”¯æŒï¼ŒåŽé¢è¦è¯´åˆ°çš„ HTTP 1.1 é»˜è®¤å°±æ”¯æŒäº†ã€‚ å¯ä»¥çœ‹å‡ºï¼ŒHTTP 1.0åœ¨ HTTP 0.9 çš„åŸºç¡€ä¸Šåšäº†å¤§é‡çš„æ‰©å……å’Œæ”¹è¿›ã€‚ HTTP 1.0 ä¸»è¦ç¼ºç‚¹ 1.æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹ TCP è¿žæŽ¥ï¼Œå³æ¯å¯¹ Request/Response éƒ½ä½¿ç”¨ä¸€ä¸ªæ–°çš„è¿žæŽ¥ã€‚ 2.ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚ HTTP 1.1æ¯ä¸ªæ–°ç‰ˆæœ¬çš„è¯žç”ŸåŸºæœ¬éƒ½æ˜¯å¯¹ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„è¡¥å……å’Œæ”¹è¿›ï¼Œå°±åƒæˆ‘ä»¬çš„è½¯ä»¶å¼€å‘ä¸€æ ·ï¼Œåè®®ä¹Ÿéœ€è¦è¿­ä»£ã€‚ HTTP 1.1 å…·ä½“ç‰¹ç‚¹ 1.åŠ å¼ºå’Œä¼˜åŒ–äº†æŒä¹…è¿žæŽ¥å³é•¿è¿žæŽ¥ã€‚ HTTP 1.1 æ”¯æŒé•¿è¿žæŽ¥ï¼ˆPersistent Connectionï¼‰å’Œè¯·æ±‚çš„æµæ°´çº¿ï¼ˆPipeliningï¼‰å¤„ç†ï¼Œåœ¨ä¸€ä¸ª TCP è¿žæŽ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ª HTTP è¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿žæŽ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿï¼Œåœ¨ HTTP 1.1 ä¸­é»˜è®¤å¼€å¯ Connectionï¼š keep-aliveï¼Œä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº† HTTP 1.0 æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºè¿žæŽ¥çš„ç¼ºç‚¹ã€‚ 2.å¢žå¼ºäº†ç¼“å­˜æœºåˆ¶ã€‚ å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æŽ§åˆ¶ç­–ç•¥ä¾‹å¦‚ Entity tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Match ç­‰å¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´ã€‚ 3.è¯·æ±‚å¤´å¼•å…¥äº† range å¤´åŸŸã€‚ å®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›žç æ˜¯ 206ï¼ˆPartial Contentï¼‰ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†å¼€å‘è€…è‡ªç”±çš„é€‰æ‹©ä»¥ä¾¿äºŽå……åˆ†åˆ©ç”¨å¸¦å®½å’Œè¿žæŽ¥ã€‚ 4.å°† Content-length å­—æ®µçš„ä½œç”¨è¿›è¡Œæ‰©å……ï¼Œå³å£°æ˜Žæœ¬æ¬¡å›žåº”çš„æ•°æ®é•¿åº¦ï¼ˆä¸€ä¸ªTCPè¿žæŽ¥çŽ°åœ¨å¯ä»¥ä¼ é€å¤šä¸ªå›žåº”ï¼ŒåŠ¿å¿…å°±è¦æœ‰ä¸€ç§æœºåˆ¶ï¼ŒåŒºåˆ†æ•°æ®åŒ…æ˜¯å±žäºŽå“ªä¸€ä¸ªå›žåº”çš„ï¼‰ã€‚ 5.é‡‡ç”¨åˆ†å—ä¼ è¾“ç¼–ç ã€‚ å¯¹äºŽä¸€äº›å¾ˆè€—æ—¶çš„åŠ¨æ€æ“ä½œï¼ŒæœåŠ¡å™¨éœ€è¦ç­‰åˆ°æ‰€æœ‰æ“ä½œå®Œæˆï¼Œæ‰èƒ½å‘é€æ•°æ®ï¼Œæ˜¾ç„¶è¿™æ ·çš„æ•ˆçŽ‡ä¸é«˜ã€‚æ›´å¥½çš„å¤„ç†æ–¹æ³•æ˜¯ï¼Œäº§ç”Ÿä¸€å—æ•°æ®ï¼Œå°±å‘é€ä¸€å—ï¼Œé‡‡ç”¨æµæ¨¡å¼ï¼ˆstreamï¼‰å–ä»£ç¼“å­˜æ¨¡å¼ï¼ˆbufferï¼‰ã€‚ 6.æ–°å¢žäº†è®¸å¤šåŠ¨è¯æ–¹æ³•ï¼šPUTã€PATCHã€HEADã€OPTIONSã€DELETEã€‚å¦å¤–ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„å¤´ä¿¡æ¯æ–°å¢žäº† Host å­—æ®µï¼Œç”¨æ¥æŒ‡å®šæœåŠ¡å™¨çš„åŸŸåã€‚ 7.æ–°å¢žäº† 24 ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ã€‚ HTTP 1.0 ä¸»è¦ç¼ºç‚¹ HTTP 1.1 è™½ç„¶å¢žåŠ äº†å¾ˆå¤šåŠŸèƒ½ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå·²ç»å¾ˆå¼ºå¤§äº†ï¼Œä½†æ˜¯ä»–è‡ªèº«ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œæ¢å¥è¯è¯´æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œä¸»è¦é—®é¢˜å¦‚ä¸‹ï¼š 1.é˜Ÿå¤´å µå¡žï¼ˆHead-of-line blockingï¼‰ï¼Œå„ä¸ªè¯·æ±‚åˆ°è¾¾çš„æœåŠ¡å™¨çš„é€Ÿåº¦æ˜¯ä¸åŒçš„ï¼Œå¦‚æžœå…ˆå‘çš„è¯·æ±‚å…ˆåˆ°è¾¾å¯èƒ½ä¼šå‘ç”Ÿé˜»å¡žï¼Œå‰©ä¸‹æ‰€æœ‰çš„å·¥ä½œéƒ½ä¼šè¢«é˜»å¡žåœ¨é‚£æ¬¡è¯·æ±‚åº”ç­”ä¹‹åŽï¼Œè¿™æ ·å°±é™ä½Žäº†å¸¦å®½ã€‚ ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€æ˜¯å‡å°‘è¯·æ±‚æ•°ï¼ŒäºŒæ˜¯åŒæ—¶å¤šå¼€æŒä¹…è¿žæŽ¥ã€‚ 2.è‡ƒè‚¿çš„æ¶ˆæ¯å¤´éƒ¨ 3.ä¸æ”¯æŒæœåŠ¡ç«¯æŽ¨é€ï¼Œä¾‹å¦‚è¦æ±‚ä½¿ç”¨ HTTP åè®®åšä¸€ä¸ªæœåŠ¡ç«¯æ•°æ®å˜åŠ¨é¡µé¢ç«‹å³æ”¹å˜çš„ç»„ä»¶å°±ä¸å¥½åšï¼Œå¯ç”¨è½®è¯¢çš„æ–¹å¼è¿›è¡Œï¼Œè¿™æ ·å°±ä¼šå¯¹å¸¦å®½å½±å“è¾ƒå¤§ã€‚ SPDYåœ¨è¯´åˆ° HTTP/2 ä¹‹å‰ï¼Œå¿…é¡»è¦å…ˆè¯´è¯´ SPDYã€‚SPDY æ˜¯ç”± Google å…¬å¸æŽ¨å‡ºçš„ï¼ŒSPDY çš„æŽ¨å‡ºæ˜¯ä¸ºäº†è§£å†³ HTTP 1.1 ä¸­å­˜åœ¨çš„ä¸€äº›é—®é¢˜çš„ã€‚ 1.å¤šè·¯å¤ç”¨ï¼ˆmultiplexingï¼‰ å¤šè·¯å¤ç”¨é€šè¿‡å¤šä¸ªè¯·æ±‚ stream å…±äº«ä¸€ä¸ª TCP è¿žæŽ¥çš„æ–¹å¼ï¼Œè§£å†³äº†HOL blocking çš„é—®é¢˜ï¼Œé™ä½Žäº†å»¶è¿ŸåŒæ—¶æé«˜äº†å¸¦å®½çš„åˆ©ç”¨çŽ‡ã€‚ 2.å¯ä»¥å¯¹è¯·æ±‚è®¾ç½®ä¼˜å…ˆçº§ å¤šè·¯å¤ç”¨å¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜æ˜¯ï¼Œåœ¨è¿žæŽ¥å…±äº«çš„åŸºç¡€ä¹‹ä¸Šæœ‰å¯èƒ½ä¼šå¯¼è‡´å…³é”®è¯·æ±‚è¢«é˜»å¡žã€‚SPDYå…è®¸ç»™æ¯ä¸ªrequestè®¾ç½®ä¼˜å…ˆçº§ï¼Œè¿™æ ·é‡è¦çš„è¯·æ±‚å°±ä¼šä¼˜å…ˆå¾—åˆ°å“åº”ã€‚æ¯”å¦‚æµè§ˆå™¨åŠ è½½é¦–é¡µï¼Œé¦–é¡µçš„htmlå†…å®¹åº”è¯¥ä¼˜å…ˆå±•ç¤ºï¼Œä¹‹åŽæ‰æ˜¯å„ç§é™æ€èµ„æºæ–‡ä»¶ï¼Œè„šæœ¬æ–‡ä»¶ç­‰åŠ è½½ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç”¨æˆ·èƒ½ç¬¬ä¸€æ—¶é—´çœ‹åˆ°ç½‘é¡µå†…å®¹ã€‚ 3.å¯¹è¯·æ±‚å¤´çš„åŽ‹ç¼© é€‰æ‹©åˆé€‚çš„åŽ‹ç¼©ç®—æ³•å¯ä»¥å‡å°åŒ…çš„å¤§å°å’Œæ•°é‡ï¼Œè¿™æ ·åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜ç½‘ç»œä½¿ç”¨æ•ˆçŽ‡ã€‚ 4.ä¸ºäº†æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ï¼Œå¼ºåˆ¶ä½¿ç”¨åŸºäºŽ HTTPS çš„åŠ å¯†åè®®ä¼ è¾“ã€‚ 5.æ”¯æŒæœåŠ¡ç«¯æŽ¨é€ã€‚ ç§°ä¹‹ä¸º Server Push åŠŸèƒ½ï¼ŒæœåŠ¡å™¨åœ¨è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥æŠŠå„ç§èµ„æºæŽ¨é€ç»™å®¢æˆ·ç«¯ã€‚ æ¯”å¦‚ï¼Œå®¢æˆ·ç«¯åªè¯·æ±‚äº† index.htmlï¼Œä½†æ˜¯æœåŠ¡å™¨æŠŠ index.htmlã€x.cssã€x.jpg ç­‰èµ„æºå…¨éƒ¨å‘é€ç»™å®¢æˆ·ç«¯ã€‚è¿™æ ·çš„è¯ï¼Œåªéœ€è¦ä¸€è½® HTTP é€šä¿¡ï¼Œå®¢æˆ·ç«¯å°±å¾—åˆ°äº†å…¨éƒ¨èµ„æºï¼Œæé«˜äº†é€šä¿¡çš„æ€§èƒ½ï¼Œä¹Ÿæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚ HTTP/2æœ¬è´¨ä¸Šæ¥è®²ï¼ŒHTTP/2 æ˜¯å»ºç«‹åœ¨ SPDY åŸºç¡€ä¹‹ä¸Šçš„ï¼Œå€Ÿé‰´äº†å¾ˆå¤š SPDY çš„è®¾è®¡æ€æƒ³å’Œç­–ç•¥ã€‚ HTTP å…·æœ‰ SPDY çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿæœ‰ä¸Ž SPDY çš„ä¸åŒç‚¹ï¼Œä¸»è¦å¦‚ä¸‹ï¼š 1.HTTP/2 æ”¯æŒæ˜Žæ–‡ HTTP ä¼ è¾“ï¼Œè€Œ SPDY å¼ºåˆ¶ä½¿ç”¨ HTTPSã€‚è¿™ä¸€ç‚¹ HTTP/2 ç›¸å¯¹äººæ€§åŒ–ä¸€äº›ã€‚ 2.HTTP/2 ä¼šå¯¹è¯·æ±‚å¤´å’Œå“åº”å¤´åšåŽ‹ç¼©ä»¥æå‡è¯·æ±‚æ€§èƒ½ï¼ŒHTTP/2 æ¶ˆæ¯å¤´çš„åŽ‹ç¼©ç®—æ³•ä¸åŒäºŽ SPDYã€‚ HTTP/2 é‡‡ç”¨ HPACKï¼ŒSPDY é‡‡ç”¨çš„ DEFLATE ç®—æ³•ã€‚ HTTP/2 æ”¯æŒæ‰€æœ‰çš„ HTTP 1.1 çš„æ ¸å¿ƒç‰¹å¾ï¼Œå…¶æä¾›äº† HTTP è¯­ä¹‰çš„ä¼ è¾“ä¼˜åŒ–ï¼Œå¹¶ä¸”åœ¨å„æ–¹é¢åšåˆ°æ›´é«˜æ•ˆã€‚HTTP/2 çš„å¤´ä¿¡æ¯æ˜¯ä¸€ä¸ªå½»åº•çš„äºŒè¿›åˆ¶åè®®ï¼Œå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶ï¼Œå¹¶ä¸”ç»Ÿç§°ä¸ºå¸§ï¼ˆframeï¼‰ï¼Œå³å¤´ä¿¡æ¯å¸§å’Œæ•°æ®å¸§ã€‚å¯¹ HTTP/2 æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ HTTP2 åè®®åˆè¯† è¿™ç¯‡æ–‡ç« ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>ç½‘ç»œåè®®</category>
      </categories>
      <tags>
        <tag>Wireshark udp http https spdy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Wireshark: ç®€å•åˆ†æž TCP ä¸‰æ¬¡æŒ¥æ‰‹]]></title>
    <url>%2F2018%2F09%2F09%2FWireshark-%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90-TCP-%E4%B8%89%E6%AC%A1%E6%8C%A5%E6%89%8B%2F</url>
    <content type="text"><![CDATA[è¯è¯´æ¡æ‰‹ä½ è¦æ˜¯å¼€å‘äººå‘˜ï¼Œç›¸ä¿¡ä½ ä¸€å®šå¬è¯´è¿‡ TCPï¼ˆTransmission Control Protocol ä¼ è¾“æŽ§åˆ¶åè®®ï¼‰æˆ–æ˜¯ TCP æ¡æ‰‹çš„è¯´æ³•ã€‚ æ‰€è°“æ¡æ‰‹ï¼Œé€šä¿—æ¥è®²å°±æ˜¯é€šä¿¡åŒæ–¹åå•†åœ¨åŽç»­é€šä¿¡è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨çš„é€šä¿¡ä¿¡æ¯çš„è¿‡ç¨‹ã€‚TCP ä¸ºäº†å»ºç«‹å¯é çš„è¿žæŽ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼ŒåŽç»­ç»™å¤§å®¶åˆ†äº« TLS ä¸ºäº†å®žçŽ°åŠ å¯†ã€æ ¡éªŒã€èº«ä»½è®¤è¯åŒæ ·éœ€è¦æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ TCP ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥ä½¿ç”¨ä¸‹å›¾æ¥è¡¨è¾¾ï¼š æœ¬ç¯‡ç»™å¤§å®¶åˆ†äº«å¦‚ä½•ä½¿ç”¨ Wireshark æ¥è·Ÿè¸ª HTTP åŒ…ï¼ŒæŸ¥çœ‹ TCP æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ åœ¨çœ‹ä¸‹é¢å†…å®¹ä¹‹å‰ï¼Œå…ˆç®€å•çœ‹ä¸€ä¸‹ TCP åè®®æŠ¥å¤´ã€‚ ä¸‹å›¾æ˜¯ TCP æŠ¥å¤´çš„æ ¼å¼ï¼š å…¶ä¸­ï¼ŒSeq(Sequence Number) æ˜¯ 32 ä½çš„åºåˆ—å·ï¼ŒAcknowledgment number ç§°ä¹‹ä¸ºç¡®è®¤åºå·ï¼Œä¹Ÿæ˜¯ 32 ä½çš„ï¼Œä½†æ˜¯ä»–ä¸æ˜¯æ ‡å¿—ä½ ACKï¼Œè¿™ä¸ªè¦åŒºåˆ«å¼€ï¼Œå½“ ACK ç½® 1 æ—¶ Acknowledgment number æ‰æœ‰æ•ˆï¼ŒæŒ‡æŽ¥æ”¶æ–¹æœŸå¾…çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºåˆ—å·ã€‚ TCP æŠ¥å¤´ä¿¡æ¯ä¸­æœ‰å…­ä¸ªæŽ§åˆ¶ä½(æ ‡å¿—ä½)ï¼Œåˆ†åˆ«æ˜¯ï¼šSYNã€ACKã€PSHã€FINã€RST å’Œ URGã€‚ 123456SYN: è¡¨ç¤ºå»ºç«‹è¿žæŽ¥FIN: è¡¨ç¤ºå…³é—­è¿žæŽ¥ACK: è¡¨ç¤ºå“åº”PSH: è¡¨ç¤ºæœ‰æ•°æ®ä¼ è¾“RST: è¡¨ç¤ºè¿žæŽ¥é‡ç½®URG: è¡¨ç¤ºç´§æ€¥æ•°æ® Seq åºåˆ—å·æœ‰ä¸¤ä¸ªä½œç”¨ï¼šç¬¬ä¸€ï¼Œåœ¨ SYN ç½® 1 æ—¶ï¼Œæ­¤ä¸ºå½“å‰è¿žæŽ¥çš„åˆå§‹åºåˆ—å·(Initial Sequence Number, ISN)ï¼Œæ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åºå·ä¸ºæ­¤ ISN+1ã€‚ç¬¬äºŒï¼Œåœ¨ SYN ç½® 0 æ—¶ï¼Œä¸ºå½“å‰è¿žæŽ¥æŠ¥æ–‡æ®µçš„ç´¯è®¡æ•°æ®åŒ…å­—èŠ‚æ•°ã€‚ TCP åè®®è®¾è®¡æ¯”è¾ƒå¤æ‚ï¼Œå…¶æ¶‰åŠçš„çŸ¥è¯†è¾ƒå¤šï¼Œè¿™é‡Œå¤§å®¶æ•´ä¸æ˜Žç™½ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå¹¶ä¸å½±å“ä½ é˜…è¯»ä¸‹é¢çš„å†…å®¹ï¼Œå¦‚æžœå¯¹ TCP åè®®æœ¬èº«æ„Ÿå…´è¶£ï¼Œå¯ä»¥åŽ»æ‹œè¯»ã€TCP/IP è¯¦è§£ï¼Œå· 1ï¼šåè®®ã€‘è¿™æœ¬ä¹¦ã€‚ ç½‘ç»œæ¨¡åž‹æ¯æ¬¡è¯´åˆ°ç½‘ç»œå±‚ï¼Œå°±è¦æ‹¿å‡ºç±»ä¼¼ä¸‹é¢çš„ç½‘ç»œæ¨¡åž‹å›¾ï¼ŒOSI å°†ç½‘ç»œæ¨¡åž‹åˆ†ä¸º7å±‚ï¼ŒTCP/IP æ¨¡åž‹å°†ç½‘ç»œæ¨¡åž‹åˆ†ä¸º 4 å±‚ï¼Œç½‘ç»œ 4 å±‚æ¨¡åž‹ç”± 7 å±‚æ¨¡åž‹ç®€åŒ–åˆå¹¶è€Œæ¥ï¼Œæ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œå¦‚å›¾ï¼š HTTP ä»…ä»…æ˜¯ä¸ªåè®®ï¼Œå±žäºŽåº”ç”¨å±‚çš„é¢å‘å¯¹è±¡çš„åè®®ï¼Œä»Žä¸Šå›¾å¯ä»¥çœ‹å‡º HTTP æ˜¯åœ¨ TCP åŸºç¡€ä¹‹ä¸Šçš„ã€‚ HTTP åè®®ä¸€å…±æœ‰äº”å¤§ç‰¹ç‚¹ 1ã€æ”¯æŒå®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼2ã€ç®€å•å¿«é€Ÿ3ã€çµæ´»4ã€æ— è¿žæŽ¥5ã€æ— çŠ¶æ€ è¿™é‡Œå¼ºè°ƒä¸€ä¸‹ æ— è¿žæŽ¥ å’Œ æ— çŠ¶æ€ è¿™ä¸¤ä¸ªç‰¹ç‚¹ã€‚ æ— è¿žæŽ¥ï¼ŒæŒ‡çš„æ˜¯é™åˆ¶æ¯æ¬¡è¿žæŽ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·ç«¯çš„åº”ç­”åŽï¼Œå³æ–­å¼€è¿žæŽ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚Keep-Alive ç‰¹æ€§ä¸åœ¨æœ¬ç¯‡è®¨è®ºèŒƒå›´ï¼Œæš‚æ—¶ä½ å¯ä»¥å°†å…¶å¿½ç•¥ã€‚ æ— çŠ¶æ€ï¼ŒæŒ‡çš„æ˜¯åè®®å¯¹äºŽäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“å®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚å³æˆ‘ä»¬ç»™æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚ä¹‹åŽï¼ŒæœåŠ¡å™¨æ ¹æ®è¯·æ±‚ï¼Œä¼šç»™æˆ‘ä»¬å‘é€æ•°æ®è¿‡æ¥ï¼Œä½†æ˜¯å‘é€å®Œï¼Œä¸ä¼šè®°å½•ä»»ä½•ä¿¡æ¯ã€‚ å¯ä»¥åˆ©ç”¨ HTTP çš„è¿™ä¸¤ä¸ªç‰¹ç‚¹æ¥åˆ†æž TCP ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä»¥ GET è¯·æ±‚ä¸‹é¢åœ°å€ä¸ºä¾‹ï¼Œä½¿ç”¨ Wireshark æŠ“åŒ…ã€‚ 1http://www.baidu.com/news/detailV3.html?id=1279391&amp;COMMON_ACCESS_TOKEN=(null)&amp;COMMON_ACCESS_TOKEN_SECRET=(null)&amp;_cT=IOS&amp;_cV=3.1.3&amp;_cA=PM çœ‹è¿”å›žç»“æžœï¼Œé€‰ä¸­ HTTP/1.1 200 OK å³é”®, åœ¨å¼¹å‡ºæ¡†ä¸­é€‰æ‹© Follow/TCP Streamï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…³é—­å¼¹å‡ºçš„å¼¹çª—ï¼Œå›žåˆ°ä¸»ç•Œé¢ï¼Œçœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸‰æ¬¡ï¼ˆçº¢è‰² 1ã€2ã€3å¤„ï¼‰ TCP æ¡æ‰‹è¿‡ç¨‹ï¼š ç¬¬ä¸€æ¬¡ï¼Œè¯·æ±‚å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª [SYN] åŒ…ï¼Œåºåˆ—å·æ˜¯ 0ï¼ˆSeq=0ï¼‰ã€‚ ç¬¬äºŒæ¬¡ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ª [SYN, ACK] åŒ…ï¼Œåºåˆ—å·æ˜¯ 0ï¼ŒACK æ˜¯ 1ï¼ˆSeq=0ï¼ŒAck=1ï¼‰ã€‚ ç¬¬ä¸‰æ¬¡ï¼Œå®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ä¼šå‘é€ä¸€ä¸ª [ACK] åŒ…ï¼Œåºåˆ—å·æ˜¯ 1ï¼ŒAck æ˜¯ 1ï¼ˆSeq=1ï¼ŒAck=1ï¼‰æ¥å›žå¤æœåŠ¡å™¨ã€‚ ç®€å•çš„ç”»ä¸€ä¸ªè‰å›¾ï¼Œå¦‚ä¸‹ï¼š è¿™ä¸ªè¿‡ç¨‹ï¼Œç®€å•æè¿°ä¸ºä¸‹é¢ä¸‰ä¸ªæ­¥éª¤ï¼š 1.å‘é€æ–¹ç»™æŽ¥æ”¶æ–¹å‘é€ SYN ä¿¡å·ï¼Œæ­¤æ—¶å‘é€æ–¹å¤„äºŽ SYN_SEND çŠ¶æ€ã€‚2.æŽ¥æ”¶æ–¹ç¡®è®¤å¹¶å›žå¤ç»™å‘é€æ–¹ SYN/ACK ä¿¡å·ï¼Œæ­¤æ—¶æŽ¥æ”¶æ–¹å¤„äºŽ SYN_RCVD çŠ¶æ€ã€‚3.å‘é€æ–¹ç»™æŽ¥æ”¶æ–¹å‘é€ç¡®è®¤ ACK ä¿¡å·ï¼Œå‘é€å®Œæ¯•åŽï¼Œå‘é€æ–¹(å®¢æˆ·ç«¯)è¿›å…¥ ESTABLISHED çŠ¶æ€ï¼Œå½“æŽ¥æ”¶ç«¯(æœåŠ¡ç«¯)æŽ¥æ”¶åˆ°è¿™ä¸ªåŒ…æ—¶ï¼Œä¹Ÿè¿›å…¥ ESTABLISHED çŠ¶æ€ï¼ŒTCP æ¡æ‰‹ç»“æŸã€‚ ä¸Šé¢çš„æ­¥éª¤ï¼Œå»ºè®®æ„Ÿå…´è¶£çš„æœ‹å‹åŽ»å®žé™…æ“ä½œä¸€ä¸‹ã€‚ ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹å›žå¤´å†æ¥æƒ³ä¸€æƒ³ï¼ŒTCP çš„è¿žæŽ¥ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹å‘¢ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ä¸€æ¬¡ï¼Œä¸¤æ¬¡å‘¢ï¼Ÿä¸€æ¬¡ä¸å°±æŒºå¥½å—ï¼Œä¸‰æ¬¡æ˜¯ä¸æ˜¯æœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾äº†ï¼Ÿ TCP åè®®ä¸æ˜¯ä¸€ä¸ªäººå®šå‡ºæ¥çš„è€Œæ˜¯ä¸€ç¾¤äººæ‹Ÿå®šçš„ï¼Œè®¾è®¡ä¸‰æ¬¡æ¡æ‰‹å›ºç„¶æœ‰å®ƒçš„æ„ä¹‰ï¼Œæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡ä¸”åœ¨æ€§èƒ½å’Œæ•ˆçŽ‡ä¸Šé¢è¡¡é‡è¿‡çš„ã€‚ åœ¨çŸ¥ä¹Ž TCP ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–å››æ¬¡ï¼Ÿ ä¸Šé¢æœ‰ä¸é”™çš„ç­”æ¡ˆï¼Œè™½ç„¶æœ‰äº›å›žç­”æ¯”è¾ƒæžç¬‘ï¼Œä½†æ˜¯å¾ˆå¥½ç†è§£ï¼Œæ¯”å¦‚è¿™ä½ä»å…„ï¼š æˆ‘ä»¬ä¸å¦¨æ¢ä¸ªæ€è·¯æ¥æƒ³è¿™ä¸ªé—®é¢˜ï¼ŒTCP åè®®è®¾è®¡åˆè¡·æ˜¯ è®©æ•°æ®è¿›è¡Œå¯é ï¼Œé«˜æ•ˆï¼Œå®‰å…¨çš„ä¼ è¾“ï¼Œå¦‚æžœæ¡æ‰‹æ˜¯ä¸€æ¬¡ï¼Œä¸¤æ¬¡æˆ–å››æ¬¡ï¼Œå°±æ— æ³•å¾ˆå¥½çš„ä¿è¯ TCP çš„ å¯é ï¼Œå®‰å…¨åŠé«˜æ•ˆ çš„ä¼ è¾“ï¼Œè¯´ä¸å®šå“ªå¤©æœ‰äººè®¾è®¡å‡ºæ¥ä¸€ç§å¯æ›¿ä»£ TCP åè®®çš„å…¶ä»–åè®®å°±æ˜¯ä¸¤æ¬¡æ¡æ‰‹æˆ–è€…ä¸éœ€è¦æ¡æ‰‹ï¼Œå“ˆå“ˆï¼ å‚è€ƒé˜…è¯»å¦‚ä½•ç†è§£HTTPåè®®çš„â€œæ— è¿žæŽ¥ï¼Œæ— çŠ¶æ€â€ç‰¹ç‚¹? TCP ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–å››æ¬¡ï¼Ÿ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Wireshark tcp ip udp http https</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Wiresharkï¼šæŠ“å– HTTP åŒ…]]></title>
    <url>%2F2018%2F09%2F01%2FWireshark%EF%BC%9A%E6%8A%93%E5%8F%96-HTTP-%E5%8C%85%2F</url>
    <content type="text"><![CDATA[å¹¿å‘Šæ—¶é—´ï¼Œè§è°…å‹¿æ€ªï¼Œçœ‹åˆ°äº†å°±ç‚¹ä¸€ä¸‹å§ï¼Œæ„Ÿæ¿€ä¸å°½ðŸ™‡â€ï¼ æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ å¼€ç¯‡ç®€è¦åˆè¯† Wireshark ç®€å•ä»‹ç»äº†å¼ºå¤§çš„ Wireshark å·¥å…·ï¼Œæƒ³ç”¨å¥½æˆ–è€…æ˜¯è¯´æƒ³å‘æŒ¥ Wireshark çš„å·¨å¤§å¨åŠ›ï¼Œè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼ˆå¯¹æˆ‘æ¥è¯´ï¼‰ã€‚å­¦ä¹  Wireshark çš„æˆæœ¬è¦æ¯”å…¶ä»–ç½‘ç»œæŠ“åŒ…å·¥å…·çš„æˆæœ¬é«˜ï¼Œæ‰€ä»¥è¯·åšå¥½å­¦ä¹ çš„å‡†å¤‡ã€‚ æˆ‘èº«è¾¹å¾ˆå¤šå¼€å‘åŒäº‹ï¼Œç”šè‡³åŒ…æ‹¬ä¸€äº›åˆšå…¥èŒçš„æµ‹è¯•å·¥ç¨‹å¸ˆéƒ½ä¸å–œæ¬¢ä½¿ç”¨æŠ“åŒ…å·¥å…·ï¼Œé‡åˆ°é—®é¢˜å‡­ç€è‡ªå·±çš„æ„Ÿè§‰åœ¨é‚£é‡Œä¾ƒä¾ƒè€Œè°ˆï¼Œæ—¢è€½è¯¯æ—¶é—´åˆæ²¡æœ‰è§£å†³é—®é¢˜ï¼Œæœ‰æ—¶å€™è¿˜ä¼¤äº†å’Œæ°”ï¼Œæ˜Žæ˜Žå¯ä»¥ä½¿ç”¨å·¥å…·å¯ä»¥è§£å†³çš„é—®é¢˜ï¼Œååè¦å„æŠ’å·±è§ã€‚ è¯´åˆ° Wireshark æ›´æ˜¯å¾ˆå°‘äººä½¿ç”¨ï¼Œè‡³å°‘æˆ‘èº«è¾¹çš„åŒäº‹æ˜¯è¿™æ ·ã€‚å¦‚æžœè®©ä½ ä¸€ç›´åŽ»çœ‹é‚£äº› RFC ç­‰ç½‘ç»œåè®®ï¼Œä¸åˆ°åŠå°æ—¶ä¼°è®¡ä½ å°±ä¼šæ„Ÿåˆ°ç–²æƒ«ï¼Œä½†æ˜¯ç»“åˆ Wireshark æ¥ç†è§£ç½‘ç»œåè®®å°±ä¼šæ„Ÿåˆ°æ— æ¯”çš„å¿«ä¹ï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿï¼ ç»§ç»­é˜…è¯»ä¸‹åŽ»ï¼Œä½ å¯ä»¥äº†è§£åˆ°å¦‚ä¸‹å‡ ä¸ªçŸ¥è¯†ï¼š 1. å¦‚ä½•æŠ“å– PC ç«¯ã€iOS è®¾å¤‡çš„ç½‘ç»œåŒ…ï¼Ÿ2. ä½¿ç”¨ä¸€äº›è¿‡æ»¤æ¡ä»¶å¦‚ä½•æŸ¥çœ‹åŒ…çš„å†…å®¹ï¼Ÿ3. å¦‚ä½•åœ¨ Wireshark ä¸­æ˜¾ç¤ºåŸŸåï¼Ÿ PC ç«¯çš„ HTTP è¯·æ±‚æ‰“å¼€ Wiresharkï¼Œé€‰æ‹©å¯¹åº”çš„ç½‘å£ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯æ— çº¿ç½‘ç»œï¼ˆWiFiï¼‰ï¼Œæ‰€ä»¥é€‰æ‹© Wi-Fiï¼šen0 è¿™ä¸ªç½‘å£ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„ç½‘ç»œä½¿ç”¨æƒ…å†µæ¥é€‰æ‹©å¯¹åº”çš„ç½‘å£ï¼Œå¦‚ä¸‹å›¾ï¼š å¯ä»¥çœ‹åˆ°å¯¹åº”æœ‰ç½‘ç»œæ•°æ®çš„ç½‘å£ï¼ŒWireshark è¿˜åœ¨å³ä¾§æ˜¾ç¤ºå¯¹åº”çš„æ³¢æµªï¼Œå¾ˆäººæ€§åŒ–çš„è®¾è®¡ã€‚åŒå‡»å¯¹åº”çš„ç½‘å£ï¼Œå°±å¯ä»¥ä½¿ç”¨ Wireshark æ¥æŠ“åŒ…çœ‹æ•°æ®äº†ã€‚ ä¸‹é¢æˆ‘å°±ä»¥ PC ç«¯è®¿é—® www.veryitman.com æ¥æ¼”ç¤º HTTP è¯·æ±‚çš„æŠ“åŒ…æƒ…å†µã€‚ æŸ¥çœ‹æœ¬æœºçš„ ip åœ°å€ï¼Œæˆ‘çš„æ˜¯ 10.4.17.7, å†æ¥çœ‹ä¸€ä¸‹ www.veryitman.com å¯¹åº”çš„ ip åœ°å€ï¼š 1ping ww.veryitman.com æ˜¾ç¤ºç»“æžœå¦‚ä¸‹ï¼š 164 bytes from 185.199.110.153: icmp_seq=0 ttl=52 time=317.074 ms é‚£ä¹ˆï¼Œ 185.199.110.153 å°±æ˜¯å…¶å¯¹åº”çš„ ip åœ°å€ã€‚æ€»çš„æ¥è¯´ï¼Œå¯¹äºŽ PC ç«¯ï¼Œæºåœ°å€æ˜¯ 10.4.17.7ï¼Œç›®çš„åœ°å€æ˜¯ 185.199.110.153ï¼Œå¯¹äºŽæœåŠ¡å™¨æ¥è¯´ï¼Œæ­£å¥½åè¿‡æ¥ã€‚ é¦–å…ˆåœ¨è¿‡æ»¤å™¨ä¸­è¾“å…¥ http, å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç„¶åŽæ‰“å¼€æµè§ˆå™¨ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ Chromeï¼Œæ‰“å¼€ http://www.veryitman.com/2018/08/20/%E5%88%9D%E8%AF%86-Wireshark/ ç½‘ç«™ç«™ç‚¹ï¼ŒWireshark æ˜¾ç¤ºå¦‚ä¸‹ï¼ˆéƒ¨åˆ†æˆªå›¾ï¼‰ï¼š æ”¹å˜ä¸€ä¸‹è¿‡æ»¤è¯­å¥ï¼Œå°†ä¹‹å‰çš„ http æ”¹ä¸º ip.src==10.4.17.7 &amp;&amp; http &amp;&amp; ip.dst==185.199.109.153ï¼Œ æ˜¾ç¤ºå¦‚ä¸‹ï¼š å¯ä»¥é€‰æ‹©ä»»ä½•ä¸€ä¸ªè¯·æ±‚ï¼Œå±•ç¤ºåŒºåŸŸå¦‚ä¸‹ï¼š ä¸Šå›¾ä¸­çš„ä¸‰ä¸ªåŒºåŸŸåˆ†åˆ«å¯¹åº”çš„æ˜¯ View ä¸­çš„ Packet Listï¼Œ Packet Detailsï¼ŒPacket Bytes ä¸‰ä¸ªè§†å›¾ã€‚ é€‰æ‹©ä»»ä½•ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨å¯¹åº”çš„ åŒºåŸŸ2 å¯ä»¥çœ‹åˆ°è¯¥è¯·æ±‚çš„è¯¦æƒ…ã€‚ åˆšæ‰ä½¿ç”¨çš„è¿‡æ»¤æ¡ä»¶åªçœ‹åˆ° PCï¼ˆå®¢æˆ·ç«¯ï¼‰çš„è¯·æ±‚ï¼Œæ²¡æœ‰çœ‹åˆ°æœåŠ¡å™¨è¿”å›žä¿¡æ¯ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹è¿‡æ»¤æ¡ä»¶ä¸º ip.src==185.199.109.153 &amp;&amp; http &amp;&amp; ip.dst==10.4.17.7ï¼Œè¿™æ ·å°±çœ‹ä»¥çœ‹åˆ°æœåŠ¡å™¨çš„å›žåŒ…ä¿¡æ¯äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åŒå‡»è¿›å…¥è¯¥å“åº”ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å“åº”æ•°æ®è¯¦æƒ…äº†ã€‚ iOS è®¾å¤‡çš„ HTTP è¯·æ±‚è·ŸæŸ¥çœ‹ PC ç«¯çš„ HTTP è¯·æ±‚æ–¹å¼åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯æ­¤æ—¶çš„æœ¬æœº ip åœ°å€æ˜¯æ‰‹æœºç«¯çš„è€Œä¸æ˜¯ pc ç«¯çš„ã€‚ åˆè¯† Wireshark ä¸­å·²ç»è·Ÿå¤§å®¶åˆ†äº«è¿‡å¦‚ä½•åŽ»è¿žæŽ¥ iOS è®¾å¤‡åˆ° Wireshark æŠ“åŒ…äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ è‡³äºŽæŸ¥çœ‹ iOS è®¾å¤‡çš„ ip åœ°å€ï¼Œå°±å¾ˆç®€å•äº†ï¼Œæ‰“å¼€ è®¾ç½®/wifi çœ‹ä¸€ä¸‹è¯¦æƒ…å°±çŸ¥é“äº†ã€‚ æ˜¾ç¤ºåŸŸåå¦‚æžœä½ ç»å¸¸ä½¿ç”¨ Charles æŠ“åŒ…ï¼Œå°±å¯ä»¥å‘çŽ° Charles å±•ç¤ºçš„è¯·æ±‚ä¸­éƒ½æ˜¯ä»¥åŸŸåæ¥æ˜¾ç¤ºçš„ï¼Œä½†æ˜¯åœ¨ Wireshark éƒ½æ˜¯æ˜¾ç¤º ip åœ°å€ï¼Œæˆ–è®¸å› æ­¤æ„Ÿåˆ°ä¸é€‚ï¼Œé‚£ä¹ˆï¼ŒWireshark èƒ½å¦å±•ç¤ºåŸŸåå‘¢ï¼Ÿ Wireshark æ˜¯å¯ä»¥åƒ Charles é‚£æ ·å±•ç¤ºåŸŸåçš„ï¼Œåªæ˜¯å®ƒé»˜è®¤æ˜¾ç¤º ip åœ°å€ç½¢äº†ã€‚ æ‰“å¼€ Preferencesï¼Œå¦‚å›¾ï¼š è¿™æ · Wireshark çš„æ˜¾ç¤ºå°±æ˜¯å¦ä¸€ç•ªæ™¯è±¡äº†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å½“ç„¶ï¼Œä½ ä¹Ÿçœ‹å‡ºæ¥äº†ï¼Œè¿‡æ»¤æ¡ä»¶è¿˜æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚ ä½ è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–çš„è¿‡æ»¤æ¡ä»¶ï¼Œå¦‚ä¸‹é¢çš„ä¸€äº›è¿‡æ»¤æ¡ä»¶ï¼Œèƒ½å¸®ä½ å¿«é€Ÿå®šä½ä½ è¦çš„æ•°æ®ã€‚ 12345http.host == &quot;veryitman.com&quot;http.host contains &quot;veryitman.com&quot;http contains &quot;HTTP/1.1 200 OK&quot; æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Wireshark tcp ip udp http https</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å–åºŸå“çš„ä¸€æ¬¡ç»åŽ†]]></title>
    <url>%2F2018%2F08%2F26%2F%E5%8D%96%E5%BA%9F%E5%93%81%E7%9A%84%E4%B8%80%E6%AC%A1%E7%BB%8F%E5%8E%86%2F</url>
    <content type="text"><![CDATA[å¶é‡è¿™ä¸¤å¤©åœ¨æ”¶æ‹¾å±‹å­ï¼Œæœ¬æ¥æƒ³æŠŠä¸€äº›ä¸é‡è¦çš„ç‰©å“ç›´æŽ¥å–æŽ‰ï¼Œçœå¾—ç»™è‡ªå·±å¢žåŠ è¿è¾“æˆæœ¬ã€‚ä½†æ˜¯åˆæœ‰äº›ä¸èˆï¼Œæ¯•ç«Ÿè·Ÿè‡ªå·±åœ¨ä¸€èµ·ç”Ÿæ´»äº†è¿™ä¹ˆå¤šå¹´ï¼Œæ¯ä¸€æœ¬ä¹¦ï¼Œæ¯å¯¹æ¡Œæ¤…ï¼Œæ¯ä»¶è¡£æœéƒ½æ˜¯æˆ‘å’Œè€å©†åŠªåŠ›æŒ£é’±ä¹°å›žæ¥çš„ï¼Œé‡Œé¢éƒ½åŒ…å«ç€å¥‹æ–—çš„æ•…äº‹ã€‚ è¯åˆè¯´å›žæ¥ï¼Œæ— èˆæ— å¾—ã€‚äºŽæ˜¯ï¼Œæˆ‘å°±å¼€å§‹å°†ç‰©å“åˆ†ç±»ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§æŒ‘é€‰ï¼Œé‡è¦çš„ä¸œè¥¿å°±æ”¾åˆ°ç®±å­ä¸­ï¼Œæ¬¡è¦çš„å°±æ”¾åˆ°æ²™å‘ä¸Šï¼Œä¸é‡è¦çš„å°±æ‰”åˆ°å¤§åŽ…é‡Œï¼Œæœ€åŽå†æ¥å®¡è§†ä¸€éè¿™äº›ä¸é‡è¦çš„ç‰©å“æ˜¯å¦è¿˜æœ‰ç•™ä¸‹æ¥çš„å¿…è¦ï¼Œæœ€ç»ˆæˆ‘æŠŠä¸é‡è¦çš„ä¸œè¥¿æ”¾åˆ°ä¸€ä¸ªå¤§è¢‹å­ä¸­ï¼Œå‡†å¤‡æŠŠå®ƒä»¬å–ç»™åºŸå“ç«™ã€‚ åœ¨ç™¾åº¦ä¸Šé¢æ‰¾äº†å¥½å‡ å®¶é™„è¿‘æ”¶åºŸå“çš„ï¼Œæ‰“ç”µè¯è¿‡åŽ»éƒ½è¦æ±‚å–å®¶è‡ªå·±æŠŠä¸œè¥¿æ‹¿è¿‡åŽ»ï¼Œæ€åº¦ååˆ†ä¸å‹å¥½ï¼Œæˆ‘ä¹Ÿå°±æ²¡å†å¤šé—®ï¼Œå°±æŒ‚æŽ‰äº†ç”µè¯ã€‚ æ— ç‹¬æœ‰å¶ï¼Œä¸­åˆä¸‹æ¥¼åŽ»ä¹°ä¸œè¥¿å›žæ¥çš„æ—¶å€™ï¼Œæ­£å¥½çœ‹åˆ°ä¸€ä¸ªå¤§çˆ·éª‘ç€ä¸‰è½®è½¦åœ¨æˆ‘å‰é¢é©°éª‹ï¼Œå¤§çˆ·çš„è½¦æŠ€è´¼æºœï¼Œåœ¨å°å··å­ä¸­å¼€å‡ºäº†èµ›è½¦çš„æ„Ÿè§‰ã€‚è¿˜æ²¡ç­‰æˆ‘å¼ å˜´ï¼Œä»–å°±å³å°†è¦ç¦»å¼€æˆ‘çš„è§†çº¿ï¼Œæ€¥ä¸­ç”Ÿæ™ºï¼Œæˆ‘çœ‹åˆ°ä»–è½¦å­åŽé¢ç•™æœ‰ç”µè¯ï¼ŒäºŽæ˜¯æˆ‘å°±æ€¥å¿™çš„åŠªåŠ›çš„è¿½èµ¶ç€åŽ»è®°ä½ä»–çš„ç”µè¯ï¼Œæœ€åŽè¿«ä¸åŠå¾…çš„æ”¾ä¸‹æ‰‹ä¸­çš„ä¸œè¥¿ï¼Œæ‹¿å‡ºæ‰‹æœºæ‹¨æ‰“äº†ä»–çš„ç”µè¯ã€‚ å¤§çˆ·åŠžäº‹åˆ©è½ï¼Œä¸ä¸€ä¼šå°±åˆ°äº†æ¥¼ä¸‹ï¼Œä¸‰ä¸‹äº”é™¤äºŒçš„æŠŠåºŸå“æ”¶æ‹¾äº†ä¸€ç•ªï¼Œåƒæ˜¯æ”¶èŽ·äº†ä¸€æ‰¹æˆ˜åˆ©å“ä¸€æ ·ã€‚ä»–å¾ˆæƒŠè¯§ä¸ºä»€ä¹ˆæˆ‘çŸ¥é“ä»–çš„ç”µè¯ï¼Œæˆ‘è¯´æˆ‘çœ‹åˆ°äº†ä½ è½¦ä¸Šçš„ç”µè¯å·ç äº†ï¼Œå°±è®°ä¸‹æ¥äº†ã€‚ å¤§çˆ·è¯´ï¼šâ€œå°ä¼™å­ï¼Œä½ çš„è®°æ€§è¿˜çœŸå¥½ï¼Œä¸æ„§æ˜¯ä¸Šè¿‡å¤§å­¦çš„äººã€‚â€œï¼Œæˆ‘è¯´ï¼šâ€œæ˜¯å‘€ï¼Œæˆ‘è¿‡ç›®ä¸å¿˜ï¼å“ˆå“ˆï¼â€ã€‚ é‚£å¤©ä¸­åˆï¼Œæˆ‘æŠŠä¸œè¥¿åŠå–åŠé€çš„éƒ½ç»™è¿™ä½å¤§çˆ·äº†ï¼Œè°å«ä»–å¤¸æˆ‘å‘¢ï¼ æ€é‡ä¸Šé¢è¿™ä»¶äº‹ç®—ä¸ä¸Šä»€ä¹ˆå¤§äº‹ï¼Œé¡¶å¤šä¹Ÿå°±ç®—ä¸ªé¸¡æ¯›è’œçš®çš„å°äº‹ï¼Œä½†æ˜¯ç»™äº†æˆ‘å¾ˆå¤šå›žå¿†å’Œæ€è€ƒã€‚ å¾ˆå¤šé«˜ä¸­ç”Ÿä¹ŸåŒ…æ‹¬ä»–ä»¬çš„å®¶é•¿ä»¬ï¼Œéƒ½ç»å¸¸ä¼šè¯´ç­‰ä¸Šäº†å¤§å­¦å°±å¥½äº†ï¼Œä¸ç”¨é‚£ä¹ˆç´¯äº†ï¼Œåœ¨å¤§å­¦çš„æ®¿å ‚é‡Œå¯ä»¥æ— å¿§æ— è™‘çš„ äº«å— äº†ã€‚åœ¨æˆ‘çœ‹æ¥è¿™æ˜¯ä¸å¯¹çš„ï¼Œé«˜ä¸­ä¹‹æ‰€ä»¥ç´¯æ˜¯å› ä¸ºæœ‰è¿žç»µä¸ç»çš„ä½œä¸šå’Œæ²¡æœ‰å°½å¤´çš„è€ƒè¯•ï¼Œå½“ç„¶è¿˜æœ‰ç­ä¸»ä»»å–‹å–‹ä¸ä¼‘çš„æ•™å¯¼ï¼Œè®©ä½ çš„ç¥žç»æ—¶é•¿å¤„äºŽç´§ç»·çš„çŠ¶æ€ã€‚é«˜ä¸­æ˜¯äººç”Ÿä¸­å¿…ç»çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œè‡³å°‘æˆ‘è§‰å¾—å®ƒé”»ç‚¼äº†æˆ‘çš„æ„å¿—å’Œè€åŠ›ï¼ŒåŒ…æ‹¬å¯¹å¿ƒç†ä¸Šçš„è€ƒéªŒï¼Œæˆ‘å¾ˆæ„Ÿæ¿€é«˜ä¸­ä¸‰å¹´çš„ç”Ÿæ´»ã€‚ å¤§å­¦ç”Ÿæ´»å’Œå­¦ä¹ çš„ç¡®æ˜¯ä¸€ä¸ªå€¼å¾—å‘å¾€å’Œæƒ³è±¡çš„ï¼Œä½ å¯ä»¥åŠå„¿éƒŽå½“çš„è¿‡å®Œå‡ å¹´å¤§å­¦ç”Ÿæ´»ï¼Œä¹Ÿå¯ä»¥åŠªåŠ›æ‹¼æè¿‡æ¥ï¼Œæ²¡æœ‰äººé€¼ä½ åŽ»æ€Žä¹ˆåšï¼Œå®Œå…¨å–å†³äºŽä½ è‡ªå·±ã€‚ æˆ‘å¤§å­¦çš„æˆç»©ç®—æ˜¯ä¼˜å¼‚ï¼Œæ¯æ¬¡çœ‹åˆ°å¥–å­¦é‡‘åå•ä¸Šæœ‰è‡ªå·±çš„åå­—ï¼ŒåŒå­¦ä»¬éƒ½ä¼šè¯´ä½ çœŸåŽ‰å®³ï¼Œå±…ç„¶è€ƒè¿™ä¹ˆå¥½çš„æˆç»©ã€‚æˆ‘ä¼šè¯´ï¼Œå¦‚æžœä½ å†åŠªåŠ›ä¸€ä¸‹è‚¯å®šæ¯”æˆ‘è€ƒçš„æ›´å¥½ï¼Œå°±åƒé‚£ä¸ªå¤§çˆ·è¯´æˆ‘å¥½è®°æ€§ä¸€æ ·ï¼Œå…¶å®žå¹¶ä¸æ˜¯æˆ‘è¿‡ç›®ä¸å¿˜ï¼Œè€Œæ˜¯è‡ªå·±åŠªåŠ›çš„ç»“æžœï¼Œå› ä¸ºæˆ‘çŸ¥é“è‡ªå·±å¹¶ä¸æ˜¯å¤©æ‰ã€‚ å¾ˆå¤šäººè¿›å…¥ç¤¾ä¼šå‚åŠ å·¥ä½œåŽï¼Œå‘çŽ°å·¥ä½œå¹¶ä¸æ˜¯æƒ³è±¡ä¸­çš„é‚£èˆ¬ä¸€å¸†é£Žé¡ºï¼Œè‡ªå·±ä¸€èµ·è¿›å…¬å¸çš„åŒäº‹ï¼Œæ˜Žæ˜Žèƒ½åŠ›å’Œè‡ªå·±ç›¸å½“ç”šè‡³è¿˜ä¸å¦‚è‡ªå·±ï¼Œä¸ºä»€ä¹ˆåˆ«äººå°±å‡èŒåŠ è–ªï¼Œé©¬ä¸Šå°±è¦èµ°ä¸Šäººç”Ÿå·…å³°äº†ï¼Œè‡ªå·±å´è¿˜æ˜¯åŽŸåœ°è¸æ­¥æˆ–è€…ä¸¾æ­¥ç»´è‰°å‘¢ï¼Ÿæ€»æ˜¯æƒ³ä¸æ˜Žç™½è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Œé‚£æ˜¯å› ä¸ºä½ è‡ªå·±æ²¡æœ‰çœ‹åˆ°åˆ«äººæ¯”ä½ æ›´åŠ åŠªåŠ›ã€‚ è¿˜æœ‰ä¸å°‘äººä¼šæŠ±æ€¨ä¸ºä»€ä¹ˆåˆ«äººèƒ½åŠ›æ²¡æœ‰æˆ‘å¼ºï¼Œé¢†å¯¼ååæŠŠä¸€äº›é‡è¦çš„äº‹æƒ…äº¤ç»™äº†ä»–ï¼Œå¼€å§‹æ€€ç–‘å¯¹æ–¹æ˜¯ä¸æ˜¯å¯¹é¢†å¯¼æ–½äº†ä»€ä¹ˆé­”æ³•ï¼Œè€Œè‡ªå·±ä»Žæ¥éƒ½æ²¡æœ‰æƒ³è¿‡æ€Žä¹ˆåŽ»å‘å¯¹æ–¹è¯·æ•™ï¼Œæˆ–è€…æ€è€ƒè‡ªå·±æ˜¯ä¸æ˜¯çœŸçš„åšå¥½äº†æœ¬èŒå·¥ä½œã€‚ è¿™ä»¶å°äº‹ç»™äº†æˆ‘å‡ ä¸ªå¯å‘ï¼š 1. ä¸€å®šè¦ç»™è‡ªå·±æ ‘ç«‹ä¸€ä¸ªé•¿è¿œç›®æ ‡å’ŒçŸ­æœŸç›®æ ‡ï¼Œä¸æ–­çš„å®ŒæˆçŸ­æœŸç›®æ ‡ï¼Œå‘é•¿è¿œç›®æ ‡å‰è¿›ã€‚ 2. å¯¹äºŽåˆ«äººçš„èµžç¾Žæˆ–æ˜¯è¯‹æ¯ï¼Œè¦ä¿æŒä¸€é¢—å¹³å¸¸å¿ƒï¼Œæˆ’éª„æˆ’èºã€‚ 3. ä¸è¦æ€»æ˜¯å¤¸ä½ çš„å­©å­èªæ˜Žï¼Œè¦å¤¸ä»–æ¯”åˆ«äººæ›´åŠªåŠ›ï¼Œå› ä¸ºåŠªåŠ›æ¯”èªæ˜Žæ›´é‡è¦ã€‚ 4. ä¸è¦æ€»æ˜¯æŠ±æ€¨å‘½è¿çš„ä¸å…¬ï¼Œå¤šåŽ»å®¡è§†è‡ªå·±çš„ä¸è¶³ï¼Œæƒ³åŠžæ³•åŽ»è¡¥å…¨ã€‚ 5. æœ‰ä¸ªå¯ä»¥äº¤å¿ƒçš„æœ‹å‹å°¤ä¸ºé‡è¦ï¼Œå¯ä»¥è®©å½¼æ­¤æ•žå¼€å¿ƒæ‰‰ï¼Œæ— æ‰€é¡¾å¿Œçš„äº¤è°ˆã€‚ è¿™ä¸ªä¸–ä¸Šæ²¡æœ‰å…è´¹çš„åˆé¤ï¼Œä¸€åˆ‡éƒ½è¦é ä½ è‡ªå·±åŽ»å¥‹æ–—åŽ»äº‰å–ï¼Œæœºä¼šæ€»æ˜¯ç•™ç»™æœ‰å‡†å¤‡çš„äººï¼ŒåšæŒè‡ªå·±çš„ç›®æ ‡ä¸€ç›´å‰è¡Œï¼Œç›¸ä¿¡è‡ªå·±ï¼Œæœºä¼šæ€»æœ‰ä¸€å¤©ä¼šå’Œä½ ä¸æœŸè€Œé‡ã€‚ ç›¸ä¿¡æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¼šæ„Ÿæ¿€æ­£åœ¨åŠªåŠ›çš„è‡ªå·±ï¼ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´» æ„Ÿæ‚Ÿ å­¦ä¹  é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯† Wireshark]]></title>
    <url>%2F2018%2F08%2F20%2F%E5%88%9D%E8%AF%86-Wireshark%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨ Charles ä»‹ç»äº†åœ¨ MacOS ä¸Šé¢çš„ä½¿ç”¨ Charles å·¥å…·, è™½ç„¶ Charles å¾ˆä¸é”™, ä½†æ˜¯å…¶åªèƒ½æŠ“ HTTP/HTTPS çš„åŒ…, å¯¹ TCPã€UDP ç­‰å…¶ä»–åè®®çš„ç½‘ç»œåŒ…, çˆ±èŽ«èƒ½åŠ©ã€‚ ä»Šå¤©ç»™å¤§å®¶åˆ†äº«å¼ºå¤§çš„ç½‘ç»œæŠ“åŒ…å·¥å…· Wiresharkï¼Œç®—æ˜¯åˆæ­¥è®¤è¯†ä¸€ä¸‹è¿™ä¸ªå·¥å…·ï¼ŒåŽç»­åˆ†äº«æ›´å¤šå…³äºŽ Wireshark çš„å†…å®¹ã€‚ ç®€ä»‹Wireshark æ˜¯å…è´¹çš„ï¼Œæ”¯æŒ Windowsã€MacOS å’Œ Linuxï¼Œæä¾›ä¸°å¯Œçš„ GUI äº¤äº’ï¼Œèƒ½åˆ†æžæ‰€æœ‰çš„ç½‘ç»œåè®®ï¼Œå¹¶ä¸”æ˜¯å¼€æºçš„ã€‚ æŽŒæ¡å¥½ Wiresharkï¼Œèƒ½å¯¹ç»å¤§éƒ¨åˆ†çš„ç½‘ç»œåè®®è¿›è¡Œåˆ†æžäº†ï¼Œæ‰€ä»¥å­¦ä¹ å®ƒçš„ä½¿ç”¨å¯¹ä½ çš„å·¥ä½œä¸æ— è£¨ç›Šã€‚ å…³äºŽ Wireshark æœ¬èº« UIï¼ˆå±•ç¤ºçš„ç•Œé¢å†…å®¹ï¼‰ çš„éƒ¨åˆ†ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ï¼Œæ›´å¤šå…³äºŽ Wireshark çš„ä»‹ç»å’Œç‰¹æ€§ï¼Œå¯ä»¥åŽ» Wireshark å®˜ç½‘ æŸ¥é˜…ã€‚ å®‰è£…æˆ‘çš„ MacOS ç‰ˆæœ¬: ç‚¹å‡» Wireshark çš„ ä¸‹è½½åœ°å€, å¯ä»¥åŽ»ä¸‹è½½å¯¹åº”çš„å¹³å°ç‰ˆæœ¬ã€‚ æ³¨æ„: ä¹‹å‰çš„ Mac ç³»ç»Ÿç‰ˆæœ¬å¯èƒ½éœ€è¦å®‰è£… x11, çŽ°åœ¨æ–°ç³»ç»Ÿä¸éœ€è¦å®‰è£…äº†. æŠ“ iOS è®¾å¤‡çš„æ•°æ®åŒ…æƒ³æŠ“ iOS è®¾å¤‡çš„ç½‘ç»œæ•°æ®ï¼Œéœ€è¦è®© iOS è®¾å¤‡æ•°æ®é€šè¿‡ MacOS æ‰è¡Œï¼Œå› ä¸º Wireshark æ˜¯é’ˆå¯¹ç½‘å£è¿›è¡ŒæŠ“åŒ…çš„ã€‚ å½“ç„¶äº†ï¼Œä½ çš„ iOS è®¾å¤‡ä¸éœ€è¦è¶Šç‹±. é€šè¿‡ usb è¿žæŽ¥ iOS è®¾å¤‡åŽï¼ŒæŽ¥ä¸‹æ¥åˆ›å»ºè¿œç¨‹è™šæ‹ŸæŽ¥å£ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š 1rvictl -s è®¾å¤‡id(udid) rvictl å³ Remote Virtual Interface Toolã€‚å®ƒå¯ä»¥é€šè¿‡ iOS è®¾å¤‡çš„ UDID åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œç„¶åŽé€šè¿‡è¿™ä¸ªè™šæ‹Ÿç½‘å¡ç›‘å¬è®¾å¤‡ä¸Šæ‰€æœ‰çš„ç½‘ç»œæµé‡ã€‚ æ‰§è¡ŒæˆåŠŸåŽï¼ŒMac ä¼šå‡ºçŽ°ä¸€ä¸ªå¯¹åº”çš„è™šæ‹Ÿç½‘ç»œæŽ¥å£ï¼Œåå­—æ˜¯ rvi0ï¼ˆå¦‚æžœæœ‰å¤šä¸ª iOS è®¾å¤‡ï¼Œ åˆ™ç´¯åŠ ï¼Œrvi1ï¼Œrvi2â€¦ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åªè¦å¯åŠ¨ Wiresharkï¼Œç›‘å¬ rvi0 æŽ¥å£å°±èƒ½æŠ“åˆ° iOS è®¾å¤‡çš„æ•°æ®äº†ã€‚ å…³äºŽèŽ·å– iOS è®¾å¤‡ ID(UDID)ï¼Œå¯ä»¥ä½¿ç”¨ Xcode, åœ¨ Window/Devices and Simulators ä¸­é€‰æ‹©ç›¸åº”è®¾å¤‡ï¼Œå³é¢è®¾å¤‡ä¿¡æ¯çš„ identifier é‡Œå°±æ˜¯å¯¹åº”çš„ UDID. ä¹Ÿå¯ä»¥é€šè¿‡ iTunes æˆ–è€…ç¬¬ä¸‰æ–¹å·¥å…·å¦‚ iTools èŽ·å–. ä½ å¯ä»¥å®‰è£… ideviceinstaller æ¥æŸ¥çœ‹è®¾å¤‡ ID. 1brew install ideviceinstaller ç„¶åŽæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š 1idevice_id -l ä»¥æŠ“å–ä¸‹é¢çš„ä¸€ä¸ª HTTP è¯·æ±‚ä¸ºä¾‹ï¼Œç®€å•è¯´æ˜Žä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†ã€‚ GET è¯·æ±‚ï¼š 1/news/detailV3.html?id=1279391&amp;COMMON_ACCESS_TOKEN=(null)&amp;COMMON_ACCESS_TOKEN_SECRET=(null)&amp;_cT=IOS&amp;_cV=3.1.3&amp;_cA=PM çœ‹è¿”å›žç»“æžœï¼Œé€‰ä¸­ Rsponse(200 OK) å³é”®, Follow/HTTP Streamï¼Œå¦‚å›¾æ‰€ç¤ºï¼š åœ¨å¼¹å‡ºçš„çª—å£ä¸­å°±å¯ä»¥çœ‹åˆ°å…·ä½“çš„å“åº”å†…å®¹ï¼Œä»¥åŠå“åº”çš„ json æ•°æ®ã€‚ è¿‡æ»¤å™¨è¿‡æ»¤åœ¨ Wireshark ä¸­æ˜¾ç¤ºè¿‡æ»¤å™¨ä¼šæ˜¾ç¤ºå¾ˆå¤šå½“å‰ç½‘ç»œçš„æ•°æ®åŒ…ï¼Œå¦‚æžœä½ æƒ³çœ‹æŒ‡å®šè§„åˆ™çš„æ•°æ®åŒ…æ€Žä¹ˆåŠžï¼Ÿ åˆ«æ‹…å¿ƒï¼ŒWireshark ç»™æˆ‘ä»¬æä¾›äº†è¿‡æ»¤åŠŸèƒ½ï¼ŒæŒ‰ç…§ä¸€å®šçš„è¿‡æ»¤è§„åˆ™å°±å¯ä»¥è¾¾åˆ°ä½ çš„ç›®çš„ã€‚ 1. ç½‘ç»œåè®®è¿‡æ»¤ æ¯”å¦‚ TCPï¼Œåªæ˜¾ç¤º TCP åè®®ï¼ŒHTTP åªæ˜¾ç¤º HTTP åè®®ç­‰ã€‚åœ¨è¿‡æ»¤å™¨è¾“å…¥æ¡†ä¸­ç›´æŽ¥è¾“å…¥åè®®åç§°å³å¯ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚ 2. IP åœ°å€è¿‡æ»¤ å¦‚ ip.src == 192.168.1.102 æ˜¾ç¤ºæºåœ°å€ä¸º 192.168.1.102ï¼Œè€Œ ip.dst == 192.168.1.102, ç›®æ ‡åœ°å€ä¸º 192.168.1.102ã€‚ 3. ç«¯å£è¿‡æ»¤ tcp.port == 80, ç«¯å£ä¸º 80 çš„ tcp.srcport == 80, åªæ˜¾ç¤º TCP åè®®çš„åŽŸç«¯å£ä¸º 80 çš„ã€‚ 4. Http æ¨¡å¼è¿‡æ»¤ http.request.method == â€œGETâ€ï¼Œåªæ˜¾ç¤º HTTP GET æ–¹æ³•çš„ã€‚ 5. ç»“åˆé€»è¾‘è¿ç®—ç¬¦ AND/OR ç»„æˆå¤æ‚çš„è¡¨è¾¾å¼ AND/OR ä¹Ÿå¯ä»¥å†™æˆ &amp;&amp; / || ä¸‹é¢ä¸¾å‡ ä¸ªå¸¸ç”¨çš„ç¤ºä¾‹ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314//æºåœ°å€æˆ–è€…ç›®æ ‡åœ°å€æ˜¯192.168.1.103ip.src == 192.168.1.103 or ip.dst == 192.168.1.103//æ˜¾ç¤ºæ‰€æœ‰ç›®æ ‡æˆ–æºåœ°å€æ˜¯192.168.1.1çš„æ•°æ®åŒ…ip.addr == 192.168.1.1 //æ˜¾ç¤ºç›®æ ‡åœ°å€æ˜¯192.168.1.1çš„æ•°æ®åŒ…ip.dst == 192.168.1.1 //æ˜¾ç¤ºæºåœ°å€æ˜¯192.168.1.1çš„æ•°æ®åŒ…ip.src == 192.168.1.1 //tcp è¿žæŽ¥ç«¯å£ä¸º9101çš„æ•°æ®åŒ…tcp.port == 9101 æ›´å¤šçš„è¿‡æ»¤è§„åˆ™å¯ä»¥åŽ» å®˜æ–¹æ‰‹å†Œ å’Œ CaptureFilters æŸ¥é˜…å’Œå­¦ä¹ ã€‚ ç¾Žä¸­ä¸è¶³Wireshark åªèƒ½æŸ¥çœ‹å°åŒ…ï¼Œè€Œä¸èƒ½ä¿®æ”¹å°åŒ…çš„å†…å®¹ï¼Œæˆ–è€…å‘é€å°åŒ…ã€‚ å¯¹äºŽ HTTPã€HTTPS ç½‘ç»œå°åŒ…ï¼ŒWireshark éƒ½å¯ä»¥æ•èŽ·ï¼Œ ä½†ä¸èƒ½ç›´æŽ¥è§£å¯† HTTPSï¼Œæ‰€ä»¥æƒ³ä½¿ç”¨ Wireshark æ¥åˆ†æž HTTPS åŒ…ä¸­çš„å†…å®¹ï¼Œéœ€è¦åŽ»é¢å¤–é…ç½®ï¼Œè¾ƒéº»çƒ¦ï¼ŒåŽç»­ç ”ç©¶å†åˆ†äº«ç»™å¤§å®¶ã€‚ æ‰€ä»¥å»ºè®®å¤§å®¶ï¼Œåˆ†æž HTTP/HTTPS åŽ»ä½¿ç”¨å„è‡ªå¹³å°ä¸Šé¢çš„å…¶ä»–å·¥å…·ï¼Œ å¦‚ Fiddler å’Œ Charles ç­‰ä¼˜ç§€çš„æŠ“åŒ…å·¥å…·ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Wireshark tcp ip udp http https</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é…ç½® php7 + Nginx]]></title>
    <url>%2F2018%2F08%2F19%2F%E9%85%8D%E7%BD%AE-php7-Nginx%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ PHP7ä¹‹å‰ä¸ºäº†é…åˆå®Œæˆä¸€ä¸ªé¡¹ç›®ï¼ˆPHP ç‰ˆæœ¬ä¸º5.6ï¼‰ï¼Œåœ¨æœ¬æœºæ­å»ºäº† PHP56 çš„çŽ¯å¢ƒï¼ŒåŽé¢è‡ªå·±ç³»ç»Ÿå‡çº§ä¸º macOS High Sierraï¼Œå‘çŽ°ç³»ç»Ÿè‡ªå¸¦çš„ PHP ç‰ˆæœ¬å·²ç»æ˜¯ 7.1 äº†ï¼ŒäºŽæ˜¯å°±å¼€å§‹ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ PHP ç‰ˆæœ¬äº†ã€‚ 1php -v æ˜¾ç¤º PHP ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 123PHP 7.1.16 (cli) (built: Apr 1 2018 13:14:42) ( NTS )Copyright (c) 1997-2018 The PHP GroupZend Engine v3.1.0, Copyright (c) 1998-2018 Zend Technologies ç³»ç»Ÿè‡ªå¸¦çš„ PHP7.1 æ²¡æœ‰é»˜è®¤çš„ php.ini æ–‡ä»¶ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥æ‰¾ä¸€ä¸‹ï¼š 1php -r &quot;echo php_ini_loaded_file();&quot; æ­¤æ—¶å¹¶æ²¡æœ‰æ‰“å°å¯¹åº”çš„é…ç½®æ–‡ä»¶ä¿¡æ¯ã€‚éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åŽ»å¤åˆ¶ä¸€ä»½ï¼š 1sudo cp /private/etc/php.ini.default /private/etc/php.ini å†æ¬¡æ‰§è¡Œä¸Šé¢å‘½ä»¤ï¼Œå³å¯çœ‹åˆ°é…ç½®æ–‡ä»¶çš„ç»å¯¹è·¯å¾„äº†ã€‚æˆ–è€…æ‰§è¡Œ php --ini 123456php --iniConfiguration File (php.ini) Path: /etcLoaded Configuration File: /etc/php.iniScan for additional .ini files in: (none)Additional .ini files parsed: (none) è¿™é‡Œæœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œphp.ini æ–‡ä»¶å¤åˆ¶æˆåŠŸåŽï¼Œéœ€è¦ä¸‹é¢ä¸¤æ­¥æ“ä½œï¼Œå¦åˆ™åœ¨ php ä»£ç å‘ç”Ÿè‡´å‘½é”™è¯¯çš„æ—¶å€™ï¼Œé¡µé¢ä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹ï¼Œåªæ˜¯æŠ¥ HTTP ERROR 500 çš„é”™è¯¯ã€‚ ç¬¬ä¸€æ­¥ï¼Œä¿®æ”¹ php.ini æ–‡ä»¶çš„æƒé™ï¼Œå¦åˆ™æ— æ³•ç¼–è¾‘ä¿å­˜ï¼Œé»˜è®¤æ˜¯åªè¯»å±žæ€§ã€‚ 1sudo chmod 777 /private/etc/php.ini ç¬¬äºŒæ­¥ï¼Œç¼–è¾‘ php.ini æ–‡ä»¶ï¼Œå°† display_errors = Off æ”¹ä¸ºä¸‹é¢ on å³å¯ã€‚ 1display_errors = On è®°å¾—æ¯æ¬¡ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶ï¼Œéœ€è¦é‡å¯ php-fpm å’Œ nginx æœåŠ¡ã€‚ PHP561. å®‰è£… PHP56 å¯ä»¥å‚è€ƒä¸‹é¢ä¸¤ç¯‡æ–‡ç« ã€‚ PHPå¼€å‘å‡†å¤‡ å®‰è£… PHP é‡åˆ°çš„é—®é¢˜ 2. å¸è½½ï¼ˆåˆ é™¤ï¼‰PHP56 æ‰§è¡Œ brew uninstall 1brew uninstall php å³å¯å®Œæˆå¸è½½ã€‚ å¦‚æžœå¸è½½é‡åˆ°é—®é¢˜ï¼Œå°±æ‰“å¼€ /usr/local/Cellar/ ç›®å½•ï¼Œåˆ é™¤å¯¹åº”çš„ PHP ç›®å½•å³å¯ã€‚ é…ç½® php-fpmçŽ°åœ¨æ–°ç‰ˆæœ¬çš„ PHP å…¶å†…æ ¸å·²ç»é›†æˆäº† php-fpmï¼Œæˆ‘ä»¬ä¸éœ€è¦å¦å¤–å®‰è£…äº†ã€‚ é…ç½® php-fpm é…ç½®æ–‡ä»¶ 1sudo cp /private/etc/php-fpm.conf.default /private/etc/php-fpm.conf ä¿®æ”¹é…ç½®æ–‡ä»¶ 1sudo vi /private/etc/php-fpm.conf æ‰¾åˆ° error_log é¡¹ï¼Œæ·»åŠ ä¸‹é¢ä¸¤ä¸ªé…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š 12error_log = /usr/local/var/log/php-fpm.logpid = /usr/local/var/run/php-fpm.pid å¦‚æžœä¸é…ç½®ä¸Šé¢çš„é…ç½®é¡¹ï¼Œå¯åŠ¨ php-fpm ä¼šæŠ¥é”™ï¼š 123ERROR: failed to open error_log (/usr/var/log/php-fpm.log): No such file or directory (2)ERROR: failed to post process the configurationERROR: FPM initialization failed æŽ¥ä¸‹æ¥, ç»§ç»­é…ç½®ï¼Œå°† www.conf.default å¤åˆ¶ä¸€ä»½å‘½åä¸º www.conf å³å¯ã€‚ 123cd /private/etc/php-fpm.d/sudo cp www.conf.default www.conf ä¸é…ç½®ä¸Šé¢çš„ï¼Œä¼šæŠ¥å¦‚ä¸‹é”™è¯¯: 12ERROR: No pool defined. at least one pool section must be specified in config fileERROR: FPM initialization failed è‡³æ­¤ï¼Œå¯ä»¥å¯åŠ¨ php-fpm äº†ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š 1sudo php-fpm -D ä¸å‡ºæ„å¤–çš„è¯ï¼Œå·²ç»æˆåŠŸå¯åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…å†µ 1netstat -an | grep 9000 å¦‚æžœä½ åœ¨å¯åŠ¨ php-fpm é‡åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š 12ERROR: unable to bind listening socket for address &apos;127.0.0.1:9000&apos;: Address already in use (48)ERROR: FPM initialization failed æœ‰ä¸¤ç§æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ 1.ä¿®æ”¹ php-fpm ä½¿ç”¨çš„ç«¯å£å· 1sudo vim /private/etc/php-fpm.d/www.conf å°† listen = 127.0.0.1:9000 æ”¹ä¸º listen = 127.0.0.1:9001 å³å¯ã€‚ 2.æ€æŽ‰9000ç«¯å£å ç”¨çš„è¿›ç¨‹ å…³é—­æ‰€æœ‰ä¹‹å‰å¯åŠ¨çš„ php-fpm 1killall php-fpm æ‰¾åˆ°å ç”¨ç«¯å£çš„è¿›ç¨‹å· 1netstat -an | grep 9000 ç„¶åŽ kill -9 pidï¼Œé‡æ–°å¯åŠ¨ php-fpm å³å¯ã€‚ å®‰è£…å’Œé…ç½® Nginx1brew install nginx åˆ›å»ºæ–‡ä»¶ 12345mkdir -p /usr/local/var/log/nginxmkdir -p /usr/local/etc/nginx/sites-availablemkdir -p /usr/local/etc/nginx/sites-enabledmkdir -p /usr/local/etc/nginx/conf.dmkdir -p /usr/local/etc/nginx/ssl 1234567sudo mkdir -p /var/wwwsudo chown :staff /var/wwwsudo chmod 775 /var/wwwvi /var/www/info.phpvi /var/www/index.htmlvi /var/www/403.htmlvi /var/www/404.html æ”¹å˜ nginx.conf é…ç½®æ–‡ä»¶ è¯¥é…ç½®æ–‡ä»¶åœ¨ /usr/local/etc/nginx/nginx.conf ä¸‹é¢. æˆ‘çš„é…ç½®: 1234567891011121314151617181920212223242526272829303132333435363738worker_processes 1; error_log /usr/local/etc/nginx/logs/error.log debug;pid /usr/local/var/run/nginx.pid; events &#123; worker_connections 256;&#125; http &#123; include mime.types; default_type application/octet-stream; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /usr/local/etc/nginx/logs/access.log main; sendfile on; keepalive_timeout 65; index index.html index.php; include /usr/local/etc/nginx/sites-enabled/*; include /usr/local/etc/nginx/conf.d/*; server &#123; listen 8080; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; root ~/projs/phpdev/nginx/nginx_sites/; #webçš„æ ¹ç›®å½• index index.php index.html index.htm; #åŠ index.php &#125; &#125;&#125; æ³¨æ„: 1234location / &#123; root ~/projs/phpdev/nginx/nginx_sites/; #webçš„æ ¹ç›®å½• index index.php index.html index.htm; #åŠ index.php&#125; é…ç½®äº†æˆ‘çš„ web ç›®å½•å’Œæ”¯æŒçš„æ–‡ä»¶. è¿è¡Œ PHP åˆ›å»º index.php å¯åŠ¨ php-fpm 1sudo php-fpm æˆ–è€…ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼æ¥å¯åŠ¨ PHP-fpm 1sudo php-fpm -D å¯åŠ¨ Nginx 1sudo nginx ç¼–è¾‘ index.php åœ¨ web ç›®å½•(æˆ‘é…ç½®çš„) ~/projs/phpdev/nginx/nginx_sites/ æ–°å»ºæ–‡ä»¶ index.php. index.php é‡Œé¢å¯ä»¥ç¼–å†™ä»£ç : 12345678910&lt;!-- lang: php --&gt;&lt;!-- ~/nginx_sites/index.php --&gt;&lt;?php echo &quot;Hello PHP&quot;; echo &quot;&lt;/br&gt;&quot;; echo &quot;å­¦ä¹  php&quot;; echo &quot;&lt;/br&gt;&quot;; echo phpinfo();?&gt; æ‰“å¼€æµè§ˆå™¨, è¾“å…¥åœ°å€ï¼šhttp://localhost:8080/index.php ä½ ä¼šçœ‹åˆ°ä¸‹é¢çš„é¡µé¢: ä¹Ÿå¯ä»¥åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºå…¶ä»– PHP æ–‡ä»¶, å¦‚ m.php æ–‡ä»¶. æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost:8080/m.php å¯ä»¥æ‰§è¡Œç›¸å¯¹åº”çš„æ–‡ä»¶. æ³¨æ„ï¼šè¿™é‡Œçš„ m.php æ˜¯æ–°å»ºçš„ PHP æ–‡ä»¶. é‡è¦æ–‡ä»¶1. php é…ç½®æ–‡ä»¶ 1/private/etc/php.ini 2. nginx log æ–‡ä»¶ 12345/usr/local/var/log/nginx/access.log/usr/local/var/log/nginx/error.log/usr/local/etc/nginx/logs/error.log 3. nginx é…ç½®æ–‡ä»¶ 1/usr/local/etc/nginx/nginx.conf 4. php-fpm é…ç½®æ–‡ä»¶ 1/private/etc/php-fpm.d/www.conf å¸¸è§é—®é¢˜502 bad gateaway æˆ‘æ˜¯ç»å¸¸çœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ¯æ¬¡å¼•èµ·çš„åŽŸå› åˆä¸å¤ªä¸€æ ·ï¼Œç»å¤§éƒ¨åˆ†æ˜¯å› ä¸º php-fpm å¯åŠ¨ä¸äº†æˆ–è€…æ˜¯å…¶ç«¯å£é”™è¯¯å¯¼è‡´çš„ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®åŽ»çœ‹ /usr/local/etc/nginx/logs/error.log æ—¥å¿—æ–‡ä»¶ã€‚ ä¾‹å¦‚ä¸‹é¢çš„é”™è¯¯ï¼š 1234567[error] 61016#0: *1 kevent() reported that connect() failed (61: Connection refused) while connecting to upstream, client: 127.0.0.1, server: localhost, request: &quot;GET /3.php HTTP/1.1&quot;, upstream: &quot;fastcgi://127.0.0.1:9000&quot;, host: &quot;localhost:8080&quot; æœ€ç»ˆï¼Œæˆ‘ä¿®æ”¹äº† /private/etc/php-fpm.d/www.conf ä¸­ç«¯å£ä¸º 9000ï¼ˆæˆ‘ä¹‹å‰å°†è¯¥ç«¯å£ä¿®æ”¹äº†å…¶ä»–çš„ï¼‰ï¼Œé‡å¯ php-fpm è§£å†³é—®é¢˜ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>PHP MySql nginx php-fpm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€å•é…ç½® Apache]]></title>
    <url>%2F2018%2F07%2F14%2F%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE-Apache%2F</url>
    <content type="text"><![CDATA[å£°æ˜Žæœ‰æ—¶å€™, æˆ‘ä»¬å¸Œæœ›åœ¨è‡ªå·±æœ¬æœº(PC)æ­å»ºä¸€ä¸ª WebServer, ç„¶åŽè‡ªå·±å¯ä»¥åœ¨æµè§ˆå™¨æˆ–è€…æ‰‹æœºä¸Šé¢å¯ä»¥è®¿é—®å¯¹åº”çš„åœ°å€ç›´æŽ¥æŸ¥çœ‹æ•ˆæžœ, å†æˆ–è€…å¸Œæœ›æµ‹è¯•ä¸‹è½½åŠŸèƒ½ç­‰, å…¶å®ž MacOS è‡ªå¸¦çš„æœ‰ Apache æœåŠ¡å™¨. ä¸‹é¢ç®€å•åˆ†äº«ä¸€ä¸‹, åœ¨ MacOS ä¸­å¦‚ä½•ç®€å•çš„ä½¿ç”¨ Apache æœåŠ¡å™¨. å¸¸ç”¨å‘½ä»¤å¸¸ç”¨çš„å‘½ä»¤æœ‰å¼€å¯/é‡å¯/åœæ­¢ç­‰. 1.å¼€å¯: sudo apachectl start2.é‡å¯: sudo apachectl restart3.å…³é—­: sudo apachectl stop4.æŸ¥çœ‹ç‰ˆæœ¬å·: httpd -v 1.æŸ¥çœ‹ Apache ç‰ˆæœ¬å· 1httpd -v æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤: 1sudo apachectl -v æŸ¥çœ‹ç»“æžœå¦‚ä¸‹: 12Server version: Apache/2.4.28 (Unix)Server built: Oct 9 2017 19:54:20 2.å¯åŠ¨ Apache 1sudo apachectl start åœ¨æµè§ˆå™¨æ‰“å¼€: http://localhost ä¼šæ˜¾ç¤º: 1It works 3.åœæ­¢ Apache 1sudo apachectl stop å¦‚æžœæ²¡æœ‰å¼€å¯ Apache æœåŠ¡, æ‰§è¡Œä¸Šé¢å‘½ä»¤çš„è¯, ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯: 12/System/Library/LaunchDaemons/org.apache.httpd.plist: Could not find specified service 4.é‡æ–°å¯åŠ¨ Apache 1sudo apachectl restart å¦‚æžœä¿®æ”¹äº† Apache çš„é…ç½®æ–‡ä»¶, éœ€è¦é‡æ–°å¯åŠ¨ Apache æœåŠ¡, æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤å³å¯. é…ç½® Sitesåœ¨è‡ªå·±çš„ç”¨æˆ·ç›®å½•, æ–°å»ºä¸€ä¸ª Sites ç›®å½•, ä¾‹å¦‚æˆ‘çš„ç”¨æˆ·ç›®å½•æ˜¯ /Users/mark, å¯ä»¥åœ¨ç»ˆç«¯åˆ†åˆ«æ‰§è¡Œ: 123cd /Users/markmkdir Sites æ‰§è¡ŒæˆåŠŸåŽ, å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç›®å½•: æŽ¥ä¸‹æ¥ä¿®æ”¹ Apache ä¸­çš„é…ç½®æ–‡ä»¶, æ‰§è¡Œä¸‹é¢å‘½ä»¤å¼€å§‹ç¼–è¾‘ httpd.conf æ–‡ä»¶. 1sudo vim /etc/apache2/httpd.conf æ‰“å¼€ httpd.conf æ–‡ä»¶ï¼ŒæŸ¥æ‰¾ userdir å…³é”®å­—. æ‰¾åˆ°å¦‚ä¸‹ä¸¤è¡Œè¢«æ³¨é‡ŠæŽ‰çš„å†…å®¹: 123#Include /private/etc/apache2/extra/httpd-userdir.conf#LoadModule userdir_module libexec/apache2/mod_userdir.so å°†å…¶å‰é¢çš„ #(æ³¨é‡Š) åŽ»æŽ‰, ç´§æŽ¥ç€ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶, å¢žåŠ å¦‚ä¸‹å†…å®¹: 123&lt;Directory /Users/mark/Sites&gt; Require all granted&lt;/Directory&gt; å°†ä¸Šé¢çš„è¿™äº›ä»£ç æ”¾åˆ°å¦‚ä¸‹ä»£ç ä¸‹é¢å³å¯: 12345&lt;Directory &quot;/Library/WebServer/CGI-Executables&quot;&gt; AllowOverride None Options All Require all granted&lt;/Directory&gt; ä¿å­˜è¯¥æ–‡ä»¶å¹¶é€€å‡º vim. æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹ httpd-userdir.conf æ–‡ä»¶: 1sudo vim /private/etc/apache2/extra/httpd-userdir.conf å¢žåŠ å¦‚ä¸‹å†…å®¹: 12345UserDir Sites&lt;IfModule bonjour_module&gt; RegisterUserSite customized-users&lt;/IfModule&gt; æ³¨æ„: å¦‚æžœåœ¨ /private/etc/apache2/extra/ ç›®å½•ä¸‹æ²¡æœ‰è¯¥æ–‡ä»¶, æ–°å»ºä¸€ä¸ªå³å¯. ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºå³å¯. æˆ‘ä»¬å¯ä»¥å°†è‡ªå·±éœ€è¦è¿è¡Œçš„ html ç­‰æ–‡ä»¶æ”¾åˆ°è¯¥ç›®å½•, å¦‚æˆ‘å°† index.html æ”¾åˆ°è¯¥ç›®å½•. é‡æ–°å¯åŠ¨ Apache æœåŠ¡, åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost/~mark/, å¯ä»¥çœ‹åˆ° index.html é‡Œé¢çš„å†…å®¹. WebServer ç›®å½•ä¸Šé¢æˆ‘ä»¬æåˆ°, å¯åŠ¨ Apache æœåŠ¡ä¹‹åŽ, åœ¨æµè§ˆå™¨å¯ä»¥çœ‹åˆ° It Works çš„å­—æ ·, é‚£ä¹ˆè¿™ä¸ªæ˜¯å“ªä¸ªæ–‡ä»¶è¾“å‡ºçš„å‘¢? è¿™ä¸ªæ–‡ä»¶æ˜¯ sudo mvim index.html.en~orig, åœ¨å¦‚ä¸‹ç›®å½•: 1/Library/WebServer/Documents å¯ä»¥ä½¿ç”¨ vim ç¼–è¾‘è¯¥æ–‡ä»¶, ç„¶åŽå†åˆ·æ–°æµè§ˆå™¨å°±å¯ä»¥çœ‹åˆ°å…¶å˜åŒ–. æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠè‡ªå·±çš„ html æ–‡ä»¶æ”¾åˆ°è¿™é‡Œ, å¦‚ mark.html, å†…å®¹å¦‚ä¸‹: 12345&lt;html&gt; &lt;body&gt; &lt;h1&gt;Hi, mark, Apache server works!&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost/mark.html, å¯ä»¥çœ‹åˆ°å¯¹åº”çš„è¾“å‡º. å¦‚æžœå«Œé…ç½® Sites ç›®å½•éº»çƒ¦, å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼, ç›´æŽ¥æ‹·è´å¯¹åº”çš„æ–‡ä»¶æˆ–è€…ç›®å½•æ”¾åˆ° /Library/WebServer/Documents ä¸­, åªä¸è¿‡éœ€è¦ root æƒé™ç½¢äº†. æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>Apache WebServer MacOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RunLoop: ç§»é™¤å¸¸é©»çº¿ç¨‹]]></title>
    <url>%2F2018%2F07%2F01%2FRunLoop-%E7%A7%BB%E9%99%A4%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[æ¦‚è¦ä¸‹é¢ä¸¤ç¯‡æ–‡ç« : å¸¸é©»çº¿ç¨‹æ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒ NSTimer å®žçŽ°å¸¸é©»çº¿ç¨‹çš„é—®é¢˜ éƒ½æ˜¯åœ¨ iOS å¹³å°ä¸Šå¦‚ä½•åˆ©ç”¨ RunLoop çš„ç‰¹æ€§å®žçŽ°å¸¸é©»çº¿ç¨‹. å¯èƒ½ä½ çœ‹åˆ°æœ¬ç¯‡æ–‡ç« çš„æ ‡é¢˜ ç§»é™¤å¸¸é©»çº¿ç¨‹, æœ‰ç‚¹ä¸ç†è§£ç”šè‡³è§‰å¾—ä½œè€…æ˜¯ä¸æ˜¯æœ‰ç‚¹ç¥žç»ç—…, éƒ½å·²ç»éœ€è¦å¸¸é©»çº¿ç¨‹äº†, ä¸ºä»€ä¹ˆè¿˜è¦åŽ»é€€å‡ºå‘¢? å®žé™…åº”ç”¨åœºæ™¯ä¸­çš„ç¡®å‡ ä¹Žé‡ä¸åˆ°è¿™ç§æƒ…å†µ, æ‰€ä»¥, æœ¬ç¯‡åªæ˜¯ä»ŽæŠ€æœ¯çš„è§’åº¦ç»™å¤§å®¶åˆ†äº« RunLoop å…¶ä»–çš„ä¸€äº›çŸ¥è¯†ç‚¹. ä¸”è€ä½æ€§å­å¾€ä¸‹çœ‹â€¦ ä¸ºäº†ä¸è®©å¤§å®¶è¯¯è§£, ç»Ÿä¸€ä¸€ä¸‹ç›¸å…³çš„è¯æ±‡å’Œè¯­å¢ƒ. è¾“å…¥æº, åŒ…æ‹¬ source å’Œ timer. é€€å‡º RunLoop æŒ‡çš„æ˜¯åœ¨å¸¸é©»çº¿ç¨‹çš„æ–¹æ³•ä¸­ç«‹å³è¿”å›ž. è¿™é‡Œçš„ RunLoop æŒ‡çš„æ˜¯å­çº¿ç¨‹ä¸­çš„ RunLoop ä¸æ˜¯ä¸»çº¿ç¨‹ä¸­çš„. ç»“åˆä¹‹å‰ä»‹ç»å¸¸é©»çº¿ç¨‹çš„æ–‡ç« æ¥çœ‹çŽ°åœ¨çš„æ–‡ç« , ä¸ç„¶ä¸å¥½ç†è§£. è¿è¡Œ RunLoop çš„æ–¹æ³•è¿™é‡Œæœ‰ä¸‰ç§æ–¹å¼å¼€å¯è¿è¡Œ RunLoop, åˆ†åˆ«å¦‚ä¸‹: 12345- (void)run;- (void)runUntilDate:(NSDate *)limitDate;- (void)runMode:(NSString *)mode beforeDate:(NSDate *)limitDate; run æ–¹æ³• çœ‹ä¸€ä¸‹ API æ–‡æ¡£å¦‚ä½•è§£é‡Š run æ–¹æ³•çš„: 12345Puts the receiver into a permanent loop, during which time it processes data from all attached input sources.If no input sources or timers are attached to the run loop, this method exits immediately; otherwise, it runs the receiver in the NSDefaultRunLoopMode by repeatedly invoking runMode:beforeDate:. In other words, this method effectively begins an infinite loop that processes data from the run loopâ€™s input sources and timers. å¤§è‡´æ„æ€è®²çš„æ˜¯, åœ¨æ²¡æœ‰ä»»ä½•è¾“å…¥æºçš„æƒ…å†µä¸‹, run æ–¹æ³•ä¼šç«‹å³æ‰§è¡ŒåŽé€€å‡º, ä¸ä¼šä¿æŒçº¿ç¨‹çš„æŒä¹…æ€§, æ¢å¥è¯è¯´, åœ¨æœ‰è¾“å…¥æºçš„æƒ…å†µä¸‹, è¯¥æ–¹æ³•ä¼šè¿›å…¥ä¸€ä¸ªæ— é™å¾ªçŽ¯å½“ä¸­. æœ¬è´¨ä¸Š, åœ¨ NSDefaultRunLoopMode æ¨¡å¼ä¸‹, è¯¥æ–¹æ³•æ˜¯åå¤è°ƒç”¨ runMode:beforeDate: æ–¹æ³•çš„. åœ¨ä¹‹å‰æ–‡ç« å®žçŽ°å¸¸é©»çº¿ç¨‹çš„ä»£ç ä¸­, æˆ‘ä»¬ä½¿ç”¨äº† run æ–¹æ³•æ¥å¼€å¯è¿è¡Œ RunLoop. å¯ä»¥çœ‹å‡º, æˆ‘ä»¬ä¹‹å‰å®žçŽ°çš„å¸¸é©»çº¿ç¨‹ä½¿ç”¨ run æ–¹æ³•æ˜¯æ— æ³•é€€å‡ºå¸¸é©»çº¿ç¨‹çš„. runUntilDate:(NSDate *)limitDate æ–¹æ³• è¯¥æ–¹æ³• API é‡Šä¹‰: 12Runs the loop until the specified date, during which time it processes data from all attached input sources. ä¿è¯æœ‰è¾“å…¥æºçš„æƒ…å†µä¸‹è¯¥æ–¹æ³•å¯åŠ¨çš„ RunLoop å¯ä»¥åœ¨æŒ‡å®šçš„æ—¥æœŸå†…ä¸€ç›´è¿è¡Œä¸ä¼šè¿”å›ž. æ¢å¥è¯è¯´, æ—¥æœŸåªè¦å·²åˆ°è¯¥æ–¹æ³•å°±ä¼šç«‹å³é€€å‡º RunLoop. ç¤ºä¾‹ä»£ç : 12345678//ç­‰åŒäºŽ run, å¯ä¿è¯ä¸€ç›´è¿è¡Œ[runLoop runUntilDate:[NSDate distantFuture]];//ç«‹å³è¿”å›ž, é€€å‡º RunLoop[runLoop runUntilDate:[NSDate date]];//ç„¶åŽè¿‡12ç§’åŽè¿”å›ž[runLoop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:12.0f]]; runMode:(NSString )mode beforeDate:(NSDate )limitDate æ–¹æ³• è¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•° mode å’Œ limitDate, mode å°±æ˜¯ RunLoop çš„è¿è¡Œæ¨¡å¼, limitDate å°±æ˜¯ä¸Šé¢æ–¹æ³•ä¸€æ ·çš„é‡Šä¹‰å³åœ¨æŒ‡å®šçš„æ—¥æœŸå†…. 1Runs the loop once, blocking for input in the specified mode until a given date. å¯ä»¥è¿™ä¹ˆç†è§£, è¯¥æ–¹æ³•å¼€å¯çš„ RunLoop å¤„ç†å®Œä¹‹åŽä¼šç«‹å³è¿”å›ž(once), å¦‚æžœåœ¨æŒ‡å®šæ—¥æœŸå†…äº‹ä»¶è¿˜æ²¡å¤„ç†, åœ¨è¯¥æ—¥æœŸåŽä¼šç«‹å³è¿”å›ž.æ¢å¥è¯è¯´, å¦‚æžœæŒ‡å®šçš„æ—¥æœŸæ˜¯å½“å‰çš„, è¯¥æ–¹æ³•æ‰§è¡ŒåŽ RunLoop ä¼šç«‹å³é€€å‡º. ç¤ºä¾‹ä»£ç : 12345//ç«‹å³è¿”å›ž[runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate date]]; //æœ‰äº‹ä»¶åˆ°è¾¾å¤„ç†åŽå°±è¿”å›žï¼Œå¦‚æžœæ²¡æœ‰åˆ™è¿‡12ç§’è¿”å›ž[runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeIntervalSinceNow:12.0]]; è¿™ä¸‰ä¸ªæ–¹æ³•, æ€»ç»“ä¸€ä¸‹å¤§æ¦‚å¦‚ä¸‹: è¿™ä¸‰ä¸ªæ–¹æ³•åœ¨æ²¡æœ‰ä»»ä½•è¾“å…¥æºæƒ…å†µä¸‹ä¼šéƒ½ç«‹å³è¿”å›ž(é€€å‡º RunLoop), ä¸ä¼šç­‰å¾…. run å¯ä¿è¯ RunLoop åœ¨æœ‰è¾“å…¥æºçš„æƒ…å†µä¸‹ä¸€ç›´è¿è¡Œ. runUntilDate å¯ä»¥é€šè¿‡è®¾ç½®è¶…æ—¶æ—¶é—´æ¥é€€å‡º RunLoop. è¶…æ—¶æ—¶é—´ä¸€è¿‡å°±ä¼šç«‹å³é€€å‡º RunLoop. ä½¿ç”¨ runMode æ–¹å¼å¯åŠ¨çš„ RunLoop ä¼šåœ¨å¤„ç†å®Œäº‹ä»¶åŽæˆ–è€…è¶…æ—¶åŽ, ç«‹å³è¿”å›ž. å³å¯ä»¥é€šè¿‡è®¾ç½®è¶…æ—¶æ—¶é—´æˆ–è€…ä½¿ç”¨ CFRunLoopStop æ–¹æ³•æ¥é€€å‡º RunLoop. ç§»é™¤å¸¸é©»çº¿ç¨‹å…ˆçœ‹ä¸€ä¸‹, åœ¨å­çº¿ç¨‹æ‰§è¡Œçš„æ–¹æ³•ä¸­å¦‚ä½•å®žçŽ°çš„. ç¤ºä¾‹ä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122232425262728293031323334- (void)asyncRun &#123; @autoreleasepool &#123; NSLog(@&quot;veryitman--asyncRun. Current Thread: %@&quot;, [NSThread currentThread]); NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; _threadRunLoop = runLoop; // ä¿æŒå¸¸é©»çº¿ç¨‹çš„æ–¹å¼1: source NSPort *port = [NSMachPort port]; _threadPort = port; [runLoop addPort:port forMode:NSRunLoopCommonModes]; NSLog(@&quot;veryitman--asyncRun. Current RunLoop: %@&quot;, runLoop); // æ‰§è¡Œå…¶ä»–é€»è¾‘ //... // æ‰‹åŠ¨å¼€å¯ RunLoop // [runLoop run]; while (!self.stopLoopRunning &amp;&amp; [runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantPast]]) &#123; // è¿™é‡Œæ˜¯ä¸ºäº†éªŒè¯å¸¸é©»çº¿ç¨‹æ˜¯å¦å·²ç»é€€å‡º NSLog(@&quot;--- asyncRun ----&quot;); // å®žé™…ä¸šåŠ¡ä¸­, å»ºè®®ä½¿ç”¨ç©ºè¯­å¥å®žçŽ° ; //å®žçŽ°ä¸ºç©ºè¯­å¥ &#125; NSLog(@&quot;veryitman--asyncRun. End Run.&quot;); &#125;&#125; ç»“åˆä¸Šé¢è®²è§£çš„åŽŸç†, è¿™é‡Œé€‰æ‹©ä½¿ç”¨ runMode æ–¹æ³•æ¥å¼€å¯è¿è¡Œ RunLoop. å¤§å®¶ä¹Ÿå¯ä»¥è‡ªç”±å‘æŒ¥ä½¿ç”¨å…¶ä»–çš„æ–¹æ³•. æ³¨æ„: stopLoopRunning æ˜¯å®šä¹‰çš„ä¸€ä¸ªå±žæ€§. ç§»é™¤çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122232425- (void)viewDidDisappear:(BOOL)animated &#123; [super viewDidDisappear:animated]; // å–æ¶ˆçº¿ç¨‹ // å®žé™…ä¸šåŠ¡åœºæ™¯ä¸­è‡ªè¡Œå†³å®š canCancel çš„è®¾ç½®, è¿™é‡Œåªæ˜¯ç¤ºä¾‹ BOOL canCancel = YES; if (canCancel) &#123; [[self permanentThread] cancel]; &#125; /// åœæ­¢å¸¸é©»çº¿ç¨‹ &#123; self.stopLoopRunning = YES; // ç§»é™¤ port // å¦‚æžœæ˜¯ç”¨ timer çš„æ–¹å¼çš„å¸¸é©»çº¿ç¨‹, å¯ä»¥ invalid å¯¹åº”çš„ timer [self.threadRunLoop removePort:self.threadPort forMode:NSRunLoopCommonModes]; // åœæ­¢ RunLoop if (nil != self.threadRunLoop) &#123; CFRunLoopStop([self.threadRunLoop getCFRunLoop]); &#125; &#125;&#125; ç¦»å¼€é¡µé¢åŽ, å¯ä»¥å‘çŽ° NSLog(@&quot;--- asyncRun ----&quot;); åœæ­¢äº†æ‰“å°, å¹¶ä¸”å½“å‰çš„ Controller ä¹Ÿ dealloc äº†. æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>RunLoop å¸¸é©»çº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS é€†å‘: dumpdecrypted ç ¸å£³è®°]]></title>
    <url>%2F2018%2F06%2F07%2FiOS-%E9%80%86%E5%90%91-dumpdecrypted-%E7%A0%B8%E5%A3%B3%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„æ—¥å­, é«˜è€ƒçš„ç¬¬ä¸€å¤©, ç¥å„ä½èŽ˜èŽ˜å­¦å­é‡‘æ¦œé¢˜å. æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ iOS é€†å‘: ç ¸å£³ ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨å·¥å…· Clutch å¯¹ iOS çš„åº”ç”¨è¿›è¡Œç ¸å£³æ“ä½œ, ä»Šå¤©ç»§ç»­ç»™å¤§å®¶åˆ†äº«ä½¿ç”¨å¦å¤–ä¸€ä¸ªå·¥å…· dumpdecrypted å¯¹ APP è¿›è¡Œç ¸å£³. æ¦‚è¦æœ‰äº›æœ‹å‹å°±ä¼šé—®äº†, æ—¢ç„¶ Clutch å·²ç»å¾ˆç‰›Bäº†, ä¸ºä»€ä¹ˆè¿˜éœ€è¦ dumpdecrypted è¿™ä¸ªå·¥å…·å‘¢? åˆšå¼€å§‹çš„æ—¶å€™, æˆ‘ä¹Ÿå¾ˆæŽ’æ–¥ä½¿ç”¨ dumpdecrypted è¿™ä¸ªå·¥å…·çš„, ä½¿ç”¨èµ·æ¥æ¯”è¾ƒå¤æ‚, å¹¶ä¸”å¥—è·¯ä¸ç†Ÿçš„æƒ…å†µä¸‹è¿˜å¾ˆå®¹æ˜“å‡ºé”™. ä¹‹å‰è¯´è¿‡ Clutch å¹¶ä¸æ˜¯ä¸‡èƒ½çš„, ä»Ž App Store ä¸‹è½½çš„ App(æ¯”å¦‚ WeChat)æœ‰äº›å¹¶ä¸èƒ½ä½¿ç”¨ Clutch æ¥è¿›è¡Œç ¸å£³, æ¢å¥è¯è¯´, ä½¿ç”¨ Clutch å·¥å…·æ¥è¿›è¡Œç ¸å£³ä¼šå¤±è´¥, é‚£ä¹ˆ, dumpdecrypted å°±ç™»åœºäº†. æœ¬æ¬¡ç ¸å£³çš„ç³»ç»Ÿä¾ç„¶æ˜¯ iOS10.3.x, å·¥å…·ä½¿ç”¨ dumpdecrypted, ç ¸å£³çš„å¯¹è±¡æ˜¯ WeChat è¿™ä¸ª App. å‡†å¤‡å·¥ä½œ MacOS PC è¶Šç‹±æ‰‹æœºä¸€å°(æˆ‘ç”¨çš„æ˜¯iPhone6SPlus 10.3.1) dumpdecrypted class-dump åœ¨ Cydia ä¸­å®‰è£… cycript, å¯ä»¥å…ˆä¸ç”¨ç®¡ cycript æ˜¯ä»€ä¹ˆ, ä¸‹è½½å®‰è£…å³å¯. iFunBox æˆ–è€…å…¶ä»–åŠ©æ‰‹å·¥å…· ç¼–è¯‘ dumpdecryptedåŽ» Github ä¸‹è½½ dumpdecrypted æºç , æºç å°±ä¸€ä¸ª C æºæ–‡ä»¶. ä¸‹è½½ zip åŒ…ä¹‹åŽ, è§£åŽ‹, å¦‚å›¾: åœ¨å½“å‰ç›®å½•, æ‰§è¡Œ make å³å¯å®Œæˆç¼–è¯‘, å¦‚å›¾æ‰€ç¤º: ç¼–è¯‘æˆåŠŸåŽç”Ÿæˆ dumpdecrypted.dylib æ–‡ä»¶. è¿™é‡Œæœ‰ä¸ªå°æ’æ›², ç¼–è¯‘ dumpdecrypted çš„æ—¶å€™æŠ¥é”™äº†, é”™è¯¯ä¿¡æ¯å¦‚ä¸‹: 1234xcrun: error: SDK "iphoneos" cannot be locatedxcrun: error: unable to lookup item 'Path' in SDK 'iphoneos'clang: warning: no such sysroot directory: '-F/System/Library/Frameworks' [-Wmissing-sysroot]dumpdecrypted.c:27:10: fatal error: 'stdio.h' file not found æ— æ³•æ‰¾åˆ°å¯¹åº”çš„ SDK å’Œ stdio.h æ–‡ä»¶, è¿™ç§é—®é¢˜å¤§å¤šæ•°æ˜¯ Xcode è·¯å¾„é€ æˆçš„. ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤çœ‹ä¸€ä¸‹ç³»ç»ŸæŒ‡å‘çš„ Xcode è·¯å¾„: 1xcode-select -p æŽ§åˆ¶å°è¾“å‡º: 1/Library/Developer/CommandLineTools æ˜¾ç„¶ä¸æ˜¯ Xcode çš„è·¯å¾„, é‚£åªèƒ½é‡æ–°åˆ‡æ¢ä¸€ä¸‹å…¶è·¯å¾„å³æŒ‡å‘æ­£ç¡®çš„Xcode è·¯å¾„å³å¯. å‘½ä»¤å¦‚ä¸‹: 1sudo xcode-select --switch /Applications/Xcode.app å†æ¬¡ç¼–è¯‘ dumpdecrypted å³å¯æˆåŠŸå®Œæˆ. å¯¹ dumpecrypted.dylib ç­¾å å¦‚æžœä¸å¯¹è¯¥æ–‡ä»¶è¿›è¡Œç­¾å, åŽç»­ç ¸å£³çš„æ“ä½œä¼šå¤±è´¥. å…ˆæ‰¾åˆ°å·²ç»åœ¨ç”µè„‘ä¸Šé¢å®‰è£…çš„è‹¹æžœå¼€å‘è€…è¯ä¹¦, æ“ä½œå¦‚ä¸‹: 12## åˆ—å‡ºå¯ç­¾åè¯ä¹¦, æ‰¾åˆ° mac ä¸Šé¢å·²ç»å®‰è£…çš„è¯ä¹¦security find-identity -v -p codesigning ä¸º dumpecrypted.dylib ç­¾å, å‘½ä»¤å¦‚ä¸‹: 1codesign --force --verify --verbose --sign "iPhone Developer: xxx xxxx (xxxxxxxxxx)" dumpdecrypted.dylib å…¶ä¸­, &quot;iPhone Developer: xxx xxxx (xxxxxxxxxx)&quot; ä¸ºä½ è‡ªå·±æœ¬æœºå®‰è£…çš„å¼€å‘è€…è¯ä¹¦åç§°. SSH è¿žæŽ¥æ‰‹æœºä½¿ç”¨ OpenSSH è®© Mac å’Œæ‰‹æœºè¿žæŽ¥èµ·æ¥ è¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ Mac ç»ˆç«¯ä½¿ç”¨ shell å‘½ä»¤æ¥æ“ä½œæ‰‹æœºçš„ç›®å½•äº†. å…³äºŽ OpenSSH çš„ä½¿ç”¨è¯·å‚è€ƒæˆ‘ä¹‹å‰çš„åšæ–‡ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH. æŸ¥æ‰¾ç›®æ ‡ App æ‰€åœ¨è¿›ç¨‹ åŒå‡» Home æŒ‰é”®åŽ, æ‰‹åŠ¨æ€æŽ‰ iPhone ä¸Šé¢æ‰€æœ‰åœ¨åŽå°çš„ App. Home åˆ°æ‰‹æœºæ¡Œé¢. æ‰“å¼€ç›®æ ‡ App å³WeChat, è¿™é‡Œç§°ä¹‹ä¸º TargetApp. Home åˆ°æ‰‹æœºæ¡Œé¢. æŸ¥çœ‹å½“å‰è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹, å‘½ä»¤å¦‚ä¸‹: 1ps -e çœ‹åˆ°è¿™ä¸ªè´§: åœ¨å¦‚ä¸‹ç›®å½•: 1/var/containers/Bundle/Application/2837EC87-7C28-45C5-9309-24FACD3A97C9/WeChat.app/WeChat WeChat.app å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ TargetApp. è¿žæŽ¥ SSH æˆåŠŸåŽ, åœ¨ MacOS ç»ˆç«¯ ls ä¸€ä¸‹è¯¥ç›®å½•, å¯ä»¥å‘çŽ° WeChat.app èººåœ¨é‚£é‡Œ. ç ¸å£³1. æŸ¥æ‰¾ Documents ç›®å½• WeChat ä¸ºå½“å‰çš„è¿›ç¨‹ç›®æ ‡æ‰§è¡Œæ–‡ä»¶åç§°, ä»Žä¸Šé¢çš„å›¾å¯ä»¥çœ‹å‡º, å…¶å¯¹åº”çš„è¿›ç¨‹ id æ˜¯ 18983. åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡ cycript æ‰§è¡Œå¦‚ä¸‹æ“ä½œ: 1cycript -p 18983 å†æ‰§è¡Œ OC çš„æ–¹æ³•, å¦‚ä¸‹: 1[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask][0] å¯ä»¥çœ‹åˆ°å¯¹åº”çš„è¾“å‡º, å¦‚ä¸‹å›¾æ‰€ç¤º, è¿™å°±æ˜¯å¯¹åº”çš„ Documents ç›®å½•. æ³¨æ„: æ‰§è¡Œè¿‡ç¨‹ä¸­, åœ¨ iPhone ä¸Šé¢æ‰“å¼€è¿è¡Œä¸€ä¸‹ App, ä¸ç„¶ä¸Šé¢çš„æ‰§è¡Œä¸€ç›´å¡åœ¨é‚£é‡Œä¸åŠ¨. æ‰¾åˆ°ç›®å½•å¦‚ä¸‹: 1/var/mobile/Containers/Data/Application/2EFA08B6-DD7B-41A6-92C9-C6115CA6DDA1/Documents/ åŒç†, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ iFunBox æŸ¥çœ‹è¯¥ç›®å½•. 2. æ‹·è´ dumpdecrypted.dylib. æ‹·è´ dumpdecrypted.dylib è¿™ä¸ªä¹‹å‰ç¼–è¯‘ç­¾åå¥½çš„æ–‡ä»¶åˆ°iPhone ä¸Šé¢è¯¥ APP çš„ Documents ç›®å½•æœ‰ä¸¤ç§æ–¹æ³•. ç¬¬ä¸€ç§æ–¹æ³•, ç›´æŽ¥åœ¨ mac ä¸Šé¢æ‹–æ‹½ dumpdecrypted.dylib åˆ° iFunBox æ˜¾ç¤ºçš„è¿™ä¸ªç›®å½•ä¸­, è¿™ç§æ–¹æ³•æ¯”è¾ƒç®€å•ä¸”å¿«. ç¬¬äºŒç§æ–¹æ³•, ä½¿ç”¨ scp å‘½ä»¤è¿›è¡Œæ“ä½œ. 1scp ~/dumpdecrypted.dylib root@192.168.99.231:/var/mobile/Containers/Data/Application/2EFA08B6-DD7B-41A6-92C9-C6115CA6DDA1/Documents/ 192.168.99.231 æ˜¯ iPhone è®¾å¤‡çš„ ip åœ°å€. 3. é€€å‡º cycript, å›žåˆ°å‘½ä»¤è¡Œæ¨¡å¼ 1ctrl + d 4. cd åˆ° Documents ç›®å½• 1cd /var/mobile/Containers/Data/Application/2EFA08B6-DD7B-41A6-92C9-C6115CA6DDA1/Documents/ 5. ç ¸å£³ ç»ˆç«¯åœ¨ Documents ç›®å½•ä¸‹é¢, æ‰§è¡Œä¸‹é¢å‘½ä»¤å³å¯: 1DYLD_INSERT_LIBRARIES=dumpdecrypted.dylib /var/containers/Bundle/Application/2837EC87-7C28-45C5-9309-24FACD3A97C9/WeChat.app/WeChat æ‰§è¡Œè¿‡ç¨‹æ˜¾ç¤ºå¦‚ä¸‹: æœ€åŽç”Ÿæˆäº† WeChat.decrypted æ–‡ä»¶, å¦‚ä¸‹: 12345678910111213-rw-r--r-- 1 root mobile 74513728 Jun 7 15:20 WeChat.decrypteddrwxr-xr-x 14 mobile mobile 448 Jun 7 15:20 .-rw-r--r-- 1 root mobile 207760 Jun 7 15:15 dumpdecrypted.dylib-rw-r--r-- 1 mobile mobile 8 Jun 7 13:22 db.globalconfig-rw-r--r-- 1 mobile mobile 15 Jun 7 11:35 SafeMode.datdrwxr-xr-x 26 mobile mobile 832 Jun 7 11:35 MMappedKVdrwxr-xr-x 3 mobile mobile 96 Jun 7 11:35 CrashReport-rw-r--r-- 1 mobile mobile 1011 Jun 7 11:35 LocalInfo.lstdrwxr-xr-x 5 mobile mobile 160 Jun 7 11:35 MemoryStatdrwxr-xr-x 6 mobile mobile 192 Jun 7 11:35 00000000000000000000000000000000drwxr-xr-x 15 mobile mobile 480 Jun 5 13:43 MMResourceMgr-rw-r--r-- 1 mobile mobile 592 Jun 5 13:43 heavy_user_id_mapping.datdrwxr-xr-x 2 mobile mobile 64 Jun 5 10:07 OpenImResource ä½¿ç”¨ iFunBox æˆ–è€… scp å‘½ä»¤å°† WeChat.decrypted æ–‡ä»¶å¯¼å‡ºåˆ° mac çš„ä»»æ„ç›®å½•å³å¯. åŽç»­ä¼šè·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•ä½¿ç”¨ç ¸å£³åŽçš„æ–‡ä»¶, æ•¬è¯·æœŸå¾…. è¶Šç‹±ç³»åˆ—æ–‡ç«  åŸºäºŽ iOS10.3.1 è¿›è¡Œçš„å®žè·µã€‚ iOS é€†å‘: dumpdecrypted ç ¸å£³è®° iOS é€†å‘: ç ¸å£³ iOS é€†å‘: æŸ¥çœ‹ç³»ç»Ÿæ–‡ä»¶ç›®å½•å’Œç»“æž„ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH dumpdecrypted ç ¸å£³ï¼šå¯¼å‡ºå¤´æ–‡ä»¶ æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¸€å®šä¼šæ„Ÿæ¿€æ­£åœ¨åŠªåŠ›çš„è‡ªå·±~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSå®‰å…¨ è¶Šç‹± jailbreak</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS é€†å‘: ç ¸å£³]]></title>
    <url>%2F2018%2F05%2F13%2FiOS-%E9%80%86%E5%90%91-%E7%A0%B8%E5%A3%B3%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹æ‰€è°“çš„ç ¸å£³, æŒ‡çš„æ˜¯å°†ä»Ž App Store ä¸Šé¢ä¸‹è½½çš„ App è¿›è¡Œç ´è§£çš„è¿‡ç¨‹. ä»Ž App Store ä¸Šä¸‹è½½çš„ ipa ä¸­çš„äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ç»è¿‡åŠ å¯†(åŠ å£³)çš„ï¼Œéœ€è¦é€šè¿‡ç ´è§£æ‰èƒ½è®©æˆ‘ä»¬å¯¹å…¶ ä¸ºæ‰€æ¬²ä¸º, è¿™é‡Œçš„ç ´è§£å°±æ˜¯é€šå¸¸æ‰€è¯´çš„ç ¸å£³. ç±»ä¼¼çš„, Android åº”ç”¨(apk æ–‡ä»¶)ä¹Ÿæœ‰åŠ å£³æ“ä½œ, å¦‚æžœæƒ³ç ´è§£åˆ«äººçš„ apk, é¦–å…ˆè¦è¿›è¡Œç ¸å£³æ“ä½œ. å‡†å¤‡å·¥å…·[1]. Clutch[2]. iFunBox æˆ–è€… pp åŠ©æ‰‹[3]. è¶Šç‹±æ‰‹æœºä¸€å°(æœ¬äººiPhone6sPlus iOS10.3.x ç³»ç»Ÿ).[4]. å¯ä»¥æ­£å¸¸ä½¿ç”¨ SSH åŠŸèƒ½. å¦‚æžœä½ è¿˜æ²¡æœ‰å®‰è£…ä¸Šé¢æåˆ°çš„é™¤ Clutch ä¹‹å¤–çš„å·¥å…·, è¯·å…ˆé˜…è¯» iOS é€†å‘: æŸ¥çœ‹ç³»ç»Ÿæ–‡ä»¶ç›®å½•å’Œç»“æž„ è¿™ç¯‡æ–‡ç« , å¹¶å®‰è£…å¯¹åº”çš„å·¥å…·. å®‰è£… Clutchå¯ä»¥åœ¨ Github èŽ·å– Clutch æºç , ç„¶åŽè‡ªå·±åœ¨ MacOS ä¸Šé¢ç¼–è¯‘å¾—åˆ°äºŒè¿›åˆ¶æ–‡ä»¶. ä¹Ÿå¯ä»¥åŽ»ç›´æŽ¥ä¸‹è½½å·²ç»ç¼–è¯‘å¥½çš„ äºŒè¿›åˆ¶åŒ…, ç›´æŽ¥ä½¿ç”¨, æˆ‘æ˜¯ç›´æŽ¥ä¸‹è½½äº†å·²ç»ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶åŒ…çš„, æˆªæ­¢åˆ°å†™è¿™ç¯‡æ–‡ç« ä¸ºæ­¢, Clutch ç‰ˆæœ¬ä¸º 2.0.4. ä¸‹è½½å®ŒæˆåŽ, æˆ‘å°†å…¶æ”¾åˆ° ~/Downloads ç›®å½•ä¸‹é¢äº†. å‡†å¤‡å¥½è¶Šç‹±è®¾å¤‡, ä¿è¯å¯ä»¥æ­£å¸¸è¿žæŽ¥ wifi, ä½¿ç”¨ scp å‘½ä»¤å°† Clutch äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°è®¾å¤‡çš„ç³»ç»Ÿç›®å½•ä¸­, å‘½ä»¤å¦‚ä¸‹: 1scp ~/Downloads/Clutch root@192.168.91.126:/usr/bin å…¶ä¸­, 192.168.91.126 æ˜¯æˆ‘è®¾å¤‡è¿žæŽ¥ wifi åŽçš„ IP åœ°å€. å¤åˆ¶æˆåŠŸåŽ, ä½¿ç”¨ iFunBox å¯ä»¥çœ‹åˆ° Clutch é™é™åœ°èººåœ¨é‚£é‡Œ. ä½ å¯ä»¥ä½¿ç”¨ iFunBox æˆ–è€… pp åŠ©æ‰‹, ç›´æŽ¥å°† ~/Downloads/Clutch æ‹–æ‹½åˆ° /usr/bin ç›®å½•. Clutch çš„åŸºæœ¬ä½¿ç”¨SSH è¿žæŽ¥è¶Šç‹±è®¾å¤‡, å¼€å§‹ä½¿ç”¨ Clutch. å…³äºŽä½¿ç”¨ SSH, å¯ä»¥é˜…è¯»ä¸€ä¸‹ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH è¿™ç¯‡æ–‡ç« . å¦‚æžœä½ å‘çŽ°ç›´æŽ¥æ‰§è¡Œ Clutch è¯´æ²¡æœ‰æƒé™ä¹‹ç±»çš„æç¤º, å¯ä»¥å…ˆå°†å…¶æŽˆäºˆå¯æ‰§è¡Œçš„æƒé™. 1chmod +x /usr/bin/Clutch Clutch å‘½ä»¤é€‰é¡¹å¦‚ä¸‹: 123456-b --binary-dump Only dump binary files from specified bundleID-d --dump Dump specified bundleID into .ipa file-i --print-installed Print installed application--clean Clean /var/tmp/clutch directory--version Display version and exit-? --help Display this help and exit -b é€‰é¡¹è¡¨ç¤ºäº§å‡ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶, -d é€‰é¡¹è¡¨ç¤ºäº§å‡ºä¸€ä¸ª ipa æ–‡ä»¶, -i è¡¨ç¤ºåˆ—å‡ºæ‰‹æœºä¸Šé¢å·²ç»å®‰è£…çš„ APP. æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ‰‹æœºä¸Šå·²ç»å®‰è£…çš„ App, å‘½ä»¤å¦‚ä¸‹: 1Clutch -i è¿™äº› APP å‰é¢çš„æ•°å­—è¡¨ç¤ºæŒ‡å®šçš„ id. -d å’Œ -b é€‰é¡¹éƒ½éœ€è¦æŒ‡å®šè¿™äº› id. ç ¸å§, éªšå¹´æˆ‘ä»¬çŽ°åœ¨å¼€å§‹ä½¿ç”¨ Clutch æ¥å¯¹ APP è¿›è¡Œç ¸å£³æ“ä½œ, è¿™é‡Œä»¥å·²ç»å®‰è£…çš„ App åºå·ä¸º 8 çš„ä¸ºä¾‹å­. ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¼€å§‹ç ¸å£³: 1Clutch -d 8 æ•ˆæžœå¦‚ä¸‹å›¾æ‰€ç¤º: ç ¸å£³æˆåŠŸåŽä¼šåœ¨ /private/var/mobile/Documents/Dumped è¿™ä¸ªç›®å½•ç”Ÿæˆå¯¹åº”çš„ *.ipa æ–‡ä»¶. ç ¸å£³åŽçš„ ipa æ–‡ä»¶, å¯ä»¥ä»Ž iFunBox ä¸­å¤åˆ¶åˆ° MacOS çš„ç›®å½•ä¸­, ç„¶åŽä½ å°±å¯ä»¥å¯¹è¯¥ ipa è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œäº†, æ¯”å¦‚èŽ·å–å›¾ç‰‡/éŸ³é¢‘/è§†é¢‘ç­‰èµ„æºå’Œå¯¹åº”çš„å¤´æ–‡ä»¶. å…³äºŽè¿™äº›åŽç»­çš„è¶Šç‹±å·¥ä½œ, æˆ‘ä¼šåœ¨ä¸‹å‡ ç¯‡åšå®¢ä¸­åˆ†äº«ç»™å¤§å®¶. ä¹Ÿè®¸æœ‰äººä¼šè¯´äº†, æˆ‘è‡ªå·±ä»Ž pp åŠ©æ‰‹ ä¸­å¤‡ä»½æŒ‡å®šçš„ App å°±å¯ä»¥èŽ·å–èµ„æºäº†, ä¸éœ€è¦ä½¿ç”¨ Clutch è¿™ä¹ˆéº»çƒ¦äº†. é«˜ç³»ç»Ÿç‰ˆæœ¬, pp åŠ©æ‰‹ æ˜¯æ— æ³•ç›´æŽ¥èŽ·å– ipa æ–‡ä»¶çš„, å†µä¸”æˆ‘ä»¬ä¹Ÿä¸ä»…ä»…æ˜¯æƒ³èŽ·å–åˆ«äºº APP çš„èµ„æºæ–‡ä»¶. å½“ç„¶äº†, ä½ å¯ä»¥ä»Žè¶Šç‹± APP å¸‚åœºç›´æŽ¥ä¸‹è½½å·²ç»è¢«ç ¸å£³çš„ App è¿›è¡ŒçŽ©è€, ä¸éœ€è¦è‡ªå·±åƒè¾›ä¸‡è‹¦çš„åŽ»ç ¸å£³äº†. Clutch å¹¶ä¸æ˜¯ä¸‡èƒ½çš„ä¸Šé¢å¤§å®¶å¯ä»¥çœ‹å‡º, Clutch æ˜¯å¯ä»¥è¿›è¡Œç ¸å£³çš„å¹¶ä¸”ä¹ŸæŒºæ–¹ä¾¿, ä½† Clutch å¹¶ä¸æ˜¯ä¸‡èƒ½çš„, ä¹Ÿå°±æ˜¯è¯´, Clutch ä¸èƒ½å°†ä»»æ„ä¸€ä¸ª App Store ä¸‹è½½ APP è¿›è¡Œç ¸å£³. æ‹¿ä¸Šé¢åºå·ä¸º4 çš„å¾®ä¿¡æ¥è¯´, æ‰§è¡Œä¸‹é¢å‘½ä»¤æŠ¥é”™: 1Clutch -d 4 ç ¸å£³æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹: 1234Writing new checksum...FAILED: &lt;WeChat bundleID: com.tencent.xin&gt;Finished dumping com.tencent.xin in 28.7 seconds è¿˜æœ‰ä¸€äº› APP, å†è¢«ç ¸å£³çš„æ—¶å€™ä¼šæŠ¥å¦‚ä¸‹çš„é”™è¯¯: 1could not obtain mach port either the process is dead è™½ç„¶æœ€æ–°ç‰ˆæœ¬(2.0.4)è¯´è§£å†³äº†è¯¥é—®é¢˜, ä½†æ˜¯å®žé™…æ“ä½œè¿‡ç¨‹ä¸­, è¿˜æ˜¯ä¼šå‡ºçŽ°è¿™ä¸ªé—®é¢˜, æ— æ³•è¿›è¡Œç ¸å£³. è¶Šç‹±ç³»åˆ—æ–‡ç«  åŸºäºŽ iOS10.3.1 è¿›è¡Œçš„å®žè·µã€‚ iOS é€†å‘: dumpdecrypted ç ¸å£³è®° iOS é€†å‘: ç ¸å£³ iOS é€†å‘: æŸ¥çœ‹ç³»ç»Ÿæ–‡ä»¶ç›®å½•å’Œç»“æž„ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH dumpdecrypted ç ¸å£³ï¼šå¯¼å‡ºå¤´æ–‡ä»¶ ç‰¹åˆ«å–œæ¬¢ä¸Šå–„å¦‚æ°´è¿™å¥è¯ï¼Œä½ å‘¢ï¼Ÿ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSå®‰å…¨ è¶Šç‹± jailbreak</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS é€†å‘: æŸ¥çœ‹ç³»ç»Ÿæ–‡ä»¶ç›®å½•å’Œç»“æž„]]></title>
    <url>%2F2018%2F05%2F13%2FiOS-%E9%80%86%E5%90%91-%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E5%92%8C%E7%BB%93%E6%9E%84%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹åœ¨ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH ä¸­ç»™å¤§å®¶åˆ†äº«äº†å¦‚ä½•ä½¿ç”¨å·¥å…·å¯¹ iOS10.3 çš„ç³»ç»Ÿè¿›è¡Œè¶Šç‹±å’Œé…ç½®ä½¿ç”¨ SSH çš„å†…å®¹, ä»Šå¤©ç»§ç»­æŽ¢é€†å‘çš„çŸ¥è¯†. æ‰‹æœºè¢«è¶Šç‹±ä¹‹åŽ, æˆ‘ä»¬é¦–å…ˆè¦æžæ¸…æ¥šæ˜¯å¦èƒ½å¤Ÿæ­£å¸¸çš„è®¿é—®æ‰‹æœºé‡Œé¢çš„æ–‡ä»¶å’Œç›®å½•ç»“æž„, è¿™äº›æ–‡ä»¶å’Œç›®å½•ç»“æž„ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„, è™½ç„¶è¿™äº›çŸ¥è¯†å¾ˆåŸºç¡€, ä½†æ˜¯è¿˜æ˜¯å¾ˆæœ‰å¿…è¦åŽ»äº†è§£å’Œå­¦ä¹ çš„, å°±ç®—æ˜¯ä¸ºåŽæœŸé€†å‘ APP åšç‚¹å‡†å¤‡å§. å®‰è£… iFunBoxiFunBox æ˜¯ä¸€ä¸ªå¯ä»¥æµè§ˆ iPhone æ–‡ä»¶ç›®å½•çš„æ–‡ä»¶ç®¡ç†å·¥å…·, æ”¯æŒ MacOS å’Œ Windows ä¸¤ä¸ªå¹³å°. ç‚¹å‡» ä¸‹è½½åœ°å€ å¯ä»¥åŽ»ä¸‹è½½ MacOS ç‰ˆæœ¬çš„ iFunBox. å…³äºŽ iFunBox çš„ä»‹ç»å’Œç‰¹æ€§å¯ä»¥åŽ» è¿™é‡Œ æŸ¥é˜…. æœ€æ–°ç‰ˆæœ¬æ˜¯ 1.8, å¦‚å›¾: æ‰‹æœºæ’ä¸Š USB è¿žæŽ¥ä¸Š Mac ç”µè„‘, iFunBox å°±å¯ä»¥è¯†åˆ«ä½ çš„æ‰‹æœºäº†, å¦‚å›¾æ‰€ç¤º: è¿™ä¸ªæ—¶å€™, ä½ ç‚¹å‡» Raw File System å…¶å®žæ˜¯çœ‹ä¸åˆ° iPhone çš„ç³»ç»Ÿç›®å½•çš„, æŽ¥ä¸‹æ¥åœ¨ iPhone ä¸­å®‰è£…å¦å¤–ä¸€ä¸ªè½¯ä»¶å°±å¯ä»¥äº†. å®‰è£… Apple File Conduit 2åœ¨ Cydia ä¸­æœç´¢ Apple File Conduit, å¦‚ä¸‹å›¾æ‰€ç¤º. ç‚¹å‡»æ›´æ”¹/å®‰è£…å³å¯. å¦‚æžœä½ æ²¡æœ‰æœç´¢åˆ°, é‚£ä¹ˆå°±éœ€è¦è‡ªå·±æ·»åŠ å¯¹åº”çš„è½¯ä»¶æºåœ°å€. ç‚¹å‡»ã€è½¯ä»¶æºã€‘â€“ç¼–è¾‘/æ·»åŠ  â€“è¾“å…¥æºåœ°å€ apt.25pp.com â€“ æ·»åŠ æº, ç„¶åŽå†åŽ»æœç´¢ Apple File Conduit å®‰è£…. å®‰è£…å¥½ä¹‹åŽ, å†ç”¨ iFunBox, å°±å¯ä»¥æ­£å¸¸æŸ¥çœ‹ iPhone çš„ç³»ç»Ÿç›®å½•äº†, å¦‚ä¸‹å›¾æ‰€ç¤º: çœ‹åˆ°è¿™äº›ç›®å½•, æ˜¯ä¸æ˜¯è·Ÿ linux æˆ–è€… MacOS çš„ç›®å½•æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹, å“ˆå“ˆ. å®‰è£… pp åŠ©æ‰‹æ—¢ç„¶å·²ç»å®‰è£…äº† iFunBox å·¥å…·, é‚£ä¸ºä»€ä¹ˆè¿˜éœ€è¦å®‰è£… pp åŠ©æ‰‹ ä¹‹ç±»çš„å·¥å…·å‘¢? å…¶å®ž, è¿™ä¸ªçœ‹ä¸ªäººçš„éœ€è¦å§, åœ¨æŸç§ç¨‹åº¦ä¸Š, pp åŠ©æ‰‹ çš„ç•Œé¢å’Œä¾¿æ·æ€§è¦æ¯” iFunBox å¥½ä¸€ç‚¹. å®‰è£…å¥½ pp åŠ©æ‰‹ åŽ, ç‚¹å‡» Tools/File Manager æ˜¾ç¤ºçš„ç›®å½•å¯¼èˆª, å¦‚å›¾: å¯ä»¥çœ‹å‡º, ç›¸æ¯” iFunBox çš„ç•Œé¢æ˜¾ç¤º, pp åŠ©æ‰‹ å·¥å…·æ˜¾å¾—æ›´åŠ å‹å¥½ä¸€äº›. è‡³äºŽä½¿ç”¨å“ªä¸ªå·¥å…·, è¦çœ‹ä¸ªäººçˆ±å¥½å’Œè‡ªå·±çš„å·¥ä½œéœ€è¦, æ¯•ç«Ÿå·¥å…·éƒ½æ˜¯ä¸ºäº†æé«˜æˆ‘ä»¬å­¦ä¹ å’Œå·¥ä½œæ•ˆçŽ‡çš„, æ²¡æœ‰ä»€ä¹ˆç»å¯¹çš„å¥½ä¸Žå, è‡ªå·±è§‰å¾—åˆé€‚é¡ºæ‰‹å°±å¥½äº†, æœ€ä¸»è¦çš„æ˜¯èƒ½å¤Ÿå¸®åˆ°è‡ªå·±. æˆ‘ä¸€èˆ¬æ˜¯å°†ä¸¤è€…ç»“åˆä½¿ç”¨çš„, å½“ç„¶ä½ å¦‚æžœä½ æœ‰æ›´å¥½çš„å·¥å…·ä¹Ÿå¯ä»¥æŽ¨èç»™æˆ‘. è¶Šç‹±ç³»åˆ—æ–‡ç«  åŸºäºŽ iOS10.3.1 è¿›è¡Œçš„å®žè·µã€‚ iOS é€†å‘: dumpdecrypted ç ¸å£³è®° iOS é€†å‘: ç ¸å£³ iOS é€†å‘: æŸ¥çœ‹ç³»ç»Ÿæ–‡ä»¶ç›®å½•å’Œç»“æž„ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH dumpdecrypted ç ¸å£³ï¼šå¯¼å‡ºå¤´æ–‡ä»¶ æ¯ä¸€ä¸ªå…³æ³¨ï¼Œéƒ½ä¼šæ¿€åŠ±æˆ‘ç»§ç»­å‰è¡Œ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSå®‰å…¨ è¶Šç‹± jailbreak</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH]]></title>
    <url>%2F2018%2F05%2F12%2FiOS-%E9%80%86%E5%90%91-%E8%B6%8A%E7%8B%B1%E4%BD%BF%E7%94%A8-SSH%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ è¶Šç‹±ä½¿ç”¨è‹¹æžœè®¾å¤‡æˆ–è€…åš iOS å¼€å‘çš„æœ‹å‹ä»¬ï¼Œå‡ ä¹Žéƒ½åº”è¯¥å¬è¯´è¿‡è¶Šç‹±è¿™ä¸ªè¯. é‚£ä¹ˆç©¶ç«Ÿä»€ä¹ˆæ˜¯è¶Šç‹±å‘¢? iOSè¶Šç‹±ï¼ˆè‹±è¯­ï¼šiOS Jailbreakingï¼‰æ˜¯èŽ·å– iOS è®¾å¤‡çš„ Root æƒé™çš„æŠ€æœ¯æ‰‹æ®µã€‚iOS è®¾å¤‡çš„ Root æƒé™ä¸€èˆ¬æ˜¯ä¸å¼€æ”¾çš„ã€‚ç”±äºŽèŽ·å¾—äº†Root æƒé™ï¼Œåœ¨è¶Šç‹±ä¹‹å‰æ— æ³•æŸ¥çœ‹çš„ iOS çš„æ–‡ä»¶ç³»ç»Ÿä¹Ÿå¯æŸ¥çœ‹. iOS çš„è¶Šç‹±å°±ç±»ä¼¼ Android èŽ·å– root æƒé™ä¸€æ ·çš„é“ç†ï¼Œè¯´ç®€å•ç‚¹å°±æ˜¯èŽ·å–ç³»ç»Ÿçš„ root æƒé™åšä¸€äº›æ›´é«˜çº§çš„äº‹æƒ…ã€‚ æ‰‹å¤´ä¸Šé¢ä¹‹å‰é—²ç½®äº†ä¸€å° iPhone4sï¼Œé—²æ¥æ— äº‹å°±æŠŠä»–è¶Šç‹±äº†ï¼ŒåŽé¢ä¸çŸ¥é“æ€Žä¹ˆæ“ä½œçš„ï¼Œæ‰‹æœºå˜æˆäº†ç™½è‹¹æžœ(å¼€æœºå°±ç™½å±ï¼Œæ— æ³•è¿›å…¥ç³»ç»Ÿ)ï¼Œæœ€åŽæ²¡åŠžæ³•ï¼Œåªèƒ½å‡çº§ç³»ç»Ÿï¼Œè¿™å°æ‰‹æœºä¹Ÿç®—æ˜¯åºŸäº†. å½“æ—¶ä½¿ç”¨çš„å·¥å…·æ˜¯ ç›˜å¤è¶Šç‹±ï¼Œè¶Šç‹±çš„ iOS ç³»ç»Ÿæ˜¯ 7.x. çŽ°åœ¨ iOS å·²ç»å‡çº§åˆ° 11.x äº†ï¼Œå¾ˆå¤š APP å’Œæ¸¸æˆå·²ç»ä¸å†æ”¯æŒ iOS8 ä»¥ä¸‹çš„ç³»ç»Ÿäº†ï¼Œç³»ç»Ÿçš„å®‰å…¨æ€§ä¹Ÿè¶Šæ¥è¶Šå¥½äº†ï¼Œè¶Šç‹±ç ´è§£çš„éš¾åº¦ä¹Ÿéšä¹‹æé«˜äº†ï¼Œç›®å‰å¸‚é¢ä¸Šèƒ½è¶Šç‹±çš„æœ€é«˜ç‰ˆæœ¬åº”è¯¥æ˜¯ 10.3.x çš„ç³»ç»Ÿ(æˆªæ­¢åˆ°è¯¥ç¯‡æ–‡ç« å†™çš„æ—¶å€™). ä¸ºäº†èƒ½å¤Ÿåˆ†æžå’Œå­¦ä¹ ä¸€äº›ä¼˜ç§€ App çš„è®¾è®¡ï¼Œæˆ‘ç´¢æ€§ä¹°äº†å°iPhone6sPlus æ‹¿æ¥è¶Šç‹±ï¼Œæ‰€ä»¥æŽ¥ä¸‹æ¥çš„åˆ†äº«éƒ½æ˜¯åŸºäºŽè¿™å°æ‰‹æœºçš„. è¶Šç‹±å·¥å…·å’Œè®¾å¤‡ [1]. è®¾å¤‡ iPhone6s Plusï¼Œç³»ç»Ÿ iOS10.3.2[2]. è¶Šç‹±å·¥å…·: çˆ±æ€åŠ©æ‰‹å’Œ doubleH3lix.ipa å®‰è£…å¹¶æ‰“å¼€ pc ä¸Šé¢çš„ çˆ±æ€åŠ©æ‰‹ ç›´æŽ¥å¼€å§‹è¶Šç‹±ï¼Œçˆ±æ€åŠ©æ‰‹ä¼šå¸®æ‚¨åœ¨è®¾å¤‡ä¸Šå®‰è£… doubleH3lix. è¿è¡Œ doubleH3lix åº”ç”¨ï¼Œç‚¹å‡» jailbreak æŒ‰é’®ï¼Œç­‰å¾…è®¾å¤‡è‡ªè¡Œé‡å¯. æ‰‹æœºé‡å¯åŽï¼Œä½ ä¼šçœ‹åˆ° Cydia é™é™çš„å‘†åœ¨é‚£é‡Œäº†ï¼Œè¿™ç§æ–¹å¼çš„è¶Šç‹±å±žäºŽéžå®Œç¾Žè¶Šç‹±ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æ²¡æœ‰çœŸæ­£çš„ç ´è§£ iOS ç³»ç»Ÿ. å¦‚æžœå‘çŽ°æ‰‹æœºæ–­ç”µå…³æœºæˆ–è€…é‡å¯åŽ Cydia ä¸€æ‰“å¼€å°±é—ªé€€ï¼Œå°±ä½¿ç”¨ doubleH3lix é‡æ–°è¶Šç‹±å°±å¯ä»¥äº†ï¼Œå¦‚æžœè¿˜æ˜¯ä¸è¡Œå°±éœ€è¦é‡æ–°ä½¿ç”¨ çˆ±æ€åŠ©æ‰‹ äº†ã€‚ å‚è€ƒè¶Šç‹±æ•™ç¨‹ 64ä½è®¾å¤‡iOS 10-10.3.3çˆ±æ€åŠ©æ‰‹ä¸€é”®è¶Šç‹±æ•™ç¨‹. å®‰è£… iOS ç»ˆç«¯å®‰è£…ç»ˆç«¯ï¼Œåœ¨ Cydia ä¸­æœç´¢ MTerminalï¼Œå®‰è£…å³å¯. å®‰è£…å¥½ç»ˆç«¯å·¥å…·åŽï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ 1su ç´§æŽ¥ç€è®©ä½ è¾“å…¥å¯†ç ï¼Œé»˜è®¤çš„ root ç”¨æˆ·å¯†ç æ˜¯ alpine. è¾“å…¥æ”¹å¯†ç å›žè½¦å³å¯ã€‚ ä¸ºäº†å®‰å…¨èµ·è§ï¼Œä¿®æ”¹é»˜è®¤å¯†ç  alpine. 1passwd è¿žç»­è¾“å…¥ç›¸åŒçš„å¯†ç å³ä¸ºå‘¢ä¿®æ”¹åŽçš„æ–°å¯†ç ã€‚ é…ç½® SSHé…ç½®å’Œä½¿ç”¨ SSH åŠŸèƒ½æ˜¯åŽç»­è¶Šç‹±å·¥ä½œçš„åŸºç¡€ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ MacOS çš„ç»ˆç«¯ä¸­è®¿é—® iOS ç³»ç»Ÿäº†ï¼Œå„ç§ shell å‘½ä»¤è®©ä½ å€æ„Ÿäº²åˆ‡ï¼Œæ‰€ä»¥å¤§å®¶å°½é‡è¦å®Œæˆè¯¥æ­¥éª¤. è¯•æƒ³ä¸€ä¸‹ï¼Œæœ¬æ¥æ‰‹æœºä¸Šé¢æ–‡å­—è¾“å…¥çš„ä½“éªŒå°±ä¸å¥½ï¼Œè¿˜éœ€è¦åœ¨ iPhone è®¾å¤‡ä¸Šé¢çš„ç»ˆç«¯ä¸­æ•²ç€å‘½ä»¤â€¦æ²¡æ³•å¿! iOS 10 è¶Šç‹±ä»¥åŽè‡ªå¸¦äº† SSHï¼Œæ‰€ä»¥ä¸éœ€è¦å•ç‹¬åŽ» Cydia ä¸‹è½½å’Œå®‰è£… OpenSSH. å¾ˆå¤šäººè¶Šç‹±åŽï¼Œå‘çŽ°ä¹Ÿå®‰è£…äº† OpenSSHï¼Œä½†æ˜¯ä¸€æ—¦è¿žæŽ¥ iPhone è®¾å¤‡å°±æ— æ³•è¿žæŽ¥ç”šè‡³æŠ¥é”™. å¦‚æžœä½ å·²ç»å®‰è£…äº† OpenSSH å¹¶ä¸”æ— æ³•ä½¿ç”¨ SSH æ¥æ“ä½œä½ çš„ iPhone è®¾å¤‡ï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹. [1]. æ‰“å¼€ Cydiaï¼Œåˆ†åˆ«æœç´¢ OpenSSL å’Œ Opensshï¼Œç„¶åŽåˆ†åˆ«å¸è½½ OpenSSL å’Œ Openssh. [2]. æ‰“å¼€ Cydiaï¼Œæ·»åŠ æºï¼šhttp://cydia.ichitaso.com/test ç‚¹å‡»å·¦ä¸Šè§’çš„ æ·»åŠ ï¼Œåœ¨å¼¹æ¡†ä¸­è¾“å…¥å¯¹åº”çš„æºåœ°å€å³å¯. [3]. åœ¨ Cydia ä¸­æœç´¢ dropbear å¹¶å®‰è£…. å®‰è£…å³å¯. å®‰è£…æˆåŠŸåŽï¼Œä¸€èˆ¬å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ SSH åŠŸèƒ½äº†. æ‰“å¼€ MacOS ç»ˆç«¯ï¼Œå¼€å§‹ä½¿ç”¨ SSH è¿žæŽ¥ä½ çš„ iPhone è®¾å¤‡. [1]. æŸ¥çœ‹ iPhone è®¾å¤‡çš„(wifi) IP åœ°å€. å¦‚æˆ‘çš„æ˜¯ 192.168.1.105.[2]. ä½¿ç”¨ MacOS ç»ˆç«¯ï¼Œè¾“å…¥: 1ssh root@192.168.1.105 æˆåŠŸçš„è¯ï¼Œå®ƒå…ˆä¼šè­¦å‘Šä½ æ˜¯å¦ç»§ç»­æ“ä½œï¼Œè¾“å…¥ yes å³å¯ï¼Œç„¶åŽåˆæç¤ºä½ è¾“å…¥ root å¯†ç ï¼Œå¯†ç å°±æ˜¯å‰é¢è¯´çš„ä¿®æ”¹åŽçš„å¯†ç . å¦‚æžœä½ æ²¡æœ‰ä¿®æ”¹å¯†ç ï¼Œé‚£å°±æ˜¯ alpine. æ“ä½œæµç¨‹å¦‚ä¸‹: 12345The authenticity of host '192.168.1.105 (192.168.1.105)' can't be established.ECDSA key fingerprint is SHA256:ANF7Cvc1yM/ZdaHyz9V1EHjG115cylIcHWyOzCL+kzs.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added '192.168.1.105' (ECDSA) to the list of known hosts.root@192.168.1.105's password: ä¹‹å‰åœ¨ iOS 10.2.x è¶Šç‹±ä¿®æ”¹å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ SSH åŠŸèƒ½äº†ï¼Œä½†æ˜¯åœ¨ iOS10.3.x æ— æµŽäºŽäº‹ï¼Œå¦‚æžœä½ æ˜¯iOS 10.2.x çš„è¶Šç‹±æ‰‹æœºï¼Œå¯ä»¥å‚è€ƒæœ¬æ–‡æœ«é™„å½•é…ç½® SSHï¼Œä¹Ÿæ˜¯æˆ‘ä¹‹å‰å®žè·µçš„ç»“æžœ. usbmuxdä¸Šé¢æ˜¯é€šè¿‡ wifi æ¥è¿žæŽ¥ iPhone è®¾å¤‡çš„ï¼Œå…¶å®žè¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œå°±æ˜¯å€ŸåŠ©äºŽ usbmuxd è¿™ä¸ªå·¥å…·é€šè¿‡ USB è¿žæŽ¥(æ‰‹æœºæ•°æ®çº¿è¿žæŽ¥ç”µè„‘)ä¸éœ€è¦ wifiï¼ŒUSBè¿žæŽ¥æ¯” wifi å“åº”é€Ÿåº¦å¿«ï¼Œä¸”æ— ç½‘ç»œçŽ¯å¢ƒçš„é™åˆ¶. ä½¿ç”¨ usbmuxd çš„å‰ææ˜¯ä½ çš„æ‰‹æœºå¯ä»¥æ­£å¸¸çš„ä½¿ç”¨ SSH åŠŸèƒ½ï¼Œå¦åˆ™ usbmuxd ä¹Ÿæ— æ³•æ•‘ä½ ã€‚ [1]. MacOS å®‰è£… usbmuxd 1brew install usbmuxd [2]. ä½¿ç”¨ usbmuxd è‡ªå¸¦å·¥å…· iproxy. iproxy å¯ä»¥å¿«æ·çš„æ“ä½œè¿žæŽ¥ iPhone ç­‰æ“ä½œ. MacOS ä¸Šåªæ”¯æŒ 4 ä½çš„ç«¯å£å·ï¼Œéœ€è¦æŠŠ iPhone çš„é»˜è®¤ç«¯å£ 22 æ˜ å°„åˆ° Mac ä¸Šé¢ä¸€ä¸ª 4 ä½ç«¯å£å·çš„ç«¯å£ä¸Šé¢ï¼Œç›¸å½“äºŽå»ºç«‹ä¸€ä¸ª Mac å’Œ iPhone ä¹‹é—´çš„é€šé“. iproxy å…·ä½“ä½¿ç”¨ï¼ŒåŽé¢å†è®². å¤§å®¶å…ˆå®‰è£…ä¸€ä¸‹å³å¯. 12iproxy 5678 22waiting for connection ä»¥ä¸Šå‘½ä»¤å°±æ˜¯æŠŠå½“å‰è¿žæŽ¥è®¾å¤‡çš„ 22 ç«¯å£(SSHç«¯å£)æ˜ å°„åˆ°ç”µè„‘çš„ 5678 ç«¯å£ï¼Œé‚£ä¹ˆæƒ³å’Œè®¾å¤‡ 22 ç«¯å£é€šä¿¡ï¼Œç›´æŽ¥å’Œæœ¬åœ°çš„ 5678 ç«¯å£é€šä¿¡å°±å¯ä»¥äº†ã€‚ ç»ˆç«¯æç¤º waiting for connectionï¼Œè¡¨ç¤ºè¿™ä¸¤ä¸ªç«¯å£ä¹‹é—´å·²ç»å¯ä»¥é€šä¿¡äº†ï¼Œä¿ç•™å½“å‰ç»ˆç«¯çª—å£(å¦‚æžœå…³é—­å°±åœæ­¢ç«¯å£ä¹‹é—´çš„é€šä¿¡äº†)ï¼Œæ–°å»ºå¦ä¸€ä¸ªç»ˆç«¯è¾“å…¥ï¼Œé»˜è®¤å¯†ç  root å¯†ç ã€‚ 1ssh -p 5678 root@127.0.0.1 æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼Œç±»ä¼¼ä¸Šé¢é€šè¿‡ WIFI æ“ä½œçš„æ–¹å¼ã€‚ 12345The authenticity of host '[127.0.0.1]:5678 ([127.0.0.1]:5678)' can't be established.ECDSA key fingerprint is SHA256:ANF7Cvc1yM/ZdaHyz9V1EHjG115cylIcHWyOzCL+kzs.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added '[127.0.0.1]:5678' (ECDSA) to the list of known hosts.root@127.0.0.1's password: æŽ¥ä¸‹æ¥ï¼Œä½ å°±å¯ä»¥åœ¨ MacOS ç»ˆç«¯ä¸Šé¢æ“ä½œä½ çš„ iPhone è®¾å¤‡äº†ï¼Œå°½æƒ…çš„äº«å— shell å‘½ä»¤å§ã€‚ä¸ä½¿ç”¨çš„æ—¶å€™ï¼Œè¾“å…¥ exit å³å¯é€€å‡º SSH. é™„å½•[1]. iOS 10.2.x è¶Šç‹±ä½¿ç”¨ SSH åŠŸèƒ½. é¦–å…ˆä¿®æ”¹ root å¯†ç ã€‚ iOS 10.2 (è¶Šç‹±åŽ)è‡ªå¸¦ OpenSSHï¼Œä¸éœ€è¦è‡ªå·±é‡æ–°å®‰è£… OpenSSHï¼Œä½†æ˜¯éœ€è¦ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶æ‰èƒ½ä½¿ç”¨ã€‚ åœ¨æ‰‹æœºä¸Šå®‰è£… MTERMINALï¼Œè¿è¡Œ suï¼Œè¾“å…¥ root å¯†ç ï¼Œæ‰§è¡Œ: 1ps aux|grep dropbear å¦‚æžœä½ çœ‹åˆ°çš„è¿›ç¨‹æ²¡æœ‰ dropbearï¼Œæ‰§è¡Œ: 1/usr/local/bin/dropbear -F -R -p 22 ç„¶åŽå°±å¯ä»¥è¿žæŽ¥äº†ï¼Œé‡å¯ä¾ç„¶æœ‰æ•ˆã€‚ å¦‚æžœä½ çœ‹åˆ°è¿›ç¨‹æ˜¯è¿™æ ·çš„: 1/usr/local/bin/dropbear -F -R -p 127.0.0.1:22 æ„æ€æ˜¯åªèƒ½æ•°æ®çº¿é‡å®šå‘è¿žæŽ¥ SSHï¼Œå¦‚æžœä½ æƒ³æ”¹æˆ WIFI å¯ä»¥è®¿é—®ï¼Œéœ€è¦ä¿®æ”¹ /private/var/containers/Bundle/Application/D9185B6D-EA9E-4678-B59C-BF43DEFE67BF/yalu102.app/dropbear.plistæŠŠé‡Œé¢æœ‰ä¸ªå‚æ•° 127.0.0.1:22 æ”¹æˆ22 ä¿å­˜ï¼Œé‡å¯æ‰‹æœºå³å¯ã€‚ [2]. ä½¿ç”¨ usbmuxd æ— æ³•ä½¿ç”¨ SSH æ‰§è¡Œ ssh -p 5678 root@127.0.0.1 åŽæŠ¥é”™ï¼Œå¦‚ä¸‹: 1ssh_exchange_identification: read: Connection reset by peer è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æ²¡æœ‰æ­£ç¡®çš„ä½¿ç”¨æ•°æ®çº¿è¿žæŽ¥ Mac ç”µè„‘ï¼Œä½¿ç”¨æ•°æ®çº¿æ­£å¸¸è¿žæŽ¥ Mac ç”µè„‘å³å¯è§£å†³é—®é¢˜ã€‚ è¶Šç‹±ç³»åˆ—æ–‡ç«  åŸºäºŽ iOS10.3.1 è¿›è¡Œçš„å®žè·µã€‚ iOS é€†å‘: dumpdecrypted ç ¸å£³è®° iOS é€†å‘: ç ¸å£³ iOS é€†å‘: æŸ¥çœ‹ç³»ç»Ÿæ–‡ä»¶ç›®å½•å’Œç»“æž„ iOS é€†å‘: è¶Šç‹±ä½¿ç”¨ SSH dumpdecrypted ç ¸å£³ï¼šå¯¼å‡ºå¤´æ–‡ä»¶ å…³æ³¨ä¸æ˜¯ç›®çš„ï¼Œäº¤æµã€å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥æ‰æ˜¯å…³é”®]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSå®‰å…¨ è¶Šç‹± jailbreak</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RunLoop: NSTimer å®žçŽ°å¸¸é©»çº¿ç¨‹çš„é—®é¢˜]]></title>
    <url>%2F2018%2F05%2F06%2FRunLoop-NSTimer-%E5%AE%9E%E7%8E%B0%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[å¯è¡Œæ€§åœ¨ å¸¸é©»çº¿ç¨‹æ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒ è¿™ç¯‡æ–‡ç« ä¸­ç»™å¤§å®¶åˆ†äº«äº†å¦‚ä½•åˆ©ç”¨ RunLoop çš„ç‰¹æ€§, ç»“åˆ NSMachPort å®žçŽ°ä¸€ä¸ª å¸¸é©»çº¿ç¨‹ çš„ä¸»é¢˜å†…å®¹. ä»Šå¤©æˆ‘ä»¬æŽ¢è®¨ä¸€ä¸‹ä½¿ç”¨ NSTimer å¦‚ä½•å®žçŽ° å¸¸é©»çº¿ç¨‹ ä»¥åŠæ³¨æ„äº‹é¡¹. ä»Ž RunLoop çš„ç‰¹æ€§æ¥çœ‹, åªè¦æœ‰ Source æˆ–è€… Timer éƒ½ä¼šä½¿å…¶èƒ½è‡ªå¾ªçŽ¯ä½¿ç”¨, ä¸ä¼šç«‹å³ç»ˆæ­¢å½“å‰çº¿ç¨‹çš„æ‰§è¡Œ, æ‰€ä»¥ä»Žç†è®ºä¸Šæ¥çœ‹ NSTimer æ˜¯å¯ä»¥è¾¾åˆ°åˆ›å»º å¸¸é©»çº¿ç¨‹ çš„ç›®çš„çš„. å¼€å§‹å®žè·µå®Œæ•´çš„ä¾‹å­ä»£ç , å¯ä»¥ä»Žæ–‡ç« çš„é™„å½•èŽ·å–å’ŒæŸ¥çœ‹, è¿™é‡Œåªç»™å‡ºæ ¸å¿ƒä»£ç . åˆ›å»ºçº¿ç¨‹ 123456789101112131415- (NSThread *)permanentThread &#123; static NSThread *thread = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; thread = [[NSThread alloc] initWithTarget:self selector:@selector(asyncRun) object:nil]; [thread setName:@&quot;veryitman-thread&quot;]; // åŒä¸€ä¸ªçº¿ç¨‹è¿žç»­å¤šæ¬¡ start ä¼šå¯¼è‡´ crash [thread start]; &#125;); return thread;&#125; çº¿ç¨‹æ‰§è¡Œçš„å‡½æ•° 12345678910111213141516171819202122- (void)asyncRun &#123; @autoreleasepool &#123; NSLog(@&quot;veryitman--asyncRun. Current Thread: %@&quot;, [NSThread currentThread]); NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; // ä¿æŒå¸¸é©»çº¿ç¨‹: ä½¿ç”¨ NSTimer [self _attachTimerToRunLoop]; NSLog(@&quot;veryitman--asyncRun. Current RunLoop: %@&quot;, runLoop); // æ‰§è¡Œå…¶ä»–é€»è¾‘ //... // æ‰‹åŠ¨å¼€å¯ RunLoop [runLoop run]; NSLog(@&quot;veryitman--asyncRun. End Run.&quot;); &#125;&#125; åˆ›å»ºå®šæ—¶å™¨ 12345678910111213- (void)_attachTimerToRunLoop &#123; if (nil == self.timer) &#123; // scheduledTimerWithTimeInterval è¿™ç§æ–¹å¼ // åˆ›å»ºçš„ Timer ä¼šé»˜è®¤åŠ å…¥åˆ°å½“å‰çš„ RunLoop çš„ NSDefaultRunLoopMode ä¸­ _timer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(runTimer) userInfo:nil repeats:YES]; &#125;&#125; å¯ä»¥çœ‹å‡º, _attachTimerToRunLoop ä¸­æ˜¯å°† timer åŠ å…¥åˆ°å½“å‰çš„ RunLoop å½“ä¸­äº†. è¿™é‡Œæ³¨æ„, repeats å€¼è¢«è®¾ç½®ä¸º YES äº†. è·Ÿä¹‹å‰ä¸€æ ·, å¯ä»¥ä½¿ç”¨ç‚¹å‡»äº‹ä»¶æ¥æ¨¡æ‹Ÿå’ŒéªŒè¯å¸¸é©»çº¿ç¨‹çš„æœ‰æ•ˆæ€§. 1234567- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; // æ¨¡æ‹Ÿåœ¨æŒ‡å®šçº¿ç¨‹ä¸Šé¢å†æ¬¡æ‰§è¡Œæ–¹æ³• SEL seltor = NSSelectorFromString(@&quot;runAnyTime&quot;); [self performSelector:seltor onThread:[self permanentThread] withObject:nil waitUntilDone:NO];&#125; æ¯ç‚¹å‡»ä¸€æ¬¡å±å¹•, éƒ½ä¼šå¯¹åº”æ‰§è¡Œ runAnyTime é‡Œé¢çš„å†…å®¹. å¯¹ repeat çš„æ€è€ƒåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­, æˆ‘å°† repeat å‚æ•°è®¾ç½®ä¸º YES, è¯•æƒ³ä¸€ä¸‹å¦‚æžœæŠŠ repeat å‚æ•°è®¾ç½®ä¸º NO, ä¼šä¸ä¼šé€ æˆå¸¸é©»çº¿ç¨‹å¤±æ•ˆå‘¢? åŠ¨æ‰‹è¯•è¯•â€¦ 12345678910111213- (void)_attachTimerToRunLoop &#123; if (nil == self.timer) &#123; // scheduledTimerWithTimeInterval è¿™ç§æ–¹å¼ // åˆ›å»ºçš„ Timer ä¼šé»˜è®¤åŠ å…¥åˆ°å½“å‰çš„ RunLoop çš„ NSDefaultRunLoopMode ä¸­ _timer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(runTimer) userInfo:nil repeats:NO]; &#125;&#125; å†æ¬¡ç‚¹å‡»å±å¹•è‹¥å¹²æ¬¡, åŒæ ·ä¼šæ‰§è¡Œå¯¹åº”å‡½æ•°é‡Œé¢çš„å†…å®¹. è¿™å°±è¯´æ˜Žäº†å³ä½¿å°† repeat å‚æ•°è®¾ç½®ä¸º NO, ä¹Ÿä¸ä¼šå½±å“å¸¸é©»çº¿ç¨‹. é‚£æˆ‘ä»¬å†æ¥ç‚¹å…·æœ‰æŒ‘æˆ˜çš„æ´»åŠ¨â€¦ å°†å½“å‰é¡µé¢åŠ å…¥ UIScrollview è¿™ä¸ªè§†å›¾, è¿˜æ˜¯ä¿æŒ repeat å‚æ•°è®¾ç½®ä¸º NO. 12345678910111213141516- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor lightGrayColor]; self.navigationItem.title = @&quot;NSTimer åˆ›å»ºå¸¸é©»çº¿ç¨‹&quot;; // åŠ å…¥æ»šåŠ¨è§†å›¾ _scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds]; [self.view addSubview:self.scrollView]; self.scrollView.contentSize = CGSizeMake(1000, 1000); self.scrollView.delegate = self; // å¯åŠ¨çº¿ç¨‹ [self permanentThread];&#125; å› ä¸ºåŠ å…¥äº†æ»šåŠ¨è§†å›¾, æˆ‘ä»¬æ¢ä¸€ç§æ–¹å¼æ¥æ¨¡å¼å’ŒéªŒè¯å¸¸é©»çº¿ç¨‹. åœ¨ UIScrollview ä»£ç†ä¸­æ¥æ¨¡æ‹Ÿ, ç¤ºä¾‹å¦‚ä¸‹: 1234567- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView &#123; // æ¨¡æ‹Ÿåœ¨æŒ‡å®šçº¿ç¨‹ä¸Šé¢å†æ¬¡æ‰§è¡Œæ–¹æ³• SEL seltor = NSSelectorFromString(@&quot;runAnyTime&quot;); [self performSelector:seltor onThread:[self permanentThread] withObject:nil waitUntilDone:NO];&#125; è¿è¡ŒåŽè¿›å…¥è¯¥é¡µé¢, å¯ä»¥å‘çŽ°å¸¸é©»çº¿ç¨‹è¢«ç»ˆæ­¢äº†. 12veryitman--timerRun.veryitman--asyncRun. End Run. å½“é™¤æˆ‘ä»¥ä¸ºæ›´æ¢ä¸€ä¸‹æ¨¡å¼å³ä½¿ å°† repeat å‚æ•°è®¾ç½®ä¸º NO, ä¹Ÿä¸ä¼šå‡ºçŽ°å¸¸é©»çº¿ç¨‹è¢«ç»ˆæ­¢çš„é—®é¢˜. å¦‚ä¸‹é¢çš„ä»£ç : 12_timer = [NSTimer timerWithTimeInterval:2 target:self selector:@selector(runTimer) userInfo:nil repeats:NO];[[NSRunLoop currentRunLoop] addTimer:self.timer forMode:NSRunLoopCommonModes]; è¿™æ ·æ›´æ¢æ¨¡å¼ä¸º NSRunLoopCommonModes ä¹Ÿä¸è¡Œ. åœ¨è¿™ç§æƒ…å†µ(æœ‰æ»šåŠ¨è§†å›¾çš„)ä¸‹, å°† repeat å‚æ•°è®¾ç½®ä¸º YES å°±ä¸ä¼šå¯¼è‡´å¸¸é©»çº¿ç¨‹è¢«ç»ˆæ­¢äº†, æ— è®ºå“ªç§æ–¹å¼åˆ›å»ºçš„ Timer. æ€»ç»“1.å­çº¿ç¨‹åˆ›å»ºä¸­çš„ RunLoop çš„æ¨¡å¼ä¸ä¼šä¸Žä¸»çº¿ç¨‹ä¸­ RunLoop çš„æ¨¡å¼å†²çª, å„è‡ªè¿è¡Œåœ¨å„è‡ªçš„ mode å½“ä¸­. 2.ä½¿ç”¨ NSTimer æ¥åˆ›å»ºå¸¸é©»çº¿ç¨‹, åœ¨æœ‰ UIScrollview æˆ–è€…å…¶å­ç±»çš„æƒ…å†µä¸‹, éœ€è¦å°† repeats è®¾ç½®ä¸º YES, å¦åˆ™ä¸ä¼šåˆ›å»ºå¸¸é©»çº¿ç¨‹. æ²¡æœ‰æ»šåŠ¨è§†å›¾çš„æƒ…å†µä¸‹, repeats è®¾ç½®ä¸º NO ä¹Ÿæ²¡æœ‰å…³ç³». 3.åˆ›å»º NSTimer ä¸‹é¢ä¸¤ç§åˆ›å»º Timer çš„æ•ˆæžœæ˜¯ä¸€è‡´çš„. 12345[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(runTimer) userInfo:nil repeats:YES]; scheduledTimerWithTimeInterval é»˜è®¤ä¼šå°† Timer åŠ å…¥åˆ°å½“å‰çš„ RunLoop ä¸­. 12[NSTimer timerWithTimeInterval:2 target:self selector:@selector(runTimer) userInfo:nil repeats:NO];[[NSRunLoop currentRunLoop] addTimer:self.timer forMode:NSDefaultRunLoopMode]; é™„å½•å®Œæ•´ç¤ºä¾‹ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134#import &quot;MZTimerPermanentThreadController.h&quot;@interface MZTimerPermanentThreadController () &lt;UIScrollViewDelegate&gt;@property (nonatomic, strong) NSTimer *timer;@property (nonatomic, strong) UIScrollView *scrollView;@end@implementation MZTimerPermanentThreadController- (void)dealloc &#123; NSLog(@&quot;veryitman---MZTimerPermanentThreadController dealloc.&quot;);&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor lightGrayColor]; self.navigationItem.title = @&quot;NSTimer åˆ›å»ºå¸¸é©»çº¿ç¨‹&quot;; // åŠ å…¥æ»šåŠ¨è§†å›¾ _scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds]; [self.view addSubview:self.scrollView]; self.scrollView.contentSize = CGSizeMake(1000, 1000); self.scrollView.delegate = self; // å¯åŠ¨çº¿ç¨‹ [self permanentThread];&#125;- (void)viewDidDisappear:(BOOL)animated &#123; [super viewDidDisappear:animated]; // å–æ¶ˆçº¿ç¨‹ // å®žé™…ä¸šåŠ¡åœºæ™¯ä¸­è‡ªè¡Œå†³å®š canCancel çš„è®¾ç½®, è¿™é‡Œåªæ˜¯ç¤ºä¾‹ BOOL canCancel = YES; if (canCancel) &#123; [self.timer invalidate]; _timer = nil; [[self permanentThread] cancel]; &#125;&#125;- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView &#123; // æ¨¡æ‹Ÿåœ¨æŒ‡å®šçº¿ç¨‹ä¸Šé¢å†æ¬¡æ‰§è¡Œæ–¹æ³• SEL seltor = NSSelectorFromString(@&quot;runAnyTime&quot;); [self performSelector:seltor onThread:[self permanentThread] withObject:nil waitUntilDone:NO];&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; // æ¨¡æ‹Ÿåœ¨æŒ‡å®šçº¿ç¨‹ä¸Šé¢å†æ¬¡æ‰§è¡Œæ–¹æ³• SEL seltor = NSSelectorFromString(@&quot;runAnyTime&quot;); [self performSelector:seltor onThread:[self permanentThread] withObject:nil waitUntilDone:NO];&#125;- (NSThread *)permanentThread &#123; static NSThread *thread = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; thread = [[NSThread alloc] initWithTarget:self selector:@selector(asyncRun) object:nil]; [thread setName:@&quot;veryitman-thread&quot;]; // åŒä¸€ä¸ªçº¿ç¨‹è¿žç»­å¤šæ¬¡ start ä¼šå¯¼è‡´ crash [thread start]; &#125;); return thread;&#125;- (void)asyncRun &#123; @autoreleasepool &#123; NSLog(@&quot;veryitman--asyncRun. Current Thread: %@&quot;, [NSThread currentThread]); NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; // ä¿æŒå¸¸é©»çº¿ç¨‹: ä½¿ç”¨ NSTimer [self _attachTimerToRunLoop]; NSLog(@&quot;veryitman--asyncRun. Current RunLoop: %@&quot;, runLoop); // æ‰§è¡Œå…¶ä»–é€»è¾‘ //... // æ‰‹åŠ¨å¼€å¯ RunLoop [runLoop run]; NSLog(@&quot;veryitman--asyncRun. End Run.&quot;); &#125;&#125;- (void)runAnyTime &#123; NSLog(@&quot;veryitman--runAnyTime. Current Thread: %@&quot;, [NSThread currentThread]);&#125;- (void)_attachTimerToRunLoop &#123; if (nil == self.timer) &#123; // scheduledTimerWithTimeInterval è¿™ç§æ–¹å¼ // åˆ›å»ºçš„ Timer ä¼šé»˜è®¤åŠ å…¥åˆ°å½“å‰çš„ RunLoop çš„ NSDefaultRunLoopMode ä¸­ _timer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(runTimer) userInfo:nil repeats:YES]; #if 0 _timer = [NSTimer timerWithTimeInterval:2 target:self selector:@selector(runTimer) userInfo:nil repeats:NO]; [[NSRunLoop currentRunLoop] addTimer:self.timer forMode:NSRunLoopCommonModes];#endif &#125;&#125;- (void)runTimer &#123; NSLog(@&quot;--veryitman--timerRun.&quot;);&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>RunLoop å¸¸é©»çº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸é©»çº¿ç¨‹æ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒ]]></title>
    <url>%2F2018%2F04%2F21%2F%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B%E6%98%AF%E4%B8%80%E7%A7%8D%E4%BB%80%E4%B9%88%E4%BD%93%E9%AA%8C%2F</url>
    <content type="text"><![CDATA[ç®€è¯´ RunLoopå…³äºŽ iOS RunLoop ç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æœ‰ä»‹ç»è¿‡, å¾ˆå¤šæŠ€æœ¯é¢è¯•å®˜ä¹Ÿä¼šé—®å…³äºŽ RunLoop çš„ç›¸å…³çŸ¥è¯†. æˆ‘æŠŠè‡ªå·±å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜å’Œæ€»ç»“çš„ç»éªŒåˆ†äº«å‡ºæ¥(ä¼šåšæˆä¸€ç³»åˆ—çš„æ–‡ç« ), ä¹Ÿç®—æ˜¯å¯¹è‡ªå·±çš„ä¸€ä¸ªæ€»ç»“å’Œæ²‰æ·€, æ¬¢è¿Žå¤§å®¶äº¤æµ. ç½‘ä¸Šçš„æ–‡ç« åŸºæœ¬éƒ½æ˜¯é’ˆå¯¹äºŽ Apple Developer Doc - Run Loops è¿™ç¯‡æ¥å±•å¼€çš„, æ‰€ä»¥å»ºè®®å¤§å®¶è®¤çœŸçš„åŽ»é€šè¯»è¿™ç¯‡æ–‡ç« , å¹¶å†™ä»£ç éªŒè¯, å®žè·µ. å¯ä»¥ç®€å•ç²—æš´çš„è¿™ä¹ˆç†è§£ä¸€ä¸‹ RunLoop, åŸºäºŽäº‹ä»¶é©±åŠ¨çš„æ­»å¾ªçŽ¯(ç”±å†…æ ¸æ¥è°ƒåº¦å’Œç®¡ç†çš„), åœ¨éœ€è¦å¤„ç†äº‹æƒ…çš„æ—¶å€™å°±å‡ºæ¥å¹²ç‚¹äº‹, å¦åˆ™ä¼‘çœ å¾…å‘½.RunLoop çš„æ ¸å¿ƒæ˜¯åŸºäºŽ machport çš„ï¼Œå…¶è¿›å…¥ä¼‘çœ æ—¶è°ƒç”¨çš„å‡½æ•°æ˜¯ mach_msg(). ç±»ä¼¼ä¸‹é¢çš„ä»£ç æ¥è¯´æ˜Žä¸€ä¸‹: 12345678BOOL stopRunning = NO;do &#123; // å¤„ç† App ä¸­å„ç§æ“ä½œå„ç§äº‹ä»¶ // ç‚¹å‡»å±å¹•, è§¦æ‘¸åˆ°ç¡¬ä»¶ä¹Ÿä¼šå”¤é†’ RunLoop &#125; while(!stopRunning); è¯´åˆ°è¿™é‡Œ, éšä¾¿æåŠä¸€ä¸‹, å­¦ä¹ è¿‡ Android å¼€å‘çš„åŒäº‹åº”è¯¥å’Œå¥½ç†è§£ RunLoop äº†, iOS çš„ RunLoop è·Ÿ Android çš„ Looper æœºåˆ¶å‡ ä¹Žä¸€æ ·, åªæ˜¯ä¸åŒçš„ç³»ç»Ÿä¹‹é—´å®žçŽ°æœ‰å·®å¼‚ç½¢äº†! æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä¹‹å‰å†™çš„æ–‡ç«  Handler: æ›´æ–°UIçš„æ–¹æ³•. ä»Šå¤©è·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•åœ¨ iOS ä¸­ç»“åˆ RunLoop å’Œ machport å®žçŽ°å¸¸é©»çº¿ç¨‹, å…ˆè·Ÿç€å®žä¾‹èµ°, åŽç»­å†åŽ»æ€»ç»“ RunLoop çš„å„ç§ç»†èŠ‚ç‚¹. ç¥žå¥‡çš„ mainå¼€å‘è¿‡ iOS åº”ç”¨ä¸­çš„æœ‹å‹, å¯¹ main.m å†ä¹Ÿç†Ÿæ‚‰ä¸è¿‡äº†, main å‡½æ•°æ­£æ˜¯åº”ç”¨çš„å…¥å£å‡½æ•°. 12345int main(int argc, char * argv[]) &#123; @autoreleasepool &#123; return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); &#125;&#125; æˆ‘ä»¬å°† return ä»£ç åˆ†å¼€å†™, çœ‹çœ‹æœ‰ä»€ä¹ˆè››ä¸é©¬è¿¹å¯å¯». 1234567891011int main(int argc, char * argv[]) &#123; @autoreleasepool &#123; int ret = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); NSLog(@&quot;veryitman--- UIApplicationMain end.&quot;); return ret; &#125;&#125; æ— è®ºå¦‚ä½•ä½ ä¹Ÿçœ‹ä¸åˆ°æ—¥å¿— veryitman--- UIApplicationMain end. çš„æ‰“å°, è¿™è¯´æ˜Ž UIApplicationMain ä¸€ç›´åœ¨å‘µæŠ¤ç€ APP çš„è¿è¡Œ, å“ˆå“ˆ. æˆ‘ä»¬ä¸å¦¨å†æ”¹ä¸€æ¬¡, å¦‚ä¸‹: 123456int main(int argc, char * argv[]) &#123; @autoreleasepool &#123; return 0; &#125;&#125; å†åŽ»è¿è¡Œ APP, ä½ ä¼šå‘çŽ°æ ¹æœ¬æ²¡æœ‰è®© APP è¿è¡Œèµ·æ¥, å†æ¬¡è¯´æ˜Žæ²¡æœ‰äº† UIApplicationMain çš„å‘µæŠ¤, APP æ— æ³•èµ·æ­»å›žç”Ÿ. çŒœæµ‹åœ¨ UIApplicationMain å‡½æ•°ä¸­ï¼Œå¼€å¯äº†å’Œä¸»çº¿ç¨‹ç›¸å…³çš„ RunLoopï¼Œä½¿ UIApplicationMain ä¸ä¼šè¿”å›žä¸€ç›´åœ¨è¿è¡Œä¸­ï¼Œä»Žè€Œä¿è¯äº†ç¨‹åºçš„æŒç»­è¿è¡Œ, æœ€å¤§çš„åŠŸè‡£å°±æ˜¯ RunLoop. æ™®é€šçº¿ç¨‹ä¸€èˆ¬æˆ‘ä»¬å¼€å¯çš„çº¿ç¨‹åœ¨æ‰§è¡Œå®Œä»»åŠ¡åŽ, å°±ä¼šç»“æŸè¯¥çº¿ç¨‹. é™¤éžä½ å†™äº†ç±»ä¼¼ä¸‹é¢çš„ä»£ç : 123while(1) &#123; // ä¸šåŠ¡å¤„ç†&#125; æˆ–è€… 123while (æ¡ä»¶æ»¡è¶³) &#123; // ä¸šåŠ¡å¤„ç†&#125; å¼€å¯ä¸€ä¸ªçº¿ç¨‹ 123456789101112131415- (NSThread *)permanentThread &#123; static NSThread *thread = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; thread = [[NSThread alloc] initWithTarget:self selector:@selector(asyncRun) object:nil]; [thread setName:@&quot;veryitman-thread&quot;]; // åŒä¸€ä¸ªçº¿ç¨‹è¿žç»­å¤šæ¬¡ start ä¼šå¯¼è‡´ crash [thread start]; &#125;); return thread;&#125; æ‰§è¡Œå¯¹åº”çš„ asyncRun å‡½æ•°, å¦‚ä¸‹: 123456789101112- (void)asyncRun &#123; @autoreleasepool &#123; NSLog(@&quot;veryitman--asyncRun. Current Thread: %@&quot;, [NSThread currentThread]); // æ‰§è¡Œå…¶ä»–é€»è¾‘ //... NSLog(@&quot;veryitman--asyncRun. End Run.&quot;); &#125;&#125; å¯ä»¥å‘çŽ° asyncRun å¾ˆå¿«å°±å¯ä»¥æ‰§è¡Œå®Œæˆ (End Run). 12veryitman--asyncRun. Current Thread: &lt;NSThread: 0x60000066c400&gt;&#123;number = 3, name = veryitman-thread&#125;veryitman--asyncRun. End Run. å­çº¿ç¨‹å¼€å¯ RunLoopä¸»çº¿ç¨‹æ˜¯é»˜è®¤å¼€å¯ RunLoop çš„å³ mainRunLoop æ˜¯ç³»ç»Ÿé»˜è®¤å¼€å¯çš„, ä½†æ˜¯å­çº¿ç¨‹ä¸­çš„ RunLoop éœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å¼€å¯. å…³äºŽä¸ºä»€ä¹ˆå­çº¿ç¨‹ä¸­éœ€è¦æ‰‹åŠ¨å¼€å¯, åŽç»­æ–‡ç« ç»“åˆæºç ç»™å¤§å®¶åˆ†æž, è¿™é‡Œæš‚æ—¶å¯ä»¥ç†è§£ä¸ºèŽ·å– RunLoop å¯¹è±¡æ˜¯ä¸€ç§æ‡’åŠ è½½æ¨¡å¼. åªä¸è¿‡ä¸»çº¿ç¨‹ä¸­, ç³»ç»Ÿå¸®æˆ‘ä»¬å¼€å¯äº†, ç„¶è€Œå­çº¿ç¨‹ä¸­éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¼€å¯è€Œå·². ç±»ä¼¼è¿™æ ·: 12345678910111213141516171819- (void)asyncRun &#123; @autoreleasepool &#123; NSLog(@&quot;veryitman--asyncRun. Current Thread: %@&quot;, [NSThread currentThread]); NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; NSLog(@&quot;veryitman--asyncRun. Current RunLoop: %@&quot;, runLoop); // æ‰§è¡Œå…¶ä»–é€»è¾‘ //... // æ‰‹åŠ¨å¼€å¯ RunLoop [runLoop run]; NSLog(@&quot;veryitman--asyncRun. End Run.&quot;); &#125;&#125; åœ¨æŽ§åˆ¶å°å¯ä»¥çœ‹åˆ°è¾“å‡º: RunLoop æ²¡æœ‰ä»»ä½•è¾“å…¥æº(input source) å’Œå®šæ—¶å™¨(timer), è¿™æ—¶å³ä½¿å¼€å¯äº† RunLoop ä¹Ÿä¸ä¼šè®©å…¶ç­‰å¾…æ‰§è¡Œ, æ¢å¥è¯è¯´ä¼šç«‹å³ç»“æŸå½“å‰çš„ RunLoop. æ—¢ç„¶è¿™æ ·æˆ‘ä»¬ç»™å­çº¿ç¨‹çš„ RunLoop æ·»åŠ æºæˆ–è€…å®šæ—¶å™¨å³å¯. è¿™é‡Œä»¥æ·»åŠ  NSPort ä¸ºä¾‹. 1234567891011121314151617181920212223- (void)asyncRun &#123; @autoreleasepool &#123; NSLog(@&quot;veryitman--asyncRun. Current Thread: %@&quot;, [NSThread currentThread]); NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; // æ·»åŠ  source NSPort *port = [NSMachPort port]; [runLoop addPort:port forMode:NSRunLoopCommonModes]; NSLog(@&quot;veryitman--asyncRun. Current RunLoop: %@&quot;, runLoop); // æ‰§è¡Œå…¶ä»–é€»è¾‘ //... // æ‰‹åŠ¨å¼€å¯ RunLoop [runLoop run]; NSLog(@&quot;veryitman--asyncRun. End Run.&quot;); &#125;&#125; å†æ¬¡è¿è¡Œ, ä½ ä¼šå‘çŽ° End Run è¿™ä¸ª Log æ˜¯ä¸ä¼šæ‰“å°å‡ºæ¥çš„. å¯¹åº”å½“å‰çš„ RunLoop ä¹Ÿæœ‰äº†æºå’Œå®šæ—¶å™¨, å¦‚å›¾æ‰€ç¤º: å…³äºŽå®šæ—¶å™¨å’Œ RunLoop çš„ç»“åˆ, ä¸‹ç¯‡å†åˆ†äº«. çŽ°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚, éœ€è¦åœ¨æŒ‡å®šçš„çº¿ç¨‹ä¸­æ‰§è¡ŒæŸé¡¹ä»»åŠ¡, æ˜¾ç„¶ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥æ»¡è¶³éœ€æ±‚, ä¸‹é¢è¿›å…¥ä»Šå¤©çš„æ­£é¢˜. éªŒè¯å¸¸é©»çº¿ç¨‹ä¸€å®šåˆ° å¸¸é©» è¿™ä¸ªè¯, å°±çŸ¥é“æ˜¯èƒ½å¤Ÿè®©è¯¥çº¿ç¨‹éšæ—¶å¾…å‘½, ä¿è¯å…¶ä¸æŒ‚æŽ‰. iOS ä¸­é»˜è®¤å°±æœ‰ä¸ªä¸»çº¿ç¨‹å³ main çº¿ç¨‹, æˆ‘ä»¬çš„ UI çº¿ç¨‹æŒ‡çš„å°±æ˜¯ä¸»çº¿ç¨‹, ä¸€èˆ¬éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œ UI, ä»ŽæŸä¸ªè§’åº¦æ¥è¯´, ä¸»çº¿ç¨‹å°±æ˜¯ä¸€ä¸ªå¸¸é©»çº¿ç¨‹. æˆ‘ä»¬å¼€å¯å…¶ä»–çº¿ç¨‹, ç›®çš„æ˜¯ä¸ºäº†å¼‚æ­¥å®Œæˆä¸€äº›ä»»åŠ¡, è¿™äº›ä»»åŠ¡ä¸€èˆ¬éƒ½æ¯”è¾ƒè€—æ—¶, å¦‚æžœæ”¾åœ¨ä¸»çº¿ç¨‹å½“ä¸­å®Œæˆè¿™äº›ä»»åŠ¡å°±ä¼šå¯¼è‡´ä¸»çº¿ç¨‹çš„å¡é¡¿, ç”¨æˆ·ä½“éªŒæžå…¶å·®. è¯´äº†è¿™ä¹ˆå¤š, ä¹Ÿè®¸ä½ ä¼šé—®, ä¸ºä»€ä¹ˆè¦å¸¸é©»çº¿ç¨‹å‘¢? é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œä¼šé€ æˆèµ„æº(ä¸»è¦æ˜¯å†…å­˜)çš„æµªè´¹, æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸è®©é¢‘ç¹ä½¿ç”¨çš„å­çº¿ç¨‹å¸¸é©»åœ¨å†…å­˜ä¸­, æƒ³ç”¨çš„æ—¶å€™å°±ç”¨, ä¸ç”¨çš„æ—¶å€™è®©ä»–ä¼‘çœ å‘¢?! ä¸Šé¢å·²ç»ä½¿ç”¨ RunLoop æ¥å®žçŽ°äº†è®©çº¿ç¨‹é•¿æ—¶é—´å­˜æ´»è€Œä¸è¢«é”€æ¯äº†. ç”¨ touchesBegan æ¥æ¨¡æ‹Ÿåœ¨æŒ‡å®šçº¿ç¨‹ä¸­å†æ¬¡æ‰§è¡Œä»»åŠ¡(runAnyTime)çš„æ–¹æ³•. 1234567891011- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; // æ¨¡æ‹Ÿåœ¨æŒ‡å®šçº¿ç¨‹ä¸Šé¢å†æ¬¡æ‰§è¡Œæ–¹æ³• SEL seltor = NSSelectorFromString(@&quot;runAnyTime&quot;); [self performSelector:seltor onThread:[self permanentThread] withObject:nil waitUntilDone:NO];&#125;- (void)runAnyTime &#123; NSLog(@&quot;veryitman--runAnyTime. Current Thread: %@&quot;, [NSThread currentThread]);&#125; å¯¹åº”ä¸Šé¢çš„ asyncRun å®žçŽ°å³å¯, ä½ ä¼šå‘çŽ°åœ¨å½“å‰é¡µé¢æ¯æ¬¡ç‚¹å‡»å±å¹•éƒ½ä¼šæ‰§è¡Œ runAnyTime. é™„å½•ä»£ç çš„å®Œæ•´å®žçŽ° å¸¸é©»çº¿ç¨‹, å¯ä»¥å‚è€ƒå…·ä½“çš„æ³¨é‡Š. MZCreatePermanentThreadController.m 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182@implementation MZCreatePermanentThreadController- (void)dealloc &#123; NSLog(@&quot;veryitman---MZCreatePermanentThreadController dealloc.&quot;);&#125;- (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor lightGrayColor]; self.navigationItem.title = @&quot;åˆ›å»ºå¸¸é©»çº¿ç¨‹&quot;; // å¯åŠ¨çº¿ç¨‹ [self permanentThread];&#125;- (void)viewDidDisappear:(BOOL)animated &#123; [super viewDidDisappear:animated]; // å–æ¶ˆçº¿ç¨‹ // å®žé™…ä¸šåŠ¡åœºæ™¯ä¸­è‡ªè¡Œå†³å®š canCancel çš„è®¾ç½®, è¿™é‡Œåªæ˜¯ç¤ºä¾‹ BOOL canCancel = YES; if (canCancel) &#123; [[self permanentThread] cancel]; &#125;&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; // æ¨¡æ‹Ÿåœ¨æŒ‡å®šçº¿ç¨‹ä¸Šé¢å†æ¬¡æ‰§è¡Œæ–¹æ³• SEL seltor = NSSelectorFromString(@&quot;runAnyTime&quot;); [self performSelector:seltor onThread:[self permanentThread] withObject:nil waitUntilDone:NO];&#125;- (NSThread *)permanentThread &#123; static NSThread *thread = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; thread = [[NSThread alloc] initWithTarget:self selector:@selector(asyncRun) object:nil]; [thread setName:@&quot;veryitman-thread&quot;]; // åŒä¸€ä¸ªçº¿ç¨‹è¿žç»­å¤šæ¬¡ start ä¼šå¯¼è‡´ crash [thread start]; &#125;); return thread;&#125;- (void)asyncRun &#123; @autoreleasepool &#123; NSLog(@&quot;veryitman--asyncRun. Current Thread: %@&quot;, [NSThread currentThread]); NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; // æ·»åŠ  source NSPort *port = [NSMachPort port]; [runLoop addPort:port forMode:NSRunLoopCommonModes]; NSLog(@&quot;veryitman--asyncRun. Current RunLoop: %@&quot;, runLoop); // æ‰§è¡Œå…¶ä»–é€»è¾‘ //... // æ‰‹åŠ¨å¼€å¯ RunLoop [runLoop run]; NSLog(@&quot;veryitman--asyncRun. End Run.&quot;); &#125;&#125;- (void)runAnyTime &#123; NSLog(@&quot;veryitman--runAnyTime. Current Thread: %@&quot;, [NSThread currentThread]);&#125; å‚è€ƒæ–‡æ¡£Toll-Free Bridging Run Loops]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>RunLoop å¸¸é©»çº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‘äººå‘˜éœ€å…·å¤‡ä¸€ç‚¹äº§å“èƒ½åŠ›]]></title>
    <url>%2F2018%2F04%2F17%2F%E5%8F%91%E4%BA%BA%E5%91%98%E9%9C%80%E5%85%B7%E5%A4%87%E4%B8%80%E7%82%B9%E4%BA%A7%E5%93%81%E8%83%BD%E5%8A%9B%2F</url>
    <content type="text"><![CDATA[ä¸ºäº†å¼€å§‹ä»Šå¤©çš„è¯é¢˜, æˆ‘å…ˆæ¥å€ŸåŠ©å‡ ä¸ªè§’è‰², æ¨¡æ‹Ÿä¸€ä¸‹å·¥ä½œä¸­çš„æŸäº›åœºæ™¯. è®¾ç«‹äººç‰©å° A æ˜¯ååˆšå…¥é—¨çš„æŠ€æœ¯äººå‘˜, æ¯”è¾ƒå¬è¯.å° B æ˜¯æœ‰å·¥ä½œç»éªŒçš„ä¸€åæŠ€æœ¯äººå‘˜, å¹³æ—¶å–œæ¬¢çœ‹çœ‹äº§å“ç›¸å…³çš„ä¹¦ç±, å–œæ¬¢å’Œäº§å“ç»ç†æ’•é€¼.å° C å°±åŽ‰å®³äº†, ä¸ä»…æŠ€æœ¯åŽ‰å®³, ä¹Ÿå…·æœ‰äº§å“æ€ç»´, é™¤äº†é˜…è¯»äº§å“ç±»çš„ä¹¦ç±, è¿˜å†™äº§å“ä½“éªŒæŠ¥å‘Šå’Œä½“éªŒç«žå“(å’Œå½“å‰è‡ªå·±äº§å“ç›¸å…³çš„äº§å“).å° D å°±æ˜¯ä¸€åäº§å“ç»ç†, å…·æœ‰ä¸€å®šçš„äº§å“èƒ½åŠ›, æ•°æ®åˆ†æžèƒ½åŠ›å’Œç®¡ç†èƒ½åŠ›. äººç‰©å·²ç»è®¾ç«‹å¥½äº†, çŽ°åœ¨è®©ä»–ä»¬ç™»åœº. æƒ…æ™¯å†çŽ°: éœ€æ±‚è¯„å®¡è¿™å¤©é£Žå’Œæ—¥ä¸½, å° D(äº§å“ç»ç†) é€šçŸ¥é¡¹ç›®ç»„çš„æ‰€æœ‰æˆå‘˜, åŒ…æ‹¬è®¾è®¡/å¼€å‘/è¿è¥/æµ‹è¯•ç­‰äººå‘˜æŒ‰æ—¶å‚åŠ äº§å“éœ€æ±‚è¯„å®¡ä¼šè®®. ä¸ºäº†ç¼“è§£å¤§å®¶çš„æƒ…ç»ª, å° D ä¹°äº†å¾ˆå¤šé›¶é£Ÿå’Œæ°´æžœ, ä¹Ÿç®—æ˜¯çŠ’åŠ³ä¸€ä¸‹å¤§å®¶. å° D å¼€å§‹ç»™å¤§å®¶è®²éœ€æ±‚äº†, åƒå¾€å¸¸ä¸€æ ·, æ‹¿å‡ºç²¾æ¹›çš„åŽŸåž‹, å£æ²«ç›´é£žçš„å‘å¤§å®¶å±•ç¤ºå…¶ç»µç»µä¸ç»çš„å£æ‰å’Œäº§å“æ€ç»´. å° A ä¸€ç›´åœ¨ç‚¹å¤´, ä¹Ÿä¸çŸ¥é“åˆ°åº•æœ‰æ²¡æœ‰å¬æ‡‚å° D åœ¨è¯´ä»€ä¹ˆ, åæ­£æˆ‘çœ‹åˆ°æœ‰éƒ¨åˆ†è®¾è®¡äººå‘˜å·²ç»å¼€å§‹æ‰“çžŒç¡äº†. çªç„¶, å° C ä¸­æ–­äº†æ­£åœ¨å£è¿°çš„å° D, å° D ä¸æ…Œä¸å¿™çš„åœæ­¢äº†æ‰‹ä¸­çš„ä¸€åˆ‡åŠ¨ä½œ, èšç²¾ä¼šç¥žçš„å¬å° C çš„æ„è§å’Œå»ºè®®. å° C ä¹Ÿæœ‰æ¡ä¸ç´Šçš„å°†åˆšæ‰çš„æŸé¡¹éœ€æ±‚å£è¿°äº†ä¸€é, æŒ‰ç…§å° C çš„é€»è¾‘, ç›®å‰çš„éœ€æ±‚è¿˜æ˜¯å­˜åœ¨ä¸€äº›æ¼æ´žçš„, è¿™ä¸ªæ—¶å€™, å° D å¼€å§‹è®¤çœŸçš„è·Ÿå° C å¼€å§‹äº¤æµ, ä½†æ˜¯æ²¡æœ‰é©¬ä¸Šè‚¯å®šå° C, åªæ˜¯è¯´æˆ‘æš‚æ—¶è®°ä¸‹è¿™ä¸ªç‚¹, å›žå¤´åœ¨æ€è€ƒä¸€ç•ª. äº§å“å° D ç¨³å¦‚è€ç‹—, ç»§ç»­è‡ªå·±çš„è¡¨æ¼”. äº§å“éœ€æ±‚åŸºæœ¬å·²ç»è®²å®Œäº†, çŽ°åœ¨æ˜¯å¤§å®¶æé—®é¢˜å’Œäº¤æµçš„æ—¶é—´, æˆ‘çœ‹åˆ°æœ‰äº›åŒäº‹æ‰äº†æ‰çœ¼ç›, åƒæ˜¯å¦‚æ¢¦åˆé†’èˆ¬çš„çœ‹ç€äº§å“å° D, ä¸æ˜¯æ—è¾¹çš„åŒäº‹æ‹‰ä½ Ta, ä¼°è®¡éƒ½èƒ½å†²å‡ºä¼šè®®å®¤. å° B ä¹Ÿä¸æ·¡å®šäº†, æå‡ºäº†ä¸å°‘é—®é¢˜, å¹¶ä»ŽæŠ€æœ¯çš„è§’åº¦è¯´æ˜Žäº†å®žçŽ°çš„éš¾åº¦. äº§å“ç»ç†å¬çš„ä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼, å¿ƒç†æƒ³: â€œä½ å®žçŽ°æ˜¯å¦æœ‰å›°éš¾ç®¡æˆ‘é¸Ÿäº‹?â€. å° B åœ¨äº§å“å° D é‚£é‡Œå¹¶æ²¡æœ‰å¾—åˆ°åº”æœ‰çš„è¡¨æ‰¬å’Œé¼“åŠ±, åé­åˆ°åŒäº‹å° C çš„é„™è§†, å° C è¯´, ä½ å…ˆä¸è¦å‘Šè¯‰ä»–å®žçŽ°æ–¹æ¡ˆ, å…ˆè®¨è®ºè¿™ä¸ªéœ€æ±‚çš„åœºæ™¯å’ŒçœŸä¼ªåº¦. å° D é»˜é»˜çš„å¯¹å° C æŠ•è¿‡èµžèµçš„ç›®å…‰. ç´§æŽ¥ç€æµ‹è¯•å’Œå…¶ä»–äººå‘˜æå‡ºäº†å‡ ä¸ªä¸ç—›ä¸ç—’çš„é—®é¢˜, éƒ½è¢«è€ç»ƒçš„å° D ä¸€ä¸€ç ´è§£, é‚£æ°”åŠ¿, å•§å•§! åŠ¿å¦‚ç ´ç«¹! éœ€æ±‚è¯„å®¡ä¼šè®®å°±è¿™æ ·ç»“æŸäº†. æƒ…æ™¯å†çŽ°: éœ€æ±‚å˜æ›´åœ¨äº§å“è¿›å…¥å¼€å‘å’Œè®¾è®¡é˜¶æ®µ, æŒ‰ç†è¯´éœ€æ±‚å˜æ›´ä¹Ÿç®—æ˜¯æ¯”è¾ƒæ­£å¸¸çš„ä¸€ä»¶äº‹æƒ…. è¿™å¹´å¤´, å”¯ä¸€ä¸å˜çš„å°±æ˜¯å˜åŒ–. å° B æ­£åœ¨èšç²¾ä¼šç¥žçš„å†™ä»£ç , çªç„¶å° D è·Ÿä»–è¯´, è¿™ä¸ªåœ°æ–¹çš„éœ€æ±‚éœ€è¦ä¿®æ”¹ä¸€ä¸‹, ä½ çœ‹æ”¹åŠ¨æœ‰å¤šå¤§? å° B é„™è§†çš„çœ‹ç€äº§å“ç»ç†å° D, å¿ƒç†åœ¨è¯´æ”¹åŠ¨æœ‰å¤šå¤§ä½ å¿ƒé‡Œè¿˜æ²¡æœ‰ç‚¹ Bæ•°å˜›. å° B è¿˜æ˜¯æŽ§åˆ¶äº†è‡ªå·±çš„æƒ…ç»ª, æŽ¥ç€è¯´é“, ä½ å½“åˆåº”è¯¥å¥½å¥½æ€è€ƒçš„, ä½ çœ‹æˆ‘éƒ½å¿«åšå®Œäº†, ä½ æ‰å‘Šè¯‰æˆ‘éœ€è¦æ”¹åŠ¨. å™¼é‡Œå•ªå•¦çš„è¯´å®Œ, ä¼°è®¡å° B å¿ƒç†ä¹Ÿæš—çˆ½äº†ä¸å°‘, æœ€ç»ˆè¿˜æ˜¯æŽ¥å—äº†è¿™æ¬¡çš„å˜åŠ¨. å° A è´Ÿè´£çš„æ¨¡å—, ä¹Ÿè¢«äº§å“ç»ç†ä¿®æ”¹è¿‡, Ta å’Œäº§å“ç»ç†å° D çš„äº¤æµåŸºæœ¬æ˜¯, å“¦, æ©, å¥½, å¯ä»¥! å½“å° C æ‰¾åˆ°å° D çš„æ—¶å€™, å¹¶æ²¡æœ‰ç›´æŽ¥å‘Šè¯‰å° D éœ€è¦æ”¹ä¸œæ”¹è¥¿, è€Œæ˜¯é—®é—®å° D, ä½ çœ‹è¿™æ ·ä¼šä¸ä¼šæ›´å¥½ä¸€äº›? å° C å½“ç„¶æ˜Žç™½å° D çš„ç›®çš„äº†, äºŽæ˜¯æ‹¿å‡ºè‡ªå·±çœ‹è¿‡çš„ç«žå“, å¹¶è¯´å‡ºäº†è‡ªå·±çš„æ„è§, æ„‰å¿«çš„å’Œå° D äº¤æµåŽ, å±…ç„¶ TMD çš„ç äº†ä¸€ä¸ªéœ€æ±‚. è¿™è®©æ—è¾¹çš„å° A å’Œå° B ç¾¡æ…•ä¸å·². æ€»ç»“ä¸Šé¢çš„ä¸¤ç§æƒ…æ™¯, æˆ‘ç›¸ä¿¡åšè¿‡å¼€å‘çš„åŒäº‹åº”è¯¥éƒ½æ·±æœ‰ä½“ä¼š, ä½†æ˜¯åƒä¸‡ä¸è¦å¯¹å·å…¥åº§, æˆ‘åªæ˜¯æ‰“ä¸ªæ¯”æ–¹. ä»Žä¸Šé¢çœ‹å‡º, å° C æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„è§’è‰², æ— è®ºæ˜¯æ€ç»´è¿˜æ˜¯æ²Ÿé€šèƒ½åŠ›éƒ½æœ‰åˆ«ä¸Žä»–äºº, æœ€é‡è¦çš„æ˜¯ä»–æ²¡æœ‰ä»…ä»…æŠŠè‡ªå·±å½“åšä¸€åå¼€å‘äººå‘˜, è€Œæ˜¯ç«™åœ¨äº§å“çš„è§’åº¦åŽ»æ€è€ƒé—®é¢˜å’Œè§£å†³é—®é¢˜. éœ€æ±‚å˜æ›´æ˜¯å¸¸æ€, ä½œä¸ºå¼€å‘äººå‘˜, è¦æœ€å¤§é™åº¦çš„ç»™äº§å“ä»¥æ”¯æŒ. äº§å“ç»ç†ä¹Ÿæ˜¯äºº, å½“ç„¶æœ‰è€ƒè™‘ä¸å‘¨çš„åœ°æ–¹, å¦‚æžœä½ ä¸èƒ½æƒ³å‡ºæ›´å¥½æ›´å®Œç¾Žçš„è§£å†³æ–¹æ¡ˆ, è¯·æ”¯æŒä»–çš„å†³å®š. å¤šç«™åœ¨åˆ«äººçš„è§’åº¦åŽ»æ€è€ƒé—®é¢˜, æ¢ä½æ€è€ƒ, æ‰èƒ½ä¿è¯æœ‰æ•ˆçš„æ²Ÿé€š. ä½œä¸ºä¸€åæŠ€æœ¯äººå‘˜, å°¤å…¶æ˜¯åœ¨äº’è”ç½‘è¡Œä¸š, å¤šå¤šå°‘å°‘éƒ½åº”è¯¥éœ€è¦å…·å¤‡ä¸€å®šçš„äº§å“æ€ç»´.]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯ ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸è®© SIGPIPE signal å¤ªåš£å¼ ]]></title>
    <url>%2F2018%2F04%2F15%2F%E4%B8%8D%E8%AE%A9-SIGPIPE-signal-%E5%A4%AA%E5%9A%A3%E5%BC%A0%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ èµ·å› ç”±äºŽé¡¹ç›®è¿­ä»£æ¯”è¾ƒå¿«, å¤§å®¶è¿˜æ²¡æœ‰æ¥å¾—åŠåšè‡ªæˆ‘è°ƒæ•´å’Œæ€»ç»“, å°±éœ€è¦æŠ•å…¥åˆ°æ–°ç‰ˆæœ¬å½“ä¸­å¼€å‘æ–°åŠŸèƒ½äº†. åœ¨æœ€è¿‘çš„ä¸€æ¬¡ç‰ˆæœ¬æµ‹è¯•å’Œä½“éªŒè¿‡ç¨‹ä¸­, å¾ˆå¤šå†…æµ‹ç”¨æˆ·åé¦ˆè¿›å…¥æˆ–è€…é€€å‡º App çš„èŠå¤©å®¤, ä¼šèŽ«åå…¶å¦™çš„å´©æºƒæŽ‰(Crash).å¯¹äºŽ Crash çš„é—®é¢˜, æˆ‘ä»¬å¼€å‘åŒäº‹ç»å¯¹æ˜¯é›¶å®¹å¿, äºŽæ˜¯å°±å¼€å§‹è·Ÿè¸ªé—®é¢˜. è·Ÿè¸ªäº†å¾ˆä¹…, å‘çŽ°è¿™ä¸ª Crash å¹¶ä¸æ˜¯é‚£ä¹ˆçš„ â€˜ä¹–å·§â€™, å¾ˆéš¾å¤çŽ°!æ—¢ç„¶ç”¨æˆ·å·²ç»åé¦ˆäº†å¹¶ä¸”åŽå°ä¹Ÿæœ‰ Crash ä¸ŠæŠ¥, è¿™ä¸ªé—®é¢˜è‚¯å®šå­˜åœ¨, æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½æ”¾å¼ƒ. å¥½å§, ç»§ç»­åŠ ç­æžâ€¦è‹¦é€¼ä¸­â€¦ æœ€ç»ˆ, æˆ‘ä»¬å‘çŽ°ä¸€ä¸ªè§„å¾‹, åœ¨æ—¥å¿—åŽå°, çœ‹åˆ°å¾ˆå¤šç±»ä¼¼ä¸‹é¢çš„æ—¥å¿—: 1Signal 13 was raised. SIGPIPE (_mh_execute_header + 420728) å¾ˆé—æ†¾çš„æ˜¯, å †æ ˆä¿¡æ¯ä¸­æ²¡æœ‰æä¾›ç»™æˆ‘ä»¬æ›´æœ‰åŠ›çš„è¯æ®, æ‰€ä»¥å½“æ—¶å®šä½åœ¨ Signal 13 è¿™ä¸ªç‚¹ä¸Šé¢. ä¹Ÿç®—æ˜¯æœ‰äº†çªç ´â€¦è¿™ç­æ²¡æœ‰ç™½åŠ â€¦ æŽ’æŸ¥é—®é¢˜æ—¢ç„¶æ‰€æœ‰çš„ç½ªè¯éƒ½æŒ‡å‘äº† Signal 13, æˆ‘ä»¬å°±éœ€è¦åŽ»è·Ÿè¸ªå®ƒ, åŽ»è°ƒæŸ¥å®ƒ, åŽ»ç ”ç©¶å®ƒ. åœ¨ signal.h æ–‡ä»¶ä¸­, å¯ä»¥å‘çŽ°å…¶å®šä¹‰å¦‚ä¸‹: 12/* write on a pipe with no one to read it */#define SIGPIPE 13 ç”¨é€šä¿—çš„è¯æ¥è®², å°±æ˜¯ç®¡é“ç ´è£‚. ç®¡é“ç ´è£‚ï¼Œè¿™ä¸ªä¿¡å·é€šå¸¸åœ¨è¿›ç¨‹é—´é€šä¿¡äº§ç”Ÿï¼Œæ¯”å¦‚é‡‡ç”¨ FIFO(ç®¡é“)é€šä¿¡çš„ä¸¤ä¸ªè¿›ç¨‹ï¼Œè¯»ç®¡é“æ²¡æ‰“å¼€æˆ–è€…æ„å¤–ç»ˆæ­¢å°±å¾€ç®¡é“å†™ï¼Œå†™è¿›ç¨‹ä¼šæ”¶åˆ° SIGPIPE ä¿¡å·.æ­¤å¤–ç”¨ Socket é€šä¿¡çš„ä¸¤ä¸ªè¿›ç¨‹ï¼Œå†™è¿›ç¨‹åœ¨å†™ Socket çš„æ—¶å€™ï¼Œè¯»è¿›ç¨‹å·²ç»ç»ˆæ­¢.å¦å¤–, åœ¨ send/write æ—¶ä¼šå¼•èµ·ç®¡é“ç ´è£‚ï¼Œå…³é—­ Socket, ç®¡é“æ—¶ä¹Ÿä¼šå‡ºçŽ°ç®¡é“ç ´è£‚.ä½¿ç”¨ Socket ä¸€èˆ¬éƒ½ä¼šæ”¶åˆ°è¿™ä¸ª SIGPIPE ä¿¡å·. ä¹Ÿå°±æ˜¯è¯´, è¯¥ä¿¡å·æ˜¯è·Ÿ Socket çš„è¿žæŽ¥ä»¥åŠæ•°æ®çš„è¯»å†™ç›¸å…³è”çš„. è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±çŸ¥é“ä¸ºä»€ä¹ˆè¿›é€€æˆ¿é—´å¯¼è‡´ Crash äº†ï¼Œæˆ‘ä»¬çš„è¿›é€€æˆ¿é—´éƒ½å’Œ Socket æœ‰å…³è”ï¼Œè¿™ç§ Crash å¤§éƒ½æ•°æ˜¯åœ¨ç”¨æˆ·ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹å‘ç”Ÿçš„. è§£å†³é—®é¢˜ç±»ä¼¼ signal 13 è¿™ç§é”™è¯¯æ˜¯ç³»ç»Ÿå‘å‡ºæ¥çš„, å’Œå†…å­˜ä½¿ç”¨å¼‚å¸¸å’Œé‡ŽæŒ‡é’ˆä¸€æ ·ï¼Œç”±äºŽæ˜¯ç³»ç»Ÿçº§åˆ«å´©æºƒï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ 123456@try &#123;&#125;@catch(NSException *exception) &#123;&#125; æ•èŽ·åˆ°è¿™ç±»å¼‚å¸¸. å› æ­¤, try catch æ˜¯æ— æ³•è§£å†³é—®é¢˜çš„. ç›®å‰æœ‰ä¸¤ä¸ªæ–¹æ¡ˆå¯ç”¨: æ–¹æ¡ˆ1. å¿½ç•¥è¿™ç±»ä¿¡å·. æ–¹æ¡ˆ2. ä¿®æ”¹æºç , åœ¨ IM ä»£ç é‡Œé¢ä¿®æ”¹. å› ä¸º, IMSDK æˆ‘ä»¬æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„, æ‰€ä»¥æ— æ³•æ›´æ”¹å…¶æºç , æ‰€ä»¥é‡‡å–äº†æ–¹æ¡ˆ1: å¿½ç•¥è¿™ç±»ä¿¡å·. å¿½ç•¥çš„æ–¹æ¡ˆå¾ˆç®€å•, åœ¨ä½ è¿žæŽ¥æˆ–è€…åˆå§‹åŒ– IMSDK ä¹‹å‰, åªéœ€è¦ä¸€è¡Œä»£ç : 1signal(SIGPIPE, SIG_IGN); ç¤ºä¾‹ä»£ç : 12345678- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // ... signal(SIGPIPE, SIG_IGN); // ...&#125; å¯¹äºŽ æ–¹æ¡ˆ2, æˆ‘æŸ¥é˜…äº†ä¸€ä¸‹ CocoaAsyncSocket çš„æºç : 1234// Prevent SIGPIPE signals int nosigpipe = 1;setsockopt(socketFD, SOL_SOCKET, SO_NOSIGPIPE, &amp;nosigpipe, sizeof(nosigpipe)); æ‰€ä»¥å¯¹äºŽ æ–¹æ¡ˆ2, å°±æ˜¯å¢žåŠ ä¸Šé¢çš„ä»£ç å³å¯, å³è®¾ç½® Socket ä¸å‘é€ SIGPIPE ä¿¡å·. å¯¹äºŽä¸Šé¢çš„ä¸¤ç§æ–¹æ¡ˆ, è‹¹æžœå¼€å‘è€…æ–‡æ¡£ Avoiding Common Networking Mistakes éƒ½æœ‰æåŠ. é—®é¢˜å¤çŽ°æ—¢ç„¶è¿™ä¸ªé—®é¢˜å¾ˆéš¾å¤çŽ°, æˆ‘ä»¬å°±æƒ³åŠžæ³•è®©ä»–å¾ˆå®¹æ˜“å¤çŽ°. å¯ä»¥é‡‡ç”¨æ‰‹åŠ¨å‘é€ signal çš„æ–¹å¼, æ¥å¤çŽ°è¿™ä¸ªé—®é¢˜. å…ˆçœ‹ä¸€ä¸‹ kill(3) - Linux man page å‡½æ•°: The kill() function shall send a signal to a process or a group of processes specified by pid. The signal to be sent is specified by sig and is either one from the list given in or 0. If sig is 0 (the null signal), error checking is performed but no signal is actually sent. The null signal can be used to check the validity of pid. kill å‡½æ•°æ˜¯å¯ç§»æ¤æ“ä½œç³»ç»ŸæŽ¥å£ POSIX(Portable Operating System Interface of UNIX) å®šä¹‰çš„, å¯ä»¥å‚è€ƒ ç»´åŸºç™¾ç§‘. ç¤ºä¾‹ä»£ç : 12345678910111213141516171819202122- (void)viewDidLoad&#123; [super viewDidLoad]; //èŽ·å–è¿›ç¨‹ id pid_t cur_pid = getpid(); printf("current process's id: %i\n", cur_pid); //å»¶æ—¶10s ä¸ºäº†è®© Bugtags æœ‰æ—¶é—´ä¸ŠæŠ¥æ—¥å¿—. dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(10 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; wpcSendSignal(cur_pid); &#125;);&#125;///æ‰‹åŠ¨å‘é€ä¿¡å·int wpcSendSignal(int pid)&#123; int ret = kill(pid, SIGPIPE); return ret;&#125; æˆ‘ä»¬å°† signal(SIGPIPE, SIG_IGN) ä»£ç å…ˆæ³¨é‡Š. è¿è¡Œ APP åˆ°æ‰‹æœº, ç„¶åŽé€€å‡º Xcode çš„è¿žæŽ¥. æ³¨æ„: è¿™é‡Œå¦‚æžœè¿žæŽ¥ Xcode, ä¸ä¼šç›´æŽ¥ Crash, æ‰€ä»¥éœ€è¦æ–­å¼€æ‰‹æœºä¸Ž Xcode çš„è¿žæŽ¥. åœ¨åŽå°å¯ä»¥çœ‹åˆ°ç±»ä¼¼çš„ Crash æ—¥å¿—: é™¤äº†ä¸Šé¢ä½¿ç”¨ kill å‡½æ•°å¤–, æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ raise å‡½æ•°æ¥å‘é€ signal. å…³äºŽ raise å‡½æ•°, å¯ä»¥æŸ¥é˜… æ‰‹å†Œ. æˆ–è€…ç›´æŽ¥é—®ç”·äºº(man): 1man raise é—®é¢˜å†æ¬¡æ¥ä¸´: ä¸Ž Bugtags çš„ç»“åˆæœ¬ä»¥ä¸ºé‡‡ç”¨ä¸Šè¿°æ–¹æ¡ˆå°±ä¸‡äº‹å¤§å‰äº†, åœ¨ç¬¬äºŒæ¬¡ææµ‹åŽ, è¿˜æ˜¯æœ‰è¿™ç§ Crash çš„é—®é¢˜åœ¨åŽå°ä¸ŠæŠ¥. æŽ’æŸ¥äº†å¾ˆä¹…åŽæ‰å‘çŽ°ï¼Œé—®é¢˜çš„åŽŸå› æ˜¯ BugTags ä¹Ÿä¼šæŽ§åˆ¶è¿™ä¸ªå¼€å¤´ï¼Œé»˜è®¤æ˜¯ä¸å¿½ç•¥ï¼Œè¿™æ ·ï¼š 1234/** * æ˜¯å¦å¿½ç•¥ PIPE Signal (SIGPIPE) é—ªé€€ï¼Œé»˜è®¤ NO */@property(nonatomic, assign) BOOL ignorePIPESignalCrash; è¿™ä¸ªé»˜è®¤è®¾ç½®ä¸º NO, å³å¯ä»¥ä¸ŠæŠ¥ PIPE Signal Crash çš„é—®é¢˜. è¿™é‡Œä¹Ÿè¯´æ˜Žä¸€ä¸ªé—®é¢˜, å³ä½¿æˆ‘ä»¬é‡‡ç”¨ æ–¹æ¡ˆ1 è§£å†³ Crash çš„é—®é¢˜äº†, Bugtags è¿˜æ˜¯ä¼šå°†è¿™ç§ Crash ä¸ŠæŠ¥åˆ°åŽå°. ç¤ºä¾‹ä»£ç : 12345bugtag.option.ignorePIPESignalCrash = YES;// ...signal(SIGPIPE, SIG_IGN); å¯¹æ¯”ä¸€ä¸‹æµ‹è¯•çš„ä¸¤å¼ å›¾, ç¬¬ä¸€å¼ å›¾åˆ°ç¬¬äºŒå¼ å›¾æ˜¯å¢žåŠ äº†ä¸¤æ¬¡å´©æºƒæ¬¡æ•°, åŽŸå› æ˜¯æ•…æ„è®¾ç½®äº† bugtag.option.ignorePIPESignalCrash = NO, ä¹Ÿæ­£å¥½éªŒè¯äº†æˆ‘ä»¬çš„æƒ³æ³•. æ€»ç»“ Xcode è¿žæŽ¥çœŸæœºæˆ–è€…æ¨¡æ‹Ÿå™¨, è¿è¡Œå‡ºçŽ°å¼‚å¸¸æ–­ç‚¹, å¯èƒ½å°±æ˜¯éšæ‚£ç‚¹. å­¦ä¼šä½¿ç”¨åŽå°æ—¥å¿—æ‰¾åˆ°è§„å¾‹, ç»§è€ŒåŽ»æ€è€ƒå¹¶è§£å†³é—®é¢˜. å¯¹ Crash è¿›è¡Œæ›´æ·±å…¥çš„åˆ†æžå’Œæ€»ç»“, ä¸è¦è½»æ˜“æ”¾å¼ƒ. åŽç»­ç ”ç©¶ æ˜¯å¦å¯ä»¥å¿½ç•¥å…¶ä»–çš„ signal, æ¥é¿å…ä¸å¿…è¦çš„ Crash? è‡ªå®šä¹‰ä¸€å¥—å…³äºŽ signal æ•èŽ·çš„è·¨å¹³å°åº“, åœ¨å¼€å‘é˜¶æ®µå¯ä»¥ç›´æŽ¥çœ‹åˆ°å®Œæ•´çš„æ—¥å¿—. æŽ¨è Avoiding Common Networking Mistakes linux die Using Sockets and Socket Streams æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Crash linux signal SIGPIPE</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿™æ ·å­¦ä¹ ä½ æ„¿æ„å—?]]></title>
    <url>%2F2018%2F04%2F07%2F%E8%BF%99%E6%A0%B7%E5%AD%A6%E4%B9%A0%E4%BD%A0%E6%84%BF%E6%84%8F%E5%90%97%2F</url>
    <content type="text"><![CDATA[ä¸å¾—ä¸æ‰¿è®¤, å­¦ä¹ ç¡®å®žæ˜¯ä¸ªã€Œè‹¦å·®äº‹ã€, è¿™é‡Œè¯´çš„å­¦ä¹ ä¸ä»…ä»…æŒ‡ä¼æ¡ˆå­¦ä¹ , ä¹‹ä¹Žè€…ä¹Ÿç­‰, è€Œæ˜¯ä¸€ç§å¹¿æ³›çš„å­¦ä¹ . å¦‚ä½•å­¦ä¹ æ˜¯å§‹ç»ˆè¦åŽ»æŽ¢è®¨çš„ä¸€ä¸ªè¯é¢˜, æ—¶ä»£åœ¨å˜, çŽ¯å¢ƒåœ¨å˜, å­¦ä¹ å½“ç„¶ä¹Ÿä¸èƒ½ä¸€æˆä¸å˜. åšæŒå­¦ä¹ æ˜¯ä¸€è¾ˆå­çš„äº‹, æ´»åˆ°è€å­¦åˆ°è€. æ—¢ç„¶å­¦ä¹ æ˜¯ä¸€ä¸ªæ¼«é•¿çš„é©¬æ‹‰æ¾, é‚£æˆ‘ä»¬åªæœ‰æŒä¹‹ä»¥æ’çš„â€™è·‘â€™ä¸‹åŽ», æ‰èƒ½ä¿æŒä¸æŽ‰é˜Ÿ. è¿™æ ·ä¸€æ¥, å­¦ä¹ æ–¹æ³•å’Œå­¦ä¹ æŠ€å·§å°±æ˜¯å–èƒœçš„å…³é”®äº†. ä¸–ä¸Šæ²¡æœ‰ç»å¯¹çš„å­¦ä¹ å¦™æ‹›å’Œå­¦ä¹ å®å…¸, æ‰¾åˆ°é€‚åˆè‡ªå·±çš„å°±æ˜¯æœ€å¥½çš„. ä¸‹é¢æˆ‘ç»“åˆè‡ªå·±çš„ä¸€äº›ç»åŽ†ç»™å¤§å®¶åˆ†äº«åœ¨å­¦ä¹ çš„é“è·¯ä¸Šé‡åˆ°çš„é‚£äº›äº‹. ä¸ç®¡æ€Žæ ·, å­¦ä¹ ä¸€å®šè¦å¸¦ç€ç›®æ ‡, ç»“åˆç†è®ºå†åŽ»å®žè·µ, äº‹åŠåŠŸå€. æ¬¢è¿Žå¤§å®¶åœ¨è¯„è®ºåŒºäº¤æµ, ä¸å–œå‹¿å–·~ å›žå¿†å½“å¤©äº‹æ¯æ™šèººåœ¨åºŠä¸Šæˆ–è€…æ²™å‘ä¸Š, å‘å‘å‘†, æŠŠå½“å¤©åšè¿‡çš„äº‹æƒ…, åœ¨è„‘æµ·ä¸­ç»Ÿç»Ÿçš„è¿‡ä¸€é, åƒæ”¾ç”µå½±ä¸€æ ·, èƒ½æœ‰å¤šè¯¦ç»†å°±å¤šè¯¦ç»†, ä¹Ÿå°±æ˜¯è¯´å°½é‡çš„å›žå¿†ç»†èŠ‚. è¿™ç§åšæ³•çœ‹ä¼¼å¾ˆç®€å•, å…¶å®žå¾ˆéš¾åšæŒä¸‹åŽ». ç‰¹åˆ«æ˜¯ä¸­é—´å‡ å¤©, å¾ˆå¤šäººéƒ½ä¼šæ”¾å¼ƒ, å†åŠ ä¸ŠçŽ°åœ¨æ‰‹æœºäº’è”ç½‘çš„ â€œæ¯’å®³â€, ç•™ç»™è‡ªå·±åŽ»çœŸæ­£å­¦ä¹ çš„æ—¶é—´æ›´å°‘äº†. ä½†æ˜¯åªè¦ä½ å’¬å’¬ç‰™åšæŒä¸€ä¸‹, æŠŠè¿™ä¸ªä¹ æƒ¯å…»æˆ, å°±ä¼šç»ˆç”Ÿå—ç”¨. æˆ‘åœ¨åˆä¸­æ—¶æœŸå·²ç»å…»æˆäº†è¿™ä¸ªä¹ æƒ¯, ç›´åˆ°å¤§å­¦éƒ½æ²¡æœ‰æ”¾å¼ƒ. å¤§å­¦é‡Œé¢æ¯æ¬¡æœŸæœ«è€ƒè¯•, çœ‹åˆ°å¾ˆå¤šäººå¿™çš„ä¸å¯å¼€äº¤, æˆ‘éƒ½æ˜¯ä¸æ…Œä¸å¿™çš„, æ‚ é—²è‡ªå¾—, å®¤å‹é—®æˆ‘æ€Žä¹ˆåšåˆ°æ¸¸åˆƒæœ‰ä½™, æˆ‘è¯´ä½ ç™½å¤©å°‘ç¡ç‚¹è§‰, å¹³æ—¶æ³¨æ„å¬è®², æ™šä¸Šå›žå¿†ä¸€ä¸‹å°±å¯ä»¥äº†, ä»Žä»–è¿·èŒ«çš„çœ¼ç¥žä¸­å¯ä»¥çœ‹å‡º, ä»–å½“æ—¶å¹¶ä¸å®Œå…¨ç›¸ä¿¡æˆ‘è¯´çš„! æ¯æ¬¡å›žå¿†ç»“æŸ, æœ‰äº›ä¸œè¥¿è¿˜æ˜¯æ¯”è¾ƒæ¨¡ç³Šç”šè‡³ä¸€çŸ¥åŠè§£, æ²¡äº‹, ä½ ç¬¬äºŒå¤©åŽ»ç¿»é˜…ç›¸å…³çŸ¥è¯†å†åŽ»æ•´ç†å’Œç†è§£ä¸€ä¸‹å°±å¥½äº†, è¿™ç§è‡ªæˆ‘æ¿€åŠ±æ¯”ä»»ä½•éž­ç­–éƒ½æœ‰ç”¨. æœ‰äº›å›°éš¾åªæ˜¯æš‚æ—¶çš„, æƒ³åŠžæ³• â€˜æŒºâ€™ è¿‡åŽ», ä½ å°±èµ¢äº†. å¾ˆå¤šæ—¶å€™ä¸æ˜¯å›°éš¾å“åˆ°äº†æˆ‘ä»¬, è€Œæ˜¯æˆ‘ä»¬æ”¾å¼ƒäº†è‡ªå·±. å¤šæƒ³å¤šé—®å’Œä½ èº«è¾¹å…´è¶£ç›¸æŠ•æˆ–è€…æ¯”ä½ æœ‰èƒ½åŠ›çš„äººå¤šäº¤æµ, äº¤æµçš„è¿‡ç¨‹ä¹Ÿæ˜¯ä½ ç»ƒä¹ è‡ªæˆ‘è¡¨è¾¾èƒ½åŠ›çš„è¿‡ç¨‹, æŠŠè‡ªå·±çš„é—®é¢˜èƒ½å¤Ÿæ¸…æ¥šçš„æè¿°ç»™åˆ«äººå¬, ä¹Ÿæ˜¯ä¸€ç§èƒ½åŠ›. ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰è¿™æ ·ä¸€ç§æ„Ÿè§‰, åœ¨è·Ÿåˆ«äººäº¤æµçš„è¿‡ç¨‹ä¸­, è™½ç„¶åˆ«äººæ²¡æœ‰ç›´æŽ¥å¸®ä½ è§£å†³é—®é¢˜, ä½†æ˜¯ä½ çªç„¶æœ‰äº†è§£å†³é—®é¢˜çš„åŠžæ³•. ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢? å¾ˆç®€å•, å› ä¸ºè¿™ä¸ªé—®é¢˜ä½ ä¹‹å‰æ€è€ƒè¿‡, åªæ˜¯åœ¨äº¤æµçš„è¿‡ç¨‹ä¸­, ä½ çš„å¤§è„‘ä¸“æ³¨åœ¨æ­¤, èšç²¾ä¼šç¥žçš„åœ¨æƒ³è¿™ä»¶äº‹æƒ…. é—®é—®é¢˜æœ‰ä¸€å¥—é—¨é“. åœ¨è¯·æ•™åˆ«äººé—®é¢˜ä¹‹å‰, æœ€å¥½è‡ªå·±å…ˆå°½åŠ›æƒ³ä¸€æƒ³, ä¸è¦é‡åˆ°ä¸€ç‚¹é—®é¢˜å°±åŽ»é—®ä¸œé—®è¥¿, å³ä½¿åˆ«äººç»™ä½ è®²äº†, ä½ ä¹Ÿåªæ˜¯å½“æ—¶æ˜Žç™½äº†, ä¸‹æ¬¡å†é‡åˆ°æ­¤ç±»é—®é¢˜, ä½ ä¾ç„¶æ‡µé€¼. è¿˜æœ‰å°±æ˜¯ä¼šè®©ä½ å½¢æˆä¸€ç§ä¾èµ–å¿ƒç†, åæ­£æœ‰äººèƒ½è§£å†³, æˆ‘é—®å°±å¯ä»¥äº†, å¹²å˜›è¿˜æœ‰è´¹æ—¶è´¹åŠ›çš„åŽ»æƒ³?! ä¹…è€Œä¹…ä¹‹, å°±ç ´ç½å­ç ´æ‘”äº†. å¦å¤–ä¸€ä¸ªè¦è¯´çš„å°±æ˜¯åœ¨è¯·æ•™æˆ–è€…äº¤æµé—®é¢˜çš„æ—¶å€™, è¦å¯¹å¯¹æ–¹è°¦è™š. æˆ‘å¾ˆæ„Ÿæ¿€é«˜ä¸­æ—¶ä»£, ç­ä¸»ä»»å¾ˆä¿¡ä»»æˆ‘, è®©æˆ‘å½“äº†ä¸‰å¹´ç­é•¿, é‚£ä¸‰å¹´è®©æˆ‘å­¦åˆ°äº†å¾ˆå¤šä¹¦æœ¬ä¹‹å¤–çš„ä¸œè¥¿, å…¶ä¸­æ²Ÿé€šå’Œç®¡ç†è®©æˆ‘åœ¨ä»ŠåŽçš„å·¥ä½œä¸­å—ç›ŠåŒªæµ…. é˜…è¯»å’Œå†™ä½œ è¿™é‡Œè¯´çš„å†™ä½œä¸æ˜¯æŒ‡ä¸“ä¸šçš„ä½œå®¶çº§çš„å†™ä½œ, æ³›æŒ‡ä»»ä½•æ–‡å­—çš„è®°å½•, æ—¥è®°ä¹Ÿç®—. æ¯å¤©æœ€å¹¸ç¦çš„æ—¶åˆ»å°±æ˜¯åœ¨ 23:00 ç‚¹ä¹‹å‰ååœ¨ç”µè„‘å‰, å¯ä»¥å†™è‡ªå·±å¿ƒä¸­è¦è¡¨è¾¾çš„å†…å®¹, ä»»æ€ç»ªé£˜æ‘‡. åªè¦æœ‰é—²æš‡çš„æ—¶é—´, æˆ‘å°±ä¼šæ•´ç†å’Œæ€»ç»“è¿™æ®µæ—¶é—´å‘ç”Ÿçš„äº‹æƒ…, æ—¢æœ‰å·¥ä½œä¸Šçš„ä¹Ÿæœ‰ç”Ÿæ´»ä¸Šçš„. å°çš„æ—¶å€™, å®¶é‡Œæ¯”è¾ƒç©·, äº¤å­¦è´¹éƒ½æ˜¯é—®é¢˜, æ›´åˆ«è¯´æ˜¯ä¹°ä¹¦äº†. æˆ‘è®°å¾—åˆä¸­ä¸€å¹´çº§, æˆ‘å¾ˆæƒ³è¦ä¸€æœ¬è‹±è¯­ä¹¦ç±, é‚£ç§æ¸´æœ›è‡³ä»Šéš¾å¿˜! åŽæ¥, æˆ‘æ¯å¤©ä»Žè‡ªå·±çš„ç”Ÿæ´»è´¹é‡ŒæŠ å‡ºä¸€ç‚¹é’±(ç”Ÿæ´»è´¹æœ¬æ¥å°±å°‘), å°±è¿™æ ·ç§¯æ”’äº†å‡ ä¸ªæ˜ŸæœŸ, åŽ»æ–°åŽä¹¦åº—ä¹°äº†ä¸€æœ¬è‹±è¯­ä¹¦ç±. é«˜ä¸­æ—¶æœŸ, æœ‰åŒå­¦ä¸è¦çš„æˆ–è€…å·²ç»ä¸è¯»çš„ä¹¦ç±, æˆ‘éƒ½ä¼šå€Ÿè¿‡æ¥çœ‹, æ²‰æµ¸åœ¨è‡ªå·±çš„å¹¸ç¦å½“ä¸­. å‚åŠ å·¥ä½œä¹‹åŽ, æˆ‘ä¹Ÿæœ‰å†™åšå®¢çš„ä¹ æƒ¯, æŠŠè‡ªå·±å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³é—®é¢˜çš„æ€è·¯å’Œæ–¹å¼å†™å‡ºæ¥, åˆ†äº«ç»™å…¶ä»–äºº, å¿«ä¹æ— æ¯”. ç‰¹åˆ«æ˜¯æ”¶åˆ°æ–‡ç« çš„è¯„è®ºåŽ, å¿ƒç†ç¾Žæ»‹æ»‹çš„. åœ¨äº’è”ç½‘çš„æµ·æ´‹é‡Œ, å¤§å®¶ç´ ä¸ç›¸è¯†, é€šè¿‡é”®ç›˜ä¸Šæ•²å‡»çš„æ–‡å­—äº’ç›¸äº¤æµçŸ¥è¯†å’Œæƒ³æ³•, å½¼æ­¤æˆé•¿ç€, ä¹Ÿåˆ«å…·ä¸€ç•ªä¹è¶£. é˜…è¯»å’Œå†™ä½œå¯ä»¥åŸ¹å…»è‡ªå·±çš„ä¸“æ³¨åŠ›, è¿™ä¹ˆå¥½çš„ä¹ æƒ¯ä½ åƒä¸‡ä¸è¦æ‹’ç». å†™ä½œå¯ä»¥å€’é€¼ç€ä½ åŽ»é˜…è¯», åŽ»å…³å¿ƒç”Ÿæ´»é‡Œé¢çš„ç‚¹æ»´, é˜…è¯»å’Œç”Ÿæ´»ä¸­çš„ä½“éªŒåˆå¯ä»¥æ¿€å‘ä½ å†™ä½œçš„æ¬²æœ›, ä¸¤è€…ç›¸è¾…ç›¸æˆ. æŽ¨èç»™å¤§å®¶ä¸€æœ¬ä¹¦: Google å·¥ä½œæ•´ç†æœ¯ è°·æ­Œå‰CIOï¼ˆé¦–å¸­ä¿¡æ¯å®˜ï¼‰åˆ†äº«é£Žé¡è°·æ­Œçš„ä¿¡æ¯æ•´ç†æœ¯ï¼Œå¸®åŠ©çŽ°ä»£äººå½»åº•å‘Šåˆ«æ— åºå·¥ä½œï¼Œå­¦ä¼šåˆ©ç”¨æ•°å­—å·¥å…·ä¸ºå¤§è„‘å‡åŽ‹ï¼ä¿¡æ¯å¤ªå¤šã€æ—¶é—´å¤ªå°‘ï¼Œæ•´ç†ä¿¡æ¯å·²æˆä¸ºçŽ°ä»£äººæ€¥éœ€æŽŒæ¡çš„å¿…å¤‡æŠ€èƒ½ã€‚è°·æ­Œä½œä¸ºå¼•é¢†å…¨çƒçš„ä¿¡æ¯æœç´¢ä¸Žæ•´åˆå·¨å¤´ï¼Œæ‹¥æœ‰èƒ½å¤Ÿæœ‰åºæ•´ç†ä¿¡æ¯çš„ç‹¬ç‰¹æ–¹å¼ï¼Œè€Œè°·æ­Œé¦–å¸­ä¿¡æ¯å®˜ä¾¿æ˜¯ä¸»å¯¼è¿™ä¸€â€œä¿¡æ¯å·¥åŽ‚â€çš„æ€»å·¥ç¨‹å¸ˆã€‚å¦‚ä»Šï¼Œæ›¾æ‹…ä»»â€œæ€»å·¥ç¨‹å¸ˆâ€çš„é“æ ¼æ‹‰æ–¯æ¢…é‡Œå°”äº²è‡ªå°†é£Žé¡è°·æ­Œçš„ä¿¡æ¯æ•´ç†æ–¹å¼åˆ†äº«ç»™å¤§ä¼—è¯»è€…ï¼Œå¸®åŠ©çŽ°ä»£äººå…‹æœæ— åºå·¥ä½œçš„é€šç—…ã€‚ã€ŠGoogleå·¥ä½œæ•´ç†æœ¯ã€‹å‘Šè¯‰ä½ ï¼šä¸è¦èŠ±å¤ªå¤šæ—¶é—´ç»™ä¿¡æ¯å½’æ¡£ï¼Œç”¨çš„æ—¶å€™å­¦ä¼šåŽ»æœç´¢ï¼›åœ¨æ•°å­—ä¿¡æ¯æ–‡æ¡£ä¸­åŠ ä¸Šå…³é”®è¯ï¼Œæ–¹ä¾¿æ—¥åŽæ£€ç´¢ï¼›ä»Žå‰ï¼ŒçŸ¥è¯†å°±æ˜¯åŠ›é‡,çŽ°åœ¨ï¼Œå…±äº«çŸ¥è¯†æ‰æ˜¯åŠ›é‡ï¼›æŠŠå·¥ä½œå’Œç”Ÿæ´»èžä¸ºä¸€ä½“ï¼Œè€Œä¸æ˜¯åŠ›å›¾åœ¨äºŒè€…ä¹‹é—´æ±‚å¹³è¡¡ã€‚è¿™äº›å®žç”¨ Tips éƒ½æ­ç¤ºäº†ï¼šä¿¡æ¯æ•´ç†æ‰æ˜¯é«˜æ•ˆå·¥ä½œçš„å…³é”®ï¼Œä¿¡æ¯æ•´ç†å·²æ˜¯çŽ°ä»£äººçš„å·¥ä½œå¿…å¤‡æŠ€èƒ½ï¼]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´» æ„Ÿæ‚Ÿ å­¦ä¹  é˜…è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OC-RunTime: æ€»ç»“æ¶ˆæ¯è½¬å‘ä¸­ç”¨åˆ°çš„çŸ¥è¯†ç‚¹]]></title>
    <url>%2F2018%2F04%2F05%2FOC-RunTime-%E6%80%BB%E7%BB%93%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91%E4%B8%AD%E7%94%A8%E5%88%B0%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%2F</url>
    <content type="text"><![CDATA[å‰è¨€OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹å®žä¾‹è®²è§£ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹ç±»æ–¹æ³•çš„è½¬å‘æµç¨‹ åœ¨ä¸Šé¢çš„å‡ ç¯‡æ–‡ç« ä¸­æˆ‘åˆ†äº«äº†å…³äºŽæ¶ˆæ¯è½¬å‘ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œé‡Œé¢æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰é˜è¿°ã€‚ è‹¥åœ¨ä¸Šé¢çš„æ–‡ç« ä¸­åŠ å…¥å¾ˆå¤šç»†èŠ‚ç‚¹çš„è¯ï¼Œä¸€æ˜¯æ‹‰é•¿äº†æ–‡ç« çš„å†…å®¹, äºŒæ˜¯å¯¹äºŽåˆšæŽ¥è§¦ Runtime çš„æœ‹å‹æ¥è¯´ä¸ä¸€å®šèƒ½æŽ¥å—, äºŽæ˜¯å°±æœ‰äº†è¿™ç¯‡æ–‡ç« çš„è¯žç”Ÿ. RunTime çš„å®šä¹‰åŠä½¿ç”¨åœºæ™¯è‹¹æžœ å¼€å‘æ–‡æ¡£ çš„è¿™æ ·è§£é‡Š runtime çš„ï¼š 1The Objective-C language defers as many decisions as it can from compile time and link time to runtime. Whenever possible, it does things dynamically. This means that the language requires not just a compiler, but also a runtime system to execute the compiled code. The runtime system acts as a kind of operating system for the Objective-C language; itâ€™s what makes the language work å°½é‡å°†å†³å®šæ”¾åˆ°è¿è¡Œçš„æ—¶å€™ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘å’Œé“¾æŽ¥è¿‡ç¨‹ä¸­. RunTime çš„åº”ç”¨åœºæ™¯: 1.é¢å‘åˆ‡é¢ç¼–ç¨‹ AOP.2.æ–¹æ³•è°ƒé… method swizzling. æœ‰äº›åœ°æ–¹ç§°ä¹‹ä¸ºâ€é»‘é­”æ³•â€.3.æ¶ˆæ¯è½¬å‘.4.ç»™åˆ†ç±»æ·»åŠ å±žæ€§(å…³è”å¯¹è±¡).5.åŠ¨æ€èŽ·å– class å’Œ slector.6.KVO/KVC, ä¿®æ”¹ç§æœ‰å±žæ€§çš„å€¼. å»ºè®®åŽ»é˜…è¯»ä¸‹é¢æ¡†æž¶çš„æºç ï¼Œæ•æˆ‘æ²¡æœ‰åŠ å…¥é“¾æŽ¥: Aspectsï¼ˆAOPå¿…å¤‡ï¼Œâ€œå–ç¼”â€ baseVCï¼Œæ— ä¾µå…¥åŸ‹ç‚¹ï¼‰ MJExtensionï¼ˆJSON è½¬ modelï¼Œä¸€è¡Œä»£ç å®žçŽ° NSCoding åè®®çš„è‡ªåŠ¨å½’æ¡£å’Œè§£æ¡£ï¼‰ JSPatchï¼ˆåŠ¨æ€ä¸‹å‘ JS è¿›è¡Œçƒ­ä¿®å¤ï¼‰ NullSafeï¼ˆé˜²æ­¢å› å‘ unrecognised messages ç»™ NSNull å¯¼è‡´çš„å´©æºƒï¼‰ UITableView-FDTemplateLayoutCellï¼ˆè‡ªåŠ¨è®¡ç®—å¹¶ç¼“å­˜ table view çš„ cell é«˜åº¦ï¼‰ UINavigationController+FDFullscreenPopGestureï¼ˆå…¨å±æ»‘åŠ¨è¿”å›žï¼‰ æ€è€ƒé—®é¢˜åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œå¾ˆå¤šæ¬¡çœ‹åˆ° IMPã€SELã€selector ä»¥åŠ Method ç­‰å…³é”®å­—ï¼Œç›¸ä¿¡å¤§å®¶éšç€å¯¹ RunTime çš„é€æ­¥äº†è§£ï¼Œæ…¢æ…¢ä¼šé€æ¸ç†Ÿæ‚‰å®ƒä»¬çš„ï¼Œåªæ˜¯æ—¶é—´é—®é¢˜ã€‚å¾ˆå¤šæ¦‚å¿µä¸Šé¢çš„ä¸œè¥¿ç†è§£èµ·æ¥æ²¡é‚£ä¹ˆç®€å•ï¼Œéœ€è¦åŠ¨æ‰‹åŽ»å†™å†™ä»£ç ã€‚ åœ¨çœ‹ä¸‹é¢å†…å®¹ä¹‹å‰, å…ˆæŠ›å‡ºä¸€ä¸ªé—®é¢˜: runtime å¦‚ä½•é€šè¿‡ selector æ‰¾åˆ°å¯¹åº”çš„ IMP åœ°å€? æŽ¥ä¸‹æ¥åˆ†åˆ«è¯´ä¸€ä¸‹ IMPã€SELã€selector ä»¥åŠ Method. IMPIMP ä¿å­˜çš„æ˜¯ Method çš„åœ°å€ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œç”±ç¼–è¯‘å™¨ç”Ÿæˆã€‚ IMP åœ¨ objc.h ä¸­çš„å®šä¹‰ï¼š 123456/// A pointer to the function of a method implementation. #if !OBJC_OLD_DISPATCH_PROTOTYPEStypedef void (*IMP)(void /* id, SEL, ... */ ); #elsetypedef id (*IMP)(id, SEL, ...); #endif å‘å¯¹è±¡å‘é€æ¶ˆæ¯ä¹‹åŽï¼Œæ˜¯ç”±è¿™ä¸ªå‡½æ•°æŒ‡é’ˆ IMP æŒ‡å®šçš„, å³ IMP å‡½æ•°æŒ‡é’ˆå°±æŒ‡å‘äº†æ–¹æ³•çš„å®žçŽ°. IMP å‡½æ•°æŒ‡é’ˆæœ€å°‘åŒ…å« id å’Œ SEL ç±»åž‹çš„ä¸¤ä¸ªå‚æ•°ï¼ŒåŽé¢å…¶ä»–çš„å‚æ•°æ˜¯å¯¹åº”æ–¹æ³•éœ€è¦çš„å‚æ•°ã€‚å…¶ä¸­ id ä»£è¡¨æ‰§è¡Œè¯¥æ–¹æ³•çš„ target(å¯¹è±¡), SEL å°±æ˜¯å¯¹åº”çš„æ–¹æ³•, é€šè¿‡ id å’Œ SEL å‚æ•°å°±èƒ½ç¡®å®šå”¯ä¸€çš„æ–¹æ³•å®žçŽ°åœ°å€. é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•èŽ·å–æ–¹æ³•çš„ IMP å‘¢ï¼Ÿå¾ˆç®€å•. NSObject æä¾›äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•: 12- (IMP)methodForSelector:(SEL)aSelector;+ (IMP)instanceMethodForSelector:(SEL)aSelector; å¯¹åº”çš„å®žçŽ°(æºç  NSObject.mm), å¦‚ä¸‹: 1234567891011121314+ (IMP)instanceMethodForSelector:(SEL)sel &#123; if (!sel) [self doesNotRecognizeSelector:sel]; return class_getMethodImplementation(self, sel);&#125;+ (IMP)methodForSelector:(SEL)sel &#123; if (!sel) [self doesNotRecognizeSelector:sel]; return object_getMethodImplementation((id)self, sel);&#125;- (IMP)methodForSelector:(SEL)sel &#123; if (!sel) [self doesNotRecognizeSelector:sel]; return object_getMethodImplementation(self, sel);&#125; å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”çš„ methodForSelector æ—¢æœ‰å®žä¾‹æ–¹æ³•åˆæœ‰ç±»æ–¹æ³•ï¼Œè€Œ instanceMethodForSelector åªæœ‰ç±»æ–¹æ³•ã€‚ åœ¨ä½¿ç”¨ methodForSelector æ–¹æ³•æ—¶ï¼Œå‘ç±»å‘é€æ¶ˆæ¯ï¼Œåˆ™ SEL åº”è¯¥æ˜¯ç±»æ–¹æ³•, è‹¥å‘å®žä¾‹å¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œåˆ™ SEL åº”è¯¥ä¸ºå®žä¾‹å¯¹è±¡æ–¹æ³•. è€Œ instanceMethodForSelector ä»…ä»…å…è®¸ç±»å‘é€è¯¥æ¶ˆæ¯, ä»Žè€ŒèŽ·å–å®žä¾‹æ–¹æ³•çš„ IMP. è¯¥æ–¹æ³•æ— æ³•èŽ·å–ç±»æ–¹æ³•çš„ IMP, å¦‚æžœæƒ³èŽ·å–ç±»æ–¹æ³•çš„ IMP å¯ä»¥ä½¿ç”¨ methodForSelector æ¥èŽ·å–ã€‚ å‡½æ•°æ–‡æ¡£åŽŸæ–‡è§£é‡Šå¦‚ä¸‹: 12Use this method to ask the class object for the implementation of instance methods only. To ask the class for the implementation of a class method, send the methodForSelector: instance method to the class instead. ä¸¾ä¸ªä¾‹å­ï¼Œæˆ–è®¸æ›´å¥½ç†è§£ã€‚ ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•, ä¸€ä¸ªæ˜¯ç±»æ–¹æ³•(testClassMethod), å¦ä¸€ä¸ªæ˜¯å®žä¾‹æ–¹æ³•(testInstanceMethod). 12345+ (void)testClassMethod &#123;&#125;- (void)testInstanceMethod &#123;&#125; åˆ†åˆ«ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ–¹æ³•æ¥èŽ·å– IMP çš„å‡ ä¸ªæ–¹æ³•. 123456789IMP imp = [[self class] instanceMethodForSelector:@selector(testClassMethod)];IMP imp2 = [[self class] instanceMethodForSelector:@selector(testInstanceMethod)];// ä¹Ÿå¯ä»¥æ”¹æˆ NSObject è°ƒç”¨çš„æ–¹å¼, ç»“æžœä¸€æ ·.// IMP imp = [NSObject instanceMethodForSelector:@selector(testClassMethod)];// IMP imp2 = [NSObject instanceMethodForSelector:@selector(testInstanceMethod)]; IMP imp3 = [[self class] methodForSelector:@selector(testClassMethod)];IMP imp4 = [self methodForSelector:@selector(testInstanceMethod)]; è°ƒè¯•å™¨å¯ä»¥çœ‹å‡º, å¦‚ä¸‹æ—¥å¿—: 123456789101112Printing description of imp:(IMP) imp = 0x000000010d8455c0 (libobjc.A.dylib`_objc_msgForward)Printing description of imp2:(IMP) imp2 = 0x000000010cf19b90 (-[ViewController testInstanceMethod] at ViewController.m:94)Printing description of imp3:(IMP) imp3 = 0x000000010cf19b60 (+[ViewController testClassMethod] at ViewController.m:89)Printing description of imp4:(IMP) imp4 = 0x000000010cf19b90 (-[ViewController testInstanceMethod] at ViewController.m:94)(lldb) imp2ã€imp3ã€imp4 éƒ½æ˜¯æ­£å¸¸çš„ï¼Œå”¯ç‹¬ imp ä¸æ­£å¸¸ï¼Œä¹Ÿå……åˆ†è¯´æ˜Žäº† instanceMethodForSelector æ— æ³•èŽ·å–ç±»æ–¹æ³•çš„ IMP. Methodåœ¨æºç  runtime.h ä¸­, å®šä¹‰ method, å…¶æœ¬è´¨æ˜¯ä¸€ä¸ªç»“æž„ä½“. 12345struct objc_method &#123; SEL method_name OBJC2_UNAVAILABLE; char *method_types OBJC2_UNAVAILABLE; IMP method_imp OBJC2_UNAVAILABLE;&#125; æ–¹æ³•å method_name ç±»åž‹ä¸º SEL. method_types æ–¹æ³•ç±»åž‹, æ˜¯ä¸€ä¸ª char æŒ‡é’ˆï¼Œå­˜å‚¨ç€æ–¹æ³•çš„å‚æ•°ç±»åž‹å’Œè¿”å›žå€¼ç±»åž‹ã€‚ æ–¹æ³•å®žçŽ° method_imp çš„ç±»åž‹ä¸º IMP. å¯ä»¥çœ‹å‡º, æœ‰ SEL å’Œ IMP, method_types æ˜¯å¯¹åº”çš„æ–¹æ³•è¿”å›žå€¼å’Œå‚æ•°ç±»åž‹, å¦‚ v@:ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ runtime.h ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ ¹æ® SEL ç›´æŽ¥èŽ·å–å®žä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•çš„ Methodï¼Œå¦‚ä¸‹: 123Method class_getInstanceMethod(Class cls, SEL name);Method class_getClassMethod(Class cls, SEL name); SELselector, ç§°ä¹‹ä¸ºæ–¹æ³•é€‰æ‹©å™¨ï¼ŒSEL æ˜¯ selector çš„è¡¨ç¤ºç±»åž‹ï¼Œä¹Ÿæ˜¯æ–¹æ³•çš„ç¼–å·ï¼Œæ˜¯ç±»æˆå‘˜æ–¹æ³•çš„æŒ‡é’ˆã€‚ SEL å®šä¹‰åœ¨æºç  objc.h ä¸­, æ˜¯ä¸€ä¸ªç»“æž„ä½“æŒ‡é’ˆ, å¦‚ä¸‹: 12/// An opaque type that represents a method selector.typedef struct objc_selector *SEL; ä½†æ˜¯æºç ä¸­æŸ¥ä¸åˆ° objc_selector å…·ä½“çš„å®šä¹‰å’Œå®žçŽ°. èŽ·å– SEL æœ‰ä¸‰ä¸ªæ–¹æ³•: 123SEL sel = @selector(play:);SEL sel = sel_registerName("play:"); SEL sel = NSSelectorFromString(@"play"); SEL è¡¨ç¤ºä¸€ä¸ª selector çš„æŒ‡é’ˆï¼Œæ— è®ºä»€ä¹ˆç±»é‡Œï¼Œåªè¦æ–¹æ³•åç›¸åŒï¼ŒSEL å°±ç›¸åŒï¼ŒSEL å®žé™…æ˜¯æ ¹æ®æ–¹æ³•å hash åŒ–äº†çš„å­—ç¬¦ä¸²ã€‚è€Œå¯¹äºŽå­—ç¬¦ä¸²çš„æ¯”è¾ƒä»…ä»…éœ€è¦æ¯”è¾ƒä»–ä»¬çš„åœ°å€å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸Šéžå¸¸å¿«ï¼ŒSEL çš„å­˜åœ¨åŠ å¿«äº†æŸ¥è¯¢æ–¹æ³•çš„é€Ÿåº¦ã€‚ æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆåœ¨åŒä¸€ä¸ª OC ç±»ä¸­ï¼Œä¸èƒ½å­˜åœ¨åŒåçš„å‡½æ•°ï¼Œå³ä½¿å‚æ•°ç±»åž‹ä¸åŒä¹Ÿä¸è¡Œï¼Œæ¢å¥è¯è¯´ OCä¸ºä»€ä¹ˆæ²¡æœ‰é‡è½½ï¼Ÿ ç­”æ¡ˆå·²ç»åœ¨ä¸Šé¢è¯´äº†ï¼ŒSEL è¡¨ç¤ºä¸€ä¸ª selector çš„æŒ‡é’ˆï¼Œæ— è®ºä»€ä¹ˆç±»é‡Œï¼Œåªè¦æ–¹æ³•åç›¸åŒï¼ŒSEL å°±ç›¸åŒï¼Œç›¸åŒçš„å‡½æ•°åï¼Œç¼–è¯‘å™¨æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚ dispatch table å­˜æ”¾ SEL å’Œ IMP çš„å¯¹åº”å…³ç³»ï¼ŒSEL æœ€ç»ˆä¼šé€šè¿‡ dispatch table å¯»æ‰¾åˆ°å¯¹åº”çš„IMPã€‚ æ€»ä¹‹ï¼ŒSelectorã€Method å’Œ IMP ä¸‰è€…ä¹‹é—´çš„å…³ç³»å¯ä»¥è¿™ä¹ˆè§£é‡Šï¼Œåœ¨ç±»çš„(å®žä¾‹å’Œç±»æ–¹æ³•)è°ƒåº¦è¡¨(dispatch table)ä¸­çš„æ¯ä¸€ä¸ªå®žä½“ä»£è¡¨ä¸€ä¸ªæ–¹æ³• Methodï¼Œå…¶åå­—å«åšé€‰æ‹©å™¨ SELï¼Œå¹¶å¯¹åº”ç€ä¸€ç§æ–¹æ³•å®žçŽ°ç§°ä¹‹ä¸º IMPï¼Œæœ‰äº† Method å°±å¯ä»¥ä½¿ç”¨ SEL æ‰¾åˆ°å¯¹åº”çš„ IMPï¼ŒSEL å°±æ˜¯ä¸ºäº†æŸ¥æ‰¾æ–¹æ³•çš„æœ€ç»ˆå®žçŽ° IMPã€‚ class_addMethodæŸ¥çœ‹æºç  objc-runtime-new.mm ä¸­è¯¥å‡½æ•°å®žçŽ°å¦‚ä¸‹: 1234567BOOL class_addMethod(Class cls, SEL name, IMP imp, const char *types)&#123; if (!cls) return NO; rwlock_writer_t lock(runtimeLock); return ! addMethod(cls, name, imp, types ?: "", NO);&#125; å¼€å‘æ–‡æ¡£ä¸­è¿™æ ·æè¿°è¯¥å‡½æ•°: 1234Adds a new method to a class with a given name and implementation.class_addMethod will add an override of a superclass's implementation, but will not replace an existing implementation in this class. To change an existing implementation, use method_setImplementation. è§£é‡Šä¸€ä¸‹ï¼Œå¯ä»¥ä¸ºç±»æ ¹æ® SEL å’Œ IMP åŠ¨æ€æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•ã€‚class_addMethod ä»…å¯ä»¥åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œä¸ä¼šæ›¿æ¢ã€‚å¦‚æžœæƒ³è¾¾åˆ°æ–¹æ³•æ›¿æ¢çš„æ•ˆæžœå¯ä½¿ç”¨ method_setImplementation å‡½æ•°ã€‚ å…³äºŽ method_setImplementation å’Œ method_exchangeImplementations åŽé¢æ–‡ç« å†åšåˆ†æž. å…¶å®ž, method_exchangeImplementations çš„å†…éƒ¨å®žçŽ°ç›¸å½“äºŽè°ƒç”¨äº† 2 æ¬¡ method_setImplementation æ–¹æ³•ã€‚ class_addMethod ä¸ä»…å¯ä»¥åŠ¨æ€æ·»åŠ ç±»æ–¹æ³•, ä¹Ÿå¯ä»¥æ·»åŠ å®žä¾‹æ–¹æ³•ã€‚ å‚æ•°åŠè¿”å›žå€¼è§£é‡Š: 123456789è¿”å›žå€¼: è¿”å›ž YES è¡¨ç¤ºæ–¹æ³•æ·»åŠ æˆåŠŸ, å¦åˆ™æ·»åŠ å¤±è´¥ã€‚å‚æ•° Class cls: å°†è¦ç»™æ·»åŠ æ–¹æ³•çš„ç±», å³ï¼»ç±»å classï¼½å‚æ•° SEL name: å°†è¦æ·»åŠ çš„æ–¹æ³• SEL, å³ @selector(æ–¹æ³•å)ï¼Œå¦‚æžœå·²ç»å­˜åœ¨ï¼Œè¯¥æ–¹æ³•è¿”å›žå¤±è´¥ï¼Œä¸å­˜åœ¨å°±æ·»åŠ æˆåŠŸã€‚å‚æ•° IMP impï¼šå®žçŽ°è¿™ä¸ªæ–¹æ³•çš„å‡½æ•°. æœ‰ä¸¤ç§å†™æ³•å³ C å’Œ OC çš„å†™æ³•. ä¸€ä¸ª IMP æœ€å°‘åŒ…æ‹¬ä¸¤ä¸ªå‚æ•°, ä¸Šé¢å·²ç»è¯´è¿‡ã€‚å‚æ•° const char *types: å®žçŽ°æ–¹æ³•çš„å‡½æ•°çš„è¿”å›žå’Œå‚æ•°ç¼–ç ç±»åž‹. å¦‚ "v@:" è¡¨ç¤ºè¿”å›žå€¼ä¸º void, æ²¡æœ‰å‚æ•°çš„ä¸€ä¸ªå‡½æ•°, å…¶ä¸­ @å’Œ:åˆ†åˆ«ä»£è¡¨ IMP çš„é»˜è®¤ä¸¤ä¸ªå‚æ•°å³ id å’Œ sel. å…³äºŽ typesï¼Œå¯ä»¥ä½¿ç”¨ method_getTypeEncoding æ¥èŽ·å–ã€‚ æ›´å¤šå…³äºŽ types çš„å†…å®¹å¯ä»¥å‚è€ƒå¼€å‘è€…æ–‡æ¡£ Type Encodings. è§£ç­”é—®é¢˜è¯»åˆ°è¿™é‡Œ, å¤§å®¶å¯¹ IMP, SEL ä»¥åŠ Method åº”è¯¥æœ‰åˆæ­¥çš„äº†è§£äº†, é‚£ä¹ˆæ¥è§£ç­”ä¸€ä¸‹åˆšæ‰æå‡ºçš„é—®é¢˜: runtime å¦‚ä½•é€šè¿‡ selector æ‰¾åˆ°å¯¹åº”çš„ IMP åœ°å€? å›žç­”è¿™ä¸ªé—®é¢˜çš„å…³é”®æ˜¯è¦çŸ¥é“æ¶ˆæ¯è°ƒåº¦è¡¨(dispatch table)ï¼Œå¦å¤–ä¸€ä¸ªè¦å›žç­”çš„è¦ç‚¹æ˜¯ IMP çš„å®žçŽ°å’ŒèŽ·å–ä»¥åŠå’Œ Method ä¹‹é—´çš„å…³ç³»ã€‚ ç±»å¯¹è±¡ä¸­æœ‰ç±»æ–¹æ³•å’Œå®žä¾‹æ–¹æ³•çš„åˆ†å‘è¡¨ï¼Œè¡¨ä¸­è®°å½•ç€æ–¹æ³•çš„åå­—ã€å‚æ•°å’Œå®žçŽ°ï¼Œselector æœ¬è´¨å°±æ˜¯æ–¹æ³•åç§°ï¼Œruntime é€šè¿‡è¿™ä¸ªæ–¹æ³•åç§°å°±å¯ä»¥åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°è¯¥æ–¹æ³•å¯¹åº”çš„å®žçŽ°. ç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†èŽ·å– IMP æŒ‡é’ˆçš„å‡½æ•°ï¼Œæ— è®ºæ˜¯ç±»æ–¹æ³•è¿˜æ˜¯å®žä¾‹æ–¹æ³•æˆ‘ä»¬éƒ½å¯ä»¥èŽ·å–å¯¹åº”çš„ IMP. è€Œ Method å°† Selector å’Œ IMP è”ç³»èµ·æ¥ï¼Œå¯ä»Žæºç ä¸­çœ‹å‡º: 12345struct objc_method &#123; SEL method_name OBJC2_UNAVAILABLE; char *method_types OBJC2_UNAVAILABLE; IMP method_imp OBJC2_UNAVAILABLE;&#125; IMP æ˜¯å‡½æ•°çš„æŒ‡é’ˆï¼Œå®ƒæ˜¯ç”±ç¼–è¯‘å™¨ç¼–è¯‘ç”Ÿæˆçš„ã€‚å½“å‘ä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šæ‰¾åˆ°é‚£æ®µä»£ç æ‰§è¡Œï¼ŒIMP æŒ‡å‘äº†è¿™ä¸ªæ–¹æ³•çš„å…·ä½“çš„å®žçŽ°ï¼Œå¾—åˆ°è¿™ä¸ªå‡½æ•°çš„æŒ‡é’ˆå¯ä»¥ç›´æŽ¥æ‰§è¡Œã€‚ IMP æŒ‡å‘çš„æ–¹æ³•ä¸Ž objc_msgSend å‡½æ•°ç±»åž‹ç›¸åŒï¼Œå‚æ•°éƒ½åŒ…å« id å’Œ SEL ç±»åž‹ã€‚æ¯ä¸ªæ–¹æ³•åéƒ½å¯¹åº”ä¸€ä¸ª SEL ç±»åž‹çš„æ–¹æ³•é€‰æ‹©å™¨ï¼Œè€Œæ¯ä¸ªå®žä¾‹å¯¹è±¡ä¸­çš„ SEL å¯¹åº”çš„æ–¹æ³•å®žçŽ°è‚¯å®šæ˜¯å”¯ä¸€çš„ï¼Œé€šè¿‡ä¸€ç»„ id å’Œ SEL å‚æ•°å°±èƒ½ç¡®å®šå”¯ä¸€çš„æ–¹æ³•å®žçŽ°åœ°å€ï¼Œåä¹‹äº¦ç„¶ã€‚å½“å‘é€æ¶ˆæ¯ç»™ä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒrunTime ä¼šåœ¨å¯¹è±¡çš„ç±»å¯¹è±¡æ–¹æ³•åˆ—è¡¨é‡ŒæŸ¥æ‰¾ï¼Œå½“æˆ‘ä»¬å‘é€ä¸€ä¸ªæ¶ˆæ¯ç»™ä¸€ä¸ªç±»æ—¶ï¼Œè¿™æ¡æ¶ˆæ¯ä¼šåœ¨ç±»çš„ Meta Class å¯¹è±¡çš„æ–¹æ³•åˆ—è¡¨é‡ŒæŸ¥æ‰¾ï¼Œç›´åˆ°è¶…æ‰¾åˆ° NSObject ä¸­ä¸ºæ­¢ã€‚ æ¶ˆæ¯ä¼ é€’çš„è¿‡ç¨‹ 1. å½“æ¶ˆæ¯è¢«å‘é€ç»™ä¸€ä¸ªå¯¹è±¡ï¼Œmessaging function è·Ÿéšå¯¹è±¡çš„ isa æŒ‡é’ˆæ‰¾åˆ°å®ƒçš„ class structureï¼Œåœ¨ dispatch table ä¸­å¯»æ‰¾ method selector. 2. å¦‚æžœæ²¡æœ‰æ‰¾åˆ° selectorï¼Œobjc_msgsend è·Ÿéšè¯¥ç±»å®žä¾‹çš„ isa æ‰¾åˆ°çˆ¶ç±»ï¼Œå°è¯•åœ¨çˆ¶ç±»çš„ dispatch table ä¸­å¯»æ‰¾ selector. 3. é‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ° isa æŒ‡å‘ NSObject Class ä¸ºæ­¢ã€‚ å…³äºŽåˆ†å‘è¡¨å’Œæ¶ˆæ¯ç›¸å…³çš„çŸ¥è¯†å¯ä»¥å‚è€ƒå¼€å‘æ–‡æ¡£ Messagingï¼Œè®²å¾—å¾ˆæ¸…æ¥šã€‚ å®žé™…ä¾‹å­è¯´äº†è¿™ä¹ˆå¤šç†è®ºçŸ¥è¯†ï¼Œæ˜¯æ—¶å€™ä¸¾æ —å­äº†ï¼Œæ–¹ä¾¿å¤§å®¶æ›´å¥½çš„ç†è§£ä¸Šé¢çš„å†…å®¹ã€‚ 1. åŠ¨æ€æ·»åŠ å®žä¾‹æ–¹æ³•Student.m é™¤ init å¤–ï¼ŒStudent åªæœ‰ä¸€ä¸ªå®žä¾‹æ–¹æ³• studentWalkImp. 12345678910111213141516171819202122232425262728@implementation Student- (instancetype)init&#123; self = [super init]; if (self) &#123; SEL proxySelector = NSSelectorFromString(@"studentWalkImp"); IMP impletor = class_getMethodImplementation([self class], proxySelector); // èŽ·å–å®žä¾‹æ–¹æ³• Method method = class_getInstanceMethod([self class], proxySelector); const char *types = method_getTypeEncoding(method); SEL origSel = NSSelectorFromString(@"walk"); class_addMethod([self class], origSel, impletor, types); &#125; return self;&#125;- (void)studentWalkImp&#123; NSLog(@"---veryitman--- Student studentWalkImp");&#125;@end è°ƒç”¨æµ‹è¯•ä¸€ä¸‹. 1234567- (void)viewDidLoad &#123; [super viewDidLoad]; Student *stud = [[Student alloc] init]; [stud performSelector:NSSelectorFromString(@"walk") withObject:nil];&#125; è¿™é‡Œ Student å¹¶æ²¡æœ‰ walk æ–¹æ³•ï¼Œæ•…æ„ä¸ºä¹‹ï¼Œè¿è¡ŒåŽæŽ§åˆ¶å°ä¼šæ‰“å°: 1---veryitman--- Student studentWalkImp æˆåŠŸçš„ä¸º Student æ·»åŠ äº†ä¸€ä¸ªå®žä¾‹æ–¹æ³• walk çš„å®žçŽ° studentWalkImp. ä¸Šé¢çš„ä¾‹å­æ˜¯ä½¿ç”¨ OC çš„ IMP æ–¹å¼æ¥å®žçŽ°çš„ï¼Œå¯ä»¥æ”¹ä¸º C å®žçŽ°ç‰ˆæœ¬çš„. 123456789101112131415161718@implementation Student- (instancetype)init&#123; self = [super init]; if (self) &#123; SEL origSel = NSSelectorFromString(@"walk"); class_addMethod([self class], origSel, (IMP)studentWalkImp, "v:@"); &#125; return self;&#125;void studentWalkImp()&#123; NSLog(@"---veryitman--- Student studentWalkImp");&#125; 2. åŠ¨æ€æ·»åŠ ç±»æ–¹æ³•åŠ¨æ€æ·»åŠ ç±»æ–¹æ³•ï¼Œå’ŒåŠ¨æ€æ·»åŠ å®žä¾‹æ–¹æ³•ç¨å¾®æœ‰ç‚¹ä¸åŒã€‚ä¸‹é¢æ˜¯æ”¹é€ åŽçš„ Student.m. Student.m 123456789101112131415161718192021222324252627282930@implementation Student- (instancetype)init&#123; self = [super init]; if (self) &#123; // èŽ·å– MetaClass, ç±»æ–¹æ³•ä¸å¯ä»¥ä½¿ç”¨ [self class] Class metaCls = objc_getMetaClass([NSStringFromClass([self class]) UTF8String]); SEL proxySelector = NSSelectorFromString(@"clsImp"); IMP impletor = class_getMethodImplementation(metaCls, proxySelector); // èŽ·å–ç±»æ–¹æ³• Method method = class_getClassMethod([self class], proxySelector); const char *types = method_getTypeEncoding(method); SEL origSel = NSSelectorFromString(@"walk"); class_addMethod(metaCls, origSel, impletor, types); &#125; return self;&#125;+ (void)clsImp&#123; NSLog(@"---veryitman--- Student clsImp");&#125; æ³¨æ„ï¼šè¿™é‡ŒèŽ·å– Class ç¨å¾®ä¸åŒçš„æ˜¯ä½¿ç”¨äº† objc_getMetaClassï¼Œè¿™é‡Œå…³ç³»åˆ° Objective-C ä¸­çš„ç±»ã€Classã€æ ¹ç±»å’Œå…ƒç±»çš„åŒºåˆ«ï¼Œå¯ä»¥å‚è€ƒ Classã€isaã€å…ƒç±» è¿™ç¯‡æ–‡ç« ã€‚ è°ƒç”¨æµ‹è¯•ä¸€ä¸‹ï¼š 12345678- (void)viewDidLoad &#123; [super viewDidLoad]; Student *stud = [[Student alloc] init]; [[stud class] performSelector:NSSelectorFromString(@"walk") withObject:nil];&#125; æŽ§åˆ¶å°æ‰“å°ï¼š 1---veryitman--- Student clsImp æˆåŠŸåœ°ä¸ºç±»åŠ¨æ€çš„æ·»åŠ äº†ä¸€ä¸ªç±»æ–¹æ³• clsImp. å‚è€ƒæ–‡æ¡£1. Objective-C å¯¹è±¡æ¨¡åž‹åŠåº”ç”¨ 2. Apple RunTime æºç  objc4-723.tar.gz 3. Messaging 4. Objective-C æ·±å…¥ç†è§£ä¸­çš„æ¶ˆæ¯æœºåˆ¶å’Œæ–¹æ³•è°ƒç”¨ å®Œæ•´ä»£ç ç‚¹å‡»ä¸‹è½½æ–‡ä¸­å®Œæ•´çš„ Demo. æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS RunTime MessageForward</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹ç±»æ–¹æ³•çš„è½¬å‘æµç¨‹]]></title>
    <url>%2F2018%2F04%2F03%2FOC-RunTime-%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91%E4%B9%8B%E7%B1%BB%E6%96%B9%E6%B3%95%E7%9A%84%E8%BD%AC%E5%8F%91%E6%B5%81%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ˜¯ã€Œæ¶ˆæ¯è½¬å‘ã€ç³»åˆ—çš„ç¬¬ä¸‰ç¯‡, åœ¨ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹ å’Œ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹[å®žä¾‹è®²è§£] ä¸­åˆ†äº«äº†å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹. ä»Šå¤©åˆ†äº«å¦‚ä½•å¯¹ç±»æ–¹æ³•è¿›è¡Œæ¶ˆæ¯çš„è½¬å‘. resolveClassMethodNSObject æä¾›äº† resolveClassMethod æ¥è®©å¼€å‘è€…åœ¨é‡Œé¢åŠ¨æ€æ·»åŠ ä¸€ä¸ªç±»æ–¹æ³•. ç±»æ–¹æ³•çš„è½¬å‘æµç¨‹å’Œå®žä¾‹æ–¹æ³•è½¬å‘çš„æµç¨‹å¤§è‡´ä¸€æ ·, å”¯ç‹¬ä¸åŒçš„æ˜¯éœ€è¦é‡å†™çš„æ–¹æ³•(NSObjectä¸­)çš„ä¸ä¸€æ ·. å½“æ—¶æˆ‘åœ¨å†™ Demo, ä»¥ä¸ºåªéœ€è¦å°† resolveInstanceMethod æ”¹ä¸º resolveClassMethod å°±ä¸‡äº‹å¤§å‰äº†å³é‡å†™ä¸‹é¢å‡ ä¸ªæ–¹æ³•å°±å¯ä»¥è§£å†³é—®é¢˜, äº‹å®žè¯æ˜Žè¿™æ ·æ˜¯ä¸è¡Œçš„. +resolveClassMethod -forwardingTargetForSelector -methodSignatureForSelector -forwardInvocation -doesNotRecognizeSelector: ç½‘ä¸Šå¾ˆå¤šåšæ–‡å¹¶æ²¡æœ‰æ·±å…¥çš„æŽ¢è®¨å…³äºŽç±»æ–¹æ³•è½¬å‘çš„æµç¨‹, åªæ˜¯åœ¨ä»‹ç»å®žä¾‹æ–¹æ³•è½¬å‘çš„æµç¨‹çš„åŒæ—¶, ä¸€ç¬”å¸¦è¿‡ç±»æ–¹æ³•è½¬å‘æœºåˆ¶å’Œæµç¨‹. é€šè¿‡å¯¹ NSObject.mm æºç çš„æŸ¥çœ‹, å¯ä»¥çœ‹åˆ°å¯¹åº”ä¸Šé¢çš„å‡ ä¸ªæ–¹æ³•éƒ½æœ‰ç±»æ–¹æ³•. å¦‚ä¸‹: 123451. +resolveClassMethod2. +forwardingTargetForSelector3. +methodSignatureForSelector4. +forwardInvocation5. +doesNotRecognizeSelector: é‡æ–°è¿™å‡ ä¸ªæ–¹æ³•æ‰æ˜¯è§£å†³é—®é¢˜çš„å…³é”®. çŽ°åœ¨æˆ‘ä»¬é‡å†™ resolveClassMethod, å¦‚ä¸‹. ViewController.m 123456789101112131415161718192021222324252627282930313233#import &lt;objc/runtime.h&gt;static NSString * const sPerformClassMethodName = @"veryClassMethod";+ (BOOL)resolveClassMethod:(SEL)sel&#123; NSLog(@"---veryitman--- 1--- +resolveClassMethod"); NSString *methodName = NSStringFromSelector(sel); if ([sPerformClassMethodName isEqualToString:methodName]) &#123; // èŽ·å– MetaClass Class predicateMetaClass = objc_getMetaClass([NSStringFromClass(self) UTF8String]); // æ ¹æ® metaClass èŽ·å–æ–¹æ³•çš„å®žçŽ° IMP impletor = class_getMethodImplementation(predicateMetaClass, @selector(proxyMethod)); // èŽ·å–ç±»æ–¹æ³• Method predicateMethod = class_getClassMethod(predicateMetaClass, @selector(proxyMethod)); const char *encoding = method_getTypeEncoding(predicateMethod); // åŠ¨æ€æ·»åŠ ç±»æ–¹æ³• class_addMethod(predicateMetaClass, sel, impletor, encoding); return YES; &#125; return [super resolveClassMethod:sel];&#125;+ (void)proxyMethod&#123; NSLog(@"---veryitman--- +proxyMethod of class's method for OC.");&#125; æ¨¡æ‹Ÿè°ƒç”¨ 12345678910- (void)viewDidLoad&#123; [super viewDidLoad]; // è¿è¡Œç±»æ–¹æ³• SEL selector = NSSelectorFromString(sPerformClassMethodName); SuppressPerformSelectorLeakWarning( [[self class] performSelector:selector withObject:nil]; );&#125; å…³äºŽ SuppressPerformSelectorLeakWarning å¯ä»¥å‚è€ƒ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹[å®žä¾‹è®²è§£]. å°†åŠ¨æ€æ·»åŠ çš„æ–¹æ³•è®© proxyMethod æ¥æ‰§è¡Œ, æ˜¾ç¤ºç»“æžœè¾¾åˆ°é¢„æœŸ. 12---veryitman--- 1--- +resolveClassMethod---veryitman--- +proxyMethod of class's method for OC. åˆ›å»ºè¢«è½¬å‘è€…MZTempObj.m 123456789@implementation MZTempObj/// ç±»æ–¹æ³•+ (void)veryClassMethod&#123; NSLog(@"---veryitman--- veryClassMethod");&#125;@end è¿™é‡Œæœ‰ç±»æ–¹æ³•çš„ä¸€ä¸ªå®žçŽ° veryClassMethod. é‡å†™è½¬å‘æ¶ˆæ¯çš„å‡½æ•°åŒç†å°† resolveClassMethod ä¿®æ”¹ä¸€ä¸‹, ä¸ºäº†ä¿è¯æµç¨‹ç»§ç»­. ç¤ºä¾‹ä»£ç å¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115+ (BOOL)resolveClassMethod:(SEL)sel&#123; NSLog(@"---veryitman--- 1--- +resolveClassMethod. selector: %@", NSStringFromSelector(sel)); NSString *methodName = NSStringFromSelector(sel); // è¿™é‡Œæ•…æ„å°† sPerformClassMethodName æ”¹ä¸º @"", ä¸ºäº†æµç¨‹å¾€ä¸‹èµ° if ([@"" isEqualToString:methodName]) &#123; // èŽ·å– MetaClass Class predicateMetaClass = objc_getMetaClass([NSStringFromClass(self) UTF8String]); // æ ¹æ® metaClass èŽ·å–æ–¹æ³•çš„å®žçŽ° IMP impletor = class_getMethodImplementation(predicateMetaClass, @selector(proxyMethod)); // èŽ·å–ç±»æ–¹æ³• Method predicateMethod = class_getClassMethod(predicateMetaClass, @selector(proxyMethod)); const char *encoding = method_getTypeEncoding(predicateMethod); // åŠ¨æ€æ·»åŠ ç±»æ–¹æ³• class_addMethod(predicateMetaClass, sel, impletor, encoding); return YES; &#125; return [super resolveClassMethod:sel];&#125;+ (id)forwardingTargetForSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 2--- +forwardingTargetForSelector"); NSString *selectorName = NSStringFromSelector(aSelector); if ([sPerformClassMethodName isEqualToString:selectorName]) &#123; // æ³¨æ„1: ä¹Ÿå¯åœ¨æ­¤è½¬å‘å®žä¾‹æ–¹æ³•#if 0 // è®© MZTempObj åŽ»æ‰§è¡Œ aSelector, å®žçŽ°æ¶ˆæ¯çš„è½¬å‘ MZTempObj *myobject = [[MZTempObj alloc] init]; return myobject;#endif // è½¬å‘ç±»æ–¹æ³•å¯¹åº”è¿”å›žç±»å¯¹è±¡ return [MZTempObj class]; &#125; id obj = [super forwardingTargetForSelector:aSelector]; return obj;&#125;+ (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 3--- +methodSignatureForSelector"); // æ‰¾å‡ºå¯¹åº”çš„ aSelector ç­¾å NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; // æ³¨æ„2: ä¹Ÿå¯ä»¥åœ¨æ­¤èŽ·å–å®žä¾‹æ–¹æ³•çš„ç­¾å#if 0 if (nil == signature) &#123; // æ˜¯å¦æœ‰ aSelector if ([MZTempObj instancesRespondToSelector:aSelector]) &#123; signature = [MZTempObj instanceMethodSignatureForSelector:aSelector]; &#125; &#125; return signature;#endif if (nil == signature) &#123; // æ˜¯å¦æœ‰ aSelector if ([MZTempObj respondsToSelector:aSelector]) &#123; //methodSignatureForSelector å¯ä»¥èŽ·å–ç±»æ–¹æ³•å’Œå®žä¾‹æ–¹æ³•çš„ç­¾å //instanceMethodSignatureForSelectoråªèƒ½èŽ·å–å®žä¾‹æ–¹æ³•çš„ç­¾å signature = [MZTempObj methodSignatureForSelector:aSelector]; &#125; &#125; return signature;&#125;+ (void)forwardInvocation:(NSInvocation *)anInvocation&#123; NSLog(@"---veryitman--- 4--- +forwardInvocation"); // æ³¨æ„3: ä¹Ÿå¯ä»¥è°ƒç”¨å®žä¾‹æ–¹æ³•#if 0 if ([MZTempObj instancesRespondToSelector:anInvocation.selector]) &#123; [anInvocation invokeWithTarget:[[MZTempObj alloc] init]]; &#125; else &#123; [super forwardInvocation:anInvocation]; &#125; return;#endif if ([MZTempObj respondsToSelector:anInvocation.selector]) &#123; // è¿™é‡Œè½¬å‘çš„æ˜¯ MZTempObj Class, ä¸æ˜¯å¯¹è±¡ [anInvocation invokeWithTarget:[MZTempObj class]]; &#125; else &#123; [super forwardInvocation:anInvocation]; &#125;&#125;+ (void)doesNotRecognizeSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 5--- +doesNotRecognizeSelector: %@", NSStringFromSelector(aSelector));&#125; æ‰§è¡ŒåŽ, æŽ§åˆ¶å°è¾“å‡ºæ—¥å¿—: 123---veryitman--- 1--- +resolveClassMethod. selector: veryClassMethod---veryitman--- 2--- +forwardingTargetForSelector---veryitman--- veryClassMethod è¿™é‡Œæ³¨æ„ä¸€ä¸‹ å°†ä»£ç ä¸­ æ³¨æ„1 æ³¨æ„2 ç­‰éƒ¨åˆ†å¯ä»¥è‡ªè¡Œæ‰“å¼€æµ‹è¯•ä¸€ä¸‹, ç„¶åŽå°† MZTempObj.m ä¸­çš„ç±»æ–¹æ³•(+veryClassMethod)æ”¹ä¸ºå®žä¾‹æ–¹æ³•(-veryClassMethod), ä¹Ÿæ˜¯å¯ä»¥çš„, è¿™æ ·å°±è¾¾åˆ°äº†å°†ç±»æ–¹æ³•è½¬å‘ç»™å®žä¾‹æ–¹æ³•çš„æ•ˆæžœ. ä¿®æ”¹ä¸€ä¸‹ forwardingTargetForSelector ä¸­çš„å®žçŽ°, å¯ä»¥çœ‹åˆ° 4, 5ä¹Ÿä¼šæ‰§è¡Œ. 123456789101112131415161718192021222324+ (id)forwardingTargetForSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 2--- +forwardingTargetForSelector"); NSString *selectorName = NSStringFromSelector(aSelector); if ([@"" isEqualToString:selectorName]) &#123; // æ³¨æ„1: ä¹Ÿå¯åœ¨æ­¤è½¬å‘å®žä¾‹æ–¹æ³•#if 0 // è®© MZTempObj åŽ»æ‰§è¡Œ aSelector, å®žçŽ°æ¶ˆæ¯çš„è½¬å‘ MZTempObj *myobject = [[MZTempObj alloc] init]; return myobject;#endif // è½¬å‘ç±»æ–¹æ³•å¯¹åº”è¿”å›žç±»å¯¹è±¡ return [MZTempObj class]; &#125; id obj = [super forwardingTargetForSelector:aSelector]; return obj;&#125; 123456---veryitman--- 1--- +resolveClassMethod. selector: veryClassMethod---veryitman--- 2--- +forwardingTargetForSelector---veryitman--- 3--- +methodSignatureForSelector---veryitman--- 1--- +resolveClassMethod. selector: _forwardStackInvocation:---veryitman--- 4--- +forwardInvocation---veryitman--- veryClassMethod åŒç†æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç±»æ–¹æ³•çš„æ¶ˆæ¯è½¬å‘æµç¨‹å›¾, å¦‚ä¸‹å›¾æ‰€ç¤º: æŽ¨èOC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹å®žä¾‹è®²è§£ OC-RunTime: æ€»ç»“æ¶ˆæ¯è½¬å‘ä¸­ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ ç‚¹å‡»ä¸‹è½½æ–‡ä¸­å®Œæ•´çš„ Demo. æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS RunTime MessageForward</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹[å®žä¾‹è®²è§£]]]></title>
    <url>%2F2018%2F04%2F01%2FOC-RunTime-%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91%E4%B9%8B%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%E7%9A%84%E8%BD%AC%E5%8F%91%E6%B5%81%E7%A8%8B-%E5%AE%9E%E4%BE%8B%E8%AE%B2%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹ åˆ†äº«äº†æ¶ˆæ¯è½¬å‘çš„æµç¨‹, æœ¬æ¬¡ç»“åˆå®žé™…ä¾‹å­ç»§ç»­åˆ†æžä¸€ä¸‹æ¶ˆæ¯è½¬å‘æµç¨‹. å‘é€ä¸å­˜åœ¨çš„æ¶ˆæ¯åœ¨ ViewController çš„ viewDidLoad ä¸­è¿è¡Œ veryTestMethod æ–¹æ³•. ViewController.m 12345678910111213static NSString * const sPerformInstanceMethodName = @"veryTestMethod";- (void)viewDidLoad &#123; [super viewDidLoad]; // è¿è¡Œå®žä¾‹æ–¹æ³• SEL selector = NSSelectorFromString(sPerformInstanceMethodName); SuppressPerformSelectorLeakWarning( [self performSelector:selector withObject:nil]; );&#125; å…¶ä¸­, SuppressPerformSelectorLeakWarning æ˜¯å®šä¹‰çš„ä¸€ä¸ªå®. 1234567#define SuppressPerformSelectorLeakWarning(Stuff) \do &#123; \ _Pragma("clang diagnostic push") \ _Pragma("clang diagnostic ignored \"-Warc-performSelector-leaks\"") \ Stuff; \ _Pragma("clang diagnostic pop") \&#125; while (0) åœ¨ ViewController ä¸­æˆ‘å¹¶æ²¡æœ‰å†™ veryTestMethod è¿™ä¸ªå‡½æ•°, åªæ˜¯å€ŸåŠ© performSelector åŠ¨æ€æ‰§è¡Œ, å¦‚æžœç¼–è¯‘è¿è¡Œç›´æŽ¥ä¼š crash. å¯ä»¥æŸ¥çœ‹ NSObject.mm æºç , é‡Œé¢å…³äºŽæ¶ˆæ¯è½¬å‘çš„å‡ ä¸ªé‡è¦å‡½æ•°éƒ½å†™ç€ _objc_fatal, å¯è°“æ˜¯æ‹›æ‹›æ¯™å‘½. ç´§æŽ¥ç€, æˆ‘ä»¬å¯ä»¥å€ŸåŠ© resolveInstanceMethod æ¥å®Œæˆæ¶ˆæ¯è½¬å‘ç»™ ViewController. resolveInstanceMethod è½¬å‘é‡å†™ NSObject ä¸­çš„ resolveInstanceMethod å‡½æ•°. +resolveInstanceMethod ViewController.m 1234567891011121314151617181920212223242526// è®°å¾—å¯¼å…¥ RunTime å¤´æ–‡ä»¶#import &lt;objc/runtime.h&gt;+ (BOOL)resolveInstanceMethod:(SEL)sel&#123; NSLog(@"---veryitman--- 1--- +resolveInstanceMethod"); NSString *methodName = NSStringFromSelector(sel); if ([sPerformInstanceMethodName isEqualToString:methodName]) &#123; SEL proxySelector = NSSelectorFromString(@"proxyMethod"); IMP impletor = class_getMethodImplementation(self, proxySelector); // èŽ·å–å®žä¾‹æ–¹æ³• Method method = class_getInstanceMethod(self, proxySelector); const char *types = method_getTypeEncoding(method); // æ·»åŠ  OC çš„å‡½æ•° class_addMethod([self class], sel, impletor, types); return YES; &#125; return [super resolveInstanceMethod:sel];&#125; ViewController ä¸­å®žçŽ°çš„ proxyMethod 12345// OC å®žçŽ°- (void)proxyMethod&#123; NSLog(@"---veryitman--- -proxyMethod of instance's method for OC.");&#125; åœ¨ resolveInstanceMethod ä¸­åŠ¨æ€æ·»åŠ äº† veryTestMethod æ–¹æ³•, å¹¶è®© proxyMethod å‡½æ•°æ¥å®žçŽ°(IMP). è¿è¡Œå¯ä»¥çœ‹åˆ°, ç¨‹åºå¹¶æ²¡æœ‰ crash, æˆåŠŸçš„æ‰§è¡Œäº† proxyMethod. 12---veryitman--- 1--- +resolveInstanceMethod---veryitman--- -proxyMethod of instance&apos;s method for OC. åˆ°æ­¤ä¸ºæ­¢, æˆ‘ä»¬å·²ç»çœ‹åˆ°åŠ¨æ€æ·»åŠ ä¸€ä¸ªæ–¹æ³•çš„å®žçŽ°å¹¶æˆåŠŸè¿è¡Œçš„å®Œæ•´ä¾‹å­. æŽ¥ä¸‹æ¥, æˆ‘ä»¬å°†è½¬å‘ç»™å…¶ä»–å¯¹è±¡ MZTempObj æ¥æ‰§è¡Œ. è‡ªå®šä¹‰è¢«è½¬å‘çš„å¯¹è±¡MZTempObj.m 123456@implementation MZTempObj- (void)veryTestMethod&#123; NSLog(@"---veryitman--- veryTestMethod");&#125; veryTestMethod å°±æ˜¯æˆ‘ä»¬è¦è½¬å‘å¯¹åº”çš„æ¶ˆæ¯. æ¶ˆæ¯è½¬å‘å®žè·µæŽ¥ä¸‹æ¥æˆ‘ä»¬æŠŠå‘ ViewController å‘é€ veryTestMethod çš„æ¶ˆæ¯è½¬å‘ç»™ MZTempObj çš„ veryTestMethod æ–¹æ³•. ç»§ç»­é‡å†™ä¸‹é¢å‡½æ•°, ä¸è¿‡ resolveInstanceMethod è¦ç¨å¾®æ”¹é€ ä¸€ä¸‹, æ‰èƒ½è¾¾åˆ°æˆ‘ä»¬å®žè·µçš„ç›®çš„. +resolveInstanceMethod -forwardingTargetForSelector -methodSignatureForSelector -forwardInvocation -doesNotRecognizeSelector: ViewController.m 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182// è®°å¾—å¯¼å…¥ RunTime å¤´æ–‡ä»¶#import &lt;objc/runtime.h&gt;+ (BOOL)resolveInstanceMethod:(SEL)sel&#123; NSLog(@"---veryitman--- 1--- +resolveInstanceMethod: %@", NSStringFromSelector(sel)); NSString *methodName = NSStringFromSelector(sel); // è¿™é‡Œæ•…æ„ä¸ºä¹‹, è®©æµç¨‹å¾€ä¸‹èµ° if ([@"" isEqualToString:methodName]) &#123; SEL proxySelector = NSSelectorFromString(@"proxyMethod"); IMP impletor = class_getMethodImplementation(self, proxySelector); // èŽ·å–å®žä¾‹æ–¹æ³• Method method = class_getInstanceMethod(self, proxySelector); const char *types = method_getTypeEncoding(method); // æ·»åŠ  OC çš„å‡½æ•° class_addMethod([self class], sel, impletor, types); return YES; &#125; return [super resolveInstanceMethod:sel];&#125;/// è½¬å‘ç»™å¯¹åº”çš„æŸä¸ªå¯¹è±¡æ¥æ‰§è¡Œ aSelector- (id)forwardingTargetForSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 2--- -forwardingTargetForSelector"); NSString *selectorName = NSStringFromSelector(aSelector); if ([sPerformInstanceMethodName isEqualToString:selectorName]) &#123; // è®© MZTempObj åŽ»æ‰§è¡Œ aSelector, å®žçŽ°æ¶ˆæ¯çš„è½¬å‘ MZTempObj *myobject = [[MZTempObj alloc] init]; return myobject; &#125; id obj = [super forwardingTargetForSelector:aSelector]; return obj;&#125;- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 3--- -methodSignatureForSelector"); // æ‰¾å‡ºå¯¹åº”çš„ aSelector ç­¾å NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; if (nil == signature) &#123; // æ˜¯å¦æœ‰ aSelector if ([MZTempObj instancesRespondToSelector:aSelector]) &#123; signature = [MZTempObj instanceMethodSignatureForSelector:aSelector]; &#125; &#125; return signature;&#125;- (void)forwardInvocation:(NSInvocation *)anInvocation&#123; NSLog(@"---veryitman--- 4--- -forwardInvocation"); if ([MZTempObj instancesRespondToSelector:anInvocation.selector]) &#123; [anInvocation invokeWithTarget:[[MZTempObj alloc] init]]; &#125; else &#123; [super forwardInvocation:anInvocation]; &#125;&#125;- (void)doesNotRecognizeSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 5--- -doesNotRecognizeSelector: %@", NSStringFromSelector(aSelector));&#125; è¿è¡Œç¨‹åº, æŽ§åˆ¶å°æ‰“å°ç»“æžœå¦‚ä¸‹: 123---veryitman--- 1--- +resolveInstanceMethod---veryitman--- 2--- -forwardingTargetForSelector---veryitman--- veryTestMethod è¿™é‡Œå¯¹ç…§ä¹‹å‰çš„æµç¨‹å›¾æ˜¯å®Œå…¨ç¬¦åˆçš„, é‚£ä¹ˆæ€Žä¹ˆè®©å…¶æ‰§è¡Œ 3 å’Œ 4 å‘¢? å¾ˆç®€å•, ä¿®æ”¹ä¸€ä¸‹ forwardingTargetForSelector é‡Œé¢çš„å®žçŽ°å³å¯. 12345678910111213141516171819- (id)forwardingTargetForSelector:(SEL)aSelector&#123; NSLog(@"---veryitman--- 2--- -forwardingTargetForSelector"); NSString *selectorName = NSStringFromSelector(aSelector); // æ•…æ„ä¸ºä¹‹ if ([@"" isEqualToString:selectorName]) &#123; // è®© MZTempObj åŽ»æ‰§è¡Œ aSelector, å®žçŽ°æ¶ˆæ¯çš„è½¬å‘ MZTempObj *myobject = [[MZTempObj alloc] init]; return myobject; &#125; id obj = [super forwardingTargetForSelector:aSelector]; return obj;&#125; å†æ¬¡æ‰§è¡Œçœ‹ç»“æžœ: 123456---veryitman--- 1--- +resolveInstanceMethod veryTestMethod---veryitman--- 2--- -forwardingTargetForSelector---veryitman--- 3--- -methodSignatureForSelector---veryitman--- 1--- +resolveInstanceMethod: _forwardStackInvocation:---veryitman--- 4--- -forwardInvocation---veryitman--- veryTestMethod æ³¨æ„: è¿™é‡Œåœ¨ 3åŽé¢ä¼šå¤šäº†ä¸€ä¸ª 1--- resolveInstanceMethod çš„æ‰“å°, æ˜¯ç³»ç»Ÿè°ƒç”¨çš„, æ­¤æ—¶å¯¹åº”çš„ sel æ˜¯ _forwardStackInvocation. å¦‚æžœä¸åŽ»é‡å†™ methodSignatureForSelector æ‰“å°ç»“æžœå¦‚ä¸‹: 123---veryitman--- 1--- +resolveInstanceMethod---veryitman--- 2--- -forwardingTargetForSelector---veryitman--- 5--- -doesNotRecognizeSelector: veryTestMethod å‚è€ƒæ–‡æ¡£1.Apple RunTime æºç  objc4-723.tar.gz 2.Message Forwarding æŽ¨èOC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹ç±»æ–¹æ³•çš„è½¬å‘æµç¨‹ OC-RunTime: æ€»ç»“æ¶ˆæ¯è½¬å‘ä¸­ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ ç‚¹å‡»ä¸‹è½½æ–‡ä¸­å®Œæ•´çš„ Demo. æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS RunTime MessageForward</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹]]></title>
    <url>%2F2018%2F03%2F31%2FOC-RunTime-%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91%E4%B9%8B%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%E7%9A%84%E8%BD%AC%E5%8F%91%E6%B5%81%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ æœ¬ç¯‡åªæ˜¯ä»Žç³»ç»Ÿå‡½æ•°çš„å®žçŽ°ä¸Š, æ¥åˆ†æžæ¶ˆæ¯è½¬å‘çš„æµç¨‹. ä¸‹ä¸€ç¯‡ç»“åˆæœ¬ç¯‡çš„ç†è®ºå’Œå®žé™…çš„ä¾‹å­æ¥åˆ†æžä¸€ä¸‹æ¶ˆæ¯è½¬å‘. éœ€è¦æ˜Žç¡®çš„å‡ ä¸ªé—®é¢˜åœ¨å¾€ä¸‹çœ‹è¿™ç¯‡åšæ–‡ä¹‹å‰, æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦å¤§å®¶è¾¾æˆå…±è¯†. 1.Objective-C çš„ç‰¹ç‚¹æŒ‰ç…§æ˜¯å¦éœ€è¦ç¼–è¯‘çš„åŽŸç†æ¥è¯´, ç¼–ç¨‹è¯­è¨€ä¸€èˆ¬å¯ä»¥åˆ†ä¸ºé™æ€ç¼–è¯‘ç±»åž‹å’ŒåŠ¨æ€è§£é‡Šç±»åž‹. å¦‚ Java/C/C++ æ˜¯å±žäºŽç¼–è¯‘ç±»åž‹çš„è¯­è¨€, Php/Python/Ruby å±žäºŽè§£é‡Šç±»åž‹çš„è¯­è¨€. Objective-C æ˜¯åŸºäºŽ C å¹¶å…·æœ‰è‡ªèº«ç‰¹ç‚¹çš„ç¼–è¯‘åž‹è¯­è¨€, å†åŠ ä¸Šå…¶ RunTime æœºåˆ¶, Objective-C æ—¢æ˜¯ç¼–è¯‘åž‹åˆæ˜¯åŠ¨æ€çš„ä¸€é—¨ç¼–ç¨‹è¯­è¨€. æ‰€è°“çš„åŠ¨æ€æŒ‡çš„æ˜¯åœ¨ç¨‹åºç¼–è¯‘åŽè¿è¡Œä¸­å¯ä»¥æ”¹å˜å…¶ç»“æž„. 2.å‡½æ•°è°ƒç”¨åœ¨ Objective-C ä¸­è°ƒç”¨å‡½æ•°, è¢«è§£é‡Šä¸ºå‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯, è¯¥å¯¹è±¡å¯ä»¥æ˜¯ç±»å¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯å®žä¾‹å¯¹è±¡. ä¾‹å¦‚: 1[person play]; æ„æ€æ˜¯å‘å®žä¾‹å¯¹è±¡ person å‘é€ä¸€ä¸ª play çš„æ¶ˆæ¯. è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯, å‘ä¸€ä¸ªç©ºå¯¹è±¡(nil) å‘é€æ¶ˆæ¯ä¸ä¼š crash, å¦‚æžœåœ¨ Java ä¸­è¿™ä¸ªæ˜¯ä¸è¡Œçš„.ä¾‹å¦‚: 12person = nil;[person play]; è¿™ä¸ªä¸ä¼šå¯¼è‡´ç¨‹åºå´©æºƒ, åªæ˜¯è°ƒç”¨ play å‡½æ•°æ²¡æœ‰ä»»ä½•ååº”ç½¢äº†! 3.selfåœ¨ C++/Java è¯­è¨€ä¸­, æœ‰ this æŒ‡é’ˆçš„æ¦‚å¿µ, åœ¨ Objective-C ä¸­, ä¹Ÿæœ‰ç±»ä¼¼çš„ this æŒ‡é’ˆå³ self. self æ—¢å¯ä»¥æ˜¯å®žä¾‹å¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯ç±»å¯¹è±¡. è¿™é‡Œä¸¾ä¸ªä¾‹å­, ä¸‹é¢ä¸¤ä¸ªåŒåå‡½æ•°, ä¸€ä¸ªæ˜¯ç±»æ–¹æ³•(+)ä¸€ä¸ªæ˜¯å®žä¾‹æ–¹æ³•(-).è·Ÿ Java ä¸­çš„ç±»ä¼¼, å®žä¾‹æ–¹æ³•å¯ä»¥ç›´æŽ¥ä½¿ç”¨ç±»æ–¹æ³•, ä½†æ˜¯ç±»æ–¹æ³•ä¸å¯ä»¥ç›´æŽ¥ä½¿ç”¨å®žä¾‹æ–¹æ³•. 123456789101112131415161718192021+ (void)testClassMethod&#123; [self sendMsg];&#125;- (void)testInstanceMethod&#123; [self sendMsg];&#125;// ç±»æ–¹æ³•+ (void)sendMsg&#123; NSLog(@"+ sendMsg. self: %@", self);&#125;// å®žä¾‹æ–¹æ³•- (void)sendMsg&#123; NSLog(@"- sendMsg. self: %@", self);&#125; åœ¨ ViewController ä¸­åˆ†åˆ«è°ƒç”¨ä¸¤ä¸ª test æ–¹æ³•, è¾“å‡ºå†…å®¹, å¦‚ä¸‹: 123+ sendMsg. self: ViewController- sendMsg. self: &lt;ViewController: 0x7fc64740a5e0&gt; ä»Žç»“æžœå¯ä»¥çœ‹å‡ºç±»æ–¹æ³•ä¸­çš„ self ä»£è¡¨çš„æ˜¯è¯¥ç±», å®žä¾‹æ–¹æ³•ä¸­çš„ self æŒ‡çš„æ˜¯ç±»çš„ä¸€ä¸ªå®žä¾‹å³å¯¹è±¡. æ›´å¤š self çš„çŸ¥è¯†ç‚¹ï¼Œå¯ä»¥å‚è€ƒ OC: self è¿™ç¯‡æ–‡ç« ã€‚ å…³äºŽ Message ForwardingMessage Forwarding å³æ¶ˆæ¯è½¬å‘. å…³äºŽæ¶ˆæ¯è½¬å‘, å®˜æ–¹æ–‡æ¡£ Message Forwarding æ˜¯è¿™ä¹ˆè§£é‡Šçš„: 123Sending a message to an object that does not handle that message is an error. However, before announcing the error, the runtime system gives the receiving object a second chance to handle the message. å¤§æ¦‚æ„æ€æ˜¯è¿™æ ·çš„: å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯, è¯¥å¯¹è±¡å¦‚æžœæ— æ³•å¤„ç†è¯¥æ¶ˆæ¯, ç³»ç»Ÿå°±ä¼šæŠ¥é”™, ä½†æ˜¯åœ¨æŠ¥é”™ä¹‹å‰, åˆ©ç”¨ Objective-C æä¾›çš„è¿è¡Œæ—¶æœºåˆ¶å¯ä»¥é˜²æ­¢æŠ¥é”™çš„å‘ç”Ÿ. åœ¨ iOS ä¸­ç±»ä¼¼è¿™æ ·çš„æŠ¥é”™ä¼šå¯¼è‡´ç¨‹åºç›´æŽ¥ crash.è¿™é‡Œçš„å¯¹è±¡, å¯ä»¥æ˜¯å®žä¾‹å¯¹è±¡åˆå¯ä»¥æ˜¯ç±»å¯¹è±¡. åœ¨å¼€å‘è¿‡ç¨‹ä¸­, å¤§å®¶ä¸€èˆ¬éƒ½ä¼šé‡åˆ°ç±»ä¼¼çš„ crash: 123456789101112 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Controller play]: unrecognized selector sent to instance 0x7ff779f322a0'*** First throw call stack:(CoreFoundation 0x000000010d89712b __exceptionPreprocess + 171libobjc.A.dylib 0x000000010cf2bf41 objc_exception_throw + 48CoreFoundation 0x000000010d918024 -[NSObject(NSObject) doesNotRecognizeSelector:] + 132UIKit 0x000000010df48f51 -[UIResponder doesNotRecognizeSelector:] + 295CoreFoundation 0x000000010d819f78 ___forwarding___ + 1432CoreFoundation 0x000000010d819958 _CF_forwarding_prep_0 + 120) è¿™ä¸ª crash å¾ˆæ˜Žæ˜¾, Controller ä¸­è°ƒç”¨äº†ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•° play. è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªè¢«è°ƒç”¨çš„ç³»ç»Ÿå‡½æ•° doesNotRecognizeSelector, ä»Šå¤©æˆ‘ä»¬å‰–æžä¸€ä¸‹æ¶ˆæ¯è½¬å‘çš„æµç¨‹. å®žä¾‹æ–¹æ³•(æ¶ˆæ¯)è½¬å‘çš„æµç¨‹åœ¨ä¸Šé¢å·²ç»è¯´è¿‡, OC å¯ä»¥é€šè¿‡è¿è¡Œæ—¶æ¥é¿å…å› ä¸ºæ‰¾ä¸åˆ°æ–¹æ³•è€Œå¯¼è‡´é”™è¯¯. å…¶å®ž, å«ä¹‰å°±æ˜¯ OC ç»™äº†æˆ‘ä»¬ç¬¬äºŒæ¬¡æœºä¼šæ¥é¿å…ç±»ä¼¼çš„é”™è¯¯. æˆ‘ä»¬é‡å†™ NSObject ä¸­çš„ 5 ä¸ªæ–¹æ³•, åˆ†åˆ«æ˜¯: +resolveInstanceMethod -forwardingTargetForSelector -methodSignatureForSelector -forwardInvocation -doesNotRecognizeSelector: å½“æ— æ³•æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•æ—¶, è°ƒç”¨çš„æ–¹æ³•å’Œé¡ºåºå¤§è‡´å¦‚ä¸‹: 1234+resolveInstanceMethod-forwardingTargetForSelector-methodSignatureForSelector-doesNotRecognizeSelector: å½“æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•æ—¶, è°ƒç”¨æ–¹æ³•å’Œé¡ºåºå¤§è‡´å¦‚ä¸‹: 1234+resolveInstanceMethod-forwardingTargetForSelector-methodSignatureForSelector-forwardInvocation æ ¹æ®å®žè·µç»“æžœ, ç”»æµç¨‹å›¾å¦‚ä¸‹: ä¸‹é¢åˆ†åˆ«è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªæ–¹æ³•çš„ä½œç”¨å’Œæ„ä¹‰. + (BOOL)resolveInstanceMethod:(SEL)sel è§£æžå¯¹åº”çš„å®žä¾‹æ–¹æ³•. åœ¨è¯¥æ–¹æ³•ä¸­å…è®¸å¢žåŠ ä¸€ä¸ªæ–¹æ³•çš„å®žçŽ°, ä»Žè€Œå®žçŽ°åŠ¨æ€æ·»åŠ æ–¹æ³•. é»˜è®¤è¿”å›ž NO. åœ¨ NSObject.mm ä¸­å¯ä»¥çœ‹åˆ°æ–¹æ³•çš„å®žçŽ°: 123+ (BOOL)resolveInstanceMethod:(SEL)sel &#123; return NO;&#125; - (id)forwardingTargetForSelector:(SEL)aSelector å°†å¯¹åº”çš„ selector è½¬å‘ç»™æŒ‡å®šçš„å¯¹è±¡. æ¢å¥è¯è¯´å°±æ˜¯å°†ä¹‹å‰æ²¡æœ‰å®žçŽ°çš„ selector è½¬äº¤ç»™å¦å¤–ä¸€ä¸ªå¯èƒ½å®žçŽ°äº†è¯¥ selector çš„å¯¹è±¡åŽ»å¤„ç†. é»˜è®¤è¿”å›ž nil. - (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector è¯¥æ–¹æ³•è¿”å›žå¯¹ selector å®žçŽ°çš„æ–¹æ³•ç­¾å. é»˜è®¤å®žçŽ°å¦‚ä¸‹: 1234- (NSMethodSignature *)methodSignatureForSelector:(SEL)sel &#123; _objc_fatal("-[NSObject methodSignatureForSelector:] " "not available without CoreFoundation");&#125; - (void)forwardInvocation:(NSInvocation *)anInvocation è¯¥æ–¹æ³•æ˜¯ä¾èµ–ç¬¬3ä¸ªæ–¹æ³•çš„, å¦‚æžœç¬¬ä¸‰ä¸ªæ–¹æ³•æ‰¾åˆ°äº†å¯¹åº”çš„æ–¹æ³•ç­¾å, è¯¥æ–¹æ³•å°±å¯ä»¥å®žçŽ°è½¬å‘è°ƒç”¨äº†. - (void)doesNotRecognizeSelector:(SEL)sel å¦‚æžœå‰é¢å‡ ä¸ªæ–¹æ³•éƒ½æ²¡æœ‰å¤„ç†å¥½, ç³»ç»Ÿä¼šè°ƒç”¨è¯¥æ–¹æ³•, ç›´æŽ¥å¯¼è‡´ç¨‹åº crash, ä¹Ÿç§°ä¹‹ä¸ºç»ˆæžæ­»äº¡æ–¹æ³•. æºç å®žçŽ°å¦‚ä¸‹: 1234- (void)doesNotRecognizeSelector:(SEL)sel &#123; _objc_fatal("-[%s %s]: unrecognized selector sent to instance %p", object_getClassName(self), sel_getName(sel), self);&#125; æ€»ç»“, Objective-C ä¸­ç»™ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯ä¼šç»è¿‡å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š æ­¥éª¤1. åœ¨ç±»çš„è°ƒåº¦è¡¨(dispatch table) ä¸­æ‰¾è¦æ‰§è¡Œçš„å‡½æ•°(æ¶ˆæ¯), å¦‚æžœæ‰¾åˆ°äº†ï¼Œåˆ°ç›¸åº”çš„å‡½æ•° IMP åŽ»æ‰§è¡Œ. æ¯ä¸ªç±»çš„ç»“æž„ä½“åŒ…å«ç€ä¸¤ä¸ªå¿…å¤‡çš„å…ƒç´ :[1]. æŒ‡å‘çˆ¶ç±»çš„æŒ‡é’ˆ[2]. class dispatch table(è°ƒåº¦è¡¨). è°ƒåº¦è¡¨ä¸­åŒ…å«äº† method selectors å’Œç‰¹å®š class ç›¸åº”æ–¹æ³•å®žçŽ°çš„åœ°å€. æ­¥éª¤2. å¦‚æžœæ²¡æ‰¾åˆ°ï¼Œè¿è¡Œæ—¶ä¼šè°ƒç”¨ +resolveInstanceMethod: æˆ–è€… +resolveClassMethod: å°è¯•è§£æžè¿™ä¸ªæ¶ˆæ¯. åœ¨è¯¥æ–¹æ³•ä¸­, å…è®¸åŠ¨æ€æ·»åŠ ä¸€ä¸ªæ–¹æ³•çš„å®žçŽ°. å…³äºŽ resolveClassMethod è¿™ä¸ªæ”¾åœ¨å¦ä¸€ç¯‡åšå®¢ä¸­è®²è§£. æ­¥éª¤3. å¦‚æžœ resolveXX è¿”å›ž YES, ç›´æŽ¥ç»“æŸåŽé¢çš„æµç¨‹, æ‰§è¡Œè§£æžå¾—åˆ°çš„æ–¹æ³•. å¦‚æžœ resolveXX è¿”å›ž NOï¼Œè¿è¡Œæ—¶å°±å‘é€ forwardingTargetForSelector æ¶ˆæ¯, å…è®¸è¿™ä¸ªæ¶ˆæ¯è½¬å‘ç»™å¦ä¸€ä¸ªå¯èƒ½å®žçŽ°äº†å¯¹åº” selector çš„å¯¹è±¡. æ­¥éª¤4. å¦‚æžœæ²¡æœ‰æ–°çš„ç›®æ ‡å¯¹è±¡è¿”å›ž, è¿è¡Œæ—¶å°±ä¼šå‘é€methodSignatureForSelector æ¶ˆæ¯, æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ç­¾å.å¦‚æžœæ‰¾åˆ°äº†, ä¼šæŽ¥ç€è°ƒç”¨ forwardInvocation, å¦‚æžœæ²¡æœ‰æ‰¾åˆ°å³è¿”å›ž nil, é‚£ä¹ˆç›´æŽ¥è°ƒç”¨ doesNotRecognizeSelector. ä¸‹ä¸€ç¯‡ç»“åˆå®žé™…ä¾‹å­åˆ†æžä¸€ä¸‹æ•´ä¸ªå®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹. å‚è€ƒæ–‡æ¡£1.Apple å¼€å‘è€…æ–‡æ¡£ Message Forwarding 2.Apple RunTime æºç  objc4-723.tar.gz æŽ¨èOC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹å®žä¾‹æ–¹æ³•çš„è½¬å‘æµç¨‹å®žä¾‹è®²è§£ OC-RunTime: æ¶ˆæ¯è½¬å‘ä¹‹ç±»æ–¹æ³•çš„è½¬å‘æµç¨‹ OC-RunTime: æ€»ç»“æ¶ˆæ¯è½¬å‘ä¸­ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ ç‚¹å‡»ä¸‹è½½æ–‡ä¸­å®Œæ•´çš„ Demo. æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS RunTime MessageForward</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MacOS æ–‡ä»¶å¤§å°çš„å•ä½]]></title>
    <url>%2F2018%2F03%2F24%2FMacOS-%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E7%9A%84%E5%8D%95%E4%BD%8D%2F</url>
    <content type="text"><![CDATA[ç¼˜ç”±æˆ‘ä¸€ç›´ä»¥ä¸ºæ–‡ä»¶å¤§å°éƒ½æ˜¯æŒ‰ç…§ 1024 ä¸ºå•ä½æ¥è®¡ç®—çš„, ä½†æ˜¯åœ¨ MacOS ä¸Šé¢æ˜¯æŒ‰ç…§ 1000 ä¸ºå•ä½è®¡ç®—çš„, windows ä¸Šé¢æ˜¯æŒ‰ç…§ 1024 ä¸ºå•ä½æ¥è®¡ç®—çš„. å¶ç„¶çš„å‘çŽ°ä¹‹å‰å†™ä»£ç , éœ€è¦ç”¨åˆ°èŽ·å–æ–‡ä»¶å¤§å°çš„åŠŸèƒ½, ä»£ç å¦‚ä¸‹: 123456789101112131415// è¯»å–æ–‡ä»¶å¤§å°long getFileSize(char *filename) &#123; FILE *fp = fopen(filename, &quot;r&quot;); if (!fp) &#123; return -1; &#125; fseek(fp, 0, SEEK_END); long size = ftell(fp); fclose(fp); return size;&#125; æ–‡ä»¶åæ˜¯ mm.aac, ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶, èŽ·å–åˆ°çš„æ–‡ä»¶å¤§å°æ˜¯ 76395 å­—èŠ‚. æˆ‘æ— èŠè‡³æž, ä½¿ç”¨ du å‘½ä»¤æ¥èŽ·å–è¯¥æ–‡ä»¶çš„å¤§å°: 1du -sh mm.aac æ˜¾ç¤ºæ–‡ä»¶å¤§å°æ˜¯ 76KB. MacOS ä¸Šé¢æŸ¥çœ‹æ–‡ä»¶å±žæ€§, èŽ·å–åˆ°çš„å¤§å°ä¹Ÿæ˜¯ 76KB äºŒè€…èŽ·å–çš„æ–‡ä»¶å¤§å°ä¸€è‡´, å¯ä»¥çœ‹å‡ºæ–‡ä»¶çš„å¤§å°æ˜¯æ­£ç¡®çš„. äºŽæ˜¯æˆ‘æŸ¥äº†ä¸€ä¸‹åœ¨ windows ä¸Šé¢çš„è¯¥æ–‡ä»¶çš„å¤§å°, å¦‚ä¸‹æˆªå›¾: å¯ä»¥çœ‹å‡º, MacOS ä¸Šé¢æ–‡ä»¶å¤§å°æ˜¯æŒ‰ç…§ 1000 å•ä½æ¥è®¡ç®—çš„, è€Œ windows ä¸Šé¢æ˜¯æŒ‰ç…§ 1024 å•ä½æ¥è®¡ç®—çš„. 1276395 / 1000 = 76.39576395 / 1024 = 74.604 æŒ‰ç…§ GNU çš„ä¹ æƒ¯ï¼Œå•çº¯çš„ K M G T åˆ†åˆ«æŒ‡ä»£ KiB MiB GiB TiB ä»¥ 1024 è¿›åˆ¶æ•°æ®é‡å•ä½ï¼Œç”¨ KB MB GB TB ä»¥ 1000 è¿›åˆ¶æ•°æ®é‡å•ä½. æ‰€ä»¥, åœ¨ windows ä¸Šé¢å‡†ç¡®è¡¨ç¤º 76395bytes åº”è¯¥æ˜¯ 74.6KiB. æŽ¨èåœ¨çº¿è®¡ç®— å•ä½æ¢ç®—.]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>MacOS C æ–‡ä»¶å¤§å°å•ä½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GO: å†™ç¬¬ä¸€ä¸ª GOLang ç¨‹åº]]></title>
    <url>%2F2018%2F03%2F11%2FGO-%E5%86%99%E7%AC%AC%E4%B8%80%E4%B8%AA-GOLang-%E7%A8%8B%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹æœ¬æ–‡åˆ†äº«åœ¨ MacOS ä¸Šé¢é€šè¿‡ pkg çš„æ–¹å¼å®‰è£… GO ç¼–ç¨‹çŽ¯å¢ƒ, ä»¥åŠç¼–è¯‘è¿è¡Œç¬¬ä¸€ä¸ªä½¿ç”¨ GOLang ç¼–å†™çš„ç¨‹åº. å…¶ä»–å…³äºŽ GO çš„å®‰è£…æ–¹å¼, å¦‚ä½¿ç”¨ Homebrew å®‰è£…æˆ–è€…ä½¿ç”¨æºç å®‰è£…çš„æ–¹å¼, è¯·è‡ªè¡Œå°è¯•. ä¸‹è½½å®‰è£…åœ¨ è¿™é‡Œ ä¸‹è½½ GO çš„ pkg å®‰è£…åŒ…. ä½†æ˜¯ä½ éœ€è¦ç§‘(fan)å­¦(qiang)æ‰èƒ½ä¸‹è½½. ä½ ä¹Ÿå¯ä»¥ä¸‹è½½ Stable versions. ä¸‹è½½å®ŒæˆåŽ, ç›´æŽ¥åŒå‡»å®‰è£…å³å¯. é…ç½®çŽ¯å¢ƒå˜é‡å®‰è£…å®ŒæˆåŽ, GO å®‰è£…ç›®å½•åœ¨ /usr/local ä¸‹é¢. å®‰è£…ç›®å½•å¦‚ä¸‹å›¾æ‰€ç¤º: éœ€è¦å°†å…¶è®¾ç½®åˆ°çŽ¯å¢ƒå˜é‡ä¸­, æ‰èƒ½åœ¨ç»ˆç«¯ä½¿ç”¨å…¶ç›¸å…³çš„å‘½ä»¤. ç¼–è¾‘ ~/.bash_profile, å¢žåŠ ä¸‹é¢å‡ è¡Œå³å¯. 12345# Golangexport GOROOT=/usr/local/goexport GOPATH=~/goworkexport PATH=$GOROOT/bin:$GOPATH:$PATH è®°ä½, GOROOT å’Œ GOPATH å¿…é¡»è®¾ç½®.gowork æ˜¯æˆ‘è‡ªå·±æ–°å»ºçš„ç›®å½•. GOPATH å¯ä»¥ç†è§£ä¸ºå·¥ä½œç›®å½•. å…³äºŽ GOPATH å¯ä»¥å‚è€ƒè¿™ä¸ªæ–‡æ¡£ SettingGOPATH. æˆ‘åˆšå¼€å§‹æ²¡æœ‰é…ç½® GOROOT å˜é‡, æ‰§è¡Œ go å‘½ä»¤ä¼šæç¤ºè­¦å‘Š, è­¦å‘Šå†…å®¹å¦‚ä¸‹: 1warning: GOPATH set to GOROOT (/usr/local/go) has no effect ç¼–è¾‘ä¿å­˜, ç„¶åŽä½¿å…¶ç«‹å³ç”Ÿæ•ˆ. 1source ~/.bash_profile æ£€æŸ¥çŽ¯å¢ƒå˜é‡æ˜¯å¦ç”Ÿæ•ˆ. 1go version å¯¹åº”è¾“å‡º 1go version go1.9.4 darwin/amd64 ä¹Ÿå¯ä»¥ä½¿ç”¨ go env æ¥æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„å†…å®¹. ç¼–è¯‘è¿è¡Œ GOLang ç¨‹åº1.ç¼–å†™ä»£ç  ç¼–è¾‘ä¸€ä¸ª Hello GOLang çš„ç¨‹åº. åœ¨ä»»æ„ä¸€ä¸ªæ–‡ä»¶å¤¹ä½ç½®, æ–°å»ºä¸€ä¸ª go_hello.go çš„æ–‡ä»¶. 1touch go_hello.go å†™å…¥å¦‚ä¸‹ç¨‹åº: 1234567package mainimport &quot;fmt&quot;func main() &#123; fmt.Println(&quot;Hello, GOLang!&quot;)&#125; 2.ç¼–è¯‘è¿è¡Œ ä½¿ç”¨ go build å‘½ä»¤ç¼–è¯‘. 1go build go_hello.go ç¼–è¯‘æˆåŠŸåŽ, ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ go_hello. æ‰§è¡Œå³å¯. 1./go_hello æˆ–è€…ç›´æŽ¥è¿è¡Œ, æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤. 1go run go_hello.go è¿™ä¸ªä¸ä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶. è‡³æ­¤, GO çš„ç¼–ç¨‹çŽ¯å¢ƒå·²ç»æ­å»ºå®Œæˆ, æ¯”è¾ƒç®€å•. å¸è½½ GOå¦‚æžœä½ æƒ³å¸è½½ GO çŽ¯å¢ƒ, åªéœ€è¦ä¸‰ä¸ªæ­¥éª¤. 1.åˆ é™¤å®‰è£…ç›®å½• 1sudo rm -fr /usr/local/go 2.åˆ é™¤ go æ–‡ä»¶ 1sudo rm -f /etc/paths.d/go 3.åˆ é™¤çŽ¯å¢ƒå˜é‡ ç¼–è¾‘ etc, åˆ é™¤å¯¹åº”æ·»åŠ çš„ go çŽ¯å¢ƒå˜é‡å³å¯. å‚è€ƒGO: Getting Started GO: DOC SettingGOPATH]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>GOLanguage Google</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[C æŒ‡é’ˆä¸Ž OC å¯¹è±¡ä¹‹é—´çš„è½¬æ¢]]></title>
    <url>%2F2018%2F03%2F07%2FC-%E6%8C%87%E9%92%88%E4%B8%8E-OC-%E5%AF%B9%E8%B1%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2%2F</url>
    <content type="text"><![CDATA[Core Foundation æ¡†æž¶Core Foundation æ¡†æž¶ (CoreFoundation.framework) æ˜¯ä¸€ç»„ C è¯­è¨€æŽ¥å£ï¼Œ ç®€ç§° CF. å®ƒä»¬ä¸º iOS åº”ç”¨ç¨‹åºæä¾›åŸºæœ¬æ•°æ®ç®¡ç†å’ŒæœåŠ¡åŠŸèƒ½. å¦‚ Core Graphicsã€Core Textï¼Œå¹¶ä¸”æˆ‘ä»¬å¯èƒ½éœ€è¦å°† CF å¯¹è±¡å’ŒOC å¯¹è±¡è¿›è¡Œç›¸äº’è½¬åŒ–ï¼ŒARC ä¸‹ï¼Œç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨ç®¡ç† CF å¯¹è±¡çš„å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç®¡ç†. åˆ›å»ºä¸€ä¸ª CF å¯¹è±¡ä½¿ç”¨åŽ, éœ€è¦ä½¿ç”¨ CFRelease å°†å…¶æ‰‹åŠ¨é‡Šæ”¾, æ¢å¥è¯è¯´, Core Foundation å¯¹è±¡ç±»åž‹ä¸åœ¨ ARC ç®¡ç†èŒƒç•´å†…. å¦‚ä½•å°† CF å’Œ OC å¯¹è±¡æœ‰æ•ˆçš„ç»“åˆèµ·æ¥, åœ¨ ARC çŽ¯å¢ƒä¸‹, æä¾›äº† æ¡¥æŽ¥ çš„æŠ€æœ¯, å³ ARC ä¸‹ OC å¯¹è±¡å’Œ Core Foundation å¯¹è±¡ä¹‹é—´çš„æ¡¥æ¢. ARC æ¡¥æŽ¥ARC ä¸‹ C æŒ‡é’ˆä¸Ž OC æŒ‡é’ˆ(å¯¹è±¡)ä¹‹é—´è½¬æ¢, ä¸€èˆ¬ä¼šç”¨åˆ°ä¸‹é¢çš„æ–¹æ³•. 12345__bridge_retained &lt;#CF type#&gt;)&lt;#expression#&gt;__bridge_transfer &lt;#Objective-C type#&gt;)&lt;#expression#&gt;__bridge &lt;#type#&gt;)&lt;#expression#&gt; ä¹Ÿå°±æ˜¯æ‰€è°“çš„ æ¡¥æŽ¥, å®ƒæ˜¯ Object-C åœ¨ ARC çŽ¯å¢ƒä¸‹å¼€å‘å‡ºæ¥çš„ä¸€ç§ç”¨ä½œè½¬æ¢ C æŒ‡é’ˆè·Ÿ OC (ç±»)æŒ‡é’ˆçš„ä¸€ç§è½¬æ¢æŠ€æœ¯, æ‰€ä»¥æ˜¯ ARC ä¸‹çš„ç§°è°“, åœ¨ MRC ä¸‹æ²¡æœ‰ æ¡¥æŽ¥. é’ˆå¯¹å†…å­˜ç®¡ç†é—®é¢˜ï¼ŒARC å¯ä»¥ç®¡ç† Objective-C å¯¹è±¡, ä½†ä¸æ”¯æŒ Core Foundation å¯¹è±¡çš„ç®¡ç†ï¼Œæ‰€ä»¥è½¬æ¢åŽè¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šè°æ¥é‡Šæ”¾ä½¿ç”¨åŽçš„å¯¹è±¡. ç»“åˆ ARC å’Œ å†…å­˜ç®¡ç†, ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸€ä¸‹. Core Foundation å¯¹è±¡å¿…é¡»ä½¿ç”¨ CFRetain å’Œ CFRelease æ¥è¿›è¡Œå†…å­˜ç®¡ç†.å½“ä½¿ç”¨ Objective-C å’Œ Core Foundation å¯¹è±¡ç›¸äº’è½¬æ¢çš„æ—¶å€™ï¼Œå¿…é¡»è®©ç¼–è¯‘å™¨çŸ¥é“ï¼Œåˆ°åº•ç”±è°æ¥è´Ÿè´£é‡Šæ”¾å¯¹è±¡ï¼Œæ˜¯å¦äº¤ç»™ ARC å¤„ç†, åªæœ‰æ­£ç¡®çš„å¤„ç†ï¼Œæ‰èƒ½é¿å…å†…å­˜æ³„æ¼å’Œ double free å¯¼è‡´ç¨‹åºå´©æºƒ. __bridge_retained &lt;#CF type#&gt;)&lt;#expression#&gt;__bridge_retained ç­‰åŒäºŽ CFBridgingRetain(). å°† Objective-C å¯¹è±¡è½¬æ¢ä¸º Core Foundation å¯¹è±¡ï¼ŒæŠŠå¯¹è±¡æ‰€æœ‰æƒæ¡¥æŽ¥ç»™ Core Foundation å¯¹è±¡ï¼ŒåŒæ—¶å‰¥å¤º ARC çš„ç®¡ç†æƒï¼ŒåŽç»­éœ€è¦å¼€å‘è€…ä½¿ç”¨ CFRelease æˆ–è€…ç›¸å…³æ–¹æ³•æ‰‹åŠ¨æ¥é‡Šæ”¾ CF å¯¹è±¡. ç¤ºä¾‹: 12345678910void *cPointer;NSObject *objc = [[NSObject alloc] init];//å°† OC å¯¹è±¡è½¬æ¢ä¸º C æŒ‡é’ˆcPointer = (__bridge_retained void*)objc;//use cPointer ...//éœ€è¦é‡Šæ”¾èµ„æºCFRelease(cPointer); åœ¨ ARC ä¸‹, CFBridgingRetain å®žçŽ°å¦‚ä¸‹: 123NS_INLINE CF_RETURNS_RETAINED CFTypeRef _Nullable CFBridgingRetain(id _Nullable X) &#123; return (__bridge_retained CFTypeRef)X;&#125; å…³äºŽ CFTypeRef, å¦‚ä¸‹: 1typedef const CF_BRIDGED_TYPE(id) void * CFTypeRef; æ‰€ä»¥ CFBridgingRetain è¿”å›žå€¼æ˜¯ const void * ç±»åž‹çš„. ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥æ”¹å†™ä¸º: 1234567const void *cPointer;const NSObject *objc = [[NSObject alloc] init];cPointer = CFBridgingRetain(objc); //use cPointer ... CFRelease(cPointer); __bridge_transfer &lt;#Objective-C type#&gt;)&lt;#expression#&gt;__bridge_transfer ç­‰åŒäºŽ CFBridgingRelease(). å°†éž OC å¯¹è±¡è½¬æ¢ä¸º OC å¯¹è±¡ï¼ŒåŒæ—¶å°†å¯¹è±¡çš„ç®¡ç†æƒäº¤ç»™ ARCï¼Œå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç®¡ç†å†…å­˜. ç¤ºä¾‹: 12345678CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);CFStringRef strUUID = CFUUIDCreateString(kCFAllocatorDefault, uuid);NSString *str = (__bridge_transfer NSString *)strUUID;//æ— éœ€é‡Šæ”¾ strUUID//CFRelease(strUUID);CFRelease(uuid); CFBridgingRelease å®žçŽ°å¦‚ä¸‹: 123NS_INLINE id _Nullable CFBridgingRelease(CFTypeRef CF_CONSUMED _Nullable X) &#123; return (__bridge_transfer id)X;&#125; ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥æ”¹å†™ä¸º: 12345678CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);CFStringRef strUUID = CFUUIDCreateString(kCFAllocatorDefault, uuid);NSString *str = CFBridgingRelease(strUUID); //æ— éœ€é‡Šæ”¾ strUUID//CFRelease(strUUID); CFRelease(uuid); __bridge__bridge ä¸æ”¹å˜å¯¹è±¡æ‰€æœ‰æƒ, éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥ç®¡ç†å†…å­˜, å®ƒä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ–¹æ³•, ä»ŽæŸç§ç¨‹åº¦ä¸Šæ¥è¯´, å®ƒæ˜¯ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•çš„ç®€åŒ–ç‰ˆæœ¬. __bridge å¯ä»¥å°† OC å¯¹è±¡ ä¸Ž C æŒ‡é’ˆç›¸äº’è½¬æ¢, ç¤ºä¾‹: 12345//CFString -&gt; OC å¯¹è±¡CFStringRef cfString = CFStringCreateWithCString(kCFAllocatorDefault, "very", kCFStringEncodingUTF8);NSString *nsString = (__bridge NSString *)cfString;NSLog(@"CFString -&gt; NSString: %@", nsString);CFRelease(cfString); å¦‚æžœå°† CFRelease(cfString) æ³¨é‡ŠæŽ‰, Xcode çš„é™æ€æ£€æµ‹å™¨ä¼šå‘Šè¯‰ä½ æœ‰å†…å­˜æ³„éœ²çš„æƒ…å†µ, å¦‚å›¾: å†æ¥å¦å¤–ä¸€ä¸ªä¾‹å­, å¦‚ä¸‹: 12345//OC å¯¹è±¡ -&gt; CFStringNSString *nstr = @"itman";CFStringRef cfStringRef = (__bridge CFStringRef)nstr;NSLog(@"NSString -&gt; CFString: %@", cfStringRef);CFRelease(cfStringRef); æ— è®ºæ˜¯ä½¿ç”¨ CFRelease(cfStringRef), è¿˜æ˜¯æ³¨é‡ŠæŽ‰ CFRelease(cfStringRef), é™æ€æ£€æµ‹å™¨éƒ½ä¸ä¼šæŠ¥é”™. è¯´æ˜Žè¿™ç§æƒ…å†µä¸‹, å½“å‰çš„å†…å­˜ç®¡ç†å·²ç»è¢« OC å¯¹è±¡ç®¡ç†. ç»å…¸ä¾‹å­NSString ä¸Ž CFString è½¬æ¢1ã€NSString â†’ CFString 123456789&#123; NSString *string = @"veryitman.com"; // æ–¹æ³•1: ä¸éœ€è¦é‡Šæ”¾ CFStringRef cfStr = (__bridge CFStringRef)string; // æ–¹æ³•2: éœ€è¦é‡Šæ”¾, è¿™é‡Œ retain äº† CFStringRef cfStr2 = (__bridge_retained CFStringRef)string; CFRelease(cfStr2);&#125; 2ã€CFString â†’ NSString 123456789CFStringRef cfStr = CFStringCreateWithCString(kCFAllocatorDefault, "veryitman", kCFStringEncodingUnicode); // æ–¹æ³•1: éœ€è¦é‡Šæ”¾NSString *string = (__bridge NSString *)cfStr;NSLog(@"OC string: %@", string);CFRelease(cfStr); // æ–¹æ³•2: ä¸éœ€è¦é‡Šæ”¾, __bridge_transfer è‡ªå¸¦ releasestring = (__bridge_transfer NSString *)cfStr; é‡ŽæŒ‡é’ˆè¿è¡Œä¸‹é¢çš„ç¤ºä¾‹: 1234567void *p;&#123; NSObject *objc = [[NSObject alloc] init]; p = (__bridge void*)objc;&#125; NSLog(@"mark: %@", (__bridge NSObject*)p); ä¼šç›´æŽ¥ crash, å¦‚å›¾: å½“ objc è¿™ä¸ªå¯¹è±¡è¶…å‡ºä½œç”¨åŸŸèŒƒå›´ï¼Œå…¶å†…å­˜å°±ä¼šè¢«å›žæ”¶ï¼ŒæŽ¥ç€åœ¨ä½œç”¨åŸŸèŒƒå›´å¤–ç”¨ void *p åŽ»è®¿é—® objc çš„å†…å­˜ï¼Œå°±é€ æˆäº†é‡ŽæŒ‡é’ˆ. ç»“åˆä¸Šé¢æ‰€è¯´çš„, æˆ‘ä»¬å¯ä»¥è®©æŒ‡é’ˆ p å¯¹ objc è¿›è¡Œå¼•ç”¨å³ retain æ“ä½œ, ä¿®æ”¹å¦‚ä¸‹: 1234567891011void *p;&#123; NSObject *objc = [[NSObject alloc] init]; //p = (__bridge void*)objc; p = (__bridge_retained void*)objc;&#125; NSLog(@"mark: %@", (__bridge NSObject*)p); // ä¸€å®šè¦é‡Šæ”¾CFRelease(p); å¯ä»¥æ­£å¸¸çš„è¿è¡Œ. è¿˜å¯ä»¥ä¿®æ”¹ä¸ºå¦ä¸€ç§æ–¹å¼: 123456789101112void *p;&#123; NSObject *objc = [[NSObject alloc] init]; //p = (__bridge void*)objc; //p = (__bridge_retained void*)objc; p = (void *)CFBridgingRetain(objc);&#125; NSLog(@"mark: %@", (__bridge NSObject*)p); // ä¸€å®šè¦é‡Šæ”¾CFRelease(p); æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Objective-C ARC Foundation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éŸ³è§†é¢‘ç¼–ç¨‹: iOS æŽ¨æµ]]></title>
    <url>%2F2018%2F02%2F26%2F%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E7%A8%8B-iOS-%E6%8E%A8%E6%B5%81%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡åˆ†äº«æ˜¯åŸºäºŽ éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨ è¿™ç¯‡æ–‡ç« çš„, ä¹‹å‰æ˜¯ä½¿ç”¨ ffmpeg å‘½ä»¤è¿›è¡ŒæŽ¨æµå¹¶ä¸”éƒ½æ˜¯åœ¨ macos ä¸Šé¢è¿›è¡Œçš„æ“ä½œ. çŽ°åœ¨åœ¨ iOS å¹³å°ä¸Šä½¿ç”¨ LFLiveKit è¿›è¡ŒæŽ¨æµ, ç„¶åŽä½¿ç”¨ VLC æ’­æ”¾å™¨æ’­æ”¾æµè§†é¢‘. è¯¥ç³»åˆ—åšæ–‡: éŸ³è§†é¢‘ç¼–ç¨‹: ç¼–è¯‘ faac/faad2 éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faac ç¼–ç  éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶ éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2 éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨ éŸ³è§†é¢‘ç¼–ç¨‹: iOS æŽ¨æµ (æœ¬ç¯‡) åŸºæœ¬æ¦‚å¿µä¸€èˆ¬ç›´æ’­è¿‡ç¨‹åŒ…æ‹¬å¯¹éŸ³è§†é¢‘çš„é‡‡é›†ã€å¤„ç†ã€ç¼–ç ã€å°åŒ…ã€æŽ¨æµã€ä¼ è¾“ã€è½¬ç ã€åˆ†å‘ã€è§£ç ã€æ’­æ”¾ç­‰. æŽ¨æµ, æŒ‡ä½¿ç”¨æŽ¨æµå·¥å…·æŠŠç›´æ’­å†…å®¹ä¼ è¾“åˆ°æœåŠ¡å™¨çš„è¿‡ç¨‹. æœ¬ç¯‡åˆ†äº«ä½¿ç”¨ LFLiveKit å·¥å…·å°† iPhone æ‘„åƒå¤´å’Œéº¦å…‹é£Žé‡‡é›†çš„æ•°æ®æŽ¨æµåˆ°æœ¬åœ°æµæœåŠ¡å™¨. æ‹‰æµ, æŒ‡å¯¹æœåŠ¡å™¨ç›´æ’­çš„å†…å®¹ï¼Œç”¨æŒ‡å®šåœ°å€è¿›è¡Œæ‹‰å–(æ’­æ”¾)çš„è¿‡ç¨‹, æœ¬ç¯‡åˆ†äº«ä½¿ç”¨ VLC å……å½“æ‹‰æµçš„è§’è‰². é›†æˆ LFLiveKitLFLiveKit æ˜¯ä¸€ä¸ªå¼€æºçš„æŽ¨æµ SDK, æ”¯æŒ H264 and AAC çš„ç¡¬ç¼–ç , æ”¯æŒç¾Žé¢œ(é›†æˆäº† GPUImage). ä½¿ç”¨ LFLiveKit æ¯”è¾ƒç®€å•, æŒ‰ç…§å…¶ demo é›†æˆå³å¯. 1.å·¥ç¨‹é…ç½®info.plist éœ€è¦è®¿é—®ç›¸æœºå’Œéº¦å…‹é£Žæƒé™. 123Privacy - Camera Usage DescriptionPrivacy - Microphone Usage Description 2.è¯·æ±‚ç›¸æœºå’Œéº¦å…‹é£Žæƒé™. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364- (void)requestAccessForVideo &#123; __weak typeof(self) _self = self; AVAuthorizationStatus status = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeVideo]; switch (status) &#123; case AVAuthorizationStatusNotDetermined: &#123; [AVCaptureDevice requestAccessForMediaType:AVMediaTypeVideo completionHandler:^(BOOL granted) &#123; if (granted) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [_self.session setRunning:YES]; &#125;); &#125; &#125;]; break; &#125; case AVAuthorizationStatusAuthorized: &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [_self.session setRunning:YES]; &#125;); break; &#125; case AVAuthorizationStatusDenied: case AVAuthorizationStatusRestricted: // ç”¨æˆ·æ˜Žç¡®åœ°æ‹’ç»æŽˆæƒï¼Œæˆ–è€…ç›¸æœºè®¾å¤‡æ— æ³•è®¿é—® break; default: break; &#125;&#125;- (void)requestAccessForAudio &#123; AVAuthorizationStatus status = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeAudio]; switch (status) &#123; case AVAuthorizationStatusNotDetermined: &#123; [AVCaptureDevice requestAccessForMediaType:AVMediaTypeAudio completionHandler:^(BOOL granted) &#123; &#125;]; break; &#125; case AVAuthorizationStatusAuthorized: &#123; break; &#125; case AVAuthorizationStatusDenied: case AVAuthorizationStatusRestricted: break; default: break; &#125;&#125; åŠ¡å¿…è¦è°ƒç”¨ LFLiveSession çš„ setRunning æ–¹æ³•. å®Œæ•´çš„å·¥ç¨‹ä»£ç , åŽç»­æˆ‘ä¼šæ”¾åˆ° Github ä¸Šé¢. æ–¹ä¾¿æœ‰éœ€è¦çš„ä¸‹è½½. æŽ¨æµæ’­æ”¾ä¸Šé¢çš„åŸºæœ¬é…ç½®å®ŒæˆåŽ, å¯ä»¥å¼€å§‹æŽ¨æµäº†. 1.å¯åŠ¨ nginx 1sudo nginx 2.å¯åŠ¨æŽ¨æµ 1234567- (void)startLive &#123; LFLiveStreamInfo *streamInfo = [LFLiveStreamInfo new]; streamInfo.url = sRTMPUrl; [self.session startLive:streamInfo]; self.session.beautyFace = YES;&#125; è¿™é‡Œçš„ sRTMPUrl æ˜¯ä¸€ä¸ªå¸¸é‡å®šä¹‰: 1static NSString * const sRTMPUrl = @&quot;rtmp://192.168.1.102:1935/rtmplive/channel&quot;; 192.168.1.102 æ˜¯æˆ‘çš„æœ¬æœº(mac) ip åœ°å€. å¦‚æžœä¸€åˆ‡æ­£å¸¸çš„è¯, ä½ åœ¨æ‰‹æœºä¸Šé¢å¯ä»¥çœ‹åˆ°è‡ªå·±çš„é¢„è§ˆç”»é¢. 3.VLC æ’­æ”¾ ä½¿ç”¨ VLC æ’­æ”¾ rtmp çš„æµ, æ‰“å¼€ VLC æ’­æ”¾å™¨, é€‰æ‹© File/Open Network, è¾“å…¥ rtmp://192.168.1.102:1935/rtmplive/channel è¿™ä¸ªåœ°å€å³å¯å®žæ—¶æ’­æ”¾äº†. è¿™é‡Œæ³¨æ„ä¸€å®šè¦ä½¿ç”¨æœ¬æœºçš„ ip åœ°å€, ä¸è¦ä½¿ç”¨ localhost:1935 ç±»ä¼¼çš„åœ°å€, å¦åˆ™æ— æ³•æ’­æ”¾å’ŒæŽ¨æµ. åŽç»­åˆ†äº«å¦‚ä½•åœ¨ iOS ä¸Šé¢ä½¿ç”¨æ’­æ”¾å™¨æ¥æ’­æ”¾ç›´æ’­æµ.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘ rtmp nginx æŽ¨æµ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨]]></title>
    <url>%2F2018%2F02%2F25%2F%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E7%A8%8B-%E6%9E%84%E5%BB%BA-nginx-%E6%8E%A8%E6%B5%81%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡åˆ†äº«çš„ä¸»è¦å†…å®¹ å¦‚ä½•åœ¨ macos ä¸­æž„å»ºæœ¬åœ°çš„æŽ¨æµæœåŠ¡å™¨(nginx + rtmp-nginx-module), å¹¶ä½¿ç”¨ ffmpeg å‘½ä»¤è¿›è¡Œè§†é¢‘æŽ¨æµ, ç„¶åŽä½¿ç”¨ VLC æ’­æ”¾å™¨æ’­æ”¾è§†é¢‘. è¯¥ç³»åˆ—åšæ–‡: éŸ³è§†é¢‘ç¼–ç¨‹: ç¼–è¯‘ faac/faad2 éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faac ç¼–ç  éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶ éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2 éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨ (æœ¬ç¯‡) å®‰è£… rtmp-nginx-moduleä¹‹å‰åœ¨æµ‹è¯• php ç¨‹åºçš„æ—¶å€™, æˆ‘å·²ç»å®‰è£…è¿‡ nginx, ä½†æ˜¯å‘çŽ°è¿™æ ·åœ¨é…ç½® rtmp-nginx-module çš„æ—¶å€™, æ— æ³•æˆåŠŸ. é…ç½®æ–‡ä»¶ä¿®æ”¹å®Œæˆä¹‹åŽ, nginx æ€»æ˜¯æ— æ³•è¯†åˆ« rtmp, æŠ¥é”™å¦‚ä¸‹: 1[emerg] 30766#0: unknown directive &quot;rtmp&quot; in /usr/local/etc/nginx/nginx.conf:40 çŽ°åœ¨éœ€è¦å¸è½½åŽŸæ¥å·²ç»å®‰è£…çš„ nginx, å‘½ä»¤å¦‚ä¸‹: 1brew uninstall nginx å†æ¬¡å®‰è£…: 1brew install nginx-full --with-rtmp-module è€å¿ƒç­‰å¾…ä¸€ä¼š ~~ nginx çš„ç‰ˆæœ¬(nginx -v): 1nginx/1.12.2 rtmp-nginx-module ç‰ˆæœ¬: 11.1.7.11-dev_2 é…ç½® rtmpç¼–è¾‘ nginx çš„é…ç½®æ–‡ä»¶, æ–‡ä»¶ä½ç½®ä½äºŽ: 1/usr/local/etc/nginx/nginx.conf åœ¨ http {} åŽé¢å†™å…¥å¦‚ä¸‹å†…å®¹: 123456789101112131415rtmp &#123; server &#123; #rtmpåè®®çš„é»˜è®¤ç«¯å£å·æ˜¯ 1935 listen 1935; #ç›´æ’­æµé…ç½®, è®¿é—® path æ˜¯ rtmplive application rtmplive &#123; #å¼€å¯å®žæ—¶ live on; #è®¾ç½® rtmp å¼•æ“Žçš„æœ€å¤§è¿žæŽ¥æ•°. é»˜è®¤ä¸ºoff max_connections 1024; #ä¸è®°å½•æ•°æ® record off; &#125; &#125;&#125; æ³¨æ„: rtmplive æ˜¯å›ºå®šçš„. å…·ä½“çš„ nginx é…ç½®è¯¦è§åŽé¢çš„é™„å½•å†…å®¹. æŽ¨æµ1.å®‰è£… ffmpeg å³å¯. 1brew install ffmpeg è¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹ä¹…, å¦‚æžœä½ æ²¡æœ‰æ¢¯å­åŸºæœ¬å®‰è£…ä¸äº† [å¤§å“­]~ 2.å®‰è£… VLC ç›´æŽ¥åŽ»å®˜ç½‘ä¸‹è½½ dmg åŒ…, å®‰è£…å³å¯. æ‰“å¼€ VLC ç„¶åŽé€‰æ‹©ä»Ž File/Open Network æ‰“å¼€æ–‡ä»¶, å¦‚ä¸‹å›¾æ‰€ç¤º: åœ¨å¼¹å‡ºçš„æ¡†ä¸­, å†™å…¥æŽ¨æµåœ°å€ rtmp://localhost:1935/rtmplive/channel, å¦‚å›¾æ‰€ç¤º: ç›´æŽ¥ç‚¹å‡» Open. æ³¨æ„: å¦‚æžœ localhost æ— æ³•æ’­æ”¾, è¯·æ›´æ¢ä¸ºä½ çš„æœ¬æœº ip, å¦‚æˆ‘çš„æœ¬æœº ip æ˜¯ 192.168.1.122, å¯¹åº”çš„æ’­æ”¾åœ°å€ä¸º rtmp://192.168.1.122:1935/rtmplive/channel.å¦‚æžœè¿˜æ˜¯æ— æ³•æˆåŠŸ, è¯·å…³é—­ macos çš„é˜²ç«å¢™. 3.å¯åŠ¨ nginx 1sudo nginx å¯ä»¥åœ¨æµè§ˆå™¨è®¿é—®å¦‚ä¸‹åœ°å€, çœ‹çœ‹ nginx æ˜¯å¦å¯åŠ¨æˆåŠŸ. 1http://localhost:8080/index.html 4.ffmpeg æŽ¨æµ æŽ¨æµçš„å‘½ä»¤å¦‚ä¸‹: 1ffmpeg -re -i ~/Desktop/launcher.mp4 -vcodec libx264 -acodec aac -strict -2 -f flv rtmp://localhost:1935/rtmplive/channel å…¶ä¸­ launcher.mp4 æ˜¯æˆ‘è‡ªå·±ä»Žç½‘ç»œä¸Šé¢ä¸‹è½½çš„ä¸€ä¸ªè§†é¢‘æ–‡ä»¶, æ—¶é•¿å¤§çº¦æ˜¯ 5 åˆ†é’Ÿ. åœ¨ VLC ä¸­, å°±å¯ä»¥çœ‹åˆ°æŽ¨æµæ’­æ”¾çš„è§†é¢‘äº†. [å¼€å¿ƒ]~~ é™„å½•nginx é…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859worker_processes 1; error_log /usr/local/etc/nginx/logs/error.log debug;pid /usr/local/var/run/nginx.pid; events &#123; worker_connections 256;&#125; http &#123; include mime.types; default_type application/octet-stream; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /usr/local/etc/nginx/logs/access.log main; sendfile on; keepalive_timeout 65; index index.html index.php; include /usr/local/etc/nginx/sites-enabled/*; include /usr/local/etc/nginx/conf.d/*; server &#123; listen 8080; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; root /Users/me/workspace/projs/phpwork/; #webçš„æ ¹ç›®å½• index index.php index.html index.htm; &#125; &#125;&#125;rtmp &#123; server &#123; #rtmpåè®®çš„é»˜è®¤ç«¯å£å·æ˜¯1935 listen 1935; #ç›´æ’­æµé…ç½®,è®¿é—®è·¯å¾„æ˜¯rtmplive application rtmplive &#123; #å¼€å¯å®žæ—¶ live on; #ä¸ºrtmpå¼•æ“Žè®¾ç½®æœ€å¤§è¿žæŽ¥æ•°.é»˜è®¤ä¸ºoff max_connections 1024; #ä¸è®°å½•æ•°æ® record off; &#125; &#125;&#125; è§†é¢‘æ–‡ä»¶ä½¿ç”¨ä¸‹è½½çš„ mp4 æ–‡ä»¶, æœ‰äº›æ— æ³•æ’­æ”¾, æš‚æ—¶ä¼°è®¡åº”è¯¥æ˜¯ç çŽ‡çš„é—®é¢˜, å¤§å®¶åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­, å‘çŽ°è§†é¢‘æ— æ³•æ’­æ”¾, æœ€åŽè¯•è¯•å…¶ä»–è§†é¢‘æ–‡ä»¶. å¦å¤–, è§†é¢‘æ–‡ä»¶ä¸è¦å¤ªå°, å°½é‡èƒ½è®©å…¶æ’­æ”¾æ—¶é•¿åœ¨ 3-5 åˆ†é’Ÿ. brew install/uninstall æŠ¥é”™æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹: 123456Error: undefined method `patch&apos; for #&lt;Resource:0x000001040877a8&gt;/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/gcc@4.9.rb:55:in `block in &lt;class:GccAT49&gt;&apos;/usr/local/Homebrew/Library/Homebrew/resource.rb:49:in `instance_eval&apos;/usr/local/Homebrew/Library/Homebrew/resource.rb:49:in `initialize&apos;/usr/local/Homebrew/Library/Homebrew/software_spec.rb:111:in `new&apos;/usr/local/Homebrew/Library/Homebrew/software_spec.rb:111:in `resource&apos; æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯é‡æ–°å®‰è£… Homebrew, å‘½ä»¤å¦‚ä¸‹: 1ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; æ£€æŸ¥æœ¬æœºçš„ ip1ifconfig | grep &quot;inet &quot; | grep -v 127.0.0.1]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘ rtmp nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NSLog æ ¼å¼åŒ–è¾“å‡º NSInteger/NSUInteger]]></title>
    <url>%2F2018%2F02%2F22%2FNSLog-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA-NSInteger-NSUInteger%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹åœ¨ Xcode ä¸­ ä½¿ç”¨ NSLog æ‰“å° NSInteger/NSUInteger æ•°æ®, ç»å¸¸ä¼šé‡åˆ°ç±»ä¼¼çš„è­¦å‘Š. å¦‚ä¸‹å›¾æ‰€ç¤º: ä½†æ˜¯åœ¨ iphone 4s(32ä½)æœºå™¨ä¸Šå°±æ²¡æœ‰ä»»ä½•è­¦å‘Š, åªæ˜¯åœ¨64ä½çš„æœºåž‹ä¸Šé¢æœ‰è¿™æ ·çš„è­¦å‘Š. åœ¨ NSObjCRuntime.h é‡Œé¢å®šä¹‰ NSInteger å’Œ NSUInteger å¦‚ä¸‹: 1234567#if __LP64__ || (TARGET_OS_EMBEDDED &amp;&amp; !TARGET_OS_IPHONE) || TARGET_OS_WIN32 || NS_BUILD_32_LIKE_64typedef long NSInteger;typedef unsigned long NSUInteger;#elsetypedef int NSInteger;typedef unsigned int NSUInteger;#endif ä¹Ÿå°±æ˜¯è¯´ 64 ä½ä¸‹æ˜¯ long ç±»åž‹ï¼Œ32 ä½ä¸‹æ˜¯ int ç±»åž‹. æ‰€ä»¥, ä¸Šé¢çš„ä»£ç åœ¨ 32 ä½æœºåž‹ä¸Šé¢ä¸ä¼šæœ‰è­¦å‘Š. æŒ‰ç…§ Xcode çš„æç¤º, Fix it: 12345NSUInteger iun = 3;NSLog(@"iun: %lu", (unsigned long)iun); NSInteger nsi = 6;NSLog(@"nsi: %ld", (long)nsi); è¿™æ ·æ— è®ºåœ¨ 32 ä½è¿˜æ˜¯åœ¨ 64 ä½æœºåž‹ä¸Šé¢, éƒ½æ²¡æœ‰è­¦å‘Šäº†. Twitter å¸–å­åœ¨ twitter æœ‰ä¸ªå¸–å­ è¯´äº†å¦ä¸€ç§è§£å†³åŠžæ³•, åŽŸæ–‡å¦‚ä¸‹: 1%zd, %tu, %tx (signed, unsigned, hex) currently format NSInteger and NSUInteger with no warnings. æ„æ€æ˜¯ä½¿ç”¨ zd å¯ä»¥æ ¼å¼åŒ–æœ‰ç¬¦å·çš„å¦‚ NSInteger, ä½¿ç”¨ tu æ ¼å¼åŒ–æ— ç¬¦å·çš„å¦‚ NSUInteger. è€Œ tx å¯ä»¥ç”¨æ¥æ ¼å¼åŒ–è¾“å‡º 16 è¿›åˆ¶æ•°æ®. æŒ‰ç…§è¿™ä¸ªè¯´æ³•, ä¿®æ”¹å¦‚ä¸‹: 12345NSUInteger iun = 3;NSLog(@"iun: %zd", iun); NSInteger nsi = 6;NSLog(@"nsi: %td", nsi); æˆ–è€…è¿™æ ·ä¿®æ”¹: 12345NSUInteger iun = 3;NSLog(@&quot;iun: %tu&quot;, iun); NSInteger nsi = 6;NSLog(@&quot;nsi: %td&quot;, nsi); ç¡®å®žæ²¡æœ‰äº†è­¦å‘Šçš„é—®é¢˜. æˆ‘åœ¨å®žè·µè¿‡ç¨‹ä¸­å‘çŽ°ä¸€ä¸ªé—®é¢˜: ä½¿ç”¨ zu æ¥æ ¼å¼åŒ–è¾“å‡º NSUInteger, åœ¨ 32 ä½æœºå™¨ä¸Šé¢, ä»æ—§ä¼šæŠ¥è­¦å‘Š. 12NSUInteger iun = 3;NSLog(@"iun: %zu", iun); è¿™å°±è®©æˆ‘å¼€å§‹æ€€ç–‘ z å’Œ t çš„å¯é æ€§äº†. ä¸‹é¢æŽ¥ç€äº†è§£ä¸€ä¸‹å®ƒä»¬. å…³äºŽ z tå…³äºŽ z t çš„è¯´æ˜Žå¯ä»¥å‚è€ƒ String Format Specifiers å¯ä»¥è¯´æ˜Ž: æ ¼å¼åŒ– z å¯ä»¥ç”¨æ¥ä»£è¡¨ size_t.æ ¼å¼åŒ– t å¯ä»¥ç”¨æ¥ä»£è¡¨ ptrdiff_t. ptrdiff_t æ˜¯C/C++æ ‡å‡†åº“ä¸­å®šä¹‰çš„ä¸€ä¸ªä¸Žæœºå™¨ç›¸å…³çš„æ•°æ®ç±»åž‹.ptrdiff_t ç±»åž‹å˜é‡é€šå¸¸ç”¨æ¥ä¿å­˜ä¸¤ä¸ªæŒ‡é’ˆå‡æ³•æ“ä½œçš„ç»“æžœ, å…¶å®šä¹‰åœ¨ C99 æ ‡å‡†ä¸­. size_t ç±»åž‹ç”¨äºŽæŒ‡æ˜Žæ•°ç»„é•¿åº¦, å®ƒå¿…é¡»æ˜¯ä¸€ä¸ªæ­£æ•°, è€Œ ptrdiff_t ç±»åž‹åˆ™åº”ä¿è¯è¶³ä»¥å­˜æ”¾åŒä¸€æ•°ç»„ä¸­ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„å·®è·, å®ƒæœ‰å¯èƒ½æ˜¯è´Ÿæ•°. å³: size_t æ˜¯ unsigned ç±»åž‹, è€Œ ptrdiff_t åˆ™æ˜¯ signed æ•´åž‹. 12printf("size_t bytes = %d\n" ,sizeof(size_t));printf("ptrdiff_t bytes = %d\n" ,sizeof(ptrdiff_t)); åœ¨ 32 ä½æœºåž‹ä¸­è¾“å‡ºç»“æžœ: 12size_t bytes = 4ptrdiff_t bytes = 4 åœ¨ 64 ä½æœºåž‹ä¸­è¾“å‡ºç»“æžœ: 12size_t bytes = 8ptrdiff_t bytes = 8 è¿™è¯´æ˜Ž, sizet_t å’Œ ptrdiff_t æ˜¯å’Œæœºå™¨ç±»åž‹ç›¸å…³çš„è·¨å¹³å°çš„. ç³»ç»Ÿå®šä¹‰: 12typedef __SIZE_TYPE__ size_t;typedef __PTRDIFF_TYPE__ ptrdiff_t; 32 ä½æœºåž‹å®šä¹‰: 12#define __SIZE_TYPE__ long unsigned int#define __PTRDIFF_TYPE__ int 64 ä½æœºåž‹å®šä¹‰: 12#define __SIZE_TYPE__ long unsigned int#define __PTRDIFF_TYPE__ long int ç»ˆæžè§£å†³æ–¹æ¡ˆæ—¢ç„¶åœ¨ Xcode é‡Œé¢æç¤º Fix it å¯ä»¥ä½¿ç”¨, é‚£ä¹ˆä¸ºäº†æé«˜ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§, å¯ä»¥å®šä¹‰å®å®šä¹‰æ¥è§£å†³. å®å®šä¹‰å¦‚ä¸‹: 1234567#if __LP64__#define MZNSI @"ld"#define MZNSU @"lu"#else#define MZNSI @"d"#define MZNSU @"u"#endif //__LP64__ ä½¿ç”¨æ–¹æ³•, å¦‚ä¸‹: 1234NSInteger nsi = 6;NSUInteger iun = 3;NSLog(@"NSInteger nsi = %"MZNSI, nsi);NSLog(@"NSUInteger iun = %"MZNSU, iun); é™„å½•ç»™å‡ºå¸¸ç”¨çš„æ ¼å¼åŒ–æ‰“å°è¾“å‡ºå­—ç¬¦ä¸²ä¸­çš„æ ¼å¼ç¬¦, å¦‚ä¸‹æ‰€ç¤º: 1ï¼‰%cï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª int ç±»åž‹ï¼Œä½†å®žé™…è¿è¡Œæ—¶ä¼šå°†è¯¥ intç±»åž‹å¯¹è±¡è½¬æ¢ä¸º unsigned char ç±»åž‹. 2ï¼‰%d æˆ–è€… %iï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª int ç±»åž‹. åªä¸è¿‡, %d ä¸€èˆ¬ç”¨äºŽåè¿›åˆ¶, %i å¯ä»¥å¯¹åº”å„ç§è¿›åˆ¶çš„æ•°æ®. äºŒè€…åœ¨æ‰“å°è¾“å‡ºä¸Šé¢æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„å·®åˆ«. ä½†æ˜¯åœ¨æŽ¥æ”¶è¾“å…¥(scanf)ä¸Š, %d ç”¨äºŽåè¿›åˆ¶, %i å¯¹åº”å„ç§è¿›åˆ¶çš„æ•°æ®. å¯ä»¥å‚è€ƒ Difference between %d and %i format specifier in C language è¿™ç¯‡æ–‡ç« . 3ï¼‰%fï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª double ç±»åž‹. 4ï¼‰%ldï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª long int ç±»åž‹. 5ï¼‰%sï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª const char* ç±»åž‹ï¼Œè¡¨ç¤ºè¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸². 6ï¼‰%uï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª unsigned int ç±»åž‹. 7ï¼‰%zuï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª size_t ç±»åž‹. 8ï¼‰%tdï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª ptrdiff_t ç±»åž‹. 9ï¼‰%xï¼ˆæˆ– %Xï¼‰ï¼šå¯¹åº”å‚æ•°æ˜¯ä¸€ä¸ª int ç±»åž‹ï¼Œä¸è¿‡ä¼šä»¥åå…­è¿›åˆ¶å½¢å¼è¾“å‡ºï¼Œå…¶ä¸­å¤§äºŽ 9 çš„æ•°å­—æ ¹æ®å­—æ¯ x å¤§å°å†™è¿›è¡Œè½¬æ¢ï¼Œå¦‚æžœæ˜¯ %xï¼Œåˆ™å¤§äºŽ 9 çš„æ•°ç”¨ aï½žf è¡¨ç¤ºï¼›å¦‚æžœæ˜¯ %Xï¼Œåˆ™ç”¨ Aï½žF è¡¨ç¤º. 10ï¼‰%%ï¼šè¾“å‡ºä¸€ä¸ª % ç¬¦å·. æŽ¨èAppleï¼šString Format Specifiers æ‰«ç å…³æ³¨ï¼ŒæœŸå¾…ä¸Žä½ çš„äº¤æµ~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>NSLog printf scanf</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2]]></title>
    <url>%2F2018%2F02%2F20%2F%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E7%A8%8B-iOS-%E4%BD%BF%E7%94%A8-faad2%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹æœ¬æ¬¡åˆ†äº«ä½¿ç”¨ faad2 è§£ç  AAC éŸ³é¢‘æ–‡ä»¶, å°† AAC æ–‡ä»¶è½¬æ¢ä¸º WAV æ–‡ä»¶å¹¶ä½¿ç”¨ AVAudioPlayer è¿›è¡Œæ’­æ”¾. åœ¨åšæ–‡ éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶ ç»™å¤§å®¶ç®€å•çš„åˆ†æžäº†ä¸€ä¸‹ WAV çš„æ•°æ®å¤´åè®®, å…¶å®žä¹Ÿæ˜¯ä¸ºäº†è¿™ç¯‡åšæ–‡æ¥æœåŠ¡çš„, æ‰€ä»¥é˜…è¯»æœ¬æ–‡ä¹‹å‰, å»ºè®®å…ˆçœ‹ä¸Šæ–‡. è¯¥ç³»åˆ—åšæ–‡: éŸ³è§†é¢‘ç¼–ç¨‹: ç¼–è¯‘ faac/faad2 éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faac ç¼–ç  éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶ éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2 (æœ¬ç¯‡) éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨ ä¾‹å­ä»‹ç»æœ¬æ–‡ä»¥ä¸€ä¸ªå®žé™…çš„ä¾‹å­, ä½¿ç”¨ faad2çš„å„ä¸ªå‡½æ•°æ¥è§£ç  AAC æ•°æ®. ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤: èŽ·å–è¾“å…¥æ–‡ä»¶ èŽ·å– faad è§£ç å™¨å¥æŸ„ åˆå§‹åŒ– faad è§£ç å™¨ æ ¹æ®æ–‡ä»¶è§£æžæ–‡ä»¶å¸§, å¹¶å†™å…¥è¾“å‡ºæ–‡ä»¶ä¸­ å†™å…¥æ–‡ä»¶å¤´å°†å…¶å°è£…ä¸º WAV æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ å…³é—­ faad è§£ç å™¨å¥æŸ„ å·¥ç¨‹å®žæˆ˜å¼•å…¥ faad2å°†ç¼–è¯‘å¥½çš„ faad2 å¯¼å…¥å·¥ç¨‹å³å¯. å…¶ä¸­å…³é”®çš„ API åœ¨ neaacdec.h ä¸­æœ‰æè¿°. å·¥ç¨‹æ•ˆæžœå›¾: ç¼–ç å®žçŽ°åœ¨ éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶ ä¸­å·²ç»å®šä¹‰äº† WAV çš„æ•°æ®å¤´. 12345678910111213141516struct MZWavAudioFileHeader&#123; char riff[4]; // å­—ç¬¦ä¸² &quot;RIFF&quot; uint32_t totalLength; // æ–‡ä»¶æ€»å¤§å°, åŒ…æ‹¬PCM æ•°æ®å¤§å°å’Œè¯¥æ–‡ä»¶å¤´å¤§å° char wave[4]; // å­—ç¬¦ä¸² &quot;WAVE&quot; char fmt[4]; // å­—ç¬¦ä¸² &quot;fmt &quot; uint32_t format; // WAV å¤´å¤§å°, å›ºå®šä¸ºå€¼ 16 uint16_t pcm; // PCM ç¼–ç æ–¹å¼, å›ºå®šå€¼ä¸º 1 uint16_t channels; // å£°é“æ•°é‡, ä¸º 2 uint32_t frequency; // é‡‡æ ·é¢‘çŽ‡ uint32_t bytes_per_second; // æ¯ç§’å­—èŠ‚æ•°(ç çŽ‡), å…¶å€¼=é‡‡æ ·çŽ‡xé€šé“æ•°xä½æ·±åº¦/8 uint16_t bytes_by_capture; // é‡‡æ ·å—å¤§å° uint16_t bits_per_sample; // é‡‡æ ·ç‚¹å¤§å°, è¿™é‡Œæ˜¯ 16 ä½ char data[4]; // å­—ç¬¦ä¸² &quot;data&quot; uint32_t bytes_in_pcmdata; // pcm æ•°æ®é•¿åº¦&#125;; çŽ°åœ¨å®žçŽ°å†™å…¥æ•°æ®å¤´çš„æ–¹æ³• mz_write_wav_header 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * å†™å…¥ wav å¤´æ•°æ®. * * @param file wav æ–‡ä»¶æŒ‡é’ˆ. * @param total_samples_per_channel æ¯ä¸ªå£°é“çš„é‡‡æ ·æ•°. * @param samplerate é‡‡æ ·çŽ‡. * @param channels å£°é“æ•°. */void mz_write_wav_header(FILE *file, int total_samples_per_channel, int samplerate, int channels) &#123; if (NULL == file) &#123; return; &#125; if (total_samples_per_channel &lt;= 0) &#123; return; &#125; printf(&quot;FAAD. total_samples_per_channel: %i, samplerate: %i, channels: %i\n&quot;, total_samples_per_channel, samplerate, channels); struct MZWavAudioFileHeader wavHeader; // å†™å…¥ RIFF strcpy(wavHeader.riff, &quot;RIFF&quot;); wavHeader.bits_per_sample = 16; wavHeader.totalLength = (total_samples_per_channel * channels * wavHeader.bits_per_sample/8) + sizeof(wavHeader) - 8; // å†™å…¥ WAVE å’Œ fmt strcpy(wavHeader.wave, &quot;WAVE&quot;); strcpy(wavHeader.fmt, &quot;fmt &quot;); wavHeader.format = 16; wavHeader.pcm = 1; wavHeader.channels = channels; wavHeader.frequency = samplerate; // æ¯ç§’çš„å­—èŠ‚æ•°(ç çŽ‡)=é‡‡æ ·çŽ‡xé€šé“æ•°xä½æ·±åº¦/8 wavHeader.bytes_per_second = wavHeader.channels * wavHeader.frequency * wavHeader.bits_per_sample/8; wavHeader.bytes_by_capture = wavHeader.channels*wavHeader.bits_per_sample/8; wavHeader.bytes_in_pcmdata = total_samples_per_channel * wavHeader.channels * wavHeader.bits_per_sample/8; // å†™å…¥ data strcpy(wavHeader.data, &quot;data&quot;); fwrite(&amp;wavHeader, 1, sizeof(wavHeader), file);&#125; è§£ç ä¸»è¦ç”¨åˆ°äº† FAAD2 ä¸­çš„ NeAACDecDecode å‡½æ•°. å‡½æ•°åŽŸåž‹å¦‚ä¸‹: 1234void* NEAACDECAPI NeAACDecDecode(NeAACDecHandle hDecoder, NeAACDecFrameInfo *hInfo, unsigned char *buffer, unsigned long buffer_size); å¯¹åº”å¸§å®šä¹‰çš„ç»“æž„ä½“: NeAACDecFrameInfo, å®šä¹‰å¦‚ä¸‹: 123456789101112131415161718192021222324252627typedef struct NeAACDecFrameInfo&#123; unsigned long bytesconsumed; unsigned long samples; unsigned char channels; unsigned char error; unsigned long samplerate; /* SBR: 0: off, 1: on; upsample, 2: on; downsampled, 3: off; upsampled */ unsigned char sbr; /* MPEG-4 ObjectType */ unsigned char object_type; /* AAC header type; MP4 will be signalled as RAW also */ unsigned char header_type; /* multichannel configuration */ unsigned char num_front_channels; unsigned char num_side_channels; unsigned char num_back_channels; unsigned char num_lfe_channels; unsigned char channel_position[64]; /* PS: 0: off, 1: on */ unsigned char ps;&#125; NeAACDecFrameInfo; å…·ä½“çš„è§£ç å®žçŽ°, æˆ‘æ”¾åˆ°äº† Github ä¸Šé¢äº†, å¤§å®¶å¯ä»¥åŽ» è¿™é‡Œ æŸ¥çœ‹. éº»çƒ¦ è§£ç  aac, è§£å†³é‡‡æ ·é¢‘çŽ‡å’Œé€šé“æ•°ä¸å¯¹çš„é—®é¢˜ 1234//é˜²æ­¢é‡‡æ ·é¢‘çŽ‡åŠ å€NeAACDecConfigurationPtr conf = NeAACDecGetCurrentConfiguration(decoder);conf-&gt;dontUpSampleImplicitSBR = 1;NeAACDecSetConfiguration(decoder, conf); 123456//ä»ŽåŒå£°é“çš„æ•°æ®ä¸­æå–å•é€šé“ for(i=0,j=0; i&lt;4096 &amp;&amp; j&lt;2048; i+=4, j+=2) &#123; frame_mono[j]=pcm_data[i]; frame_mono[j+1]=pcm_data[i+1];&#125; å…·ä½“å¯ä»¥æŸ¥é˜… FAAD2 çš„æºç . æ„Ÿè°¢ ä½¿ç”¨FAADåº“è§£ç AACå®žä¾‹åŠ åŠ faadè§£ç åŽçš„é€šé“æ•°ä¸æ­£ç¡®çš„é—®é¢˜ æä¾›.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘ wav pcm faad2 aac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶]]></title>
    <url>%2F2018%2F02%2F20%2F%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E7%A8%8B-%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90-WAV-%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ è¿™ç¯‡åˆ†äº«æ˜¯ä¸‹ç¯‡ éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2 çš„é¢„å¤‡çŸ¥è¯†, å¦‚æžœè¦è§£ç  WAV æ–‡ä»¶, é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹ WAV éŸ³é¢‘æ–‡ä»¶çš„æ ¼å¼. ä»Šå¤©è¯´çš„æ˜¯ çº¿æ€§ PCM å¯¹åº”çš„ WAV æ ¼å¼çš„æ•°æ®. PCM çš„ç§ç±» çº¿æ€§åŒ– PCM Aå¾‹é‡åŒ–çš„ PCM Uå¾‹é‡åŒ–çš„ PCM AD PCM GSM è¯¥ç³»åˆ—åšæ–‡: éŸ³è§†é¢‘ç¼–ç¨‹: ç¼–è¯‘ faac/faad2 éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faac ç¼–ç  éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶(æœ¬ç¯‡) éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2 éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨ WAV ç®€ä»‹WAV åªæ˜¯è¯¥éŸ³é¢‘æ–‡ä»¶çš„åŽç¼€å, å…¶å®Œæ•´åç§°ç¼©å†™æ˜¯ WAVE. WAVE(Waveform Audio File Format), é‡‡ç”¨RIFFï¼ˆResource Interchange File Formatï¼‰æ–‡ä»¶æ ¼å¼ç»“æž„. WAV æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶é€šå¸¸ç”¨æ¥ä¿å­˜ PCM æ ¼å¼çš„åŽŸå§‹éŸ³é¢‘æ•°æ®ï¼Œé€šå¸¸è¢«ç§°ä¹‹ä¸ºæ— æŸéŸ³é¢‘. WAV éŸ³é¢‘æ–‡ä»¶, ç²—ç•¥æ¥è¯´æ˜¯ WAV æ•°æ®å¤´ + PCM æ•°æ®ç»„æˆçš„. è£¸æ•°æ® PCM å¤–é¢åŒ…äº†ä¸€å±‚æ–‡ä»¶å¤´ï¼ŒWAV å®žè´¨ä¸ºä¸€ä¸ª RIFF æ–‡ä»¶. WAV æ•°æ®å¤´å…³äºŽ WAV éŸ³é¢‘æ–‡ä»¶çš„æ•°æ®å¤´å®šä¹‰å¦‚ä¸‹å›¾æ‰€ç¤º: æœ€å‰é¢çš„4ä¸ªå­—èŠ‚ç”¨æ¥æ ‡ç¤ºæ˜¯ RIFF å­—ç¬¦ä¸². å¯ä»¥çœ‹å‡º, ä¸€èˆ¬çš„ WAV æ–‡ä»¶çš„æ•°æ®å¤´ä¸º 44 ä¸ªå­—èŠ‚, å…¶åŽé¢è·Ÿçš„æ˜¯ PCM æ•°æ®. åˆ†æž WAV æ•°æ®å¤´ä½¿ç”¨ hexdump æ¥çœ‹ä¸€ä¸‹ WAV æ–‡ä»¶çš„æ•°æ®å¤´. åœ¨å½“å‰è·¯å¾„ä¸‹, æœ‰ä¸ª wav æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ m.wav, ä½¿ç”¨ hexdump åˆ†æžä¸€ä¸‹. 1hexdump -n 44 m.wav å…¶ä¸­, -n 44 è¡¨ç¤ºæŸ¥çœ‹å‰ 44 ä¸ªå­—èŠ‚. æŒ‰å­—èŠ‚åˆ†ç»„çš„å›¾, å¦‚ä¸‹æ‰€ç¤º: 152 49 46 46 åˆ†åˆ«æ˜¯ RIFF çš„ ASCII ç . è·Ÿåœ¨ RIFF åŽé¢çš„å››ä¸ªå­—èŠ‚æ˜¯æ–‡ä»¶çš„å¤§å°ä¿¡æ¯, æˆ‘ä»¬å…ˆä½¿ç”¨ ls å‘½ä»¤çœ‹ä¸€ä¸‹è¯¥æ–‡ä»¶çš„å¤§å°. 1ls -al è¾“å‡ºæ–‡ä»¶å¤§å°ä¸º(å­—èŠ‚æ•°): 1080808 1staff 1080808 Jan 25 15:44 m.wav RIFF åŽé¢çš„å››ä¸ªå­—èŠ‚åˆ†åˆ«æ˜¯: e0 7d 10 00, ç”±äºŽè¯¥å­˜å‚¨ä½¿ç”¨äº†å°ç«¯åº(Little-Endian å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹å…¶ä¸­çš„æ•°æ®ï¼Œä½Žä½å­—èŠ‚åœ¨å‰ï¼Œé«˜ä½å­—èŠ‚åœ¨åŽ), æ‰€ä»¥16è¿›åˆ¶è¡¨ç¤ºä¸º: 0x00107de0, å¯¹åº”çš„å­—èŠ‚å¤§å°æ˜¯ 1080808. ä¸Šé¢è¯´åˆ°, çº¿æ€§ PCM, å…¶å®žåœ¨è¯¥æ–‡ä»¶å¤´ä¸­, ç¬¬17åˆ°ç¬¬ç¬¬22ä¸ªå­—èŠ‚(ä¸Šå›¾çº¢è‰²çš„5å’Œ6ç»„åˆ)æ ‡ç¤ºäº† PCM çš„ç±»åž‹, å³: 110 00 00 00 01 00 å…¶ä»–ç±»åž‹çš„ PCM ç±»åž‹å®šä¹‰ä¸º: Aå¾‹é‡åŒ–çš„PCM: 12 00 00 0006 00Uå¾‹é‡åŒ–çš„PCM: 12 00 00 00 07 00AD PCM: 32 00 00 00 02 00GSM: 14 00 00 00 31 00 æœ€åŽ4ä¸ªå­—èŠ‚è¡¨ç¤ºçœŸæ­£ PCM æ•°æ®çš„æ–‡ä»¶å¤§å°, å³: 0x00107dbc, å…¶10è¿›åˆ¶å¤§å°ä¸º: 1080764, ç”¨æ€»æ–‡ä»¶å¤§å°å‡åŽ» 1080764, å°±æ˜¯æ–‡ä»¶å¤´çš„å¤§å°, å¦‚ä¸‹: 11080808 - 1080764 = 44 å…¶ä»–å¯¹åº”çš„æ•°æ®, å¤§å®¶å¯ä»¥å¯¹ç…§è¡¨è‡ªè¡Œåˆ†æž. å®šä¹‰æ•°æ®å¤´ æ•°æ®ç±»åž‹ char å ç”¨ 1 ä¸ªå­—èŠ‚ uint32_t å ç”¨ 4 ä¸ªå­—èŠ‚ uint16_t å ç”¨ 2 ä¸ªå­—èŠ‚ è¿™é‡Œä½¿ç”¨ç»“æž„ä½“å®šä¹‰ WAV æ–‡ä»¶å¤´, å…¶å®šä¹‰å¦‚ä¸‹: 12345678910111213141516struct MZWavAudioFileHeader&#123; char riff[4]; // å­—ç¬¦ä¸² &quot;RIFF&quot; uint32_t totalLength; // æ–‡ä»¶æ€»å¤§å°, åŒ…æ‹¬PCM æ•°æ®å¤§å°å’Œè¯¥æ–‡ä»¶å¤´å¤§å° char wave[4]; // å­—ç¬¦ä¸² &quot;WAVE&quot; char fmt[4]; // å­—ç¬¦ä¸² &quot;fmt &quot; uint32_t format; // WAV å¤´å¤§å°, å›ºå®šä¸ºå€¼ 16 uint16_t pcm; // PCM ç¼–ç æ–¹å¼, å›ºå®šå€¼ä¸º 1 uint16_t channels; // å£°é“æ•°é‡, ä¸º 2 uint32_t frequency; // é‡‡æ ·é¢‘çŽ‡ uint32_t bytes_per_second; // æ¯ç§’å­—èŠ‚æ•°(ç çŽ‡), å…¶å€¼=é‡‡æ ·çŽ‡xé€šé“æ•°xä½æ·±åº¦/8 uint16_t bytes_by_capture; // é‡‡æ ·å—å¤§å° uint16_t bits_per_sample; // é‡‡æ ·ç‚¹å¤§å°, è¿™é‡Œæ˜¯ 16 ä½ char data[4]; // å­—ç¬¦ä¸² &quot;data&quot; uint32_t bytes_in_pcmdata; // pcm æ•°æ®é•¿åº¦&#125;; å¯ä»¥ä½¿ç”¨ä¸‹é¢ä»£ç æ¥è®¡ç®—è¯¥ç»“æž„ä½“æ‰€å çš„å­—èŠ‚æ•°(ç»“æžœæ˜¯44): 1int wav_header_size = sizeof(struct MZWavAudioFileHeader);]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘ wav pcm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faac ç¼–ç ]]></title>
    <url>%2F2018%2F02%2F16%2F%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E7%A8%8B-iOS-%E4%BD%BF%E7%94%A8-faac-%E7%BC%96%E7%A0%81%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹æœ¬æ–‡åˆ†äº«å¦‚ä½•å°† WAV æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶è½¬æ¢(ç¼–ç )ä¸º AAC æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶å¹¶ä½¿ç”¨ AVAudioPlayer æ’­æ”¾ç¼–ç åŽçš„æ–‡ä»¶. è¿™é‡Œçš„ç¼–ç åŠŸèƒ½ä½¿ç”¨ faac è¿™ä¸ªåº“æ¥å®žçŽ°. è¯¥ç³»åˆ—åšæ–‡: éŸ³è§†é¢‘ç¼–ç¨‹: ç¼–è¯‘ faac/faad2 éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faac ç¼–ç (æœ¬ç¯‡) éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶ éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2 éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨ å‡½æ•°ä»‹ç» èŽ·å– faac çš„ç‰ˆæœ¬ 1int FAACAPI faacEncGetVersion(char **faac_id_string, char **faac_copyright_string); ç¤ºä¾‹: 1234char *version;char *copyright;faacEncGetVersion(&amp;version, &amp;copyright);printf(&quot;FAAC version: %s, copyright: %s&quot;, version, copyright); æ‰“å°ç»“æžœ: 1234FAAC version: 1.28, copyright: FAAC - Freeware Advanced Audio Coder (http://www.audiocoding.com/)Copyright (C) 1999,2000,2001 Menno BakkerCopyright (C) 2002,2003 Krzysztof NikielThis software is based on the ISO MPEG-4 reference source code. æ‰“å¼€å¹¶åˆå§‹åŒ– faac ç¼–ç å™¨ 12345678// sampleRate: é‡‡æ ·çŽ‡// numChannels: é€šé“æ•°é‡ï¼Œ1-å•å£°é“ 2-ç«‹ä½“å£°// inputSamples: ç¼–ç åŽçš„æ•°æ®é•¿åº¦// maxOutputBytes: ç¼–ç åŽçš„ä¿¡æ¯æœ€å¤§é•¿åº¦faacEncHandle FAACAPI faacEncOpen(unsigned long sampleRate, unsigned int numChannels, unsigned long *inputSamples, unsigned long *maxOutputBytes); è¯¥å‡½æ•°è¿”å›žä¸€ä¸ª faac ç¼–ç å™¨å¥æŸ„. å…¶å¾ˆå¤šå‡½æ•°éƒ½éœ€è¦è¿™ä¸ªå¥æŸ„. å…³é—­ faac ç¼–ç å™¨ 1int FAACAPI faacEncClose(faacEncHandle hEncoder); å°†å¼€å¯ faac ç¼–ç å™¨è¿”å›žçš„å¥æŸ„ä¼ å…¥å³å¯. èŽ·å–é…ç½®å’Œè®¾ç½®é…ç½® 123456faacEncConfigurationPtr FAACAPI faacEncGetCurrentConfiguration(faacEncHandle hEncoder);int FAACAPI faacEncSetConfiguration(faacEncHandle hEncoder, faacEncConfigurationPtr config); faac çš„é…ç½®è¢«å®šä¹‰ä¸ºäº†ä¸€ä¸ªç»“æž„ä½“ faacEncConfiguration, å¤§å®¶å¯ä»¥çœ‹æºç . ç¼–ç (ç¼–ç ä¸€å¸§éŸ³é¢‘æ•°æ®) 12345678// hEncoder: faacEncOpen è¿”å›žçš„ç¼–ç å™¨å¥æŸ„// inputBuffer: è¾“å…¥ä¿¡æ¯ç¼“å†²åŒº// samplesInput: faacEncOpenç¼–ç åŽçš„æ•°æ®é•¿åº¦ï¼Œå³ç¼“å†²åŒºé•¿åº¦// outputBuffer: ç¼–ç åŽè¾“å‡ºä¿¡æ¯ç¼“å†²åŒº// bufferSize: è¾“å‡ºä¿¡æ¯é•¿åº¦int FAACAPI faacEncEncode(faacEncHandle hEncoder, int32_t * inputBuffer, unsigned int samplesInput, unsigned char *outputBuffer, unsigned int bufferSize); å®žä¾‹å¯ä»¥è‡ªå·±æ–°å»ºä¸€ä¸ª iOS å·¥ç¨‹. å‡†å¤‡å¥½ä¸€ä¸ª wav æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶. æ•ˆæžœå¦‚ä¸‹å›¾æ‰€ç¤º: æ–°å»ºä¸€ä¸ª C++ æ–‡ä»¶, MZCodec. MZCodec.hpp 12345678#ifndef MZCodec_hpp#define MZCodec_hpp#include &lt;stdio.h&gt;int codeWAV(const char *srcFilePath, const char *destPath);#endif /* MZCodec_hpp */ MZCodec.cpp 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105#include &quot;MZCodec.hpp&quot;#include &quot;faac.h&quot;#include &lt;stdio.h&gt;int codeWAV(const char *srcFilePath, const char *destPath) &#123; unsigned long nSampleRate = 44100;//é‡‡æ ·çŽ‡ unsigned int nChannels = 2;//å£°é“æ•° unsigned int nPCMBitSize = 16;//å•æ ·æœ¬ä½æ•° unsigned long nInputSamples = 0; unsigned long nMaxOutputBytes = 0; int nRet; faacEncHandle hEncoder; faacEncConfigurationPtr pConfiguration; size_t nBytesRead; unsigned long nPCMBufferSize; unsigned char *pbPCMBuffer; unsigned char *pbAACBuffer; FILE *fpIn; // WAV file for input FILE *fpOut; // AAC file for output /// èŽ·å– faac ç‰ˆæœ¬ä¿¡æ¯ &#123; char *version; char *copyright; faacEncGetVersion(&amp;version, &amp;copyright); printf(&quot;FAAC version: %s, copyright: %s&quot;, version, copyright); &#125; fpIn = fopen(srcFilePath, &quot;rb&quot;); if (NULL == fpIn) &#123; return -2; &#125; fpOut = fopen(destPath, &quot;wb&quot;); /// 1. æ‰“å¼€ FAAC hEncoder = faacEncOpen(nSampleRate, nChannels, &amp;nInputSamples, &amp;nMaxOutputBytes); if (NULL == hEncoder) &#123; printf(&quot;[ERROR] Failed to call faacEncOpen()\n&quot;); return -1; &#125; nPCMBufferSize = nInputSamples * nPCMBitSize / 8; pbPCMBuffer = new unsigned char[nPCMBufferSize]; pbAACBuffer = new unsigned char[nMaxOutputBytes]; /// 2.1. èŽ·å–å½“å‰çš„ç¼–ç å™¨é…ç½® pConfiguration = faacEncGetCurrentConfiguration(hEncoder); pConfiguration-&gt;inputFormat = FAAC_INPUT_16BIT; // å¯¹è±¡ç±»åž‹åªæœ‰ä¸º LOW, iOS çš„ AVAudioPlayer æ‰èƒ½æ’­æ”¾ pConfiguration-&gt;aacObjectType = LOW; // 0 = Raw; 1 = ADTS pConfiguration-&gt;outputFormat = 1; pConfiguration-&gt;mpegVersion = MPEG4; pConfiguration-&gt;useTns = 1; pConfiguration-&gt;bitRate = 30; /// 2.2. é…ç½®ç¼–ç å™¨ nRet = faacEncSetConfiguration(hEncoder, pConfiguration); //æ˜¯wavæ ¼å¼, å…ˆè¯»å–å‰é¢çš„ fseek(fpIn, 58, SEEK_SET); do &#123; //è¯»å…¥çš„å®žé™…å­—èŠ‚æ•°ï¼Œæœ€å¤§ä¸ä¼šè¶…è¿‡ nPCMBufferSize nBytesRead = fread(pbPCMBuffer, 1, nPCMBufferSize, fpIn); //è¾“å…¥æ ·æœ¬æ•°ï¼Œç”¨å®žé™…è¯»å…¥å­—èŠ‚æ•°è®¡ç®— //ä¸€èˆ¬åªæœ‰è¯»åˆ°æ–‡ä»¶å°¾æ—¶æ‰ä¸æ˜¯ nPCMBufferSize/(nPCMBitSize/8) nInputSamples = nBytesRead / (nPCMBitSize / 8); /// 3. ç¼–ç  nRet = faacEncEncode(hEncoder, (int *)pbPCMBuffer, (unsigned int)nInputSamples, pbAACBuffer, (unsigned int)nMaxOutputBytes); fwrite(pbAACBuffer, 1, nRet, fpOut); printf(&quot;FaacEncEncode returns %d\n&quot;, nRet); &#125; while (nBytesRead &gt; 0); /// 4. å…³é—­ FAAC nRet = faacEncClose(hEncoder); delete[] pbPCMBuffer; delete[] pbAACBuffer; fclose(fpIn); fclose(fpOut); return 0;&#125; ä½¿ç”¨ MZCodec çš„ Controller éœ€è¦å‘½åä¸º .mm æ–‡ä»¶. ViewController.mm 12345678910111213141516NSBundle *bundle = [NSBundle mainBundle];NSString *resPath = [bundle pathForResource:@&quot;m&quot; ofType:@&quot;wav&quot;];NSLog(@&quot;The path of wav file: %@&quot;, resPath); NSArray&lt;NSString *&gt; *docPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);NSString *destPath = [[docPath lastObject] stringByAppendingString:@&quot;/out.aac&quot;];NSLog(@&quot;The path of aac file: %@&quot;, destPath); dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; codeWAV([resPath UTF8String], [destPath UTF8String]); dispatch_async(dispatch_get_main_queue(), ^&#123; //è½¬æ¢å®Œæˆ. &#125;);&#125;); ç¼–ç è¿‡ç¨‹éœ€è¦ç‚¹æ—¶é—´, å¦‚æžœæ–‡ä»¶å¾ˆå¤§, æ—¶é—´è¶Šä¹…. æ‰€ä»¥, æ–°å¼€çº¿ç¨‹æ¥è¿›è¡Œç¼–ç . ç¼–ç å®ŒæˆåŽ, å¯åœ¨å¯¹åº”çš„æ²™ç›’ç›®å½•æ‰¾åˆ° out.aac æ–‡ä»¶. å…·ä½“ä»£ç åœ¨ Github ä¸Šé¢, æ„Ÿå…´è¶£çš„å¯ä»¥ç‚¹å‡» å‰å¾€. æ³¨æ„äº‹é¡¹è¿™ä¸ª aacObjectType éœ€è¦æ³¨æ„, ä¹‹å‰æˆ‘åœ¨è¿™é‡ŒæŠ˜è…¾äº†å¾ˆä¹…. 1pConfiguration-&gt;aacObjectType = LOW; å¦‚æžœè®¾ç½®ä¸ºå…¶ä»–ä¸‰ç§, ç¼–ç åŽçš„ aac æ–‡ä»¶, AVAudioPlayer æ’­æ”¾ä¸äº†, åˆå§‹åŒ– AVAudioPlayer å°±ä¼šæŠ¥é”™, æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹:]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘ faac faad2</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éŸ³è§†é¢‘ç¼–ç¨‹: ç¼–è¯‘ faac/faad2]]></title>
    <url>%2F2018%2F02%2F14%2F%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E7%A8%8B-%E7%BC%96%E8%AF%91-faac-faad2%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡åˆ†äº«å¦‚ä½•åœ¨ MacOS ä¸Šé¢ç¼–è¯‘ faac å’Œ faad2, ç¼–è¯‘åŽçš„åº“æ–‡ä»¶å¯ä»¥ç›´æŽ¥åœ¨ iOS ä¸Šé¢ä½¿ç”¨. åŽç»­ä¼šåˆ†äº«å¦‚ä½•ç¼–è¯‘ç»™ Android ä½¿ç”¨çš„åº“æ–‡ä»¶çš„æ–¹æ³•ä»¥åŠå®žæˆ˜. è¯¥ç³»åˆ—åšæ–‡: éŸ³è§†é¢‘ç¼–ç¨‹: ç¼–è¯‘ faac/faad2(æœ¬ç¯‡) éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faac ç¼–ç  éŸ³è§†é¢‘ç¼–ç¨‹: ç®€å•åˆ†æž WAV æ–‡ä»¶ éŸ³è§†é¢‘ç¼–ç¨‹: iOS ä½¿ç”¨ faad2 éŸ³è§†é¢‘ç¼–ç¨‹: æž„å»º nginx æŽ¨æµæœåŠ¡å™¨ ç®€ä»‹faad æ˜¯ AAC æ ¼å¼æ–‡ä»¶çš„éŸ³é¢‘è§£ç åº“. ç›¸å¯¹äºŽ FFmpeg æ¥è¯´æ¯”è¾ƒè½»é‡å’Œç®€å•. ç¼–è¯‘å‡ºæ¥å…¨å¹³å°é™æ€åº“æ–‡ä»¶è¾ƒå°, API ä¹Ÿæ¯”è¾ƒç®€å•, ç¼ºç‚¹æ˜¯åŠŸèƒ½å•ä¸€, åªèƒ½å¤„ç† AAC æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶. faac æ˜¯ä¸Žä¹‹å¯¹åº”çš„ AAC éŸ³é¢‘ç¼–ç åº“. æ”¯æŒ MPEG-4 å’Œ MPEG-2 çš„AAC ç¼–ç ï¼Œå…¶ç‰¹æ€§åŒ…æ‹¬ï¼šå¯ç§»æ¤æ€§å¥½ï¼Œå¿«é€Ÿï¼Œæ”¯æŒLC/Main/LTPï¼Œé€šè¿‡ Dream æ”¯æŒ DRM. è¿™ä¸¤ä¸ªåº“è™½ç„¶å¾ˆä¹…æ²¡æœ‰æ›´æ–°äº†, ä½†æ˜¯å…¶åŠŸèƒ½å·²ç»æ»¡è¶³å¾ˆå¤šä¸šåŠ¡åœºæ™¯äº†, å¹¶ä¸”å¾ˆå¥½ç”¨. ä¸‹è½½æºç ç‚¹å‡» æºç é“¾æŽ¥ å³å¯ä¸‹è½½æºç . ç¼–è¯‘ faacä¸‹è½½å®ŒæˆåŽ, è§£åŽ‹, å°† faac-1.28 æ”¾åˆ°æ–°å»ºç›®å½• src ä¸‹é¢å³å¯, ç›®å½•ç»“æž„å¦‚ä¸‹: ä¿®æ”¹ build_faac.sh æƒé™: 1chmod +x build_faac.sh ç¼–è¾‘ build_faac.sh å†…å®¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576#!/bin/sh # http://www.linuxfromscratch.org/blfs/view/svn/multimedia/faac.html # ftp://mirror.ovh.net/gentoo-distfiles/distfiles/ major=1 minor=28 micro= XCD_ROOT=&quot;/Applications/Xcode.app/Contents/Developer&quot; TOL_ROOT=&quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain&quot; #ä¿®æ”¹ä¸ºæœ€æ–°çš„ sdk ç‰ˆæœ¬SDK_ROOT=&quot;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS11.2.sdk&quot; SDK_SML_ROOT=&quot;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator11.2.sdk&quot; export PATH=$TOL_ROOT/usr/bin:$PATH work=`pwd` srcs=$work/src buid=$work/build insl=$buid/install name=faac-$&#123;major&#125;.$&#123;minor&#125; pakt=$&#123;name&#125;.tar.gz dest=$work/faac-iOS-$&#123;major&#125;.$&#123;minor&#125;.$&#123;micro&#125;.tgz rm -rf $srcs $buid $dest &amp;&amp; mkdir -p $srcs $buid archs=&quot;i386 x86_64 armv7 armv7s arm64&quot; for a in $archs; do case $a in arm*) sys_root=$&#123;SDK_ROOT&#125; host=arm-apple-darwin ;; i386|x86_64) sys_root=$&#123;SDK_SML_ROOT&#125; host=$a-apple-darwin ;; esac prefix=$insl/$a &amp;&amp; rm -rf $prefix &amp;&amp; mkdir -p $prefix rm -rf $srcs &amp;&amp; mkdir -p $srcs &amp;&amp; cd $work &amp;&amp; tar xvzf $pakt -C $srcs &amp;&amp; cd $srcs/$name export CC=&quot;$TOL_ROOT/usr/bin/clang -arch $a -isysroot $sys_root&quot; export CXX=&quot;$TOL_ROOT/usr/bin/clang++ -arch $a -isysroot $sys_root&quot; export CXXFLAGS=&quot;-arch $a -isysroot $sys_root&quot; export CFLAGS=&quot;-arch $a -isysroot $sys_root&quot; export LDFLAGS=&quot;-isysroot $sys_root&quot; export LIBS=&quot;-L$&#123;sys_root&#125;/usr/lib&quot; chmod +x bootstrap ./bootstrap \ &amp;&amp;./configure \ --host=$host \ --with-sysroot=$sys_root \ --prefix=$prefix \ --disable-shared \ --enable-static \ --disable-faac \ --with-mp4v2 \ &amp;&amp;make &amp;&amp; make install lipo_archs=&quot;$lipo_archs $prefix/lib/libfaac.a&quot; echo &apos;continue any key pressed..&apos; read -n 1done univ=$insl/universal &amp;&amp; mkdir -p $univ/lib cp -r $prefix/include $univ/ lipo $lipo_archs -create -output $univ/lib/libfaac.a ranlib $univ/lib/libfaac.a strip -S $univ/lib/libfaac.a cd $univ &amp;&amp; tar cvzf $dest * æ‰§è¡Œ ./build_faac.sh, å¼€å§‹ç¼–è¯‘. ç¼–è¯‘æˆåŠŸåŽ, ç”Ÿæˆ build ç›®å½•. å…¶ä¸­, universal ç”Ÿæˆçš„åº“æ˜¯é€šç”¨åº“. ç¼–è¯‘ faad2è§£åŽ‹åŽ, å°† faad2-2.7 æ”¹åä¸º faad. ç¼–å†™ç¼–è¯‘çš„è„šæœ¬æ–‡ä»¶, è¿™é‡Œå–åä¸º build_fadd2.sh 1touch build_fadd2.sh ç¼–è¾‘ build_fadd2.sh æ–‡ä»¶. å†™å…¥å¦‚ä¸‹å†…å®¹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101#!/bin/shCONFIGURE_FLAGS=&quot;--enable-static --with-pic&quot;ARCHS=&quot;arm64 armv7s armv7 x86_64 i386&quot;# directoriesSOURCE=&quot;faad&quot;FAT=&quot;fat-faad&quot;SCRATCH=&quot;scratch-faad&quot;# must be an absolute pathTHIN=`pwd`/&quot;thin-faad&quot;COMPILE=&quot;y&quot;LIPO=&quot;y&quot;if [ &quot;$*&quot; ]thenif [ &quot;$*&quot; = &quot;lipo&quot; ]then# skip compileCOMPILE=elseARCHS=&quot;$*&quot;if [ $# -eq 1 ]then# skip lipoLIPO=fififiif [ &quot;$COMPILE&quot; ]thenCWD=`pwd`for ARCH in $ARCHSdoecho &quot;building $ARCH...&quot;mkdir -p &quot;$SCRATCH/$ARCH&quot;cd &quot;$SCRATCH/$ARCH&quot;if [ &quot;$ARCH&quot; = &quot;i386&quot; -o &quot;$ARCH&quot; = &quot;x86_64&quot; ]thenPLATFORM=&quot;iPhoneSimulator&quot;CPU=if [ &quot;$ARCH&quot; = &quot;x86_64&quot; ]thenSIMULATOR=&quot;-mios-simulator-version-min=7.0&quot;HOST=&quot;--host=x86_64-apple-darwin&quot;elseSIMULATOR=&quot;-mios-simulator-version-min=5.0&quot;HOST=&quot;--host=i386-apple-darwin&quot;fielsePLATFORM=&quot;iPhoneOS&quot;if [ $ARCH = &quot;armv7s&quot; ]thenCPU=&quot;--cpu=swift&quot;elseCPU=fiSIMULATOR=HOST=&quot;--host=arm-apple-darwin&quot;fiXCRUN_SDK=`echo $PLATFORM | tr &apos;[:upper:]&apos; &apos;[:lower:]&apos;`CC=&quot;xcrun -sdk $XCRUN_SDK clang -Wno-error=unused-command-line-argument-hard-error-in-future&quot;AS=&quot;$CWD/$SOURCE/extras/gas-preprocessor.pl $CC&quot;CFLAGS=&quot;-arch $ARCH $SIMULATOR&quot;CXXFLAGS=&quot;$CFLAGS&quot;LDFLAGS=&quot;$CFLAGS&quot;CC=$CC CFLAGS=$CXXFLAGS LDFLAGS=$LDFLAGS CPPFLAGS=$CXXFLAGS CXX=$CC CXXFLAGS=$CXXFLAGS $CWD/$SOURCE/configure \$CONFIGURE_FLAGS \$HOST \--prefix=&quot;$THIN/$ARCH&quot; \--disable-shared \--without-mp4v2make clean &amp;&amp; make &amp;&amp; make install-stripcd $CWDdonefiif [ &quot;$LIPO&quot; ]thenecho &quot;building fat binaries...&quot;mkdir -p $FAT/libset - $ARCHSCWD=`pwd`cd $THIN/$1/libfor LIB in *.adocd $CWDlipo -create `find $THIN -name $LIB` -output $FAT/lib/$LIBdonecd $CWDcp -rf $THIN/$1/include $FATfi ç»™äºˆæ‰§è¡Œæƒé™: 1chmod +x build_fadd2.sh æ­¤æ—¶ç›®å½•ç»“æž„å¦‚ä¸‹: æ‰§è¡Œç¼–è¯‘è„šæœ¬, åœ¨å½“å‰ç›®å½•ç”Ÿæˆ scratch-faad å’Œ fat-faad ä»¥åŠ thin-faad ç›®å½•, å¦‚ä¸‹: ä½¿ç”¨ fat-faad é‡Œé¢çš„åº“å’Œæ–‡ä»¶å³å¯. å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å¯¹åº”çš„ .a æ–‡ä»¶æ‰€æ”¯æŒçš„æž¶æž„: 1lipo -info libfaad.a ä¼šå¾—åˆ°å¯¹åº”çš„è¾“å‡º: 1Architectures in the fat file: libfaad.a are: i386 armv7 armv7s arm64 åŒæ ·å¯ä»¥æŸ¥çœ‹ libfaac.a. åŽè®°ç¼–è¯‘å¥½çš„æ–‡ä»¶, å·²ç»æ”¾åˆ° github ä¸Šé¢äº†, æœ‰éœ€è¦çš„å¯ä»¥ä¸‹è½½ä½¿ç”¨, ç‚¹å‡» ä¸‹è½½é“¾æŽ¥ è¿›å…¥. æ„Ÿè°¢ fflydev/faac-ios-build æä¾›ç¼–è¯‘ faac çš„ shell, åªéœ€è¦å°†é‡Œé¢å¯¹åº”çš„ SDK æ”¹ä¸ºæœ¬æœºæœ€æ–°çš„ SDK å³å¯. å‚è€ƒæ–‡ç«  faac 1.28çš„äº¤å‰ç¼–è¯‘ä¸Žé—®é¢˜è§£å†³ ä½¿ç”¨FAADåº“è§£ç AACå®žä¾‹ åœ¨Linuxä¸Šä½¿ç”¨FDK AACå°‡éŸ³æ¨‚è½‰æˆM4A(AACã€HE-AACã€HE-AACv2)æ ¼å¼ aacæ–‡ä»¶è½¬ç ä¸ºwavæ–‡ä»¶]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘ faac faad2</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å¤šçº¿ç¨‹: åˆæ­¥è®¤è¯†]]></title>
    <url>%2F2018%2F02%2F12%2FiOS-%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%2F</url>
    <content type="text"><![CDATA[å‡ ä¹Žæ¯ä¸ªç¼–ç¨‹è¯­è¨€æˆ–è€…å¹³å°éƒ½ä¼šé‡åˆ°å¤šçº¿ç¨‹çš„é—®é¢˜, è¯´æ˜Žå¤šçº¿ç¨‹æ˜¯ä¸€ä¸ªéžå¸¸é‡è¦ä¸”å¼€å‘è€…å¿…é¡»äº†è§£å’ŒæŽŒæ¡çš„. å¤šçº¿ç¨‹ä¹Ÿæ˜¯é¢è¯•å®˜æ¯”è¾ƒå–œæ¬¢é—®çš„é—®é¢˜, ä¾‹å¦‚: è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«, Android æ˜¯å¦æ”¯æŒå¤šè¿›ç¨‹? çº¿ç¨‹æ± å¦‚ä½•å®žçŽ°çš„? é”æœºåˆ¶? å¤šçº¿ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡? è°ˆåŠ iOS ä¸­çš„å¤šçº¿ç¨‹ï¼Œä¸€èˆ¬è¯´çš„æ˜¯ pthreadï¼ŒNSthreadï¼ŒGCDï¼ŒNSOperation è¿™å››ç§, ç”¨çš„æœ€å¤šä¹Ÿæœ€æ–¹ä¾¿çš„å°±æ˜¯ GCD äº†. å…³äºŽè¿™å››è€…, åŽç»­ä¼šä¸ºå¤§å®¶ä¸€ä¸€åˆ†äº«. phtread æ˜¯è·¨å¹³å°çš„, C/C++ ä¸­éƒ½æœ‰å®ƒçš„å£°å½±, GCD å’Œ NSOperation éƒ½æ˜¯å¸¸ç”¨çš„ï¼ŒNSOperation æ˜¯åŸºäºŽ GCD çš„. GCD çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯å°†ä¸€ä¸ªä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ï¼ŒæŒ‡å®šä»»åŠ¡æ‰§è¡Œçš„æ–¹æ³•ï¼Œç„¶åŽæ‰§è¡Œ, NSOperation åˆ™æ˜¯ç›´æŽ¥å°†ä¸€ä¸ªæ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­. è¯¥ç³»åˆ—æ–‡ç« æ¥è·Ÿå¤§å®¶åˆ†äº«å…³äºŽ iOS ä¸­çš„å¤šçº¿ç¨‹. iOS å¤šçº¿ç¨‹: åˆæ­¥è®¤è¯†(æœ¬ç¯‡) è¿›ç¨‹å’Œçº¿ç¨‹è¿›ç¨‹å’Œçº¿ç¨‹çš„å®šä¹‰, å¤§å®¶å¯ä»¥è‡ªè¡Œåˆ°ç»´åŸºç™¾ç§‘ä¸Šé¢åŽ»æŸ¥. è¿™é‡Œåªè¯´äºŒè€…çš„åŒºåˆ«. ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹, ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹å¦‚ä¸»çº¿ç¨‹. å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘æ€§é«˜. è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šçº¿ç¨‹æ˜¯å…±äº«å†…å­˜çš„ï¼Œä»Žè€Œæžå¤§åœ°æé«˜äº†ç¨‹åºçš„è¿è¡Œæ•ˆçŽ‡. æ¯ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œçš„å…¥å£ã€é¡ºåºæ‰§è¡Œåºåˆ—å’Œç¨‹åºçš„å‡ºå£. çº¿ç¨‹ä¸èƒ½å¤Ÿç‹¬ç«‹æ‰§è¡Œï¼Œå¿…é¡»ä¾å­˜åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›å¤šä¸ªçº¿ç¨‹æ‰§è¡ŒæŽ§åˆ¶. æ“ä½œç³»ç»Ÿå¹¶æ²¡æœ‰å°†å¤šä¸ªçº¿ç¨‹çœ‹åšå¤šä¸ªç‹¬ç«‹çš„åº”ç”¨, å¤šçº¿ç¨‹çš„æ„ä¹‰åœ¨äºŽä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œæœ‰å¤šä¸ªæ‰§è¡Œéƒ¨åˆ†å¯ä»¥åŒæ—¶æ‰§è¡Œ, ä»Žè€Œå®žçŽ°äº†è¿›ç¨‹çš„è°ƒåº¦å’Œç®¡ç†ä»¥åŠèµ„æºåˆ†é…. é˜Ÿåˆ—iOS ä¸­, é˜Ÿåˆ—ä¸»è¦åˆ†ä¸º: å…¨å±€é˜Ÿåˆ— ä¸»é˜Ÿåˆ—. ä¸²è¡Œé˜Ÿåˆ—. å¹¶å‘é˜Ÿåˆ—. Concurrent:tasks are dequeued in FIFO order, but run concurrently and can finish in any order. Serial: .tasks execute one at a time in FIFO order å¹¶å‘: ä»»åŠ¡ä»¥ FIFO ä»Žåºåˆ—ä¸­ç§»é™¤ï¼Œç„¶åŽå¹¶å‘è¿è¡Œï¼Œå¯ä»¥æŒ‰ç…§ä»»ä½•é¡ºåºå®Œæˆ. ä¸²è¡Œ: ä»»åŠ¡ä»¥FIFOä»Žåºåˆ—ä¸­ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œ. ä¸€æ¬¡åªè°ƒåº¦ä¸€ä¸ªä»»åŠ¡. åœ¨ iOS ä¸­, å¹¶å‘ä¸ä¸€å®šä¼šå¼€å¯å¤šä¸ªçº¿ç¨‹, ä¸²è¡Œä¹Ÿä¸ä¸€å®šåªå¼€å¯ä¸€ä¸ªçº¿ç¨‹. å› ä¸ºè¿™é‡Œä¼šç‰µæ‰¯åˆ°æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥æ‰§è¡Œ. ä¸»é˜Ÿåˆ—, å³ mainQueue. Returns the default queue that is bound to the main thread. ä¼šå…³è”ä¸»çº¿ç¨‹. å…¨å±€é˜Ÿåˆ—, å³ globalQueue. The well-known global concurrent queues may not be modified. å…¨å±€é˜Ÿåˆ—ä¸­æ‰§è¡Œä¸ä¸€å®šä¼šå¼€å¯æ–°çº¿ç¨‹. åŒæ­¥å’Œå¼‚æ­¥åœ¨ iOS çš„ GCD ä¸­, è¿˜æœ‰åŒæ­¥å’Œå¼‚æ­¥æ‰§è¡Œçš„åŒºåˆ«. åŒæ­¥ åŒæ­¥æ‰§è¡Œä»£ç å—, è¯¸å¦‚ dispatch_async ä¸­æ‰§è¡Œçš„. å¼‚æ­¥ å¼‚æ­¥æ‰§è¡Œä»£ç å—, è¯¸å¦‚ dispatch_sync ä¸­æ‰§è¡Œçš„. åˆ›å»ºé˜Ÿåˆ—çš„æ–¹æ³•åˆ›å»ºä¸»é˜Ÿåˆ— 1dispatch_queue_t dispatch_get_main_queue(void); åˆ›å»ºå…¨å±€é˜Ÿåˆ— 1dispatch_queue_t dispatch_get_global_queue(long identifier, unsigned long flags); å‚æ•° identifier ç”¨æ¥è¡¨ç¤ºä¼˜å…ˆçº§. å¯¹åº”çš„ä¼˜å…ˆçº§ä¸º: DISPATCH_QUEUE_PRIORITY_HIG DISPATCH_QUEUE_PRIORITY_DEFAULT DISPATCH_QUEUE_PRIORITY_LOW DISPATCH_QUEUE_PRIORITY_BACKGROUND å¦‚æžœä¼ å…¥ 0 æ ‡ç¤º DISPATCH_QUEUE_PRIORITY_DEFAULT. å‚æ•° flags æ˜¯ä¸€ä¸ªä¿ç•™å‚æ•°, API æ–‡æ¡£è¦æ±‚ä¼ å…¥ 0, éž0å€¼å¯èƒ½ä¼šå¯¼è‡´è¿”å›žç»“æžœä¸º NULL. è‡ªå®šä¹‰é˜Ÿåˆ— dispatch_queue_t dispatch_queue_create(const char *label, dispatch_queue_attr_t attr); å‚æ•° label æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸². å‚æ•° attr ç”¨æ¥æ ‡ç¤ºæ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œé˜Ÿåˆ—. å¯ä»¥ä»Ž DISPATCH_QUEUE_SERIAL, DISPATCH_QUEUE_CONCURRENT äºŒè€…ä¸­å–å€¼. å¦‚æžœè¯¥å‚æ•°ä¼ å…¥ NULL, é»˜è®¤æ˜¯ DISPATCH_QUEUE_SERIAL ä¸²è¡Œé˜Ÿåˆ—. ä¸²è¡Œé˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ä¸²è¡Œé˜Ÿåˆ—åˆ°åº•æ˜¯å¼€äº†ä¸€ä¸ªçº¿ç¨‹, è¿˜æ˜¯å¼€äº†å¤šä¸ªçº¿ç¨‹, æˆ‘ä»¬ä¸€æŽ¢ç©¶ç«Ÿ. å…ˆçœ‹ä¾‹å­1 12345678dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.veryitman&quot;, DISPATCH_QUEUE_SERIAL); for (int i=0; i&lt;10; i++) &#123; dispatch_async(serialQueue, ^&#123; NSLog(@&quot;dispatch_async. DISPATCH_QUEUE_SERIAL CurrentThread: %@&quot;, [NSThread currentThread]); &#125;);&#125; å¯ä»¥çœ‹å‡º, åªå¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹. å†çœ‹ä¾‹å­2 12345678910dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.veryitman&quot;, DISPATCH_QUEUE_SERIAL); dispatch_async(serialQueue, ^&#123; NSLog(@&quot;dispatch_async. DISPATCH_QUEUE_SERIAL CurrentThread: %@&quot;, [NSThread currentThread]); sleep(2);&#125;);dispatch_async(serialQueue, ^&#123; NSLog(@&quot;dispatch_sync. DISPATCH_QUEUE_SERIAL CurrentThread: %@&quot;, [NSThread currentThread]);&#125;); å¯ä»¥çœ‹å‡º, ä¹Ÿåªå¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹. æ”¹é€ ä¸€ä¸‹ä¾‹å­2, å°†å…¶ä¸­çš„ä¸€ä¸ªå¼‚æ­¥æ”¹ä¸ºåŒæ­¥ 12345678910dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.veryitman&quot;, DISPATCH_QUEUE_SERIAL); dispatch_async(serialQueue, ^&#123; NSLog(@&quot;dispatch_async. DISPATCH_QUEUE_SERIAL CurrentThread: %@&quot;, [NSThread currentThread]); sleep(2);&#125;);dispatch_sync(serialQueue, ^&#123; NSLog(@&quot;dispatch_sync. DISPATCH_QUEUE_SERIAL CurrentThread: %@&quot;, [NSThread currentThread]);&#125;); å¯ä»¥çœ‹å‡º, åŒæ­¥çš„æ‰§è¡Œåœ¨ä¸»çº¿ç¨‹, äºŒè€…å¹¶ä¸æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œ. æ‰€ä»¥, ä¸²è¡Œé˜Ÿåˆ—ä¸­æ‰§è¡Œçš„ä»£ç , ä¸ä¸€å®šéƒ½åœ¨å­çº¿ç¨‹ä¸­, å¦‚æžœæ˜¯å¼‚æ­¥éƒ½æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œ.å¦‚æžœæ˜¯åŒæ­¥çš„è¯, ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ. åŒç†, å¹¶è¡Œé˜Ÿåˆ—ä¸­çš„å¼‚æ­¥æ‰§è¡Œä¼šå¼€å¯å¤šä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ. æ‰§è¡Œæ–¹å¼å’Œé˜Ÿåˆ—è¿™é‡Œçš„æ‰§è¡Œæ–¹å¼æŒ‡çš„æ˜¯åŒæ­¥æˆ–è€…å¼‚æ­¥æ‰§è¡Œ. å…ˆçœ‹å¼‚æ­¥æ‰§è¡Œ 12345678910111213141516171819202122232425/// å¼‚æ­¥å…¨å±€é˜Ÿåˆ—å’Œä¸»é˜Ÿåˆ— &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; // 1 NSLog(@&quot;dispatch_async. mainQueue. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; // 0 NSLog(@&quot;dispatch_async. globalQueue. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); &#125; /// å¼‚æ­¥ä¸²è¡Œå’Œå¹¶è¡Œé˜Ÿåˆ— &#123; dispatch_async(dispatch_queue_create(&quot;&quot;, DISPATCH_QUEUE_SERIAL), ^&#123; // 0 NSLog(@&quot;dispatch_async. DISPATCH_QUEUE_SERIAL. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); dispatch_async(dispatch_queue_create(&quot;&quot;, DISPATCH_QUEUE_CONCURRENT), ^&#123; // 0 NSLog(@&quot;dispatch_async. DISPATCH_QUEUE_CONCURRENT. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); &#125; å†çœ‹åŒæ­¥æ‰§è¡Œ 12345678910111213141516171819202122232425262728/// åŒæ­¥å…¨å±€é˜Ÿåˆ—å’Œä¸»é˜Ÿåˆ— &#123; #if 0 // ä¼šæ­»é” dispatch_sync(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;dispatch_sync. mainQueue. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); #endif dispatch_sync(dispatch_get_global_queue(0, 0), ^&#123; // 1 NSLog(@&quot;dispatch_sync. globalQueue. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); &#125; /// åŒæ­¥ä¸²è¡Œå’Œå¹¶è¡Œé˜Ÿåˆ— &#123; dispatch_sync(dispatch_queue_create(&quot;&quot;, DISPATCH_QUEUE_SERIAL), ^&#123; // 1 NSLog(@&quot;dispatch_sync. DISPATCH_QUEUE_SERIAL. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); dispatch_sync(dispatch_queue_create(&quot;&quot;, DISPATCH_QUEUE_CONCURRENT), ^&#123; // 1 NSLog(@&quot;dispatch_sync. DISPATCH_QUEUE_CONCURRENT. isMainThread: %i&quot;, [NSThread isMainThread]); &#125;); &#125; å¾—å‡ºç»“è®º ä»»ä½•é˜Ÿåˆ—çš„åŒæ­¥æ‰§è¡Œ, éƒ½æ²¡æœ‰å¼€å¯æ–°çº¿ç¨‹, åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ. ä¸»é˜Ÿåˆ—çš„åŒæ­¥æ‰§è¡Œä¼šé€ æˆæ­»é”. ä¸»é˜Ÿåˆ—çš„å¼‚æ­¥æ‰§è¡Œ, æ²¡æœ‰å¼€å¯æ–°çº¿ç¨‹. åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ. ä¸²è¡Œå’Œå¹¶è¡Œä»¥åŠå…¨å±€é˜Ÿåˆ—çš„å¼‚æ­¥æ‰§è¡Œ, éƒ½ä¼šå¼€å¯æ–°çº¿ç¨‹. å‚è€ƒ è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« è¿›ç¨‹ä¸Žçº¿ç¨‹çš„ä¸€ä¸ªç®€å•è§£é‡Š]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS å¤šçº¿ç¨‹ è¿›ç¨‹ GCD</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[C/C++: å¦‚ä½•ç›¸äº’è°ƒç”¨]]></title>
    <url>%2F2018%2F02%2F12%2FC-C-%E5%A6%82%E4%BD%95%E7%9B%B8%E4%BA%92%E8%B0%83%E7%94%A8%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ç®€ä»‹C++ ä¸­è°ƒç”¨ C æ¯”è¾ƒç®€å•. ä½†æ˜¯ C è°ƒç”¨ C++ ç¨å¾®å¤æ‚ä¸€äº›. C è°ƒç”¨ C++ åˆ†ä¸ºå¯ä»¥è°ƒç”¨ C++ ç±»ä¸­çš„å‡½æ•°å’Œæ™®é€š cpp ä¸­çš„å‡½æ•°. æ— è®ºæ˜¯å“ªç§å‡½æ•°, æˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨å°è£…äº† C++ çš„æ–‡ä»¶ä½œä¸ºé€‚é…ä¾›ç»™ C æ¥ä½¿ç”¨. ä¸‹é¢çœ‹å…·ä½“çš„ä¾‹å­. C++ è°ƒç”¨ Cé¦–å…ˆåˆ›å»º CFile.h å’Œ CFile.c æ–‡ä»¶. CFile.h 12345678#ifndef CFile_h#define CFile_h#include &lt;stdio.h&gt;extern void start_c(int cmd);#endif /* CFile_h */ CFile.c 123456#include &quot;CFile.h&quot;void start_c(int cmd) &#123; printf(&quot;start_c by cmd: %i\n&quot;, cmd);&#125; åœ¨ C++ æ–‡ä»¶ä¸­è°ƒç”¨ C ä»£ç , ç¤ºä¾‹å¦‚ä¸‹: main.cpp 12345678910extern &quot;C&quot; &#123;#include &quot;CFile.h&quot;&#125;int main(int argc, const char * argv[]) &#123; start_c(1); return 0;&#125; è¿™é‡Œå¯ä»¥çœ‹åˆ°å¯¼å…¥ C æ–‡ä»¶çš„æ–¹å¼: 123extern &quot;C&quot; &#123;#include &quot;CFile.h&quot;&#125; å¦‚æžœç›´æŽ¥å¯¼å…¥, å¦‚: 12345678#include &quot;CFile.h&quot;int main(int argc, const char * argv[]) &#123; start_c(1); return 0;&#125; ç¼–è¯‘æŠ¥é”™: 1234Undefined symbols for architecture x86_64: &quot;start_c(int)&quot;, referenced from: _main in main.old: symbol(s) not found for architecture x86_64 è¿™é‡Œçš„ extern &quot;C&quot; å‘Šè¯‰ç¼–è¯‘å™¨, è¦æŒ‰ç…§ C çš„é“¾æŽ¥çº¦å®šï¼Œè€Œä¸æ˜¯ C++ çš„é“¾æŽ¥çº¦å®š. C ç¼–è¯‘å™¨ä¸æ”¯æŒ extern &quot;C&quot;. C è°ƒç”¨æ™®é€š C++ çš„å‡½æ•°C è°ƒç”¨ C++ æœ‰ç‚¹æ›²æŠ˜. CPPFile.hpp 123456#ifndef CPPFile_hpp#define CPPFile_hppvoid start_cpp(int cmd);#endif /* CPPFile_hpp */ CPPFile.cpp 123456789#include &quot;CPPFile.hpp&quot;#include &lt;iostream&gt;using namespace std;void start_cpp(int cmd) &#123; cout &lt;&lt; &quot;start_cpp by cmd: &quot; &lt;&lt; cmd &lt;&lt; endl;&#125; è¿™é‡Œéœ€è¦å†™ä¸€ä¸ªä¸­é—´çš„ cpp(CPPAdapter.cpp)æ–‡ä»¶, æä¾›æ–¹æ³•ç»™ C æ¥ä½¿ç”¨. æ³¨æ„: è¿™é‡Œæ²¡æœ‰ CPPAdapter.hpp å¤´æ–‡ä»¶. CPPAdapter.cpp 123456789101112131415#include &quot;CPPFile.hpp&quot;#ifdef __cplusplusextern &quot;C&quot; &#123;#endif void adapter_start_cpp(int cmd) &#123; //è°ƒç”¨ CPPFile ä¸­çš„æ–¹æ³• start_cpp(cmd); &#125; #ifdef __cplusplus&#125;#endif ç„¶åŽåœ¨ C ä¸­è°ƒç”¨ C++ çš„ä»£ç : CFile.c 12345678910#include &quot;CFile.h&quot;//å£°æ˜Žå‡½æ•°extern void adapter_start_cpp(int cmd);void start_c(int cmd) &#123; //è°ƒç”¨ c++ ä»£ç  adapter_start_cpp(5);&#125; C è°ƒç”¨ C++ ç±»ä¸­çš„æ–¹æ³•å’Œä¸Šé¢ä¾‹å­çš„åŽŸç†ä¸€æ ·çš„. CPPClassFile.hpp 1234567891011121314151617181920#ifndef CPPClassFile_hpp#define CPPClassFile_hpp#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;class Person &#123;private: string name; public: Person(); ~Person(); int setName(string name);&#125;;#endif /* CPPClassFile_hpp */ CPPClassFile.cpp 1234567891011121314151617181920#include &quot;CPPClassFile.hpp&quot;Person::Person() &#123; cout &lt;&lt; &quot;Person()&quot; &lt;&lt; endl;&#125;Person::~Person() &#123; cout &lt;&lt; &quot;~Person()&quot; &lt;&lt; endl;&#125;int Person::setName(string name) &#123; this-&gt;name = name; cout &lt;&lt; &quot;Set name: &quot; &lt;&lt; name &lt;&lt; endl; return 0;&#125; CPPAdapter.cpp 12345678910111213141516171819202122232425#include &quot;CPPFile.hpp&quot;#include &quot;CPPClassFile.hpp&quot;#ifdef __cplusplusextern &quot;C&quot; &#123;#endif void adapter_start_cpp(int cmd) &#123; //è°ƒç”¨ CPPFile ä¸­çš„æ–¹æ³• start_cpp(cmd); &#125; int adapter_set_name(const char *cName) &#123; Person *person = new Person(); int ret = person-&gt;setName(cName); delete person; return ret; &#125; #ifdef __cplusplus&#125;#endif åœ¨ C ä¸­å¯ä»¥è°ƒç”¨äº†, å¦‚ä¸‹ä»£ç : CFile.c 123456789101112131415161718#include &quot;CFile.h&quot;///å£°æ˜Ž CPPFile ä¸­çš„æ–¹æ³•extern void adapter_start_cpp(int cmd);///å£°æ˜Ž CPPClassFile ä¸­çš„æ–¹æ³•extern int adapter_set_name(const char *cName);void start_c(int cmd) &#123; printf(&quot;start_c by cmd: %i\n&quot;, cmd); //è°ƒç”¨ CPPFile ä¸­çš„æ–¹æ³• adapter_start_cpp(5); //è°ƒç”¨ CPPClassFile ä¸­çš„æ–¹æ³• adapter_set_name(&quot;www.veryitman.com&quot;);&#125; extern â€œCâ€extern &quot;C&quot; ä¸­çš„ â€œCâ€ å¹¶ä¸è¡¨ç¤º C è¯­è¨€ï¼Œâ€Câ€ è¡¨ç¤ºçš„æ˜¯ä¸€ç§é“¾æŽ¥çº¦å®š. extern &quot;C&quot; æŒ‡ä»¤æè¿°çš„æ˜¯ä¸€ç§é“¾æŽ¥çº¦å®šï¼Œå®ƒå¹¶ä¸å½±å“è°ƒç”¨å‡½æ•°çš„å®šä¹‰ï¼Œå³ä½¿åšäº†è¯¥å£°æ˜Žï¼Œå¯¹å‡½æ•°ç±»åž‹çš„æ£€æŸ¥å’Œå‚æ•°è½¬æ¢ä»è¦éµå¾ª C++ çš„æ ‡å‡†ï¼Œè€Œä¸æ˜¯ C çš„æ ‡å‡†. ä¸åŒçš„ç¼–ç¨‹è¯­è¨€(ç¼–è¯‘åž‹)é“¾æŽ¥ç‰¹æ€§æ˜¯ä¸åŒçš„ï¼Œè¿™ä¹Ÿå†³å®šäº†å®ƒä»¬ç¼–è¯‘åŽçš„é“¾æŽ¥ç¬¦å·çš„ä¸åŒ. å¦‚å‡½æ•° void function(int d)ï¼ŒC è¯­è¨€ä¼šæŠŠå®ƒç¼–è¯‘æˆç±»ä¼¼ _function è¿™æ ·çš„ç¬¦å·ï¼ŒC é“¾æŽ¥å™¨åªè¦æ‰¾åˆ°è¯¥å‡½æ•°ç¬¦å·å°±å¯ä»¥é“¾æŽ¥æˆåŠŸ. C++ ä¼šæŠŠè¿™ä¸ªå‡½æ•°ç¼–è¯‘æˆç±»ä¼¼ _function_int æˆ– _xxx_functionIntxxx è¿™æ ·çš„ç¬¦å·ï¼Œå³åœ¨ç¬¦å·ä¸Šå¢žåŠ äº†ç±»åž‹ä¿¡æ¯ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆ C++ å¯ä»¥å®žçŽ°å‡½æ•°é‡è½½äº†. é‚£ä¹ˆï¼Œå¯¹äºŽç”¨ C ç¼–è¯‘å™¨ç¼–è¯‘æˆçš„åº“ï¼Œç”¨ C++ ç›´æŽ¥é“¾æŽ¥åŠ¿å¿…ä¼šå‡ºçŽ°ä¸èƒ½è¯†åˆ«ç¬¦å·çš„é—®é¢˜ï¼Œç”¨ extern &quot;C&quot; å°±å¯ä»¥è§£å†³, æ­£å¦‚ä¸Šé¢çš„ä¾‹å­. ç®€å•æ¥è¯´, extern &quot;C&quot; çš„ä½œç”¨å°±æ˜¯è®©ç¼–è¯‘å™¨çŸ¥é“è¦ä»¥ C è¯­è¨€çš„æ–¹å¼ç¼–è¯‘å’Œé“¾æŽ¥å‡½æ•°. __cplusplus å®__cplusplus å®æ˜¯ C++ ç¼–è¯‘å™¨é»˜è®¤å®šä¹‰çš„. ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç : 123456789#ifdef __cplusplusextern &quot;C&quot;&#123;#endifvoid fun(int, size_t);#ifdef __cplusplus&#125;#endif åœ¨ C++ ä¸­, ç¼–è¯‘å™¨å°† fun æŒ‰ç…§ C çš„é“¾æŽ¥çº¦å®šæ¥ç¼–è¯‘, è€Œå¦‚æžœæ˜¯ C ç¼–è¯‘å™¨, ç›´æŽ¥æŒ‰ç…§ C çš„é“¾æŽ¥çº¦å®šæ¥ç¼–è¯‘å³å¯. __cplusplus æ˜¯åœ¨ C++ ç¼–è¯‘å™¨ä¸­é»˜è®¤å®šä¹‰çš„,ï¼£è¯­è¨€ä¸æ”¯æŒ extern &quot;ï¼£&quot;. ä¸Šé¢çš„ä»£ç å¾ˆå®žç”¨, ä¹Ÿæ˜¯ä¸€ç§ç¼–ç¨‹æŠ€å·§.]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>C C++ ç¼–ç¨‹è¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS APNs: Background Fetch]]></title>
    <url>%2F2018%2F02%2F08%2FiOS-APNs-Background-Fetch%2F</url>
    <content type="text"><![CDATA[åœ¨å‰é¢çš„å‡ ç¯‡æ–‡ç« ä¸­, ç»™å¤§å®¶ä»‹ç»äº†è·ŸæŽ¨é€ç›¸å…³çš„å†…å®¹. ä»Šå¤©è·Ÿå¤§å®¶èŠä¸€èŠ iOS7 æ–°åŠ å…¥çš„ Background Fetch åŠŸèƒ½. è¯¥ç³»åˆ—åšå®¢: iOS APNs: è¿œç¨‹æŽ¨é€iOS APNs: æœ¬åœ°æŽ¨é€iOS APNs: å¤„ç†æ•°æ®iOS APNs: é™é»˜æŽ¨é€iOS APNs: Background Fetch(æœ¬ç¯‡) ç®€ä»‹ä»Ž Background Fetch å­—é¢ä¸Šæ¥çœ‹, å¤§è‡´æ„æ€æ˜¯å¯åœ¨åŽå°èŽ·å–æ•°æ®. åœ¨ iOS7 ä¸­ï¼ŒApple ä¸ºå¼€å‘è€…æä¾›äº†å¯ä»¥åœ¨åŽå°æ›´æ–°åº”ç”¨ç¨‹åºç•Œé¢å’Œå†…å®¹çš„ API, å³ Background Fetch. è¯¥ç‰¹æ€§å…è®¸å¼€å‘è€…åœ¨ä¸€ä¸ªå‘¨æœŸé—´éš”åŽè¿›è¡Œç‰¹å®šçš„åŠ¨ä½œï¼Œå¦‚èŽ·å–ç½‘ç»œå†…å®¹, æ›´æ–° UI æ“ä½œç­‰. åŒæ—¶åœ¨ iOS7 ä¸­, ä¹ŸåŠ å…¥äº†å¦ä¸€ä¸ªç‰¹æ€§, å°±æ˜¯åšæ–‡ iOS APNs: é™é»˜æŽ¨é€ é‡Œé¢è¯´çš„é™é»˜æŽ¨é€. è¿™äº›éƒ½æ˜¯å¯¹ iOS åŽå°å¤šä»»åŠ¡çš„è¡¥å……å’Œå®Œå–„, Apple ä¸€ç›´åœ¨ä¼˜åŒ–ç³»ç»Ÿä»Žè€Œå¢žå¼ºç”¨æˆ·ä½“éªŒ. å¼€å¯ Background Fetch1.éœ€è¦ APP æ”¯æŒ å¦‚ä¸‹å›¾æ‰€ç¤º, å‹¾é€‰å³å¯. 2.è®¾ç½® fetch æ—¶é—´é—´éš” åœ¨ AppDelegate ä¸­è®¾ç½®. 12345- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // è®¾ç½® fetch æ—¶é—´é—´éš” [application setMinimumBackgroundFetchInterval:UIApplicationBackgroundFetchIntervalMinimum];&#125; UIApplicationBackgroundFetchIntervalMinimum æ˜¯ç³»ç»Ÿè‡ªå®šä¹‰çš„æ—¶é—´. å¦‚æžœä¸è®¾ç½®, é»˜è®¤æ˜¯ UIApplicationBackgroundFetchIntervalNever, è¿™æ ·å°±ä¸ä¼šè®© Background Fetch ç”Ÿæ•ˆäº†. å¯ä»¥æŸ¥çœ‹å¯¹ UIApplicationBackgroundFetchIntervalNever çš„å®˜æ–¹è§£é‡Š. 123UIApplicationBackgroundFetchIntervalNeverA fetch interval large enough to prevent fetch operations from occurring. å½“ç„¶, ä½ ä¹Ÿå¯ä»¥è®¾ç½®è‡ªå·±å®šä¹‰çš„æ—¶é—´çš„é—´éš”, ä½†æ˜¯åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆä½œç”¨, å› ä¸ºè¿™ä¸ªæ—¶é—´é—´éš”å®Œå…¨ç”±ç³»ç»Ÿæ¥å†³å®š, ç³»ç»Ÿä¼šæ ¹æ®ä½ çš„ç”µé‡ä»¥åŠä½¿ç”¨é¢‘çŽ‡æ¥å†³å®š. æ‰€ä»¥, å¯ä»¥ç†è§£ä¸º setMinimumBackgroundFetchInterval æ–¹æ³•åªæ˜¯å¼€å¯äº† Background Fetch åŠŸèƒ½. 3.å¼€å¯äº†ç³»ç»ŸåŽå°æ›´æ–°åŠŸèƒ½ åœ¨ iOS ç³»ç»Ÿä¸­, è®¾ç½®/é€šç”¨/åŽå°åº”ç”¨åˆ·æ–°ä¸­ä¸€å®šè¦å¼€å¯å¯¹åº” APP çš„åŠŸèƒ½. åˆ¤æ–­æ˜¯å¦å·²ç»å¼€å¯è¯¥åŠŸèƒ½çš„ç¤ºä¾‹ä»£ç : 1234if ([[UIApplication sharedApplication] backgroundRefreshStatus] != UIBackgroundRefreshStatusAvailable) &#123; //ä¸å¯ç”¨æç¤ºç”¨æˆ·&#125; å¤„ç†å›žè°ƒåœ¨å®žé™…çš„åº”ç”¨çŽ¯ä¸­ï¼ŒBackground Fetch äº‹ä»¶æ˜¯ç”±ç³»ç»Ÿç®¡ç†çš„ï¼Œæˆ‘ä»¬å¼€å‘è€…æ˜¯æ— æ³•é¢„å…ˆçŸ¥é“ Fetch äº‹ä»¶è¾¾åˆ°çš„æ—¶æœºçš„. ç½‘ä¸Šå¾ˆå¤šè¯´å¯ä»¥ä½¿ç”¨ Xcode æ¨¡æ‹Ÿè¿™ä¸ªäº‹ä»¶, ä¼°è®¡ä¹Ÿæ˜¯ä¹‹å‰çš„ç³»ç»Ÿå’Œ Xcode ç‰ˆæœ¬, çŽ°åœ¨çš„ Xcode9 è²Œä¼¼ä¸è¡Œäº†. ä½†æ˜¯, ä½ çš„æ‰‹æœºåœ¨åŽå°ç­‰å‡ åˆ†é’Ÿ, æœ‰æ—¶å€™ä¼šè¢«ç³»ç»Ÿè§¦å‘è¯¥äº‹ä»¶, è§¦å‘åŽ, å¯¹åº”çš„ç³»ç»Ÿå›žè°ƒ(åœ¨ AppDelegate ä¸­)ä¼šè¢«è°ƒç”¨. 12345678910// Background fetch å›žè°ƒ- (void)application:(UIApplication *)applicationperformFetchWithCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler &#123; MZLOG(@&quot;AppDelegate. Background fetch.&quot;); //å¯è¿›è¡Œå¯¹åº”çš„è€—æ—¶æ“ä½œ, å¦‚ä¸‹è½½ç­‰. completionHandler(UIBackgroundFetchResultNoData);&#125; Background Fetch ä¼šä¸ºæˆ‘ä»¬çš„ App äº‰å–æ›´å¤šçš„åŽå°æ—¶é—´, ä½†æ˜¯ä¸€èˆ¬æ˜¯å‡ åç§’å·¦å³, ä¸ä¼šå¤ªå¤š. æ‰€ä»¥, ä¸è¦åœ¨å›žè°ƒä¸­åšå¤ªå¤šè€—æ—¶çš„æ“ä½œ.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>APNs è¿œç¨‹æŽ¨é€ BackgroundFetch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS APNs: é™é»˜æŽ¨é€]]></title>
    <url>%2F2018%2F02%2F06%2FiOS-APNs-%E9%9D%99%E9%BB%98%E6%8E%A8%E9%80%81%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨çœ‹äººå·¥æ™ºèƒ½ç›¸å…³çš„çŸ¥è¯†ï¼Œæ— æ„ä¸­å‘çŽ°äº†ä¸€ä¸ªå·¨ç‰›çš„ äººå·¥æ™ºèƒ½æ•™ç¨‹ï¼Œåˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ æ•™ç¨‹ä¸ä»…æ˜¯é›¶åŸºç¡€ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”éžå¸¸é£Žè¶£å¹½é»˜ï¼Œåƒçœ‹å°è¯´ä¸€æ ·ï¼è§‰å¾—å¤ªç‰›äº†ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚ç‚¹ è¿™é‡Œ å¯ä»¥ç›´æŽ¥çœ‹æ•™ç¨‹ã€‚ ä»Šå¤©è·Ÿå¤§å®¶ä»‹ç»ä¸€ä¸‹ ios çš„é™é»˜æŽ¨é€åŠŸèƒ½ã€‚ é™é»˜æŽ¨é€ï¼Œç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡æŽ¨é€å®žçŽ°ç”¨æˆ·æ— æ„ŸçŸ¥çš„æ¶ˆæ¯é€šçŸ¥ã€‚ è¯¥ç³»åˆ—åšæ–‡: iOS APNs: è¿œç¨‹æŽ¨é€iOS APNs: æœ¬åœ°æŽ¨é€iOS APNs: å¤„ç†æ•°æ®iOS APNs: é™é»˜æŽ¨é€(æœ¬ç¯‡) æ™®é€šæŽ¨é€ä¾‹å¦‚å¾®ä¿¡ï¼Œå¥½å‹ç»™ä½ å‘é€äº†ä¸€æ¡æ¶ˆæ¯ï¼Œä½ çš„å¾®ä¿¡APP åœ¨åŽå°, æ­¤æ—¶ä¼šæ”¶åˆ°å¸¦å£°éŸ³çš„ä¸€ä¸ªæ¶ˆæ¯æç¤ºã€‚ è¿™æ¡æŽ¨é€æœºæ²¹æœ‰æ–‡å­—åˆæœ‰å£°éŸ³ï¼Œç‚¹å¼€è¿™ä¸ªæŽ¨é€å¯ä»¥ç›´æŽ¥æ‰“å¼€ APP. ä»Žç¨‹åºçš„è§’åº¦æ¥è®²ï¼Œè¿›å…¥ App åŽä¼šè°ƒç”¨ä¸‹é¢çš„æ–¹æ³•: iOS10.0.x å’Œå…¶ä¹‹å‰çš„ç³»ç»Ÿè°ƒç”¨ä¸‹é¢çš„æ–¹æ³•: 1- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo iOS10.0.x ä¹‹åŽçš„ç³»ç»Ÿï¼Œä¼šè°ƒç”¨å¦‚ä¸‹çš„æ–¹æ³•: 123- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult result))completionHandler é™é»˜æŽ¨é€çš„å¼‚åŒ1.æ²¡æœ‰å¼¹å‡ºæ¡† æ²¡æœ‰æŽ¨é€çš„å¼¹æ¡†å‡ºçŽ°ï¼Œç”¨æˆ·æ¯«æ— æ„ŸçŸ¥çš„æŽ¥æ”¶åˆ°äº†è¿™ä¸ªæŽ¨é€æ¶ˆæ¯. æœ‰ æ¶¦ç‰©ç»†æ— å£° çš„æ„Ÿè§‰ã€‚ è¯¥æŽ¨é€æ—¢æ²¡æœ‰æ–‡å­—åˆæ²¡æœ‰å£°éŸ³ã€‚ 2.éœ€è¦ç”¨æˆ·æŽˆæƒå…è®¸æŽ¨é€ è¿™ä¸ªè·Ÿæ™®é€šæŽ¨é€ä¸€æ ·ï¼Œéƒ½éœ€è¦ç”¨æˆ·æŽˆæƒæ‰å¯ä»¥æŽ¨é€ã€‚ 3.ä¼šæ‰§è¡Œä»£ç†æ–¹æ³• é™é»˜æŽ¨é€æ¥çš„æ—¶å€™ï¼Œä¹Ÿèƒ½æ‰§è¡Œä¸Šé¢çš„å›žè°ƒæ–¹æ³•ã€‚æ‰§è¡Œä¸Šé¢æ–¹æ³•çš„åœºæ™¯å¦‚ä¸‹: 1.App åœ¨å‰å°.2.App åœ¨åŽå°, ä½†æ˜¯æ²¡æœ‰è¢« kill æŽ‰. 4.iOS7 ä»¥åŽæ‰æœ‰çš„ å¯¹äºŽ iOS ä¹‹å‰æ˜¯æ²¡æœ‰é™é»˜æŽ¨é€çš„ã€‚ 5.å¯ä»¥å»¶é•¿åŽå°æ—¶é—´ æ”¶åˆ°é™é»˜æŽ¨é€åŽï¼Œåœ¨åº”ç”¨ç¨‹åºæŒ‚èµ·ä¹‹å‰æœ‰ 30 ç§’å·¦å³å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ“ä½œã€‚ 6.æŽ¨é€é¢‘çŽ‡çš„æŽ§åˆ¶ é™é»˜çš„æŽ¨é€æ˜¯è‹¹æžœæŽ¨é€æœåŠ¡å™¨æŽ§åˆ¶æŽ¨é€é¢‘çŽ‡çš„ã€‚ è‹¹æžœæŽ¨é€æœåŠ¡æ ¹æ®åŽå°æŽ¨é€ä»»åŠ¡çš„èƒ½è€—(ç”¨ç”µé‡,æŽ¥æ”¶æƒ…å†µ)æ¥æŽ§åˆ¶åŽå°æŽ¨é€çš„æŽ¨é€é¢‘çŽ‡å’Œå»¶è¿Ÿæ—¶é—´ã€‚ æ€»ä¹‹, é™é»˜æŽ¨é€æ˜¯æ™®é€šæŽ¨é€çš„ä¸€ç§å˜ç§è€Œå·²ã€‚ æ— è®ºæ˜¯é™é»˜æŽ¨é€è¿˜æ˜¯æ™®é€šæŽ¨é€ï¼Œå¼€å‘è€…è¯ä¹¦é‡Œé¢å¿…é¡»å¼€é€š push ç›¸å…³çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ä¹Ÿéœ€è¦ç”¨æˆ·å¼€å¯å…è®¸æŽ¨é€çš„æŽˆæƒã€‚ è¿™ä¸ªåœ¨ iOS APNs: è¿œç¨‹æŽ¨é€ é‡Œé¢å·²ç»ä»‹ç»è¿‡ï¼Œä¸åœ¨è¿™é‡Œèµ˜è¿°ã€‚ æŽ¨é€çš„æ ¼å¼æ™®é€šæŽ¨é€çš„æ ¼å¼ï¼Œå¤§è‡´æ˜¯è¿™ä¸ªæ ·å­: 12345678&#123; &quot;aps&quot;: &#123; &quot;alert&quot;:&quot;Testing.. (15), &quot;badge&quot;:1, &quot;sound&quot;:&quot;default&quot; &#125;&#125; é™é»˜æŽ¨é€æ˜¯ä¸å…è®¸å¸¦ alert badge sound ç­‰å­—æ®µçš„ï¼Œä½†æ˜¯å¿…é¡»åŒ…å« &quot;content-available&quot;:1. ä¾‹å¦‚ä¸‹é¢çš„å½¢å¼éƒ½å¯ä»¥: å½¢å¼1 123456&#123; &quot;aps&quot;: &#123; &quot;content-available&quot;:1 &#125;&#125; å½¢å¼2 1234567&#123; &quot;aps&quot;: &#123; &quot;custom&quot;:&quot;open_profile_page&quot; &quot;content-available&quot;:1 &#125;&#125; å…¶ä¸­ custom æ˜¯è‡ªå·±å®šä¹‰çš„ï¼Œå¤§å®¶æ ¹æ®éœ€æ±‚è‡ªè¡Œæ‰©å±•å³å¯ã€‚ å½¢å¼3 1234567&#123; &quot;aps&quot; : &#123; &quot;content-available&quot; : 1 &#125;, &quot;acme1&quot; : &quot;bar&quot;, &quot;acme2&quot; : 42&#125; è¿™ä¸ªæ¥è‡ªè‹¹æžœå¼€å‘è€… æ–‡æ¡£ ã€‚ ä½¿ç”¨åœºæ™¯å…·ä½“çš„ä½¿ç”¨åœºæ™¯, éœ€è¦ç»“åˆæœ¬èº«çš„ä¸šåŠ¡å’ŒåŠŸèƒ½ç‰¹ç‚¹æ¥è¯´ã€‚ é™é»˜æŽ¨é€çš„å‰ææ˜¯ APP æ²¡æœ‰è¢«æ€æ­»ï¼Œå¯ä»¥é€šè¿‡å›žè°ƒå‡½æ•°æ¥æ‰§è¡Œç›¸å…³çš„ä»£ç ã€‚ å¦å¤–é™é»˜æŽ¨é€ä¸ä¼šæ‰“æ‰°ç”¨æˆ·ï¼Œæ¯”å¦‚ç”¨æˆ·æ­£åœ¨æ¸¸æˆä¸­æˆ˜æ–—ï¼Œä½ é¢‘ç¹çš„ä½¿ç”¨æ™®é€šæŽ¨é€ç»™ä»–ï¼Œä¼°è®¡ä»–éƒ½è¦ç–¯äº†.ã€‚ æˆ‘ä¸ªäººä½¿ç”¨é™é»˜æŽ¨é€çš„åœºæ™¯å¤§è‡´æ˜¯è¿™æ ·çš„ï¼ŒAPP å°†è¦æŒ‚èµ·çš„æ—¶å€™, è¯·æ±‚æœåŠ¡å™¨åŽ»å‘ä¸€æ¡é™é»˜æŽ¨é€ï¼Œç„¶åŽä½¿ç”¨æœ¬åœ°é€šçŸ¥çš„æ–¹å¼å”¤èµ·ç”¨æˆ·æ¥æ‰“å¼€ APPï¼Œä»Žè€Œä¿è¯ APP å¤„äºŽä¿æ´»çš„çŠ¶æ€ï¼Œè‡³å°‘é™é»˜æŽ¨é€å¯ä»¥å¢žåŠ è¢«åŽå°æŒ‚èµ·çš„æ—¶é—´ã€‚ å…³äºŽæœ¬åœ°é€šçŸ¥çš„å†…å®¹ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç«  iOS APNs: æœ¬åœ°æŽ¨é€. æ›´å¤šçš„ä½¿ç”¨åœºæ™¯ç­‰å¤§å®¶åœ¨ä¸šåŠ¡ä¸­åŽ»æŒ–æŽ˜ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>APNs æŽ¨é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hi 2018, æˆ‘åˆæ¥äº†]]></title>
    <url>%2F2018%2F02%2F02%2FHi-2018-%E6%88%91%E5%8F%88%E6%9D%A5%E4%BA%86%2F</url>
    <content type="text"><![CDATA[å¥½ä¹…æ²¡æœ‰æ›´æ–°è‡ªå·±çš„åšå®¢äº†, ä»¥å‰åšæŒä¸€å‘¨è‡³å°‘ä¸¤ä¸‰ç¯‡åšæ–‡çš„æˆ‘, ä»Ž 2017 å¹´ 10 æœˆä»½åˆ°çŽ°åœ¨å±…ç„¶åœæ­¢äº†. å…¶å®ž, è¿™æ˜¯æœ‰åŽŸå› çš„â€¦ æ•°æ®ä¸¢äº†2017 å¹´ 10 æœˆ 15 æ—¥æ™š, æˆ‘äº²æ‰‹æŠŠè‡ªå·±çš„ä¹‹å‰å†™çš„æ–‡ç« (åŽŸæ•°æ®)ç»™å¼„ä¸¢äº†. æˆ‘è‡ªå·±æ­å»ºçš„åšå®¢ç³»ç»Ÿæ˜¯ä½¿ç”¨ GitHub + Hexo éƒ¨ç½²å’Œå‘å¸ƒçš„. äº‹æƒ…å¤§è‡´ç»è¿‡æ˜¯è¿™æ ·çš„â€¦ Mac æ“ä½œç³»ç»Ÿæç¤º, æœ‰æ›´æ–°çš„ç³»ç»Ÿå¯ä»¥ä½¿ç”¨äº†, é—®æ˜¯å¦ç«‹å³å®‰è£…, åœ¨å…¬å¸çš„æ—¶å€™, æˆ‘å¿ƒæƒ³, æ›´æ–°åŽ, è‡ªå·±å®‰è£…çš„ä¸€äº›åº“, ä¼°è®¡ä¹Ÿè¦é‡æ–°å®‰è£…, å«Œéº»çƒ¦å°±ç›´æŽ¥è·³è¿‡äº†. è¿‡äº†å‡ å¤©, æˆ‘æ™šä¸Šä¸‹ç­å›žå®¶, ç³»ç»Ÿåˆæç¤ºæˆ‘æ›´æ–°. å½“æ—¶, æˆ‘å°±æ²¡æœ‰å¿ä½, ç›´æŽ¥æ›´æ–°äº†, æ¯•ç«Ÿæ—©æ™šéƒ½è¦æ›´æ–°çš„, å†è¯´äº† MacOS è¿˜æ˜¯æ¯”è¾ƒè®©äººæ”¾å¿ƒçš„. è¶ç”µè„‘æ›´æ–°ç³»ç»Ÿçš„æ—¶å€™, æˆ‘å°±åŽ»æ´—äº†æ¾¡, å›žæ¥å‘çŽ°ç³»ç»Ÿæ›´æ–°å·²ç»å®Œæˆäº†. å¿ƒä¸­æƒ³æ­£å¥½å¯ä»¥æŠŠä¹‹å‰æ²¡æœ‰å®Œæˆçš„åšå®¢åŽ»å®Œå–„ä¸€ä¸‹, è°çŸ¥é“â€¦å¤©ä¸é‚æˆ‘æ„¿å‘€! å†åŽ»ä½¿ç”¨ Hexo çš„æ—¶å€™, æç¤ºæˆ‘å¤±è´¥, å±…ç„¶æ— æ³•ä½¿ç”¨äº†. è¿™å¯æŠŠæˆ‘æ€¥çš„å¤Ÿå‘›, ä¸€æ°”ä¹‹ä¸‹(è„‘å­ä¼°è®¡å½“æ—¶è¿›æ°´äº†), ç›´æŽ¥åˆ äº† Hexo ç›®å½•, æ˜¯é‚£ç§ç¨‹åºå‘˜å¼çš„æ¯«ä¸ç•™æƒ…çš„åˆ é™¤. rm -fr ./hexo æ½‡æ´’çš„æ“ä½œåŽ, é‡æ–°å®‰è£… Hexo, åˆæŠ˜è…¾äº†ä¸¤ä¸ªæ™šä¸Š, æœ€ç»ˆä¹Ÿæ˜¯å®‰è£…å¥½äº†, å¯ä»¥å†™ä¸œä¸œäº†. ä½†æ˜¯å‘çŽ°ä»Ž Github ä¸Šé¢ clone åŽçš„æ–‡ä»¶, æ— æ³•è¿˜åŽŸæˆè‡ªå·±å½“åˆçš„ MarkDown æ–‡ä»¶äº†. é›ªèŠ±é‚£ä¸ªé£˜å•Šé£˜, åŒ—é£Žé‚£ä¸ªè§å‘€è§â€¦ ä¸€åˆ‡éƒ½æ™šäº†! ^^ å”¯ä¸€å€¼å¾—åº†å¹¸çš„æ˜¯, åŽŸæ¥è‡ªå·±çš„ç½‘ç«™åšæ–‡è¿˜åœ¨é‚£é‡Œ. è¿˜åŽŸæ•°æ®ä»Žå“ªé‡Œè·Œå€’, å°±ä»Žå“ªé‡Œçˆ¬èµ·æ¥, æˆ‘å†³å®šæŠŠä¹‹å‰çš„æ•°æ®ä½¿ç”¨ äººå·¥æ™ºèƒ½ çš„æ–¹å¼è¿˜åŽŸå›žæ¥. ðŸ˜†æˆ‘å°±æ˜¯é‚£ä¸ª äººå·¥, æ‰‹åŠ¨çš„å°† HTML è½¬æ¢ä¸º MarkDown æ–‡æ¡£, åŽ‹æ ¹æ²¡æœ‰ä»€ä¹ˆ æ™ºèƒ½. å¥½æ­¹é‚£ä¹Ÿæ˜¯è‡ªå·±ç†¬è¿‡å¤šå°‘ä¸ªæ—¥å¤œçš„æˆæžœå‘€, æ²¡æœ‰åŠŸåŠ³ä¹Ÿæœ‰è‹¦åŠ³, æˆ‘ä¸å¿å¿ƒå°±è¿™æ ·è®©å®ƒä¸¢æŽ‰, å«ç€æ³ªä¹Ÿè¦æŠŠå®ƒä»¬ç»™æ‰¾å›žæ¥! è‡ªå·±ä¸‹åŠå¹´ä¹Ÿæ¯”è¾ƒå¿™, å‘¨æœ«éƒ½åœ¨åŠ ç­, åªèƒ½æ¯å¤©æ™šä¸Šå›žå®¶æŠ½äº›æ—¶é—´è¿˜åŽŸä¸€ç‚¹, æœ‰æ—¶å€™å¤ªå›°, å°±æŽ¨è¿Ÿåˆ°ä¸‹ä¸ªæ™šä¸Š. å¤§æ¦‚ç”¨äº† 3 ä¸ªæœˆå·¦å³çš„æ—¶é—´, åŸºæœ¬è¿˜åŽŸå›žæ¥äº†. æ¯ç¯‡æ–‡ç« åŸºæœ¬éƒ½æœ‰é…å›¾, éƒ½æœ‰è·³è½¬é“¾æŽ¥, æ¢å¤èµ·æ¥, è¿˜æ˜¯éœ€è¦ä¸€ç‚¹æ—¶é—´å’Œæ¯…åŠ›çš„, ä¸­é€”æˆ‘ä¹Ÿæ”¾å¼ƒè¿‡, ä½†æ˜¯æƒ³æƒ³å®ƒä»¬å°±è¦è¿™æ ·çš„è¢«æˆ‘æŠ¹æ€äº†, å®žåœ¨å¤ªå¯æ€œäº†, å°±åšæŒä¸‹æ¥äº†. åæ€å’Œæ€»ç»“è¿˜åŽŸä¹‹å‰çš„æ•°æ®, æ¯”å†™æ–°æ–‡ç« è¿˜ç´¯, ä¸»è¦æ˜¯å¿ƒç´¯. åˆšå¼€å§‹çš„æ—¶å€™, æˆ‘æ¯ç¯‡éƒ½æƒ³ä¸€æ­¥åˆ°ä½çš„è¿˜åŽŸ, å‘çŽ°åšæŒå‡ ä¸ªæ™šä¸Š, æ•ˆçŽ‡å¾ˆä½Ž, å¾ˆå®¹æ˜“æ”¾å¼ƒ. æœ€åŽ, æˆ‘è°ƒèŠ‚äº†ä¸€ä¸‹å¿ƒæ€, åˆ† è¿­ä»£ åŽ»åš. ç¬¬ä¸€ä¸ªé˜¶æ®µ, æŠŠ HTML æ–‡ç« æ‹·è´åˆ° MarkDown å·¥å…·ä¸­, ä¸åšä»»ä½•çš„ä¿®é¥°å’Œä¿®æ”¹. ç¬¬äºŒä¸ªé˜¶æ®µ, æ¢³ç† MarkDown æ–‡æ¡£, æŠŠç¼ºå¤±çš„å›¾ç‰‡è¡¥ä¸ŠåŽ». ç¬¬ä¸‰ä¸ªé˜¶æ®µ, æŠŠæ–‡ç« ä¸­çš„é“¾æŽ¥å°½é‡è¡¥å…¨. ç»è¿‡è¿™ä¸‰ä¸ªé˜¶æ®µåŽ, æ–‡ç« åŸºæœ¬å·²ç»å¤åŽŸäº†, åªæ˜¯æ ¼å¼ä¸Šçœ‹èµ·æ¥æœ‰ç‚¹ç³Ÿç³•. ç¬¬å››ä¸ªé˜¶æ®µ, æ•´ç†æ–‡ç« çš„æŽ’ç‰ˆ, å¯¹æ¯”å·²ç»å‘å¸ƒçš„æ–‡ç« , æŸ¥æ¼è¡¥ç¼º. ç¬¬å››ä¸ªé˜¶æ®µç»“æŸåŽ, æ–‡ç« åŸºæœ¬éƒ½å¤æ´»äº†, æŽ¥ä¸‹æ¥å°±æ˜¯éƒ¨ç½²å’Œå‘å¸ƒäº†. ç¬¬äº”ä¸ªé˜¶æ®µ, æ•´ç† Hexo, é…ç½®ç›¸å…³çš„ä¸»é¢˜. ç¬¬å…­ä¸ªé˜¶æ®µ, æœ¬åœ°é¢„è§ˆå’Œå†æ¬¡æ ¡éªŒæ–‡ç« , ç»Ÿä¸€å‘å¸ƒ. æ¯ä¸ªé˜¶æ®µ, æˆ‘éƒ½ç»™è‡ªå·±ä¸€ä¸ªå°ç›®æ ‡, ä¸æ–­çš„åŽ»å®Œå–„, æœ€åŽå°†å„ä¸ªé˜¶æ®µçš„æˆæžœä¸²è”èµ·æ¥, å°±å®Œæˆäº†. å½“è‡ªå·±é‡åˆ°å›°éš¾çš„æ—¶å€™, ä¸å¦¨åˆ†è§£ä¸€ä¸‹ä»»åŠ¡, ä¸æ–­çš„åŽ»å®Œæˆæ¯ä¸ªå°ä»»åŠ¡, æ¯ä¸ªå®Œæˆçš„å°ä»»åŠ¡éƒ½æ˜¯å¯¹è‡ªå·±æœ€å¤§çš„å¥–åŠ±. æ•´ä¸ªè¿˜åŽŸçš„è¿‡ç¨‹, åˆè®©æˆ‘é‡æ–°æ¢³ç†äº†ä¸€ä¸‹ä¹‹å‰çš„æ–‡ç« , åŒ…æ‹¬ç›®å½•è§„åˆ’å’Œæ–‡ç« ä¸­çš„æŽªè¾ž, ä¹Ÿå¯¹å›¾ç‰‡è¿›è¡Œäº†åŽ‹ç¼©å’Œå¤„ç†. æ”¶èŽ·é¢‡å¤š. å¦‚æžœå½“åˆè‡ªå·±ä¸é‚£ä¹ˆå†²åŠ¨, å¦‚æžœå½“åˆè‡ªå·±å¤‡ä»½äº†æ–‡ä»¶, åº”è¯¥å°±ä¸ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªè‰°è¾›çš„åŽ†ç¨‹äº†. æ•°æ®å¤‡ä»½å¾ˆé‡è¦, å†²åŠ¨æ˜¯è¦ä»˜å‡ºä»£ä»·çš„. çŽ°åœ¨æˆ‘æŠŠåŽŸæ•°æ®ä¿å­˜åœ¨äº‘ç›˜ä¸­, æœ¬åœ°ä¹Ÿä¿ç•™ä¸€ä»½, å®šæœŸæ›´æ–°åˆ°äº‘ç›˜ä¸­. è¿™æ ·å°±å¯ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±äº†. ç¥å¤§å®¶åœ¨ 2018 å‘å‘å‘, èº«ä½“å¥åº·, å¹¸ç¦å®‰åº·! æŽ¨èæŽ¨èç»™ Mac ç”¨æˆ·ä¸€ä¸ªå›¾ç‰‡åŽ‹ç¼©å·¥å…· imageoptim.]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>å­¦ä¹  ç”Ÿæ´» åæ€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GCC: é™æ€åº“]]></title>
    <url>%2F2017%2F10%2F08%2FGCC-%E9%9D%99%E6%80%81%E5%BA%93%2F</url>
    <content type="text"><![CDATA[æ¦‚è¦å¦‚æžœä½ å¯¹ GCC çš„ç¼–è¯‘ Cè¯­è¨€çš„æµç¨‹ä¸æ¸…æ¥š, å»ºè®®åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰å…ˆåŽ»çœ‹ä¸€ä¸‹ GCC: ç¼–è¯‘Cè¯­è¨€çš„æµç¨‹ è¿™ç¯‡æ–‡ç« , ç¯‡å¹…çŸ­å°ç²¾æ‚, é˜…è¯»åŽ, è‡³å°‘å¯ä»¥æ‰«æ‰«ç›²ðŸ˜œ. æœ¬ç¯‡åšæ–‡ç”¨åˆ°çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ç‚¹: 1.GCC gcc -c é€‰é¡¹å«ä¹‰: 1Only run preprocess, compile, and assemble steps æ˜¯ -c é€‰é¡¹åªæ˜¯è¿›è¡Œäº†é¢„å¤„ç†, ç¼–è¯‘, æ±‡ç¼–çš„é˜¶æ®µ, ä¸ä¼šè¿›è¡Œé“¾æŽ¥çš„æ“ä½œ. 2.é™æ€åº“ Linux ä¸Šçš„é™æ€åº“ï¼Œæœ¬è´¨æ˜¯ä¸€äº›ç›®æ ‡æ–‡ä»¶çš„å½’æ¡£æ–‡ä»¶. 3.é™æ€åº“å’Œå…±äº«åº“åŒºåˆ« [1].ä½¿ç”¨å…±äº«åº“å¯ä»¥èŠ‚çœå†…å­˜. æ¯”å¦‚ libcï¼Œç³»ç»Ÿä¸­å‡ ä¹Žæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ˜ å°„ libc åˆ°è‡ªå·±çš„è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œè€Œ libc çš„åªè¯»éƒ¨åˆ†åœ¨ç‰©ç†å†…å­˜ä¸­åªéœ€è¦å­˜åœ¨ä¸€ä»½ï¼Œå°±å¯ä»¥è¢«æ‰€æœ‰è¿›ç¨‹å…±äº«ï¼Œè¿™å°±æ˜¯â€œå…±äº«åº“â€è¿™ä¸ªåç§°çš„ç”±æ¥äº†. [2].ä½¿ç”¨å…±äº«åº“å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å‡çº§åº“æ–‡ä»¶è€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘åº”ç”¨ç¨‹åº. [3].å…±äº«åº“å ç”¨æ›´å°‘çš„ä½“ç§¯. åœ¨è¿è¡Œæ—¶åšåŠ¨æ€é“¾æŽ¥.è€Œåœ¨é“¾æŽ¥é™æ€åº“æ—¶, é“¾æŽ¥å™¨ä¼šæŠŠé™æ€åº“ä¸­çš„ç›®æ ‡æ–‡ä»¶å–å‡ºæ¥å’Œå¯æ‰§è¡Œæ–‡ä»¶çœŸæ­£é“¾æŽ¥åœ¨ä¸€èµ·. åˆ›å»ºæ­¥éª¤åˆ›å»ºé™æ€åº“çš„æ­¥éª¤å¦‚ä¸‹: [1]. å†™æºæ–‡ä»¶.[2]. é€šè¿‡ gcc -c x.c ç”Ÿæˆç›®æ ‡æ–‡ä»¶.[2]. å½’æ¡£. ç”¨ ar å½’æ¡£ç›®æ ‡æ–‡ä»¶ï¼Œç”Ÿæˆé™æ€åº“.[3]. å†™å¤´æ–‡ä»¶, ä¾¿äºŽä½¿ç”¨è€…çŸ¥é“æ€Žä¹ˆä½¿ç”¨è¯¥é™æ€åº“. ä½¿ç”¨é™æ€åº“æ—¶ï¼Œåœ¨æºç ä¸­åŒ…å«å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œé“¾æŽ¥æ—¶è®°å¾—é“¾æŽ¥è‡ªå·±çš„åº“. ä¸‹é¢ç»“åˆå…·ä½“ä¾‹å­, å±•å¼€è®². å†™æºæ–‡ä»¶ç›®å½•ç»“æž„ ç¤ºä¾‹æ–‡ä»¶éƒ½æ˜¯å¾ˆç®€å•çš„ä»£ç , é™„å½•å¯ä»¥æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹. ç”Ÿæˆç›®æ ‡æ–‡ä»¶å°† libs ç›®å½•ä¸‹é¢çš„(c)æºæ–‡ä»¶è¿›è¡Œé¢„å¤„ç†, ç¼–è¯‘å’Œæ±‡ç¼–.æ³¨æ„è¿™é‡Œæ²¡æœ‰è¿›è¡Œé“¾æŽ¥. 1gcc -c libs/person.c libs/eat.c libs/play.c libs/sleep.c æ‰§è¡ŒåŸŽåŽ, ä¼šç”Ÿæˆå¯¹åº”çš„ .o æ–‡ä»¶. å½’æ¡£libperson.a æ˜¯è¦ç”Ÿæˆçš„åº“æ–‡ä»¶. åº“æ–‡ä»¶éƒ½ä»¥ lib å¼€å¤´, é™æ€åº“ä»¥. a ä¸ºåŽç¼€. æ‰€ä»¥ä¸€èˆ¬æ˜¯ lib+ åå­—.a 1ar rs libperson.a person.o sleep.o play.o eat.o ar: ç±»ä¼¼äºŽ tar, ç”¨æ¥å¯¹æ–‡ä»¶è¿›è¡Œåº“æ‰“åŒ…. r é€‰é¡¹: å°†å…¶åŽé¢çš„æ–‡ä»¶åˆ—è¡¨æ·»åŠ åˆ°æ–‡ä»¶åŒ…(libperson.a)ä¸­, å¦‚æžœ libperson.a ä¸å­˜åœ¨å°±åˆ›å»ºå®ƒ, å¦‚æžœ libperson.a å·²ç»å­˜åœ¨ä¸”é‡Œé¢æœ‰åŒåçš„ç›®æ ‡æ–‡ä»¶å°±è¿›è¡Œæ›¿æ¢æ“ä½œ. s é€‰é¡¹: ä¸ºé™æ€åº“åˆ›å»ºç´¢å¼•.è¿™ä¸ªç´¢å¼•ä¼šè¢«é“¾æŽ¥å™¨ä½¿ç”¨. ranlib å‘½ä»¤ä¹Ÿå¯ä»¥ä¸ºé™æ€åº“åˆ›å»ºç´¢å¼•. æ‰€ä»¥ä¸Šé¢çš„å‘½ä»¤å¯ä»¥ç­‰æ•ˆä¸ºä¸‹é¢çš„ä¸¤ä¸ªå‘½ä»¤. 12ar r libperson.a person.o sleep.o play.o eat.oranlib libperson.a å†™å¤´æ–‡ä»¶å†™ä¸€ä¸ª person.h æ–‡ä»¶, ä¾¿äºŽè°ƒç”¨è€…æŸ¥çœ‹åº“å¦‚ä½•ä½¿ç”¨. person.h 1234567#ifndef _PERSON_H#define _PERSON_Hextern void init(int pUid);extern void eat();extern void play();extern void sleep();#endif ä½¿ç”¨é™æ€åº“ 1gcc main.c -L. -lperson -Ilibs -o main -L é€‰é¡¹: å‘Šè¯‰ç¼–è¯‘å™¨åŽ»å“ªé‡Œæ‰¾åº“æ–‡ä»¶, è¿™é‡Œçš„ _L. è¡¨ç¤ºåœ¨å½“å‰ç›®å½•.å¦‚æžœä¸ç”¨ -L é€‰é¡¹, å³ä½¿åº“æ–‡ä»¶åœ¨å½“å‰ç›®å½•, ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šåŽ»æ‰¾, æ‰€ä»¥è¯¥é€‰é¡¹ä¸èƒ½å°‘. æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹: 12ld: library not found for -lpersonclang: error: linker command failed with exit code 1 (use -v to see invocation) -lperson: å‘Šè¯‰ç¼–è¯‘å™¨è¦é“¾æŽ¥ libperson.a åº“. -I: å‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œæ‰¾å¤´æ–‡ä»¶.å¦‚æžœä¸æŒ‡å®šå¤´æ–‡ä»¶çš„æŸ¥æ‰¾ç›®å½•, ä¹Ÿä¼šæŠ¥é”™: 1234main.c:2:10: fatal error: &apos;person.h&apos; file not found#include &quot;person.h&quot; ^~~~~~~~~~1 error generated. æ­¤æ—¶çš„ç›®å½•ç»“æž„: é“¾æŽ¥æˆåŠŸåŽ, å¯ä»¥æ‰§è¡Œç”Ÿæˆçš„ main (å¯æ‰§è¡Œ)æ–‡ä»¶. 1./main 123uid: 101 eatinguid: 101 playinguid: 101 has sleep æœ‰è¶£çš„å®žéªŒçŒœæƒ³ä¸€ä¸‹å¦‚æžœæœ‰ä¸¤ä¸ªåº“ä¸€ä¸ªæ˜¯å…±äº«åº“, ä¸€ä¸ªæ˜¯é™æ€åº“, è€Œä¸”äºŒè€…é™¤äº†åŽç¼€ä¸ä¸€æ ·, åå­—éƒ½ä¸€æ ·å¦‚ libperson.a å’Œ libperson.so, é‚£ä¹ˆè°ƒç”¨æ–¹å¦‚ä½•æ¥é€‰æ‹©å¯¹åº”çš„åº“æ–‡ä»¶å‘¢? æˆ‘ä»¬æŠŠ GCC: å…±äº«åº“ é‡Œé¢ç”Ÿæˆçš„å…±äº«åº“ libperson.so æ”¾åˆ°å½“å‰çš„ç›®å½•, é‡æ–°ç¼–è¯‘é“¾æŽ¥ main.c æ–‡ä»¶. 1gcc main.c -L. -lperson -Ilibs -o main å†æ¬¡æ‰§è¡Œ ./main, å¾—åˆ°ç»“æžœæ˜¯è¿™æ ·çš„: 123From sharedlib.uid: 101 eatingFrom sharedlib.uid: 101 playingFrom sharedlib.uid: 101 has sleep ä»¥ä¸Šçš„ç»“æžœ, è¯´æ˜Žé“¾æŽ¥å™¨ä¼šä¼˜å…ˆé€‰æ‹©å…±äº«åº“å…¶æ¬¡æ‰æ˜¯é™æ€åº“. Linux(MacOS ä¹Ÿä¸€æ ·) çš„ GCC é»˜è®¤é“¾æŽ¥åŠ¨æ€åº“ï¼Œåªæœ‰å½“åŠ¨æ€åº“ä¸å­˜åœ¨æ—¶ï¼Œæ‰åŽ»é“¾æŽ¥é™æ€åº“.è‹¥æ˜¯éœ€è¦å¼ºåˆ¶æŒ‡å®šé™æ€åº“éœ€è¦æŒ‡å®šé€‰é¡¹ -static.ä½†æ˜¯åœ¨ MacOS ä¸Šé¢ä¸æ”¯æŒè¯¥é€‰é¡¹. 1gcc -static main.c -L. -lperson -Ilibs -o main é™„å½•ç¤ºä¾‹å®Œæ•´ä»£ç  main.c 12345678#include &lt;stdio.h&gt;#include &quot;person.h&quot;int main() &#123; init(101); eat(); play(); sleep();&#125; person.h 1234567#ifndef _PERSON_H#define _PERSON_Hextern void init(int pUid);extern void eat();extern void play();extern void sleep();#endif person.c 1234int uid;void init(int pUid) &#123; uid = pUid;&#125; eat.c 12345#include &lt;stdio.h&gt;extern int uid;void eat() &#123; printf(&quot;uid: %i eating\n&quot;, uid);&#125; play.c 12345#include &lt;stdio.h&gt;extern int uid;void play() &#123; printf(&quot;uid: %i playing\n&quot;, uid);&#125; sleep.c 12345#include &lt;stdio.h&gt;extern int uid;void sleep() &#123; printf(&quot;uid: %i has sleep\n&quot;, uid);&#125; GCC ç³»åˆ—åšæ–‡GCC: ç¼–è¯‘ C è¯­è¨€çš„æµç¨‹ GCC: Homebrew å®‰è£… GCC å’Œ Binutils GCC: å…±äº«åº“ GCC: é™æ€åº“]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>GCC ç¼–è¯‘å™¨ é™æ€åº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GCC: å…±äº«åº“]]></title>
    <url>%2F2017%2F10%2F07%2FGCC-%E5%85%B1%E4%BA%AB%E5%BA%93%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬æ¦‚å¿µå…±äº«åº“: åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´éœ€è¦è°ƒç”¨åˆ°å…±äº«åº“çš„æ—¶å€™æ‰åŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼Œå¯ä»¥è¢«å¤šä¸ªç¨‹åºå…±äº«ä½¿ç”¨. åœ¨ MacOS ä¸Šé¢åˆ›å»ºå’Œä½¿ç”¨å…±äº«åº“è¦æ¯”åœ¨ Linux ä¸Šé¢ç®€å•.åœ¨ Linux ä¸Šé¢è¿˜ä¼šç‰µæ‰¯åˆ°å…±äº«åº“è·¯å¾„é—®é¢˜, åœ¨ Mac ä¸Šé¢å°±æ²¡æœ‰è¿™æ ·çš„é—®é¢˜. åœ¨ MacOS ä¸Šé¢ä½¿ç”¨çš„ GCC å…¶æœ¬è´¨æ˜¯ LLVM. ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œ: 1gcc -v å¯ä»¥çœ‹åˆ°å¯¹åº”çš„è¾“å‡ºç»“æžœ: 12345Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/c++/4.2.1Apple LLVM version 9.0.0 (clang-900.0.37)Target: x86_64-apple-darwin16.7.0Thread model: posixInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin åˆ›å»ºå…±äº«åº“æ­¥éª¤[1].å†™æºæ–‡ä»¶.è¿™é‡Œä»¥ Cæ–‡ä»¶ä¸ºåŸºç¡€.[2].å°†æºæ–‡ä»¶ç”Ÿæˆç›®æ ‡æ–‡ä»¶.[3].åˆ›å»ºå…±äº«åº“.[4].å†™å¤´æ–‡ä»¶, ä¾›è°ƒç”¨æ–¹ä½¿ç”¨. ä¸‹é¢ç»“åˆå®žä¾‹æ¥åˆ†äº«ä¸€ä¸‹å¦‚ä½•åœ¨ Mac ä¸Šé¢åˆ›å»ºå…±äº«åº“. å†™æºæ–‡ä»¶ç›®å½•ç»“æž„: å¯¹åº”çš„å®Œæ•´ä»£ç å¯ä»¥çœ‹æ–‡æœ«çš„é™„å½•. ç”Ÿæˆç›®æ ‡æ–‡ä»¶æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤: 1gcc -Wall -c -fPIC libs/eat.c libs/play.c libs/sleep.c libs/person.c æ³¨æ„: -fPIC é€‰é¡¹ä¸€å®šè¦åŠ . PIC(position independent code), äº§ç”Ÿä½ç½®æ— å…³ç  ç”Ÿæˆå…±äº«åº“è¿™é‡ŒæŠŠå…±äº«åº“æš‚ä¸”ç§°ä¹‹ä¸º libperson.so. æ‰§è¡Œä¸‹é¢å‘½ä»¤åˆ›å»º: 1gcc -shared -fPIC eat.o play.o sleep.o person.o -o libperson.so å†™å¤´æ–‡ä»¶è¿™é‡Œå¤´æ–‡ä»¶ä¸»è¦æ˜¯ person.h 1234567#ifndef _PERSON_H#define _PERSON_Hextern void init(int pUid);extern void eat();extern void play();extern void sleep();#endif ä½¿ç”¨å…±äº«åº“main.c æ˜¯ä½¿ç”¨æ–¹, ç¼–è¯‘é“¾æŽ¥å³å¯. 1gcc main.c -L. -lperson -Ilibs -o main ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ main, æ‰§è¡Œç»“æžœ: 123From sharedlib.uid: 101 eatingFrom sharedlib.uid: 101 playingFrom sharedlib.uid: 101 has sleep æ³¨æ„:-L é€‰é¡¹, å‘Šè¯‰ç¼–è¯‘å™¨åŽ»å“ªé‡Œæ‰¾åº“æ–‡ä»¶, è¿™é‡Œçš„ _L. è¡¨ç¤ºåœ¨å½“å‰ç›®å½•. -lperson, è¡¨ç¤º libperson.so åº“. -Ilibs å‘Šè¯‰ç¼–è¯‘å™¨å¤´æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•. é™„å½•ç¤ºä¾‹å®Œæ•´ä»£ç  main.c 12345678#include &lt;stdio.h&gt;#include &quot;person.h&quot;int main() &#123; init(101); eat(); play(); sleep();&#125; person.h 1234567#ifndef _PERSON_H#define _PERSON_Hextern void init(int pUid);extern void eat();extern void play();extern void sleep();#endif person.c 1234int uid;void init(int pUid) &#123; uid = pUid;&#125; eat.c 12345#include &lt;stdio.h&gt;extern int uid;void eat() &#123; printf(&quot;From sharedlib.uid: %i eating\n&quot;, uid);&#125; play.c 12345#include &lt;stdio.h&gt;extern int uid;void play() &#123; printf(&quot;From sharedlib.uid: %i playing\n&quot;, uid);&#125; sleep.c 12345#include &lt;stdio.h&gt;extern int uid;void sleep() &#123; printf(&quot;From sharedlib.uid: %i has sleep\n&quot;, uid);&#125; GCC ç³»åˆ—åšæ–‡GCC: ç¼–è¯‘ C è¯­è¨€çš„æµç¨‹ GCC: Homebrew å®‰è£… GCC å’Œ Binutils GCC: å…±äº«åº“ GCC: é™æ€åº“ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>GCC ç¼–è¯‘å™¨ å…±äº«åº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GCC: Homebrew å®‰è£… GCC å’Œ Binutils]]></title>
    <url>%2F2017%2F10%2F07%2FGCC-Homebrew-%E5%AE%89%E8%A3%85-GCC-%E5%92%8C-Binutils%2F</url>
    <content type="text"><![CDATA[æ–‡ç« èƒŒæ™¯å‰æ®µæ—¶é—´ï¼Œæœ‰ä¸ªåšå®¢ä¸Šé¢çš„å°ä¼™ä¼´ç»™æˆ‘å‘æ¥é‚®ä»¶ï¼Œé—®æˆ‘å…³äºŽ GCC ç›¸å…³çš„çŸ¥è¯†ï¼Œå¯¹äºŽ GCC æˆ‘ä¹Ÿåªæ˜¯å‡­ç€ä¹‹å‰çš„äº†è§£ï¼Œå›žå¤ä»–äº†ã€‚ä¹¦åˆ°ç”¨æ—¶æ–¹æ¨å°‘å‘€ï¼ è¿™ä½å°ä¼™ä¼´è¿˜åœ¨è¯»å¤§å­¦ï¼Œè‡ªå­¦èƒ½åŠ›æ¯”è¾ƒå¼ºï¼Œè‡ªå·±å‡ºäº†å®Œæˆè¯¾æ—¶ä¹‹å¤–ï¼Œè¿˜ä¼šåœ¨ç½‘ä¸Šæ‰¾èµ„æ–™è‡ªå­¦ã€‚ æˆ‘è®°å¾—è‡ªå·±åœ¨å¤§å­¦çš„æ—¶å€™ï¼Œå¯¹ GCC ä¸€çªä¸é€šï¼ŒåªçŸ¥é“ Turbo-C å’Œé‚£äº›è¢«å¼ºåˆ¶è®°ä½çš„å…³é”®å­—ã€‚ æœ€åŽå‘Šè¯‰ä»–, æˆ‘ä¼šåšæŒæŠŠè‡ªå·±ä»¥å‰å­¦ä¹ è¿‡ç›¸å…³ GCC çš„çŸ¥è¯†ï¼Œä»¥åšå®¢çš„å½¢å¼è¾“å‡ºã€‚äºŽæ˜¯ã€‚å°±æœ‰äº† GCC ç³»åˆ— çš„æ–‡ç« ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°å¤§å®¶ã€‚ æ¦‚è¦è¿™ç¯‡åšå®¢ä¸»è¦åˆ†äº« macOS ä¸‹å®‰è£… GCC å’Œ Binutils å·¥å…·ã€‚ macOS ç»ˆç«¯ä¸‹è¾“å…¥ gcc -v, å…¶å®žæ˜¯é“¾æŽ¥æŒ‡å‘äº† LLVM ç¼–è¯‘å™¨, ä¸æ˜¯ GNU çš„ GCC. 12345Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/c++/4.2.1Apple LLVM version 9.0.0 (clang-900.0.37)Target: x86_64-apple-darwin16.7.0Thread model: posixInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin å®‰è£… GCCå…³äºŽ GCC, å¯ä»¥å‚è€ƒ ç»´åŸºç™¾ç§‘. æ‰§è¡Œä¸‹é¢å‘½ä»¤, å³å¯å¼€å§‹å®‰è£…: 1brew tap homebrew/versions ç„¶åŽæœç´¢ gcc 1brew search gcc æœç´¢ç»“æžœä¸­ä¼šæ˜¾ç¤º gcc çš„ç‰ˆæœ¬ï¼Œå¯ä»¥é€‰æ‹©å®‰è£…ä¸€ä¸ªï¼Œå»ºè®®å®‰è£…æœ€æ–°ç‰ˆã€‚ è¿™é‡Œä»¥å®‰è£… gcc49 ä¸ºä¾‹ã€‚ 1brew install gcc49 brew ä¼šè‡ªåŠ¨ä¸ºä½ å®‰è£…ç›¸å…³ä¾èµ–ï¼Œå¦‚ gmp4ã€mpfr2ã€libmpc08ã€isl011ã€cloog018. è¿™é‡Œå®‰è£…éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´â€¦ çœ‹åˆ°ä¸‹é¢çš„å†…å®¹, è¡¨ç¤ºå®‰è£…å®Œæ¯•. 123Pouring gcc49-4.9.2_1.yosemite.bottle.1.tar.gz/usr/local/Cellar/gcc49/4.9.2_1: 1138 files, 164M å®‰è£…æˆåŠŸåŽ, å®‰è£…ç›®å½•åœ¨: 1/usr/local/Cellar/gcc49/4.9.2_1 ä½ åœ¨ç»ˆç«¯ç›´æŽ¥è¾“å…¥ gcc -vï¼Œå…¶å®žè¿˜æ˜¯ LLVMï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨æˆ‘ä»¬ åˆšå®‰è£…çš„ gcc? 123cd /usr/local/Cellar/gcc49/4.9.2_1/binls -l å¯ä»¥çœ‹åˆ°: 123456789101112131415c++-4.9cpp-4.9g++-4.9gcc-4.9gcc-ar-4.9gcc-nm-4.9gcc-ranlib-4.9gcov-4.9x86_64-apple-darwin14.3.0-c++-4.9x86_64-apple-darwin14.3.0-g++-4.9x86_64-apple-darwin14.3.0-gcc-4.9x86_64-apple-darwin14.3.0-gcc-4.9.2x86_64-apple-darwin14.3.0-gcc-ar-4.9x86_64-apple-darwin14.3.0-gcc-nm-4.9x86_64-apple-darwin14.3.0-gcc-ranlib-4.9 Okï¼Œä½ åº”è¯¥æ˜Žç™½äº†, åœ¨å‘½ä»¤è¡Œè¾“å…¥ gcc-4.9 -v å°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬åˆšå®‰è£…çš„ GCC äº†ï¼ŒåŒ…æ‹¬ g++ ç­‰å·¥å…·. ä»¥åŽä½¿ç”¨ GNU çš„ GCC è¾“å…¥ gcc-4.9 å°±å¥½äº†ã€‚ å®‰è£… Binutilså…³äºŽ Binutils å¯ä»¥å‚è€ƒ ç»´åŸºç™¾ç§‘. æ‰§è¡Œä¸‹é¢å‘½ä»¤, ç›´æŽ¥å®‰è£…: 1brew install binutils åŒç†: 1cd /usr/local/Cellar/binutils/2.25/bin å¯ä»¥çœ‹åˆ°ä½ éœ€è¦çš„å·¥å…·: 1234567891011121314151617181920gaddr2linegargc++filtgcoffdumpgdlltoolgdllwrapgelfeditgnlmconvgnmgobjcopygobjdumpgranlibgreadelfgsizegsrconvgstringsgstripgsysdumpgwindmcgwindres ä¸ªäººæ„Ÿå—åœ¨ macOS ä¸Šé¢ï¼Œå³ä½¿å®‰è£…äº† GNU çš„ GCCï¼Œä¹Ÿæ²¡æœ‰åœ¨ Linux ä¸Šé¢ç”¨çš„é‚£ä¹ˆçˆ½ï¼Œå¾ˆå¤š GCC çš„å‘½ä»¤é€‰é¡¹åœ¨ macOS ä¸Šé¢æ— æ³•ä½¿ç”¨ï¼Œä½†ä¸å¾—ä¸æ‰¿è®¤ LLVM æ˜¯æ¯”è¾ƒä¼˜ç§€çš„ç¼–è¯‘å™¨ã€‚ é‡åˆ°é—®é¢˜gcc-4.9 ç¼–è¯‘ä»£ç æŠ¥é”™ï¼ŒæŠ¥é”™å†…å®¹å¦‚ä¸‹ï¼š 1234main.c:9:19: fatal error: stdio.h: No such file or directory #include &lt;stdio.h&gt; ^compilation terminated. å¸è½½ gcc é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ gcc å³å¯ï¼Œå¦‚æžœä½ ä¸çŸ¥é“æœ€æ–°çš„ gcc ç‰ˆæœ¬æ˜¯å“ªä¸ªï¼Œå¯ä»¥ search ä¸€ä¸‹ã€‚ 1brew search gcc æ˜¾ç¤ºç»“æžœå¤§è‡´å¦‚ä¸‹ï¼š 123456gcc gcc@5 gcc@7gcc@4.9 gcc@6 i386-elf-gcc è¿™é‡Œä»¥å®‰è£… gcc@7 ä¸ºä¾‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 12345// å¸è½½åŽŸæ¥çš„brew uninstall gcc// å®‰è£…æœ€æ–°ç‰ˆæœ¬brew install gcc@7 GCC ç³»åˆ—åšæ–‡GCC: ç¼–è¯‘ C è¯­è¨€çš„æµç¨‹ GCC: Homebrew å®‰è£… GCC å’Œ Binutils GCC: å…±äº«åº“ GCC: é™æ€åº“ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>brew GCC C ç¼–è¯‘å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GCC: ç¼–è¯‘Cè¯­è¨€çš„æµç¨‹]]></title>
    <url>%2F2017%2F10%2F03%2FGCC-%E7%BC%96%E8%AF%91C%E8%AF%AD%E8%A8%80%E7%9A%84%E6%B5%81%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[å†çœ‹ä¸‹æ–‡ä¹‹å‰ï¼Œå…ˆæ™®åŠä¸€ä¸‹ Linux å’Œ gcc çš„åŽ†å²ï¼Œä¸‹é¢çš„è¿™æ®µå†…å®¹æ¥è‡ªäºŽç½‘ç»œã€‚ æ—©åœ¨ 20 ä¸–çºª 70 å¹´ä»£ï¼ŒUNIX ç³»ç»Ÿæ˜¯å¼€æºè€Œä¸”å…è´¹çš„ã€‚ä½†æ˜¯åœ¨ 1979 å¹´æ—¶ï¼ŒAT&amp;T å…¬å¸å®£å¸ƒäº†å¯¹ UNIX ç³»ç»Ÿçš„å•†ä¸šåŒ–è®¡åˆ’ï¼Œéšä¹‹å¼€æºè½¯ä»¶ä¸šè½¬å˜æˆäº†ç‰ˆæƒå¼è½¯ä»¶äº§ä¸šï¼Œæºä»£ç è¢«å½“ä½œå•†ä¸šæœºå¯†ï¼Œæˆä¸ºä¸“åˆ©äº§å“ï¼Œäººä»¬å†ä¹Ÿä¸èƒ½è‡ªç”±åœ°äº«å—ç§‘æŠ€æˆæžœã€‚ äºŽæ˜¯åœ¨ 1984 å¹´ï¼ŒRichard Stallman é¢å¯¹äºŽå¦‚æ­¤å°é—­çš„è½¯ä»¶åˆ›ä½œçŽ¯å¢ƒï¼Œå‘èµ·äº† GNU æºä»£ç å¼€æ”¾è®¡åˆ’å¹¶åˆ¶å®šäº†è‘—åçš„ GPL è®¸å¯åè®®ã€‚ 1987 å¹´æ—¶ï¼ŒGNU è®¡åˆ’èŽ·å¾—äº†ä¸€é¡¹é‡å¤§çªç ´â€”gccç¼–è¯‘å™¨å‘å¸ƒï¼Œè¿™ä½¿å¾—ç¨‹åºå‘˜å¯ä»¥åŸºäºŽè¯¥ç¼–è¯‘å™¨ç¼–å†™å‡ºå±žäºŽè‡ªå·±çš„å¼€æºè½¯ä»¶ã€‚ éšä¹‹ï¼Œåœ¨ 1991 å¹´10 æœˆï¼ŒèŠ¬å…°èµ«å°”è¾›åŸºå¤§å­¦çš„åœ¨æ ¡ç”Ÿ Linus Torvalds ç¼–å†™äº†ä¸€æ¬¾åä¸º Linux çš„æ“ä½œç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿå› å…¶è¾ƒé«˜çš„ä»£ç è´¨é‡ä¸”åŸºäºŽ GNU GPL è®¸å¯åè®®çš„å¼€æ”¾æºä»£ç ç‰¹æ€§ï¼Œè¿…é€Ÿå¾—åˆ°äº† GNU è®¡åˆ’å’Œä¸€å¤§æ‰¹é»‘å®¢ç¨‹åºå‘˜çš„æ”¯æŒã€‚ éšåŽ Linux ç³»ç»Ÿä¾¿è¿›å…¥äº†å¦‚ç«å¦‚è¼çš„å‘å±•é˜¶æ®µã€‚ 1994 å¹´ 1 æœˆï¼ŒBob Young åœ¨ Linux ç³»ç»Ÿå†…æ ¸çš„åŸºç¡€ä¹‹ä¸Šï¼Œé›†æˆäº†ä¼—å¤šçš„æºä»£ç å’Œç¨‹åºè½¯ä»¶ï¼Œå‘å¸ƒäº†çº¢å¸½ç³»ç»Ÿå¹¶å¼€å§‹å‡ºå”®æŠ€æœ¯æœåŠ¡ï¼Œè¿™è¿›ä¸€æ­¥æŽ¨åŠ¨äº† Linux ç³»ç»Ÿçš„æ™®åŠã€‚ 1998 å¹´ä»¥åŽï¼Œéšç€ GNU æºä»£ç å¼€æ”¾è®¡åˆ’å’Œ Linux ç³»ç»Ÿçš„ç»§ç»­ç«çƒ­ï¼Œä»¥ IBM å’Œ Intel ä¸ºé¦–çš„å¤šå®¶ IT ä¼ä¸šå·¨å¤´å¼€å§‹å¤§åŠ›æŽ¨åŠ¨å¼€æ”¾æºä»£ç è½¯ä»¶çš„å‘å±•ã€‚ åˆ°äº† 2017 å¹´å¹´åº•ï¼ŒLinux å†…æ ¸å·²ç»å‘å±•åˆ°äº† 4.13 ç‰ˆæœ¬ï¼Œå¹¶ä¸” Linux ç³»ç»Ÿç‰ˆæœ¬ä¹Ÿæœ‰æ•°ç™¾ä¸ªä¹‹å¤šï¼Œä½†å®ƒä»¬ä¾ç„¶éƒ½ä½¿ç”¨ Linus Torvalds å¼€å‘ã€ç»´æŠ¤çš„Linux ç³»ç»Ÿå†…æ ¸ã€‚RedHat å…¬å¸ä¹Ÿæˆä¸ºäº†å¼€æºè¡Œä¸šåŠ Linux ç³»ç»Ÿçš„å¸¦å¤´å…¬å¸ã€‚ å£°æ˜Žè¿™ç¯‡åšæ–‡ makefile: gcc å·¥ä½œæµç¨‹ æ—©æœŸè¢«æˆ‘æ”¾åœ¨ CSDN ä¸Šé¢è¿‡.æ—¶éš”å¤šå¹´, ä»ä¸èƒ½å¿˜æ€€, çŽ°ä¹”è¿è‡³æ­¤. æœ¬æ–‡æ¯”è¾ƒç®€å•, æ¯”è¾ƒé€‚åˆåˆå­¦è€….æˆ‘åªæ˜¯è¯•å›¾ä»¥å®žä¾‹çš„æ–¹å¼ç»™å¤§å®¶è®²è§£ä¸€ä¸‹ GCC ç¼–è¯‘é“¾æŽ¥ Cè¯­è¨€ç¨‹åºçš„æµç¨‹, å¹¶æ²¡æœ‰é«˜æ·±çš„çŸ¥è¯†. ç¼–è¯‘æµç¨‹C è¯­è¨€ç»è¿‡é¢„å¤„ç†ã€ç¼–è¯‘ã€è¿žæŽ¥æœ€åŽç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶. åœ¨ Linux çš„ GCC ä¸‹é¢ï¼Œçœ‹çœ‹å…¶å·¥ä½œæµç¨‹. æµç¨‹å›¾å¦‚ä¸‹ï¼š é¢„å¤„ç†ï¼Œå°†åŒ…å«çš„ .h æ–‡ä»¶æˆ–è€…ä¸€äº›é¢„å¤„ç†è¯­å¥ï¼ˆå¦‚ #defineï¼‰å¤„ç†ä¸€ä¸‹ï¼Œç„¶åŽå°† .c æ–‡ä»¶ç”Ÿæˆ *.i çš„ä¸­é—´æ–‡ä»¶. æ³¨æ„äº† GCC ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆè¿™æ ·ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æžœéœ€è¦ï¼Œè‡ªå·±åŠ  -E å‚æ•°å³å¯. ç¼–è¯‘ã€æ±‡ç¼–é˜¶æ®µç”Ÿæˆ *.o ç›®æ ‡æ–‡ä»¶ï¼Œæœ€åŽç»è¿‡é“¾æŽ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶. æ³¨æ„ï¼šå¯æ‰§è¡Œæ–‡ä»¶ä¸ä¸€å®šæ˜¯ exe æ–‡ä»¶. å®žä¾‹ä¸‹é¢ä»¥ä¸€ä¸ªå®žä¾‹ hello.cï¼Œè¯´æ˜Žè¿™ä¸ªè¿‡ç¨‹. æºæ–‡ä»¶å¾ˆç®€å•ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†è¯´æ˜Žé—®é¢˜. åœ¨å‘½ä»¤è¡Œï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å®Œæˆé¢„å¤„ç†ï¼š 1gcc -E hello.c -o hello.i æ‰§è¡Œä¹‹åŽï¼Œä½ å¯ä»¥æ‰“å¼€ hello.i æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤š extern ä»¥åŠå°† MAX è§£é‡Šä¸º 20ï¼š åœ¨å‘½ä»¤è¡Œï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤, å®Œæˆç¼–è¯‘é˜¶æ®µ: 1gcc -S hello.i -o hello.s è¿™æ—¶å¯ä»¥ç”Ÿæˆ *.s æ–‡ä»¶ï¼Œå…¶å®žå°±æ˜¯ä¸€äº›æ±‡ç¼–è¯­å¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š é‚£éº½ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥æ±‡ç¼–é˜¶æ®µäº†ï¼Œæ‰§è¡Œï¼š 1gcc -c hello.s -o hello.o æ‰“å¼€è¿™ä¸ª hello.o æ–‡ä»¶ï¼Œéƒ½æ˜¯ä¸€äº›æœºå™¨ç . æœ€åŽä¸€ä¸ªè¿žæŽ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼š 1gcc hello.o -o hello åœ¨å½“å‰ç›®å½•å°±å¯ä»¥ç”Ÿæˆ hello è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶. æ‰§è¡Œ ./helloï¼Œå°±ä¼šè¾“å‡ºï¼š åˆ°æ­¤ï¼ŒGCC ç¼–è¯‘è¿žæŽ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶å®Œæ¯•ï¼ å½“å‰ç›®å½•ä¸‹é¢çš„æ–‡ä»¶ï¼š ä»¥ä¸Šçš„æ­¥éª¤ï¼Œå…¶å®žä¸€å¥å‘½ä»¤å³å¯ï¼š 1gcc hello.c -o hello æ­¤æ—¶ç›®å½•å†…å®¹å¦‚ä¸‹ï¼š è‡ªå·±åŠ¨æ‰‹æ„Ÿå—ä¸€ä¸‹ï¼Œä½ ä¼šæ”¶èŽ·æ›´å¤šï¼ GCC ç³»åˆ—åšæ–‡GCC: ç¼–è¯‘ C è¯­è¨€çš„æµç¨‹ GCC: Homebrew å®‰è£… GCC å’Œ Binutils GCC: å…±äº«åº“ GCC: é™æ€åº“]]></content>
      <categories>
        <category>C/C++</category>
      </categories>
      <tags>
        <tag>GCC C ç¼–è¯‘å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS APNs: å¤„ç†æ•°æ®]]></title>
    <url>%2F2017%2F08%2F07%2FiOS-APNs-%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹åšæ–‡: iOS ç»†è¯´æŽ¨é€: è¿œç¨‹æŽ¨é€ å’Œ iOS ç»†è¯´æŽ¨é€: æœ¬åœ°æŽ¨é€åˆ†åˆ«ä»‹ç»äº† iOS çš„ä¸¤ç§å…¸åž‹æŽ¨é€, iOS è¿˜æœ‰å¾ˆå¤šç±»åž‹çš„æŽ¨é€, å¦‚é™é»˜æŽ¨é€, VOIP æŽ¨é€(iOS8)ç­‰, åŽé¢ä¼šæ…¢æ…¢ä»‹ç»ç»™å¤§å®¶. ä»Šå¤©è·Ÿå¤§å®¶èŠèŠå…³äºŽå¦‚ä½•å¤„ç†æŽ¨é€çš„æ•°æ®(payload). è¯¥ç³»åˆ—åšå®¢: iOS APNs: è¿œç¨‹æŽ¨é€iOS APNs: æœ¬åœ°æŽ¨é€iOS APNs: å¤„ç†æ•°æ®(æœ¬ç¯‡)iOS APNs: é™é»˜æŽ¨é€iOS APNs: Background Fetch æŽ¨é€çš„ä»£ç†å›žè°ƒæ—¶æœºè¿˜è®°å¾— AppDelegate é‡Œé¢å…³äºŽæŽ¨é€çš„å‡ ä¸ªä»£ç†æ–¹æ³•å§.~ ä¼°è®¡ä½ ä¹Ÿå¿˜è®°äº†, æ²¡å…³ç³», æˆ‘ä»¬å†ä¸€èµ·æ•´ç†ä¸€ä¸‹. 123456- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo &#123; MZLOG(@&quot;markApp push. RemotePush userInfo: %@&quot;, userInfo); // å¯ä»¥æ ¹æ®æŽ¨é€å†…å®¹å†³å®šä¸‹ä¸€æ­¥çš„è¡Œä¸º&#125; è¯¥æ–¹æ³•åœ¨æŽ¥æ”¶åˆ° RemotePush çš„æ—¶å€™, è°ƒç”¨æ—¶æœº: 1.APP åœ¨å‰å°è¿è¡Œçš„, RemotePush è¢«æŽ¨é€è¿‡æ¥äº†.2.APP åœ¨åŽå°è¿è¡Œ, æ— è®ºæ˜¯å¦è¢«æŒ‚èµ·åªè¦æ²¡æœ‰è¢«æ€æ­», ç‚¹å‡»æŽ¨é€å†…å®¹. ä»¥ä¸Šä¸¤ç§æƒ…å†µå‡å¯ä»¥è¿›å…¥ didReceiveRemoteNotification æ–¹æ³•. 123456- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification &#123; MZLOG(@&quot;App push. LocalPush notification: %@&quot;, notification); // å¯ä»¥æ ¹æ®æŽ¨é€å†…å®¹å†³å®šä¸‹ä¸€æ­¥çš„è¡Œä¸º&#125; è¯¥æ–¹æ³•æŽ¥æ”¶åˆ° LocalPush çš„æ—¶å€™, è°ƒç”¨æ—¶æœº: 1.APP åœ¨å‰å°è¿è¡Œçš„, LocalPush è¢«æŽ¨é€è¿‡æ¥äº†.2.APP åœ¨åŽå°è¿è¡Œ, æ— è®ºæ˜¯å¦è¢«æŒ‚èµ·åªè¦æ²¡æœ‰è¢«æ€æ­», ç‚¹å‡»æŽ¨é€å†…å®¹. ä»¥ä¸Šä¸¤ç§æƒ…å†µå‡å¯ä»¥è¿›å…¥ didReceiveLocalNotification æ–¹æ³•. è¿™ä¸¤ä¸ªå›žè°ƒæ–¹æ³•, åˆ†åˆ«æŽ¥æ”¶ RemotePush å’Œ LocalPush çš„æŽ¨é€æ¶ˆæ¯. æœ‰äº›äººä¼šé—®äº†, å‡å¦‚è¿™ä¸ªæ—¶å€™æˆ‘çš„åº”ç”¨åœ¨åŽå°, è¢«ç³»ç»Ÿæ€æ­»äº†æˆ–è€…è¢«ç”¨æˆ·åŒå‡» Home é”®æ€æ­»äº†, æ­¤æ—¶è¿œç¨‹æŽ¨é€è¿‡æ¥äº†, æˆ–è€…çŠ¶æ€æ é‡Œé¢æœ‰æœ¬åœ°æŽ¨é€çš„æ¶ˆæ¯, æˆ‘ç‚¹å‡»æŽ¨é€æ¶ˆæ¯, è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šè¢«è°ƒç”¨å—? ç±»ä¼¼è¿™ç§æ•ˆæžœ, ä¸Šé¢æ˜¯ RemotePush, ä¸‹é¢æ˜¯ LocalPush. æˆ‘è‚¯å®šçš„å‘Šè¯‰å¤§å®¶, åº”ç”¨è¢«æ€æ­»çš„æƒ…å†µä¸‹, ç‚¹å‡»æŽ¨é€å†…å®¹, didReceiveRemoteNotification å’Œ didReceiveLocalNotification éƒ½ä¸ä¼šè¢«è°ƒç”¨. è¿™ä¸ªæ—¶å€™, AppDelegate ä¸­çš„å¦ä¸€ä¸ªæ–¹æ³•ä¸Šåœºäº†. 12- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions çœ‹ä¸€ä¸‹ didFinishLaunchingWithOptions çš„å…·ä½“å®žçŽ°, ç¤ºä¾‹ä»£ç å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; /// å°†åº”ç”¨å›¾æ ‡çš„ badge æ¸…é›¶ &#123; [[UIApplication sharedApplication] setApplicationIconBadgeNumber:1]; [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; [[UIApplication sharedApplication] cancelAllLocalNotifications]; &#125; if (nil != launchOptions) &#123; /// å¤„ç† LocalPush &#123; // è¿™é‡Œå¯ä»¥å¾—åˆ° UILocalNotification å¯¹è±¡ id localPushNotify = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey]; MZLOG(@&quot;AppDelegate localPush: %@&quot;, localPushNotify); if (nil != localPushNotify) &#123; if ([localPushNotify isKindOfClass:[UILocalNotification class]]) &#123; // èŽ·å– userinfo æ•°æ® NSDictionary *userInfo = [(UILocalNotification *)localPushNotify userInfo]; MZLOG(@&quot;AppDelegate localPush of UILocalNotification: %@&quot;, userInfo); // æ ¹æ® userInfo çš„å†…å®¹å¤„ç†å¦‚é¡µé¢è·³è½¬ç­‰ &#125; &#125; &#125; /// å¤„ç† RemotePush &#123; NSDictionary *remotePushNotify = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey]; MZLOG(@&quot;AppDelegate remotePush: %@&quot;, remotePushNotify); if (nil != remotePushNotify) &#123; NSDictionary *remoteAps = [remotePushNotify objectForKey:@&quot;aps&quot;]; MZLOG(@&quot;AppDelegate remotePush. The aps&apos; info, alert: %@, badge: %@, sound: %@&quot;, [remoteAps objectForKey:@&quot;alert&quot;], [remoteAps objectForKey:@&quot;badge&quot;], [remoteAps objectForKey:@&quot;sound&quot;]); // æ ¹æ®æŽ¨é€çš„å†…å®¹å¤„ç†å¦‚é¡µé¢è·³è½¬ç­‰ &#125; &#125; &#125; MZLOG(@&quot;AppDelegate. launchOptions: %@&quot;, launchOptions); return YES;&#125; å¯¹åº”çš„æ‰“å°è¾“å‡ºå†…å®¹, å¦‚ä¸‹ æœ¬åœ°æŽ¨é€çš„å†…å®¹: 123 AppDelegate localPush of UILocalNotification: &#123; &quot;user_info_key&quot; = &quot;user_info_value_json_str&quot;;&#125; è¿œç¨‹æŽ¨é€çš„å†…å®¹: 1234567aps = &#123; alert = &quot;Testing.. (2)&quot;; badge = 1; sound = default; &#125;; The aps&apos; info, alert: Testing.. (19), badge: 1, sound: default è‡ªå®šä¹‰æŽ¨é€å†…å®¹ å¯¹äºŽæŽ¨é€çš„æ•°æ®æ ¼å¼, æ˜¯è‹¹æžœè§„å®šçš„æ ¼å¼, æˆ‘ä»¬å¯ä»¥åœ¨å…¶åŸºç¡€ä¸Šæ·»åŠ æˆ‘ä»¬éœ€è¦çš„æ•°æ®. åœ¨ä»‹ç»ä¸‹é¢å†…å®¹ä¹‹å‰, å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ payload. payload æ˜¯æŽ¨é€é€šçŸ¥çš„ä¸€éƒ¨åˆ†ï¼Œæ¯ä¸€æ¡æŽ¨é€é€šçŸ¥éƒ½åŒ…å«ä¸€ä¸ª Payload.å®ƒåŒ…å«äº†ç³»ç»Ÿæé†’ç”¨æˆ·é€šçŸ¥åˆ°è¾¾çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„æ•°æ®, å³é€šçŸ¥ä¸»è¦ä¼ é€’çš„æ•°æ®ä¸º payload. Payload æœ¬èº«ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå®ƒå†…éƒ¨å¿…é¡»è¦åŒ…å«ä¸€ä¸ªé”®ä¸º aps çš„å­—å…¸.ä¹Ÿå°±æ˜¯è¯´ payload æ˜¯æ•´ä¸ªå­—ç¬¦ä¸². å…³äºŽ payload çš„é™åˆ¶ åœ¨æ—©æœŸçš„æŽ¨é€ä¸­, payload ä¸èƒ½è¶…è¿‡ 256bytes, ä¸­é—´è¿˜ç»åŽ†è¿‡æŽ¨é€çš„ payload æœ€å¤§ä¸º 2KB.çŽ°åœ¨è‹¹æžœæ”¯æŒæœ€å¤§ä¸º5KB(VOIP æŽ¨é€), å®˜æ–¹æ–‡æ¡£æœ‰è¯´, å¦‚ä¸‹: 1234For regular remote notifications, the maximum size is 4KB (4096 bytes)For Voice over Internet Protocol (VoIP) notifications, the maximum size is 5KB (5120 bytes)NOTEIf you are using the legacy APNs binary interface to send notifications instead of an HTTP/2 request, the maximum payload size is 2KB (2048 bytes) ä¸Šé¢æ˜¯ å®˜æ–¹æ–‡æ¡£ çš„åŽŸæ–‡, å¤§æ¦‚æ„æ€æ˜¯: çŽ°åœ¨ APNs æ”¯æŒ payload ä¸º 4KB, å¦‚æžœæ˜¯ VoIP æŽ¨é€çš„è¯, æ”¯æŒ 5KB. ä½†æ˜¯, å¦‚æžœä½ ä½¿ç”¨ä¼ ç»Ÿçš„ APNs è€Œä¸æ˜¯ä½¿ç”¨ HTTP/2 çš„è¯, æœ€å¤§æ”¯æŒ 2KB. ä¹Ÿå°±æ˜¯è¯´, æŽ¨é€çš„ payload å¤§å°å’Œ iOS ç³»ç»Ÿæ— å…³, è€Œæ˜¯å’Œåè®®æœ‰å…³. å¯ä»¥ä½¿ç”¨ä¸‹é¢ä»£ç , æŸ¥çœ‹ payload é•¿åº¦ 1payload.getBytes().length æˆ‘ä»¬æ­£å¸¸çš„æŽ¨é€å†…å®¹æ˜¯è¿™æ ·çš„, æ­£å¸¸æ ¼å¼: 1&#123;&quot;aps&quot;:&#123;&quot;alert&quot;:&quot;Testing.. (21)&quot;,&quot;badge&quot;:1,&quot;sound&quot;:&quot;default&quot;&#125;&#125; å¦‚æžœæƒ³å¯¹æŽ¨é€å†…å®¹åšè‡ªå®šä¹‰, å¯ä»¥è‡ªå·±æ·»åŠ é¢å¤–çš„æ•°æ®, å¦‚: 1&#123;&quot;aps&quot;:&#123;&quot;alert&quot;:&quot;Testing.. (21)&quot;,&quot;badge&quot;:1,&quot;sound&quot;:&quot;default&quot;&#125;, &quot;ext&quot;:&#123;&quot;key&quot;:&quot;value&quot;&#125;&#125; å…¶ä¸­, ext å°±æ˜¯é¢å¤–æ·»åŠ çš„æ•°æ®æ¨¡åž‹. åœ¨ APP æ”¶åˆ°è¿™æ ·çš„æ•°æ®æ¨¡åž‹æ—¶, å¯ä»¥å¯¹åº”ä¸åŒçš„è¡Œä¸º. å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚, è‡ªè¡Œå®šä¹‰æ•°æ®æ ¼å¼. è‡ªå®šä¹‰çš„æ•°æ®æ ¼å¼, æ³¨æ„å†…å®¹çš„é•¿åº¦, åœ¨ä¸åŒçš„ iOS ç³»ç»Ÿä¸Šé¢, å¯¹äºŽæŽ¨é€çš„å†…å®¹æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„. å†å” å¨å‡ å¥å…³äºŽ iOS7 ä»¥åŽæ·»åŠ çš„æ–¹æ³• 123- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯åœ¨ AppDelegate ä¸­å®žçŽ°çš„. 12- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo è¿™ä¸ªæ–¹æ³•åœ¨ iOS3 å°±å·²ç»æœ‰äº†, å¯è°“æ˜¯åŽ†å²æ‚ ä¹….æˆ‘å§‘ä¸”ç§°ä¹‹ä¸ºè¯¥æ–¹æ³•ä¸º FatherMethod, ä¸Šé¢é‚£ä¸ªæ–°åŠ å…¥çš„ç§°ä¹‹ä¸º SonMethod. æ³¨æ„äº‹é¡¹: [1]. å®žçŽ°äº† FatherMethod, å³ä½¿ä½ å®žçŽ°äº† SonMethod, SonMethod ä¹Ÿä¸ä¼šè¢«è°ƒç”¨.[2]. SonMethod æ¯” FatherMethod å¤šäº†ä¸€ä¸ªå‚æ•° completionHandler, è¿™ä¸ªåœ¨åŽé¢ä¼šè¯´åˆ°.ä¸»è¦ç”¨äºŽ Background Mode ä¸­çš„ Background Fetch.[3]. æŽ¨é€è¢«è°ƒç”¨çš„æ—¶æœº, é™¤äº† FatherMethod çš„æ—¶æœºå¤–, è¿˜å¤šäº†ä¸€ç§æ—¶æœº, å°±æ˜¯åœ¨ APP è¢«æ€æ­»åŽ, ç‚¹å‡»æŽ¨é€å†…å®¹æ‰“å¼€ APP, æ­¤æ—¶ APP å†æ¬¡å›žåˆ°å‰å°çš„æ—¶å€™, è¯¥æ–¹æ³•ä¹Ÿä¼šè¢«è°ƒç”¨(didFinishLaunchingWithOptionsä¹Ÿä¼šè°ƒç”¨), æ‰€ä»¥åœ¨å¤„ç†è¿œç¨‹æŽ¨é€å†…å®¹çš„æ—¶å€™, è¦æ³¨æ„è¿™ä¸€ç‚¹. é’ˆå¯¹æ³¨æ„äº‹é¡¹[3], ç›®å‰æˆ‘èƒ½ç»™å‡ºçš„æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆ: ç¬¬ä¸€, åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ APP, å¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ APP, ç»Ÿä¸€åœ¨didFinishLaunchingWithOptions ä¸­å¤„ç†, ä¸åœ¨ SonMethod ä¸­å¤„ç†. ç¬¬äºŒ, è¿œç¨‹æŽ¨é€ç»Ÿä¸€åœ¨ SonMethod ä¸­å¤„ç†, didFinishLaunchingWithOptions ä¸­åªå¤„ç†åœ¨ APP è¢«æ€æ­»çš„æƒ…å†µä¸‹, ç”¨æˆ·ç‚¹å‡»æŽ¨é€æœ¬åœ°çš„å†…å®¹. æˆ‘ä¸ªäººé‡‡ç”¨çš„æ˜¯ç¬¬äºŒä¸­æ–¹æ¡ˆ. æ„Ÿè°¢åœ¨æŽ¨é€å·¥å…· NWPusher å’Œ Xcode çš„ Window/Devices/Console å¸®åŠ©ä¸‹, æ‰å¾—ä»¥å®Œå–„åšæ–‡. NWPusher ç”¨æ¥å‘é€æŽ¨é€å†…å®¹. Window/Devices/Console ç”¨äºŽæŸ¥çœ‹è¾“å‡ºæ—¥å¿—. å¿…çœ‹æ–‡æ¡£Creating the Remote Notification Payload Payload Key Reference]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>APNs æŽ¨é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS APNs: æœ¬åœ°æŽ¨é€]]></title>
    <url>%2F2017%2F08%2F06%2FiOS-APNs-%E6%9C%AC%E5%9C%B0%E6%8E%A8%E9%80%81%2F</url>
    <content type="text"><![CDATA[æ¦‚æ‹¬iOS APNs: è¿œç¨‹æŽ¨é€ è¯´è¿‡è¿œç¨‹æŽ¨é€(RemotePush). ä»Šå¤©è¯´è¯´æœ¬åœ°æŽ¨é€, æœ¬åœ°æŽ¨é€ä¹Ÿå°±æ˜¯å¹³æ—¶æ‰€è¯´çš„ LocalPush. è¯¥ç³»åˆ—åšå®¢: iOS APNs: è¿œç¨‹æŽ¨é€ iOS APNs: æœ¬åœ°æŽ¨é€(æœ¬ç¯‡) iOS APNs: å¤„ç†æ•°æ® iOS APNs: é™é»˜æŽ¨é€ iOS APNs: Background Fetch ä¸šåŠ¡åœºæ™¯åœ¨å…·ä½“å®žçŽ°ä¹‹å‰, å…ˆè¯´ä¸€ä¸‹ä¸šåŠ¡åœºæ™¯. å‡å¦‚ä½ çš„ APP å…·æœ‰ IM(å³æ—¶é€šè®¯) åŠŸèƒ½, è¿™ä¸ªæ—¶å€™, ä½ å¯ä»¥æ ¹æ®è¿žæŽ¥æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦åœ¨çº¿, å¦‚æžœä¸åœ¨çº¿, å¯ä»¥ä½¿ç”¨è¿œç¨‹æŽ¨é€å°†æŽ¨é€å†…å®¹å‘ŠçŸ¥ç”¨æˆ·.å¦‚æžœåœ¨çº¿, å¯ä»¥é€šè¿‡ IM æŠŠå†…å®¹å‘Šè¯‰ APP, APP æ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯åŽ, å¯ä»¥ä½¿ç”¨æœ¬åœ°æŽ¨é€å‘ŠçŸ¥ç»™ç”¨æˆ·. æ®è¯´ APNs æ¯å¤©è¦å¤„ç†çš„æŽ¨é€åœ¨äº¿çº§åˆ«, æ‰€ä»¥å¦‚æžœå¯ä»¥ä½¿ç”¨ LocalPush å®Œæˆçš„ä¸šåŠ¡, æˆ‘å»ºè®®å¤§å®¶è¿˜æ˜¯ä¸è¦ä½¿ç”¨è¿œç¨‹æŽ¨é€, å†µä¸”è‹¹æžœå¹¶ä¸ä¸€å®šä¿è¯è¿œç¨‹æŽ¨é€ä¸€å®šæˆåŠŸ, å¦‚æžœç½‘ç»œæˆ–è€… APNs åŽ‹åŠ›å¤§, æŽ¨é€ä¹Ÿä¼šå»¶æ—¶. ç»™è‹¹æžœå‡å°‘ç‚¹åŽ‹åŠ›å§, å“ˆå“ˆ! å†è¯´ä¸€ä¸ªä¸šåŠ¡åœºæ™¯, ä½ çš„ APP åœ¨åŽå°è¿è¡Œæ—¶é—´å¿«åˆ°è¦è¢«ç³»ç»ŸæŒ‚èµ·çš„æ—¶å€™äº†, ä½ å¯ä»¥å‘é€ä¸€ä¸ª LocalPush æ¥æç¤ºç”¨æˆ·æˆ–è€…åˆºæ¿€ç”¨æˆ·, å†æ¬¡å°† APP æ‹‰å›žå‰å°è¿è¡Œ. è¿™æ ·å¯ä»¥ä¿è¯ APP å¯ä»¥æ­£å¸¸è¿è¡Œäº†. ä¸Šé¢è¯´çš„ç¬¬äºŒä¸ªä¸šåŠ¡åœºæ™¯, æ˜¯ä»Šå¤©ä¾‹å­çš„åŸºç¡€, ä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å®žé™…ä¸šåŠ¡åœºæ™¯æ¥ä½¿ç”¨ LocalPush åŠŸèƒ½. LocalPush ç®€ä»‹LocalPush å…è®¸ APP å‘ç”¨æˆ·å‘é€é€šçŸ¥, å¯¹äºŽç”¨æˆ·æ¥è¯´, å°±è·Ÿè¿œç¨‹æŽ¨é€æ˜¯ä¸€æ ·çš„, åŸºæœ¬æ²¡æœ‰æ„ŸçŸ¥, å¼€å‘è€…ä¹Ÿä¸å¸Œæœ›ç”¨æˆ·æœ‰æ„ŸçŸ¥. æŽ¨é€æ•ˆæžœå›¾: æ³¨æ„: å¦‚æžœä½ çš„ APP åœ¨å‰å°, å‘é€ LocalPush æ˜¯ä¸ä¼šè¦ä¸Šè¿°æ•ˆæžœçš„.å¦‚æžœåœ¨å‰å°, å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„å¼¹æ¡†æ¥æç¤ºç”¨æˆ·. LocalPush åŒæ ·éœ€è¦ç”¨æˆ·æŽˆæƒæŽ¨é€çš„æƒé™, å¦åˆ™ä¹Ÿæ— æ³•å‘é€æˆåŠŸ.è¿™ä¸ªè·Ÿè¿œç¨‹æŽ¨é€æ˜¯ä¸€æ ·çš„. å¦å¤–, LocalPush éœ€è¦ APP åœ¨åŽå°æ²¡æœ‰è¢«æŒ‚èµ·çš„æƒ…å†µä¸‹, æ‰èƒ½å‘é€, å¦åˆ™æ— æ³•å¯ç”¨. å‘é€ LocalPush çš„ä¸€ä¸ªå¥½å¤„æ˜¯ä¸éœ€è¦ç”¨æˆ·è¿žæŽ¥ç½‘ç»œ, è¿™ä¸ªæ˜¯åŒºåˆ«äºŽè¿œç¨‹æŽ¨é€çš„, å› ä¸ºè¿œç¨‹æŽ¨é€å¿…é¡»è¦æ±‚ç”¨æˆ·è¿žæŽ¥ç½‘ç»œçš„.å¾ˆå¤šå•æœºæ¸¸æˆæˆ–è€…å¼±è”ç½‘çš„æ¸¸æˆ, å‘é€çš„æŽ¨é€éƒ½æ˜¯ LocalPush, è€Œéžè¿œç¨‹æŽ¨é€. åœ¨é˜…è¯»ä¸‹é¢å†…å®¹ä¹‹å‰, å»ºè®®å¤§å®¶å…ˆçœ‹çœ‹ iOS åŽå°æ¨¡å¼ è¿™ç¯‡æ–‡ç« .æœ¬ç¯‡ä¹Ÿæ˜¯åŸºäºŽè¿™ä¸ªä¸ºåŸºç¡€çš„. å®žçŽ°è¿™ä¸ªç¤ºä¾‹, å®žçŽ°çš„åœºæ™¯å¦‚ä¸‹: ç”¨æˆ·æ‰“å¼€ APP, æŽˆæƒäº†æŽ¨é€çš„æƒé™, ç”¨æˆ·è¯•çŽ©ä¸€ä¼šä¹‹åŽ, å°† APP é€€åˆ°äº†åŽå°, APP ç›‘å¬é€€åˆ°åŽå°ä¹‹åŽ, å»¶æ—¶ä¸€å®šæ—¶é—´å‘é€ LocalPush ç»™ç”¨æˆ·. AppDelegate.m ä¸­ä½¿ç”¨åŽå°æ¨¡å¼ å…³äºŽ MZBackgroundTask çš„å®žçŽ°, é™„å½•ç»™å‡º. 1234- (void)applicationDidEnterBackground:(UIApplication *)application &#123; [[MZBackgroundTask sharedTask] startTask];&#125; ViewController.m 1234567891011121314151617181920212223242526272829303132333435- (void)viewDidLoad &#123; [super viewDidLoad]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:nil];&#125;- (void)onDidEnterBackground:(NSNotification *)notification &#123; MZLOG(@&quot;App Background. Enter onDidEnterBackground.&quot;); // ç­‰å¾… 6s åŽ, è¿™ä¸ªæ—¶é—´å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µåŽ»ä¿®æ”¹, è¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿ int delta = 6; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delta * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; MZLOG(@&quot;App Background. Enter onDidEnterBackground diapatch.&quot;); if (UIApplicationStateBackground == [UIApplication sharedApplication].applicationState) &#123; UILocalNotification *notification = [UILocalNotification new]; notification.alertBody = @&quot;èµ°, åŽ»highå§!&quot;; notification.soundName = UILocalNotificationDefaultSoundName; // åº”ç”¨å›¾æ ‡ä¸Šé¢æ˜¾ç¤ºçš„æ•°å­— notification.applicationIconBadgeNumber = notification.applicationIconBadgeNumber + 1; // å¯ä»¥è‡ªå®šä¹‰æ•°æ® notification.userInfo = @&#123;@&quot;user_info_key&quot;: @&quot;user_info_value_json_str&quot;&#125;; [[UIApplication sharedApplication] scheduleLocalNotification:notification]; &#125; else &#123; // æ˜¾ç¤ºè‡ªå®šä¹‰å¼¹æ¡†ç­‰ &#125; &#125;);&#125; å°† APP ç‚¹å‡» Home é”®é€€åˆ°åŽå°, 6s åŽå¯ä»¥çœ‹åˆ°æŽ¨é€çš„æ•ˆæžœ. ç‚¹å‡»æŽ¨é€çš„æç¤ºæ¡†, å†æ¬¡æ‰“å¼€äº† APP, ä¼šæ‰§è¡Œ AppDelegate ä¸­çš„æ–¹æ³•, å¦‚ä¸‹: 1234- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification &#123; MZLOG(@&quot;App push. notification: %@&quot;, notification);&#125; æ‰“å°å‡ºæ¥çš„ notification, å¦‚ä¸‹å›¾æ‰€ç¤º: å…¶ä¸­, user_info æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®éƒ¨åˆ†. é™„å½• MZBackgroundTask å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990#import &quot;MZBackgroundTask.h&quot;@implementation MZBackgroundTask+ (instancetype)sharedTask &#123; static MZBackgroundTask *_task; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _task = [[self alloc] init]; &#125;); return _task;&#125;- (void)startTask &#123; if (![self _checkSupportBackgroundTask]) &#123; MZLOG(@&quot;BackgroundTask. Current device don&apos;t support backgroundTask.&quot;); return; &#125; UIApplication *application = [UIApplication sharedApplication]; __block UIBackgroundTaskIdentifier taskId; /// ç”³è¯·åŽå°æ‰§è¡Œ /// æ³¨æ„: åœ¨iOS7å’Œè¯¥ç‰ˆæœ¬å‰ï¼ŒåŽå°å¯ä»¥ç”¨ä¸‹é¢çš„çš„æ–¹å¼åœ¨åŽå°å­˜æ´»5-10åˆ†é’Ÿï¼Œåœ¨iOS8åŠåŽï¼Œæœ€å¤šå­˜æ´»3åˆ†é’Ÿ &#123; taskId = [application beginBackgroundTaskWithName:NSStringFromClass([self class]) expirationHandler:^&#123; MZLOG(@&quot;BackgroundTask. BackgroundTask is Over. The remained time: %f&quot;, application.backgroundTimeRemaining); [application endBackgroundTask:taskId]; taskId = UIBackgroundTaskInvalid; &#125;]; &#125; if (UIBackgroundTaskInvalid == taskId) &#123; MZLOG(@&quot;BackgroundTask. Apply backgroundTask failed.&quot;); return; &#125; /// å¯ä»¥ç›‘æŽ§åŽå°ä»»åŠ¡å‰©ä½™çš„æ—¶é—´, é’ˆå¯¹ä¸šåŠ¡å¯ä»¥åŽ»å¤„ç† &#123; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; while (true) &#123; // å‰©ä½™å¯ä»¥åŽå°æ‰§è¡Œçš„æ—¶é—´ NSTimeInterval remainedTime = application.backgroundTimeRemaining; MZLOG(@&quot;BackgroundTask. The remained time: %f&quot;, remainedTime); if (remainedTime &lt; 2) &#123; // å¯ä»¥å‘Šè¯‰å…¶ä»–ä¸šåŠ¡, åŽå°ä»»åŠ¡å³å°†ç»“æŸäº† break; &#125; // ç¡çœ (å»¶æ—¶)1s [NSThread sleepForTimeInterval:1.f]; &#125; /// è¿™é‡Œå¯ä»¥åšä¸€äº›æ¸…é™¤å·¥ä½œ &#123; // clean up &#125; [application endBackgroundTask:taskId]; taskId = UIBackgroundTaskInvalid; &#125;); &#125;&#125;#pragma mark - Private./** * å½“å‰è®¾å¤‡æ˜¯å¦æ”¯æŒåŽå°ä»»åŠ¡. * * @return YES, æ”¯æŒåŽå°ä»»åŠ¡. å¦åˆ™, ä¸æ”¯æŒåŽå°ä»»åŠ¡. */- (BOOL)_checkSupportBackgroundTask &#123; SEL sel = @selector(isMultitaskingSupported); BOOL supportBTask = [[UIDevice currentDevice] respondsToSelector:sel]; return supportBTask;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>APNs è¿œç¨‹æŽ¨é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS APNs: è¿œç¨‹æŽ¨é€]]></title>
    <url>%2F2017%2F08%2F06%2FiOS-APNs-%E8%BF%9C%E7%A8%8B%E6%8E%A8%E9%80%81%2F</url>
    <content type="text"><![CDATA[æ¦‚è¦æœ¬ç¯‡åšæ–‡, ä½ é¦–å…ˆéœ€è¦çŸ¥é“çš„å†…å®¹: 1.äº†è§£è¿‡ Push.2.é˜…è¯»è¿‡ [iOS åŽå°æ¨¡å¼] è¿™ç¯‡æ–‡ç« .3.ç”³è¯·è¿‡è‹¹æžœè¯ä¹¦æˆ–è€…çŸ¥é“å¦‚ä½•ç”³è¯·å’Œåˆ¶ä½œè¯ä¹¦.4.iOS å¼€å‘åŸºæœ¬çŸ¥è¯†. ä½ åœ¨è¿™ç¯‡åšæ–‡å°†ä¼šå­¦åˆ°: 1.Push çš„å‘å±•åŽ†ç¨‹.2.å¼€æºæŽ¨é€å·¥å…· NWPusher çš„ä½¿ç”¨.3.Push çš„åŸºæœ¬åŽŸç†. ç®€ä»‹APNs, è‹¹æžœæŽ¨é€é€šçŸ¥æœåŠ¡. å…¨ç§°æ˜¯: Apple Push Notification Service. æŽ¨é€æŒ‡çš„æ˜¯ç”± APNs æœåŠ¡å™¨ã€ProviderServiceã€iOS ç³»ç»Ÿã€App æž„æˆçš„é€šè®¯ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ç§»åŠ¨äº’è”ç½‘ä¸Žä¼ ç»Ÿçš„ Web æœ€æ˜Žæ˜¾ä¸åŒçš„. å®˜æ–¹æœ‰æ¯”è¾ƒè¯¦ç»†çš„æ–‡æ¡£ä»‹ç», å¯ä»¥æˆ³è¿™é‡Œ å®˜æ–¹æ–‡æ¡£ æŸ¥çœ‹. è‹¹æžœçš„æ–‡æ¡£å†™çš„ç¡®å®žå¥½, ä½†æ˜¯ä½œä¸ºç¨‹åºå‘˜, æœ€é‡è¦çš„è¿˜æ˜¯è¦ç»“åˆç†è®ºåŽ»å®žè·µ. æœ¬ç¯‡ç»“åˆè‡ªå·±çš„å®žè·µå’Œå¯¹æŽ¨é€çš„ç†è§£, è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹æŽ¨é€ç›¸å…³çš„çŸ¥è¯†. Push å‘å±•åŽ†ç¨‹iOS åŽ†ç»å¾ˆå¤šç‰ˆæœ¬, ä¸€ç›´åœ¨ä¼˜åŒ–æˆ–è€…è¯´æ˜¯è¿›åŒ–æŽ¨é€ç›¸å…³çš„å†…å®¹, æ— è®ºæ˜¯ä»Žå®žç”¨æ€§å’ŒæŠ€æœ¯ä¸Šæ¥çœ‹, æŽ¨é€æ˜¯è‡³å…³é‡è¦çš„. çœ‹ä¸€ä¸‹ push å‘å±•åŽ†ç¨‹ iOS 3 - å¼•å…¥æŽ¨é€é€šçŸ¥ UIApplication çš„ registerForRemoteNotificationTypes ä¸Ž UIApplicationDelegate çš„ application(:didRegisterForRemoteNotificationsWithDeviceToken:)ï¼Œapplication(:didReceiveRemoteNotification:) iOS 4 - å¼•å…¥æœ¬åœ°é€šçŸ¥ scheduleLocalNotificationï¼ŒpresentLocalNotificationNow:ï¼Œ application(_:didReceive:) iOS 5 - åŠ å…¥é€šçŸ¥ä¸­å¿ƒé¡µé¢ iOS 6 - é€šçŸ¥ä¸­å¿ƒé¡µé¢ä¸Ž iCloud åŒæ­¥ iOS 7 - åŽå°é™é»˜æŽ¨é€ application(_:didReceiveRemoteNotification:fetchCompletionHandle:) iOS 8 - é‡æ–°è®¾è®¡ notification æƒé™è¯·æ±‚ï¼ŒActionable é€šçŸ¥ registerUserNotificationSettings(:)ï¼ŒUIUserNotificationAction ä¸Ž UIUserNotificationCategoryï¼Œapplication(:handleActionWithIdentifier:forRemoteNotification:completionHandler:) ç­‰ iOS 9 - Text Input actionï¼ŒåŸºäºŽ HTTP/2 çš„æŽ¨é€è¯·æ±‚ UIUserNotificationActionBehaviorï¼Œå…¨æ–°çš„ Provider API ç­‰ iOS 10- æ”¯æŒImages, GIFs, Audio and Videoç±»åž‹, å¹¶ä¸”æœ‰ Notification Service Extension ä¸Ž Notification Content Extensionï¼Œå¯ä»¥å®žçŽ°æŽ¨é€æ•°æ®åœ¨å±•ç¤ºå‰è¿›è¡Œä¸‹è½½æ›´æ–°ã€å®šåˆ¶é€šçŸ¥ UI, å¹¶ä¸”ç»Ÿä¸€äº†é€šçŸ¥ç±»åž‹ï¼Œå…·æœ‰æ—¶é—´é—´éš”é€šçŸ¥ã€åœ°ç†ä½ç½®é€šçŸ¥å’Œæ—¥åŽ†é€šçŸ¥. è¯¥ç³»åˆ—åšå®¢å…±åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†: iOS APNs: è¿œç¨‹æŽ¨é€(æœ¬ç¯‡) iOS APNs: æœ¬åœ°æŽ¨é€ iOS APNs: å¤„ç†æ•°æ® iOS APNs: é™é»˜æŽ¨é€ iOS APNs: Background Fetch å¦‚æžœéœ€è¦å®Œæ•´æºç çš„, å¯ä»¥é€šè¿‡é‚®ä»¶è”ç³»æˆ‘(veritman@126.com), åŽç»­å®ŒæˆåŽä¼šä¸Šä¼ åˆ° github. åŽŸç†å…ˆçœ‹å®˜æ–¹çš„æµç¨‹å›¾, å¦‚ä¸‹æ‰€ç¤º: è¯¥æµç¨‹å›¾, ä¸»è¦è¯´æ˜Žçš„æ˜¯è‡ªå·± ä¸šåŠ¡æœåŠ¡å™¨(Provider) æŽ¨é€æ¶ˆæ¯åˆ°ç”¨æˆ·(Client APP) çš„æµç¨‹. æ³¨æ„: è¿™é‡Œè¯´çš„ä»¥åŠæœ¬æ–‡åŽé¢è¯´çš„ ä¸šåŠ¡æœåŠ¡å™¨, ç»Ÿä¸€æŒ‡çš„æ˜¯å¯ä»¥å‘ APNs å‘é€æŽ¨é€æ¶ˆæ¯çš„æœåŠ¡å™¨. ä¸‹é¢è¿™å¼ å›¾æ˜¯æ¯”è¾ƒå®Œæ•´çš„ä¸€å¼ æµç¨‹å›¾, è‡ªå·±ç”»çš„, å‡‘åˆçœ‹å§! å¤§æ¦‚æµç¨‹, æˆ‘è¯¦ç»†è¯´ä¸€ä¸‹. 1.iOS è®¾å¤‡å¯åŠ¨åŽè¿žæŽ¥ç½‘ç»œ, ä¼šä¸Žè‹¹æžœæœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„é•¿è¿žæŽ¥.è¿™ä¸ªæ˜¯ç³»ç»Ÿç»´æŠ¤çš„, è¿™ä¹Ÿæ˜¯æŽ¨é€çš„å…³é”®.2.ç”¨æˆ·æ‰“å¼€ app, æŽˆæƒäº†æŽ¨é€é€šçŸ¥çš„æƒé™.3.æŽˆæƒæˆåŠŸåŽ, APNs ä¼šå°† deviceToken è¿”å›žç»™ iOS ç»ˆç«¯.4.ç»ˆç«¯å°†è¯¥ deviceToken è¿”å›žç»™æŒ‡å®šçš„ APP.5.APP æ‹¿åˆ° deviceToken ä¸Šä¼ ç»™æˆ‘ä»¬è‡ªå·±çš„ä¸šåŠ¡æœåŠ¡å™¨.6.ä¸šåŠ¡æœåŠ¡å™¨å‘ APNs å‘é€æŽ¨é€è¯·æ±‚, å¸¦ä¸Š deviceToken.7.APNs æŽ¨é€å†…å®¹åˆ°æŒ‡å®šçš„ iOS ç»ˆç«¯.8.iOS ç»ˆç«¯å°†å†…å®¹æŽ¨é€ç»™ç”¨æˆ·. å…³äºŽ deviceToken åŽé¢ä¼šè®². å…³äºŽ deviceTokenè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ deviceToken. deviceToken æ˜¯ NSData ç±»åž‹çš„æ•°æ®, æ˜¯è‹¹æžœæœåŠ¡å™¨æ ¹æ® è®¾å¤‡,è¯ä¹¦ç­‰ä¿¡æ¯å’Œä¸€å®šç®—æ³•ç”Ÿæˆçš„.éœ€è¦å°†è¿™ä¸ª deviceToken ä¼ é€ç»™æˆ‘ä»¬çš„æœåŠ¡å™¨ç«¯, è¿™æ ·ä¸€ä¸ªç”¨æˆ·å¯¹è±¡å°±ç»‘å®šäº†ä¸€ä¸ª deviceToken.å½“éœ€è¦ç»™ç”¨æˆ·æŽ¨é€æ¶ˆæ¯, é€šè¿‡è‡ªå·±çš„ä¸šåŠ¡æœåŠ¡å™¨, æ‰¾ç”¨æˆ·å¯¹åº”çš„ deviceToken å’Œè¦å‘é€çš„æŽ¨é€å†…å®¹, å‘é€åˆ°è‹¹æžœçš„ APNs, ç„¶åŽ APNs å°†æ¶ˆæ¯æŽ¨é€åˆ°è¯¥ deviceToken å¯¹åº”çš„æ‰‹æœºä¸Š. å…³äºŽ deviceToken æ˜¯å¦å¯å˜çš„é—®é¢˜ ç½‘ä¸Šæœ‰äº›äººè¯´, deviceToken æ˜¯å¯å˜çš„, æœ‰äº›äººè¯´, deviceToken æ˜¯ä¸å¯å˜çš„, æˆ‘ä¹Ÿä¸çŸ¥é“ä»–ä»¬åˆ°åº•æœ‰æ²¡æœ‰å®žè·µè¿‡, ä»Šå¤©æˆ‘è¦å‘Šè¯‰å¤§å®¶çš„æ˜¯, deviceToken æ˜¯å¯å˜çš„. å¦‚å¸è½½é‡è£… app, deviceToken ä¼šå˜. æˆ‘çš„è®¾å¤‡ iphone6, iOS10.3. ä¸‹é¢æ˜¯æˆ‘å®žéªŒçš„æ•°æ®: 1234ç¬¬ä¸€æ¬¡å®‰è£…è¿è¡Œå¾—åˆ°çš„ deviceToken&lt;4e0f2928 5be0700c=&quot;&quot; 296bf7f1=&quot;&quot; 3b0837e4=&quot;&quot; bc9da6d1=&quot;&quot; 9fdb672e=&quot;&quot; f87446be=&quot;&quot; 1c098431=&quot;&quot;&gt;å¸è½½åŽ, ç¬¬ä¸€æ¬¡å®‰è£…è¿è¡Œå¾—åˆ°çš„ deviceToken è¿™è¯´æ˜Ž, deviceToken æ˜¯å¯å˜çš„. ä»£ç å®žçŽ°ä¸Šé¢åŸºæœ¬éƒ½æ˜¯ä¸€äº›ç†è®ºçŸ¥è¯†, ä¸‹é¢ç»“åˆä»£ç , å…·ä½“å®žçŽ°. å·¥ç¨‹é…ç½®åœ¨å†™ä»£ç ä¹‹å‰, éœ€è¦é…ç½®ä¸€ä¸‹å·¥ç¨‹.å…³äºŽå¦‚ä½•åˆ›å»ºå¸¦æœ‰ push åŠŸèƒ½çš„è‹¹æžœè¯ä¹¦çš„æ“ä½œ, å¤§å®¶è‡ªè¡ŒåŽ»ç½‘ä¸Šå­¦ä¹ , è¿™é‡Œä¸èµ˜è¿°. ä¸è¿‡è¿™é‡Œè¦æé†’ä¸€ç‚¹, åˆ›å»ºçš„è¯ä¹¦ä¸€å®šè¦å’Œè‡ªå·±é¡¹ç›®çš„ appid ä¿æŒä¸€è‡´, å¦åˆ™æ— æ³•æŽ¨é€. è¿™ä¸ª Demo å·¥ç¨‹çš„åå­—æ˜¯ MZPush. å®‰è£…å¥½è¯ä¹¦, æ‰“å¼€å·¥ç¨‹, å¹¶èƒ½è®©å·¥ç¨‹è¯†åˆ«åˆ°. åˆ‡æ¢åˆ° Target, ç‚¹å‡» Capabilities é€‰é¡¹. æ­¥éª¤1: é…ç½® Push, æ‰“å¼€å¼€å…³å³å¯. é…ç½®åŽå°æ¨¡å¼, æ‰“å¼€å¼€å…³, é€‰ä¸­Remote notifications. ä¸è¿‡è¿™ä¸€æ­¥, ä¸æ˜¯å¿…é¡»çš„, å¦‚æžœä½ ä¸é…ç½®, å·¥ç¨‹ä¼šæœ‰è­¦å‘Š.æˆ‘å»ºè®®æ˜¯é€‰ä¸Š, åœ¨åŽé¢çš„åšæ–‡ä¸­, å†ä»”ç»†è¯´è¯´è¿™ä¸ªä¸œè¥¿çš„å¥½å¤„. è­¦å‘Šä¿¡æ¯å¦‚ä¸‹: 12You&apos;ve implemented -[&lt;UIApplicationDelegate&gt; application:didReceiveRemoteNotification:fetchCompletionHandler:], but you still need to add &quot;remote-notification&quot; to the list of your supported UIBackgroundModes in your Info.plist. æ­¥éª¤2: é…ç½®å®Œè¿™ä¸€æ­¥åŽ,åœ¨ Info.plist ä¸­å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€é¡¹å†…å®¹: æ­¥éª¤3: é…ç½®å·¥ç¨‹æœ€å°å…¼å®¹ç‰ˆæœ¬ å› ä¸ºæˆ‘è¦å…¼å®¹ iOS7, æ‰€ä»¥åœ¨ Xcode8 ä¸­, è‡ªå·±æ‰‹åŠ¨æ”¹ä¸ºäº† 7.0. æ­¥éª¤4: å…³é—­ Bitcode(å¯é€‰æ“ä½œ) æ­¥éª¤5: é…ç½®æ”¯æŒ HTTP(å¯é€‰æ“ä½œ) åœ¨ Info.plist ä¸­, æ·»åŠ å¦‚ä¸‹: ç”¨æˆ·æŽˆæƒè¯¢é—®ç”¨æˆ·æŽˆæƒçš„å®žçŽ° è¯¥å®žçŽ°å…¼å®¹äº† iOS7. 1234567891011121314+ (void)applyPushPermission &#123; UIApplication *application = [UIApplication sharedApplication]; if (MZSysVersion &lt;= 7.0) &#123; UIRemoteNotificationType nType = UIRemoteNotificationTypeAlert|UIRemoteNotificationTypeBadge|UIRemoteNotificationTypeSound; [application registerForRemoteNotificationTypes:nType]; &#125; else &#123; UIUserNotificationType nType = UIUserNotificationTypeBadge|UIUserNotificationTypeSound|UIUserNotificationTypeAlert; UIUserNotificationSettings *nSettings = [UIUserNotificationSettings settingsForTypes:nType categories:nil]; [application registerUserNotificationSettings:nSettings]; &#125;&#125; å…³äºŽç”¨æˆ·æŽˆæƒ, åˆ†å‡ ç§æƒ…å†µæ¥çœ‹å¾…. æƒ…æ™¯ä¸€. ç”¨æˆ·ä¸å…è®¸ APP æŽ¨é€, å³ä¸æŽˆæƒ. Appdelegate ä»£ç†è°ƒç”¨ 123456- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings &#123; MZLOG(@&quot;App push. notificationSettings: %@&quot;, notificationSettings); [application registerForRemoteNotifications];&#125; 1- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error error ä¿¡æ¯å¤§æ¦‚å¦‚ä¸‹: 12Error Domain=NSCocoaErrorDomain Code=3000 &quot;æœªæ‰¾åˆ°åº”ç”¨ç¨‹åºçš„â€œaps-environmentâ€çš„æŽˆæƒå­—ç¬¦ä¸²&quot;UserInfo=&#123;NSLocalizedDescription=æœªæ‰¾åˆ°åº”ç”¨ç¨‹åºçš„â€œaps-environmentâ€çš„æŽˆæƒå­—ç¬¦ä¸²&#125; æƒ…æ™¯äºŒ. ç”¨æˆ·å…è®¸æŽˆæƒäº†, åˆåˆ†ä¸ºä¸¤ç§æƒ…å†µ 1.ä½¿ç”¨å…·æœ‰ push åŠŸèƒ½çš„è¯ä¹¦ ä¸€å®šè¦æœ‰å¸¦æœ‰ push åŠŸèƒ½çš„è¯ä¹¦. ä»£ç†è°ƒç”¨ 123456- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings &#123; MZLOG(@&quot;App push. notificationSettings: %@&quot;, notificationSettings); [application registerForRemoteNotifications];&#125; è¿™ä¸ªæ–¹æ³•å¤§æ¦‚åœ¨ä¸Šé¢å›žè°ƒ 1s åŽæ‰ä¼šè°ƒç”¨. 12345678910111213- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken &#123; MZLOG(@&quot;App push. deviceToken: %@&quot;, deviceToken); // æ ¼å¼åŒ–è¯¥æ•°æ® NSString *deviceTokenStr = [NSString stringWithFormat:@&quot;%@&quot;, deviceToken]; deviceTokenStr = [deviceTokenStr stringByReplacingOccurrencesOfString:@&quot;&lt;&quot; withString:@&quot;&quot;]; deviceTokenStr = [deviceTokenStr stringByReplacingOccurrencesOfString:@&quot;&gt;&quot; withString:@&quot;&quot;]; deviceTokenStr = [deviceTokenStr stringByReplacingOccurrencesOfString:@&quot; &quot; withString:@&quot;&quot;]; MZLOG(@&quot;App push. deviceToken string: %@&quot;, deviceTokenStr); // å¯ä»¥ä¸Šä¼ è¯¥ token åˆ°è‡ªå·±çš„ä¸šåŠ¡æœåŠ¡å™¨&#125; åœ¨ didRegisterForRemoteNotificationsWithDeviceToken æ–¹æ³•ä¸­å¯ä»¥å¾—åˆ° deviceToken ä¿¡æ¯: æ³¨æ„: ä»£ç ä¸­å°† NSData çš„ deviceToken è½¬æ¢ä¸ºäº† NSString ç±»åž‹çš„æ•°æ®ç±»åž‹. 2.ä½¿ç”¨ä¸€èˆ¬çš„è¯ä¹¦, æ²¡æœ‰ push åŠŸèƒ½çš„è¯ä¹¦ è¿™ç§æƒ…å†µå’Œ æƒ…æ™¯ä¸€ ä¸€æ ·. æŽ¨é€ä¸‡äº‹ä¿±å¤‡, åªæ¬ ä¸œé£Žäº†. ä»Šå¤©æ²¡æœ‰å‡†å¤‡æ­å»ºä¸€ä¸ªè‡ªå·±çš„ä¸šåŠ¡æœåŠ¡å™¨åŽ»æŽ¨é€, å¯ä»¥ä½¿ç”¨æŽ¨é€å·¥å…·æ¥æ›¿ä»£. å®‰è£… NWPusher è¿™ä¸ªå·¥å…·, å¯ä»¥è¿›è¡ŒæŽ¨é€æµ‹è¯•. å®‰è£…æˆåŠŸåŽ, æ‰“å¼€è¿™ä¸ª Mac APP, å¡«å†™ç›¸å…³ä¿¡æ¯. ç‚¹å‡» push å³å¯æŽ¨é€. åœ¨ Appdelegate ä¸­çš„ä»£ç†å›žè°ƒä¸­, å¯ä»¥æ‰“å°æŽ¨é€å†…å®¹. 1234- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo &#123; MZLOG(@&quot;App push. userInfo: %@&quot;, userInfo);&#125; æŽ¨é€çš„å†…å®¹, å¦‚ä¸‹å›¾æ‰€ç¤º. 1234567&#123; aps = &#123; alert = &quot;Testing.. (6)&quot;; badge = 1; sound = default; &#125;;&#125; æŽ¨è1.æ´»ä¹…è§çš„é‡æž„ - iOS 10 UserNotifications æ¡†æž¶è§£æž 2.å›½å†… 90%ä»¥ä¸Šçš„ iOS å¼€å‘è€…ï¼Œå¯¹ APNs çš„è®¤è¯†éƒ½æ˜¯é”™çš„]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æŽ¨é€ APNs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS åŽå°æ¨¡å¼]]></title>
    <url>%2F2017%2F07%2F30%2FiOS-%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[åº”ç”¨çŠ¶æ€æ¥è‡ªè‹¹æžœå¼€å‘è€…æ–‡æ¡£ The App Life Cycle çš„å›¾. ä¸‹é¢è¿™å¼ å›¾è¯´æ˜Žäº†åº”ç”¨ç¨‹åºçš„çŠ¶æ€, å¦‚ä¸‹æ‰€ç¤º: å…·ä½“çš„è¯´ä¸€ä¸‹è¿™5ä¸­çŠ¶æ€: 1.Not running æœªè¿è¡Œ, ç¨‹åºæ²¡å¯åŠ¨æˆ–è€…è¢«ç³»ç»Ÿè¢«ç”¨æˆ·æ€æ­» 2.Inactive æœªæ¿€æ´», ç¨‹åºåœ¨å‰å°è¿è¡Œï¼Œä¸è¿‡æ²¡æœ‰æŽ¥æ”¶åˆ°äº‹ä»¶.åœ¨æ²¡æœ‰äº‹ä»¶å¤„ç†æƒ…å†µä¸‹ç¨‹åºé€šå¸¸åœç•™åœ¨è¿™ä¸ªçŠ¶æ€. 3.Active æ¿€æ´», ç¨‹åºåœ¨å‰å°è¿è¡Œè€Œä¸”æŽ¥æ”¶åˆ°äº†äº‹ä»¶.è¿™ä¹Ÿæ˜¯å‰å°çš„ä¸€ä¸ªæ­£å¸¸çš„æ¨¡å¼ 4.Backgroud åŽå°, ç¨‹åºåœ¨åŽå°è€Œä¸”èƒ½æ‰§è¡Œä»£ç ï¼Œå¤§å¤šæ•°ç¨‹åºè¿›å…¥è¿™ä¸ªçŠ¶æ€åŽä¼šåœ¨åœ¨è¿™ä¸ªçŠ¶æ€ä¸Šåœç•™ä¸€ä¼š.æ—¶é—´åˆ°ä¹‹åŽä¼šè¿›å…¥æŒ‚èµ·çŠ¶æ€(Suspended). æœ‰çš„ç¨‹åºç»è¿‡ç‰¹æ®Šçš„è¯·æ±‚åŽå¯ä»¥é•¿æœŸå¤„äºŽ Backgroud çŠ¶æ€. 5.Suspended æŒ‚èµ·, ç¨‹åºåœ¨åŽå°ä¸èƒ½æ‰§è¡Œä»£ç .ç³»ç»Ÿä¼šè‡ªåŠ¨æŠŠç¨‹åºå˜æˆè¿™ä¸ªçŠ¶æ€è€Œä¸”ä¸ä¼šå‘å‡ºé€šçŸ¥.å½“æŒ‚èµ·æ—¶, ç¨‹åºè¿˜æ˜¯åœç•™åœ¨å†…å­˜ä¸­çš„, å½“ç³»ç»Ÿå†…å­˜ä½Žæ—¶, ç³»ç»Ÿå°±æŠŠæŒ‚èµ·çš„ç¨‹åºæ¸…é™¤æŽ‰, ä¸ºå‰å°ç¨‹åºæä¾›æ›´å¤šçš„å†…å­˜. å…³äºŽ Backgroud çŠ¶æ€, æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è¯´çš„é‡ç‚¹éƒ¨åˆ†. å¤šä»»åŠ¡ä»‹ç»iOS çš„å¤šä»»åŠ¡æ˜¯åœ¨ iOS4 çš„æ—¶å€™è¢«å¼•å…¥çš„ï¼Œåœ¨æ­¤ä¹‹å‰ iOS çš„ APP éƒ½æ˜¯æŒ‰ä¸‹ Home é”®å°±è¢«å¹²æŽ‰äº†.iOS4 è™½ç„¶å¼•å…¥äº†åŽå°å’Œå¤šä»»åŠ¡ï¼Œä½†æ˜¯å®žé™…ä¸Šæ˜¯ä¼ªå¤šä»»åŠ¡ï¼Œä¸€èˆ¬çš„ APP åŽå°å¹¶ä¸èƒ½æ‰§è¡Œè‡ªå·±çš„ä»£ç ï¼Œåªæœ‰å°‘æ•°å‡ ç±»æœåŠ¡åœ¨é€šè¿‡æ³¨å†ŒåŽå¯ä»¥çœŸæ­£åœ¨åŽå°è¿è¡Œï¼Œå¹¶ä¸”åœ¨æäº¤åˆ° AppStore çš„æ—¶å€™ä¹Ÿä¼šè¢«ä¸¥æ ¼å®¡æ ¸æ˜¯å¦æœ‰è¶Šæƒè¡Œä¸ºï¼Œè¿™ç§é™åˆ¶ä¸»è¦æ˜¯å‡ºäºŽå¯¹äºŽè®¾å¤‡çš„ç»­èˆªå’Œå®‰å…¨ä¸¤æ–¹é¢è¿›è¡Œçš„è€ƒè™‘.ä¹‹åŽç»è¿‡iOS5 å’Œ iOS6 çš„é€æ¸å‘å±•ï¼ŒåŽå°èƒ½è¿è¡Œçš„æœåŠ¡çš„ç§ç±»è™½ç„¶å‡ºçŽ°äº†å¢žåŠ ï¼Œä½†æ˜¯ iOS åŽå°çš„æœ¬è´¨å¹¶æ²¡æœ‰å˜åŒ–.åœ¨iOS7ä¹‹å‰ï¼Œç³»ç»Ÿæ‰€æŽ¥å—çš„åº”ç”¨å¤šä»»åŠ¡å¯ä»¥å¤§è‡´åˆ†ä¸ºå‡ ç§ï¼š åŽå°å®ŒæˆæŸäº›èŠ±è´¹æ—¶é—´çš„ç‰¹å®šä»»åŠ¡. åŽå°æ’­æ”¾éŸ³ä¹ç­‰. ä½ç½®æœåŠ¡. IPç”µè¯(VOIP). Newsstand. iOS7 åŽå°ä»»åŠ¡ç”³è¯·çš„æœ€é•¿æ—¶é—´ 10åˆ†é’Ÿ.iOS8+ åŽå°ä»»åŠ¡ç”³è¯·æœ€é•¿æ—¶é—´ 3åˆ†é’Ÿ. ç¤ºä¾‹: APP é€€åˆ°åŽå°ä¼šè¢«æŒ‚èµ·ä»Šå¤©è·Ÿå¤§å®¶åˆ†äº«çš„æ˜¯ä¸€èˆ¬åº”ç”¨å¦‚ä½•åœ¨åŽå°å»¶é•¿ç”Ÿå‘½å‘¨æœŸçš„çŸ¥è¯†, å…³äºŽå…¶ä»–ç‰¹æ®Šçš„ App å¦‚ä¸Šé¢æåˆ°çš„5ä¸­æƒ…å†µ, ä¸æ˜¯ä»Šå¤©è®¨è®ºçš„é‡ç‚¹. æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªä¾‹å­, ä¾‹å­å¾ˆç®€å•. è¿™é‡Œè¦è¯´æ˜Žä¸€ä¸‹æ¦‚å¿µ, ç›´æŽ¥é”å±å’Œç‚¹å‡» Home é”®, éƒ½ä¼šå¯¼è‡´åº”ç”¨å¤„äºŽåŽå°æ¨¡å¼, è¿™é‡Œä¸ºäº†è¯´æ˜Žé—®é¢˜, ç»Ÿä¸€ç‚¹å‡» Home ä½œä¸ºä»£åè¯. 1234567891011121314151617181920212223242526272829- (void)viewDidLoad &#123; [super viewDidLoad]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:nil];&#125;- (void)onDidEnterBackground:(NSNotification *)notification &#123; MZLOG(@&quot;App Background. Enter onDidEnterBackground.&quot;); int delta = 1; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delta * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; MZLOG(@&quot;App Background. Enter onDidEnterBackground diapatch.&quot;); UILocalNotification *notification = [UILocalNotification new]; notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:3]; notification.alertBody = @&quot;èµ°, åŽ»highå§!&quot;; notification.soundName = UILocalNotificationDefaultSoundName; // å¯ä»¥è‡ªå®šä¹‰æ•°æ® notification.userInfo = @&#123;@&quot;user_info_key&quot;: @&quot;user_info_value_json_str&quot;&#125;; [[UIApplication sharedApplication] scheduleLocalNotification:notification]; &#125;);&#125; UIApplicationDidEnterBackgroundNotification å¯ä»¥ç›‘å¬åˆ°ç”¨æˆ·å°† APP é€€åˆ°åŽå°. å½“ APP é€€åˆ°åŽå°, ä¼šè°ƒç”¨ onDidEnterBackground è¿™ä¸ªæ–¹æ³•. åœ¨ onDidEnterBackground è¿™ä¸ªæ–¹æ³•ä¸­, æˆ‘æ•…æ„å»¶æ—¶æ‰§è¡Œä»£ç , è¿™é‡Œä½¿ç”¨çš„æ˜¯ dispatch_after. ç¼–è¯‘è¿è¡Œè¿™ä¸ªå·¥ç¨‹, è¿è¡ŒæˆåŠŸåŽ, å¯ä»¥ç‚¹å‡» Home é”®å°†åº”ç”¨é€€åˆ°åŽå°. å¯ä»¥åœ¨ Xcode çš„æŽ§åˆ¶å°çœ‹åˆ° App Background. Enter onDidEnterBackground. çš„æ‰“å°ä¿¡æ¯, ä½†æ˜¯è¿Ÿè¿Ÿä¸è§ dispatch_after é‡Œé¢çš„ä»£ç æ‰§è¡Œ. è¿™é‡Œè¯´æ˜Ž, APP é€€åˆ°åŽå°åŽè¢«ç³»ç»ŸæŒ‚èµ·äº†. å¦å¤–ä¸€ä¸ªä¾‹å­å°±æ˜¯ä½¿ç”¨ NSTimer, åœ¨ APP é€€åˆ°åŽå°åŽ, ä¹Ÿä¼šè¢«ç»ˆæ­¢. å®Œæ•´ä¾‹å­, ä¸€ä¼šåœ¨æ–‡ç« åŽå°é™„å½•ç»™å‡º. é€šè¿‡åŽå°æ¨¡å¼å»¶é•¿ APP è¿è¡Œä¸Šé¢çš„ä¾‹å­å……åˆ†è¯´æ˜Žäº†, åœ¨æˆ‘ä»¬æ²¡æœ‰åšä»»ä½•å¤„ç†çš„æƒ…å†µä¸‹, iOS ç³»ç»Ÿåœ¨ APP é€€åˆ°åŽå°çš„æƒ…å†µä¸‹, ä¼šè¢«ç³»ç»ŸæŒ‚èµ·, ä»Žè€Œç»ˆæ­¢ APP çš„ä»£ç è¡Œä¸º. ä¸‹é¢é€šè¿‡å®žä¾‹, æ¥å¼€å¯åŽå°ä»»åŠ¡, è®© APP å°½å¯èƒ½çš„å»¶é•¿å£°æ˜Žå‘¨æœŸ. åœ¨å·¥ç¨‹çš„åŸºç¡€ä¸Š, æ–°å»ºä¸€ä¸ªæ–‡ä»¶ MZBackgroundTask 1234@interface MZBackgroundTask : NSObject+ (instancetype)sharedTask;- (void)startTask;@end å…·ä½“å®žçŽ°, åªç»™å‡ºå…³é”®ä»£ç . 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677- (void)startTask &#123; if (![self _checkSupportBackgroundTask]) &#123; MZLOG(@&quot;BackgroundTask. Current device don&apos;t support backgroundTask.&quot;); return; &#125; UIApplication *application = [UIApplication sharedApplication]; __block UIBackgroundTaskIdentifier taskId; /// ç”³è¯·åŽå°æ‰§è¡Œ /// æ³¨æ„: åœ¨iOS7å’Œè¯¥ç‰ˆæœ¬å‰ï¼ŒåŽå°å¯ä»¥ç”¨ä¸‹é¢çš„çš„æ–¹å¼åœ¨åŽå°å­˜æ´»5-10åˆ†é’Ÿï¼Œåœ¨iOS8åŠåŽï¼Œæœ€å¤šå­˜æ´»3åˆ†é’Ÿ &#123; taskId = [application beginBackgroundTaskWithName:NSStringFromClass([self class]) expirationHandler:^&#123; MZLOG(@&quot;BackgroundTask. BackgroundTask is Over. The remained time: %f&quot;, application.backgroundTimeRemaining); [application endBackgroundTask:taskId]; taskId = UIBackgroundTaskInvalid; &#125;]; &#125; if (UIBackgroundTaskInvalid == taskId) &#123; MZLOG(@&quot;BackgroundTask. Apply backgroundTask failed.&quot;); return; &#125; /// å¯ä»¥ç›‘æŽ§åŽå°ä»»åŠ¡å‰©ä½™çš„æ—¶é—´, é’ˆå¯¹ä¸šåŠ¡å¯ä»¥åŽ»å¤„ç† &#123; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; __block NSTimeInterval remainedTime; while (true) &#123; // å‰©ä½™å¯ä»¥åŽå°æ‰§è¡Œçš„æ—¶é—´ dispatch_async(dispatch_get_main_queue(), ^&#123; // application.backgroundTimeRemaining å¿…é¡»åœ¨ä¸»çº¿ç¨‹èŽ·å– remainedTime = application.backgroundTimeRemaining; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; MZLOG(@&quot;BackgroundTask. The remained time: %f&quot;, remainedTime); if (remainedTime &lt; 10) &#123; // å¯ä»¥å‘Šè¯‰å…¶ä»–ä¸šåŠ¡, åŽå°ç”³è¯·çš„æ—¶é—´å³å°†ç»“æŸäº† &#125; if (remainedTime &lt; 2) &#123; /// è¿™é‡Œå¯ä»¥åšä¸€äº›æ¸…é™¤å·¥ä½œ &#123; // clean up &#125; [application endBackgroundTask:taskId]; taskId = UIBackgroundTaskInvalid; return; &#125; // ç¡çœ (å»¶æ—¶)1s [NSThread sleepForTimeInterval:1.f]; &#125;); &#125;); &#125; &#125;); &#125;&#125; startTask å¼€å¯åŽå°ä»»åŠ¡. åœ¨ AppDelegate ä¸­, è°ƒç”¨è¿™ä¸ªæ–¹æ³•. 1234- (void)applicationDidEnterBackground:(UIApplication *)application &#123; [[MZBackgroundTask sharedTask] startTask];&#125; å†æ¬¡è¿è¡Œå·¥ç¨‹, å¯ä»¥æ ¹æ®æ—¥å¿—çœ‹å‡º, ä¹‹å‰çš„ dispatch_after å’Œ timer å¯ä»¥è¿è¡Œäº†, å¹¶ä¸”å¯ä»¥è¿è¡Œ3åˆ†é’Ÿ(180s). æ ¹æ® backgroundTimeRemaining è¿™ä¸ªå±žæ€§, å¯ä»¥çœ‹å‡ºå…·ä½“çš„åŽå°å¯æ‰§è¡Œçš„å‰©ä½™æ—¶é—´. æ³¨æ„: æˆ‘æµ‹è¯•çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ iOS10 è®¾å¤‡. åŽè®°é™¤äº†è‹¹æžœè§„å®šçš„å‡ ç§ç±»åž‹(å¦‚å®šä½, å½•éŸ³, VOIP ç­‰)çš„åº”ç”¨å¤–, å…¶ä»– APP æƒ³ç”³è¯·æ›´å¤šçš„åŽå°é©»ç•™æ—¶é—´, å°±éœ€è¦ä¸€äº› æ—é—¨å·¦é“ çš„æ–¹æ³•äº†. è‹¹æžœå¯¹åŽå°æ“ä½œåšäº†è¿™ä¹ˆå¤šé™åˆ¶, ä¹Ÿæ˜¯ä»Žç”¨æˆ·çš„è§’åº¦å‡ºå‘, å¦‚å®‰å…¨, çœç”µ, çœæµé‡ç­‰. æ¯”å¦‚, åœ¨åŽå°æ’­æ”¾æ²¡æœ‰å£°éŸ³çš„éŸ³ä¹. å†æ¯”å¦‚, ç”³è¯·å®šä½æœåŠ¡çš„æƒé™, è¿™æ ·ä¹Ÿå¯ä»¥ä¿æŒ APP åœ¨åŽå°ä¸è¢«æŒ‚èµ·.ä½†æ˜¯, ä¾ç…§è‹¹æžœä¸€è´¯çš„å®¡æ ¸åšæ³•æ¥çœ‹ï¼Œå¦‚æžœå£°æ˜Žäº†éœ€è¦æŸé¡¹åŽå°æƒé™ï¼Œä½ å´æ²¡æœ‰ç›¸å…³å®žçŽ°çš„è¯ï¼Œä¼šç›´æŽ¥è¢«æ‹’æŽ‰çš„. è¿™äº›æ˜¯æŠ€æœ¯ä¸Šçš„å®žçŽ°, æˆ‘æ²¡æœ‰æŽ¨èå¤§å®¶è¿™ä¹ˆå¹², çŽ°åœ¨è‹¹æžœå®¡æ ¸æ¯”ä»¥å‰è¿˜è¦ä¸¥æ ¼, å¤§å®¶è¿˜æ˜¯æ‚ ç€ç‚¹å¹²å§.å¦‚æžœä½ çš„ APP ä¸éœ€è¦ä¸Šæž¶åˆ° AppStore çš„è¯, å°±å°½æƒ…çš„æ”¾çºµå§â€¦ æŽ¨èåšæ–‡1.iOSå®žçŽ°æ— é™åŽå°backgroundçš„æ–¹æ³• 2.WWDC 2013 Sessionç¬”è®° - iOS7ä¸­çš„å¤šä»»åŠ¡ iOS åœ¨åŽå°çš„æ—¶å€™å¦‚æžœä¸ä½¿ç”¨åŽå°æ¨¡å¼, socket ä¹Ÿä¼šè¢«ç³»ç»Ÿå…³é—­è¿žæŽ¥, æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨çš„ IM åŠŸèƒ½.ä½¿ç”¨åŽå°æ¨¡å¼åŽ, å‘ç³»ç»Ÿç”³è¯·çš„æ—¶é—´(3åˆ†é’Ÿå†…), socket è¿˜æ˜¯æ²¡æœ‰è¢«å…³é—­çš„, é™¤éžæ–­ç½‘æˆ–è€…è¢«è·¯ç”±å™¨ç»™æ–­å¼€äº†, åœ¨ç”³è¯·çš„è¿™æ®µæ—¶é—´å†…, socekt è¿˜æ˜¯å¯ä»¥ä½¿ç”¨çš„, å¦‚æžœæƒ³æŒç»­çš„ä¿æŒ socket è¿žæŽ¥, å°±éœ€è¦åŽ»äº†è§£ä¸€ä¸‹ VOIP Socket ç›¸å…³çš„çŸ¥è¯†äº†, å®žè·µè¿‡åŽ, åˆ†äº«ç»™å¤§å®¶. é™„å½•ä¸‹é¢æ˜¯å…·ä½“çš„å®žçŽ°ä»£ç . ViewController.m 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061@interface ViewController ()@property (nonatomic, strong) NSTimer *timer;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:nil]; // æ¯éš”ä¸€ç§’æ‰§è¡Œä¸€æ¬¡ _timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(onTimerDidRun:) userInfo:nil repeats:YES]; [[NSRunLoop currentRunLoop] addTimer:self.timer forMode:NSRunLoopCommonModes];&#125;#pragma mark - Callback.- (void)onTimerDidRun:(id)sender &#123; MZLOG(@&quot;App Background. Timer Running.&quot;);&#125;- (void)onDidEnterBackground:(NSNotification *)notification &#123; MZLOG(@&quot;App Background. Enter onDidEnterBackground.&quot;); int delta = 1; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delta * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; MZLOG(@&quot;App Background. Enter onDidEnterBackground diapatch.&quot;); UILocalNotification *notification = [UILocalNotification new]; notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:3]; notification.alertBody = @&quot;èµ°, åŽ»highå§!&quot;; notification.soundName = UILocalNotificationDefaultSoundName; // å¯ä»¥è‡ªå®šä¹‰æ•°æ® notification.userInfo = @&#123;@&quot;user_info_key&quot;: @&quot;user_info_value_json_str&quot;&#125;; [[UIApplication sharedApplication] scheduleLocalNotification:notification]; &#125;);&#125;#pragma mark - SetupViews.- (void)_setupViews &#123; self.view.backgroundColor = [UIColor purpleColor]; &#125; MZBackgroundTask.m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107#import &quot;MZBackgroundTask.h&quot;@implementation MZBackgroundTask+ (instancetype)sharedTask &#123; static MZBackgroundTask *_task; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _task = [[self alloc] init]; &#125;); return _task;&#125;- (void)startTask &#123; if (![self _checkSupportBackgroundTask]) &#123; MZLOG(@&quot;BackgroundTask. Current device don&apos;t support backgroundTask.&quot;); return; &#125; UIApplication *application = [UIApplication sharedApplication]; __block UIBackgroundTaskIdentifier taskId; /// ç”³è¯·åŽå°æ‰§è¡Œ /// æ³¨æ„: åœ¨iOS7å’Œè¯¥ç‰ˆæœ¬å‰ï¼ŒåŽå°å¯ä»¥ç”¨ä¸‹é¢çš„çš„æ–¹å¼åœ¨åŽå°å­˜æ´»5-10åˆ†é’Ÿï¼Œåœ¨iOS8åŠåŽï¼Œæœ€å¤šå­˜æ´»3åˆ†é’Ÿ &#123; taskId = [application beginBackgroundTaskWithName:NSStringFromClass([self class]) expirationHandler:^&#123; MZLOG(@&quot;BackgroundTask. BackgroundTask is Over. The remained time: %f&quot;, application.backgroundTimeRemaining); [application endBackgroundTask:taskId]; taskId = UIBackgroundTaskInvalid; &#125;]; &#125; if (UIBackgroundTaskInvalid == taskId) &#123; MZLOG(@&quot;BackgroundTask. Apply backgroundTask failed.&quot;); return; &#125; /// å¯ä»¥ç›‘æŽ§åŽå°ä»»åŠ¡å‰©ä½™çš„æ—¶é—´, é’ˆå¯¹ä¸šåŠ¡å¯ä»¥åŽ»å¤„ç† &#123; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; __block NSTimeInterval remainedTime; while (true) &#123; // å‰©ä½™å¯ä»¥åŽå°æ‰§è¡Œçš„æ—¶é—´ dispatch_async(dispatch_get_main_queue(), ^&#123; // application.backgroundTimeRemaining å¿…é¡»åœ¨ä¸»çº¿ç¨‹èŽ·å– remainedTime = application.backgroundTimeRemaining; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; MZLOG(@&quot;BackgroundTask. The remained time: %f&quot;, remainedTime); if (remainedTime &lt; 10) &#123; // å¯ä»¥å‘Šè¯‰å…¶ä»–ä¸šåŠ¡, åŽå°ç”³è¯·çš„æ—¶é—´å³å°†ç»“æŸäº† &#125; if (remainedTime &lt; 2) &#123; /// è¿™é‡Œå¯ä»¥åšä¸€äº›æ¸…é™¤å·¥ä½œ &#123; // clean up &#125; [application endBackgroundTask:taskId]; taskId = UIBackgroundTaskInvalid; return; &#125; // ç¡çœ (å»¶æ—¶)1s [NSThread sleepForTimeInterval:1.f]; &#125;); &#125;); &#125; &#125;); &#125;&#125;#pragma mark - Private./** * å½“å‰è®¾å¤‡æ˜¯å¦æ”¯æŒåŽå°ä»»åŠ¡. * * @return YES, æ”¯æŒåŽå°ä»»åŠ¡. å¦åˆ™, ä¸æ”¯æŒåŽå°ä»»åŠ¡. */- (BOOL)_checkSupportBackgroundTask &#123; SEL sel = @selector(isMultitaskingSupported); BOOL supportBTask = [[UIDevice currentDevice] respondsToSelector:sel]; return supportBTask;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>åŽå°æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ Charles]]></title>
    <url>%2F2017%2F07%2F23%2F%E4%BD%BF%E7%94%A8-Charles%2F</url>
    <content type="text"><![CDATA[æ¦‚è¦Charles æ˜¯ Mac ä¸Šé¢æ¯”è¾ƒå¥½ç”¨çš„æŠ“åŒ…å·¥å…·. åœ¨ä½¿ç”¨å¾®ä¿¡ç™»å½• SDK çš„æ—¶å€™, æˆ‘æƒ³çœ‹çœ‹å¾®ä¿¡è¯·æ±‚çš„å†…å®¹, ä»¥åŠå…¶æŽˆæƒè¿‡ç¨‹, å‘çŽ°åªè¦è¿žæŽ¥ Charles, è·³è½¬åˆ°å¾®ä¿¡ä¹‹åŽæ— æ³•æ‰“å¼€å¾®ä¿¡çš„æŽˆæƒç™»å½•é¡µé¢, æç¤ºç½‘ç»œä¸å¯ç”¨. ç»è¿‡ç ”ç©¶, æ˜¯éœ€è¦ä½¿ç”¨ Charles é…ç½® HTTPS, é…ç½®å®ŒæˆåŽ, å°±å¯ä»¥éšå¿ƒæ‰€æ¬²äº†. æ‰€ä»¥, ä»Šå¤©è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ Charles ä½¿ç”¨çš„ä¸¤ä¸ªç‚¹: Charles çš„ HTTPS é…ç½®. ä½¿ç”¨ Charles æ¨¡æ‹Ÿ(æ…¢)ç½‘ç»œ. å·¥å…·å’Œç³»ç»Ÿ iPhone: iOS 10.3. Mac OS: 10.12.5. Charles: 4.0.2. æŠ“å– HTTPS è¯·æ±‚1.Mac å®‰è£…è¯ä¹¦ æ‰“å¼€ Charles, åœ¨ Help é€‰é¡¹ä¸­é€‰æ‹© SSL Proxying, å¦‚ä¸‹å›¾æ‰€ç¤º: 2.Mac ä¿¡ä»»è¯ä¹¦ æ‰“å¼€ Keychain Access (é’¥åŒ™ä¸²), æ‰¾åˆ°åˆšæ‰å®‰è£…çš„è¯ä¹¦, ä¿¡ä»»è¯ä¹¦, å¦‚å›¾: 3.ç»™ iPhone å®‰è£…è¯ä¹¦ æ‰“å¼€ Charles, åœ¨ Help é€‰é¡¹ä¸­é€‰æ‹© SSL Proxying, æ“ä½œå¦‚å›¾: åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­, å¯ä»¥çœ‹åˆ° chls.pro/ssl æ‰‹æœºè®¾ç½®ä»£ç†, è¿žæŽ¥ Charles ä¸€å®šè¦è®°ä½: æ‰‹æœºä¸€å®šè¦è®¾ç½®ä»£ç†, å¦åˆ™å®‰è£…è¯ä¹¦ä¼šå¤±è´¥. æ‰“å¼€æ‰‹æœºçš„ Safari æµè§ˆå™¨, è¾“å…¥ chls.pro/ssl è¿™ä¸ªåœ°å€. è®¾ç½®ä¿¡ä»»è¯ä¹¦, å¦‚ä¸‹å›¾: æ¨¡æ‹Ÿä»»æ„ç½‘ç»œCharles ç»™æˆ‘ä»¬æä¾›äº†å¯ä»¥æ¨¡æ‹Ÿä»»ä½•ç½‘é€Ÿçš„ç½‘ç»œçŽ¯å¢ƒçš„æ¡ä»¶. æ‰“å¼€ Throttle Settings, ç„¶åŽ Enable Throttling å¯ä»¥çœ‹åˆ°å¾ˆå¤šç±»åž‹çš„ç½‘ç»œä¾›ä½ é€‰æ‹©. Add Preset å¯ä»¥è‡ªå·±è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œçŽ¯å¢ƒ. è¿™ä¸ªåŠŸèƒ½éžå¸¸å®žç”¨, å¯ä»¥è®©æˆ‘ä»¬æ¨¡æ‹Ÿæ…¢ç½‘ç»œçŽ¯å¢ƒ, æ›´å¥½åœ°è°ƒè¯•è‡ªå·±çš„ç¨‹åº. é‡åˆ°éº»çƒ¦1.æŠ“å– HTTPS çš„è¯·æ±‚å‡ºçŽ°é”™è¯¯ é”™è¯¯æ—¥å¿—å¦‚ä¸‹: 123SSLHandshake: Received fatal alert: unknown_caCharles Proxy will even offer a helpful suggestion:You may need to configure your browser or application to trust the Charles Root Certificate. See SSL Proxying in the Help menu. è¿™ç§é”™è¯¯ä¸€èˆ¬æ˜¯å‡ºçŽ°åœ¨ iOS10 ä¸Šé¢. è¯·åœ¨å…³äºŽæœ¬æœºé‡Œé¢å†è®¾ç½®ä¸€æ¬¡ è¯ä¹¦ä¿¡ä»»è®¾ç½®, å³å¯. 2.ç³»ç»Ÿå‡çº§åŽ, è®¾ç½®çš„ HTTPS æŠ“åŒ…å¤±æ•ˆ æŒ‰ç…§ä¸Šè¿°æ–¹æ³•, é‡æ–°è®¾ç½®ä¸€æ¬¡å³å¯.]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Charles MacOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cocos2d-js: åœ¨ iOS ä¸Šè¿è¡Œ]]></title>
    <url>%2F2017%2F07%2F23%2FCocos2d-js-%E5%9C%A8-iOS-%E4%B8%8A%E8%BF%90%E8%A1%8C%2F</url>
    <content type="text"><![CDATA[åœ¨æˆ‘çš„åšæ–‡ Cocos2d-js: é¦–æ¬¡åœ¨ Mac ä¸Šé¢è¿è¡Œ è¿™ç¯‡æ–‡ç« ä¸­, ä»‹ç»äº† Cocos2d ç›¸å…³çš„çŸ¥è¯†, å¹¶ä¸”ä½¿ç”¨Cocos2dx åˆ›å»ºäº†ä¸€ä¸ª JS çš„ç®€å•æ¸¸æˆé¡¹ç›®. ä»Šå¤©è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹, å¦‚ä½•åœ¨ ios è®¾å¤‡ä¸Šé¢è¿è¡Œä¸€ä¸ª JS æ¸¸æˆé¡¹ç›®. è¯¥æ¸¸æˆé¡¹ç›®(è´ªåƒè›‡)æ¥è‡ªç½‘ç»œèµ„æº, åªä¾›æ¼”ç¤ºä½¿ç”¨, ä¸æä¾›ä»»ä½•å…³äºŽæ¸¸æˆçš„èµ„æº. å½“åˆçš„æƒ³å½“ç„¶åœ¨ Mac ä¸Šé¢ so easy çš„ç¼–è¯‘å¹¶è¿è¡Œäº† JS æ¸¸æˆ, æˆ‘æƒ³åœ¨ iOS è®¾å¤‡ä¸Šåº”è¯¥ä¹Ÿå¾ˆç®€å•çš„å°±å¯ä»¥è¿è¡Œèµ·æ¥, ä½†æ˜¯æˆ‘å‘çŽ°æˆ‘ç®€å•ä¸åŠ æ€è€ƒçš„æƒ³æ³•, æ˜¯è¡Œä¸é€šçš„. åšæ–‡ Cocos2d-js: é¦–æ¬¡åœ¨ Mac ä¸Šé¢è¿è¡Œ åœ¨ FireFox æµè§ˆå™¨ä¸Šé¢å¯ä»¥ç›´æŽ¥è¿è¡Œ index.html, ä½†æ˜¯åœ¨ Chrome æµè§ˆå™¨ä¸Šé¢å°±æ²¡é‚£ä¹ˆé¡ºåˆ©. æƒ³åˆ°è¿™é‡Œ, æˆ‘å°±å—åˆ°äº†å¯å‘, èŽ«éž iOS è®¾å¤‡ä¸Šé¢éœ€è¦è‡ªå·±æ­å»ºä¸€å¥— Web Server? æ­å»º Web Serveræ—¢ç„¶æƒ³åˆ°äº†è¿™ä¸€æ­¥, æŽ¥ä¸‹æ¥å°±æ˜¯æ‰¾æ–¹æ¡ˆå®žæ–½äº†. CocoaHTTPServer è¿™ä¸ªå¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚, äºŽæ˜¯, æˆ‘å°±ç›´æŽ¥æ‹¿æ¥ä½¿ç”¨äº†. é¡¹ç›®ä¸­, æˆ‘ä½¿ç”¨äº† Cocoapods æ¥ç®¡ç†ç¬¬ä¸‰æ–¹åº“.åœ¨ podfile ä¸­ç›´æŽ¥æ·»åŠ ä¸‹é¢çš„ä»£ç : 1pod &apos;CocoaHTTPServer&apos;, &apos;~&gt; 2.3&apos; ç„¶åŽ pod install å³å¯. 1.åœ¨ ViewController ä¸­å¯¼å…¥å¤´æ–‡ä»¶ 1234567891011#import &lt;HTTPServer.h&gt;ViewController å£°æ˜Žéƒ¨åˆ†@interface ViewController () &lt;WKNavigationDelegate&gt;@property (nonatomic, strong) WKWebView *webView;@property (nonatomic, strong) HTTPServer *localHttpServer;@property (nonatomic, strong) WKWebViewConfiguration *wbConfig;//ç”¨äºŽè°ƒè¯•çš„ UILabel@property (nonatomic, strong) IBOutlet UILabel *loadingLb;@property (nonatomic, assign) BOOL startServerSuccess;@end 2.é…ç½® Web Server æ ¸å¿ƒå®žçŽ°å¦‚ä¸‹: 12345678910111213141516171819202122232425262728293031323334353637383940 - (void)_configLocalHttpServer&#123; NSString *webPath = [[NSBundle mainBundle] pathForResource:@&quot;crazySnake&quot; ofType:nil]; _localHttpServer = [[HTTPServer alloc] init]; [_localHttpServer setType:@&quot;_http.tcp&quot;]; NSFileManager *fileManager = [[NSFileManager alloc] init]; NSLog(@&quot;%@&quot;, webPath); if (![fileManager fileExistsAtPath:webPath]) &#123; NSLog(@&quot;File path error!&quot;); &#125; else &#123; NSString *webLocalPath = webPath; [_localHttpServer setDocumentRoot:webLocalPath]; NSLog(@&quot;webLocalPath:%@&quot;, webLocalPath); [self _startWebServer]; &#125;&#125;- (void)_startWebServer&#123; self.loadingLb.hidden = NO; NSError *error; if ([_localHttpServer start:&amp;error]) &#123; NSLog(@&quot;Started HTTP Server on port %hu&quot;, [_localHttpServer listeningPort]); self.port = [NSString stringWithFormat:@&quot;%d&quot;, [_localHttpServer listeningPort]]; self.loadingLb.text = @&quot;Start Server Successfully.&quot;; _startServerSuccess = YES; &#125; else &#123; NSLog(@&quot;Error starting HTTP Server: %@&quot;, error); self.loadingLb.text = @&quot;Start Server failed.&quot;; _startServerSuccess = NO; &#125;&#125; _configLocalHttpServer æ˜¯é…ç½® HTTPServer çš„æ–¹æ³•, _startWebServer æ˜¯å¼€å¯ Web Server çš„æ–¹æ³•. è¿™æ ·è°ƒç”¨ _configLocalHttpServer å°±å¯ä»¥å¼€å¯åœ¨è®¾å¤‡ä¸Šé¢å¼€å¯ä¸€ä¸ª Web Server äº†. Xcode å¯¼å…¥ JS æ¸¸æˆé¡¹ç›®é¦–å…ˆçœ‹ä¸€ä¸‹æˆ‘çš„å·¥ç¨‹å’Œèµ„æºç›®å½•ç»“æž„, å¦‚å›¾: ä»”ç»†çœ‹ä¸€ä¸‹, crazySnake è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯è“è‰²çš„, ä¸æ˜¯é»„è‰²çš„. è¿™é‡Œç‰¹åˆ«æ³¨æ„, å¯¼å…¥è¿™ä¸ª crazySnake æ–‡ä»¶å¤¹çš„æ—¶å€™, Options ä¸€å®šè¦é€‰æ‹© Create folder reference. ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåš? ç»†å¿ƒçš„æœ‹å‹å¯ä»¥å‘çŽ°, ä½¿ç”¨ Create folder referenceå¯¼å…¥çš„æ–‡ä»¶å¤¹, åœ¨é¡¹ç›®æ‰“åŒ…ç”Ÿæˆçš„ archive çš„æ–‡ä»¶ä¸­(è‡ªå·±å¯ä»¥è§£åŽ‹çœ‹)æ˜¯å¯ä»¥çœ‹åˆ° crazySnake è¿™ä¸ªæ–‡ä»¶å¤¹çš„, å¦‚æžœä¸æ˜¯è¿™ç§æ–¹å¼, è€Œæ˜¯ä½¿ç”¨ Create groups æ–¹å¼(åœ¨ Xcode ä¸­æ˜¾ç¤ºé»„è‰²), åœ¨ archive ä¸­æ˜¯çœ‹ä¸åˆ° crazySnake è¿™ä¸ªæ–‡ä»¶å¤¹çš„, è€Œæ˜¯å°†é‡Œé¢çš„æ–‡ä»¶æ‰“æ•£æ”¾åœ¨ archive çš„æ ¹ç›®å½•ä¸‹é¢äº†. æ€»ä¹‹, ä¸€å¥è¯, Create folder reference æ–¹å¼å¯¼å…¥çš„æ–‡ä»¶å¤¹åœ¨æ‰“åŒ…åŽè¿˜æ˜¯åŽŸæ¥çš„æ–‡ä»¶å¤¹, ä¸ä¼šå°†æ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶æ‰“æ•£. è¯•æƒ³ä¸€ä¸‹, å¦‚æžœå¤šåŠ å…¥å‡ ä¸ªè¿™æ ·çš„ç›®å½•, éƒ½æ‰“æ•£åœ¨æ ¹ç›®å½•ä¸‹é¢, æˆ‘ä»¬å°±ä¸å¥½ç®¡ç†è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶äº†. é…ç½® WKWebView è¿™é‡Œæˆ‘ä½¿ç”¨äº† WKWebView è€Œä¸æ˜¯ UIWebView ä½œä¸ºåŠ è½½ HTML çš„å®¹å™¨.å½“ç„¶, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ UIWebView. ä¸»è¦çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253- (void)viewDidLoad&#123; [super viewDidLoad]; self.navigationController.navigationBarHidden = YES; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; self.loadingLb.text = @&quot;Config server...&quot;; [self _configLocalHttpServer]; &#125;); /// å¢žåŠ çš„è°ƒå¼æ–¹æ³•: å¯ä»¥é‡æ–°å¯åŠ¨ web server. &#123; SEL sel = @selector(_configLocalHttpServer); UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:sel]; [self.loadingLb addGestureRecognizer:gesture]; self.loadingLb.userInteractionEnabled = YES; &#125;&#125;- (void)viewDidAppear:(BOOL)animated&#123; [super viewDidAppear:animated]; // é…ç½® WKWebView dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; _wbConfig = [[WKWebViewConfiguration alloc] init]; self.wbConfig.userContentController = [[WKUserContentController alloc] init]; _webView = [[WKWebView alloc] initWithFrame:self.view.bounds configuration:self.wbConfig]; _webView.frame = self.view.bounds; _webView.scrollView.showsHorizontalScrollIndicator = NO; _webView.scrollView.showsVerticalScrollIndicator = NO; [self.view addSubview:self.webView]; self.webView.frame = self.view.bounds; self.webView.navigationDelegate = self; if (self.startServerSuccess) &#123; self.loadingLb.hidden = YES; NSString *gameUrl = [[NSBundle mainBundle] pathForResource:@&quot;index&quot; ofType:@&quot;html&quot; inDirectory:@&quot;crazySnake&quot;]; NSURL *url = [NSURL fileURLWithPath:gameUrl]; url = [NSURL URLWithString:[NSString stringWithFormat:@&quot;http://127.0.0.1:%@/index.html&quot;, self.port]]; [self.webView loadRequest:[NSURLRequest requestWithURL:url]]; &#125; &#125;);&#125; ä»£ç å¾ˆç®€å•, å°±æ˜¯ä½¿ç”¨ WKWebView åŠ è½½ä¸€ä¸ª HTML æ–‡ä»¶å¹¶å¯åŠ¨ Web Server. è¿è¡Œé¡¹ç›®æŽ¥ä¸‹æ¥, å°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»äº†â€¦ ä¸Šé¢é…ç½®äº† Web Server å’Œ åŠ è½½ html çš„ WKWebView, çŽ°åœ¨å¯ä»¥ç›´æŽ¥è¿è¡Œé¡¹ç›®çœ‹æ•ˆæžœäº†. æ— è®ºä½ æ˜¯åœ¨æ¨¡æ‹Ÿå™¨è¿˜æ˜¯åœ¨çœŸæœºä¸Šé¢éƒ½å¯ä»¥è¿è¡Œè¿™ä¸ª JS æ¸¸æˆé¡¹ç›®äº†. å†™åœ¨æœ€åŽä¸Šé¢çš„ä¾‹å­æœ¬äººäº²è‡ªå®žè·µè¿‡çš„, ç»™å¤§å®¶æä¾›äº†ä¸€ä¸ªå®žçŽ°æ€è·¯, ç®—æ˜¯æŠ›ç –å¼•çŽ‰. å¦‚æžœæƒ³åšå¥½è¿™ä¸ªæ¨¡å¼, è¿˜éœ€è¦å¾ˆå¤šå·¥ä½œè¦åš, è¿™é‡Œåˆ—å‡ºæ¥ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹. 1.æ¸¸æˆèµ„æºåŒ…ç®¡ç†å’Œä¸‹è½½.2.æ¸¸æˆä¸­éœ€è¦å’Œ Native çš„äº¤äº’é€»è¾‘.3.æ•°æ®åŠ å¯†.4.ç§»åŠ¨ç«¯æ¸¸æˆæœ¬èº«çš„åŠ è½½ä¼˜åŒ–. å¦‚æžœä½ æœ‰æ›´å¥½çš„æ–¹æ¡ˆå’Œæƒ³æ³•, æˆ‘å¾ˆä¹æ„é‚®ä»¶ (veryitman@126.com) ä¸Žä½ æ²Ÿé€š, éžå¸¸æ„Ÿè°¢! ä»£ç ç¤ºä¾‹æˆ‘æ”¾åœ¨äº† GitHub, ç‚¹å‡» MZMWPlay å‰å¾€ä¸‹è½½ä½“éªŒ.]]></content>
      <categories>
        <category>Game</category>
      </categories>
      <tags>
        <tag>cocos Cocos2d-js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android: Chrome è°ƒè¯• WEB é¡µé¢]]></title>
    <url>%2F2017%2F06%2F01%2FAndroid-Chrome-%E8%B0%83%E8%AF%95-WEB-%E9%A1%B5%E9%9D%A2%2F</url>
    <content type="text"><![CDATA[å¼•è¨€åœ¨ Mac OS ä¸Šé¢é€šè¿‡ Safari è°ƒè¯• iOS è®¾å¤‡æˆ–è€…æ¨¡æ‹Ÿå™¨çš„ WEB é¡µé¢, æ¯”è¾ƒæ–¹ä¾¿. å…³äºŽå…·ä½“å¦‚ä½•ä½¿ç”¨ Safari æ¥è°ƒè¯• iOS è®¾å¤‡, å¯ä»¥å‚è€ƒ [Safari çš„å¼€å‘è€…æ¨¡å¼] è¿™ç¯‡æ–‡ç« . è‡ªä»Žè¸ä¸Šå¼€å‘çš„é“è·¯, ç”µè„‘ä¸Šå°±å®‰è£…äº† Chrome æµè§ˆå™¨, å¹¶ä¸”ä¸€ç›´ä¿æŒç€æ›´æ–°, Chrome ä»¥å…¶ç®€å•è®¾è®¡å’Œé«˜æ•ˆçš„ç”¨æ³•å¸å¼•äº†å¤§æ‰¹å¼€å‘è€…. ä½¿ç”¨ Chrome è°ƒè¯• Android è®¾å¤‡çš„ WEB é¡µé¢, æ˜“å¦‚åæŽŒ. Chrome è°ƒè¯•æ¡ä»¶ä½¿ç”¨è¿™é¡¹æŠ€èƒ½çš„æ¡ä»¶å¦‚ä¸‹: 1.Android è®¾å¤‡ç³»ç»Ÿæœ€ä½Žä¸º4.4, ä¹Ÿå°±æ˜¯ android-19 2.Chrome æœ€å¥½ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„, ä»¥å‰çš„ç‰ˆæœ¬ä¸æ”¯æŒ, æœ€ä½Žå…¼å®¹ç‰ˆæœ¬ç›®å‰å°šä¸æ¸…æ¥š. 3.é…ç½® Android WebView, ä½¿å…¶æ”¯æŒ Debug å’Œä½¿èƒ½ JavaScript åŠŸèƒ½. 4.è®¾å¤‡å’Œ PC é€šè¿‡ USB è¿žæŽ¥æ­£å¸¸, ä¸”æ”¯æŒ USB è°ƒè¯•çš„. æˆ‘ç›®å‰ä½¿ç”¨çš„è®¾å¤‡å’Œ Chrome ç‰ˆæœ¬ä¿¡æ¯å¦‚ä¸‹: Android è®¾å¤‡: 5.1.1ç‰ˆæœ¬Chrome: Version 58.0.3029.110 (64-bit) æˆ‘ä»¬åœ¨åœ°å€æ ä¸­è¾“å…¥: 1chrome://inspect å°±å¯ä»¥æ‰“å¼€è®¾å¤‡åˆ—è¡¨ç•Œé¢. å¯ä»¥çœ‹åˆ°æˆ‘çš„ Android è®¾å¤‡å·²ç»æ˜¾ç¤ºå‡ºæ¥äº†. ä¸‹é¢ä¸¾ä¸ªä¾‹å­è¯´æ˜Žè¯¥è°ƒè¯•å·¥å…·çš„ä½¿ç”¨. ç®€å•çš„ Android å·¥ç¨‹ç¤ºä¾‹è¯¥å·¥ç¨‹åªæœ‰ä¸€ä¸ª Activity, ä½¿ç”¨ WebView åŠ è½½æœ¬åœ° HTML æ–‡ä»¶. 1. åˆ›å»º assets ç›®å½•å·¥ç¨‹åˆ‡æ¢åˆ° Project Files è§†å›¾ è¿™æ ·å°±å¯ä»¥åœ¨ src/main ç›®å½•ä¸‹æ–°å»ºäº† assets æ–‡ä»¶å¤¹äº†. 2. åˆ›å»º HTML æ–‡ä»¶ è¯¥ HTML æ–‡ä»¶, å‘½åä¸º local.html, æ”¾åœ¨ assets ç›®å½•ä¸‹é¢. local.html æºæ–‡ä»¶: 12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;button onclick=&quot;myFunction()&quot;&gt;Click me&lt;/button&gt;&lt;p id=&quot;demo&quot;&gt;&lt;/p&gt;&lt;p&gt;A function is triggered when the button is clicked.&lt;/p&gt;&lt;script&gt; function myFunction() &#123; console.log(&apos;js console.&apos;); &#125;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.åœ¨ Activity ä¸­é…ç½® WebView.Activity.java æºæ–‡ä»¶ 12345678910111213141516171819202122232425262728public class MZWebPage extends AppCompatActivity &#123; private WebView webView; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_mzweb_page); webView = (WebView) this.findViewById(R.id.ui_web_view); // è®¾ç½® WebView çš„ Debug ä¸ºå¯ç”¨çŠ¶æ€ if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123; WebView.setWebContentsDebuggingEnabled(true); &#125; WebSettings settings = webView.getSettings(); // è®¾ç½® JavaScript å¯ä»¥ä½¿ç”¨, å¦åˆ™åœ¨ HTML ä¸­æ— æ³•è°ƒç”¨ JavaScript ä»£ç  settings.setJavaScriptEnabled(true); // æœ¬åœ°æ–‡ä»¶ String url = &quot;file:///android_asset/local.html&quot;; webView.loadUrl(url); webView.setWebViewClient(new WebViewClient() &#123; @Override public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) &#123; return super.shouldOverrideUrlLoading(view, request); &#125; &#125;); // è®¾ç½®æ¸²æŸ“è§†å›¾ webView.setWebChromeClient(new WebChromeClient()); &#125;&#125; å¯¹åº”çš„ xml å¸ƒå±€æ–‡ä»¶: 1234567891011121314&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;demo.droidsdk.near.idreamsky.com.nearsdk.MZWebPage&quot;&gt; &lt;WebView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:id=&quot;@+id/ui_web_view&quot;&gt; &lt;/WebView&gt;&lt;/LinearLayout&gt; 4. è¿è¡Œç¨‹åºåœ¨ Chrome ä¸­è¾“å…¥ chrome://inspect æ‰“å¼€, å¯ä»¥çœ‹åˆ°æ­£åœ¨è¿è¡Œçš„ local.html. ç‚¹å‡» inspect, è¿›å…¥è°ƒè¯•ç•Œé¢. åœ¨è°ƒè¯•ç•Œé¢, ç‚¹å‡»é¡µé¢çš„ Click me, æŒ‰é’®, å¯¹åº”çš„ä¼šæœ‰ log è¾“å‡º. 5.è°ƒè¯•å‡ºé”™çš„ HTMLä¿®æ”¹ä¸€ä¸‹ local.html æ–‡ä»¶ 12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;button onclick=&quot;myFunction()&quot;&gt;Click me&lt;/button&gt;&lt;p id=&quot;demo&quot;&gt;&lt;/p&gt;&lt;p&gt;A function is triggered when the button is clicked.&lt;/p&gt;&lt;script&gt; function myFunction() &#123; console.log(&apos;js console.&apos; + var_error); &#125;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; è¿™é‡Œå¯ä»¥çœ‹å‡º var_error æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡. é‡æ–°è¿è¡Œ, ç‚¹å‡» Click me, å¯ä»¥çœ‹åˆ°å³ä¾§çš„ error: å…³äºŽ Chrome å¼€å‘è€…å·¥å…·çš„æ›´å¤šä½¿ç”¨, å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ Chrome å¼€å‘è€…å·¥å…·.]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Chrome Web Debug</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¿æŒä½ çš„å¥½ä¹ æƒ¯]]></title>
    <url>%2F2017%2F05%2F29%2F%E4%BF%9D%E6%8C%81%E4%BD%A0%E7%9A%84%E5%A5%BD%E4%B9%A0%E6%83%AF%2F</url>
    <content type="text"><![CDATA[æ˜Žå¤©å°±æ˜¯ä¼ ç»Ÿçš„ç«¯åˆèŠ‚äº†, æå‰ç¥å¤§å®¶ç«¯åˆå®‰åº·! ä»Šå¤©è€å©†è®©æˆ‘å¸®å¿™æŠŠç²½å¶å­æ´—æ´—, è¯´è¦åŒ…ç²½å­, æˆ‘å¬è¯åœ°æŠŠåˆšä¹°æ¥çš„ç²½å¶å­æ´—äº†ä¸ªå¹²å‡€, é‚£éƒ½æ˜¯å¸¦æœ‰ç»¿è‰²çš„å¶å­, ç”Ÿæœºå‹ƒå‹ƒ, è®©æˆ‘ä»ŽæŒ‡å°–ä¸­æ„Ÿåˆ°æ— æ¯”çš„æ¸©é¦¨å’Œæ— å°½çš„å¸Œæœ›. å°çš„æ—¶å€™, æˆ‘å¾ˆäº«å—å¦ˆå¦ˆä¸ºæˆ‘ä»¬åŒ…ç²½å­çš„è¿‡ç¨‹, è¯´å®žè¯, æˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢åƒç²½å­, ä½†æ˜¯ç‰¹åˆ«å–œæ¬¢ç²½å­é”…é‡Œé¢çš„ç…®é¸¡è›‹, ç‰¹åˆ«ç¾Žå‘³. è€å®¶çš„ç²½å­æ²¡æœ‰ä»€ä¹ˆç‰¹è‰², å°±æ˜¯ç®€ç®€å•å•çš„ç³¯ç±³è¢«åŒ…åœ¨å¶å­ä¸­, ç„¶åŽæ”¾åœ¨é”…é‡Œæ…¢æ…¢çš„ç…®, ç†Ÿäº†ä¹‹åŽ, è˜¸ç‚¹ç™½ç³–å°±å¯ä»¥åƒäº†. åˆ°äº†å—æ–¹ä¹‹åŽ, æˆ‘æ‰å‘çŽ°ä¸–ç•Œä¸ŠåŽŸæ¥æœ‰å„ç§å„æ ·çš„ç²½å­, çº¢æž£çš„, ç»¿è±†çš„, çŒªè‚‰é¦…çš„, é¸¡è‚‰é¦…çš„â€¦ç­‰ç­‰! è¿™äº›éƒ½æ˜¯å¶å‘çš„å›žå¿†, å’Œä»Šå¤©çš„æŽ¨æ–‡æ²¡æœ‰å…³ç³», ä¸ä¿¡, ä½ æŽ¥ç€å¾€ä¸‹çœ‹. å…»æˆé˜…è¯»çš„ä¹ æƒ¯æˆ‘ä¸æ˜¯ä¸€ä¸ªèªæ˜Žçš„å­©å­, ç›´åˆ°å°å­¦ä¸‰å¹´çº§, æˆ‘æ‰çœŸæ­£çš„å¼€å§‹æ˜Žç™½å­¦ä¹ åˆ°åº•æ˜¯æ€Žä¹ˆä¸€å›žäº‹, ç”¨è€å®¶äººçš„è¯è¯´ç®—æ˜¯å¼€çªäº†. åŽæ¥æˆ‘å¾ˆé¡ºåˆ©çš„ä¸Šäº†åˆä¸­, å®¶é‡Œçš„å¤§éƒ¨åˆ†æ”¶å…¥è¦é åº„å®¶, ä¸€å¹´å››å­£èƒ½å¤Ÿé£Žè°ƒé›¨é¡ºçš„è¯, ä¹Ÿèƒ½è¿‡ä¸ªä¸é”™çš„å¹´, è‡³å°‘èƒ½æŠŠå­¦è´¹ç»™äº¤ä¸Š. åˆä¸­äºŒå¹´çº§çš„æ—¶å€™, æˆ‘è¾å­¦äº†, ä¹Ÿè®¸æ˜¯å‘½è¿çš„å®‰æŽ’å§, å½“æ—¶è‡ªå·±ä¹Ÿæ²¡æœ‰å¤šæƒ³, æ¯…ç„¶å†³å®šä¸‹å­¦åŽ»å¯»æ‰¾å¦ä¸€ç§äººç”Ÿ. äºŽæ˜¯, æˆ‘é€‰æ‹©äº†ç†å‘è¿™ä¸ªè¡Œä¸š. å’Œå¸ˆå‚…åœ¨é£Žé£Žé›¨é›¨ä¸­åº¦è¿‡äº†ä¸€å¹´å¤šçš„æ—¶é—´, åœ¨å½“æ—¶çš„å†œæ‘, ä¸ä¸Šå­¦æœ‰é—¨æ‰‹è‰ºä¹Ÿç®—æ˜¯å¯¹è‡ªå·±å’Œçˆ¶æ¯æœ‰ä¸ªäº¤ä»£. æˆ‘çš„å†…å¿ƒä»ç„¶æ¸´æœ›åŽ»ä¸Šå­¦, è™½ç„¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦åŽ»ä¸Šå­¦ä¹Ÿä¸çŸ¥é“ä¸Šå­¦åŽèƒ½å¹²ä»€ä¹ˆ, ä½†æ˜¯å¿ƒé‡Œé¢æ€»æ˜¯è§‰å¾—è‡ªå·±ä¸èƒ½æ”¾å¼ƒå­¦ä¸š.åœ¨ç†å‘çš„ä¸€å¹´å¤šæ—¶é—´é‡Œ, æˆ‘æ²¡æœ‰æ”¾å¼ƒè¿‡å­¦ä¹ .å†¥å†¥ä¹‹ä¸­è‡ªæœ‰å®‰æŽ’, å¦ˆå¦ˆæœ‰æ¬¡é—®æˆ‘: â€œè¿˜æƒ³åŽ»ä¸Šå­¦ä¸?â€, æˆ‘æƒ³éƒ½æ²¡æƒ³å°±æƒ…ä¸è‡ªç¦çš„ç‚¹å¤´äº†, å¦ˆå¦ˆåˆè¯´:â€æˆ‘å°±çŸ¥é“ä½ æ²¡æœ‰æ”¾å¼ƒ, åŽ»ç»§ç»­ä¸Šå­¦å§, ä¸è¦ç•™ä¸‹é—æ†¾!â€.å½“æ—¶çš„æˆ‘ç”­ææœ‰å¤šé«˜å…´äº†. å†æ¬¡å›žåˆ°æ ¡å›­çš„æˆ‘æ¯”ä»¥å‰æ›´åŠ åŠªåŠ›å’Œæ‹¼å‘½äº†, æ›´åŠ æ‡‚å¾—å¦‚ä½•çæƒœè¿™æ¥ä¹‹ä¸æ˜“çš„å­¦ä¹ æœºä¼šäº†. ç›´åˆ°å¤§å­¦æ¯•ä¸š, å‚åŠ å·¥ä½œä»¥åŠæœ‰äº†å­©å­åŽ, æˆ‘ä¹Ÿèƒ½ä¿æŒè‡ªæˆ‘å­¦ä¹ å’Œè‡ªæˆ‘æ¿€åŠ±çš„çŠ¶æ€, ä¿æŒå¥½çš„é˜…è¯»ä¹ æƒ¯, è®©æˆ‘å—ç›Šç»ˆèº«. æœ‰æ¬¡å­©å­æ—©æ™¨èµ·åºŠå¿™å®ŒåŽ, å°±å¼€å§‹ååœ¨é‚£é‡Œçœ‹ä¹¦, æœ‰å¥½å‡ æ¬¡æ™šä¸Š, æˆ‘ä¹Ÿå‘çŽ°ä»–æ´—å®Œæ¾¡åŽ, ååœ¨é‚£é‡Œçœ‹ä¹¦, æˆ–è€…æ˜¯åšæ‰‹å·¥, æˆ–æ˜¯ç”»ç”». æˆ‘æ„Ÿåˆ°å¾ˆå¥½å¥‡, å†³å®šæ‰¾ä¸ªæœºä¼šé—®é—®ä»–. æœ‰ä¸€ä¸ªå‘¨æœ«çš„ä¸Šåˆ, æ—©é¤è¿‡åŽ, æˆ‘å°±æŠŠä»–æ‹‰åˆ°èº«è¾¹, å’Œä»–ä¸€èµ·çœ‹å„¿ç«¥è¯»ç‰©, é—®ä»–:â€å®è´, ä½ ä¸ºä»€ä¹ˆå–œæ¬¢çœ‹ä¹¦å‘¢?â€, ä»–è¯´:â€çˆ¸çˆ¸, æ˜¯ä½ å½±å“äº†æˆ‘, ä½ å–œæ¬¢çœ‹ä¹¦, æˆ‘ä¹Ÿå–œæ¬¢çœ‹ä¹¦.â€, çœ‹ç€ä»–ä¸€å‰¯å¤©çœŸçš„æ ·å­, æˆ‘çœŸçš„ä¸æ•¢ç›¸ä¿¡å‡ å²çš„å­©å­èƒ½è¯´å‡ºè¿™æ ·çš„è¯, ä½†æˆ‘å†…å¿ƒæ„Ÿåˆ°æ— æ¯”çš„æ¬£æ…°.åŽŸæ¥å¥½çš„ä¹ æƒ¯ä¼šä¼ æŸ“ç»™è‡ªå·±èº«è¾¹çš„äºº, å¹¶ä¸”èƒ½è®©ä½ æ„Ÿåˆ°è‡ªè±ª. åšæŒå†™åšå®¢å†™åšå®¢æˆ–è€…æ˜¯ç”Ÿæ´»æ—¥è®°, ç¡®å®žå¾ˆâ€æµªè´¹â€æ—¶é—´, ç”šè‡³ä¼šå ç”¨ä½ ä»»ä½•ä¼‘æ¯çš„æ—¶é—´, å†™åšå®¢å¶å°”ä¹Ÿä¼šè®©ä½ æŠ“è€³æŒ è…®, æ„Ÿå¹:â€ä¹¦åˆ°ç”¨æ—¶æ–¹æ¨å°‘â€! æ‰€ä»¥, è¯», å†™ä¸èƒ½åˆ†å®¶, æ›´åº”è¯¥æ˜¯å°†äºŒè€…ç´§å¯†çš„è”åˆåœ¨ä¸€èµ·.å¤šé˜…è¯»å¤šå†™, æ‰ä¼šè®©ä½ æ›´åŠ çš„é€šé€, å½“ç„¶äº†, æˆ‘åªæ˜¯å–œæ¬¢å†™, å†™çš„è´¨é‡ä¹Ÿå¾ˆä¸€èˆ¬, åªæ˜¯ä¸ºäº†æ»¡è¶³å†…å¿ƒçš„é‚£ä¸€ç‚¹ç‚¹å¯¹çŸ¥è¯†çš„æ¸´æœ›. å†™çš„å¤šäº†, ä½ å°±æ›´åŠ æ„¿æ„åŽ»æ€è€ƒäº†, æ€è€ƒå¤šäº†, å¾ˆå¤šäº‹æƒ…ä½ å°±çœ‹å¼€äº†, å¯¹ä½ çš„ç”Ÿæ´»å’Œå·¥ä½œéƒ½æœ‰å¥½å¤„. ä»Ž09å¹´åˆ°çŽ°åœ¨æˆ‘ä¸€ç›´åšæŒå†™åšå®¢, åˆšå¼€å§‹ä¹Ÿæ˜¯æ— ä»Žä¸‹ç¬”, ä¸çŸ¥é“è‡ªå·±åˆ°åº•è¯¥å†™ä¸€å†™ä»€ä¹ˆä¸œè¥¿, å†™äº†ä¹‹åŽ, æ˜¯ä¸æ˜¯åˆ«äººçœ‹äº†ä¼šå˜²ç¬‘æˆ‘, è¯¸å¦‚æ­¤ç±»çš„æ‹…å¿ƒå¤ªå¤šå¤ªå¤š, åŽæ¥æˆ‘ä¹Ÿæƒ³æ˜Žç™½äº†, ä½ å†™çš„å†å¥½ä¹Ÿæœ‰äººæ¯”ä½ å†™å¾—å¥½, ä¹Ÿä¼šæœ‰äººè¯´ä½ å†™çš„ä¸å¥½.é‚£æˆ‘ä½•å¿…åŽ»è®¡è¾ƒè¿™ä¹ˆäº›ä¸ªäº‹å„¿äº†, åªç®¡åŠ¨æ‰‹å†™å§! ç„¶åŽ, å°±åœ¨åšå®¢ç½‘ç«™ä¸Šé¢è€•è€˜, æŠ€æœ¯çš„, åæ§½çš„, ç”Ÿæ´»çš„æˆ‘éƒ½å–œæ¬¢å†™, ä¸ç®¡ä½ å–œä¸å–œæ¬¢çœ‹, å®ƒéƒ½åœ¨é‚£é‡Œ, å“ˆå“ˆ! æˆ‘æŠŠåšå®¢å½“åšè‡ªå·±çš„æœ‹å‹, å¿ƒæƒ…å¥½äº¦æˆ–æ˜¯ä¸å¥½çš„æ—¶å€™, æˆ‘éƒ½ä¼šå‘ä»–å€¾è¯‰, å¸Œæœ›è‡ªå·±å†™ä¸‹çš„ä¸œè¥¿æˆ–å¤šæˆ–å°‘èƒ½å¸®åŠ©ä¸€äº›äºº, è¿™ä¹Ÿè®¸æ˜¯æˆ‘åšæŒå†™åšå®¢çš„æœ€å¤§åŠ¨åŠ›äº†. å¦‚æžœä½ ä¹Ÿå–œæ¬¢å†™åšå®¢æˆ–è€…æ˜¯å‡†å¤‡å†™åšå®¢, å°±å¼€å§‹åŠ¨æ‰‹å†™å§, ä¸è¦å†çŠ¹è±«äº†. æœ€åŽè¿™ä¸ªä¸–ç•Œä¸Š, æ²¡å¤šå°‘äººå–œæ¬¢å¬åˆ«äººå•°å—¦, å³ä½¿å¬äº†ä½ çš„å•°å—¦, ä¹Ÿä¸ä¸€å®šä¼šä»˜å‡ºå®žè·µ, å³ä½¿ä½ æ˜¯é•¿è€…æˆ–è€…æ˜¯æ™ºè€…, å†µä¸”æˆ‘åªæ˜¯ä¸€ä»‹å¹³æ°‘. ä½†æ˜¯æˆ‘è¿˜æ˜¯è¦å•°å—¦ä¸€å¥:â€ä¿æŒæŒç»­å­¦ä¹ çš„ä¹ æƒ¯, ä¼šæ¶ˆè€—ä½ çš„å‹¤å¥‹, ä½†ä¼šè®©ä½ å—ç›Šç»ˆç”Ÿâ€, ä¿¡ä¸ä¿¡ç”±ä½ !]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>æ€è€ƒ ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Safari çš„å¼€å‘è€…æ¨¡å¼]]></title>
    <url>%2F2017%2F05%2F15%2FSafari-%E7%9A%84%E5%BC%80%E5%8F%91%E8%80%85%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[è®¾ç½® Safari1.æ‰“å¼€ Safari çš„ Preference 2.åˆ‡æ¢åˆ° Advanced é€‰é¡¹ å°† Show Develop menu in menu bar é€‰ä¸­. å¯ä»¥çœ‹åˆ° Safari å¤šäº† Develop é€‰é¡¹ è®¾ç½®è®¾å¤‡æˆ–è€…æ¨¡æ‹Ÿå™¨åœ¨ iphoneæˆ–è€…æ¨¡æ‹Ÿå™¨ ä¸­è®¾ç½® Safariæ‰“å¼€ Safari çš„é«˜çº§é€‰é¡¹ æ‰“å¼€ Web æ£€æŸ¥å™¨ ä¸Šé¢è®¾ç½®å®Œæ¯•åŽ, è¿è¡Œä½ çš„ç¨‹åº, åœ¨ Safari çš„ Develop ä¸­å¯ä»¥çœ‹åˆ°å¯¹åº”è®¾å¤‡, ä»Žè€Œå¯ä»¥è°ƒè¯• HTML é¡µé¢äº†. åœ¨è°ƒè¯•çª—å£ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ­£åœ¨åŠ è½½ç½‘é¡µçš„å„ç§ä¿¡æ¯ï¼Œå¦‚æºç ã€è¯·æ±‚å¤´ã€å›¾ç‰‡ã€åŠ è½½çš„èµ„æºä¸Žè„šæœ¬ã€æŽ§åˆ¶å°è¾“å‡ºç­‰. ä¹Ÿå¯ä»¥ç›´æŽ¥ä¿®æ”¹ç½‘é¡µçš„ CSS æ ·å¼å’Œå¸ƒå±€ç­‰è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸ç”¨é‡æ–°è¿è¡Œ App. ä½¿ç”¨ Safari çš„å¼€å‘è€…æ¨¡å¼, å¯ä»¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•å‰ç«¯é¡µé¢, è§£å†³ä¸€äº›é—®é¢˜, æ¯”è¾ƒæ–¹ä¾¿.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS Safari</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS: è‡ªå®šä¹‰ UIWebView å’Œ WKWebView çš„ UserAgent]]></title>
    <url>%2F2017%2F05%2F14%2FiOS-%E8%87%AA%E5%AE%9A%E4%B9%89-UIWebView-%E5%92%8C-WKWebView-%E7%9A%84-UserAgent%2F</url>
    <content type="text"><![CDATA[å¯¼è¨€åœ¨ iOS8, è‹¹æžœæŽ¨å‡ºäº† WKWebView, ç›®çš„å¾ˆæ˜Žæ˜¾: å–ä»£ UIWebView. éšç€æ—¶é—´çš„æŽ¨ç§», è¶Šæ¥è¶Šå¤šçš„åº”ç”¨å¼€å§‹æœ€ä½Žç‰ˆæœ¬æ”¯æŒä¸º iOS8, å¤§å®¶ä¹Ÿçº·çº·çš„å¼€å§‹ä½¿ç”¨ WKWebView ç»„ä»¶. åœ¨ iOS10.x ç‰ˆæœ¬ä¸Š, UIWebView çš„è¡¨çŽ°ä¸å°½å¦‚äººæ„, åœ¨æˆ‘ä»¬çš„åŽå°æ—¥å¿—å’Œç”¨æˆ·åé¦ˆ, å­˜åœ¨å¾ˆå¤šèŽ«åå…¶å¦™çš„ crash ä»¥åŠå¡é¡¿çŽ°è±¡, å†…å­˜é£™å‡ç­‰é—®é¢˜. é’ˆå¯¹ä¸åŒçš„ JS æ¸¸æˆå¼•æ“Ž, UIWebView è¡¨çŽ°ä¹Ÿä¸å¤Ÿå¥½, æ‰€ä»¥æ˜¯æ—¶å€™ä½¿ç”¨ WKWebView äº†. ä½†æ˜¯è¯åˆè¯´å›žæ¥, å¦‚æžœä½ æœ€ä½Žç‰ˆæœ¬æ”¯æŒ iOS8, ä¹Ÿä¸èƒ½å®Œå…¨æ”¾å¼ƒ UIWebView, WKWebView æœ‰ä¸€éƒ¨åˆ† API åªæœ‰ iOS9+ æ‰æœ‰, å¦‚æžœä½ çš„åº”ç”¨åœ¨ iOS8 è¿è¡Œè€Œä½¿ç”¨ iOS9 çš„ API, è‚¯å®šä¼š crash. ä¾‹å¦‚: 1.æ¸…é™¤ç¼“å­˜.2.è®¾ç½® user-agent. ä»Šå¤©è¦è¯´çš„æ˜¯å…³äºŽè®¾ç½®è‡ªå®šä¹‰ UIWebView å’Œ WKWebView çš„ UserAgent é—®é¢˜. WKWebView UserAgenté»˜è®¤çš„ UserAgentä½¿ç”¨ä¸‹é¢çš„ä»£ç , å¯ä»¥è¾“å‡º WKWebView çš„é»˜è®¤ UserAgent. 12345678910- (void)viewDidload &#123; [self.wkWebView evaluateJavaScript:@&quot;navigator.appName&quot; completionHandler:^(id __nullable appName, NSError * __nullable error) &#123; NSLog(@&quot;navigator.appName: %@&quot;, appName); &#125;]; [self.wkWebView evaluateJavaScript:@&quot;navigator.userAgent&quot; completionHandler:^(id __nullable userAgent, NSError * __nullable error) &#123; NSLog(@&quot;navigator.userAgent: %@&quot;, userAgent); &#125;];&#125; navigator.appName æ— è®ºåœ¨ iOS8, iOS9 è¿˜æ˜¯ iOS10, è¾“å‡ºç»“æžœéƒ½æ˜¯ä¸€è‡´çš„. navigator.userAgent åœ¨ä¸åŒçš„ iOS ç³»ç»Ÿä¸Šé¢è¾“å‡ºç»“æžœç•¥æœ‰ä¸åŒ. 123456// iOS 8.3// Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70// iOS 9.0// Mozilla/5.0 (iPhone; CPU iPhone OS 9_0 like Mac OS X) AppleWebKit/601.1.32 (KHTML, like Gecko) Mobile/13A4254v// iOS 10.x//Mozilla/5.0 (iPhone; CPU iPhone OS 10_3 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E269 è‡ªå®šä¹‰ UserAgentä¿®æ”¹é»˜è®¤çš„ UserAgent, éœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•. 1self.wkWebView.customUserAgent = @&quot;CustomUserAgent&quot; è¿™æ ·, å°±æ”¹å˜äº†å…¶é»˜è®¤çš„ UserAgent å€¼äº†. ç‰¹åˆ«éœ€è¦æ³¨æ„: customUserAgent æ˜¯ iOS9 ä¹‹åŽæ‰æœ‰çš„å­—æ®µ. 123/*! @abstract The custom user agent string or nil if no custom user agent string has been set.*/@property (nullable, nonatomic, copy) NSString *customUserAgent API_AVAILABLE(macosx(10.11), ios(9.0)); æ‰€ä»¥åœ¨ iOS8.x, å¦‚æžœä½ æƒ³æ”¹å˜ UserAgent, è¿˜æ˜¯è¦ä½¿ç”¨ UIWebView. HTML ä½¿ç”¨ UserAgentHTML ä¸­å¯ä»¥æ ¹æ®è‡ªå®šä¹‰çš„ UserAgent, åšå‡ºä¸åŒçš„è¡Œä¸º, å¦‚è‡ªå®šçš„ UserAgent å¯ä»¥åŒ…æ‹¬åº”ç”¨çš„ç‰ˆæœ¬å·, HTML å¯ä»¥æ ¹æ®ä¸åŒçš„ç‰ˆæœ¬æ¥åšç‰ˆæœ¬åŒºåˆ†ç­‰é€»è¾‘. åœ¨ HTML ä¸­, å¯ä»¥ä½¿ç”¨ JS æ¥èŽ·å– UserAgent çš„å€¼. Demo.html 12345678910111213141516171819202122232425262728293031323334&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot; /&gt; &lt;title&gt;user-agent&lt;/title&gt; &lt;script type=&quot;text/javascript&quot;&gt; function getUserAgent() &#123; var ug = navigator.userAgent; document.getElementById(&quot;mySpan&quot;).innerHTML = ug; &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;æ˜¾ç¤º user-agent&lt;/h1&gt; &lt;p&gt;&lt;span style=&quot;font-size:30px&quot; id=&quot;mySpan&quot;&gt;..&lt;/span&gt;&lt;/p&gt; &lt;p&gt;&lt;input type=&quot;button&quot; value=&quot;ç‚¹å‡»æ˜¾ç¤º user-agent&quot; onclick=&quot;getUserAgent()&quot; class=&quot;button&quot;/&gt;&lt;/p&gt; &lt;/body&gt; &lt;style&gt; .button &#123; background-color: #4C0950; border: none; color: white; padding: 15px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 40px; margin: 20px 200px 100px 300px; cursor: pointer; border-radius: 15; &#125; &lt;/style&gt;&lt;/html&gt; ä½¿ç”¨ WKWebView åŠ è½½è¯¥ Demo.html æ–‡ä»¶, æ•ˆæžœå›¾å¦‚ä¸‹: UIWebView UserAgenté»˜è®¤çš„ UserAgentä½¿ç”¨ä¸‹é¢çš„ä»£ç , å¯ä»¥è¾“å‡º UIWebView çš„é»˜è®¤ UserAgent. 12345NSString *appName = [self.webView stringByEvaluatingJavaScriptFromString:@&quot;navigator.appName&quot;];NSLog(@&quot;navigator.appName: %@&quot;, appName); NSString *userAgent = [self.webView stringByEvaluatingJavaScriptFromString:@&quot;navigator.userAgent&quot;];NSLog(@&quot;navigator.userAgent %@&quot;, userAgent); æ‰“å°è¾“å‡ºç»“æžœå’Œ WKWebView çš„ç»“æžœä¸€è‡´. è®¾ç½®è‡ªå®šçš„ UserAgentè®¾ç½®ä¸€ä¸ª key ä¸º @â€UserAgentâ€ çš„æœ¬åœ°å­˜å‚¨å³å¯. 1234567[[NSUserDefaults standardUserDefaults] registerDefaults:@&#123;@&quot;UserAgent&quot;:@&quot;CustomUserAgent-UIWebView&quot;&#125;]; NSString *appName = [self.webView stringByEvaluatingJavaScriptFromString:@&quot;navigator.appName&quot;];NSLog(@&quot;navigator.appName: %@&quot;, appName); NSString *userAgent = [self.webView stringByEvaluatingJavaScriptFromString:@&quot;navigator.userAgent&quot;];NSLog(@&quot;navigator.userAgent %@&quot;, userAgent); è¿™æ ·å°±æ”¹å˜äº† UIWebView çš„é»˜è®¤ UserAgent äº†. å°ç»“åº”ç”¨æœ€ä½Žç‰ˆæœ¬æ”¯æŒ iOS7/8 çš„å¼€å‘è€…ä»¬, å¯ä»¥è€ƒè™‘ UIWebView å’Œ WKWebView å¹¶å­˜çš„å¼€å‘æ¨¡å¼. iOS9åŠä»¥ä¸Šçš„å¼€å‘è€…ä½ ä»¬, å¯ä»¥å®Œå…¨æ”¾å¼ƒ UIWebView, å¤§èƒ†çš„æ‹¥æŠ± WKWebView äº†. ç§»æ¤ UIWebView åˆ° WKWebView çš„æˆæœ¬ä¸ç®—å¤§.å¦‚æžœä½ çŽ°åœ¨æœ‰æ—¶é—´, å¯ä»¥å¼€å§‹ç€æ‰‹åšè¿™äº›äº‹äº†.å‰ç«¯å’Œå®¢æˆ·ç«¯éœ€è¦è€ƒè™‘ä¹‹å‰äº¤äº’é‚£éƒ¨åˆ†çš„é€»è¾‘, å³ JS è°ƒç”¨ Native æˆ–è€… Native è°ƒç”¨ JS çš„éœ€è¦åšäº›è°ƒæ•´, å› ä¸º WKWebView çš„è°ƒç”¨æ–¹å¼å’Œ UIWebView ä¸ä¸€æ ·äº†, å‰ç«¯é¡µé¢è¦è€ƒè™‘ç‰ˆæœ¬å…¼å®¹æ€§. æ–°çš„ WKWebView è™½ç„¶å­˜åœ¨ä¸€äº›å‘, ä½†æ˜¯ä½¿ç”¨å®ƒäº¦æ˜¯å¤§åŠ¿æ‰€è¶‹, æ­£æ‰€è°“ å­˜åœ¨å³åˆç†, ä½ æ²¡æœ‰ç†ç”±æ‹’ç»å®ƒ. åŽç»­, æˆ‘ä¼šå†™ä¸€å†™åœ¨ WKWebView ä¸Šé¢é‡åˆ°çš„ä¸€äº›é—®é¢˜, åˆ†äº«ç»™å¤§å®¶. ä¹‹å‰æˆ‘ä¹Ÿå†™è¿‡ä¸€ç¯‡æ–‡ç« , æ˜¯å…³äºŽ UIWebView ç¼“å­˜çš„, ä¸å¦¨, ä½ ä¹Ÿçž…çž… [iOS: èŠèŠ UIWebView ç¼“å­˜].]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>UIWebView WKWebView UserAgent</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cocos2d-js: é¦–æ¬¡åœ¨ Mac ä¸Šé¢è¿è¡Œ]]></title>
    <url>%2F2017%2F05%2F14%2FCocos2d-js-%E9%A6%96%E6%AC%A1%E5%9C%A8-Mac-%E4%B8%8A%E9%9D%A2%E8%BF%90%E8%A1%8C%2F</url>
    <content type="text"><![CDATA[Cocos2d-js ä»‹ç»å¦‚æžœä½ æ˜¯åˆšæŽ¥è§¦ Cocos2d-js å¼€å‘çš„äºº, ä¸€å®šä¼šè¢« Cocos2d-js å’Œ Cocos2d-HTML5 ä»¥åŠ Cocos2d-x æžå¾—æ™•å¤´è½¬å‘. ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ Cocos2d-js çš„å‰ä¸–ä»Šç”Ÿ. ç›®å‰ Cocos2d-x æ”¯æŒä½¿ç”¨ C++ã€Luaã€Javascript è¯­è¨€æ¥è¿›è¡Œå¼€å‘ï¼Œä¸”å†…ç½® JavaScript å¼•æ“Žï¼Œé€šè¿‡ C++ è§£æž Javascript åŽ»æ‰§è¡Œ. Cocos2d-HTML5 æ˜¯ä½¿ç”¨ JavaScript è¿›è¡Œå¼€å‘ï¼Œæœ€ç»ˆè¿è¡Œåœ¨æµè§ˆå™¨é‡Œçš„. v3.0 åŽï¼ŒCocos2d-HTML5 å’Œ Cocos2d-x JSBinding è¢«åˆåˆ°äº†ä¸€èµ·ï¼Œç§°ä½œ Cocos2d-JS. ä¸Ž Cocos2d-HTML5 ä¸åŒçš„æ˜¯ï¼ŒCocos2d-js å¼€å‘çš„ç¨‹åºä¸ä»…èƒ½è¿è¡Œåœ¨æµè§ˆå™¨é‡Œï¼Œè¿˜èƒ½ç¼–è¯‘è¿è¡Œåœ¨ Mac OSX, Windows, iOS, Android å¹³å°ä¸Š. ä»Ž Cocos2d-x v3.7 ç‰ˆæœ¬ä¹‹åŽ, js ç‰ˆæœ¬è¢«åˆå¹¶åˆ° Cocos2d-x ä¸­äº†. å…·ä½“å¯ä»¥çœ‹ Release Note è¿™ä¸ªè¯´æ˜Ž. è¿™ä¸ªç‰ˆæœ¬çš„å‘å¸ƒæ—¥æœŸæ˜¯åœ¨2015å¹´7æœˆ21. åŽŸæ¥çš„ Cocos2d-js ç‰ˆæœ¬åœ¨ [GitHub] ä¸Šé¢å·²ç»åœæ­¢æ›´æ–°äº†. è¯´æ˜Žå¦‚ä¸‹: 2/27/2016 - This repository is no longer active.Cocos2d-JS was merged with Cocos2d-x starting at version 3.7. å¯ä»¥çœ‹å‡º, Cocos2d-js åŽŸæ¥ç‹¬ç«‹çš„é¡¹ç›®è¢«åˆå¹¶åˆ°äº† Cocos2d-x ä¸­äº†. çŽ°åœ¨ä½¿ç”¨ Cocos2d-x ä¸ä»…å¯ä»¥åˆ›å»º cpp é¡¹ç›®å’Œ lua é¡¹ç›®, ä¹Ÿå¯ä»¥åˆ›å»º js é¡¹ç›®äº†. å®˜æ–¹æœ‰è¯´æ˜Žçš„: Cocos2d-JS is Cocos2d-x engineâ€™s JavaScript version that includes Cocos2d-html5 and Cocos2d-x JavaScript Bindings. è‡³äºŽä»€ä¹ˆæ˜¯ Cocos2d-x JavaScript Bindings, å¤§å®¶è‡ªè¡Œ google, è¿™é‡Œä¸èµ˜è¿°. å…³ç³»å›¾å¤§æ¦‚å¦‚ä¸‹: Cocos2d-x æ¡†æž¶å›¾ æ­å»º Cocos2d-js å¼€å‘çŽ¯å¢ƒ1.ä¸‹è½½ Cocos2d-xå¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ Release åŒ…, ç‚¹å‡» ä¸‹è½½åœ°å€, æˆ‘ä¸‹è½½çš„æœ€æ–°åŒ…æ˜¯ cocos2d-x-3.15. ä¸‹è½½è§£åŽ‹å³å¯, è¿™é‡Œæˆ‘æŠŠ cocos2d-x-3.15 ä¿®æ”¹ä¸º cocos2d-x. è®¾ç½®çŽ¯å¢ƒå˜é‡åœ¨ cocos2d-x ç›®å½•, æ‰§è¡Œ 1python setup.py æ‰§è¡Œå®Œæ¯•åŽ, å¯ä»¥çœ‹åˆ° â€˜~/.bash_profile` çš„å†…å®¹ 123456# Add environment variable COCOS_CONSOLE_ROOT for cocos2d-xexport COCOS_CONSOLE_ROOT=/Users/mark/workspace/mzProjs/c2dx/cocos2d-x/tools/cocos2d-console/binexport PATH=$COCOS_CONSOLE_ROOT:$PATH# Add environment variable COCOS_TEMPLATES_ROOT for cocos2d-xexport COCOS_TEMPLATES_ROOT=/Users/mark/workspace/mzProjs/c2dx/cocos2d-x/templatesexport PATH=$COCOS_TEMPLATES_ROOT:$PATH è¿™é‡Œ, æ²¡æœ‰çœ‹åˆ°æˆ‘çš„ ANT_ROOT è·¯å¾„, å…¶å®žè¯¥è„šæœ¬æ™ºèƒ½çš„æ‰¾åˆ° /usr/local/Cellar/ant/1.9.7/bin, ä½†æ˜¯æˆ‘ä¸æƒ³ä½¿ç”¨è¿™ä¸ª ant, æƒ³ä½¿ç”¨è‡ªå·±ä¸‹è½½çš„ ant, ä¿®æ”¹è¯¥æ–‡ä»¶å¦‚ä¸‹: 123456789# Add environment variable COCOS_CONSOLE_ROOT for cocos2d-xexport COCOS_CONSOLE_ROOT=/Users/mark/workspace/mzProjs/c2dx/cocos2d-x/tools/cocos2d-console/binexport PATH=$COCOS_CONSOLE_ROOT:$PATH# Add environment variable ANT_ROOT for cocos2d-xexport ANT_ROOT=/Users/mark/developer/apache/apache-ant-1.10.1/binexport PATH=$ANT_ROOT:$PATH# Add environment variable COCOS_TEMPLATES_ROOT for cocos2d-xexport COCOS_TEMPLATES_ROOT=/Users/mark/workspace/mzProjs/c2dx/cocos2d-x/templatesexport PATH=$COCOS_TEMPLATES_ROOT:$PATH æœ€åŽæ‰§è¡Œ: 1source ~/.bash_profile ä½¿çŽ¯å¢ƒå˜é‡ç«‹å³ç”Ÿæ•ˆ. åˆ›å»º js å·¥ç¨‹cd åˆ°ä»»æ„ç›®å½•, æ‰§è¡Œ: 1cocos new HelloJs -l js -d . new HelloJs è¡¨ç¤ºå·¥ç¨‹åå­—ä¸º HelloJs-l js è¡¨ç¤ºåˆ›å»º js å·¥ç¨‹.-d . è¡¨ç¤ºåœ¨å½“å‰è·¯å¾„åˆ›å»ºè¯¥å·¥ç¨‹ å¯ä»¥çœ‹åˆ°ä¸‹é¢åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹: 123456789Copy template into /Users/mark/workspace/mzProjs/c2dx/works/HelloJsCopying directory from cocos root directory...Copying files from template directory...Copying Cocos2d-x files...Rename project name from &apos;HelloJavascript&apos; to &apos;HelloJs&apos;Replace the project name from &apos;HelloJavascript&apos; to &apos;HelloJs&apos;Replace the project package name from &apos;org.cocos2dx.hellojavascript&apos; to &apos;org.cocos2dx.HelloJs&apos;Replace the Mac bundle id from &apos;org.cocos2dx.hellojavascript&apos; to &apos;org.cocos2dx.HelloJs&apos;Replace the iOS bundle id from &apos;org.cocos2dx.hellojavascript&apos; to &apos;org.cocos2dx.HelloJs&apos; å·¥ç¨‹ç›®å½•: å·¥ç¨‹å‘å¸ƒå°†ä¸Šé¢çš„å·¥ç¨‹ç¼–è¯‘å‘å¸ƒ. ç¼–è¯‘å‘å¸ƒ: 1cocos compile -p web -m release -p web è¡¨ç¤ºç¼–è¯‘ web å¹³å°.-m release è¡¨ç¤ºç¼–è¯‘ä¸º release æ¨¡å¼. ç¼–è¯‘è¾“å‡º: 12345678Building mode: releaserunning: &apos;/Users/mark/developer/apache/apache-ant-1.10.1/bin/ant -f /Users/mark/workspace/mzProjs/c2dx/works/HelloJs/publish/html5/build.xml&apos;Buildfile: /Users/mark/workspace/mzProjs/c2dx/works/HelloJs/publish/html5/build.xmlcompile: [jscomp] Compiling 156 file(s) with 42 extern(s) [jscomp] 0 error(s), 0 warning(s)BUILD SUCCESSFULTotal time: 8 seconds å¦‚æžœä½ åœ¨è¿™ä¸€æ­¥ç¼–è¯‘æŠ¥é”™, æˆ–è€…æ‰§è¡Œä¸ä¸‹åŽ», ä¸€èˆ¬éƒ½æ˜¯æ²¡æœ‰åœ¨çŽ¯å¢ƒå˜é‡ä¸­é…ç½®å¥½ ant. ç¼–ç¨‹æˆåŠŸåŽ, ä¼šå¤šå‡º publish ç›®å½•: è¿è¡Œæ‰§è¡Œ cocos run å‘½ä»¤æ¥åœ¨ç³»ç»Ÿé»˜è®¤çš„æµè§ˆå™¨ä¸Šé¢è¿è¡Œ. cd åˆ°å·¥ç¨‹ç›®å½•, æ‰§è¡Œ: 1cocos run -p web -s . --port 9009 è¿™æ ·ä¼šå¸®æˆ‘ä»¬åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ª webServer æ¥è¿è¡Œç¤ºä¾‹, ç›´æŽ¥æ‰“å¼€äº†é»˜è®¤ä½¿ç”¨çš„æµè§ˆå™¨. -s: è¡¨ç¤ºå½“å‰éœ€è¦æ‰§è¡Œçš„æºç è·¯å¾„â€“port: æŒ‡å®šç«¯å£, å¦‚æžœä¸æŒ‡å®šç«¯å£, é»˜è®¤åœ¨ 8000 ç«¯å£æ‰§è¡Œ. æ›´å¤š cocos run å‘½ä»¤å¯ä»¥, ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹å¸®åŠ©: 1cocos run --help æœ¬åœ°è¿è¡Œ index.html çš„é—®é¢˜ä½ å¯ä»¥ç”¨ç«ç‹æµè§ˆå™¨(FireFox)æ‰“å¼€æœ¬åœ°å·¥ç¨‹ç›®å½•ä¸­çš„ index.html, å³å¯çœ‹åˆ°è¿è¡Œæ•ˆæžœäº†.FireFox åº”è¯¥æ˜¯åœ¨æœ¬åœ°å¯åŠ¨äº†ä¸€ä¸ª WebServer æ¥è¿è¡Œ. åœ¨ chrome ä¸­ç›´æŽ¥è¿è¡Œ index.html, æ— æ³•çœ‹åˆ°æœ€ç»ˆæ•ˆæžœ, ä¸€ç›´å¡åœ¨ loading ç•Œé¢. æ‰“å¼€ inspect, å¯ä»¥çœ‹åˆ°æŠ¥é”™ä¿¡æ¯: 12XMLHttpRequest cannot load file:/xx/publish/html5/project.json.Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https. ç½‘ä¸Šæœ‰äººè®¨è®ºè¿‡è¿‡é—®é¢˜, è¯´æ˜¯ chrome è·¨åŸŸä¸æ”¯æŒ file åè®®ï¼Œé‚£ä¹ˆå³ä½¿ä½ å…è®¸ chrome è·¨åŸŸæ”¯æŒ, ç›´æŽ¥è¿è¡Œæœ¬åœ°çš„ index.html è¿˜æ˜¯æŠ¥é”™: 1game.min.js:54 Uncaught TypeError: Cannot read property &apos;modules&apos; of null åœ¨ MacOS ä¸Šé¢å…è®¸ chrome è·¨åŸŸè®¿é—®æ–‡ä»¶çš„æ–¹æ³•: 1open /Applications/Google\ Chrome.app --args --allow-file-access-from-files å¯ä»¥çœ‹å‡º, åœ¨è¿™æ–¹é¢, FireFox åšçš„æ¯” chrome å¥½. æ›´æ–° æ›´æ–°æ—¶é—´ 2017-10-15 åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šé¢çœ‹åˆ° ä¸€æ‹›æ•™ä½ è¾¨åˆ« Cocosã€Cocos2dã€Cocos2d-x è¿™ç¯‡æ–‡ç« , å¤§å®¶å¯ä»¥çœ‹çœ‹, å¯¹ cocos ä¼šæœ‰æ›´åŠ æ·±å…¥çš„äº†è§£.]]></content>
      <categories>
        <category>Game</category>
      </categories>
      <tags>
        <tag>cocos cocos2d-js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°å°ç¯®çƒé˜Ÿ]]></title>
    <url>%2F2017%2F04%2F29%2F%E5%B0%8F%E5%B0%8F%E7%AF%AE%E7%90%83%E9%98%9F%2F</url>
    <content type="text"><![CDATA[ç¯®çƒ, æˆ‘æœ€å–œæ¬¢çš„ä¸€é¡¹ä½“è‚²è¿åŠ¨, å¤§å­¦çš„ä¸šä½™æ—¶é—´åŸºæœ¬éƒ½â€æ³¡â€åœ¨çƒåœº, åŽ‹æ ¹ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ç´¯. æ¯•ä¸šåŽçš„ç¬¬ä¸€ä»½å·¥ä½œ, åšçš„æ¯”è¾ƒå¼€å¿ƒ, å¤§å®¶å¹´é¾„ç›¸ä»¿, å…´è¶£ç›¸æŠ•. å°å°çš„å›¢é˜Ÿ, æ²¡æœ‰ä»»ä½•çº·äº‰, å¤§å®¶äº’ç›¸å­¦ä¹ , æ°›å›´åŠå…¶èžæ´½. æ¯ä¸ªå‘¨äº”æˆ‘ä»¬å‡ ä¸ªäººéƒ½ä¼šæå‰ä¸‹ç­åŽ»æ‰“ä¸€åœºç¯®çƒ, å®Œäº‹åŽ, ä¸€èµ·å–ç‚¹å°é…’, é‚£æ—¥å­ç”­ææœ‰å¤šä»–NNDçš„æƒ¬æ„. å…¬å¸è§£æ•£åŽ, å¤§å®¶å„å¥”ä¸œè¥¿, äº‹è¿‡å¢ƒè¿, å„æœ‰å„çš„å·¥ä½œå’Œç”Ÿæ´», èšåœ¨ä¸€èµ·çš„æ—¥å­ä¹Ÿæ˜¯å°‘ä¹‹åˆå°‘, ä»¥å‰çš„æ—¥å­åªèƒ½æ€€å¿µäº†. äººæ€»éœ€è¦ä¸€äº›éžå·¥ä½œä¹‹å¤–çš„å…´è¶£, æ•´å¤©å›´ç»•ç€å·¥ä½œ, æ—©æ™šéƒ½ä¼šç–¯æŽ‰. æœ‰äº›äººå–œæ¬¢æ³¡æ³¡å›¾ä¹¦é¦†, æœ‰äº›äººå–œæ¬¢æ‰“æ‰“æ¸¸æˆ, æœ‰äº›äººå–œæ¬¢è·‘è·‘æ­¥, æœ‰äº›äººå–œæ¬¢å”±å”±æ­Œâ€¦ ä¸ç®¡æ€Žä¹ˆæ ·, ä½ éœ€è¦æŸç§çˆ±å¥½, æ¥æ¶¦è‰²ä¸€ä¸‹ä½ çš„ç”Ÿæ´», æˆ‘é€‰æ‹©äº†ç¯®çƒè¿åŠ¨. ä¸‹é¢, æ¥è¯´è¯´ç¯®çƒé˜Ÿä¸­å…¸åž‹çš„å‡ ç§äºº, å¤§å®¶ç»“åˆè‡ªå·±çš„å·¥ä½œå’Œç”Ÿæ´», æ€è€ƒä¸€ä¸‹å§~ å•æ‰“ç‹¬æ–—ç¯®çƒè¿åŠ¨æ˜¯ä¸€é¡¹é›†ä½“è¿åŠ¨, éœ€è¦æ¯ä¸ªäººå‘æŒ¥è‡ªå·±åº”æœ‰çš„æ°´å¹³, æ‰èƒ½å‘æŒ¥å›¢é˜Ÿçš„åŠ›é‡. æœ‰äº›äººå–œæ¬¢å•æ‰“ç‹¬æ–—, å®Œå…¨ä¸è€ƒè™‘å›¢é˜Ÿä¸­å…¶ä»–æˆå‘˜çš„æ„Ÿå—, åªè¦çƒåˆ°äº†ä»–æ‰‹ä¸­, å…¶ä»–äººåªèƒ½çœ‹ä»–çš„è¡¨æ¼”, ä»»å‡­ä½ å–Šç ´å—“å­, ä»–ä¹Ÿä¸ä¼šç†ä½ . è¿™ç§äºº, å…¶å®žæ˜¯æœ‰ä¸€å®šèƒ½åŠ›çš„äºº, ä¸ç„¶ä¹Ÿä¸ä¼šä¹Ÿä¸å¯èƒ½è¿™ä¹ˆåš, åªæ˜¯ä»–ä»¬è§‰å¾—å‡­ä¸€å·±ä¹‹åŠ›å°±å¯ä»¥è®©å¤§å®¶é«˜æ­£æ— å¿§äº†, è‡ªå·±æ²¡æœ‰æ€è€ƒè¿‡è¿™æ ·åšæ˜¯ä¸æ˜¯æœ€åˆé€‚çš„. ä¹…è€Œä¹…ä¹‹, å¤§å®¶çœ‹ç€ä»–çš„â€è¡¨æ¼”â€, å†ä¹Ÿä¸æƒ³å‘æŒ¥äº†, å•æ‰“ç‹¬æ–—çš„äººæ…¢æ…¢çš„ä¹Ÿç´¯äº†, æœ€åŽå¤§å®¶éƒ½èº«å¿ƒç–²æƒ«, çƒé˜Ÿè¢«å¯¹æ–¹è½»è€Œæ˜“ä¸¾åœ°æ‰“è´¥. â€œæŒ‡æŒ¥å®˜â€çƒé˜Ÿä¸­æœ‰ä¸€ç§äºº, è‡ªå·±ä¸åŠªåŠ›, æ€»æ˜¯å–œæ¬¢é¢æŒ‡æ°”ä½¿, ç»å¸¸å¬åˆ°ä»–ä»¬è¯´è¿™æ ·çš„è¯: ä½ å¿«ç‚¹è·‘å‘€, ç§¯æžç‚¹â€¦æ­»æ­»åœ°é˜²ç€ä»–, ä¸è¦è®©ä»–è¿›æ”», å¿«â€¦ä½ ä¼ çƒç»™æˆ‘å‘€, è®©ä½ åˆ«ç€æ€¥, å¥½äº†å§, è¾“äº†å§â€¦è¾“äº†, éƒ½æ€ªä½ â€¦ å¬åˆ°è¿™äº›è¯, å†å¥½è„¾æ°”çš„äººä¼°è®¡éƒ½éš¾ä»¥æŽ¥å—, è„¾æ°”ä¸å¥½çš„ç›´æŽ¥å¼€å§‹æ‰“ä»–äº†å§! è¿™ç§äººæœ€ä¸å—å¾…è§, ä¹Ÿæœ€é­äººå”¾éª‚, è¿™ç§äººåœ¨å®žé™…å·¥ä½œä¸­, å¯èƒ½æ˜¯ä½ çš„é¢†å¯¼. å·æ‡’çš„ç¯®çƒè¿åŠ¨çš„ç¡®å¾ˆæ¶ˆè€—ä½“åŠ›, å¦‚æžœåœ¨ä¸‡ç®­é½å‘çš„æ—¶åˆ», æœ‰äººæ•…æ„æŽ‰é“¾å­, é‚£å°†æ˜¯åŠŸäºä¸€ç¯‘. å¤§å®¶åœ¨æ‰“çƒçš„æ—¶å€™, éƒ½åœ¨ä¸ºâ€è£èª‰â€è€Œæˆ˜, ä½†æ˜¯ååæœ‰äººä¼šä½¿ç‚¹å°å¿ƒçœ¼, èƒ½å°‘è·‘ä¸€æ­¥å°±å°‘è·‘ä¸€æ­¥, èƒ½æ”¾å¯¹æ–¹èµ°å°±æ”¾å¯¹æ–¹èµ°, ç»å¯¹ä¸ä¼¤å®³å¯¹æ–¹ä¸€æ¯›ä¸€çº¿. æ˜Žæ˜Žå¯ä»¥ç¨å¾®åŠªåŠ›ä¸€ä¸‹, å°±å¯ä»¥æ‹¿åˆ°ç¯®æ¿, ååè®©å¯¹æ–¹æ¯”è‡ªå·±è¿˜çŸ®å°çš„è½»è€Œæ˜“ä¸¾çš„æ‹¿èµ°äº†ç¯®æ¿. è¦çŸ¥é“æ¯”è‡ªå·±çŸ®å°çš„é‚£ä¸ªäºº, åªæ˜¯åŠªåŠ›çš„è·³äº†ä¸€ä¸‹. çƒåœºä¸Šè™½ç„¶ä¸æ˜¯è®©ä½ æ‹¼ä¸ªä½ æ­»æˆ‘æ´», ä¸è¦æ±‚ä½ å…¨åŠ›ä»¥èµ´, ä½†æ˜¯å°½åŠ›è€Œä¸ºæ€»æ˜¯è¦æœ‰çš„, è¿™æ˜¯ä¸€ç§æ€åº¦. åœ¨å®žé™…å·¥ä½œä¸­, è¿™ç§â€é˜Ÿå‹â€æ¯”æ¯”çš†æ˜¯, ä½†æ˜¯ä¸ä¸€å®šé­äººæ¨, æœ‰äº›è¿˜æ˜¯å¾ˆæ‹›äººå–œæ¬¢çš„, æ¯•ç«Ÿä»–ä»¬æ²¡æœ‰æŠ¢ä½ çš„åŠŸåŠ³, å¤„å¤„è®©ç€ä½ , æ²¡æœ‰ä»–ä»¬çš„è¿™äº›æ‰€è°“çš„ä»˜å‡º, å“ªèƒ½è¡¬æ‰˜å‡ºä½ çš„å…‰èŠ’. é¼“åŠ±ä½ çš„ä¸Šé¢è¯´çš„éƒ½æ˜¯ä¸€äº›â€è´Ÿèƒ½é‡â€, å¤§å®¶ä¸€ç¬‘è€Œè¿‡å§.ä¸‹é¢è¯´ç‚¹æ­£èƒ½é‡çš„. åœ¨çƒé˜Ÿä¸­, è¿˜æœ‰ä¸€ç§è¿™æ ·çš„äºº, ä»–ä¼šå¯Ÿè¨€è§‚è‰², è§‰å¾—ä½ ç´¯äº†, å°±å‘Šè¯‰å¤§å®¶: â€œæˆ‘ä»¬åº”è¯¥èŠ‚å¥æ…¢ä¸€ç‚¹, ç¼“å†²ä¸€ä¸‹.â€, å½“ä½ æ‰‹æ„Ÿä¸å¥½çš„æ—¶å€™, ä»–ä¼šå‘Šè¯‰ä½ , æ²¡äº‹, å¤šæ¥å‡ æ¬¡å°±å¥½äº†, ä¸è¦æœ‰åŽ‹åŠ›. å½“ä½ é˜²å®ˆé‡åˆ°å›°éš¾æ—¶, ä»–ä¼šé»˜é»˜çš„ç»™ä½ è¡¥é˜², ç»™ä½ æŽ¥åŠ›, æœ€å¤§ç¨‹åº¦çš„ç»™ä½ ä¿¡å¿ƒ. å½“å¤§å®¶å£«æ°”ä¸é«˜çš„æ—¶å€™, ä»–ä¼šç«™å‡ºæ¥æŠ•å‡ ä¸ªæ¼‚äº®çš„çƒ, æŠ‘æˆ–ç»™å¯¹æ–¹ä¸€ä¸ªå®Œç¾Žçš„ç›–å¸½, å¹¶ä¸”é¼“åŠ±å¤§å®¶ä¸è¦æ”¾å¼ƒ, ç»™å¤§å®¶ä¿¡å¿ƒ, åšå¤§å®¶åšå›ºçš„åŽç›¾. è¿™ç§äººé™¤äº†è‡ªå·±æœ‰ä¸€å®šçš„èƒ½åŠ›å¤–, è¿˜èƒ½é¡¾å…¨å¤§å±€, å¹¶ä¸”å¯ä»¥å¸®åŠ©é˜Ÿå‹, å¸®åŠ©å›¢é˜Ÿæ¸¡è¿‡éš¾å…³, ç¡®å®žéš¾å¾—. æ¸´æœ›è¿›æ­¥çš„çƒé˜Ÿä¸­, å­˜åœ¨ä¸€äº›æ–°äºº, æˆ–è€…æ˜¯æ¸´æœ›è‡ªå·±èƒ½æŠ•å‡ºæ¼‚äº®å¼§çº¿çƒçš„äºº, ä»–ä»¬æ¯”ä¸ä¸Šé‚£äº›èµ„åŽ†è€ä¸”ç»éªŒä¸°å¯Œçš„å‰è¾ˆ, ä½†æ˜¯ä»–ä»¬å†…å¿ƒæœ‰ä¸€ä»½ä¿¡å¿µ: â€œæˆ‘è¦å˜å¼º!â€. è¿™ç§äºº, è·Ÿä½ è®¨è®ºçƒæŠ€, è™šå¿ƒå‘ä½ å­¦ä¹ ä¸€åˆ‡å¯ä»¥æé«˜çƒæŠ€çš„æ–¹æ³•, å³ä½¿åœ¨è§‚ä¼—å¸­ä¸Š, ä»–ä»¬ä¹Ÿèƒ½èšç²¾ä¼šç¥žçš„è§‚çœ‹, è‡ªå·±é¢†æ‚Ÿå…¶ä¸­çš„å¥¥å¦™. åªè¦ä½ çº¦ä»–å‡ºæ¥æ‰“çƒ, ä»–éƒ½åœ¨ç¬¬ä¸€æ—¶é—´å‡ºçŽ°åœ¨çƒåœº, å› ä¸ºä»–ä¸æƒ³æ”¾å¼ƒå­¦ä¹ çš„æœºä¼š. ä¹…è€Œä¹…ä¹‹, è¿™äº›äººä¼šå˜å¾—è¶Šæ¥è¶ŠåŽ‰å®³, é€šè¿‡ä¸æ–­çš„å­¦ä¹ å’Œæ‘¸ç´¢, æœ‰äº†ä¸€å¥—è‡ªå·±çš„æ‰“æ³•, æ­¥ä¼ç¨³å¥, å†ä¹Ÿä¸æ˜¯é‚£ç§æŽ¥çƒä¸ç¨³, ä¼ çƒé¢‘é¢‘å¤±è¯¯çš„â€æ¯›å¤´å°å­â€äº†. è¿™ç§äºº, å€¼å¾—æˆ‘ä»¬åŽ»æŒ–æŽ˜å’Œé¼“åŠ±, å¦‚æžœä½ æ­£å¥½æ˜¯é‚£ä¸ªèµ„åŽ†è€ä¸”ç»éªŒä¸°å¯Œçš„å‰è¾ˆ, å°±ä¼ æŽˆâ€çœŸç»â€ç»™ä»–ä»¬å§.å¯¹äºŽä½ æ¥è¯´, æœ‰äººæ„¿æ„è·Ÿä½ å­¦ä¹ , è·Ÿä½ åˆ†äº«, ä¹Ÿæ˜¯ç¾Žäº‹ä¸€æ¡©. ä½•ä¹è€Œä¸ä¸ºå‘¢? æœ€åŽä¸ç®¡ä½ é‡åˆ°ä»€ä¹ˆæ ·çš„é˜Ÿå‹, å¦‚æžœä½ æ„¿æ„, è¯·èƒ¸æ€€å®‡å®™(å½“ç„¶ä¸æ˜¯ å­™è¿žåŸŽ é‚£ç§å•Š). ä¸‡äº‹ä¸‡ç‰©çš†æœ‰è”ç³», æ„¿ä½ èƒ½å¶å°”æ”¾ä¸‹æ‰‹ä¸­çš„å·¥ä½œ, åŽ»é€‰æ‹©å’Œçˆ±ä¸Šå¦ä¸€ç§ä¹è¶£. äº”ä¸€æ”¾å‡äº†, ç¥å¤§å®¶èŠ‚æ—¥å¿«ä¹!]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´» æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS: åº”ç”¨å†…æ‰“å¼€ AppStore]]></title>
    <url>%2F2017%2F04%2F15%2FiOS-%E5%BA%94%E7%94%A8%E5%86%85%E6%89%93%E5%BC%80-AppStore%2F</url>
    <content type="text"><![CDATA[åº”ç”¨åœºæ™¯æˆ‘ä»¬çš„ App éœ€è¦åœ¨ AppStore ä¸Šé¢æ‰“å¼€æŸä¸ª App æˆ–è€…æ¸¸æˆ, ç›®çš„æœ€å¸¸è§çš„æœ‰: 1.è¯„åˆ†è¯„è®º.2.æŽ¨èä¸‹è½½(App æˆ–è€…æ¸¸æˆ). å¾ˆå¤šå¼€å‘è€…çŸ¥é“æ‰“å¼€ AppStore åªéœ€è¦ä¸€å¥ä»£ç : 1[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;itunes app url&quot;]]; è¿™æ ·å°±å¾ˆç®€å•çš„æ‰“å¼€ AppStore äº†, ä½†æ˜¯äº§å“ç»ç†é—®äº†, èƒ½åœ¨æˆ‘ä»¬åº”ç”¨å†…æ‰“å¼€ AppStore å—? ä½ å½“æ—¶æ‡µé€¼äº†å—? ä¸è¦æ‡µé€¼, ä»¥åŽåªè¦é‡åˆ°ç±»ä¼¼è¿™ç§é—®é¢˜, ä½ å°±é—®äº§å“ç»ç†å“ªä¸ª APP è¿™æ ·åšäº†?ç„¶åŽ, ä»–å°±ç»™ä½ çœ‹åˆ«äººå®¶çš„æ•ˆæžœ, ä½ å°±ç†ç›´æ°”å£®åœ°è¯´: â€œåˆ«äººå¯ä»¥åšåˆ°çš„, æˆ‘ä»¬ä¹Ÿå¯ä»¥åšåˆ°!â€. åº”ç”¨å†…æ‰“å¼€ AppStore ä¹Ÿå¾ˆç®€å•.åœ¨ iOS6ä¹‹åŽ, è‹¹æžœå·²ç»ç»™æˆ‘ä»¬æä¾›äº† SKStoreProductViewController, å¤§å®¶çœ‹ä¸€ä¸‹æ–‡æ¡£, ä½ å°±ç¬‘äº†. 12SKStoreProductViewController/* View controller to display iTunes Store product information */ åº”ç”¨å†…æ‰“å¼€ AppStoreè¿™é‡Œæˆ‘ä»¥åœ¨åº”ç”¨å†…æ‰“å¼€ å¾®ä¿¡ ä¸ºä¾‹å­. æ•ˆæžœå›¾å¦‚ä¸‹: ä»Žæ•ˆæžœå›¾å¯ä»¥çœ‹å‡º, ç”¨æˆ·åœ¨è‡ªå·±çš„åº”ç”¨å†…æ‰“å¼€ AppStore åŽ, ä¸ä»…å¯ä»¥ä¸‹è½½æˆ–è€…æ‰“å¼€å¾®ä¿¡, è¿˜å¯ä»¥ç›´æŽ¥è¯„è®ºè¯„åˆ†, ç®€ç›´çˆ½(ä¹Ÿéš¾æ€ªäº§å“ç»ç†è¿™ä¹ˆå¹²). é‚£æˆ‘ä»¬è¯´ä¸€ä¸‹å¦‚ä½•å®žçŽ°ä¸Šé¢çš„æ•ˆæžœ. å®žçŽ°æ–¹æ¡ˆå’Œæ­¥éª¤ 1.åŒ…å«å¤´æ–‡ä»¶ #import &lt;StoreKit/StoreKit.h&gt; 2.å®žçŽ° SKStoreProductViewControllerDelegate å…·ä½“ä»£ç : 1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void)openAppFromAppStore:(NSString *)appid&#123; if (nil == appid || appid.length &lt;= 0) &#123; return; &#125; // åŠ ä¸ª loading SKStoreProductViewController *store = [[SKStoreProductViewController alloc] init]; store.delegate = self; NSDictionary&lt;NSString *, id&gt; *parameters = @&#123;SKStoreProductParameterITunesItemIdentifier: appid&#125;; [store loadProductWithParameters:parameters completionBlock:^(BOOL result, NSError *error) &#123; // ç»“æŸ loading if (error) &#123; NSLog(@&quot;error %@ with userInfo %@&quot;, error, [error userInfo]); // æç¤ºç”¨æˆ·å‘ç”Ÿäº†é”™è¯¯ // æˆ–è€…é€šè¿‡ URL æ‰“å¼€ AppStore App. // NSString *url = @&quot;https://itunes.apple.com/in/app/wechat/id414478124?mt=8&quot;; //[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; &#125; else &#123; [self presentViewController:store animated:YES completion:^&#123; &#125;]; &#125; &#125;];&#125;/// ç”¨æˆ·ç‚¹å‡»å–æ¶ˆä¼šæ‰§è¡Œè¯¥æ–¹æ³•- (void)productViewControllerDidFinish:(SKStoreProductViewController *)viewController&#123; [viewController dismissViewControllerAnimated:YES completion:^&#123; &#125;];&#125; è°ƒç”¨(@â€414478124â€ æ˜¯ å¾®ä¿¡ çš„)æ–¹å¼: 1[self openAppFromAppStore:@&quot;414478124&quot;]; ä¿®æ”¹ AppStore çš„å¯¼èˆªæ äº§å“ç»ç†è¯´, æ—¢ç„¶ä½ å·²ç»å®žçŽ°äº†ä¸Šé¢çš„åŠŸèƒ½, çœ‹çœ‹èƒ½ä¸èƒ½æŠŠ AppStore çš„å¯¼èˆªæ æ”¹ä¸€ä¸ªç‰›é€¼çš„é¢œè‰², å°±åƒä¸Šé¢çš„å¤§çº¢è‰². ~ å¯ä»¥, å¹²! ç›´æŽ¥ä¸Šä»£ç : 1234567891011121314151617181920212223242526272829303132333435363738394041- (void)openAppFromAppStore:(NSString *)appid&#123; if (nil == appid || appid.length &lt;= 0) &#123; return; &#125; // åŠ ä¸ª loading // å¯¼èˆªæ ä¸Šé¢çš„æ–‡å­—å’Œå›¾ç‰‡é¢œè‰²å˜äº† [[UINavigationBar appearance] setTintColor:[UIColor greenColor]]; // å¯¼èˆªæ çš„å¤§çº¢è‰²å‡ºæ¥äº† [[UINavigationBar appearance] setBarTintColor:[UIColor redColor]]; [UINavigationBar appearanceWhenContainedIn:[SKStoreProductViewController class], nil]; SKStoreProductViewController *store = [[SKStoreProductViewController alloc] init]; store.delegate = self; NSDictionary&lt;NSString *, id&gt; *parameters = @&#123;SKStoreProductParameterITunesItemIdentifier: appid&#125;; [store loadProductWithParameters:parameters completionBlock:^(BOOL result, NSError *error) &#123; // ç»“æŸ loading if (error) &#123; NSLog(@&quot;error %@ with userInfo %@&quot;, error, [error userInfo]); // æç¤ºç”¨æˆ·å‘ç”Ÿäº†é”™è¯¯ // æˆ–è€…é€šè¿‡ URL æ‰“å¼€ AppStore App. &#125; else &#123; [self presentViewController:store animated:YES completion:^&#123; &#125;]; &#125; &#125;];&#125; æ³¨æ„äº‹é¡¹1.æ‰“å¼€ SKStoreProductViewController ç›®å‰åªèƒ½ä½¿ç”¨ present æ–¹å¼, ä¸å¯ä»¥ä½¿ç”¨ push çš„æ–¹å¼. å¦åˆ™ä¼šæŠ¥é”™: 12//Terminating app due to uncaught exception &apos;SKUnsupportedPresentationException&apos;,//reason: &apos;SKStoreProductViewController must be used in a modal view controller&apos; 2.åŠ å…¥ loading åœ¨åº”ç”¨å†…æ‰“å¼€ AppStore, ä¸ºäº†ä¸è®©ç”¨æˆ·å‚»ç­‰(ç½‘ç»œä¸å¥½çš„æ—¶å€™, æ‰“å¼€å¾ˆæ…¢), å¯ä»¥åŠ å…¥ loading, ç¼“è§£ä¸€ä¸‹ç”¨æˆ·æ€¥èºçš„å¿ƒæƒ….]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>AppStore iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰¾åˆä¼™äºº, ä¸æ˜“]]></title>
    <url>%2F2017%2F03%2F26%2F%E6%89%BE%E5%90%88%E4%BC%99%E4%BA%BA-%E4%B8%8D%E6%98%93%2F</url>
    <content type="text"><![CDATA[æ—©åœ¨é«˜ä¸­æ—¶æœŸ, è¯»è¿‡ &lt;ä¸‰è¨€&gt; ä¸­çš„ &lt;è­¦ä¸–é€šè¨€&gt;, ç¬¬ä¸€ç« å†™çš„æ˜¯ ä¿žä¼¯ç‰™æ‘”ç´è°¢çŸ¥éŸ³, è®²çš„æ˜¯é’Ÿå­æœŸå’Œä¿žä¼¯ç‰™çš„æ•…äº‹. è¯»å®Œä¹‹åŽ, æ•´ä¸ªäººéƒ½è§‰å¾—éš¾å—, å¿ƒç†æœ‰è¯´ä¸å‡ºçš„æ»‹å‘³, çœ¼æ³ªç«Ÿå¤ºçœ¶è€Œå‡º. æµä¼ çš„è¿™é¦–è¯—, å¯ä»¥æ„Ÿå—ä¸‹. æ‘”ç¢Žç‘¶ç´å‡¤å°¾å¯’ï¼Œå­æœŸä¸åœ¨å¯¹è°å¼¹ï¼æ˜¥é£Žæ»¡é¢çš†æœ‹å‹ï¼Œæ¬²è§…çŸ¥éŸ³éš¾ä¸Šéš¾ã€‚åŠ¿åˆ©äº¤æ€€åŠ¿åˆ©å¿ƒï¼Œæ–¯æ–‡è°å¤å¿µçŸ¥éŸ³ï¼ä¼¯ç‰™ä¸ä½œé’ŸæœŸé€ï¼Œåƒå¤ä»¤äººè¯´ç ´ç´ã€‚ è‡ªå·±å·¥ä½œä¹‹åŽ, å¯¹ æ¬²è§…çŸ¥éŸ³éš¾ä¸Šéš¾ è¿™å¥è¯å°¤ä¸ºèµžåŒ. å¹´å°‘è½»ç‹‚çš„ä½ , è—ç€è¦æ”¹å˜ä¸–ç•Œçš„å¿ƒ, æ®‹é…·çš„çŽ°å®žä¼šæŠ¹åŽ»ä½ å‡¸èµ·çš„æ£±è§’, å²æœˆå’ŒçŽ¯å¢ƒä¼šè®©ä½ å˜å¾—è¶Šå‘ä¸å®‰. ä¸å®‰çš„ä¸–ç•Œ, è®©ä½ èŒ«ç„¶. äºŽæ˜¯, ç‚¹ä¸Šä¸€æ”¯çƒŸ, å›žé¡¾æŠ˜è…¾çš„äººç”Ÿ, ç¬‘å¹: åˆ«äººç¬‘æˆ‘å¤ªç–¯ç™«, æˆ‘ç¬‘ä»–äººçœ‹ä¸ç©¿. å¯æƒœ, æˆ‘ä»¬ä¸æ˜¯å”å¯…, æ²¡æœ‰è¿™ä»½æ´’è„±å’Œå¥”æ”¾, æ¯•ç«Ÿæ—¶ä»£ä¹Ÿå¤§ç›¸å¾„åº­. ~ å¥½äº†, å›žåˆ°çŽ°å®žä¸­æ¥. åˆšæ¯•ä¸š, ä½ ä¼šæŠŠä¸»è¦ç²¾åŠ›æ”¾åœ¨å¦‚ä½•æŠŠå·¥ä½œåšå¥½, ç»´æŒè‡ªå·±çš„ç”Ÿè®¡ä¸Šé¢, å¦‚æžœèƒ½è·Ÿèº«è¾¹çš„å¤§ç‰›å­¦åˆ°ä¸€äº›ä¸“ä¸šçŸ¥è¯†, å†è‹¦å†ç´¯, ä½ éƒ½æ˜¯å¼€å¿ƒçš„. æ¸æ¸åœ°, ä½ å‘çŽ°çŸ¥è¯†(ä¸“ä¸šçš„å’Œéžä¸“ä¸šçš„çŸ¥è¯†)çœŸæ˜¯è¦æ´»åˆ°è€å­¦åˆ°è€, æ°¸æ— æ­¢å¢ƒ, æ— æ³•åƒæ­¦ä¾ ç‰‡é‡Œé¢æ¼”å¾—é‚£æ ·ç§»èŠ±æŽ¥æœ¨, æ–—è½¬æ˜Ÿç§». å‘œå‘¼, è„šè¸å®žåœ°çš„åšå¥½æœ¬èŒå·¥ä½œ, é¡ºä¾¿èƒ½æ‹“å±•ä¸€ä¸‹è‡ªå·±çš„äº¤é™…åœˆ, æ‰©å¤§è‡ªå·±çš„çŸ¥è¯†é¢, è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„. å„è¡Œå„ä¸šéƒ½æœ‰éžå¸¸çªå‡ºçš„äººæ‰, å¾ˆå¤šæ—¶å€™, æˆ‘ä»¬åªèƒ½æœ›æ´‹å…´å¹. å¦‚æžœä½ èƒ½é‡åˆ°ä¸€ä¸ªè‚¯ä¸Žä½ åˆ†äº«å’Œäº¤æµ, æˆ–è€…æ˜¯æ„¿æ„å°†è‡ªå·±çš„å®žè·µåˆ†äº«ç»™ä½ çš„äºº, é‚£ä½ ç®—æ˜¯ä¸Šè¾ˆå­ç§¯äº†å¤§å¾·äº†. é˜¿å¼¥é™€ä½›! æˆ‘æŠŠè¿™æ ·çš„äººç§°ä¹‹ä¸º æ©äºº, ä¹Ÿç®—æ˜¯ çŸ¥éŸ³. ä»¥å‰, å¾ˆå¤šæœ‹å‹ä¼šé—®å¦‚æžœå°†æ¥è‡ªå·±å¼€å…¬å¸, æ˜¯å¦æ„¿æ„æŽ¥å—çŽ°åœ¨çš„è‡ªå·±, æˆ‘çš„å›žç­”æ˜¯ä¸€å®šæŽ¥å—. å¦‚æžœè¿˜æœ‰äººé—®è¿™ä¸ªé—®é¢˜, æˆ‘ä¼šå¦å¤–å†è¿½åŠ ä¸€ä¸ªé—®é¢˜: å¦‚æžœä½ å¼€å…¬å¸, ä½ æ˜¯å¦æ„¿æ„æŽ¥å—å’Œä½ çŽ°åœ¨ä¸€èµ·å·¥ä½œçš„åŒäº‹?æˆ–è€…è¯´ä½ æ˜¯å¦æ„¿æ„è®©ä»–æˆä¸ºä½ çš„åˆä¼™äºº? è¿™äº›é—®é¢˜, çœ‹ä¼¼çŽ©ç¬‘, å®žåˆ™å¾ˆçŽ°å®žå¾ˆæ®‹é…·, ä¸€æ—¦ä½ å†³å®šè¦åŽ»åšæˆæŸä»¶äº‹æƒ…, ç«‹å¿—è¦å®žçŽ°è‡ªå·±çš„æŠ±è´Ÿå’Œç†æƒ³çš„æ—¶å€™, ä½ çš„ç«‹åœºä¼šå’Œå…¶ä»–äººåƒå·®å¤–åˆ«.é¦–å…ˆè¦è€ƒè™‘çš„æ˜¯è¦å’Œè°ä¸€èµ·å…±è°‹äº‹, æ‰èƒ½çœŸæ­£çš„å¸®åˆ°è‡ªå·±, å¹¶ä¸”ä¹Ÿèƒ½å¸®åˆ°åˆ«äºº.å› ä¸ºé€‰æ‹©æ˜¯åŒå‘çš„, èƒ½æ‰¾åˆ°å’Œä½ ä¸€æ‹å³åˆçš„äºº, ä¹Ÿç¡®å®žä¸æ˜“.ä½†æ„¿ä»»ä½•ä¸€ä¸ªæ¸´æœ›æˆåŠŸå¹¶ä»˜å‡ºè¡ŒåŠ¨çš„äºº, èƒ½æ‰¾åˆ°è‡ªå·±çš„åˆä¼™äºº, æ‰¾åˆ°è‡ªå·±çš„çŸ¥éŸ³. çœŸæ­£çš„æˆåŠŸè€…, ä¸æ˜¯æ²‰æµ¸åœ¨å¤šå°‘äººè®©ä½ æˆåŠŸçš„å–œæ‚¦ä¸­, è€Œæ˜¯ä½ è®©å¤šå°‘äººå’Œä½ ä¸€èµ·åˆ†äº«äº†æˆåŠŸçš„å–œæ‚¦çš„äºº. è¯´åˆ°è¿™é‡Œ, æœ¬äººåªæ˜¯æƒ³è¯´æ˜Žç™½ä¸€ä¸ªé“ç†, é€ç»™å³å°†æˆ–è€…å·²ç»åœ¨èŒåœºå¥‹æ–—çš„äºº: è¸è¸å®žå®žçš„åšäº‹å¹¶æ²¡æœ‰é”™, ä½†æ˜¯æ‰¾åˆ°å€¼å¾— â€œæ‰˜ä»˜ç»ˆèº«â€ çš„äººç¡®å®žä¸æ˜“, ä½ çŽ°åœ¨èƒ½åšçš„åªæœ‰ç”¨çŸ¥è¯†æ¥æ­¦è£…è‡ªå·±, è®©è‡ªå·±å˜å¼º. åœ¨èŒåœºä¸­, ä½ ä¼šé‡åˆ°å¾ˆå¤šè®©ä½ ä¸çˆ½çš„äººæˆ–è€…äº‹. è®°ä½, è¦åšåˆ° å¯¹äº‹ä¸å¯¹äºº, ä¸è¦å¤ªå§”å±ˆè‡ªå·±, å¤§ä¸ˆå¤«èƒ½å±ˆèƒ½ä¼¸, è¯¥å‡ºæ‰‹æ—¶å°±å‡ºæ‰‹, æ²¡æœ‰ä»€ä¹ˆå¤§ä¸äº†. å¦‚æžœçœŸçš„è§‰å¾—æœ‰äº›äººæˆ–è€…æœ‰äº›äº‹ä¸å€¼å¾—ä½ æµªè´¹æ—¶é—´, å°±ç¦»å®ƒä»¬è¿œç‚¹. æƒ¹ä¸èµ·ä½†å¯ä»¥èº²å¾—èµ·, ä½ è¯´å‘¢? é…Œä¸€å£¶å°é…’, è€å¤«èŠå‘å°‘å¹´ç‹‚!]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>æ€è€ƒ ç”Ÿæ´» åˆä¼™äºº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®©è‡ªå·±å˜å¼º]]></title>
    <url>%2F2017%2F03%2F10%2F%E8%AE%A9%E8%87%AA%E5%B7%B1%E5%8F%98%E5%BC%BA%2F</url>
    <content type="text"><![CDATA[å½“ä½ è¯»åˆ°è¿™ç¯‡æ–‡ç« çš„æ—¶å€™, æˆ‘å…¶å®žè¿˜ä¸çŸ¥é“ã€Žæ€Žä¹ˆè®©è‡ªå·±å˜å¼ºã€.å…·ä½“è¯´, å°±æ˜¯æ²¡æœ‰ä¸€å¥—è®©ä½ æˆ–è€…è®©ä»–å˜å¼ºçš„æ­¦æž—ç§˜ç±. åªèƒ½ç»“åˆè‡ªå·±ç»åŽ†çš„äº‹, åˆ†äº«ç»™å¤§å®¶, å¸Œæœ›èƒ½æ„ŸåŒèº«å—! è¿™å‡ å¤©åŠ ç­åŠ åœ°æœ‰ç‚¹çŒ›, æµ‘ç„¶ä¸çŸ¥å‘¨æœ«è½®å›žäº†.å¿ƒç†æ€»æ˜¯åœ¨å¿µå¨, å¥½ä¹…æ²¡æœ‰åœ¨å…¬ä¼—å·æ¶‚é¸¦äº†, æ‰‹ç—’ç—’äº†.è¶ä»Šæ™šå›žæ¥æ—©(22:30å›žåˆ°å®¶), å°±åŠ¨ç¬”äº†. ã€Žè®©è‡ªå·±å˜å¼ºã€, è¿™å¥è¯è¯´ç€å¾ˆç®€å•, ä½†ä¸æ˜¯ä»»ä½•äººéƒ½èƒ½æ„è¯†åˆ°è¿™å‡ ä¸ªå­—å¸¦æ¥çš„åŠ›é‡. åœ¨ã€Œæ˜Žæœé‚£äº›äº‹å„¿ã€ä¸­æœ‰è¿™ä¹ˆä¸€æ®µ: æˆ‘ä»¬ç»å¸¸ä¼šäº§ç”Ÿä¸€ä¸ªç–‘é—®ï¼Œé‚£å°±æ˜¯æ€Žæ ·æ‰èƒ½èŽ·å¾—å…¶ä»–å›½å®¶åŠå…¶äººæ°‘çš„å°Šé‡ï¼Œåœ¨ä¸–ç•Œä¸Šé£Žå…‰è‡ªè±ªä¸€æŠŠï¼Œå…¶å®žç­”æ¡ˆå¾ˆç®€å•â€”â€”å›½å®¶å¼ºå¤§ã€‚ çœ‹åˆ°è¿™é‡Œ, æ„Ÿè§¦é¢‡æ·±. åœ¨å›¢é˜Ÿä¸­æˆé•¿å›¢é˜Ÿæˆé•¿çš„ä¸»è§‚æ¡ä»¶æ˜¯å›¢é˜Ÿçš„æˆå‘˜è¦æˆé•¿, ä¸ç„¶å›¢é˜Ÿå“ªé‡Œæ¥çš„æˆé•¿. å¦‚æžœä½ æ˜¯ä½œä¸ºä¸€ä¸ªå›¢é˜Ÿæˆ–è€…å°ç»„çš„è´Ÿè´£äºº, ä¼šé¢ä¸´å„ç§å„æ ·çš„é—®é¢˜, æ¯”å¦‚éœ€è¦è·Ÿå›¢é˜Ÿä»¥å¤–çš„éƒ¨é—¨è°ˆåˆä½œ, éœ€è¦è·Ÿè€æ¿æ±‡æŠ¥å·¥ä½œ, è¿˜è¦å¤„ç†å†…éƒ¨çš„é—®é¢˜ç­‰ç­‰è¯¸å¦‚æ­¤ç±»! æˆ‘è§‰å¾—å®‰é‚¦éœ€å®‰å†…, ä¹Ÿå°±æ˜¯è¯´è¦å…ˆæžå®šå›¢é˜Ÿå†…éƒ¨çš„å„ç§äº‹ç‰©, äººæ˜¯æ¯”è¾ƒå¤æ‚çš„æ„Ÿæƒ…åŠ¨ç‰©, ä½ ä¸å¥½ä¹Ÿä¸èƒ½æŽ§åˆ¶åˆ«äººçš„æƒ…ç»ª. æ‰€ä»¥, éœ€è¦å¯¹äº‹ä¸å¯¹äºº!ä½ ä¸èƒ½è¯´, ä½ çœ‹ä»–é•¿å¾—ä¸å¥½çœ‹, å°±çŸ¥é“å·¥ä½œåšä¸å¥½ç±»ä¼¼çš„è¯. è¿™æ ·ä¸€è¯´, åŸºæœ¬ä¸¤ä¸ªäººå°±ç»“ä¸‹äº†æ¢å­.è¿Ÿæ—©ä¼šçˆ†å‘. é¦–å…ˆ, è¦ç»™å›¢é˜Ÿæˆå‘˜å¸Œæœ›, è®©å¤§å®¶éƒ½è®¤è¯†åˆ°æœ‰ç»Ÿä¸€çš„ç›®æ ‡. å…¶æ¬¡, è®©æ¯ä¸ªäººç»™å‡ºå·¥ä½œå’Œå®žè¡Œè®¡åˆ’, åˆ¶å®šè‡ªå·±çš„è€ƒæ ¸ç›®æ ‡.å¯¹åšå‡ºçªå‡ºè´¡çŒ®çš„æˆå‘˜å¥–åŠ±, æ¯ä¸ªäººéƒ½éœ€è¦å¾—åˆ°å°Šé‡, è€Œå¥–åŠ±æ˜¯æœ€å¤§çš„å°Šé‡. æœ€åŽ, åŠ å¼ºä¸Žå›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„æ²Ÿé€š, äº’ç›¸å¸®åŠ©, è®©å¤§å®¶èƒ½å¤Ÿç›¸äº’ä¿¡ä»»å’Œé¼“åŠ±, è‰¯å¥½æœ‰æ•ˆçš„æ²Ÿé€š, äº‹åŠåŠŸå€. ä½œä¸ºå›¢é˜Ÿè´Ÿè´£äºº, è‚¯å®šå¸Œæœ›æ‰‹ä¸‹çš„äººå„ä¸ªéªå‹‡å–„æˆ˜, ç™¾æˆ˜ç™¾èƒœ, ä½†æ˜¯çŽ°å®žä¸­å¾ˆéš¾åšåˆ°, å…¶å®žä¹Ÿæ²¡æœ‰å¿…è¦.è¥¿æ¸¸è®°å‘Šè¯‰æˆ‘ä»¬, å”åƒ§å¸¦é¢†çš„å›¢é˜Ÿæ‰æ˜¯æœ€å¥½çš„å›¢é˜Ÿ. å°‘åŸ‹æ€¨å¤šç»™äºˆå¸®åŠ©æ¯ä¸ªäººç”Ÿæ´»å’Œå·¥ä½œçš„çŽ¯å¢ƒä¸ä¸€æ ·, åœ¨ä¸åŒçš„åœ°ç‚¹ä¸åŒçš„æ—¶é—´é¢å¯¹ä¸åŒçš„äº‹æƒ…, éƒ½ä¼šæœ‰ä¸åŒçš„çœ‹æ³•. ä¸–ç•Œä¸Šä»»ä½•ä¸€ç§é€‰æ‹©, éƒ½æ˜¯å‘½ä¸­æ³¨å®šçš„, æ²¡æœ‰äººèƒ½å¼ºè¿«ä½ åŽ»åšå‡ºä»»ä½•é”™è¯¯çš„é€‰æ‹©, é™¤äº†ä½ è‡ªå·±. åœ¨è‡ªå·±æ‰€å¤„çš„çŽ¯å¢ƒä¸­, è¦ä¹ˆä½ èƒ½æ”¹å˜çŽ¯å¢ƒä½¿å…¶æ¥é€‚åº”è‡ªå·±, è¦ä¹ˆå°±ç¦»å¼€è¿™ä¸ªè‡ªå·±ä¸é€‚åº”çš„çŽ¯å¢ƒ, ä¸è¦åŽ»æŠ±æ€¨. å”‰å£°å¹æ°”, ä¸ä»…ä»…å½±å“è‡ªå·±çš„å·¥ä½œæ•ˆçŽ‡å’Œç”Ÿæ´»è´¨é‡, è¿˜ä¼šå½±å“åˆ°åˆ«äºº.æˆå¤©åœ¨æŠ±æ€¨, è§‰å¾—è°è°éƒ½ä¸è¡Œ, è‡ªå·±æ‰æ˜¯æœ€ç‰›é€¼çš„, æ—¥è¡Œè§ä¹…, ä½ å°±æ˜¯é‚£ä¸ªå……æ»¡è´Ÿèƒ½é‡çš„äºº, å½“åˆ«äººè§‰æ‚Ÿåˆ°çš„æ—¶å€™, å°±ä¼šç¦»ä½ è€ŒåŽ», å²‚ä¸å’Žç”±è‡ªå–?!æˆ‘æƒ³è¿™ä¹Ÿæ˜¯å¾®ä¿¡æœ‹å‹åœˆåªæœ‰ç‚¹èµžæ²¡æœ‰éžç‚¹èµžçš„åŽŸå› å§! å¦‚æžœè§‰å¾—è‡ªå·±çš„åŒäº‹æˆ–è€…æœ‹å‹æœ‰æ‰€æ¬ ç¼º, å°±æƒ³åŠžæ³•åŽ»å¸®åŠ©ä»–, é¼“åŠ±ä»–, æŠŠä½ è®¤ä¸ºä¸€äº›å¥½çš„æ–¹å¼å’Œæ–¹æ³•ä¼ æŽˆç»™ä»–. è¯´ä¸å®šå“ªå¤©å› ä¸ºä½ çš„ä¸€å¥è¯æˆ–è€…ä¸€ä¸ªæ–¹æ³•, ä»–å°±èµ°ä¸Šäººç”Ÿå·…å³°äº†, å“ˆå“ˆ! ä»ŽçŽ°åœ¨å¼€å§‹, å¿˜è®°åŸ‹æ€¨, ç»™äºˆåˆ«äººæ›´å¤šçš„å¸®åŠ©å’Œé¼“åŠ±. åŸ¹å…»è‡ªå·±çš„ä¸“æ³¨åŠ›ä¸“æ³¨åŠ›, æ˜¯ä¸€ä¸ªå¾ˆç¥žå¥‡çš„ä¸œè¥¿. å¦‚æžœä¸€ä¸ªäººæ²¡æœ‰ä¸“æ³¨åŠ›, å¾ˆéš¾å†æœ‰æ‰€çªç ´, æ®è¯´ç‰›é¡¿æ˜¯åœ¨åšæ¢¦çš„æ—¶å€™, å‘æ˜Žäº†å¾ˆå¤šæŠ˜ç£¨å¹¿å¤§é’å°‘å¹´çš„ç‰›é¡¿å®šå¾‹çš„. æ¯ä¸ªäººåœ¨è‡ªå·±çš„è¡Œä¸šä¸Š, å¤šå°‘éƒ½æœ‰çŸ­æ¿. æœ‰çŸ­æ¿æ˜¯æƒ…æœ‰å¯åŽŸçš„, ä½†æ˜¯é¦–å…ˆä½ å¾—è®¤è¯†åˆ°è‡ªå·±çš„çŸ­æ¿, ç„¶åŽå†æŒ‡å®šè®¡åˆ’åŽ»çªç ´ä»–. è¦æƒ³è¿›æ­¥, å¿…é¡»é¢å¯¹è‡ªå·±çš„ä¸è¶³. æ¯”å¦‚, å·¥ä½œä¸Šéœ€è¦ä½ å­¦ä¼šæŸç§æŠ€æœ¯, å¦‚æžœåœ¨æŸä¸ªæ—¶é—´ç‚¹, ä½ æ²¡æœ‰å­¦ä¼š, å¯èƒ½å°±ä¼šä¸¢æŽ‰é¥­ç¢—, ä½ å°±ä¼šä¸é¡¾ä¸€åˆ‡çš„åŽ»å­¦ä¹ , ç›´åˆ°å­¦ä¼šä¼šç”¨ä¸ºæ­¢. è¿™ä¸ªè¿‡ç¨‹, ä½ å°±æ˜¯åœ¨ä¸“æ³¨è¿™ä»¶äº‹æƒ…, å›žå¤´æƒ³æƒ³å’¬å’¬ç‰™, è¿˜æ˜¯å¯ä»¥åŠžåˆ°çš„, æ²¡æœ‰ä»€ä¹ˆå¤§ä¸äº†çš„. æ¯å¤©ç»™è‡ªå·±ä¸€ç‚¹æ—¶é—´, ä¸“æ³¨åŽ»åšä¸€ä»¶äº‹æƒ…, åšæŒä¸‹æ¥, ä½ ä¼šå‘çŽ°, å­¦ä¹ å’Œè¿›æ­¥å°±æ˜¯ feel feel å€å„¿çˆ½. æœ€åŽåˆ†äº«ç»™å¤§å®¶ä¸€å¥è¯: ä¸èƒ½æ”¹å˜åˆ«äººçš„æ—¶å€™, è¯•ç€æ”¹å˜ä¸€ä¸‹è‡ªå·±æˆ–è®¸å°±èƒ½æŠŠäº‹æƒ…å˜é€šäº†.]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬” ç”Ÿæ´» åæ€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tomcat8 é…ç½® HTTPS]]></title>
    <url>%2F2017%2F02%2F15%2FTomcat8-%E9%85%8D%E7%BD%AE-HTTPS%2F</url>
    <content type="text"><![CDATA[åšå®¢ [Tomcat8 åŸŸåé…ç½®] ä»‹ç»äº†å¦‚ä½•åœ¨æœ¬åœ°é…ç½® Tomcat8 çš„åŸŸåä»¥åŠé€šè¿‡åŸŸåæ¥è®¿é—®å¯¹åº”çš„èµ„æº. ä»Šå¤©ç»§ç»­è·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•é…ç½® Tomcat8 çš„ HTTPS (å•å‘è®¤è¯), æœ¬ç¯‡åšå®¢çš„ä¸»è¦å†…å®¹å¦‚ä¸‹: 1.é…ç½® Tomcat çš„ HTTPS.2.é€šè¿‡ HTTPS + ip çš„æ–¹å¼æ¥è®¿é—®èµ„æº.3.é€šè¿‡ HTTPS + åŸŸå çš„æ–¹å¼æ¥è®¿é—®èµ„æº. é…ç½®è¦æ±‚1.å®‰è£…äº† JDK, å¹¶é…ç½®äº†å…¶ç›¸å…³çš„çŽ¯å¢ƒå˜é‡.å¯å‚è€ƒ Mac é…ç½® JDK1.8. 2.å®‰è£…äº† Tomcat8, å¹¶é…ç½®äº†å…¶ç›¸å…³çš„çŽ¯å¢ƒå˜é‡.å¯å‚è€ƒ Mac é…ç½® Tomcat8. ç”Ÿæˆè¯ä¹¦ èŽ·å–è¯ä¹¦å¯ä»¥åŽ»è´­ä¹°, è¿™é‡Œæ˜¯åœ¨æœ¬åœ°æœºå™¨æ­å»º, ä½¿ç”¨ JDK è‡ªå¸¦çš„å·¥å…· keytool ç”Ÿæˆå³å¯. æ‰“å¼€ mac ç»ˆç«¯, æ‰§è¡Œ: 1keytool -v -genkey -alias tomcat -keyalg RSA -keystore ~/Desktop/tomcat.keystore ç´§æŽ¥ç€, ä¼šå‡ºçŽ°ä¸€äº›è®©ä½ è¾“å…¥ä¿¡æ¯çš„äº¤äº’ä¿¡æ¯, ç¬¬ä¸€ä¸ªæ˜¯è®©ä½ è¾“å…¥ å¯†é’¥åº“å¯†ç (å£ä»¤), æˆ‘è¾“å…¥çš„æ˜¯ 1234567, å…¶ä»–ä¿¡æ¯å¯ä»¥ä»»æ„è¾“å…¥å†…å®¹, åœ¨æœ€åŽä¸€æ­¥, é—®ä½ ç”Ÿæˆçš„ å¯†é’¥å£ä»¤ å’Œ å¯†é’¥åº“çš„å£ä»¤ æ˜¯å¦ç›¸åŒ, å¦‚æžœç›¸åŒå°±ç›´æŽ¥å›žè½¦, æˆ‘è¿™é‡Œæ˜¯ç›´æŽ¥å›žè½¦çš„, å³å¯†ç ç›¸åŒ, éƒ½æ˜¯ 1234567. è¿™æ ·å°±ç”Ÿæˆäº†æ‰€è°“çš„è¯ä¹¦. é…ç½® HTTPS é€šè¿‡ä¿®æ”¹ server.xml æ¥é…ç½®. å°† tomcat.keystore æ–‡ä»¶å¤åˆ¶åˆ° Tomcat çš„ conf ç›®å½•. ä¿®æ”¹ server.xml æ–‡ä»¶, å¢žåŠ ä¸€ä¸ª Connector, å†…å®¹å¦‚ä¸‹: 123&lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot; clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystoreFile=&quot;conf/tomcat.keystore&quot; keystorePass=&quot;1234567&quot;/&gt; æ³¨æ„, keystoreFile æ˜¯è¯ä¹¦æ–‡ä»¶, keystorePass æ˜¯å¯†ç , è¿™é‡Œé…ç½®ä¸€å®šè¦æ­£ç¡®. é…ç½® HTTPS + IPé…ç½®ä¸€ä¸ªè™šæ‹Ÿä¸»æœº, ä¿®æ”¹ server.xml æ–‡ä»¶, å¢žåŠ  Host: 1234&lt;Host name=&quot;192.168.1.103&quot; debug=&quot;0&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt; &lt;Context path=&quot;&quot; docBase=&quot;test&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; crossContext=&quot;true&quot;/&gt; &lt;Logger className=&quot;org.apache.catalina.logger.FileLogger&quot; directory=&quot;logs&quot; prefix=&quot;tot_log.&quot; suffix=&quot;.txt&quot; timestamp=&quot;true&quot;/&gt;&lt;/Host&gt; é…ç½® name=â€192.168.1.103â€ æ˜¯ä½ æœ¬æœºçš„ ip åœ°å€. è¿™ä¸ªåœ¨åšå®¢ [iOS: èŠèŠ UIWebView ç¼“å­˜] ä¸­æœ‰è¯¦ç»†çš„ä»‹ç», è¿™é‡Œä¸å†èµ˜è¿°. å¯åŠ¨ Tomcat, è¿›è¡Œæµ‹è¯•. è¿™é‡Œéœ€è¦åˆ° Tomcat çš„ bin ç›®å½•ä¸‹, æ‰§è¡Œ: 1sudo startup.sh å¯åŠ¨æˆåŠŸåŽ, æ‰“å¼€æµè§ˆå™¨, è¾“å…¥: https://192.168.1.103:8443/test.html, è¿™ä¸ªæ—¶å€™, ä¼šå¼¹å‡ºå¦‚ä¸‹çš„è­¦å‘Š(æç¤ºä¸å®‰å…¨): ç›´æŽ¥ç‚¹å‡» Advanced åŽå†ç‚¹å‡» Proceed to 192.168.1.103:8443(unsafe) å¤„ç†å³å¯çœ‹åˆ°é¡µé¢å†…å®¹. é…ç½® HTTPS + åŸŸåä¿®æ”¹ server.xml, å¢žåŠ  Connector: 123&lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot; clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystoreFile=&quot;conf/tomcat.keystore&quot; keystorePass=&quot;1234567&quot;/&gt; ä¿®æ”¹ server.xml, å¢žåŠ  Host: 1234&lt;Host name=&quot;www.mark.com&quot; debug=&quot;0&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt; &lt;Context path=&quot;&quot; docBase=&quot;test&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; crossContext=&quot;true&quot;/&gt; &lt;Logger className=&quot;org.apache.catalina.logger.FileLogger&quot; directory=&quot;logs&quot; prefix=&quot;tot_log.&quot; suffix=&quot;.txt&quot; timestamp=&quot;true&quot;/&gt;&lt;/Host&gt; ä¿®æ”¹ /etc/host æ–‡ä»¶, å¢žåŠ : 1127.0.0.1 www.mark.com å¯åŠ¨ Tomcat, åœ¨ bin ç›®å½•, æ‰§è¡Œ: 12shutdown.shsudo startup.sh å¯åŠ¨æˆåŠŸåŽ, æ‰“å¼€æµè§ˆå™¨, è¾“å…¥ https://www.mark.com:8443/test.html, å¦‚æžœå¼¹å‡ºè­¦å‘Š, å¯ä»¥åƒå¦‚ä¸Šå¤„ç†æ¥æ˜¾ç¤ºé¡µé¢å†…å®¹. å¦‚æžœä½ è¿™é‡Œé…ç½®å¤±è´¥äº†, è¯·ä¿®æ”¹ä¸€ä¸‹ç«¯å£å·, å¦‚å°† 8443 æ”¹ä¸º 8433.é‡å¯ Tomcat åœ¨è¯•ä¸€ä¸‹. å‚è€ƒApache å®˜æ–¹æ–‡æ¡£: ssl-howto]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>Tomcat Java Apache</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tomcat8 åŸŸåé…ç½®]]></title>
    <url>%2F2017%2F02%2F13%2FTomcat8-%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[åšå®¢ [Mac é…ç½® Tomcat8] ä»‹ç»äº†åœ¨ Mac ä¸‹å®‰è£…å’Œå¯åŠ¨ Tomcat. æŽ¥ä¸‹æ¥ä»‹ç», å¦‚ä½•åœ¨æœ¬åœ°é…ç½® Tomcat8 çš„åŸŸå. ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºŽ Tomcat å¦‚ä½•é…ç½®å•åŸŸåæˆ–è€…å¤šåŸŸåçš„æ–‡ç« , å¾ˆå¤šéƒ½æ˜¯ç¿»è¯‘æˆ–è€…å¤åˆ¶åˆ«äººçš„, æ ¹æœ¬æ²¡æœ‰å®žè·µè¿‡, å®³äººä¸æµ…! ç»“åˆè‡ªå·±çš„å®žè·µ, æŠŠé…ç½®çš„æ•´ä¸ªè¿‡ç¨‹åˆ†äº«ç»™å¤§å®¶, å¸Œæœ›èƒ½å¸®åˆ°ä½ . ä¸‹é¢è¿›å…¥æ­£é¢˜. ä¿®æ”¹ç«¯å£åœ¨ Tomcat çš„å®‰è£…(å…¶å®žæ˜¯è§£åŽ‹çš„)ç›®å½• /conf ä¸‹æœ‰ server.xml æ–‡ä»¶. å°†ä¸‹é¢å†…å®¹: 123&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; /&gt; ä¿®æ”¹ä¸º: 123&lt;Connector port=&quot;80&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; /&gt; æ·»åŠ  web é¡¹ç›® è¿™ä¸€æ­¥ä¸»è¦æ˜¯ä¸ºäº†åŽé¢æµ‹è¯•. å¾ˆç®€å•, åœ¨ Tomcat çš„å®‰è£…ç›®å½• webapps ä¸‹é¢æ–°å»º test æ–‡ä»¶å¤¹, é‡Œé¢åˆ›å»ºä¸€ä¸ª html æ–‡ä»¶å³å¯.è¿™é‡Œå°†å…¶å‘½åä¸º test.html. test.html å†…å®¹è§åŽé¢çš„é™„å½•å³å¯. é…ç½®åŸŸå å¢žåŠ è™šæ‹Ÿä¸»æœºé…ç½®.è¿˜éœ€è¦ä¿®æ”¹ server.xml æ–‡ä»¶. åœ¨ server.xml æ–‡ä»¶ä¸­, åœ¨æ ‡ç­¾ å’Œ ä¹‹é—´å¢žåŠ ä¸‹é¢çš„å†…å®¹: 1234&lt;Host name=&quot;www.mark.com&quot; debug=&quot;0&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt; &lt;Context path=&quot;&quot; docBase=&quot;test&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; crossContext=&quot;true&quot;/&gt; &lt;Logger className=&quot;org.apache.catalina.logger.FileLogger&quot; directory=&quot;logs&quot; prefix=&quot;tot_log.&quot; suffix=&quot;.txt&quot; timestamp=&quot;true&quot;/&gt;&lt;/Host&gt; å…¶ä¸­, www.mark.com æ˜¯æˆ‘è‡ªå·±ä»»æ„å–çš„ä¸€ä¸ªåŸŸå, docBase=â€testâ€ æ˜¯æŒ‡å‘ä¸Šé¢æ–°å»ºçš„ test ç›®å½•. é…ç½®åŸŸåè§£æžç”±äºŽéƒ¨ç½²åœ¨æœ¬åœ°, éœ€è¦ä¿®æ”¹ host. ä¿®æ”¹ /etc/host æ–‡ä»¶, éœ€è¦ sudo æƒé™: 1sudo vim /etc/host å¢žåŠ å¦‚ä¸‹å†…å®¹: 1127.0.0.1 www.mark.com éªŒè¯é…ç½® è¿™ä¸€æ­¥, éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ. å¯åŠ¨ Tomcat, è¿™é‡Œçš„æ“ä½œæ¯”è¾ƒç‰¹æ®Š, éœ€è¦ sudo æƒé™æ¥å¯åŠ¨ Tomcat, å¦åˆ™ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯: 12org.apache.coyote.AbstractProtocol.init Failed to initialize end point associated with ProtocolHandler [&quot;http-nio-80&quot;] java.net.SocketException: Permission denied å› ä¸º, åªæœ‰ root ç”¨æˆ·æ‰å¯ä»¥ä½¿ç”¨ 1024 ä»¥ä¸‹çš„ç«¯å£å·. æ­£ç¡®å§¿åŠ¿: cd è¿›å…¥ Tomcat çš„ bin ç›®å½• 1cd ~/Tomcat/bin æ‰§è¡Œ: 1sudo startup.sh æˆåŠŸåŽ, æ‰“å¼€æµè§ˆå™¨, è¾“å…¥ http://www.mark.com/test.html, å³å¯çœ‹åˆ°é¡µé¢å†…å®¹. é…ç½®å¦ä¸€ä¸ªåŸŸåå¯ä»¥é…ç½®å¦å¤–çš„ä¸€ä¸ªåŸŸå, æ¯”å¦‚ www.ithome.com, å³å¤šå¢žåŠ ä¸€ä¸ªè™šæ‹Ÿä¸»æœºé…ç½®. åœ¨ server.xml å¢žåŠ : 1234&lt;Host name=&quot;www.ithome.com&quot; debug=&quot;0&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt; &lt;Context path=&quot;&quot; docBase=&quot;test&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; crossContext=&quot;true&quot;/&gt; &lt;Logger className=&quot;org.apache.catalina.logger.FileLogger&quot; directory=&quot;logs&quot; prefix=&quot;tot_log.&quot; suffix=&quot;.txt&quot; timestamp=&quot;true&quot;/&gt;&lt;/Host&gt; é…ç½® DNS, åŒç†ä¿®æ”¹ etc/host æ–‡ä»¶: 1127.0.0.1 www.ithome.com å¯ä»¥çœ‹å‡º, åœ¨æµè§ˆå™¨è¾“å…¥ http://www.ithome.com/test.html å’Œ http://www.mark.com/test.html æ•ˆæžœæ˜¯ä¸€æ ·çš„. é™„å½•test.html æ–‡ä»¶å†…å®¹ 123456789101112131415161718192021222324252627282930313233343536&lt;p&gt;&lt;em&gt;Sample&lt;/em&gt; text&lt;/p&gt;&lt;p&gt;Now I input another line, with fancy&lt;u&gt;&lt;strong&gt;&lt;em&gt;styles&lt;/em&gt;&lt;/strong&gt;&lt;/u&gt;.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Sample&lt;/em&gt; text&lt;/p&gt;&lt;p&gt;Now I input another line, with fancy &lt;u&gt;&lt;strong&gt;&lt;em&gt;styles&lt;/em&gt;&lt;/strong&gt;&lt;/u&gt;.&lt;/p&gt;&lt;p&gt; mark.zhang is an itman.&lt;/p&gt;&lt;style&gt;.button &#123; background-color: #4CAF50; border: none; color: white; padding: 15px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 86px; margin: 50px 200px 100px 300px; cursor: pointer; border-radius: 15;&#125;&lt;/style&gt;&lt;p&gt; &lt;button type=&quot;button&quot; onclick=&quot;myFunction()&quot; class=&quot;button&quot;&gt;Try it&lt;/button&gt;&lt;/p&gt;&lt;script&gt; function myFunction() &#123; alert(&quot;Blog: www.veryitman.com&quot;); &#125;;&lt;/script&gt;]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>Tomcat Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ATS: HTTPS è®¤è¯]]></title>
    <url>%2F2017%2F02%2F08%2FATS-HTTPS-%E8%AE%A4%E8%AF%81%2F</url>
    <content type="text"><![CDATA[åœ¨ ATS: HTTP/HTTPS åè®®ä»‹ç» ä¸­ä»‹ç»äº†ä¸€äº›å…³äºŽ HTTP/HTTPS çš„æ¦‚å¿µä»¥åŠç›¸å…³çš„åŸºæœ¬çŸ¥è¯†. ä»Šå¤©æ¥èŠèŠå…³äºŽ HTTPS çš„è®¤è¯æ–¹å¼å’Œè¿‡ç¨‹. è¯´ HTTPS è®¤è¯å‰, å…ˆäº†è§£å‡ ä¸ªæ¦‚å¿µ. å…³äºŽåŠ å¯†çš„å‡ ä¸ªæ¦‚å¿µ1. SSL åè®®åŠ å¯†æ–¹å¼ SSL æ—¢ç”¨äº†å¯¹ç§°åŠ å¯†, ä¹Ÿç”¨äº†éžå¯¹ç§°åŠ å¯†(å…¬é’¥åŠ å¯†). åœ¨å»ºç«‹ä¼ è¾“é“¾è·¯æ—¶, SSL é¦–å…ˆå¯¹å¯¹ç§°åŠ å¯†çš„å¯†é’¥ä½¿ç”¨å…¬é’¥è¿›è¡Œéžå¯¹ç§°åŠ å¯†, é“¾è·¯å»ºç«‹å¥½ä¹‹åŽï¼ŒSSL å¯¹ä¼ è¾“å†…å®¹ä½¿ç”¨å¯¹ç§°åŠ å¯†. ä¸‹é¢æ˜¯ä¸¤ç§åŠ å¯†æ–¹å¼çš„å¯¹æ¯”: 1.å¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†é‡‡ç”¨äº†å¯¹ç§°å¯†ç ç¼–ç æŠ€æœ¯ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯æ–‡ä»¶åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ï¼Œå³åŠ å¯†å¯†é’¥ä¹Ÿå¯ä»¥ç”¨ä½œè§£å¯†å¯†é’¥ï¼Œè¿™ç§æ–¹æ³•åœ¨å¯†ç å­¦ä¸­å«åš å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¯¹ç§°åŠ å¯†ç®—æ³•ä½¿ç”¨èµ·æ¥ç®€å•å¿«æ·ï¼Œå¯†é’¥è¾ƒçŸ­ï¼Œä¸”ç ´è¯‘å›°éš¾ï¼Œé™¤äº†æ•°æ®åŠ å¯†æ ‡å‡†ï¼ˆDESï¼‰ï¼Œå¦ä¸€ä¸ªå¯¹ç§°å¯†é’¥åŠ å¯†ç³»ç»Ÿæ˜¯å›½é™…æ•°æ®åŠ å¯†ç®—æ³•ï¼ˆIDEAï¼‰ï¼Œå®ƒæ¯” DES çš„åŠ å¯†æ€§å¥½ï¼Œè€Œä¸”å¯¹è®¡ç®—æœºåŠŸèƒ½è¦æ±‚ä¹Ÿæ²¡æœ‰é‚£ä¹ˆé«˜.IDEA åŠ å¯†æ ‡å‡†ç”± PGPï¼ˆPretty Good Privacyï¼‰ç³»ç»Ÿä½¿ç”¨. è¯¥åŠ å¯†æ–¹å¼, é€Ÿåº¦å¿«, å¯åŠ å¯†å†…å®¹è¾ƒå¤§, ç”¨æ¥åŠ å¯†ä¼šè¯è¿‡ç¨‹ä¸­çš„æ¶ˆæ¯. 2.å…¬é’¥åŠ å¯†(éžå¯¹ç§°åŠ å¯†) 1976å¹´ï¼Œç¾Žå›½å­¦è€… Dime å’Œ Henman ä¸ºè§£å†³ä¿¡æ¯å…¬å¼€ä¼ é€å’Œå¯†é’¥ç®¡ç†é—®é¢˜ï¼Œæå‡ºä¸€ç§æ–°çš„å¯†é’¥äº¤æ¢åè®®ï¼Œå…è®¸åœ¨ä¸å®‰å…¨çš„åª’ä½“ä¸Šçš„é€šè®¯åŒæ–¹äº¤æ¢ä¿¡æ¯ï¼Œå®‰å…¨åœ°è¾¾æˆä¸€è‡´çš„å¯†é’¥ï¼Œè¿™å°±æ˜¯â€œå…¬å¼€å¯†é’¥ç³»ç»Ÿâ€.ç›¸å¯¹äºŽ å¯¹ç§°åŠ å¯†ç®—æ³• è¿™ç§æ–¹æ³•ä¹Ÿå«åš éžå¯¹ç§°åŠ å¯†ç®—æ³•.ä¸Žå¯¹ç§°åŠ å¯†ç®—æ³•ä¸åŒï¼Œéžå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼šå…¬å¼€å¯†é’¥ï¼ˆpublickeyï¼‰å’Œç§æœ‰å¯†é’¥ï¼ˆprivatekeyï¼‰. å…¬å¼€å¯†é’¥ä¸Žç§æœ‰å¯†é’¥æ˜¯ä¸€å¯¹ï¼Œå¦‚æžœç”¨å…¬å¼€å¯†é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ç§æœ‰å¯†é’¥æ‰èƒ½è§£å¯†ï¼›å¦‚æžœç”¨ç§æœ‰å¯†é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé‚£ä¹ˆåªæœ‰ç”¨å¯¹åº”çš„å…¬å¼€å¯†é’¥æ‰èƒ½è§£å¯†.å› ä¸ºåŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•å«ä½œéžå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚ è¯¥åŠ å¯†æ–¹å¼, é€Ÿåº¦è¾ƒæ…¢, èƒ½æä¾›æ›´å¥½çš„èº«ä»½è®¤è¯æŠ€æœ¯, ç”¨æ¥åŠ å¯†å¯¹ç§°åŠ å¯†çš„å¯†é’¥. 2. æ•°å­—è¯ä¹¦ä¸€ç§æ–‡ä»¶çš„åç§°ï¼Œå¥½æ¯”ä¸€ä¸ªæœºæž„æˆ–äººçš„ç­¾åï¼Œèƒ½å¤Ÿè¯æ˜Žè¿™ä¸ªæœºæž„æˆ–äººçš„çœŸå®žæ€§. å…¶ä¸­åŒ…å«çš„ä¿¡æ¯ï¼Œç”¨äºŽå®žçŽ°ä¸Šè¿°åŠŸèƒ½. 3. åŠ å¯†å’Œè®¤è¯åŠ å¯†æ˜¯æŒ‡é€šä¿¡åŒæ–¹ä¸ºäº†é˜²æ­¢é“­æ„Ÿä¿¡æ¯åœ¨ä¿¡é“ä¸Šè¢«ç¬¬ä¸‰æ–¹çªƒå¬è€Œæ³„æ¼ï¼Œå°†æ˜Žæ–‡é€šè¿‡åŠ å¯†å˜æˆå¯†æ–‡ï¼Œå¦‚æžœç¬¬ä¸‰æ–¹æ— æ³•è§£å¯†çš„è¯ï¼Œå°±ç®—èŽ·å¾—å¯†æ–‡ä¹Ÿæ— èƒ½ä¸ºåŠ›. è®¤è¯æ˜¯æŒ‡é€šä¿¡åŒæ–¹ä¸ºäº†ç¡®è®¤å¯¹æ–¹æ˜¯å€¼å¾—ä¿¡ä»»çš„æ¶ˆæ¯å‘é€æˆ–æŽ¥å—æ–¹ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å‡èº«ä»½çš„éžæ³•è€…ï¼Œé‡‡å–çš„ç¡®è®¤èº«ä»½çš„æ–¹å¼. åªæœ‰åŒæ—¶è¿›è¡Œäº†åŠ å¯†å’Œè®¤è¯æ‰èƒ½ä¿è¯é€šä¿¡çš„å®‰å…¨ï¼Œå› æ­¤åœ¨ SSL é€šä¿¡åè®®ä¸­è¿™ä¸¤è€…(åŠ å¯†å’Œè®¤è¯)éƒ½è¢«ä½¿ç”¨. åŠ å¯†ä¸€èˆ¬ä½¿ç”¨ å¯¹ç§°åŠ å¯†ç®—æ³• å’Œ ä¸å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œä¸å¯¹ç§°åŠ å¯†æœ€å¸¸è§çš„ç®—æ³•å°±æ˜¯ RSA. 4. æ¶ˆæ¯æ‘˜è¦è¿™ä¸ªæŠ€æœ¯ä¸»è¦æ˜¯ä¸ºäº†é¿å…æ¶ˆæ¯è¢«ç¯¡æ”¹. æ¶ˆæ¯æ‘˜è¦æ˜¯æŠŠä¸€æ®µä¿¡æ¯, é€šè¿‡æŸç§ç®—æ³•, å¾—å‡ºä¸€ä¸²å­—ç¬¦ä¸².è¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯æ¶ˆæ¯çš„æ‘˜è¦ï¼Œå¦‚æžœæ¶ˆæ¯è¢«ç¯¡æ”¹(å‘ç”Ÿäº†å˜åŒ–), é‚£ä¹ˆæ‘˜è¦ä¹Ÿä¸€å®šä¼šå‘ç”Ÿå˜åŒ–(å¦‚æžœ2ä¸ªä¸åŒçš„æ¶ˆæ¯ç”Ÿæˆçš„æ‘˜è¦æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆè¿™å°±å«å‘ç”Ÿäº†ç¢°æ’ž). æ¶ˆæ¯æ‘˜è¦çš„ç®—æ³•ä¸»è¦æœ‰ MD5 å’Œ SHAï¼Œåœ¨è¯ä¹¦é¢†åŸŸï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨ SHA(å®‰å…¨å“ˆå¸Œç®—æ³•). æ•°å­—è¯ä¹¦ã€åŠ å¯†å’Œè®¤è¯ã€æ¶ˆæ¯æ‘˜è¦ä¸‰ä¸ªæŠ€æœ¯ç»“åˆèµ·æ¥ï¼Œå°±æ˜¯åœ¨ HTTPS ä¸­å¹¿æ³›åº”ç”¨çš„è¯ä¹¦(certificate), è¯ä¹¦æœ¬èº«æºå¸¦äº†åŠ å¯†/è§£å¯†çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥æ ‡è¯†è‡ªå·±çš„èº«ä»½ï¼Œä¹Ÿè‡ªå¸¦æ¶ˆæ¯æ‘˜è¦. HTTPS è®¤è¯æ–¹å¼åˆ†ä¸ºå•å‘å’ŒåŒå‘è®¤è¯. å•å‘è®¤è¯ å•å‘è®¤è¯è¾ƒç®€å•, åªéœ€è¦æœåŠ¡ç«¯æ ¡éªŒæœåŠ¡ç«¯çš„è¯ä¹¦çš„åˆæ³•æ€§. è¯¥è®¤è¯è¿‡ç¨‹ä½¿ç”¨ä¸‹é¢çš„æµç¨‹å›¾æ¥è¡¨ç¤º: åŒå‘è®¤è¯åŒå‘è®¤è¯å’Œå•å‘è®¤è¯åŽŸç†åŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯éœ€è¦åŒæ–¹éƒ½æ ¡éªŒå¯¹æ–¹çš„è¯ä¹¦çš„åˆæ³•æ€§. è¯¥è®¤è¯è¿‡ç¨‹ä½¿ç”¨ä¸‹é¢çš„æµç¨‹å›¾æ¥è¡¨ç¤º: éšæœºæ•°çš„äº§ç”Ÿä¸ç®¡æ˜¯å•å‘è®¤è¯, è¿˜æ˜¯åŒå‘è®¤è¯, éƒ½æœ‰éšæœºæ•°çš„äº§ç”Ÿå’Œå‘é€. ä¸‹å›¾æ˜¯éšæœºæ•°çš„äº§ç”Ÿæµç¨‹å›¾: ç”Ÿæˆå¯¹è¯å¯†é’¥, ä¸€å…±éœ€è¦ä¸‰ä¸ªéšæœºæ•°. æŽ¨èæŽ¨èåœ¨çº¿æµç¨‹å›¾å·¥å…·: ProcessOn. æŽ¨èåšæ–‡: 1.å›¾è§£SSL/TLSåè®® 2.HTTPSçš„ä¸ƒä¸ªè¯¯è§£(è¯‘æ–‡) 3.å¯¹ç§°åŠ å¯†å’Œéžå¯¹ç§°åŠ å¯†ä»‹ç»å’ŒåŒºåˆ« æœ¬æ–‡ä¸­å‚è€ƒäº†ä¸Šé¢æ–‡ç« çš„éƒ¨åˆ†å†…å®¹, æ„Ÿè°¢è¿™äº›ä½œè€….]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>HTTP HTTPS TLS SSL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ATS: HTTP/HTTPS åè®®ä»‹ç»]]></title>
    <url>%2F2017%2F02%2F06%2FATS-HTTP-HTTPS-%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[è‹¹æžœåœ¨2017å¹´è¦æ±‚ App å¿…é¡»æ”¯æŒ HTTPS, ä¸è¿‡, è¿™ä¸ªè¦æ±‚, æœ€åŽåˆè¢«è‹¹æžœè‡ªå·±å»¶æœŸäº†. æˆ‘åªèƒ½è¯´, è‹¹æžœçš„å¼€å‘å“¥å“¥ä»¬çœŸä¼šçŽ©â€¦ è¯¥ç³»åˆ—åšå®¢ä»‹ç» iOS ä¸Šé¢çš„ ATS ä»¥åŠç›¸å…³çš„ HTTPS çŸ¥è¯†, åˆ†ä¸ºä¸‰ç¯‡æ¥åˆ†äº«. æœ¬ç¯‡æ˜¯ç¬¬ä¸€ç¯‡. ç¬¬äºŒç¯‡: ATS: HTTPS è®¤è¯ ä»Šå¤©å…ˆç®€å•äº†è§£ä¸€ä¸‹ HTTPS ä»¥åŠç›¸å…³çš„çŸ¥è¯†. ç›¸å…³åè¯å…ˆäº†è§£ä¸€ä¸‹ç›¸å…³çš„å¸¸ç”¨åè¯. 1.HTTPHyperText Transfer Protocol, è¶…æ–‡æœ¬ä¼ è¾“åè®®. 2.HTTPSHyper Text Transfer Protocol over Secure Socket Layer, å®‰å…¨çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®. 3.SSLSecure Socket Layer, å®‰å…¨å¥—æŽ¥å­—å±‚. 4.TLSTransport Layer Security, ä¼ è¾“å±‚å®‰å…¨.å…¶å‰èº«å°±æ˜¯ SSL. 5.ATSApp Transport Security, åº”ç”¨ä¼ è¾“å®‰å…¨. åè®®ä»‹ç»HTTPHyperText Transfer Protocol, è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§åè®®ï¼Œæ‰€æœ‰ WWW æ–‡ä»¶å¿…é¡»éµå¾ªçš„æ ‡å‡†. HTTP åè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„, ä¹Ÿå°±æ˜¯æ˜Žæ–‡çš„, å› æ­¤ä½¿ç”¨ HTTP åè®®ä¼ è¾“éšç§ä¿¡æ¯éžå¸¸ä¸å®‰å…¨. é»˜è®¤ä½¿ç”¨ TCP ç«¯å£ä¸º 80. HTTPSå®‰å…¨çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®, Hyper Text Transfer Protocol over Secure Socket Layer, ç½‘æ™¯å…¬å¼è®¾è®¡äº† SSL(Secure Socket Layer) åè®®ç”¨äºŽå¯¹ HTTP åè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä¿è¯ä¼šè¯è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§. é»˜è®¤ä½¿ç”¨ TCP ç«¯å£ä¸º 443. æ‹†åˆ† HTTPSSSL åè®®åŠ å¯†æ–¹å¼SSL åè®®å³ç”¨åˆ°äº†å¯¹ç§°åŠ å¯†ä¹Ÿç”¨åˆ°äº†éžå¯¹ç§°åŠ å¯†(å…¬é’¥åŠ å¯†)ï¼Œåœ¨å»ºç«‹ä¼ è¾“é“¾è·¯æ—¶ï¼ŒSSL é¦–å…ˆå¯¹å¯¹ç§°åŠ å¯†çš„å¯†é’¥ä½¿ç”¨å…¬é’¥è¿›è¡Œéžå¯¹ç§°åŠ å¯†ï¼Œé“¾è·¯å»ºç«‹å¥½ä¹‹åŽï¼ŒSSL å¯¹ä¼ è¾“å†…å®¹ä½¿ç”¨å¯¹ç§°åŠ å¯†. 1.å¯¹ç§°åŠ å¯†é€Ÿåº¦é«˜ï¼Œå¯åŠ å¯†å†…å®¹è¾ƒå¤§ï¼Œç”¨æ¥åŠ å¯†ä¼šè¯è¿‡ç¨‹ä¸­çš„æ¶ˆæ¯. 2.å…¬é’¥åŠ å¯†åŠ å¯†é€Ÿåº¦è¾ƒæ…¢ï¼Œä½†èƒ½æä¾›æ›´å¥½çš„èº«ä»½è®¤è¯æŠ€æœ¯ï¼Œç”¨æ¥åŠ å¯†å¯¹ç§°åŠ å¯†çš„å¯†é’¥. HTTP+SSLHTTPS, å¯ä»¥çœ‹åšæ˜¯ HTTP+SSL, æ‰€ä»¥é‡ç‚¹åœ¨ SSL ä¸Šé¢. HTTPSåœ¨ HTTP (è¶…æ–‡æœ¬ä¼ è¾“åè®®)åŸºç¡€ä¸Šæå‡ºçš„ä¸€ç§å®‰å…¨çš„ HTTP åè®®ï¼Œå› æ­¤å¯ä»¥ç§°ä¸ºå®‰å…¨çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚ HTTP åè®®ç›´æŽ¥æ”¾ç½®åœ¨ TCP åè®®ä¹‹ä¸Šï¼Œè€Œ HTTPS æå‡ºåœ¨ HTTP å’Œ TCP ä¸­é—´åŠ ä¸Šä¸€å±‚åŠ å¯†å±‚. ä»Žå‘é€ç«¯çœ‹ï¼Œè¿™ä¸€å±‚è´Ÿè´£æŠŠ HTTP çš„å†…å®¹åŠ å¯†åŽé€åˆ°ä¸‹å±‚çš„ TCPï¼Œä»ŽæŽ¥æ”¶æ–¹çœ‹ï¼Œè¿™ä¸€å±‚è´Ÿè´£å°† TCP é€æ¥çš„æ•°æ®è§£å¯†è¿˜åŽŸæˆ HTTP çš„å†…å®¹. SSL(Secure Socket Layer)æ˜¯ Netscape å…¬å¸è®¾è®¡çš„ä¸»è¦ç”¨äºŽ WEB çš„å®‰å…¨ä¼ è¾“åè®®.å®ƒåœ¨ HTTPS åè®®æ ˆä¸­è´Ÿè´£å®žçŽ°ä¸Šé¢æåˆ°çš„åŠ å¯†å±‚. ä¸€ä¸ª HTTPS åè®®æ ˆå¤§è‡´æ˜¯è¿™æ ·çš„ï¼š TLSHTTPSï¼Œä¹Ÿç§°ä½œ HTTP over TLS. TLS(ä¼ è¾“å±‚å®‰å…¨, Transport Layer Security) çš„å‰èº«æ˜¯ SSLï¼ŒTLS 1.0 é€šå¸¸è¢«æ ‡ç¤ºä¸º SSL 3.1ï¼ŒTLS 1.1 ä¸º SSL 3.2ï¼ŒTLS 1.2 ä¸º SSL 3.3. è‹¹æžœ ATS(App Transport Security), è¦æ±‚æ”¯æŒ HTTPS çš„ TLS ç‰ˆæœ¬æœ€ä½Žä¸º V1.2. ä¸‹å›¾æè¿°äº†åœ¨ TCP/IP åè®®æ ˆä¸­ TLS(å„å­åè®®ï¼‰å’Œ HTTP çš„å…³ç³»: å…¶ä¸­ Handshake protocolï¼ŒChange Ciper Spec protocol å’Œ Alert protocol ç»„æˆäº† SSL Handshaking Protocols. SSL å’Œ TLS çš„å‘å±•åŽ†å²: 1994å¹´ï¼ŒNetScape å…¬å¸è®¾è®¡äº† SSL åè®®ï¼ˆSecure Sockets Layerï¼‰çš„ 1.0 ç‰ˆï¼Œä½†æ˜¯æœªå‘å¸ƒ. 1995å¹´ï¼ŒNetScape å…¬å¸å‘å¸ƒ SSL 2.0 ç‰ˆï¼Œå¾ˆå¿«å‘çŽ°æœ‰ä¸¥é‡æ¼æ´ž. 1996å¹´ï¼ŒSSL 3.0 ç‰ˆé—®ä¸–ï¼Œå¾—åˆ°å¤§è§„æ¨¡åº”ç”¨. 1999å¹´ï¼Œäº’è”ç½‘æ ‡å‡†åŒ–ç»„ç»‡ ISOC æŽ¥æ›¿ NetScape å…¬å¸ï¼Œå‘å¸ƒäº† SSL çš„å‡çº§ç‰ˆ TLS 1.0 ç‰ˆ. 2006å¹´å’Œ2008å¹´ï¼ŒTLS è¿›è¡Œäº†ä¸¤æ¬¡å‡çº§ï¼Œåˆ†åˆ«ä¸º TLS 1.1 ç‰ˆå’Œ TLS 1.2 ç‰ˆ.æœ€æ–°çš„å˜åŠ¨æ˜¯2011å¹´ TLS 1.2 çš„ä¿®è®¢ç‰ˆ. TLS 1.3 æ”¹åŠ¨ä¼šæ¯”è¾ƒå¤§ï¼Œç›®å‰è¿˜åœ¨è‰æ¡ˆé˜¶æ®µ. HTTP å’Œ HTTPS åŒºåˆ«HTTPS å’Œ HTTP çš„åŒºåˆ«ä¸»è¦ä¸ºä»¥ä¸‹å››ç‚¹: HTTPS åè®®éœ€è¦åˆ° CA ç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦å¾ˆå°‘ï¼Œéœ€è¦äº¤è´¹. HTTP æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜Žæ–‡ä¼ è¾“ï¼ŒHTTPS åˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„ SLL/TLS åŠ å¯†ä¼ è¾“åè®®(éžå¯¹ç§°åŠ å¯†). HTTP å’Œ HTTPS ä¸åŒçš„è¿žæŽ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯ 80ï¼ŒåŽè€…æ˜¯ 443. HTTP çš„è¿žæŽ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPS åè®®æ˜¯ç”± SSL+HTTP åè®®æž„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯” HTTP åè®®å®‰å…¨.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ATS HTTP HTTPS SSL TLS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RN: Yarn]]></title>
    <url>%2F2017%2F02%2F05%2FRN-Yarn%2F</url>
    <content type="text"><![CDATA[React Native æ­£å¼ç‰ˆå·²ç»æ›´æ–°åˆ° 0.41.1 äº†. æœ€è¿‘ä½¿ç”¨ react-native-cli æ¥åˆ›å»º React Native å·¥ç¨‹, æç¤ºå¦‚ä¸‹ä¿¡æ¯: 123This will walk you through creating a new React Native project in /Users/mark/workspace/mzProjs/ReactNative/LatestRNInstalling react-native...Consider installing yarn to make this faster: https://yarnpkg.com å…¶å®ž Yarn ä¹Ÿä¸€ç›´åœ¨æ›´æ–°, æœ€æ–°ç‰ˆæœ¬ v0.20.0. å®˜ç½‘å¯¹åº”çš„æœ‰ä¸­æ–‡ç‰ˆæœ¬å’Œä¸­æ–‡æ–‡æ¡£, å¯ä»¥ ç‚¹æ­¤è¿›å…¥. Yarn ç®€ä»‹ä¸€å¥è¯ä»‹ç»: A new package manager for JavaScript Yarn æ˜¯ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿç®¡ç†ä½ çš„ä»£ç ï¼Œå¹¶ä¸Žå…¨ä¸–ç•Œçš„å¼€å‘è€…åˆ†äº«ä½ çš„ä»£ç . Yarn æ˜¯é«˜æ•ˆã€å®‰å…¨å’Œå¯é . 1.é«˜æ•ˆ: ä½¿ç”¨äº†ç¼“å­˜, å¯ä»¥å¾ˆå¿«çš„èŽ·å–å·²ç» download çš„åŒ….2.å®‰å…¨: åœ¨ä»£ç è¢«æ‰§è¡Œä¹‹å‰ï¼Œä¼šä½¿ç”¨CheckSumç®—æ³•éªŒè¯æ¯ä¸€ä¸ªä¾èµ–åŒ…çš„å®Œæ•´æ€§.3.å¯é : åœ¨ä¸åŒå¹³å°(windows/mac/linux)åªè¦æ˜¯åŒä¸€ä»½é…ç½®æ–‡ä»¶, æ‰§è¡Œç»“æžœæ˜¯ä¸€æ ·çš„. è¿˜æœ‰å¾ˆå¤šç‰¹æ€§: 123456789101112Offline ModeIf you&apos;ve installed a package before, you can install it again without any internet connection.DeterministicThe same dependencies will be installed the same exact way across every machine regardless of install order.Network PerformanceYarn efficiently queues up requests and avoids request waterfalls in order to maximize network utilization.Same PackagesInstall any package from npm and keep your package workflow the same.Network ResilienceA single request failing won&apos;t cause an install to fail. Requests are retried upon failure.Flat ModeResolve mismatching versions of dependencies to a single version to avoid creating duplicates. Yarn èƒ½å¤Ÿè®©ä½ ä½¿ç”¨å…¶ä»–å¼€å‘è€…å¼€å‘çš„ä»£ç ï¼Œè®©ä½ æ›´å®¹æ˜“çš„å¼€å‘è½¯ä»¶. ä»£ç æ˜¯é€šè¿‡ä¾èµ–åŒ… (æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºç»„ä»¶). åœ¨æ¯ä¸€ä¸ªä¾èµ–ä¸­ä¼šå®šä¹‰ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œç”¨æ¥æè¿°è¿™ä¸ªä¾èµ–åŒ…ä¸­æ‰€æœ‰è¦è¢«åˆ†äº«çš„ä»£ç . Yarn æ˜¯å¼€æºçš„, ç‚¹å‡» Github äº†è§£æ›´å¤š. å¯¹æ¯” npm å’Œ yarn, å¯ä»¥é˜…è¯»æ–‡ç« :Yarn vs npm: Everything You Need to Know ä¸­æ–‡ç‰ˆ:è¯‘ Yarn vs npm: ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ å®‰è£… Yarnå…·ä½“å®‰è£…çš„æ•™ç¨‹, å¯ä»¥å‚è€ƒå®˜ç½‘çš„ å®‰è£…æ•™ç¨‹. åœ¨ MacOS ä¸Šé¢ä½¿ç”¨ Homebrew å®‰è£…å¾ˆæ–¹ä¾¿, ä¸¤ä¸ªå‘½ä»¤å³å¯å®Œæˆ. ä¸‹é¢å…·ä½“è¯´è¯´æ“ä½œæ­¥éª¤. å¼ºçƒˆå¼€å‘åŒäº‹è´­ä¹°ä¸€ä¸ª VPN, è¿™ä¸ªå¹´å¤´æ²¡æœ‰ VPN, æ—¥å­ä¸å¥½è¿‡. 1.æ›´æ–° brew 1brew update --verbose æœ€åŽåŠ ä¸Šå‚æ•° --verbose, ä¸ç„¶ç­‰å¾…çš„è¿‡ç¨‹å¾ˆç…Žç†¬, æ²¡æœ‰ä»»ä½•æç¤ºä¿¡æ¯. 2.å®‰è£… yarn 1brew install yarn åœ¨å®‰è£…è¿‡ç¨‹ä¸­, å¦‚æžœæç¤ºå¦‚ä¸‹ä¿¡æ¯: 12345Please note by default only English locale support is provided. If you needfull locale support you should either rebuild with full icu: `brew reinstall node --with-full-icu`or add full icu data at runtime following: https://github.com/nodejs/node/wiki/Intl#using-and-customizing-the-small-icu-build å¯ä»¥é‡æ–°å®‰è£…å·²ç»å®‰è£…çš„ node, æ‰§è¡Œå‘½ä»¤: 1brew reinstall node --with-full-icu åœ¨æ‰§è¡Œä¸Šé¢å®‰è£…å‘½ä»¤çš„æ—¶å€™, å¦‚æžœå¡ä½ä¸åŠ¨æˆ–è€…å¾ˆä¹…, Ctrl+C ç»ˆæ­¢å½“å‰çš„æ“ä½œ, é‡æ–°æ“ä½œä¸€éå³å¯. å®‰è£…æˆåŠŸåŽ, å¯ä»¥æŸ¥çœ‹å®‰è£…çš„ç‰ˆæœ¬ä¿¡æ¯, æ‰§è¡Œ 1yarn --verbose ä¼šæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯: 12345yarn install v0.20.0verbose Performing &quot;GET&quot; request to &quot;https://yarnpkg.com/latest-version&quot;.[1/4] ðŸ” Resolving packages...success Already up-to-date.âœ¨ Done in 0.29s. ä½¿ç”¨ brew å®‰è£… Yarn åŽ, ä¸éœ€è¦è®¾ç½®çŽ¯å¢ƒå˜é‡. Yarn ä¸Ž React Nativeåœ¨ React Native 0.37 ç‰ˆæœ¬ä¸­å·²ç»åŠ å…¥äº†å¯¹ Yarn çš„æ”¯æŒ. å¯ä»¥åœ¨ React Native çš„å®˜æ–¹çš„è¿™ç¯‡ Blog æ‰¾åˆ°æ›´å¤šä¿¡æ¯. ç”¨ Yarn åˆ›å»º React Native å·¥ç¨‹ æ—¢ç„¶ RN å·²ç»æ”¯æŒäº† Yarn, é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ Yarn æ¥ç®¡ç†å’Œåˆ›å»º RN å·¥ç¨‹äº†. ä½¿ç”¨ Yarn, å¿…é¡»æ»¡è¶³å‡ ä¸ªæ¡ä»¶: 1.react-native-cli çš„ç‰ˆæœ¬ä¸èƒ½å°äºŽ 1.2.0 ç‰ˆæœ¬.2.React Natvie å¿…é¡»æ˜¯ 0.37 åŠä»¥ä¸Šçš„ç‰ˆæœ¬. 1react-native init MZLatestRN å½“ä½ å®‰è£…å¥½ Yarn åŽ, æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤å¯ä»¥å‡ºçŽ°æç¤ºä¿¡æ¯: 123This will walk you through creating a new React Native project in ~/workspace/Projs/ReactNative/MZLatestRNUsing yarn v0.20.0Installing react-native... å¯ä»¥çœ‹å‡º, RN ä¼šä½¿ç”¨ Yarn æ¥åˆ›å»ºå·¥ç¨‹. å…¶ä¸­, ~/workspace/Projs/ReactNative æ˜¯æˆ‘æœ¬åœ°çš„å·¥ä½œç›®å½•. MZLatestRN æ˜¯è¦åˆ›å»ºçš„ RN å·¥ç¨‹åç§°. å¦‚æžœä½ çš„ç½‘ç»œå¥½çš„è¯, å¤§æ¦‚1åˆ†é’Ÿå°±å¯ä»¥åˆ›å»ºæˆåŠŸ. å·¥ç¨‹ç›®å½•: å¯ä»¥çœ‹å‡ºå¤šäº† yarn.lock æ–‡ä»¶. Yarn è¿˜åœ¨èŒå£®æˆé•¿, å¸Œæœ›å®ƒè¶Šæ¥è¶Šå¥½, æ›´å¤šçš„ä½¿ç”¨å’Œå·¥ä½œåŽŸç†å¯ä»¥å‚è€ƒ å®˜æ–¹ Doc, ä»‹ç»çš„å¾ˆè¯¦ç»†.]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>ReactNative iOS Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰è£… PHP é‡åˆ°çš„é—®é¢˜]]></title>
    <url>%2F2017%2F02%2F02%2F%E5%AE%89%E8%A3%85-PHP-%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹åœ¨åšå®¢ PHP å¼€å‘å‡†å¤‡ ä»‹ç»äº†å®‰è£…å¹¶éƒ¨ç½² PHP ç¨‹åºåˆ° Nginx. ä»Šå¤©åˆ†äº«åœ¨å®‰è£…ä¸­é‡åˆ°çš„é—®é¢˜å’Œå…¶ä»–å·¥å…·çš„å®‰è£…, ä»¥åŠå¸¸ç”¨çš„æ“ä½œ, åŒ…æ‹¬ MySQL, Nginx ç­‰. pecl å®‰è£… PEAR æ˜¯ PHP æ‰©å±•ä¸Žåº”ç”¨åº“(PHP Extension and Application Repository) çš„ç¼©å†™ã€‚å®ƒæ˜¯ä¸€ä¸ª PHP æ‰©å±•åŠåº”ç”¨çš„ä¸€ä¸ªä»£ç ä»“åº“ï¼Œç®€å•åœ°è¯´ï¼ŒPEAR å°±æ˜¯ PHP çš„ CPAN. PECL (PHP Extension Community Library)ï¼ŒPHP çš„æ‰©å±•åº“ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—å·²çŸ¥çš„æ‰©å±•åº“ï¼Œç”± C++ ç­‰å…¶ä»–è¯­è¨€ç¼–å†™è€Œæˆï¼Œä»¥ .so å½¢å¼å‡ºçŽ°ï¼Œ.so ä¸ºå…±äº«åº“, æ˜¯ shared object, ç”¨äºŽåŠ¨æ€è¿žæŽ¥çš„, å’Œ dll å·®ä¸å¤šï¼Œä¸ºæ¯” PEAR æ›´å¿«ï¼Œä½†æ˜¯ä¸Ž PEAR ä¸åŒçš„æ˜¯ï¼ŒPECL éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé…ç½®å¹¶è¢«æ³¨å†Œåˆ°ä¸»æœºä¸­. æœ€ç›´æŽ¥çš„è¡¨è¿°: PEAR æ˜¯ PHP çš„ä¸Šå±‚æ‰©å±•ï¼ŒPECL æ˜¯ PHP çš„åº•å±‚æ‰©å±•. ä¸‹é¢è¯´å¦‚ä½•å®‰è£… pecl å’Œ pear. 1.ä¸‹è½½ pear 1curl -O http://pear.php.net/go-pear.phar 2.å®‰è£… pear 1sudo php -d detect_unicode=0 go-pear.phar 3.æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åŽä¼šè¿›è¡Œå®‰è£…è¿‡ç¨‹ï¼Œä¼šæœ‰ä¸€äº›é…ç½®é€‰é¡¹ è¾“å…¥1ï¼Œå›žè½¦ï¼Œé…ç½® pear è·¯å¾„ä¸ºï¼š/usr/local/pearè¾“å…¥4ï¼Œå›žè½¦ï¼Œé…ç½®å‘½ä»¤è·¯å¾„ä¸ºï¼š/usr/local/bin 4.å›žè½¦ä¸¤æ¬¡ï¼Œå…¶ä»–è®©å…¶é»˜è®¤ï¼Œå®‰è£…å®Œæˆ. 5.å¯ä»¥é€šè¿‡å‘½ä»¤æ£€æŸ¥ pear æ˜¯å¦å®‰è£…æˆåŠŸ 1pear version æˆ–è€…æ‰§è¡Œ: 1pecl version å¯ä»¥çœ‹åˆ°ç±»ä¼¼ä¿¡æ¯: 123PEAR Version: 1.10.1PHP Version: 5.6.27Zend Engine Version: 2.6.0 å¸¸ç”¨æ“ä½œMySQL æ“ä½œåŸºæœ¬æ“ä½œï¼š 1234mysql.server start #å¯åŠ¨mysql.server stop #åœæ­¢mysql -u root -p #ç”¨ user å’Œ pwd è¿žæŽ¥php-fpm ç›¸å…³æ“ä½œ 1.è¿è¡Œ php-fpm 1sudo php-fpm -D 2.å…³é—­ php-fpm 1sudo killall php-fpm 3.æŸ¥çœ‹ php-fpm è¿è¡ŒçŠ¶æ€ 1sudo lsof -Pni4 | grep LISTEN | grep php å¯ä»¥çœ‹åˆ° (fpm é»˜è®¤åœ¨ 9000 ç«¯å£) 1234php-fpm 84200 root 8u IPv4 0x91959c43a1ea5abd 0t0 TCP 127.0.0.1:9000 (LISTEN)php-fpm 84201 _www 0u IPv4 0x91959c43a1ea5abd 0t0 TCP 127.0.0.1:9000 (LISTEN)php-fpm 84202 _www 0u IPv4 0x91959c43a1ea5abd 0t0 TCP 127.0.0.1:9000 (LISTEN)php-fpm 84203 _www 0u IPv4 0x91959c43a1ea5abd 0t0 TCP 127.0.0.1:9000 (LISTEN) 4.php-fpm å¼€æœºå¯åŠ¨ 12ln -sfv /usr/local/opt/php56/*.plist ~/Library/LaunchAgentslaunchctl load ~/Library/LaunchAgents/homebrew.mxcl.php56.plist Nginx1.æµ‹è¯•é…ç½®æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ 1nginx -t 2.å¯åŠ¨ nginx 1sudo nginx 3.é‡æ–°åŠ è½½é…ç½®|é‡å¯|åœæ­¢|é€€å‡º nginx 1nginx -s reload|reopen|stop|quit 4.å¼€æœºå¯åŠ¨ï¼š 12ln -sfv /usr/local/opt/nginx/*.plist ~/Library/LaunchAgentslaunchctl load ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist 5.nginx ç›‘å¬ 80 ç«¯å£ï¼š 12sudo chown root:wheel /usr/local/Cellar/nginx/1.6.0_1/bin/nginxsudo chmod u+s /usr/local/Cellar/nginx/1.6.0_1/bin/nginx å¸¸ç”¨ç›®å½•å› ä¸ºä½¿ç”¨äº† Homebrew å®‰è£…çš„ PHP, é…ç½®æ–‡ä»¶çš„ç›®å½•ä¸æ˜¯å¸¸è§„çš„ /etc è¿™é‡Œæœ‰å‡ ä¸ªç›®å½•éœ€è¦çŸ¥é“, å¦‚ä¸‹: 123/private/etc/usr/local/etc/php/5.6/usr/local/var/www é‡åˆ°é—®é¢˜1.æ‰§è¡Œ sudo php-fpm -D æŠ¥ php56-intl/intl.so åŠ è½½é—®é¢˜ warning çš„å†…å®¹å¤§è‡´å¦‚ä¸‹: 123456789NOTICE: PHP message: PHP Warning: PHP Startup: Unable to load dynamic library &apos;/usr/local/opt/php56-intl/intl.so&apos; - dlopen(/usr/local/opt/php56-intl/intl.so, 9): image not found in Unknown on line 0&lt;br /&gt;&lt;b&gt;Warning&lt;/b&gt;: PHP Startup: Unable to load dynamic library &apos;/usr/local/opt/php56-intl/intl.so&apos; - dlopen(/usr/local/opt/php56-intl/intl.so, 9): image not found in &lt;b&gt;Unknown&lt;/b&gt; on line &lt;b&gt;0&lt;/b&gt;&lt;br /&gt;Unknown(0) : Warning - PHP Startup: Unable to load dynamic library &apos;/usr/local/opt/php56-intl/intl.so&apos; - dlopen(/usr/local/opt/php56-intl/intl.so, 9): image not found[31-Dec-2016 22:40:38] NOTICE: PHP message: PHP Warning: PHP Startup: mcrypt: Unable to initialize moduleModule compiled with build ID=API20131226,NTSPHP compiled with build ID=API20131226,NTS,debugThese options need to match in Unknown on line 0 è§£å†³æ–¹æ¡ˆ: æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤, å³å¯è§£å†³.æ–¹æ¡ˆæ¥æº Github. 1brew reinstall --build-from-source php56-intl 2.æ‰§è¡Œ sudo php-fpm -D æŠ¥ PHP Startup: mcrypt: Unable to initialize module 12345678910111213141531-Dec-2016 22:56:51] NOTICE: PHP message: PHP Warning: PHP Startup: mcrypt: Unable to initialize moduleModule compiled with build ID=API20131226,NTSPHP compiled with build ID=API20131226,NTS,debugThese options need to match in Unknown on line 0&lt;br /&gt;&lt;b&gt;Warning&lt;/b&gt;: PHP Startup: mcrypt: Unable to initialize moduleModule compiled with build ID=API20131226,NTSPHP compiled with build ID=API20131226,NTS,debugThese options need to match in &lt;b&gt;Unknown&lt;/b&gt; on line &lt;b&gt;0&lt;/b&gt;&lt;br /&gt;Unknown(0) : Warning - PHP Startup: mcrypt: Unable to initialize moduleModule compiled with build ID=API20131226,NTSPHP compiled with build ID=API20131226,NTS,debugThese options need to match è§£å†³æ–¹æ¡ˆ: 1brew reinstall --build-from-source php56-intl 3.è¿žæŽ¥ mysql ä½¿ç”¨ mysql -u root -p è¿žæŽ¥ mysql, æç¤º Canâ€™t connect to local MySQL server through socket â€˜/tmp/mysql.sock é”™è¯¯. è§£å†³æ–¹æ¡ˆ: å¯åŠ¨ mysql 1mysql.server start é‡æ–°è¿žæŽ¥å³å¯.]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>PHP MySql nginx php-fpm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP å¼€å‘å‡†å¤‡]]></title>
    <url>%2F2017%2F02%2F02%2FPHP-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87%2F</url>
    <content type="text"><![CDATA[æ³¨æ„ï¼šè¿™ç¯‡æ–‡ç« æ˜¯åŸºäºŽ Homebrew å®‰è£… php5.6 ä»¥åŠ nginx å’Œ mysql çš„ä»‹ç»ï¼Œå®‰è£…é«˜ç‰ˆæœ¬çš„ php è¯·ç»•è¡Œã€‚ ç®€ä»‹äº²è‡ªå®žè·µåœ¨ MacOS ä¸Šé¢å®‰è£… PHP5.6+MySQL+Nginx. å°†è‡ªå·±é‡åˆ°çš„é—®é¢˜å’Œå¯¹åº”çš„è§£å†³æ–¹æ¡ˆ, åˆ†äº«å‡ºæ¥, å¸Œæœ›èƒ½å¸®åˆ°ä½ . MacOS ä¸Šé¢æ­å»º PHP å¼€å‘çŽ¯å¢ƒ, ä½¿ç”¨ Homebrew æ¥å®‰è£…å¯¹åº”çš„å¼€å‘å¥—ä»¶, å°±æ›´åŠ ç®€å•äº†. è¿™ç¯‡åšå®¢çš„ç›®çš„å°±æ˜¯å®‰è£… PHP å¼€å‘çŽ¯å¢ƒ, å¹¶å°†ç¬¬ä¸€ä¸ª PHP ç¨‹åºéƒ¨ç½²åœ¨ Nginx ä¸Šé¢. å¦‚æžœåœ¨å®‰è£…å’Œä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜, å¯ä»¥æŸ¥çœ‹è¿™ç¯‡åšå®¢: Mac PHP å®‰è£…é‡åˆ°çš„é—®é¢˜. ä¸‹é¢å¼€å§‹ä»‹ç»å…·ä½“çš„å®‰è£…æ­¥éª¤. ä¸€. å®‰è£… Homebrewè¿™ä¸ªå¤§å®¶å¯ä»¥è‡ªè¡Œè®¿é—® Homebrew äº†è§£, è¿™é‡Œä¸å†æ¶‰åŠå…·ä½“çš„å®‰è£…è¿‡ç¨‹å’Œæ–¹æ³•. äºŒ. å®‰è£… php56 1.åŠ å…¥å®˜æ–¹æº 123brew tap homebrew/dupesbrew tap homebrew/versionsbrew tap homebrew/php 2.å®‰è£… PHP é»˜è®¤å®‰è£…ä¼šè¿è¡Œåœ¨ Apache ä¸‹.è€Œæˆ‘ä»¬è¦ä½¿å®ƒè¿è¡Œåœ¨ PHP-fpm ä¸‹ï¼Œæ‰€ä»¥è¦å¢žåŠ å‚æ•°: 1--with-fpm --without-apache æŸ¥çœ‹æ‰€æœ‰å®‰è£…å‚æ•°å¯ä»¥è¾“å…¥: 1brew option php56 è¿›è¡ŒæŸ¥çœ‹ï¼Œå‚è€ƒå®‰è£…æŒ‡ä»¤ï¼š 123456789101112brew install php56 \--without-snmp \--without-apache \--with-debug \--with-fpm \--with-intl \--with-homebrew-curl \--with-homebrew-libxslt \--with-homebrew-openssl \--with-imap \--with-mysql \--with-tidy è¿™é‡Œä½¿ç”¨äº†ä¸‹é¢çš„é€‰é¡¹: 1with-homebrew-curl æˆ‘è¯•è¿‡ä¸å¸¦æ­¤é€‰é¡¹, å®‰è£… PHP56 ä¼šå¤±è´¥, æ‰¾ä¸åˆ° curl. å®‰è£…æˆåŠŸåŽ, å¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯: 12php -vphp-fpm -v æ­¤æ—¶çœ‹åˆ°æ˜¯çš„ç³»ç»Ÿè‡ªå¸¦çš„ç‰ˆæœ¬. ä¸‹é¢ä¸€æ­¥æ˜¯å¢žåŠ çŽ¯å¢ƒå˜é‡, å®ŒæˆåŽåœ¨çœ‹ç‰ˆæœ¬ä¿¡æ¯, å³å¯. 3.é…ç½® PHP çŽ¯å¢ƒå˜é‡ é…ç½®çŽ¯å¢ƒå˜é‡çš„ç›®çš„æ˜¯è¦ä½¿ç”¨ brew å®‰è£…çš„ PHP å’Œ PHP-fpm, ä¸ä½¿ç”¨ MacOS è‡ªå¸¦çš„ PHP ç‰ˆæœ¬. /usr/local/sbin/ ä¸‹é¢æ˜¯æˆ‘ä»¬ brew å®‰è£…çš„ PHP, å…¶å®žä»–æ˜¯ä¸€ä¸ªè½¯è¿žæŽ¥æŒ‡å‘:/usr/local/Cellar/php56/5.6.27_4/sbin /usr/local/bin/ ä¸‹é¢ä¹Ÿæ˜¯ brew å®‰è£…çš„ PHP, æŒ‡å‘:/usr/local/Cellar/php56/5.6.27_4/bin vim ~/.bash_profile å¢žåŠ  1export PATH=&quot;/usr/local/sbin:$PATH&quot; ä½¿å…¶ç«‹å³ç”Ÿæ•ˆ, æ‰§è¡Œ 1source ~/.bash_profile æˆ–è€…é‡å¯ç»ˆç«¯. å¦‚æžœæƒ³çœ‹ç³»ç»Ÿçš„ PHP ç‰ˆæœ¬å¯ä»¥è¿™æ ·: 1/usr/bin/php -v 4.é…ç½® php-fpm 1sudo cp /private/etc/php-fpm.conf.default /private/etc/php-fpm.conf 1sudo vi /private/etc/php-fpm.conf æ‰¾åˆ° error_log é¡¹ï¼Œæ·»åŠ ä¸‹é¢é…ç½®ï¼š 12error_log = /usr/local/var/log/php-fpm.logpid = /usr/local/var/run/php-fpm.pid å¦åˆ™ä¼šæŠ¥: 1FPM initialization failed ä¸‰. å®‰è£… nginx1brew install nginx åˆ›å»ºæ–‡ä»¶ 12345mkdir -p /usr/local/var/logs/nginxmkdir -p /usr/local/etc/nginx/sites-availablemkdir -p /usr/local/etc/nginx/sites-enabledmkdir -p /usr/local/etc/nginx/conf.dmkdir -p /usr/local/etc/nginx/ssl 1234567sudo mkdir -p /var/wwwsudo chown :staff /var/wwwsudo chmod 775 /var/wwwvi /var/www/info.phpvi /var/www/index.htmlvi /var/www/403.htmlvi /var/www/404.html æ”¹å˜ nginx.conf é…ç½®æ–‡ä»¶ è¯¥é…ç½®æ–‡ä»¶åœ¨ /usr/local/etc/nginx/nginx.conf ä¸‹é¢. æˆ‘çš„é…ç½®: 1234567891011121314151617181920212223242526272829303132333435363738worker_processes 1; error_log /usr/local/etc/nginx/logs/error.log debug;pid /usr/local/var/run/nginx.pid; events &#123; worker_connections 256;&#125; http &#123; include mime.types; default_type application/octet-stream; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /usr/local/etc/nginx/logs/access.log main; sendfile on; keepalive_timeout 65; index index.html index.php; include /usr/local/etc/nginx/sites-enabled/*; include /usr/local/etc/nginx/conf.d/*; server &#123; listen 8080; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; root ~/projs/phpdev/nginx/nginx_sites/; #webçš„æ ¹ç›®å½• index index.php index.html index.htm; #åŠ index.php &#125; &#125;&#125; æ³¨æ„: 1234location / &#123; root ~/projs/phpdev/nginx/nginx_sites/; #webçš„æ ¹ç›®å½• index index.php index.html index.htm; #åŠ index.php&#125; é…ç½®äº†æˆ‘çš„ web ç›®å½•å’Œæ”¯æŒçš„æ–‡ä»¶. å››. è¿è¡Œ PHPåˆ›å»º index.php å¯åŠ¨ PHP-fpm 1sudo php-fpm æˆ–è€…ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼æ¥å¯åŠ¨ PHP-fpm 1sudo php-fpm -D å¯åŠ¨ Nginx 1sudo nginx ç¼–è¾‘ index.php åœ¨ web ç›®å½•(æˆ‘é…ç½®çš„) /Users/mark/workspace/mzProjs/phpdev/nginx/nginx_sites/ æ–°å»ºæ–‡ä»¶ index.php. index.php é‡Œé¢å¯ä»¥ç¼–å†™ä»£ç : 12345678910&lt;!-- lang: php --&gt;&lt;!-- ~/nginx_sites/index.php --&gt;&lt;?php echo &quot;Hello PHP&quot;; echo &quot;&lt;/br&gt;&quot;; echo &quot;å­¦ä¹  php&quot;; echo &quot;&lt;/br&gt;&quot;; echo phpinfo();?&gt; æ‰“å¼€æµè§ˆå™¨, ä½ ä¼šçœ‹åˆ°ä¸‹é¢çš„é¡µé¢: ä¹Ÿå¯ä»¥åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºå…¶ä»– php æ–‡ä»¶, å¦‚ mark.php æ–‡ä»¶. æµè§ˆå™¨ä¸­è¾“å…¥:http://localhost:8080/mark.php å¯ä»¥æ‰§è¡Œç›¸å¯¹åº”çš„æ–‡ä»¶. è¿™é‡Œçš„ mark.php æ˜¯è‡ªå·±æ–°å»ºçš„ php æ–‡ä»¶. äº”. å®‰è£… MySQL1brew install mysql ç­‰å¾…å®‰è£…æˆåŠŸåŽï¼Œç›´æŽ¥å¯åŠ¨å’Œè¿žæŽ¥æ•°æ®åº“ã€‚ å¯åŠ¨ mysql 1mysql.server start è¿žæŽ¥ mysql 1mysql -u root -p]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>PHP MySql nginx php-fpm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿‡å¹´å›žå®¶è¿™å‡ å¤©]]></title>
    <url>%2F2017%2F01%2F31%2F%E8%BF%87%E5%B9%B4%E5%9B%9E%E5%AE%B6%E8%BF%99%E5%87%A0%E5%A4%A9%2F</url>
    <content type="text"><![CDATA[ä»Žæ”¾å‡å›žå®¶åˆ°çŽ°åœ¨å·²ç»ä¸€ä¸ªå¤šæ˜ŸæœŸäº†, æ„Ÿè§¦é¢‡å¤š. ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ„Ÿè§¦: 1.å¥åº·æœ€é‡è¦.2.åšæŒåšå¥½ä¸€ä»¶äº‹æƒ….3.æ„Ÿæ©. å¥åº·å‰ä¸¤å¹´å›žå®¶, è¿˜èƒ½è§ç€å¾ˆå¤šé•¿è¾ˆ, äº’ç›¸å˜˜å¯’é—®æš–, å®¶é•¿é‡ŒçŸ­çš„é—²èŠ, å¦‚ä»Šæœ‰äº›å·²ç¦»æˆ‘è¿œåŽ». æ— æƒ…çš„ç–¾ç—…å¤ºèµ°äº†å°šæœªèŠ±ç”²çš„ä»–ä»¬, è®©äººä¸ç¦æ„Ÿå¹ç”Ÿå‘½çš„è„†å¼±. æˆ‘å°çš„æ—¶å€™, å¾ˆå–œæ¬¢å’Œé•¿è¾ˆä»¬èŠå¤©. ä¸»è¦æ˜¯ä»–ä»¬è®², æˆ‘åšä¸€ä¸ªå°å°çš„å¬ä¼—, è§‰å¾—ä»–ä»¬æ‡‚å¾—ç‰¹åˆ«å¤š, ä»Žå¤©æ–‡åˆ°åœ°é‡Œ, ä»Žæ–‡å­¦åˆ°è‰ºæœ¯, è®²çš„æœ‰å£°æœ‰è‰².æ¯é€¢å¤å­£, æˆ‘éƒ½ä¼šæ¬ç€å°æ¿å‡³, åœ¨å±‹å‰çš„è€æ ‘ä¸‹, çº ç¼ ä»–ä»¬, é€¼ç€åš·ç€è®©ä»–ä»¬ç»™æˆ‘è®²æ•…äº‹, ç”­ææœ‰å¤šé«˜å…´. å¦‚ä»Š, è€æ ‘çŠ¹åœ¨, ä»–ä»¬å·²ä¸åœ¨äººä¸–.ç¹ç‰©æ€äºº. å†œæ‘å¤§éƒ¨åˆ†äºº, ä¸å¤ªå…³æ³¨è‡ªå·±çš„å¥åº·, å”¯ä¸€è¡¡é‡è‡ªå·±èº«ä½“çŠ¶å†µçš„æ ‡å‡†å°±æ˜¯ ç±³é¥­é¦’å¤´èƒ½åƒå¤šå°‘. å¾ˆå¤šäºº, æ˜Žæ˜Žå·²ç»æ„Ÿè§‰åˆ°èº«ä½“ä¸é€‚, ä¹Ÿä¸æ„¿æ„åŽ»åŒ»é™¢åšæ£€æŸ¥, å°±è¿™æ ·æ—¥ç§¯æœˆç´¯æˆç–¾.ç­‰å®žåœ¨å¿å—ä¸äº†æ‰åŽ»åŒ»é™¢æ£€æŸ¥, ä¸ºæ—¶å·²æ™š. å¹³æ—¶ä¸æ³¨æ„è‡ªå·±çš„èº«ä½“, èº«ä½“æ—©æ™šéƒ½ä¼šè®©ä½ æ³¨æ„. æ— è®ºå¹³æ—¶å·¥ä½œå†å¿™, ä¹Ÿè¦åšæŒé”»ç‚¼, æ²¡æœ‰å¥åº·çš„ä½“é­„, å…¶ä»–çš„éƒ½æ˜¯æ‰¯æ·¡. åšæŒå†œæ‘è¿™å‡ å¹´é¼“åŠ±å¹´è½»äººåœ¨å®¶åˆ›ä¸š, æžå…»æ®–. æœ‰å¾ˆå¤šäººæ”¾å¼ƒäº†æ‰“å·¥, å›žå®¶æ‹¿ç€è¡¥è´´å¼€å§‹æœ‰æ¨¡æœ‰æ ·çš„åˆ›ä¸š. å‰å‡ å¹´å›žè€å®¶, çœ‹åˆ°å„ç§æžå…»æ®–çš„, æœ‰å…»é¸¡å…»é¸­å…»é¹…çš„, æœ‰å…»ç¾Šå…»çŒªå…»ç‰›çš„, å¦‚é›¨åŽæ˜¥ç¬‹, éåœ°å¼€èŠ±. ä½†æ˜¯ä»Šå¹´å›žå®¶, çœ‹åˆ°å¾ˆå¤šè’å‡‰çš„æˆ¿å­, æ— äººé—®æ´¥. æˆ‘é—®è¿‡å‡ ä¸ªå°ä¼™å­(ä¹‹å‰åœ¨å®¶æžå…»æ®–çš„äºº, æœ€åŽæ”¾å¼ƒäº†çš„).ä»–ä»¬è·Ÿæˆ‘è¯´çš„åŸºæœ¬éƒ½ä¸€æ ·, å¤ªç´¯äº†, æ”¶ç›Šæ…¢!æžå…»æ®–, çš„ç¡®å¾ˆç´¯, ä¹Ÿå¾ˆæž¯ç‡¥æ— å‘³, æ¯å¤©å’Œè¿™äº›ä¸ä¼šè¯´è¯çš„åŠ¨ç‰©ä»¬å¾…åœ¨ä¸€èµ·, å–‚å®ƒä»¬åƒå–, ç®¡ä»–ä»¬æ¸©é¥±, å®žåœ¨ä¹å‘³. å¦å¤–æœ‰ä¸¤ä¸ªå¹´è½»äºº, ä»Žå¼€å§‹å…»æ®–åˆ°çŽ°åœ¨å·²ç»åšæŒäº”å…­å¹´äº†, æžå¾—é£Žç”Ÿæ°´èµ·, å®¶é‡Œç›–èµ·äº†æ¥¼æˆ¿, å–äº†å·§åª³å¦‡, ç”Ÿäº†èƒ–å°å­, ä¸€å®¶äººå…¶ä¹èžèž.ä»–ä»¬è·Ÿæˆ‘è¯´çš„åŸºæœ¬ä¸€æ ·, åªè¦åšæŒ, å°±æœ‰æ”¶èŽ·! è¿™ä¸¤ä¸ªåšæŒä¸‹æ¥çš„å¹´è½»äºº, ä»–ä»¬ç›¸ä¿¡è‡ªå·±èƒ½å¤ŸæŠŠè¿™ä»½äº‹ä¸šåšå¥½, ä»–ä»¬æŠŠåˆ«äººçœ¼ä¸­çš„è„æ´»ç´¯æ´»å½“åšä¸€ç§å¿«ä¹, ä¸€ç§äº«å—! åˆšå¼€å§‹, å¾ˆè‰°éš¾, ä»–ä»¬ä¹Ÿæƒ³è¿‡æ”¾å¼ƒ, ä½†æ˜¯åˆèˆä¸å¾—è¿™å‡ å¹´çš„ä»˜å‡º, äºŽæ˜¯å°±åšæŒä¸‹æ¥äº†, å¹¶ä¸”æ”¶èŽ·äº†ä¸å°‘æ„æƒ³ä¸åˆ°çš„çŸ¥è¯†, ä¸ç®¡æ˜¯ç‰©è´¨ä¸Šè¿˜æ˜¯ç²¾ç¥žä¸Šéƒ½å¾—åˆ°äº†æ»¡è¶³. ä¸–ä¸Š, æ²¡æœ‰ä¸€å¸†é£Žé¡ºçš„äº‹ä¸š. åªè¦è‡ªå·±å–œæ¬¢, æ„Ÿå…´è¶£çš„è¡Œä¸š, å°±å€¼å¾—ä½ åŽ»åšæŒ.å¦‚æžœä½ ä»Žå†…å¿ƒéƒ½ä¸æ„Ÿå…´è¶£, è¶æ—©æ”¾å¼ƒ, å› ä¸ºä½ å¾ˆéš¾åšæŒä¸‹æ¥. æƒ³æŠ•æœºå–å·§çš„æˆå°±ä¸€ä»½äº‹ä¸š, åªæœ‰ç¥žè¯æ•…äº‹é‡Œæœ‰å§! ä¸ç»ä¸€ç•ªå¯’å½»éª¨, å“ªå¾—æ¢…èŠ±æ‰‘é¼»é¦™! æ„Ÿæ©å°çš„æ—¶å€™, å®¶é‡Œå¾ˆæ‹®æ®, æˆ‘èƒ½å¤ŸæŠŠå¤§å­¦å¿µå®Œ, ç®€ç›´å°±æ˜¯å¤©æ„. çˆ¶æ¯æ°¸è¿œåªä¼šå¯¹æˆ‘è¯´ä¸€å¥è¯, åªè¦ä½ æƒ³ä¸Šå­¦, æˆ‘ä»¬å°±æ”¯æŒåˆ°åº•. æˆ‘çŸ¥é“å®¶é‡Œçš„ç»æµŽæƒ…å†µ, æ‰€ä»¥åœ¨å­¦ä¹ ä¸Šä¹Ÿæ˜¯ä¸é—ä½™åŠ›, æ¯æ¬¡æ”¾å­¦é™¤äº†å¸®çˆ¸çˆ¸å¦ˆå¦ˆå¹²å†œæ´», å°±æ˜¯å®Œæˆå®¶åº­ä½œä¸š, ç»ƒå­—èƒŒä¹¦. é‚£ä¸ªæ—¶å€™, ä¸çŸ¥é“å“ªæ¥çš„ç‹ åŠ², å³ä½¿æ˜¯å¯’å†¬è…Šæœˆ, ä¹Ÿè¦åšæŒå†™ä½œä¸š, å³ä½¿æ˜¯æ‰‹éƒ½å†»è‚¿äº†, ä¹Ÿè¦ç»ƒå­—. å½“æˆ‘æŽ¥åˆ°é‡ç‚¹é«˜ä¸­é€šçŸ¥ä¹¦çš„é‚£å¤©, çˆ¶äº²é«˜å…´çš„åˆä¸æ‹¢å˜´, å¿ƒç†å……æ»¡äº†éª„å‚². æˆ‘èƒ½æ„Ÿè§‰åˆ°â€¦â€¦ ç„¶è€Œè€ƒä¸Šé«˜ä¸­, æŽ¥ä¸‹æ¥å°±æ˜¯å‡‘é’±äº¤å­¦è´¹, éš”å£æœ‰ä¸ªä¼¯ä¼¯, ä»–è¯´å­¦è´¹ä¸å¤Ÿ, ç®—ä»–çš„.é‚£ä¸ªæ—¶å€™, å¤§å®¶å®¶é‡Œéƒ½ä¸å®½è£•, èƒ½å€Ÿé’±ç»™ä½ çš„, ç®€ç›´å°±æ˜¯å¤§æ©äºº.ä¸€ç›´åˆ°çŽ°åœ¨, æˆ‘éƒ½å¾ˆæ„Ÿæ¿€ä»–, æ¯å¹´è¿‡å¹´å›žå®¶, æˆ‘éƒ½ä¼šç»™ä¼¯ä¼¯ä¹°ç‚¹ç¤¼ç‰©, ç»™ä¸ªçº¢åŒ…, é™ªä»–èŠèŠå¤©.ä»–è¿˜å¼€çŽ©ç¬‘çš„è¯´, å½“å¹´è‡ªå·±çš„æŠ•èµ„, ç®—æ˜¯æœ‰äº†å›žæŠ¥äº†. è¿™è¾ˆå­, æˆ‘ä»¬æœ€åº”è¯¥æ„Ÿè°¢çš„æ˜¯æˆ‘ä»¬è‡ªå·±çš„çˆ¶æ¯, å…»è‚²æˆ‘ä»¬æˆäºº, é€æˆ‘ä»¬è¯»ä¹¦ä¸Šå­¦. è¿‡å¹´å›žå®¶, è¦å¤šé™ªé™ªä»–ä»¬, çæƒœå’Œä»–ä»¬åœ¨ä¸€èµ·çš„æ¯ä¸€åˆ».]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´» åæ€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­¦ä¹ æ‚è°ˆ]]></title>
    <url>%2F2017%2F01%2F27%2F%E5%AD%A6%E4%B9%A0%E6%9D%82%E8%B0%88%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ˜¯ä¸­å›½ä¼ ç»ŸèŠ‚æ—¥, å¤§å¹´ä¸‰å, ç¥å¤§å®¶æ–°å¹´å¿«ä¹, èº«ä½“å¥åº·, å¹¸ç¦ç¾Žæ»¡. å¼•å­æœ€è¿‘æ— è®ºæ˜¯æœ‹å‹è¿˜æ˜¯åŒäº‹æˆ–è€…åšå‹, éƒ½é—®è¿‡æˆ‘å…³äºŽå­¦ä¹ æ–¹é¢çš„äº‹æƒ…. æŽ¢è®¨çš„é—®é¢˜å¤§æ¦‚åˆ†ä¸ºå¦‚ä¸‹å‡ ç§: æ€Žä¹ˆæœ‰æ•ˆçš„å­¦ä¹ æ–°çŸ¥è¯†?æ€Žä¹ˆå¿«é€ŸæŽŒæ¡æ–°çŸ¥è¯†?æ˜¯å¦æœ‰å¿…è¦æ¯å¤©å­¦ä¹ ?å¦‚ä½•åšæŒå­¦ä¹ ?è°ˆåˆ°å…³äºŽå­¦ä¹ çš„è¯é¢˜, æˆ‘ä¹Ÿä¸æ˜¯ä»€ä¹ˆä¸“å®¶, æ›´ä¸æ˜¯å¿ƒç†å’¨è¯¢å¸ˆ, åªæ˜¯è°ˆè°ˆä¸ªäººçš„ä¸€äº›çœ‹æ³•å’Œç»åŽ†, å¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€ç‚¹ç‚¹çš„å¸®åŠ©. ä¸è¦åªæ˜¯å˜´ä¸Šè¯´ æˆ‘æ„Ÿå…´è¶£, å¦‚æžœæ²¡æœ‰é©±åŠ¨å’Œç›®æ ‡, å…´è¶£æ°¸è¿œéƒ½åªæ˜¯å…´è¶£. ä½ ä¸ºä»€ä¹ˆå­¦ä¹ å®ƒå­¦ä¹ çŸ¥è¯†ä¹‹å‰, é—®é—®è‡ªå·±ä¸ºä»€ä¹ˆè¦å­¦å®ƒ? å¤§éƒ¨åˆ†äººå­¦ä¹ æ–°ä¸œè¥¿éƒ½æ˜¯ä¸ºäº†å·¥ä½œæˆ–è€…ä¸ºäº†æ›´å¥½çš„å·¥ä½œæˆ–è€…ä¸ºäº†è½¬è¡Œæˆ–è€…å…¶ä»–ç›®çš„, ä¹Ÿæœ‰ä¸€éƒ¨åˆ†äººæ˜¯ä¸ºäº†å…´è¶£çˆ±å¥½. è¿™é‡Œæˆ‘åªè°ˆä¸ºäº†å·¥ä½œè€ŒåŽ»å­¦ä¹ æ–°çŸ¥è¯†çš„å†…å®¹, å…¶ä»–æ–¹é¢çš„æˆ‘è‡ªå·±ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¿ƒå¾—ä½“ä¼š, ä¸èƒ½ä¹±è¯´. æ—¢ç„¶ä¸ºäº†å·¥ä½œæˆ–è€…æ›´å¥½çš„å·¥ä½œæ¥å­¦ä¹ , é‚£ä¹ˆæˆ‘ä»¬å°±æ˜Žç¡®äº†ç›®æ ‡, å¦‚æžœä½ å·²ç»æœ‰äº†ç›®æ ‡, æ­å–œä½ , ä½ å³å°†æˆåŠŸäº†. æœ‰ä¸€äº›äººè¯´, æˆ‘å­¦ä¹ å®ƒ, è¿™ä¸ªä¸œè¥¿ä¸ä¸€å®šå“ªå¤©å°±æœ‰ç”¨äº†, æˆ‘æ€•å°†æ¥å¤±ä¸š.è¿™ä¸­æ‹…å¿ƒä¸æ˜¯åœ¨æžäººå¿§å¤©, ç‰¹åˆ«æ˜¯åœ¨äº’è”ç½‘çš„æ—¶ä»£, å¦‚æžœä¸å­¦ä¹ å¾ˆå®¹æ˜“å°±è½ä¼å•¦, å›æ‹…å¿ƒå®Œå…¨åœ¨ç†! ä½†æ˜¯, å½“ä¸‹ä½ æœ€åº”è¯¥è€ƒè™‘çš„æ˜¯ç›®å‰æŽŒæ¡çš„æŠ€èƒ½æ˜¯å¦å·²ç»ç†Ÿç»ƒäº†, æ˜¯å¦æ˜¯èƒ½å¤Ÿç‹¬å½“ä¸€é¢äº†, å¦‚æžœæ·±å­¦ä¸‹åŽ»ä¼šä¸ä¼šæ›´æœ‰å‰é€”? å¦‚æžœæ˜¯, è¯·ä½ æ·±å…¥åŽ»å­¦ä¹ , ä¸è¦å¤ªæžäººå¿§å¤©äº†! åœ¨ç²¾é’»ä¸€é—¨å­¦é—®çš„æƒ…å†µä¸‹, å¯ä»¥æ‰©å¤§è‡ªå·±çš„çŸ¥è¯†é¢, è€Œä¸æ˜¯ åƒç€ç¢—é‡Œçœ‹ç€é”…é‡Œ çš„, è¦è„šè¸å®žåœ°çš„å¤§æ­¥å‘å‰. åšæŒå­¦ä¹ ä¸Šé¢çš„æ‰¯æ·¡æœ‰ç‚¹å¤šå•Š.å›žæ­£é¢˜. æ—¢ç„¶æžæ¸…æ¥šäº†ä¸ºä»€ä¹ˆå­¦ä¹ å®ƒ, æŽ¥ä¸‹æ¥å°±æ˜¯æžå®šå®ƒ. ä½ éœ€è¦æœ‰åšæŒå­¦ä¹ çš„æ€åº¦å’Œè¡ŒåŠ¨, ä¸ç„¶ä¸€åˆ‡éƒ½ä¼šæˆä¸ºäº‘çƒŸ. é‚£ä¹ˆå½“åˆå’¬ç‰™åˆ‡é½¿çš„æŠ±è´Ÿ, ç»“æžœéƒ½æ˜¯å†²åŠ¨çš„æƒ©ç½š. å­¦ä¹ æ–°çŸ¥è¯†çš„å‰æœŸæ˜¯å¾ˆç´¯çš„, ä½†æ˜¯åªè¦ä½ æ„å¿—è¶³å¤Ÿåšå®š, ä¸€å®šå¯ä»¥å…‹æœç§ç§å›°éš¾. è®°å¾—å½“åˆæŽ¥æ‰‹ä¸€ä¸ªäºŒæ‰‹é¡¹ç›®, é¡¹ç›®ä¹Ÿæ˜¯è¶³å¤Ÿå¤æ‚, å¹¶ä¸”æœ‰å¾ˆå¤šå¼•æ“Žä¹‹å‰éƒ½æ²¡æœ‰ç”¨è¿‡, ä¸Šé¢é¢†å¯¼é€¼å¾—æ¯”è¾ƒç´§, æ²¡åŠžæ³•, åªèƒ½å°†å…¶æ‹¿ä¸‹, æ¯å¤©æ™šä¸ŠæŒ‘ç¯å¤œæˆ˜, åœ¨ log çš„æµ·æ´‹é‡Œé¨æ¸¸. å¾ˆå¿«è‡ªå·±æŽŒæ¡äº†æ–°çš„çŸ¥è¯†, ç»“åˆé¡¹ç›®, ä¸æ–­çš„åŽ»è°ƒè¯•å’Œæ€»ç»“, æœ€ç»ˆæŒ‰æœŸå®Œæˆéœ€æ±‚, å›žè¿‡å¤´æƒ³æƒ³, æƒ³è¦åšæŒåšå¥½ä¸€ä»¶äº‹æƒ…, é™¤äº†è‡ªèº«çš„è‡ªæˆ‘çº¦æŸ, è¿˜éœ€è¦å¤–ç•ŒçŽ¯å¢ƒçš„ å€’é€¼. å½“ä½ åšæŒä¸ä½çš„æ—¶å€™, é—®é—®è‡ªå·±, æ˜¯å¦å·²ç»åˆ°äº†æžé™, å¦‚æžœæ„Ÿåˆ°ç´¯äº†, é€‚å½“çš„æ”¾æ¾ä¸€ä¸‹, æ¯”å¦‚å‡ºåŽ»è·‘ä¸ªæ­¥, æ‰“ä¸ªçƒæˆ–è€…æ‰¾æœ‹å‹å™å™æ—§. é€‚å½“çš„ç»™è‡ªå·±ä¸€ç‚¹åŽ‹åŠ›, äº‹åŠåŠŸå€. å­¦ä¹ çš„æ¸ é“åˆšå¼€å§‹å­¦ä¹ æ–°çŸ¥è¯†, å¤§å®¶éƒ½æ¸´æœ›æœ‰ä¸€äº›å¤§ç‰›èƒ½å¤ŸæŒ‡å¯¼è‡ªå·±, æˆ–è€…èƒ½å¤Ÿä»Žå‰è¾ˆé‚£é‡ŒèŽ·å–ä¸€äº›æ­¦æž—ç§˜ç±, è¿™äº›éƒ½æ˜¯å­¦ä¹ çš„æ¸ é“. æœ‰äº›å°ä¼™ä¼´åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, ä¼šé‡åˆ°å„ç§å„æ ·çš„å›°éš¾, æ¯”å¦‚åœ¨å­¦ä¹ ä¸€é—¨çŸ¥è¯†çš„æ—¶å€™, å‘çŽ°ç«Ÿç„¶è¿˜éœ€è¦å­¦ä¹ å¦ä¸€é—¨æ–°çŸ¥è¯†, çœŸæ˜¯æ—¥äº†ç‹—äº†!åˆ°è¿™é‡Œ, å¯èƒ½æœ‰äº›äººå°±ä¼šæƒ…ä¸è‡ªç¦çš„é€‰æ‹©äº†æ”¾å¼ƒ, å˜´ä¸Šè¯´è¿˜åœ¨å­¦ä¹ , å…¶å®žå¿ƒé‡Œå·²ç»ç–²å€¦. è¿˜æœ‰ä¸€äº›åˆå­¦è€…, ä»–ä»¬æ²¡æœ‰ä»€ä¹ˆç»éªŒ, å¦‚æžœä¸»åŠ¨æ€§å†å·®ç‚¹, åŠ¨è¾„é‡åˆ°é—®é¢˜å°±é—®, æ ¹æœ¬æ²¡æœ‰è¿‡æ€è€ƒ, å“ªæ€•æ˜¯ä¸€ç‚¹ç‚¹çš„æ€è€ƒéƒ½æ²¡æœ‰.å…¶å®žä»–ä»¬ä¸æ˜¯ä¸æƒ³æž, å°±æ€•æžé”™äº†.ä»…ä»…æ˜¯å› ä¸ºæ€•, å°±æˆ›ç„¶è€Œæ­¢äº†!è¿™ç§äºº, ç¡®å®žå¯æƒœ, æ‰€ä»¥ä»–ä»¬éœ€è¦æ›´å¤šçš„æŒ‡å¯¼å’Œæ•™è‚².è¿™é‡Œæé†’å¤§å®¶, å­¦ä¹ çŸ¥è¯†, ä¸è¦æ€•çŠ¯é”™, å¤§èƒ†çš„åŽ»è¯•é”™, åœ¨é”™è¯¯ä¸­æˆé•¿, è¿™æ ·ä½ æ‰èƒ½æœ‰æ‰€æ”¶èŽ·. è®°å¾—ä»¥å‰ä¸ºäº†å®‰è£… linux, æˆ‘æŠŠåŠžå…¬å®¤çš„åŠžå…¬ç”µè„‘éƒ½æ ¼å¼åŒ–äº†, ç»„é•¿å·®ç‚¹è¦å¼€é™¤æˆ‘äº†, çŽ°åœ¨æƒ³æƒ³è™½ç„¶æŒ¨äº†éª‚, ä½†æ˜¯æŒºå€¼å¾—. çŽ°åœ¨äº’è”ç½‘å¾ˆå‘è¾¾, æƒ³å­¦ä¹ çš„ä¸œè¥¿åŸºæœ¬ç½‘ä¸Šéƒ½æœ‰, ä½ å¯ä»¥æ²¡æœ‰æ™ºå•†, æ²¡æœ‰æƒ…å•†, ä½†æ˜¯ä½ ä¸€å®šè¦æœ‰ æœå•† (æœç´¢èƒ½åŠ›).å½“ä½ è‡ªå·±ç»è¿‡æ€è€ƒ, æ— æ³•è§£å†³é—®é¢˜, å°±åŽ»æœç´¢ç›¸å…³çš„çŸ¥è¯†, å¦‚æžœæœç´¢ä¹Ÿå¤±è´¥äº†, å†åŽ»è¯·æ•™åˆ«äºº, è¿™æ ·ä½ å°±å¯ä»¥ä»Žä¸­æ”¶èŽ·æ„å¤–çš„æƒŠå–œ. æ‰€ä»¥, å­¦ä¹ æ¸ é“çš„é‡è¦æ¥æºä¹‹ä¸€å°±æ˜¯åœ¨äº’è”ç½‘æœç´¢, åŸ¹å…»è‡ªå·±çš„æœç´¢èƒ½åŠ›å¾ˆé‡è¦, æˆ‘å»ºè®®å¤§å®¶ä½¿ç”¨è°·æ­Œæµè§ˆå™¨, ç„¶åŽä½¿ç”¨ google çš„æœç´¢å¼•æ“Ž, æ­å»ºä¸€å¥—ç¿»å¢™çš„ VPN, è¿™æ ·ä½ å¯ä»¥åœ¨çŸ¥è¯†çš„æµ·æ´‹é‡Œçˆ½ç¿». å¦å¤–ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å­¦ä¹ æ¸ é“å°±æ˜¯ä½ è®¤ä¸ºçš„ç‰›äºº, å‘ä»–ä»¬å­¦ä¹ ç›¸å…³çš„å­¦ä¹ æ–¹æ³•, é—®ä»–ä»¬æ˜¯æ€Žä¹ˆå­¦ä¹ çš„, ç„¶åŽç»“åˆè‡ªå·±çš„å®žé™…æƒ…å†µåŠ ä»¥è¿ç”¨, è·Ÿä»–ä»¬å¤šäº¤æµ. å¯¹è‡ªå·±â€™ç‹ â€™ä¸€äº›æˆ‘ä¹‹å‰æœ‰ä¸ªåä¹ æƒ¯, å–œæ¬¢æ™šä¸Šèººåœ¨åºŠä¸Šçœ‹è§†é¢‘, è¿™äº›è§†é¢‘å¯èƒ½æ˜¯ä¼˜é…·æˆ–è€…è…¾è®¯è§†é¢‘å®¢æˆ·ç«¯çš„, ä¹Ÿæœ‰å¯èƒ½æ˜¯æ–°é—»ç±»çš„ app æ¥æºçš„è§†é¢‘.è§†é¢‘åªè¦çœ‹èµ·æ¥, æ—¶é—´å°±ä¸å—æŽ§åˆ¶äº†.ç¬¬äºŒå¤©æ—©æ™¨èµ·åºŠä¹Ÿå¾ˆå›°éš¾. æœ€åŽè‡ªå·±æŠŠè§†é¢‘ç±»å’Œæ–°é—»ç±» app å…¨éƒ¨å¸è½½æŽ‰äº†, ç„¶åŽæŠŠç›®æ ‡è½¬ç§»åˆ° stackoverflow å’Œ github ä¸Šé¢.é‚£é‡Œæ‰æ˜¯ç¨‹åºå‘˜çš„ä¸–ç•Œ, åªæœ‰ä½ æƒ³ä¸åˆ°çš„, æ²¡æœ‰åšä¸åˆ°çš„. ä¸ºäº†å­¦ä¹ æ–°çŸ¥è¯†, ä½ éœ€è¦å¯¹è‡ªå·±ç‹ ä¸€ç‚¹, æ¯å¤©æ‹¿ç‚¹æ—¶é—´å‡ºæ¥æ€»ç»“å’Œå­¦ä¹ , ä¸€ä¸ªæœˆä¸€ä¸ªå­£åº¦ä¸€å¹´ä¸‹æ¥, ä½ æ¯”åˆ«äººéƒ½è¿›æ­¥äº†å¾ˆå¤š. å…»æˆä¸€ä¸ªå¥½ä¹ æƒ¯, ç»ˆç”Ÿå—ç›Š.]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>å­¦ä¹  ç”Ÿæ´» åæ€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS: èŠèŠ UIWebView ç¼“å­˜]]></title>
    <url>%2F2017%2F01%2F15%2FiOS-%E8%81%8A%E8%81%8A-UIWebView-%E7%BC%93%E5%AD%98%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨å¼€å‘é¡¹ç›®è¿‡ç¨‹ä¸­, ä¸€äº›è‹¥äº¤äº’çš„é¡µé¢ä¼šä½¿ç”¨ HTML å±•ç¤º. åœ¨ iOS ä¸­, ä½¿ç”¨ UIWebView çš„é¢‘çŽ‡è¿˜æ˜¯æ¯”è¾ƒé«˜çš„. ä»Šå¤©è·Ÿå¤§å®¶èŠèŠ UIWebView ç¼“å­˜ç›¸å…³çš„è¯é¢˜. å‡†å¤‡å·¥ä½œæˆ‘ä»Šå¤©ä½¿ç”¨ Tomcat æ¥ä½œä¸º web å®¹å™¨, åœ¨æœ¬æœºæ­å»ºä¸€ä¸ª web æœåŠ¡å™¨, ç„¶åŽä½¿ç”¨ iPhone è®¿é—®è¯¥ web é¡µé¢, å±•ç¤ºå’Œæ¢³ç† UIWebview å…³äºŽç¼“å­˜çš„é—®é¢˜. å¦‚æžœä½ å¯¹ Tomcat è¿˜ä¸ç†Ÿæ‚‰, å¸Œæœ›ä½ å¯ä»¥å…ˆåŽ»å¤§æ¦‚äº†è§£ä¸€ä¸‹, å¦‚ä½•åœ¨ Mac os ä¸Šé¢å®‰è£…å’Œä½¿ç”¨ Tomcat, å¯ä»¥å‚è€ƒæˆ‘çš„åšæ–‡: [Mac é…ç½® Tomcat8]. Tomcat æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç ã€è¿è¡Œ servlet å’Œ JSP Web åº”ç”¨è½¯ä»¶çš„åŸºäºŽ Java çš„ Web åº”ç”¨è½¯ä»¶å®¹å™¨.Tomcat Server æ˜¯æ ¹æ® servlet å’Œ JSP è§„èŒƒæ‰§è¡Œçš„ï¼Œå› æ­¤å¯ä»¥è¯´ Tomcat Server å®žè¡Œäº† Apache-Jakarta è§„èŒƒï¼Œä¸”æ¯”ç»å¤§å¤šæ•°å•†ä¸šåº”ç”¨è½¯ä»¶æœåŠ¡å™¨è¦å¥½.ä½†æ˜¯ Tomcat å¯¹é™æ€æ–‡ä»¶ã€é«˜å¹¶å‘çš„å¤„ç†æ¯”è¾ƒå¼±. å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™, æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬åˆ†åˆ«æ˜¯ apache-tomcat-8.5.8, jdk1.8. é…ç½® Tomcatä¿®æ”¹ server.xml æ–‡ä»¶æ–‡ä»¶åœ¨ Tomcat çš„æ ¹ç›®å½•çš„ conf ç›®å½•ä¸‹, å¦‚æˆ‘çš„æ–‡ä»¶åœ¨è¿™ä¸ªç›®å½•: 1apache-tomcat-8.5.8/conf/server.xml å¢žåŠ å¦‚ä¸‹å†…å®¹: 1234&lt;Host name=&quot;&lt;your local ip&gt;&quot; debug=&quot;0&quot; appBase=&quot;&lt;base dir&gt;&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt; &lt;Context path=&quot;&quot; docBase=&quot;&lt;html file path&gt;&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; crossContext=&quot;true&quot;/&gt; &lt;Logger className=&quot;org.apache.catalina.logger.FileLogger&quot; directory=&quot;logs&quot; prefix=&quot;tot_log.&quot; suffix=&quot;.txt&quot; timestamp=&quot;true&quot;/&gt;&lt;/Host&gt; æ³¨æ„:1.å°†ä¸Šè¿°å†…å®¹æ”¾åˆ° &lt;/Host&gt; å’Œ &lt;/Engine&gt; èŠ‚ç‚¹ä¸­é—´.2.å°† name=&quot;&lt;your local ip&gt;&quot; ä¸­çš„ æ”¹ä¸ºä½ æœ¬æœºçš„ ip åœ°å€.æŸ¥çœ‹æœ¬æœºçš„ ip åœ°å€æ–¹æ³•å¾ˆç®€å•: 1ifconfig | grep &quot;inet &quot; | grep -v 127.0.0.1 3.å°† appBase=â€â€œ ä¸­çš„ æ”¹ä¸ºä½ çš„ web ç›®å½•.4.å°† docBase=â€â€œ ä¸­çš„ æ”¹ä¸ºä½ çš„ html ç›®å½•. æˆ‘çš„é…ç½®å¦‚ä¸‹(éƒ¨åˆ†): 1234567891011121314151617181920212223 &lt;Host name=&quot;localhost&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt; &lt;!-- SingleSignOn valve, share authentication between web applications Documentation at: /docs/config/valve.html --&gt; &lt;!-- &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt; --&gt; &lt;!-- Access log processes all example. Documentation at: /docs/config/valve.html Note: The pattern used is equivalent to using pattern=&quot;common&quot; --&gt; &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot; prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot; pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt; &lt;/Host&gt; &lt;!--mark é…ç½®é™æ€ç½‘é¡µ. [BEGIN] --&gt; &lt;Host name=&quot;192.168.1.103&quot; debug=&quot;0&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt; &lt;Context path=&quot;&quot; docBase=&quot;test&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; crossContext=&quot;true&quot;/&gt; &lt;Logger className=&quot;org.apache.catalina.logger.FileLogger&quot; directory=&quot;logs&quot; prefix=&quot;tot_log.&quot; suffix=&quot;.txt&quot; timestamp=&quot;true&quot;/&gt; &lt;/Host&gt; &lt;!--mark é…ç½®é™æ€ç½‘é¡µ. [END] --&gt; &lt;/Engine&gt; &lt;/Service&gt;&lt;/Server&gt; æžå®šä¸Šé¢çš„é…ç½®, æŽ¥ä¸‹æ¥å¯ä»¥é…ç½®ç›¸å…³ç›®å½•äº†. åœ¨ Tomcat çš„æ ¹ç›®å½•æœ‰ä¸ªæ–‡ä»¶å¤¹ webapps, åœ¨ webapps ç›®å½•ä¸‹æ–°å»ºç›®å½• test å³å¯. æž„å»º HTML é¡µé¢åœ¨ test ç›®å½•, æ–°å»ºä¸€ä¸ª html æ–‡ä»¶ 1touch test.html æ–‡ä»¶å†…å®¹å¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536 &lt;p&gt;&lt;em&gt;Sample&lt;/em&gt; text&lt;/p&gt;&lt;p&gt;Now I input another line, with fancy&lt;u&gt;&lt;strong&gt;&lt;em&gt;styles&lt;/em&gt;&lt;/strong&gt;&lt;/u&gt;.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Sample&lt;/em&gt; text&lt;/p&gt;&lt;p&gt;Now I input another line, with fancy &lt;u&gt;&lt;strong&gt;&lt;em&gt;styles&lt;/em&gt;&lt;/strong&gt;&lt;/u&gt;.&lt;/p&gt;&lt;p&gt; mark.zhang is itman.&lt;/p&gt;&lt;style&gt;.button &#123; background-color: #4CAF50; border: none; color: white; padding: 15px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 86px; margin: 50px 200px 100px 300px; cursor: pointer; border-radius: 15;&#125;&lt;/style&gt;&lt;p&gt; &lt;button type=&quot;button&quot; onclick=&quot;myFunction()&quot; class=&quot;button&quot;&gt;Try it&lt;/button&gt;&lt;/p&gt;&lt;script&gt; function myFunction() &#123; alert(&quot;Blog: www.veryitman.com&quot;); &#125;;&lt;/script&gt; æ­å»ºå®ŒæˆåŽ, å¯åŠ¨ Tomcat æœåŠ¡å™¨. 1startup.sh åœ¨æµè§ˆå™¨é‡Œé¢é€šè¿‡ ip:port/test.html çš„æ–¹å¼æ¥è®¿é—®è¯¥é¡µé¢. çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æ•ˆæžœå³è¡¨ç¤ºæ­å»ºæˆåŠŸ: å®¢æˆ·ç«¯è®¿é—®å®¢æˆ·ç«¯è®¿é—®è¯¥é¡µé¢, ä½¿ç”¨ UIWebview æ¥è¯·æ±‚(HTTP åè®®)é¡µé¢å†…å®¹. ä¸€èˆ¬è¯·æ±‚ä¼šä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•: 1+ (instancetype)requestWithURL:(NSURL *)URL; è¯¥æ–¹æ³•çš„æè¿°å¦‚ä¸‹: 12Creates and returns a URL request for a specified URL with default cache policy and timeout value.The default cache policy is NSURLRequestUseProtocolCachePolicy and the default timeout interval is 60 seconds. å¤§æ¦‚æ„æ€æ˜¯ä½¿ç”¨çš„ç¼“å­˜ç­–ç•¥æ˜¯æ ¹æ®åè®®æ¥çš„, å³ NSURLRequestUseProtocolCachePolicy. è¶…æ—¶æ—¶é—´é»˜è®¤æ˜¯60s. ä¹Ÿå°±æ˜¯è¯´ç±»ä¼¼å¦‚ä¸‹çš„è¯·æ±‚: 1NSURLRequest *urlReq = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.f]; å¦‚æžœåè®®æ”¯æŒç¼“å­˜çš„è¯, UIWebview è¯·æ±‚åˆ°çš„æ•°æ®å°±æ˜¯ç¼“å­˜æ•°æ®.è¯¥ç¼“å­˜æ˜¯éœ€è¦ WEB æœåŠ¡å™¨æ”¯æŒçš„. è¿™é‡Œæˆ‘æ²¡æœ‰é…ç½® Tomcat çš„ç¼“å­˜.å¯ä»¥æŠ“åŒ…çœ‹ä¸‹: åŽç»­åšå®¢ä¼šåˆ†åˆ«ä¸ºå¤§å®¶ä»‹ç»åœ¨ Tomcat å’Œ Nginx é…ç½®ç¼“å­˜ä¸‹, å®¢æˆ·ç«¯ UIWebview è¯·æ±‚çš„ç›¸å…³é—®é¢˜. å®¢æˆ·ç«¯æ˜¾ç¤ºé¡µé¢æ•ˆæžœ: ViewController ä»£ç : 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138#import &quot;ViewController.h&quot;static NSString * const H5Url = @&quot;http://192.168.1.104:8080/test.html&quot;;@interface ViewController () &lt;UIWebViewDelegate&gt;@property (nonatomic, strong) UIWebView *webView;@property (nonatomic, strong) UIButton *refBtn;@end@implementation ViewController- (void)viewDidLoad&#123; [super viewDidLoad]; _webView = [[UIWebView alloc] init]; CGSize boundsSize = self.view.bounds.size; self.webView.frame = CGRectMake(0, 20, boundsSize.width, boundsSize.height); self.webView.backgroundColor = [UIColor whiteColor]; self.webView.scrollView.showsHorizontalScrollIndicator = NO; self.webView.scrollView.showsVerticalScrollIndicator = NO; self.webView.scalesPageToFit = YES; self.webView.delegate = self; [self.view addSubview:self.webView]; UIButton *refreshBtn = [UIButton buttonWithType:UIButtonTypeCustom]; [self.view addSubview:refreshBtn]; [refreshBtn addTarget:self action:@selector(onRefreshWebView) forControlEvents:UIControlEventTouchUpInside]; refreshBtn.backgroundColor = [UIColor redColor]; refreshBtn.layer.masksToBounds = YES; refreshBtn.layer.cornerRadius = 5.f; refreshBtn.frame = CGRectMake(50, 250, 200, 50); [refreshBtn setTitle:@&quot;åˆ·æ–°é¡µé¢&quot; forState:UIControlStateNormal]; _refBtn = refreshBtn; [self loadDataUsingCache];&#125;- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error&#123; NSLog(@&quot;didFailLoadWithError: %@&quot;, error); [self hideLoading];&#125;- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType&#123; NSLog(@&quot;shouldStartLoadWithRequest: %@&quot;, request); return YES;&#125;- (void)webViewDidStartLoad:(UIWebView *)webView&#123; NSLog(@&quot;webViewDidStartLoad&quot;);&#125;- (void)webViewDidFinishLoad:(UIWebView *)webView&#123; NSLog(@&quot;webViewDidFinishLoad&quot;); [self hideLoading];&#125;//åˆ·æ–°é¡µé¢.- (void)onRefreshWebView&#123; // æ–¹å¼1: ä¸ä½¿ç”¨ç¼“å­˜è¯·æ±‚æ•°æ® //[self loadDataNoUsingCache]; // æ–¹å¼2: æ¸…é™¤ NSCache ç¼“å­˜, å†è¯·æ±‚æ•°æ® [self clearAllCache]; [self loadDataUsingCache];&#125;- (void)loadDataUsingCache&#123; [self showLoading]; NSURL *url = [NSURL URLWithString:H5Url]; NSURLRequest *urlReq = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataDontLoad timeoutInterval:10.f]; [self.webView loadRequest:urlReq];&#125;- (void)loadDataWithProtocol&#123; [self showLoading]; NSURL *url = [NSURL URLWithString:H5Url]; [NSURLRequest requestWithURL:url]; NSURLRequest *urlReq = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.f]; [self.webView loadRequest:urlReq];&#125;- (void)loadDataNoUsingCache&#123; [self showLoading]; NSURL *url = [NSURL URLWithString:H5Url]; NSURLRequest *urlReq = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:20.0]; [self.webView loadRequest:urlReq];&#125;- (void)clearAllCache&#123; // remove cache rsp [[NSURLCache sharedURLCache] removeAllCachedResponses]; [[NSURLCache sharedURLCache] setDiskCapacity:0]; [[NSURLCache sharedURLCache] setMemoryCapacity:0];&#125;- (void)showLoading&#123; [self.refBtn setTitle:@&quot;åˆ·æ–°ä¸­...&quot; forState:UIControlStateNormal];&#125;- (void)hideLoading&#123; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [self.refBtn setTitle:@&quot;åˆ·æ–°é¡µé¢&quot; forState:UIControlStateNormal]; &#125;);&#125;@end è¿™é‡Œæ³¨æ„ä¸‹é¢çš„ ä¸‰ä¸ªæ–¹æ³• : 123456789// ä½¿ç”¨ç¼“å­˜æ•°æ®, å¦‚æžœæœ‰ç¼“å­˜çš„è¯// ä½¿ç”¨è¿™ä¸ªæ–¹æ³•, æ”¹å˜ HTML æˆ–è€… JS ä»£ç // é¡µé¢ä¸ä¼šæ‹‰å–æœ€æ–°æ•°æ®, è¿˜æ˜¯ä½¿ç”¨ä¹‹å‰è¯·æ±‚åˆ°çš„æ•°æ®.// é™¤éžé‡æ–°åˆ·æ–°- (void)loadDataUsingCache;// ä½¿ç”¨åè®®ç¼“å­˜, éœ€è¦ web æœåŠ¡å™¨æ”¯æŒ.- (void)loadDataWithProtocol;// ä¸ä½¿ç”¨ç¼“å­˜, åŠ è½½æ•°æ®- (void)loadDataNoUsingCache; å¦å¤–, åˆ·æ–° UIWebview çš„æ–¹å¼å¦‚ä¸‹, æœ‰ ä¸¤ç§æ–¹å¼ æ¥åˆ·æ–°é¡µé¢: 123456789101112/** * åˆ·æ–°é¡µé¢. */- (void)onRefreshWebView&#123; // æ–¹å¼1: ä¸ä½¿ç”¨ç¼“å­˜è¯·æ±‚æ•°æ® //[self loadDataNoUsingCache]; // æ–¹å¼2: æ¸…é™¤ NSCache ç¼“å­˜, å†è¯·æ±‚æ•°æ® [self clearAllCache]; [self loadDataUsingCache];&#125; è¿™ç§åˆ·æ–°æ–¹å¼, ä¼šé‡æ–°åŠ è½½æ•°æ®.ä½†æ˜¯ä¸é€‚åˆå¤šå±‚çº§çš„ HTML é¡µé¢, æ¯”å¦‚ä½ çš„ HTML é¡µé¢æœ‰å¾ˆå¤šå±‚, æƒ³åˆ·æ–°å½“å‰é¡µé¢, å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼: 12// é‡æ–°åŠ è½½å½“å‰é¡µé¢[self.webView reload]; é™„åŠ æŸ¥çœ‹æœ¬æœº IP çš„ shell 12#!/bin/shifconfig | grep &quot;inet &quot; | grep -v 127.0.0.1 åœæ­¢ Tomcat çš„è¿è¡Œ 1shutdown.sh]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS UIWebView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[f8app]]></title>
    <url>%2F2017%2F01%2F01%2Ff8app%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦æŽ¢è®¨çš„æ˜¯å¦‚ä½•ç¼–è¯‘å’Œè¿è¡Œ f8app. ä»‹ç»f8app æ˜¯ Facebook å¼€æºçš„, åŸºäºŽ React Native å¼€å‘çš„ä¸€æ¬¾ App. ä»£ç åŸºæœ¬éƒ½æ˜¯ js çš„, å¾ˆå°‘æœ‰åŽŸç”Ÿçš„ä»£ç . f8app æ˜¯å€Ÿé‰´å’Œå­¦ä¹  React Native çš„ä¸Šå¥½èµ„æ–™. åŽŸæ–‡ä»‹ç»: This is the entire source code of the official F8 app of 2016, available on Google Play and the App Store. é¡¹ç›®å¼€æºåœ°å€: Github ç¼–è¯‘è¿è¡ŒçŽ¯å¢ƒè¦æ±‚ å®‰è£…å’Œé…ç½®äº† React Native å¼€å‘çŽ¯å¢ƒ. Xcode 7.3 + CocoaPods (only for iOS) 1.0+ MongoDB (needed to run Parse Server locally) æºç æž„å»ºä¸‹è½½æºç  1git clone https://github.com/fbsamples/f8app.git ä¸‹è½½å®ŒæˆåŽ, è¿›å…¥ä¸‹è½½çš„ f8app ç›®å½• 12cd f8appnpm install å¦‚æžœæ˜¯ iOS çš„è¯, éœ€è¦è¿›å…¥ iOS ç›®å½•æ‰§è¡Œ pod install 12cd iospod install åœ¨é¡¹ç›® f8app ç›®å½•ä¸‹è¿è¡Œ: 1npm start æ‰“å¼€æµè§ˆå™¨è¾“å…¥åœ°å€ http://localhost:8080, å¯ä»¥çœ‹åˆ° graphql çš„ç•Œé¢. å®‰è£… MongoDBä½¿ç”¨ Homebrew æ¥å®‰è£…. 1brew install mongodb å¯¼å…¥æ•°æ®å¯¼å…¥ä¾‹å­æ•°æ®. æ³¨æ„:åœ¨æºç çš„è·¯å¾„å³ ~/yourpath/f8app ä¸‹é¢æ‰§è¡Œ, ä¸‹é¢æ“ä½œæ²¡æœ‰ç‰¹æ®Šè¯´æ˜Žéƒ½æ˜¯åœ¨æºç æ ¹ç›®å½•ä¸‹é¢æ“ä½œ.ä½ å¯ä»¥å¤šå¼€å‡ ä¸ªç»ˆç«¯ç«¯å£æ¥è¿›è¡Œæ“ä½œ. 1npm run import-data å¯¼å…¥ä¾‹å­æ•°æ®, ä¼šæŠ¥ä¸‹é¢çš„ é”™è¯¯: 123456error: Uncaught internal server error. &#123; [MongoError: connect ECONNREFUSED 127.0.0.1:27017]name: &apos;MongoError&apos;,message: &apos;connect ECONNREFUSED 127.0.0.1:27017&apos; &#125; Error: connect ECONNREFUSED 127.0.0.1:27017at Object.exports._errnoException (util.js:893:11)at exports._exceptionWithHostPort (util.js:916:20)at TCPConnectWrap.afterConnect as oncomplete éœ€è¦å®‰è£… mongodb-runner å®‰è£…æ–¹æ³•å¦‚ä¸‹: 1sudo npm install -g parse-server mongodb-runner è¿è¡Œ mongodb-runner: 1mongodb-runner start è¿™é‡Œæ‰§è¡Œå®Œæ¯•åŽ, éœ€è¦ç­‰å¾…ä¸€ä¼š. ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯: 1Starting a MongoDB deployment to test against... ä¸Šé¢è¿è¡Œç»“æŸåŽ, ä½ å¯ä»¥æŸ¥çœ‹ MongoDB æ˜¯å¦åœ¨è¿è¡Œ: 1lsof -iTCP:27017 -sTCP:LISTEN ä¼šæ˜¾ç¤ºå½“å‰æ­£åœ¨è¿è¡Œçš„ä¿¡æ¯: 12COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEmongod 86824 mark 7u IPv4 0x91959c43a65644ed 0t0 TCP *:27017 (LISTEN) åœæ­¢ mongodb è¿è¡Œçš„æ–¹å¼å¦‚ä¸‹: 1mongodb-runner stop æŸ¥çœ‹æ•°æ®Parse Dashboard GraphiQL å¯åŠ¨ react-native1react-native start è¿è¡Œ f8appAndroid: 123react-native run-androidadb reverse tcp:8081 tcp:8081 # required to ensure the Android app canadb reverse tcp:8080 tcp:8080 # access the Packager and GraphQL server iOS: 1react-native run-ios å¦‚æžœå‡ºçŽ°çº¢è‰²èƒŒæ™¯çš„ error æç¤º, å¯ä»¥ä¸ç®¡, ç›´æŽ¥ Dismiss å³å¯. ç„¶åŽå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢: é—®é¢˜1.åœ¨è¿è¡ŒåŽå…³é—­ç™»å½•æŒ‰é’®, æŠ¥é”™: 1AppEventsLogger.logEvent è§£å†³æ–¹æ¡ˆ: åœ¨ /js/store/track.js æ–‡ä»¶çš„ç¬¬ 43 è¡Œ, æ³¨é‡ŠæŽ‰ log, å¦‚ä¸‹: 123case &apos;SKIPPED_LOGIN&apos;: //AppEventsLogger.logEvent(&apos;Skip login&apos;, 1); break; åœ¨æ¨¡æ‹Ÿå™¨ä¸Šé¢é‡æ–° Reload å³å¯.]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>iOS Android JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†è§ 2016]]></title>
    <url>%2F2016%2F12%2F31%2F%E5%86%8D%E8%A7%81-2016%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ˜¯2016å¹´çš„æœ€åŽä¸€å¤©ï¼Œæ­£å¥½èµ¶ä¸Šæ”¾å‡ï¼Œç»™è‡ªå·±çš„è¿™ä¸€å¹´åšä¸ªå°ç»“ã€‚ 2016ï¼Œç»§ç»­åšé¡¹ç›®ï¼Œä½œä¸ºä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œä¸åœåœ°åœ¨å­¦ä¹ ã€‚ 2016ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šå…³äºŽäº§å“å’Œè¿è¥ç›¸å…³çš„çŸ¥è¯†ã€‚çŸ¥é“äº† å€’é€¼ çš„ä½œç”¨. 2016ï¼Œè¯»äº†20æœ¬éžæŠ€æœ¯ç±»ä¹¦ç±ï¼Œå…»æˆäº†è¯»ä¹¦çš„ä¹ æƒ¯ï¼Œå¹¶æŠŠè¯»ä¹¦çš„å¥½å¤„è®²ç»™èº«è¾¹çš„äººå¬ã€‚ 2016ï¼Œå¼€å§‹å‡è‚¥ï¼Œæ³¨æ„é”»ç‚¼èº«ä½“ï¼Œå‡ ä¹Žæ¯å‘¨éƒ½æœ‰ä¸€æ¬¡ä»Žå…¬å¸åˆ°å®¶çš„æ­¥è¡Œï¼Œä¸€æ¬¡ç¯®çƒæˆ–è€…è·‘æ­¥è¿åŠ¨ã€‚ 2016ï¼Œè´­ä¹°äº†åŸŸåï¼Œå»ºç«‹äº†è‡ªå·±çš„ åšå®¢ç½‘ç«™ã€‚ 2016ï¼Œå„¿å­å¤§äº†ä¸€å²ï¼Œè‡ªå·±è€äº†ä¸€å²ï¼Œå®¶åº­ä¾æ—§å¹¸ç¦ç€ã€‚æ¸æ¸åœ°ç†è§£äº†åšçˆ¶äº²çš„è´£ä»»ã€‚ 2016ï¼Œå¯¹è‡ªå·±å½±å“æœ€å¤§çš„å‡ å¥è¯ï¼Œåˆ†äº«ç»™å¤§å®¶: 1. æŠ€æœ¯è¦ç»™äº§å“æä¾›æœ€å¤§çš„è‡ªç”±åº¦. 2. ä¸è¦è½»æ˜“çš„è¯´ NO. 3. è¦ä¸æ–­çš„è®©è‡ªå·±å€¼é’±, è€Œä¸æ˜¯ç®€å•çš„ä¸ºäº†é‡‘é’±è€Œè·³æ§½. 4. ä¸è¦æ€»æ˜¯æŠ±æ€¨ä½ çš„äº§å“è®¾è®¡æ˜¯ç‹—å±Ž, å­¦ä¼šå’Œäº§å“æ²Ÿé€šæ›´ä¼˜çš„æ–¹æ¡ˆ. 5. å…³æ³¨ç»†èŠ‚, æŠŠäº§å“åšå¥½. 6. å¤šå…³æ³¨åˆ«äººçš„ä¼˜ç‚¹. 7. è®©å¯¹æ–¹æŠŠè¯è¯´å®Œ. 8. å¤šçœ‹ä¹¦, å¤šæ€è€ƒ. æ„Ÿè°¢æ‰€æœ‰é™ªä¼´å’Œæ”¯æŒæˆ‘çš„æœ‹å‹ï¼ŒåŒäº‹ï¼Œäº²äººï¼ ç¥æ„¿æ‰€æœ‰äºº2017å¹¸ç¦ã€å¥åº·ã€å¿«ä¹ï¼]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac é…ç½® Tomcat8]]></title>
    <url>%2F2016%2F11%2F26%2FMac-%E9%85%8D%E7%BD%AE-Tomcat8%2F</url>
    <content type="text"><![CDATA[Tomcat ç®€ä»‹Tomcat æ˜¯ä¸€ä¸ª Web æœåŠ¡å™¨. Web æœåŠ¡å™¨æ˜¯æŒ‡ä¸ºç‰¹å®šç»„ä»¶æä¾›æœåŠ¡çš„ä¸€ä¸ªæ ‡å‡†åŒ–çš„è¿è¡Œæ—¶çš„çŽ¯å¢ƒ.å¯ä¸ºç»„ä»¶æä¾›äº‹åŠ¡å¤„ç†, æ•°æ®è®¿é—®, å®‰å…¨æ€§å’ŒæŒä¹…æ€§ç­‰æœåŠ¡. Tomcat æ˜¯å…è´¹ä¸”å¼€æºçš„, ä»–æ˜¯ Apache è½¯ä»¶åŸºé‡‘ä¼š Jakarta é¡¹ç›®ä¸­çš„å…¶ä¸­ä¸€ä¸ªå­é¡¹ç›®.ç”± Apache, Sun å’Œå…¶ä»–ä¸€äº›å…¬å¸åŠä¸ªäººå…±åŒå¼€å‘å®Œæˆ. Tomcat ä¹Ÿæ˜¯ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ JSP æœåŠ¡å™¨. JSP æ˜¯ Java Server Pages çš„ç®€ç§°, æ˜¯åœ¨ä¼ ç»Ÿçš„ HTML æ–‡ä»¶ä¸­æ’å…¥ Java ç¨‹åºæ®µå’Œ JSP æ ‡è®°çš„ä¸€ç§åŠ¨æ€ç½‘é¡µæŠ€æœ¯. ä¸‹è½½ Tomcatå‰å¾€ è¿™é‡Œ å¯ä»¥ä¸‹è½½ Tomcat. æˆ‘ç›®å‰å®‰è£…çš„æ˜¯ 8.5.8 ç‰ˆæœ¬çš„. å®‰è£…å…ˆå®‰è£… JDK, å®‰è£…æ•™ç¨‹å¯ä»¥å‚è€ƒ Mac é…ç½® JDK1.8 è¿™ç¯‡æ–‡ç« . è§£åŽ‹ä¸‹è½½çš„ tar.gz å³å¯. æœ€å¥½è§£åŽ‹åˆ°è‡ªå·±çš„å·¥ä½œç›®å½•, å¦‚: 1~/workspace/developr/ é…ç½®çŽ¯å¢ƒå˜é‡ç¼–è¾‘ /etc/profile æ–‡ä»¶ 1sudo vim /etc/profile æ·»åŠ å¦‚ä¸‹å˜é‡: 12345JRE_HOME=$JAVA_HOMETOMCAT_HOME=/Users/mark/developer/apache/apache-tomcat-8.5.8PATH=$JAVA_HOME/bin:$TOMCAT_HOME/bin:$PATHexport JRE_HOMEexport PATH å…¶ä¸­çš„ JAVA_HOME æ˜¯ Mac é…ç½® JDK1.8 è¿™ç¯‡æ–‡ç« é‡Œé¢è®¾ç½®çš„ JDK çš„çŽ¯å¢ƒå˜é‡. é…ç½®çŽ¯å¢ƒå˜é‡çš„ç›®çš„, å¯ä»¥è®©æˆ‘ä»¬æ–¹ä¾¿çš„ä½¿ç”¨ Tomcat çš„å‘½ä»¤. æ£€éªŒå®‰è£…æ˜¯å¦æˆåŠŸä½¿ /etc/profile é…ç½®æ–‡ä»¶ç«‹å³ç”Ÿæ•ˆ. 1source /etc/profile å¦‚æžœæ²¡æœ‰ç”Ÿæ•ˆ, é‡å¯ç»ˆç«¯å³å¯. å¼€å¯ Tomcat æœåŠ¡, æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤: 1startup.sh è¯¥å‘½ä»¤åœ¨ Tomcat çš„å®‰è£…ç›®å½•çš„ bin ç›®å½•ä¸‹é¢. æ‰§è¡ŒåŽ, å¯ä»¥çœ‹åˆ°: 123456Using CATALINA_BASE: /Users/mark/developer/apache/apache-tomcat-8.5.8Using CATALINA_HOME: /Users/mark/developer/apache/apache-tomcat-8.5.8Using CATALINA_TMPDIR: /Users/mark/developer/apache/apache-tomcat-8.5.8/tempUsing JRE_HOME: /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/HomeUsing CLASSPATH: /Users/mark/developer/apache/apache-tomcat-8.5.8/bin/bootstrap.jar:/Users/mark/developer/apache/apache-tomcat-8.5.8/bin/tomcat-juli.jarTomcat started. åœ¨æµè§ˆå™¨é‡Œé¢æ‰“å¼€: http://localhost:8080/ å³å¯çœ‹åˆ°ä¸€åªå¯çˆ±çš„ Tom çŒ«. æ‰§è¡Œ shutdown.sh å¯ä»¥å…³é—­ Tomcat.]]></content>
      <categories>
        <category>Server</category>
      </categories>
      <tags>
        <tag>Tomcat Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac å®‰è£…å’Œä½¿ç”¨ infer]]></title>
    <url>%2F2016%2F11%2F26%2FMac-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8-infer%2F</url>
    <content type="text"><![CDATA[ä»‹ç»infer æ˜¯ Facebook å¼€æºçš„ä¸€æ¬¾ä»£ç é™æ€æ£€æŸ¥å·¥å…·, æºç å¯ä»¥åœ¨ Github ä¸Šé¢èŽ·å–. æ”¯æŒ Java/C/OC ç­‰è¯­è¨€, æ”¯æŒ Gradle, Buck, Maven, Xcodebuild, Make ç­‰. æˆ‘ä¸€èˆ¬ç”¨æ¥åˆ†æž iOS å’Œ Android å·¥ç¨‹. å¯ä»¥åœ¨ è¿™é‡Œ æŸ¥çœ‹ Start. å®‰è£… inferåªè¦ä½ ç”¨ Homebrew, mac ä¸‹å®‰è£… infer å¾ˆç®€å•: 12brew updatebrew install infer åœ¨æ—©æœŸç‰ˆæœ¬, infer ä¸æ”¯æŒ brew å®‰è£…. å®‰è£…èµ·æ¥å„ç§é—®é¢˜, çŽ°åœ¨ infer æ”¯æŒäº† brew å®‰è£…, å¾ˆæ–¹ä¾¿. è¿™é‡Œæˆ‘ä½¿ç”¨çš„ infer ç‰ˆæœ¬æ˜¯ 0.9.4. å®‰è£…æˆåŠŸåŽ, å¯ä»¥æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬: 1infer -version å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯: 12345Infer version v0.9.4Copyright 2009 - present Facebook. All Rights Reserved.Mac:public mark$ infer --versionInfer version v0.9.4Copyright 2009 - present Facebook. All Rights Reserved. è¿™é‡Œæœ‰ä¸ªé—®é¢˜, æœ‰æ—¶å€™ brew æ— æ³•æ›´æ–°æœ€æ–°çš„ infer, æˆ‘ç›®å‰çš„è§£å†³æ–¹æ¡ˆæ˜¯å…ˆå¸è½½ä¹‹å‰å®‰è£…çš„ infer, ç„¶åŽå†é‡æ–°å®‰è£…. å¸è½½ infer 1brew uninstall infer å®‰è£… xcprettyxcpretty æ˜¯ä¸€æ¬¾æ ¼å¼åŒ– xcodebuild è¾“å‡ºç»“æžœçš„å·¥å…·. 123456â–¸ Building X/N [(Release)]â–¸ Check Dependenciesâ–¸ Copying Info.plistâ–¸ Running script &apos;[CP] Check Pods Manifest.lock&apos;â–¸ Running script &apos;Replace PaySdk&apos;â–¸ Compiling User.m ä»Ž0.9.4ç‰ˆæœ¬åŽ, infer é»˜è®¤ä½¿ç”¨äº† xcpretty. å¯ä»¥ä½¿ç”¨ gem å®‰è£… xcpretty å·¥å…·: 1gem install xcpretty å¦‚æžœæ²¡æœ‰å®‰è£…æˆåŠŸ, æˆ–è€…æç¤ºæƒé™ä¸å¤Ÿ, é‚£å°±è¿™æ ·æŠ˜è…¾: 1sudo gem install xcpretty æƒ³äº†è§£æ›´å¤šå…³äºŽ xcpretty çš„ä½¿ç”¨å¯ä»¥åŽ» github. ä½¿ç”¨ inferiOS é¡¹ç›®ä½¿ç”¨ inferinfer çš„æ–‡æ¡£å†™çš„ä¹Ÿè¾ƒå…¨é¢. å¯ä»¥åœ¨ è¿™é‡Œ æŸ¥çœ‹ä½¿ç”¨æ–¹æ³•. 1.åˆ†æž Cocoapods é¡¹ç›® 1infer -- xcodebuild -workspace N.xcworkspace -scheme NSchema å…¶ä¸­ N.xcworkspace æ˜¯ä½ çš„ workspace åç§°, NSchema æ˜¯ä½ éœ€è¦æ£€æŸ¥çš„ Schema åç§°. 2.åˆ†æž .xcodeproj 1infer -- xcodebuild -target targetName -configuration Debug -sdk iphonesimulator å…¶ä¸­ targetName æ˜¯é¡¹ç›®çš„ target åç§°, å¿…é¡»æŒ‡å®š. åˆ†æžæˆåŠŸåŽ, infer ä¼šæœ‰è¾“å‡ºæŠ¥å‘Š. è¯¥æŠ¥å‘Šåœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸‹, åç§°æ˜¯ infer-out. bug.txt æ˜¯ä»¥æ–‡æœ¬æ–¹å¼è¾“å‡ºçš„ issue æ–‡æ¡£.å¦å¤–è¿˜æœ‰ csv æ ¼å¼çš„ issue æ–‡æ¡£. Android Gradle å·¥ç¨‹ä½¿ç”¨ infer12gradle cleaninfer -- gradle build å…¶ä»–ç”¨æ³•infer è¿˜æœ‰å¾ˆå¤šé«˜çº§çš„ç”¨æ³•, æ¯”å¦‚å¯ä»¥å¢žé‡æ£€æŸ¥. å¢žé‡æ£€æŸ¥çš„åŠŸèƒ½ä¾èµ–äºŽä½ çš„ç¼–è¯‘å™¨æ˜¯å¦æ”¯æŒ. infer å¢žé‡æ£€æŸ¥çš„é€‰é¡¹æ˜¯ â€“reactive. ä¹‹å‰çš„ç‰ˆæœ¬æ˜¯ â€“incremental é€‰é¡¹.è‡ªä»Ž v0.8.0 ç‰ˆæœ¬åŽä½¿ç”¨äº† â€“reactive é€‰é¡¹. å¯ä»¥è¿™æ ·æ¥è¿›è¡Œå¢žé‡æ£€æŸ¥: 1infer --reactive -- xcodebuild -workspace N.xcworkspace -scheme NSchema infer è¿˜æœ‰å¾ˆå¤šé«˜çº§ç”¨æ³•, å¯ä»¥åœ¨ Advanced usage ä¸­åŽ»æŸ¥é˜…å’Œä½¿ç”¨. å†ä½¿ç”¨è¿‡ç¨‹ä¸­, éšç€ MacOS, Xcode çš„å‡çº§, infer ä¼šé¢ä¸´æ›´å¤šçš„æŒ‘æˆ˜, å¦‚æžœé‡åˆ°é—®é¢˜, ç¬¬ä¸€æ—¶é—´åŽ» GitHub ä¸Šé¢æ issue.]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>MacOS infer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac é…ç½® JDK1.8]]></title>
    <url>%2F2016%2F11%2F26%2FMac-%E9%85%8D%E7%BD%AE-JDK1-8%2F</url>
    <content type="text"><![CDATA[ä¸‹è½½ JDKåœ¨ è¿™é‡Œä¸‹è½½ jdk. ä¸‹è½½ç‰ˆæœ¬æ˜¯ 1.8u112, ä¿¡æ¯å¦‚ä¸‹: å®‰è£… JDKä¸‹è½½å®ŒæˆåŽ, ç›´æŽ¥åŒå‡»å®‰è£…å³å¯. é…ç½® PathæˆåŠŸå®‰è£…åŽ, ç›®å½•/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/ å°±ä¼šå­˜åœ¨. ç¼–è¾‘ /etc/profile æ–‡ä»¶: 1sudo vim /etc/profile æ·»åŠ å¦‚ä¸‹ä»£ç : 123456JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/HomeCLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarPATH=$JAVA_HOME/bin:$PATHexport JAVA_HOMEexport CLASSPATHexport PATH ä¿å­˜æ–‡ä»¶. ä½¿è¿™ä¸ªæ–‡ä»¶ç«‹å³ç”Ÿæ•ˆ.å¯ä»¥ source ä¸€ä¸‹ 1source /etc/profile æ£€éªŒæ‰§è¡Œä¸‹é¢å‘½ä»¤æ¥æ£€éªŒ jdk æ˜¯å¦å®‰è£…æˆåŠŸ. 1java -version è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯, æ ‡ç¤ºé…ç½® JDK æˆåŠŸ. 123java version â€œ1.8.0_112â€Java(TM) SE Runtime Environment (build 1.8.0_112-b16)Java HotSpot(TM) 64-Bit Server VM (build 25.112-b16, mixed mode) æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>MacOS java jdk</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GameDevelopment: ä¸Ž Cocos2d çš„å†ç›¸é€¢]]></title>
    <url>%2F2016%2F11%2F12%2FGameDevelopment-%E4%B8%8E-Cocos2d-%E7%9A%84%E5%86%8D%E7%9B%B8%E9%80%A2%2F</url>
    <content type="text"><![CDATA[è®¤è¯† Cocos2dç›¸ä¿¡å¾ˆå¤šäººå¬è¯´è¿‡ cocos2d-x è¿™ä¸ªå¼•æ“Ž, ä½†å¬è¿‡ cocos2d-objc çš„äººåº”è¯¥ä¸å¤š. cocos2d-objc æ˜¯ cocos ç³»åˆ—çš„ objective-c ç‰ˆæœ¬.å¼€å‘è¯­è¨€æ˜¯ OC.åœ¨ iOS ä¸Šé¢ä½¿ç”¨è¯¥ç‰ˆæœ¬çš„å¼•æ“Ž, åŸºæœ¬æ˜¯æ— ç¼è¿žæŽ¥(å†™çš„æ²¡æœ‰ä»€ä¹ˆéšœç¢). æ¬£èµä¸€ä¸‹ cocos2d-objc çš„ logo, å¦‚å›¾: å¦‚æžœä½ å¯¹ OC ç‰ˆæ„Ÿå…´è¶£, å¯ä»¥é€šè¿‡åšæ–‡ coco2d-iphone: çŽ¯å¢ƒæ­å»º åŽ»äº†è§£. cocos2d-x ç›®å‰æ”¯æŒ JavaScript, lua, c++ ç­‰ä¸»æµè¯­è¨€æ¥å¼€å‘.cocos è¿˜åœ¨è¿…çŒ›å‘å±•ä¸­, ä¸æ–­çš„å®Œå–„å¼€å‘å·¥å…·, å¹¿å¤§æ¸¸æˆå¼€å‘è€…ä¾ç„¶çƒ­åŠ›è´¡çŒ®, ç¨‹åºçŒ¿ä»¬åœ¨æ¸¸æˆçš„æˆ˜åœºæŒ¥æ´’é’æ˜¥. çŽ°åœ¨ cocos çš„å¼€å‘è€…ä¼šå¾—åˆ°æ›´å¤šçš„æ”¯æŒ. ä¸‹é¢ç»™å¼ å›¾æ¥å±•ç¤º cocos å®¶æ—åŠå…¶å‘å±•: ç”± libgdx è½¬å‘ Cocos2då‡ å¹´å‰, é‚£ä¸ªæ—¶å€™è¿˜åœ¨å¼€å‘æ£‹ç‰Œæ¸¸æˆ, å½“æ—¶è‡ªå·±ä¹Ÿæ˜¯åˆšåˆšæŽ¥è§¦æ¸¸æˆå¼€å‘è¿™ä¸ªã€Œé«˜é€¼æ ¼ã€çš„è¡Œä¸š, ä¹‹å‰è‡ªå·±æ˜¯ä¸ªçº¯ App å¼€å‘è€…. å†…å¿ƒè¿˜æ˜¯è›®æ¿€åŠ¨çš„, å¿ƒæƒ³å¯èƒ½è¦èµ°ä¸Šäººç”Ÿå·…å³°äº†â€¦ æ£‹ç‰Œæ¸¸æˆ, å½“æ—¶ä½¿ç”¨çš„æ˜¯ java çš„æ¸¸æˆå¼•æ“Ž libgdx 0.X.X çš„ç‰ˆæœ¬, è¯¥å¼•æ“Žå’Œ Android åŸºæœ¬ä¹Ÿæ˜¯æ— ç¼è¿žæŽ¥, Api è®¾è®¡çš„å¾ˆå¥½. çŽ°åœ¨ libgdx ä¹Ÿå‘å±•åˆ°äº†1.6.x ç‰ˆæœ¬äº†, å·¥å…·ä¹Ÿå®Œå–„äº†å¾ˆå¤š. è™½ç„¶ libgdx ä¹Ÿå¯ä»¥è·¨å¹³å°, ä½†æ˜¯æœ€ç»ˆæˆ‘ä»¬è¿˜æ˜¯é€‰æ‹©äº† cocos2d-x æ¥ç§»æ¤è¯¥æ¸¸æˆ.å…¶ä¸­åŽŸå› æ˜¯å› ä¸º cocos2d-x å¤ªç«äº†, äººä¹Ÿå¥½æ‰¾. æ”¹ä¸º cocos2d-x çš„ç‰ˆæœ¬ä¹‹åŽ, æˆ‘å°±è¢«å®‰æŽ’åˆ°äº†å¦å¤–ä¸€ä¸ªé¡¹ç›®, ä¹Ÿæ˜¯ä¸€ä¸ªæ£‹ç‰Œæ¸¸æˆ, è¯¥æ¸¸æˆçŽ°åœ¨åœ¨è…¾è®¯çš„å¾®ä¿¡æ¸¸æˆé‡Œé¢è¿è¥. è¿™ä¸ªæ¸¸æˆæ˜¯ cocos2d-objc çš„å¼•æ“Žå†™çš„, è‡ªå·±ä¹Ÿä¸ä¼š objc, äºŽæ˜¯ç¡¬ç€å¤´çš®å­¦ä¹ , å¾ˆå¿«çš„å°±ä¸Šæ‰‹äº†è¿™ä¸ªé¡¹ç›®.å†™çš„ä¹Ÿæ˜¯é£Žç”Ÿæ°´èµ·. cocos2d-objc, çŽ°åœ¨ä¹Ÿæ”¯æŒè·¨å¹³å°, å¹¶ä¸”æœ‰ xcode çš„æ’ä»¶, å¯ä»¥åœ¨ xcode é‡Œé¢å†™ Android çš„ä»£ç , è°ƒè¯•å¼€å‘ç­‰. å› ä¸ºæŽ¥è§¦ cocos2d, åŽé¢å°±ç›´æŽ¥å¼€æž iOS å¼€å‘äº†. å†æ¬¡ä½¿ç”¨ Cocos2däº’è”ç½‘ IT ä¸šçš„å‘å±•, åˆºæ¿€äº†å„ä¸ªè¡Œä¸šçš„å‘å±•, ä¹Ÿä¿ƒè¿›å’Œæ¿€å‘äº†æ–°ç”Ÿçš„æŠ€æœ¯, åœ¨è¿™ä¸ªè¡Œä¸š, æ¯ä¸ªäººéƒ½èƒ½ä½“ä¼š æ´»åˆ°è€å­¦åˆ°è€ è¿™å¥è¯çš„å«ä¹‰. è¿™ä¸¤å¹´, HTML5 çš„å‘å±•, è®©å¾ˆå¤šç¨‹åºå‘˜é‡æ–°è®¤è¯†äº† JavaScript çš„é‡è¦æ€§. ç‰¹åˆ«æ˜¯æœ€è¿‘ ReactNative çš„å‘å±•, jsPacth çš„å¼€æº, å¾®ä¿¡å°ç¨‹åºçš„æŽ¨å‡º, è®© JavaScript ç«å¾—ä¸è¦ä¸è¦çš„. è¯´å®žè¯, æ˜¯æ—¶å€™å¼€å§‹å­¦ä¹ å‰ç«¯ç›¸å…³çš„æŠ€æœ¯äº†, è‡³å°‘ä½ éœ€è¦åŽ»äº†è§£. cocos2d-js çš„å‘å±•, ç»™ HTML æ¸¸æˆå¼€å‘å¸¦æ¥äº†å¾ˆå¤šä¾¿åˆ©. æœ€è¿‘æˆ‘ä»¬éœ€è¦å¼€å‘ H5 çš„æ¸¸æˆ, ç›´æŽ¥æ‹¿èµ· coco2d-x(æ”¯æŒ JavaScript) å°±æ’¸èµ·. åŽ» GitHub ä¸Šé¢ç›´æŽ¥ clone æœ€æ–°ç‰ˆå°±å¯ä»¥, æŒ‰ç…§ README.md æ¥æ­å»ºçŽ¯å¢ƒå°±å¥½äº†. åŽè®°è¿™ç¯‡åšå®¢ä¹Ÿæ˜¯æœ‰æ„Ÿè€Œå‘, æ²¡æœ‰å®žè´¨æ€§çš„å†…å®¹. ä¸»è¦ç›®çš„æ˜¯æƒ³å‘Šè¯‰å¤§å®¶, æŠ€æœ¯çš„å‘å±•æ—¥æ–°æœˆå¼‚, æƒ³åœ¨è¿™é‡Œå¤§å±•æ‹³è„š, ä½ éœ€è¦ä¿æŒä¸€é¢—å¹´è½»çš„å¿ƒ, ä¸æ€•è‹¦, å‹‡å¾€ç›´å‰çš„ç²¾ç¥ž. æˆ‘ä»¬éœ€è¦å­¦ä¹ çš„æŠ€æœ¯æœ‰å¾ˆå¤š, æˆ‘è®¤ä¸º, è¦æ ¹æ®é¡¹ç›®æœ¬èº«çš„å‘å±•æ¥é€‚åº¦çš„å­¦ä¹ , åˆ‡è®°ç›²ç›®çš„å­¦ä¹ , å­¦ä¹ ä¸€é—¨æ–°æŠ€æœ¯ä¹‹åŽ, è¦åŠæ—¶çš„è¿ç”¨åœ¨é¡¹ç›®å½“ä¸­, å¹¶åˆ†äº«ç»™ä½ èº«è¾¹çš„äºº. ä¸æ‹’ç»ä¸æŽ’æ–¥æ–°æŠ€æœ¯, åšæŒå­¦ä¹ å’Œä¹äºŽåˆ†äº«, åº”è¯¥æ˜¯å¿…å¤‡çš„æŠ€èƒ½.]]></content>
      <categories>
        <category>Game</category>
      </categories>
      <tags>
        <tag>Cocos2d Game</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac install Cocoapods]]></title>
    <url>%2F2016%2F11%2F08%2FMac-install-Cocoapods%2F</url>
    <content type="text"><![CDATA[å£°æ˜Žè¿™ç¯‡åšå®¢åŽŸæœ¬è¢«æˆ‘å‘è¡¨åœ¨ CSDN . é‚£é‡Œä¸å†æ›´æ–°, çŽ°åœ¨åœ¨è¿™é‡ŒåšæŒç»­æ›´æ–°. å¯¼å¼•å¦‚æžœä½ çš„ Mac OSX å‡çº§åˆ° 10.11.x+, å¹¶ä¸”éœ€è¦å®‰è£… Cocoapods, å¯ä»¥å‚è€ƒæœ¬åšå®¢. å®‰è£… rubyMac ç³»ç»Ÿè‡ªå¸¦äº† ruby, ä½†æ˜¯å»ºè®®å¤§å®¶ä½¿ç”¨ Homebrew å®‰è£… ruby. å› ä¸º Cocoapods å‡çº§éœ€è¦å¯¹åº”çš„ ruby ç‰ˆæœ¬ä¹Ÿè¦å‡çº§, ä½¿ç”¨ Homebrew æ¯”è¾ƒæ–¹ä¾¿. å®‰è£… ruby: 1brew install ruby æŸ¥çœ‹å½“å‰å®‰è£…çš„ ruby ç‰ˆæœ¬: 1ruby -v ä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¿¡æ¯: 1ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15] gem æ˜¯ç®¡ç† Ruby åº“å’Œç¨‹åºçš„æ ‡å‡†åŒ….å®‰è£…äº† ruby, è‡ªå¸¦äº† gem å·¥å…·. å¯ä»¥ä½¿ç”¨ gem -v æŸ¥çœ‹ gem ç‰ˆæœ¬. å®‰è£… Cocoapods1.ç§»é™¤åŽŸæ¥çš„æº, ä¸ç®¡ä»¥å‰æ˜¯å¦å®‰è£…è¿‡ Cocoapods. 1gem sources --remove http://ruby.taobao.org/ 2.é‡æ–°æ·»åŠ æº, æ³¨æ„æ˜¯ https. 1gem sources -a https://gems.ruby-china.org/ ä¹‹å‰ taobao çš„æº å¥½åƒå·²ç»ä¸è¡Œäº†. æ³¨æ„ï¼šæ·»åŠ æºä¹‹å‰åœ¨æµè§ˆå™¨æ‰“å¼€ https://gems.ruby-china.org/ è¿™ä¸ªåœ°å€çœ‹ä¸€çœ‹æ˜¯å¦èƒ½è®¿é—®ï¼Œå¦‚æžœä¸èƒ½è®¿é—®å°±ä¿®æ”¹ä¸€ä¸‹ä¸º https://gems.ruby-china.com è¿™ä¸ªåœ°å€ã€‚ 3.æŸ¥çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸ, è¯¥æ­¥éª¤å¯é€‰. 1gem sources -l å®‰è£…, ä½¿ç”¨ root æƒé™å®‰è£…. 1sudo gem install -n /usr/local/bin cocoapods è¿™ç§å®‰è£…æ–¹å¼, ä¼šå®‰è£…æœ€æ–°çš„ release ç‰ˆæœ¬. ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼æ¥å®‰è£…. æŒ‡å®šç‰ˆæœ¬å®‰è£…: 1sudo gem install -n /usr/local/bin cocoapods -v 1.0.0 å®‰è£…æœ€æ–°çš„ release beta ç‰ˆæœ¬: 1sudo gem install -n /usr/local/bin cocoapods --pre å¸è½½ Cocoapodså¸è½½ Cocoapods åªéœ€æ‰§è¡Œ: 1sudo gem uninstall cocoapods å¦‚æžœæƒ³åˆ é™¤æœ¬åœ°çš„ pod repo, å¯ä»¥è¿™æ ·: 1rm -fr ~/.cocoapods/ å»ºç«‹æœ¬åœ° repoå®‰è£…å®Œ Cocoapods åŽ, éœ€è¦å»ºç«‹æœ¬åœ°çš„ repo. 1pod setup å³ä½¿ä½ çŽ°åœ¨ä¸æ‰§è¡Œ pod setup, åŽé¢è¿›è¡Œ pod install æˆ–è€… pod update çš„æ—¶å€™, ä¹Ÿä¼šè‡ªåŠ¨çš„è¿›è¡Œ pod setup. æ‰§è¡Œ pod setup çš„ç›®çš„æ˜¯å°†æ‰€æœ‰ç¬¬ä¸‰æ–¹çš„ podspec ç´¢å¼•æ–‡ä»¶æ›´æ–°åˆ°æœ¬åœ°çš„ ~/.cocoapods/repos ç›®å½•ä¸­. å®‰è£…ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜é—®é¢˜1: å‘½ä»¤è¡Œæ‰§è¡Œ pod å‘ç”Ÿ: pod command not found, ä½†æ˜¯ sudo pod å´å¯ä»¥æ‰§è¡Œ. è§£å†³æ–¹æ¡ˆå³å¦‚ä¸‹æ­¥éª¤: [1].å¸è½½åŽŸæœ‰çš„ Cocoapods 1sudo gem uninstall cocoapods [2].é‡æ–°å®‰è£… Cocoapods 1sudo gem install -n /usr/local/bin cocoapods [3].èµ‹äºˆ/usr/local/binç»™äºˆæ‰§è¡Œä¸Žè¯»å–æƒé™: 1sudo chmod -R +rx /usr/local/bin/ å»ºè®®æœ€å¥½ä½¿ç”¨ä»£(fanq)ç†(qiang). é—®é¢˜2: æ›´æ–° gem è¿‡ç¨‹ä¸­, é‡åˆ° 1Operation not permitted - /usr/bin/update_rubygems å¯ä»¥é€šè¿‡é€šè¿‡ brew å®‰è£… ruby è§£å†³. 1brew install ruby é—®é¢˜3: pod setup å¤±è´¥ å¤±è´¥æç¤ºä¿¡æ¯ç±»ä¼¼: 12345Cloning into &apos;master&apos;...error: RPC failed; curl 56 SSLRead() return error -36fatal: The remote end hung up unexpectedlyfatal: early EOFfatal: index-pack failed è§£å†³æ–¹æ¡ˆ: æ›´æ–° gem 1sudo gem update --system é—®é¢˜4: æ·»åŠ æº, æç¤ºå¦‚ä¸‹é—®é¢˜ 1source https://gems.ruby-china.org/ already present in the cache è¿™ä¸ªè¯´æ˜Žä½ å·²ç»æ·»åŠ è¿‡è¯¥æº, å¯ä»¥ä½¿ç”¨ 1gem sources -l æ¥æŸ¥çœ‹å·²ç»æ·»åŠ çš„æº. å¸¸ç”¨æ“ä½œ1.æ›´æ–° gem 1sudo gem update --system 2.pod repo update æ›´æ–°æœ¬åœ°ä»“åº“. 3.pod search xxx æœç´¢ cocoapods é¡¹ç›®. 4.pod list åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„åº“. 5.pod install æ ¹æ® podfile å’Œ podfile.lockæ¥å®‰è£…åº“. é»˜è®¤ä¼šæ‰§è¡Œ pod repo update. å¯ä»¥åŠ å…¥å‚æ•° â€“no-repo-update ä¸æ‰§è¡Œ pod repo update. 6.pod update æ›´æ–°å·²å®‰è£…çš„åº“åˆ°æœ€æ–°ç‰ˆæœ¬, å¹¶ä¸”åˆ›å»ºæ–°çš„ Podfile.lock æ–‡ä»¶. è¯¥å‘½ä»¤ä¹Ÿä¼šé»˜è®¤ä¼šæ‰§è¡Œ pod repo update. å¯ä»¥åŠ å…¥å‚æ•° â€“no-repo-update ä¸æ‰§è¡Œ pod repo update. æ›´æ–°è®°å½•2017-01-04 æ›´æ–° å‡çº§ ruby åˆ° 2.4 ç‰ˆæœ¬åŽ, cocoapods æ— æ³•ä½¿ç”¨äº†. å‡çº§çš„ ruby ç‰ˆæœ¬ä¿¡æ¯: 1ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin15] 12345ä½¿ç”¨ä»»ä½• pod å‘½ä»¤éƒ½æŠ¥é”™:/usr/local/Cellar/ruby/2.4.0/lib/ruby/2.4.0/rubygems.rb:270:in `find_spec_for_exe&apos;: can&apos;t find gem cocoapods (&gt;= 0.a) (Gem::GemNotFoundException)from /usr/local/Cellar/ruby/2.4.0/lib/ruby/2.4.0/rubygems.rb:298:in `activate_bin_path&apos;from /usr/local/bin/pod:22:in `&lt;main&gt;&apos; æŸ¥æ‰¾å„ç§è§£å†³æ–¹æ¡ˆ, æœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰è§£å†³. ä½ å¯ä»¥åœ¨ è¿™é‡Œ ä¸‹è½½ Cocoapods çš„ Mac ç‰ˆæœ¬ App ä½¿ç”¨. æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>CocoaPods, iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cocoapods é—®é¢˜é›†é”¦]]></title>
    <url>%2F2016%2F11%2F08%2FCocoapods-%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6%2F</url>
    <content type="text"><![CDATA[æ‰¿è¯ºæœ¬æ–‡ä¼šæŒç»­æ›´æ–°, åˆ†äº«åœ¨ä½¿ç”¨ cocoapods è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ. æ¬¢è¿Žå¤§å®¶è¡¥å……. å®‰è£…é—®é¢˜å¯ä»¥é˜…è¯»åšå®¢ Mac å®‰è£… Cocoapods. pod search é—®é¢˜ pod search æ— æ³•æœç´¢åˆ°æŒ‡å®šçš„é¡¹ç›® é—®é¢˜æè¿°: æ‰§è¡Œ pod search [Name], å‡ºçŽ°ç±»ä¼¼ä¸‹é¢çš„æç¤º: 1[!] Unable to find a pod with name, author, summary, or description matching `[Name]` è§£å†³æ–¹æ¡ˆ: åˆ é™¤ search_index.json æ–‡ä»¶ 1rm ~/Library/Caches/CocoaPods/search_index.json ç„¶åŽ, é‡æ–°æ‰§è¡Œ: 1pod search é¡¹ç›®åç§° å¦‚æžœè¿™æ ·è¡Œä¸é€šçš„è¯, å¯ä»¥è¿™æ ·: 123rm -rf ~/.cocoapodsrm ~/Library/Caches/CocoaPods/search_index.jsonpod setup å¦‚æžœä½ çš„ç½‘ç»œä¸å¥½, éœ€è¦æ¼«é•¿çš„ç­‰å¾…â€¦ è¿™ä¸ªæ—¶å€™, å¯ä»¥åŽ»æŠ½åŠç›’çƒŸäº†. Orzâ€¦ pod setup é—®é¢˜ pod setup å¡æ­» é—®é¢˜æè¿°: pod setup ä¼šåœ¨æœ¬åœ°å»ºç«‹ cocoapods ä»“åº“. åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­, ä½ å¯ä»¥åœ¨ ~/.cocoapods/repos ä½¿ç”¨du -sh * æ¥çœ‹ repos ç›®å½•çš„å¤§å°å˜åŒ–. å¦‚æžœè§‚å¯Ÿå¥½ä¹…, å¤§å°æ²¡æœ‰å˜åŒ–, æœ€ç»ˆä¼šå‡ºçŽ°ç±»ä¼¼ä¸‹é¢çš„é”™è¯¯: 12345Cloning into &apos;master&apos;...error: RPC failed; curl 56 SSLRead() return error -36fatal: The remote end hung up unexpectedlyfatal: early EOFfatal: index-pack failed è§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸‹ï¼š å…ˆæ›´æ–° gem 1sudo gem update --system å†é‡æ–°æ‰§è¡Œ 1pod setup pod install é—®é¢˜æ— æ³•ä½¿ç”¨ï¼ŒæŠ¥ç±»ä¼¼ä¸‹é¢çš„ä¸¤ç§é”™è¯¯ä¿¡æ¯ï¼š 1can&apos;t find gem cocoapods (&gt;= 0.a) with executable pod (Gem::GemNotFoundException) 12While executing gem ... (TypeError) no implicit conversion of nil into String è§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸‹ï¼š 1. é‡æ–°å®‰è£… ruby 1brew reinstall ruby 2. gem æ›´æ–° 123rm /usr/local/bin/update_rubygemssudo gem update --system 3. é‡æ–°å®‰è£… Cocoapods å¹¶é‡æ–°æ·»åŠ æº 12345sudo gem uninstall cocoapodssudo gem install -n /usr/local/bin cocoapodsgem sources -a https://gems.ruby-china.org/ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>CocoaPods, iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cocoapods ç®¡ç†å¼€æºé¡¹ç›®]]></title>
    <url>%2F2016%2F11%2F01%2FCocoapods-%E7%AE%A1%E7%90%86%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[å‡†å¤‡å·¥ä½œåœ¨è¿›è¡Œä¸‹é¢å·¥ä½œä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ åšäº†ä¸‹é¢ä¸‰ä»¶äº‹æƒ…ï¼š 1. åˆ›å»ºæˆ–è€…å·²ç»æœ‰äº† github è´¦å·.2. äº†è§£å’Œç†Ÿæ‚‰å¦‚ä½•åœ¨ github ä¸Šé¢åˆ›å»º Repository.3. MacOS ä¸Šé¢å®‰è£…äº† Cocoapods. å¦‚æžœä½ è¿˜æ²¡æœ‰ä½¿ç”¨ Cocoapods, å»ºè®®çœ‹çœ‹ Mac OSX 10.11.1+ å®‰è£… Cocoapods è¿™ç¯‡åšå®¢. åœ¨åšå®¢ iOS é¡¹ç›®: æ‰“é€ æœ¬åœ° pod åº“ é‡Œé¢æœ‰ä»‹ç»å¦‚ä½•æ‰“é€ æœ¬åœ°çš„ pod åº“ï¼Œä¸éœ€è¦å€ŸåŠ©ä»»ä½•ä»“åº“å°±å¯ä»¥å®Œæˆï¼Œæ“ä½œç®€å•ï¼Œé€‚åˆé¡¹ç›®ç»„å†…ä½¿ç”¨ã€‚ ä»Šå¤©ç»™å¤§å®¶åˆ†äº«å¦‚ä½•å°†ä»£ç å¼€æºå¹¶æ”¾åˆ° pod åº“ä¸­ï¼Œä¾›åˆ«äººä½¿ç”¨ã€‚è¿™ç§æ–¹å¼å±žäºŽæ‰“é€ å…¬å…±ï¼ˆPublic repoï¼‰ä»“åº“ï¼Œ ä»»ä½•äººéƒ½å¯ä»¥æœç´¢åˆ°ä½ è´¡çŒ®çš„åº“å¹¶ä½¿ç”¨ä½ çš„åº“ã€‚åŽé¢ä¼šè·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•æ‰“é€ ç§æœ‰ï¼ˆPrivate repoï¼‰ï¼Œæ•¬è¯·æœŸå¾…ã€‚ è¿™ç¯‡åšå®¢æ˜¯åŸºäºŽä¸€ä¸ªå®žé™…ä¾‹å­ MZInsetLabel æ¥è¯´æ˜Žçš„ï¼ŒæœŸå¾…ä¸Žä¼˜ç§€çš„ä½ äº¤æµè®¨è®ºã€‚ åˆ›å»º Repository å¹¶å®Œå–„é¡¹ç›®1. åœ¨ Github ä¸Šé¢åˆ›å»º Repositoryï¼Œå–åä¸º MZInsetLabel. 2. å°†è¯¥å·¥ç¨‹ clone åˆ°æœ¬åœ°ç£ç›˜. 3. å†™ä»£ç ï¼Œè¿™é‡Œæˆ‘åªå†™äº† MZInsetLabel.h | .m æ–‡ä»¶. 4. åˆ›å»º podspec æ–‡ä»¶. ä½¿ç”¨ä¸‹é¢å‘½ä»¤ï¼Œå³å¯äº§ç”Ÿè¯¥æ–‡ä»¶ã€‚ 1pod spec create MZInsetLabel åœ¨å½“å‰ç›®å½•ä¼šç”Ÿæˆ MZInsetLabel.podspec æ–‡ä»¶ã€‚æŒ‰ç…§æ–‡ä»¶è§„èŒƒå’Œå®žé™…æƒ…å†µå¡«å†™å³å¯ï¼Œå¦‚æžœä¸çŸ¥é“æ€Žä¹ˆå¡«å†™ï¼Œå¯ä»¥åœ¨ Github ä¸Šé¢æ‰¾ä¸€ä¸ªå¼€æºé¡¹ç›®å‚è€ƒå³å¯ã€‚ æ³¨æ„: Tag ç‰ˆæœ¬å·ä¸è¦é”™è¯¯. æœ€ç»ˆå†…å®¹å¦‚ä¸‹: 12345678910111213141516Pod::Spec.new do |s| s.name = &quot;MZInsetLabel&quot; s.version = &quot;0.2.0&quot; s.summary = &quot;MZInsetLabel is subClass of UILabel.&quot; s.description = &lt;&lt;-DESC MZInsetLabel is a sub class of UILabel that can be set insets. DESC s.homepage = &quot;http://www.veryitman.com&quot; s.license = &quot;MIT&quot; s.author = &#123; &quot;veryitman&quot; =&gt; &quot;veryitman@126.com&quot; &#125; s.platform = :ios, &quot;7.0&quot; s.source = &#123; :git =&gt; &quot;https://github.com/veryitman/MZInsetLabel.git&quot;, :tag =&gt; &quot;#&#123;s.version&#125;&quot; &#125; s.source_files = &quot;*.&#123;h,m&#125;&quot; s.framework = &quot;UIKit&quot; s.requires_arc = trueend é¡¹ç›®æ£€æµ‹æ£€æŸ¥è¯¥ podspec æ–‡ä»¶ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ 1pod lib lint MZInsetLabel.podspec â€“verbose å¯ä»¥è¾“å‡ºæ›´åŠ è¯¦ç»†çš„å†…å®¹ 1pod lib lint MZInsetLabel.podspec --verbose æ­£ç¡®çš„è¯, ä½ å¯ä»¥çœ‹åˆ°ä¸‹å›¾å¦‚æ‰€ç¤ºçš„å†…å®¹ï¼š åœ¨æ£€æµ‹çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æžœæœ‰ä¸€äº›è­¦å‘Šå¯¼è‡´æ— æ³•éªŒè¯é€šè¿‡ï¼Œå¯ä»¥ä½¿ç”¨ --allow-warnings å‚æ•°è§„é¿è¿™äº› warningï¼Œä½†æˆ‘è¿˜æ˜¯å»ºè®®å¤§å®¶å°½é‡å°† warning ä¿®æ”¹å¥½ã€‚ 1pod lib lint --allow-warnings pod lib lint *.podspec æ˜¯åªä»Žæœ¬åœ°éªŒè¯ä½ çš„ pod èƒ½å¦é€šè¿‡éªŒè¯. pod spec lint*..podspec æ˜¯ä»Žæœ¬åœ°å’Œè¿œç¨‹éªŒè¯ä½ çš„ pod èƒ½å¦é€šè¿‡éªŒè¯. å¤§å®¶å¯è‡ªè¡Œé€‰æ‹©è¿™ä¸¤ç§æ–¹å¼ã€‚ æ·»åŠ é¡¹ç›®åˆ° Github Repositoryå°†æœ¬åœ°çš„ä»£ç  push åˆ° Github çš„ Repository, å°±æ˜¯åˆšæ‰åˆ›å»ºçš„ MZInsetLabel. 12345git add `æ–‡ä»¶`æˆ–è€…`æ–‡ä»¶å¤¹`git commit -m &quot;Init&quot;git push åœ¨ä½ çš„ Github Repository ä¸Šé¢åˆ›å»ºä¸€ä¸ª Release ä½œä¸º Tagï¼ˆ0.1.0ç‰ˆæœ¬ï¼‰ï¼Œå¦‚å›¾æ‰€ç¤º: æŽ¨é€åˆ° cocoapods1. æ³¨å†Œ trunk pod trunk register ä½ çš„é‚®ç®± â€˜ç”¨æˆ·åâ€™ â€“description=â€™ç®€å•æè¿°â€™ å®Œæ•´å‘½ä»¤å¦‚ä¸‹: 1pod trunk register veryitman@126.com &apos;veryitman&apos; --description=&apos;mark&apos; 2. æ‰“å¼€é‚®ç®±, æ¿€æ´»é‚®ä»¶, ç‚¹å‡»é“¾æŽ¥æ¿€æ´» 3. æ£€æŸ¥æ³¨å†Œä¿¡æ¯ æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š 1pod trunk me 4.æ·»åŠ åˆ° cocoapods æ‰§è¡Œä¸‹é¢å‘½ä»¤, å³å¯. 1pod trunk push MZInsetLabel.podspec æˆåŠŸçš„æ•ˆæžœå›¾: éªŒè¯ä½¿ç”¨1. æ£€æŸ¥æ˜¯å¦å¯ä»¥æœç´¢åˆ° 1pod search MZInsetLabel å¦‚æžœæœç´¢ä¸åˆ°, è¯·æ‰§è¡Œ 1pod setup 2. åœ¨é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨è¯¥é¡¹ç›® 1pod &apos;MZInsetLabel&apos;, &apos;~&gt; 0.1.0&apos; ç„¶åŽåœ¨ä½ çš„æµ‹è¯•é¡¹ç›®ä¸­ï¼Œæ‰§è¡Œ pod install å³å¯ã€‚ å¯èƒ½é‡åˆ°çš„éº»çƒ¦1. æ‰§è¡Œ pod trunk push *.podspec æ—¶, å¥½ä¹…æ²¡ååº”? è¿™ç§æƒ…å†µ, å¤§å¤šæ•°éƒ½æ˜¯å› ä¸ºä½ çš„ç½‘ç»œä¸ç»™åŠ›é€ æˆçš„, å¦‚æžœä½ ç¡®å®šä½ çš„ç½‘ç»œæ²¡é—®é¢˜, é‚£ä¹ˆè¯·ç¿»å¢™. 2. æ‰§ è¡Œ pod trunk push *.podspec æ—¶æŠ¥é”™? æŠ¥é”™ä¿¡æ¯: 1ERROR | [iOS] unknown: Encountered an unknown error (Simulator iPhone 4s is not available.) during validation. è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸º, æ›´æ–°äº† xcode8 ä¹‹åŽä¸å†æ”¯æŒ ios7 çš„ç¼˜æ•…. è§£å†³æ–¹æ¡ˆ(æˆ‘çš„), å‡çº§ cocoapods. 1sudo gem install -n /usr/local/bin cocoapods 3. pod trunk push å¤±è´¥ å¤±è´¥æç¤ºä¿¡æ¯ç±»ä¼¼: 12345Cloning into &apos;master&apos;...error: RPC failed; curl 56 SSLRead() return error -36fatal: The remote end hung up unexpectedlyfatal: early EOFfatal: index-pack failed è§£å†³æ–¹æ¡ˆ: æ›´æ–° gem 1sudo gem update --system Git å‘½ä»¤è¡Œæ“ä½œ1. å‘è¿œç¨‹ Repository æ·»åŠ  tag 123git tag -m &quot;æ³¨é‡Š&quot; 0.0.1git push --tags æ‰§è¡ŒåŽï¼Œå¯ä»¥çœ‹åˆ° Github Repository ä¸Šä¼šå¤šä¸€ä¸ªå¯¹åº”çš„ tag ç‰ˆæœ¬ã€‚ 2.åˆ é™¤æœ¬åœ° Tag 1git tag --delete [TagName] å¦‚: 1git tag --delete 0.0.1 3. åˆ é™¤è¿œç¨‹ Tag 1git push --delete origin [TagName] å¦‚: 1git push --delete origin 0.0.1 åœ¨ Github ä¸Šé¢å¦‚æžœä½ ä¸å°å¿ƒæ‰“é”™äº† Release, ç„¶åŽåˆ é™¤è¯¥ Release.ä½ ä¼šå‘çŽ°, tag æ— æ³•åˆ é™¤.ä½¿ç”¨ä¸Šé¢æ–¹å¼å¦¥å¦¥çš„è§£å†³. å¦‚æžœä½ åˆ é™¤ tagï¼Œæƒ³é‡æ–°æ‰“ä¸€ä¸ªç›¸åŒçš„ tagï¼Œéœ€è¦å…ˆåˆ é™¤æœ¬åœ°çš„ tagï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚ æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS cocoapods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS: è°ˆè°ˆ frame å’Œ bounds]]></title>
    <url>%2F2016%2F10%2F22%2FiOS-%E8%B0%88%E8%B0%88-frame-%E5%92%8C-bounds%2F</url>
    <content type="text"><![CDATA[èµ·å› å¤§å®¶çŸ¥é“, æˆ‘ä»¬å¯ä»¥è®¾ç½® view çš„å››ä¸ªè§’æˆ–è€…å…¶ä¸­ä¸€ä¸ªæˆ–è€…å‡ ä¸ªä¸ºåœ†è§’. ä½¿ç”¨çš„æ–¹æ³•: 123+ (instancetype)bezierPathWithRoundedRect:(CGRect)rect byRoundingCorners:(UIRectCorner)corners cornerRadii:(CGSize)cornerRadii; æ‹–å¥½ç•Œé¢å…ƒç´ ä¹‹åŽ, åœ¨ä»£ç ä¸­æ¥ä¿®æ”¹å…¶ä¸ºåœ†è§’, å±…ç„¶å¤±è´¥äº†. æƒ³è¦çš„æ•ˆæžœæ˜¯è¿™æ ·çš„: ä½†æ˜¯æœ€ç»ˆæ˜¯è¿™æ ·çš„: äºŽæ˜¯æ€»ç»“äº†ä¸€ä¸‹, åˆ†äº«ç»™å¤§å®¶. è®¾ç½®åœ†è§’è¿™é‡Œåˆ†ä¸¤ç§æƒ…å†µ. ç¬¬ä¸€ç§: åªæ”¾ç½®æŽ§ä»¶, ä¸è®¾ç½®çº¦æŸ. 1.storyboard ä¸­æ‹–å¥½æŽ§ä»¶. æ³¨æ„: è¿™é‡Œæˆ‘å¹¶æ²¡æœ‰è®¾ç½®ä»»ä½•çº¦æŸ. 2.vc ä»£ç  123456789101112131415161718192021222324252627@interface ViewController ()@property (strong, nonatomic) IBOutlet UILabel *lb;@end@implementation ViewController- (void)viewDidLoad&#123; [super viewDidLoad]; [self changeLbCorner];&#125;- (void)changeLbCorner&#123; UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.lb.frame byRoundingCorners:UIRectCornerTopRight|UIRectCornerBottomRight cornerRadii:CGSizeMake(7, 7)]; CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init]; maskLayer.frame = _lb.bounds; maskLayer.path = maskPath.CGPath; self.lb.layer.mask = maskLayer;&#125;@end ä»£ç ç¼–è¯‘è¿è¡Œåˆ°æ¨¡æ‹Ÿå™¨(iphone6), çœ‹ä¸åˆ°ä»»ä½•ä¸œè¥¿. log æ—¥å¿—æ˜¾ç¤º lb çš„ä¿¡æ¯å¦‚ä¸‹: 123[ViewController viewDidLoad]:lb.bounds: &#123;&#123;0, 0&#125;, &#123;136, 39&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;136, 39&#125;&#125; ä½ç½®ä¿¡æ¯æ˜¯æ­£ç¡®çš„, å’¨è¯¢æ£€æŸ¥å‘çŽ°æ˜¯å‚æ•°ä¼ å…¥é”™è¯¯, ä¿®æ”¹ changeLbCorner æ–¹æ³•: 12345678910- (void)changeLbCorner&#123; UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.lb.bounds byRoundingCorners:UIRectCornerTopRight|UIRectCornerBottomRight cornerRadii:CGSizeMake(7, 7)]; CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init]; maskLayer.frame = _lb.bounds; maskLayer.path = maskPath.CGPath; self.lb.layer.mask = maskLayer;&#125; è¿™é‡Œåªæ˜¯å°† self.lb.frame æ”¹æˆäº† self.lb.bounds. å†æ¬¡è¿è¡Œå¯ä»¥çœ‹åˆ°æ•ˆæžœ: ç¬¬äºŒç§: æ”¾ç½®æŽ§ä»¶å¹¶è®¾ç½®çº¦æŸ. 1.è®¾ç½® lb è·ç¦»çˆ¶ view å·¦è¾¹å’Œä¸Šè¾¹çš„çº¦æŸ.2.è¿è¡Œä¸Šé¢çš„ä»£ç , å‘çŽ°, lb å¹¶æ²¡æœ‰è¢«è®¾ç½®ä¸ºåœ†è§’.å¹¶ä¸” lb çš„å®½åº¦å’Œé«˜åº¦å˜å°äº†, å˜æˆäº†æ–‡å­—çš„å®žé™…çš„å®½é«˜. çœ‹ log: 123[ViewController viewDidLoad]:lb.bounds: &#123;&#123;0, 0&#125;, &#123;136, 39&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;136, 39&#125;&#125; å…¶å®žè¿™ä¸ªæ—¶å€™, (ä»Žä¸Šé¢å›¾ä¸­å¯ä»¥çœ‹å‡º) è¿™é‡Œçš„ä¿¡æ¯æ˜¯é”™è¯¯çš„. æ­£ç¡®çš„ä¿¡æ¯åº”è¯¥æ˜¯è¿™æ ·çš„(åœ¨ viewDidAppear ä¸­)æ‰“å°ä¿¡æ¯: 123[ViewController viewDidAppear]:lb.bounds: &#123;&#123;0, 0&#125;, &#123;58.5, 19.5&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;58.5, 19.5&#125;&#125; äºŽæ˜¯, å°† 1[self changeLbCorner]; æ”¾åˆ° viewDidAppear ä¸­, åœ†è§’å°±æ­£å¸¸äº†. æŽ¥ä¸‹æ¥, æˆ‘ä»¬æŠŠ lb çš„å®½é«˜(136*39)çº¦æŸä¹ŸåŠ ä¸Š. çœ‹ä¸€ä¸‹, viewDidLoad å’Œ viewDidAppear æ–¹æ³•ä¸­æ‰“å°çš„ä¿¡æ¯: 123456[ViewController viewDidLoad]lb.bounds: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125; lb.frame: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125;[ViewController viewDidAppear:]lb.bounds: &#123;&#123;0, 0&#125;, &#123;136, 39&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;136, 39&#125;&#125; å¯ä»¥çœ‹å‡º, viewDidLoad ä¸­é”™çš„ä¸€å¡Œç³Šæ¶‚. è¿™é‡Œä¹Ÿè¯´æ˜Žä¸€ä¸ªé—®é¢˜: xib æˆ–è€… storyboard ä¸­è®¾ç½®è¿‡çº¦æŸ(çŽ°å®žå¼€å‘ä¸­, åŸºæœ¬éƒ½ä¼šè®¾ç½®çº¦æŸ)çš„ç»„ä»¶, åœ¨ viewDidLoad ä¸­å¹¶æ²¡æœ‰å®Œå…¨ layout, åªæ˜¯é¢„åŠ è½½äº†è¿™äº›ç»„ä»¶.æƒ³èŽ·å–ç»„ä»¶å¦‚ frame ä½• bounds ä¿¡æ¯, åœ¨ viewDidLoad ä¸­æ˜¯ä¸åˆé€‚ç”šè‡³æ˜¯é”™è¯¯çš„. é‚£ä¹ˆ, é—®é¢˜æ¥äº†, å“ªé‡Œåˆé€‚å“ªé‡Œæ­£ç¡®. ä¸Šé¢å¦‚æžœä½ è®¤çœŸçœ‹äº†, åœ¨ viewDidAppear ä¸­æ˜¯å¯ä»¥æ­£ç¡®èŽ·å–çš„, é‚£ä¹ˆè¿˜æœ‰æ²¡æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥èŽ·å–å‘¢? VC ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¦å›žç­”ä¸Šé¢çš„é—®é¢˜, å¤§å®¶è¦çŸ¥é“ vc çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°. ä¸Šé¢çš„ä¾‹å­, å¯ä»¥çœ‹å‡º: å½“å‡½æ•° ViewDidLoad è¢«è°ƒç”¨çš„æ—¶å€™ï¼ŒIBQutlets å·²ç»è¢«è¿žæŽ¥ï¼Œä½†View è¿˜æ²¡æœ‰è¢«åŠ è½½å‡ºæ¥ï¼Œæ— æ³•èŽ·å– frame ç­‰ä¿¡æ¯.å¯ä»¥åœ¨ viewDidLoad ä¸­å®Œæˆåœ¨ IB ä¸­ä¸èƒ½å®Œæˆçš„ view çš„è‡ªå®šä¹‰ã€‚ å…³äºŽ loadView å’Œ viewDidLoad åœ¨åŽé¢åšå®¢è·Ÿå¤§å®¶åˆ†äº«. ä»Šå¤©è¦è¯´çš„æ˜¯ 1viewDidLayoutSubviews viewDidLayoutSubviews åœ¨ VC å­è§†å›¾ä½ç½®æˆ–è€…å°ºå¯¸ (position|size) è¢«æ”¹å˜çš„æ—¶å€™è¢«è°ƒç”¨. ç›´åˆ° AutoLayout å·²ç»å®Œæˆå·¥ä½œçš„æ—¶å€™æ‰ä¼šè¢«ç¡®å®šï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œå®Œ AutoLayout ä¹‹åŽä¼šè°ƒç”¨æ­¤æ–¹æ³•. æ¢å¥è¯è¯´, view çš„ frame å’Œ bounds è¿™ä¸ªæ—¶å€™æ˜¯æ­£ç¡®å¯ä»¥èŽ·å–çš„. viewDidLayoutSubviews è¿™ä¸ªæ–¹æ³•åœ¨ viewDidAppear ä¹‹å‰è¢«è°ƒç”¨, æœ‰å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡. å³ä¾èµ– bounds æˆ–è€… frame çš„æ“ä½œï¼Œéƒ½åº”è¯¥æ”¾åœ¨viewDidLayoutSubviews ä¸­ï¼Œè€Œä¸æ˜¯ viewDidLoad æˆ– viewWillAppear ä¸­. æ”¹å˜åŽçš„ä»£ç å¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566#import &quot;ViewController.h&quot;#define MZLog(fmt, ...) NSLog((@&quot;%s\n&quot; fmt), __FUNCTION__, ##__VA_ARGS__)#define MZLogLbInfo \MZLog(@&quot;lb.bounds: %@ \nlb.frame: %@&quot;, NSStringFromCGRect(self.lb.bounds), NSStringFromCGRect(self.lb.frame))@interface ViewController ()@property (strong, nonatomic) IBOutlet UILabel *lb;@property (strong, nonatomic) IBOutlet UILabel *displayedText;@end@implementation ViewController- (void)viewDidLoad&#123; [super viewDidLoad]; MZLogLbInfo;&#125;- (void)viewWillAppear:(BOOL)animated&#123; [super viewWillAppear:animated]; MZLogLbInfo;&#125;- (void)viewWillLayoutSubviews&#123; [super viewWillLayoutSubviews]; MZLogLbInfo;&#125;- (void)viewDidLayoutSubviews&#123; [super viewDidLayoutSubviews]; MZLogLbInfo; [self changeLbCorner];&#125;- (void)viewDidAppear:(BOOL)animated&#123; [super viewDidAppear:animated]; MZLogLbInfo;&#125;#pragma mark Callback.- (void)changeLbCorner&#123; UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.lb.bounds byRoundingCorners:UIRectCornerTopRight|UIRectCornerBottomRight cornerRadii:CGSizeMake(7, 7)]; CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init]; maskLayer.frame = _lb.bounds; maskLayer.path = maskPath.CGPath; self.lb.layer.mask = maskLayer;&#125;@end æ‰“å°çš„ log å¦‚ä¸‹: 123456789101112131415161718192021[ViewController viewDidLoad]lb.bounds: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125; lb.frame: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125;[ViewController viewWillAppear:]lb.bounds: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125; lb.frame: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125;[ViewController viewWillLayoutSubviews]lb.bounds: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125; lb.frame: &#123;&#123;0, 0&#125;, &#123;1000, 1000&#125;&#125;[ViewController viewDidLayoutSubviews]lb.bounds: &#123;&#123;0, 0&#125;, &#123;136, 39&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;136, 39&#125;&#125;[ViewController viewWillLayoutSubviews]lb.bounds: &#123;&#123;0, 0&#125;, &#123;136, 39&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;136, 39&#125;&#125;[ViewController viewDidLayoutSubviews]lb.bounds: &#123;&#123;0, 0&#125;, &#123;136, 39&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;136, 39&#125;&#125;[ViewController viewDidAppear:]lb.bounds: &#123;&#123;0, 0&#125;, &#123;136, 39&#125;&#125; lb.frame: &#123;&#123;39, 89&#125;, &#123;136, 39&#125;&#125; frame å’Œ boundsä¸Šé¢çš„ä¾‹å­, å¤§å®¶çœ‹åˆ°ç”±äºŽä¼ å…¥äº† frame è€Œä¸æ˜¯ bounds é€ æˆè®¾ç½®åœ†è§’å¤±è´¥. ä¸‹é¢è¯´è¯´ frame å’Œ bounds. æ¦‚å¿µä»Žç½‘ä¸Šâ€å·â€è¿‡æ¥çš„å›¾ 1.frame è¯¥ view åœ¨çˆ¶ view åæ ‡ç³»ç»Ÿä¸­çš„ä½ç½®å’Œå¤§å°(å‚ç…§ç‚¹æ˜¯ï¼Œçˆ¶åæ ‡ç³»ç»Ÿ). 2.bounds è¯¥ view åœ¨æœ¬åœ°åæ ‡ç³»ç»Ÿä¸­çš„ä½ç½®å’Œå¤§å°(å‚ç…§ç‚¹æ˜¯ï¼Œæœ¬åœ°åæ ‡ç³»ç»Ÿï¼Œå°±ç›¸å½“äºŽ view è‡ªå·±çš„åæ ‡ç³»ç»Ÿï¼Œä»¥(0,0)ç‚¹ä¸ºèµ·ç‚¹).å…¶å®žæœ¬åœ°åæ ‡ç³»ç»Ÿçš„å…³é”®å°±æ˜¯è¦çŸ¥é“çš„å®ƒçš„åŽŸç‚¹(0,0). bounds é»˜è®¤å€¼æ˜¯(0, 0, width, height).é™¤éžæ‰‹åŠ¨æ”¹å˜ bounds çš„å€¼. å•çº¯çš„ä»Žæ¦‚å¿µä¸Šé¢, å¾ˆéš¾ç†è§£äºŒè€…çš„åŒºåˆ«. æä¾›ä¸€ä¸ªä¾‹å­, ä¾‹å­å¤§æ¦‚æ˜¯è¿™æ ·çš„:redView æ˜¯ yellowView çš„çˆ¶è§†å›¾, yellowView æ˜¯ blueView çš„çˆ¶è§†å›¾. é€šè¿‡æ”¹å˜ redView çš„ bounds ä¼šå½±å“å­è§†å›¾çš„ä½ç½®(ä¸æ˜¯frame).å°† redView çš„ bounds èµ·ç‚¹è®¾ä¸º(-20, -20), å­è§†å›¾ç›¸å¯¹äºŽ redView çš„æœ¬åœ°åæ ‡(0, 0), ä¹Ÿå°±éœ€è¦å¾€ä¸‹å¢žåŠ 20, è¿™æ ·, yellowView å°±å¾€ä¸‹ç§»åŠ¨äº†. æ•ˆæžœå›¾: å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143#import &quot;ViewController.h&quot;#define MZLog(fmt, ...) NSLog((@&quot;%s\n&quot; fmt), __FUNCTION__, ##__VA_ARGS__)#define MZLogLbInfo \MZLog(@&quot;lb.bounds: %@ \nlb.frame: %@&quot;, NSStringFromCGRect(self.lb.bounds), NSStringFromCGRect(self.lb.frame))@interface ViewController ()@property (strong, nonatomic) IBOutlet UILabel *lb;@property (strong, nonatomic) IBOutlet UILabel *displayedText;@end@implementation ViewController&#123; UIView *redView; UIView *yellowView; UIView *blueView;&#125;- (void)viewDidLoad&#123; [super viewDidLoad]; MZLogLbInfo; // å°† redView æ·»åŠ åˆ° self.view &#123; redView = [[UIView alloc] initWithFrame:CGRectMake(100, 200, 120, 120)]; redView.backgroundColor = [UIColor redColor]; [self.view addSubview:redView]; &#125; // å°† yellowView æ·»åŠ åˆ° redView &#123; yellowView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 90, 90)]; yellowView.backgroundColor = [UIColor yellowColor]; [redView addSubview:yellowView]; &#125; // å°† blueView æ·»åŠ åˆ° yellowView &#123; blueView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 60, 60)]; blueView.backgroundColor = [UIColor blueColor]; [yellowView addSubview:blueView]; &#125; [self logViewInfo];&#125;- (void)viewWillAppear:(BOOL)animated&#123; [super viewWillAppear:animated]; MZLogLbInfo;&#125;- (void)viewWillLayoutSubviews&#123; [super viewWillLayoutSubviews]; MZLogLbInfo;&#125;- (void)viewDidLayoutSubviews&#123; [super viewDidLayoutSubviews]; MZLogLbInfo; [self changeLbCorner];&#125;- (void)viewDidAppear:(BOOL)animated&#123; [super viewDidAppear:animated]; MZLogLbInfo;&#125;#pragma mark Callback.- (void)changeLbCorner&#123; UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.lb.bounds byRoundingCorners:UIRectCornerTopRight|UIRectCornerBottomRight cornerRadii:CGSizeMake(7, 7)]; CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init]; maskLayer.frame = _lb.bounds; maskLayer.path = maskPath.CGPath; self.lb.layer.mask = maskLayer;&#125;- (IBAction)doResetAction:(id)sender&#123; [UIView animateWithDuration:1.0f animations:^&#123; [redView setBounds:CGRectMake(0, 0, 120, 120)]; [yellowView setBounds:CGRectMake(0, 0, 90, 90)]; &#125; completion:^(BOOL finished) &#123; [self logViewInfo]; &#125;];&#125;- (IBAction)doChangeRedViewBounds:(id)sender&#123; [UIView animateWithDuration:1.0f animations:^&#123; [redView setBounds:CGRectMake(-20, -20, 120, 120)]; &#125; completion:^(BOOL finished) &#123; [self logViewInfo]; &#125;];&#125;- (IBAction)doChangeYellowViewBounds:(id)sender&#123; [UIView animateWithDuration:1.0f animations:^&#123; [yellowView setBounds:CGRectMake(-20, -20, 90, 90)]; &#125; completion:^(BOOL finished) &#123; [self logViewInfo]; &#125;];&#125;#pragma mark Display Debug Info.- (void)logViewInfo&#123; NSString *log4rView = [NSString stringWithFormat:@&quot;RedView\nframe:%@ \nbounds:%@&quot;, NSStringFromCGRect(redView.frame), NSStringFromCGRect(redView.bounds)]; NSString *log4yView = [NSString stringWithFormat:@&quot;YellowView\nframe:%@ \nbounds:%@&quot;, NSStringFromCGRect(yellowView.frame), NSStringFromCGRect(yellowView.bounds)]; NSString *log4bView = [NSString stringWithFormat:@&quot;BlueView\nframe:%@ \nbounds:%@&quot;, NSStringFromCGRect(blueView.frame), NSStringFromCGRect(blueView.bounds)]; NSString *log = [NSString stringWithFormat:@&quot;%@\n%@\n%@&quot;, log4rView, log4yView, log4bView]; [self display:log];&#125;- (void)display:(NSString *)content&#123; self.displayedText.text = content;&#125;@end æ€»ç»“ frame, æè¿°çš„æ˜¯å½“å‰è§†å›¾åœ¨å…¶çˆ¶è§†å›¾ä¸­çš„ä½ç½®å’Œå¤§å°.bounds, æè¿°çš„æ˜¯å½“å‰è§†å›¾åœ¨å…¶è‡ªèº«åæ ‡ç³»ç»Ÿä¸­çš„ä½ç½®å’Œå¤§å°. æ‰€ä»¥, bounds é»˜è®¤æ˜¯ (0, 0, frame.size.width, frame.size.height) å¦å¤–, è¿˜æœ‰ä¸€ä¸ª center æè¿°çš„æ˜¯å½“å‰è§†å›¾çš„ä¸­å¿ƒç‚¹åœ¨å…¶çˆ¶è§†å›¾ä¸­çš„ä½ç½®. bounds å’Œ frame æ˜¯ä¸¤ä¸ªä¸ç­‰åŒçš„æ¦‚å¿µ, æ”¹å˜ bounds ä¼šå½±å“å­è§†å›¾çš„ä½ç½®(äººçœ¼çœ‹åˆ°å…¶æ”¹å˜äº†ä½ç½®), è®¾ç½® bounds å¯ä»¥ä¿®æ”¹è‡ªå·±åæ ‡ç³»çš„åŽŸç‚¹ä½ç½®. ä½†æ˜¯ä¸ä¼šæ”¹å˜å­è§†å›¾çš„ bounds å’Œ frame. æ˜Žç™½ä¸Šé¢çš„é“ç†å¾ˆé‡è¦, iOS ä¸­æ»šåŠ¨è§†å›¾èƒ½è®©ä½ çœ‹åˆ°å…¶ä¸­çš„å†…å®¹, æ­£æ˜¯åˆ©ç”¨äº† contentoffset å’Œ bounds å±žæ€§. è¿™é‡Œä»¥ tableView ä¸ºä¾‹å­, å½“æˆ‘ä»¬å‘ä¸Šæ»šåŠ¨ tableView, tableView çš„ contentOffset å’Œ bounds çš„åæ ‡éƒ½æ˜¯æ­£æ•°, ç›¸å½“äºŽå…¶æœ¬åœ°åæ ‡(0, 0)æ”¹å˜äº†å³å¢žåŠ äº†(åæ ‡ç³»å¾€ä¸‹ä¸ºå¢žåŠ ), é‚£ä¹ˆå…¶å­è§†å›¾å°±ä¼šå‘ä¸ŠåŽ». å‘ä¸‹æ»‘åŠ¨æ—¶, ä¹Ÿæ˜¯åŒä¸€ä¸ªé“ç†.å¯ä»¥é€šè¿‡è¿è¡Œ å®Œæ•´ Demo ä¸­[æŸ¥çœ‹ TableView]æŒ‰é’®æ¥æ‰“å¼€ä¾‹å­, çœ‹æ—¥å¿—. æ”¹å˜å­è§†å›¾æ‰€æœ‰çˆ¶è§†å›¾çš„ bounds, å­è§†å›¾çš„ä½ç½®æ˜¯ç´¯åŠ æ”¹å˜çš„.å¦‚ä¸Šé¢æ”¹å˜ redView å’Œ yellowView çš„ bounds, blueView çš„ä½ç½®ç›¸å¯¹ redView å¾€ä¸‹ç§»åŠ¨äº† 40. å½“åŒä¸€ä¸ªè§†å›¾çš„ bounds å¤§äºŽ frame, ä¼šå¯¼è‡´ frame è¢«æ’‘å¤§ï¼Œframe çš„ x, y, width, height éƒ½ä¼šè¢«æ”¹å˜. åä¹‹, bounds å°äºŽ frame, frame ä¹Ÿä¼šå˜å°. é™„å½• GitHub ä¸Šé¢å¯ä»¥ä¸‹è½½ å®Œæ•´ Demo æŽ¨èä¹‹å‰å†™åœ¨ CSDN ä¸Šçš„åšæ–‡: iOS UI æŠ€å·§: è§†å›¾æ— æ³•è¢«ç‚¹å‡» å¯å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·:]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS frame bounds</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RN: æ¨¡æ‹Ÿ Mobx]]></title>
    <url>%2F2016%2F10%2F11%2FRN-%E6%A8%A1%E6%8B%9F-Mobx%2F</url>
    <content type="text"><![CDATA[å‰è¨€çœ‹è¿‡ [React Native ä½¿ç”¨ Mobx] è¿™ç¯‡åšå®¢çš„åŒå­¦, å¯¹ Mobx åº”è¯¥æœ‰äº†ä¸€ä¸ªç®€å•ç›´è§‚çš„è®¤è¯†. å…¶å®ž, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ RN ä¸­çš„ State æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæžœ. ä»Šå¤©çš„ä¸»è¦å†…å®¹æ˜¯ä½¿ç”¨ State æ¥æ¨¡æ‹Ÿ Mobx, ä¹Ÿç®—æ˜¯å¯¹ Mobx çš„è¿›ä¸€æ­¥è®¤è¯†. æ•ˆæžœ å®žçŽ°æ•ˆæžœå’Œ [React Native ä½¿ç”¨ Mobx] ä¸­çš„æ•ˆæžœä¸€è‡´, åªæ˜¯ä»£ç æ²¡æœ‰ä½¿ç”¨ Mobx æ¡†æž¶. å®žçŽ°LegacyCounter.js Add å’Œ Minus ä¸¤ä¸ªæŒ‰é’®åˆ†åˆ«è§¦å‘å„è‡ªçš„å›žè°ƒ, æ¥æ›´æ–° state.ä½¿ç”¨ state çš„å˜åŒ–æ¥åˆ°è¾¾æ›´æ–° View (è®¡æ•°çš„ Text ä¼šç›¸åº”çš„åšå‡ºå˜åŒ–)çš„ç›®çš„. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869/** * æ¨¡æ‹Ÿ Mobx åœ¨ ReactNative ä¸Šçš„ä¸€ä¸ªå°ä¾‹å­. * * state -&gt; view */&apos;use strict&apos;;import React, &#123; Component &#125; from &apos;react&apos;;import &#123; StyleSheet, View, Text, TouchableHighlight&#125; from &apos;react-native&apos;;class LegacyCounter extends Component &#123; //æž„é€ æ–¹æ³• constructor(props) &#123; super(props); this.state = &#123; //è®¡æ•° counter: 0 &#125;; &#125; render () &#123; return ( &lt;View style = &#123;styles.container&#125;&gt; &#123;/*åŠ ä¸€*/&#125; &lt;TouchableHighlight onPress = &#123;() =&gt; &#123;this.setState(&#123; counter: ++this.state.counter &#125;)&#125;&#125;&gt; &lt;Text&gt;Add&lt;/Text&gt; &lt;/TouchableHighlight&gt; &#123;/* æ˜¾ç¤ºå¤„ç†ç»“æžœ */&#125; &lt;Text style = &#123;styles.resultTxtStyle&#125;&gt; &#123;this.state.counter&#125; &lt;/Text&gt; &#123;/*å‡ä¸€*/&#125; &lt;TouchableHighlight onPress = &#123;() =&gt; &#123;this.setState(&#123; counter: --this.state.counter &#125;)&#125;&#125;&gt; &lt;Text&gt;Minus&lt;/Text&gt; &lt;/TouchableHighlight&gt; &lt;/View&gt; ); &#125;&#125;export default class LegacyComponent extends Component &#123; render () &#123; return ( &lt;View style = &#123;&#123;flex: 1, marginTop: 64&#125;&#125;&gt; &lt;LegacyCounter/&gt; &lt;/View&gt; ); &#125;&#125;/* æ ·å¼å®šä¹‰ */const styles = StyleSheet.create(&#123; container: &#123; flexDirection: &apos;row&apos;, justifyContent: &apos;space-around&apos; &#125;, resultTxtStyle: &#123; fontSize: 22, color: &apos;red&apos; &#125;&#125;); index.ios.js è¿™ä¸ªæ–‡ä»¶å¾ˆç®€å•, åªæ˜¯è°ƒç”¨ LegacyCounter ä¸­çš„ç»„ä»¶. 1234567891011121314import React, &#123; Component &#125; from &apos;react&apos;;//å¼•å…¥è‡ªå®šä¹‰æ¨¡å—import LegacyComponent from &apos;./js/Mobx/LegacyCounter&apos;import &#123; AppRegistry&#125; from &apos;react-native&apos;;class RNMobxDemo extends Component &#123; render() &#123; return( &lt;LegacyComponent/&gt; ); &#125;&#125;AppRegistry.registerComponent(&apos;RNMobxDemo&apos;, () =&gt; MZRNTutorial); åŽè®°å¦‚æžœä½ æƒ³äº†è§£æ›´å¤šå…³äºŽ RN ä¸­ State çš„çŸ¥è¯†, è¯·ç§»æ­¥å®˜æ–¹æ–‡æ¡£æŸ¥é˜… State çš„ç”¨æ³•. åŽç»­ä¼šç»™å¤§å®¶å¸¦æ¥æ›´å¤šå…³äºŽ RN è¿™äº›æ–¹é¢çš„ä¸œè¥¿.]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>iOS Android ReactNative</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RN: ä½¿ç”¨ Mobx]]></title>
    <url>%2F2016%2F10%2F06%2FRN-%E4%BD%BF%E7%94%A8-Mobx%2F</url>
    <content type="text"><![CDATA[æ¥ç”±åœ¨ JSFiddler ä¸Šé¢çœ‹åˆ° React ç»“åˆ Mobx çš„ä¸€ä¸ªå°ä¾‹å­. çˆ±ä¸é‡Šæ‰‹, é‚æ‹¿æ¥æ”¹é€ ä¸€ä¸‹, è®©å…¶èƒ½åœ¨ RN ä¸Šé¢ä¸€å±•é›„é£Ž. ä¹‹å‰å¬è¿‡ Mobx, è¯´æ˜¯è¦æ›¿ä»£ Redux, åæ­£æˆ‘æ˜¯ä¸çŸ¥é“è¿™äº›ä¸œä¸œ, ç¬¬ä¸€æ¬¡å¬è¯´æ²¡æœ‰ä»€ä¹ˆæ„Ÿè§‰!å¦‚ä»Šåˆå†æ¬¡å¶é‡ Mobx, å†³å®šè®¤çœŸå­¦ä¹ ä¸€ä¸‹å®ƒ. Mobx ç®€ä»‹Mobx çš„ github åœ°å€.ç›®å‰å…³äºŽä»–å’Œ React Native çš„(ä¸­æ–‡)èµ„æ–™ä¸å¤š, å¤§å¤šæ•°æ˜¯å…³äºŽ React çš„. çœ‹æ¥æƒ³å­¦å¥½ React Native, è¿˜æ˜¯è¦åšå¥½ React çš„åŠŸè¯¾å‘€! å®˜ç½‘ç»™äº†ä¸€ä¸ª Mobx çš„å›¾: æˆ‘ä¹Ÿæ˜¯åˆšæŽ¥è§¦è¿™ä¸ªã€Œç‰›é€¼é—ªé—ªã€çš„ Mobx, å…±å‹‰! æ•ˆæžœå›¾ä»Šå¤©çš„ä¾‹å­å¾ˆç®€å•, æ•ˆæžœå›¾å¦‚ä¸‹ ç‚¹å‡» Add ç‚¹å‡» Minus ä¸‹é¢å…·ä½“è¯´è¯´å¦‚ä½•æžå®šè¿™ä¸ª Demo. å‡†å¤‡ã€Œææ–™ã€è¿™é‡Œå‡è®¾ä½ å·²ç»å…·å¤‡ React Native çš„åŸºæœ¬å¼€å‘çŽ¯å¢ƒ, è‡³å°‘æˆåŠŸè¿è¡Œè¿‡ä¸€æ¬¡ React Native çš„ç¨‹åº. 1.åˆ›å»º React Native é¡¹ç›®1react-native init RNMobxDemo ä½ ä¹Ÿå¯ä»¥ç»™ä½ çš„å·¥ç¨‹å–ä¸€ä¸ªä½ å–œæ¬¢çš„åå­—.è¿™é‡Œå§‘ä¸”ç§°ä¹‹ä¸º RNMobxDemo 2.å®‰è£… mobx å’Œ mobx-react1npm i mobx mobx-react --save 3.Counter.js è¯¥æ–‡ä»¶ä½¿ç”¨äº† mobx å’Œ mobx-react çš„ç»„ä»¶. å…·ä½“ä»£ç : 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&apos;use strict&apos;;import React, &#123; Component &#125; from &apos;react&apos;;import &#123; StyleSheet, View, Text, TouchableHighlight&#125; from &apos;react-native&apos;;import &#123; observer &#125; from &apos;mobx-react/native&apos;;import &#123; observable &#125; from &apos;mobx&apos;;// è¢«è§‚å¯Ÿè€…, è§‚å¯Ÿ counter å˜é‡ const storer = observable(&#123; counter: 0&#125;);//---------------------------------// ES6 å†™æ³•: Arrow Function//---------------------------------storer.plus = () =&gt; &#123; storer.counter ++;&#125;;storer.minus = () =&gt; &#123; storer.counter --;&#125;;class Counter extends Component &#123; render () &#123; return ( &lt;View style = &#123;styles.container&#125;&gt; &#123;/*åŠ ä¸€*/&#125; &lt;TouchableHighlight onPress = &#123;() =&gt; &#123;this.props.store.plus()&#125;&#125;&gt; &lt;Text&gt;Add&lt;/Text&gt; &lt;/TouchableHighlight&gt; &#123;/* æ˜¾ç¤ºå¤„ç†ç»“æžœ */&#125; &lt;Text style = &#123;styles.resultTxtStyle&#125;&gt; &#123;this.props.store.counter&#125; &lt;/Text&gt; &#123;/*å‡ä¸€*/&#125; &lt;TouchableHighlight onPress = &#123;() =&gt; &#123;storer.minus()&#125;&#125;&gt; &lt;Text&gt;Minus&lt;/Text&gt; &lt;/TouchableHighlight&gt; &lt;/View&gt; ); &#125;&#125;// ä½¿ç”¨ observer åˆ›å»ºconst CounterComponent = observer(Counter);export default class ReactionsComponent extends Component &#123; render () &#123; return ( &lt;View style = &#123;&#123;flex: 1, marginTop: 64&#125;&#125;&gt; &lt;CounterComponent store = &#123;storer&#125; /&gt; &lt;/View&gt; ); &#125;&#125;/* æ ·å¼å®šä¹‰ */const styles = StyleSheet.create(&#123; container: &#123; flexDirection: &apos;row&apos;, justifyContent: &apos;space-around&apos; &#125;, resultTxtStyle: &#123; fontSize: 22, color: &apos;red&apos; &#125;&#125;); 4.index.ios.js è¯¥æ–‡ä»¶ä½¿ç”¨è‡ªå®šä¹‰çš„ç»„ä»¶ ReactionsComponent å…·ä½“ä»£ç å¦‚ä¸‹: 1234567891011121314import React, &#123; Component &#125; from &apos;react&apos;;//å¼•å…¥è‡ªå®šä¹‰æ¨¡å—import ReactionsComponent from &apos;./js/Mobx/Counter&apos;import &#123; AppRegistry&#125; from &apos;react-native&apos;;class RNMobxDemo extends Component &#123; render() &#123; return( &lt;ReactionsComponent/&gt; ); &#125;&#125;AppRegistry.registerComponent(&apos;RNMobxDemo&apos;, () =&gt; MZRNTutorial); Mobx æ”¯æŒã€Œæ³¨è§£ã€. è¿™é‡Œçš„æ³¨è§£å°±æ˜¯ ES7 ä¸­çš„ decorators (è£…é¥°è€…æ¨¡å¼). ä¸‹é¢ä»£ç æ˜¯ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥å£°æ˜Ž, ä½†æ˜¯ä½ éœ€è¦å®‰è£…ç›¸å…³çš„æ’ä»¶(babel plugin)æ¥æ”¯æŒ. å®‰è£…è¯¥æ’ä»¶å¾ˆç®€å•, åœ¨é¡¹ç›®æ ¹ç›®å½•æŒ‰ç…§ä¸‹é¢æ­¥éª¤å³å¯: Step 1: åˆ›å»º .babelrc æ–‡ä»¶ 1touch .babelrc Step 2: ç¼–è¾‘ .babelrc æ–‡ä»¶ 1234&#123; &apos;presets&apos;: [&apos;react-native&apos;], &apos;plugins&apos;: [&apos;transform-decorators-legacy&apos;]&#125; Step 3: å®‰è£…æ’ä»¶ 1npm i babel-plugin-transform-decorators-legacy babel-preset-react-native-stage-0 --save-dev ä¿®æ”¹ã€ŒCounter.jsã€, ä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&apos;use strict&apos;;import React, &#123; Component &#125; from &apos;react&apos;;import &#123; StyleSheet, View, Text, TouchableHighlight&#125; from &apos;react-native&apos;;import &#123; observer &#125; from &apos;mobx-react/native&apos;;import &#123; observable &#125; from &apos;mobx&apos;;// è¢«è§‚å¯Ÿè€…, è§‚å¯Ÿ counter å˜é‡ const storer = observable(&#123; counter: 0&#125;);//---------------------------------// ES6 å†™æ³•: Arrow Function//---------------------------------storer.plus = () =&gt; &#123; storer.counter ++;&#125;;storer.minus = () =&gt; &#123; storer.counter --;&#125;;@observer //ä½¿ç”¨@æ–¹å¼æ¥å‰ç½®å£°æ˜Žclass Counter extends Component &#123; render () &#123; return ( &lt;View style = &#123;styles.container&#125;&gt; &#123;/*åŠ ä¸€*/&#125; &lt;TouchableHighlight onPress = &#123;() =&gt; &#123;this.props.store.plus()&#125;&#125;&gt; &lt;Text&gt;Add&lt;/Text&gt; &lt;/TouchableHighlight&gt; &#123;/* æ˜¾ç¤ºå¤„ç†ç»“æžœ */&#125; &lt;Text style = &#123;styles.resultTxtStyle&#125;&gt; &#123;this.props.store.counter&#125; &lt;/Text&gt; &#123;/*å‡ä¸€*/&#125; &lt;TouchableHighlight onPress = &#123;() =&gt; &#123;storer.minus()&#125;&#125;&gt; &lt;Text&gt;Minus&lt;/Text&gt; &lt;/TouchableHighlight&gt; &lt;/View&gt; ); &#125;&#125;export default class ReactionsComponent extends Component &#123; render () &#123; return ( &lt;View style = &#123;&#123;flex: 1, marginTop: 64&#125;&#125;&gt; &lt;Counter store = &#123;storer&#125; /&gt; &lt;/View&gt; ); &#125;&#125;/* æ ·å¼å®šä¹‰ */const styles = StyleSheet.create(&#123; container: &#123; flexDirection: &apos;row&apos;, justifyContent: &apos;space-around&apos; &#125;, resultTxtStyle: &#123; fontSize: 22, color: &apos;red&apos; &#125;&#125;); ä»Žä¾‹å­å¯ä»¥çœ‹å‡º, storer ç›¸å½“äºŽ state, å½“ state å‘ç”Ÿæ”¹å˜äº†, è§†å›¾ View ä¹Ÿè·Ÿç€å˜åŒ–.ä¹Ÿå°±æ˜¯çŠ¶æ€é©±åŠ¨. Android å¼€å‘çš„åŒå­¦åº”è¯¥çŸ¥é“ Adapter å’Œ notifyDatasetChanged çš„æœºåˆ¶, å½“æ•°æ®æºå‘ç”Ÿå˜åŒ–çš„æ—¶å€™, å¯ä»¥é€šçŸ¥è§†å›¾è¿›è¡Œåˆ·æ–°æ“ä½œ. è¿™é‡Œçš„ Mobx ä¹Ÿå¯ä»¥è¿™ä¹ˆç®€å•çš„ç†è§£. Mobx çš„å¼ºå¤§ä¹‹å¤„è¿˜æœ‰å¾ˆå¤š, éœ€è¦æ…¢æ…¢å­¦ä¹ å’ŒæŒ–æŽ˜.]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>iOS Android ReactNative</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RN: 0.34 è¿è¡Œåœ¨ Android çš„é—®é¢˜]]></title>
    <url>%2F2016%2F09%2F26%2FRN-0-34-%E8%BF%90%E8%A1%8C%E5%9C%A8-Android-%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©é—²æ¥æ— äº‹, æƒ³ä½¿ç”¨ RN å·¥ç¨‹åœ¨ Android è®¾å¤‡ä¸Šé¢è·‘è·‘. æƒ³çœ‹çœ‹è¿è¡Œæ•ˆæžœæ€Žä¹ˆæ ·?! é€‚åˆè¯»è€… æœ‰ Android å¼€å‘åŸºç¡€. ä¼šä½¿ç”¨ Android Studio. åˆçº§ React Native çš„å¼€å‘è€…. å¼€å‘çŽ¯å¢ƒå’Œå·¥å…· Android Studio 2.2 ReactNative 0.34 Android æ¨¡æ‹Ÿå™¨ Mac æ“ä½œç³»ç»Ÿ é¢„æœŸæ•ˆæžœä¸å‡ºæ‰€æ–™, çœŸçš„ä¸èƒ½ä¸€å¸†é£Žé¡ºçš„ Run. åœ¨æˆ‘çš„åšå®¢ ReactNative: ä¸ä¸€æ ·çš„ HelloWorld ä¸­å±•ç¤ºäº† RN åœ¨ iOS ä¸Šé¢çš„è¿è¡Œæƒ…å†µ. ä»Šå¤©è¿˜æ˜¯è¿™ä¸ªä¾‹å­, éƒ¨ç½²å’Œè¿è¡Œåˆ° Android ä¸Šé¢. æ•ˆæžœå¦‚ä¸‹: åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, é‡åˆ°å‡ ä¸ªé—®é¢˜. ç‰¹æ­¤è®°å½•. é—®é¢˜æè¿°å’Œè§£å†³é—®é¢˜1: ç›´æŽ¥è¿è¡Œ crashlog æè¿°(éƒ¨åˆ†) E/AndroidRuntime: FATAL EXCEPTION: mainProcess: com.mzrntutorial, PID: 5849java.lang.RuntimeException:Unable to start activity ComponentInfo{com.mzrntutorial/com.mzrntutorial.MainActivity}: java.lang.ClassCastException: android.app.Application cannot be cast to com.facebook.react.ReactApplicationat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2416)at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2476) è§£å†³æ–¹æ¡ˆ:Manifest.xml é…ç½® Application åç§° android:name=â€.MainApplicationâ€ é—®é¢˜2:1could not get batchedbridge make sure your bundle is packaged correctly è§£å†³é—®é¢˜1åŽ, å†æ¬¡è¿è¡Œ, ä¼šæŠ¥é—®é¢˜2.è¯¥é—®é¢˜æ˜¯å› ä¸ºæ²¡æœ‰å¯åŠ¨æœ¬åœ°çš„ server. ä½¿ç”¨ Xcode å¯ä»¥è‡ªåŠ¨è¿è¡Œæœ¬åœ° server.å¯ä»¥å‚è€ƒåšå®¢ React Native å¦‚ä½•å¯åŠ¨ local server è§£å†³æ–¹æ¡ˆ:æ‰‹åŠ¨å¯åŠ¨ server. cd é¡¹ç›®æ ¹ç›®å½• 1react-native start é—®é¢˜3: æ¨¡æ‹Ÿå™¨æ²¡æœ‰ menu æŒ‰é”®, æ— æ³• Reload è¿™ä¸ªå…¶å®žä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜, ä½†æ˜¯å¯¹äºŽåˆå­¦è€…, ä¹Ÿç®—æ˜¯ä¸€ä¸ªé—®é¢˜. æ–°ç‰ˆçš„ Android SDK åˆ›å»ºçš„æ¨¡æ‹Ÿå™¨æ²¡æœ‰ menu æŒ‰é”®äº† è§£å†³æ–¹æ¡ˆ:è¿žç»­æŒ‰ä¸¤æ¬¡å­—æ¯ r å³å¯åˆ·æ–°. è¿™äº›é—®é¢˜, FB åŽé¢è‚¯å®šä¼šè§£å†³çš„.é˜¿é—¨! é™„å½•(ä»£ç )index.ios.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293import React, &#123; Component &#125; from &apos;react&apos;;import &#123;getPlatformString, isIOS&#125; from &apos;./js/Generals/Utils/IDSRNPlatformUtil&apos;;import MZButton from &apos;./js/ReactUIKit/MZButton&apos;import &#123; AppRegistry, StyleSheet, Text, View, Platform, TouchableOpacity, TouchableHighlight&#125; from &apos;react-native&apos;;// è°ƒç”¨å…¶ä»–æ¨¡å—æ–¹æ³•var os = getPlatformString();var iosPlatform = isIOS();//when run on &apos;ios&apos; trueclass MZRNTutorial extends Component &#123; constructor(props) &#123; super(props); this.state = &#123;status:1&#125;; &#125; customPressHandler = () =&gt; &#123; alert(&apos;å½“å‰çŠ¶æ€: &apos; + this.state.status); this.state.status = 2; &#125; render() &#123; console.log(&apos;render ...&apos;); return ( &lt;View style=&#123;styles.container&#125;&gt; &lt;Text style=&#123;styles.welcome&#125;&gt; Near use React Native! &lt;/Text&gt; &lt;Text style=&#123;styles.instructions&#125;&gt; To get started, edit index.android.js &lt;/Text&gt; &lt;Text style=&#123;styles.instructions&#125;&gt; Press &apos;R&apos; twice to reload,&#123;&apos;\n&apos;&#125; or shake for dev menu &lt;/Text&gt; &#123;/* æ˜¾ç¤ºå½“å‰å¹³å°ä¿¡æ¯*/&#125; &lt;Text style=&#123;styles.welcome&#125;&gt; current os: &#123;Platform.OS&#125; &lt;/Text&gt; &#123;/* &lt;TouchableOpacity style=&#123;styles.button&#125; onPress=&#123;this.customPressHandler&#125; &gt; &lt;Text style=&#123;styles.buttonText&#125;&gt;ç¡®å®š&lt;/Text&gt; &lt;/TouchableOpacity&gt; */&#125; &lt;MZButton text=&quot;ç¡®å®š?&quot; bgColor=&quot;green&quot; dianjishijian=&#123;()=&gt;&#123;alert(&apos;å±…ç„¶ç‚¹å‡»ç¡®å®š?!&apos;)&#125;&#125;&gt; &lt;/MZButton&gt; &lt;/View&gt; ); &#125;&#125;const styles = StyleSheet.create(&#123; button: &#123; height: 40, width: 150, borderRadius: 20, justifyContent: &apos;center&apos;, backgroundColor: &apos;green&apos;, overflow: &apos;hidden&apos; &#125;, buttonText: &#123; textAlign: &apos;center&apos;, color: &apos;white&apos; &#125;, container: &#123; flex: 1, justifyContent: &apos;center&apos;, alignItems: &apos;center&apos;, backgroundColor: &apos;#F5FCFF&apos;, &#125;, welcome: &#123; fontSize: 20, textAlign: &apos;center&apos;, margin: 10, &#125;, instructions: &#123; textAlign: &apos;center&apos;, color: &apos;#333333&apos;, marginBottom: 5, &#125;, flowRight: &#123; flexDirection: &apos;row&apos;, alignItems: &apos;center&apos;, alignSelf: &apos;stretch&apos; &#125;,&#125;);AppRegistry.registerComponent(&apos;MZRNTutorial&apos;, () =&gt; MZRNTutorial); MZButton.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import React, &#123; Component &#125; from &apos;react&apos;;import &#123; StyleSheet, Text, View, Platform, TouchableOpacity&#125; from &apos;react-native&apos;;//-----------------------------------------------------//å¤–éƒ¨ä½¿ç”¨è¯¥æ¨¡å—, ES6éœ€è¦ä½¿ç”¨å…³é”®å­— export default//-----------------------------------------------------export default class MZButton extends Component&#123; constructor(props) &#123; super(props); this.state = &#123;status:1&#125;; &#125; costumPressHandler = () =&gt; &#123; alert(&apos;å½“å‰çŠ¶æ€:&apos; + this.state.status); const &#123;dianjishijian&#125; = this.props; dianjishijian(); &#125;; // ä½¿ç”¨å±žæ€§å€¼è®¾ç½®èƒŒæ™¯é¢œè‰² // style=&#123;[styles.button], &#123;backgroundColor:this.props.beijingyanse&#125;&#125; render() &#123; //è§£æž„ const &#123;text, bgColor&#125; = this.props; return ( &lt;TouchableOpacity style=&#123;[styles.button], &#123;backgroundColor:bgColor&#125;&#125; onPress = &#123;this.costumPressHandler&#125; &gt; &lt;Text style=&#123;styles.buttonText&#125;&gt; &#123;/* ä½¿ç”¨å±žæ€§å€¼ */&#125; &#123;this.props.text&#125; &lt;/Text&gt; &lt;/TouchableOpacity&gt; ) &#125;&#125;const styles = StyleSheet.create(&#123; button: &#123; height: 40, width: 150, borderRadius: 20, justifyContent: &apos;center&apos;, backgroundColor: &apos;green&apos;, overflow: &apos;hidden&apos; &#125;, buttonText: &#123; textAlign: &apos;center&apos;, color: &apos;white&apos; &#125;&#125;); IDSRNPlatformUtil.js 123456789101112131415161718import React, &#123; Component &#125; from &apos;react&apos;;import &#123; Platform&#125; from &apos;react-native&apos;;export function getPlatformString()&#123; console.log(Platform.OS); return Platform.OS;&#125;export function isIOS()&#123; return Platform.OS === &apos;ios&apos;;&#125;export function isAndroid()&#123; return Platform.OS == &apos;android&apos;;&#125;]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>Android ReactNative</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS é¡¹ç›®: æ‰“é€ æœ¬åœ° pod åº“]]></title>
    <url>%2F2016%2F09%2F25%2FiOS-%E9%A1%B9%E7%9B%AE-%E6%89%93%E9%80%A0%E6%9C%AC%E5%9C%B0-pod-%E5%BA%93%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡çš„å§Šå¦¹ç¯‡ Cocoapods ç®¡ç†å¼€æºé¡¹ç›® å·²å‡†å¤‡å®Œæ¯•ï¼Œç›´æˆ³ é“¾æŽ¥ å³å¯è¾¾åˆ°ã€‚ Cocoapods ç®¡ç†ä»£ç çš„å¿…è¦æ€§é¡¹ç›®åˆ°äº†ä¸€å®šè§„æ¨¡, ä»£ç ç»„ç»‡å’Œç»“æž„æ˜¾å¾—å°¤ä¸ºé‡è¦. é‡æž„é¡¹ç›®ç»“æž„ï¼Œå¯ä»¥ä»Žåˆ†ç¦»ä»£ç å¼€å§‹ï¼Œä»£ç åˆ†ç¦»ï¼Œå¯ä»¥æŠŠå¸¸ç”¨ç¨³å®šçš„ç»„ä»¶å°è£…æŠ½ç¦»å‡ºæ¥. åˆ†ç¦»ä»£ç , å¸¸ç”¨çš„æœ‰å‡ ç§æ–¹å¼: æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹, ç®¡ç†å’Œç»„ç»‡ä»£ç . ä½¿ç”¨ framework çš„æ–¹å¼, æä¾›ç»™é¡¹ç›®ä½¿ç”¨. å·¥å…·ç®¡ç†å¦‚ Cocoapods. è¿™å‡ ç§æ–¹å¼, å„æœ‰æ‰€é•¿, å„æœ‰ä¼˜åŠ£, æ— æ‰€è°“å¥½ä¸Žå, æ ¹æ®è‡ªå·±çš„é¡¹ç›®ç‰¹ç‚¹æ¥ç»„ç»‡å³å¯. æˆ‘çš„åšæ³•æ˜¯ä½¿ç”¨ cocoapods æ¥ç®¡ç†. ä¸‹é¢è¿›å…¥ä»Šå¤©çš„ä¸»é¢˜: ä½¿ç”¨ cocoapods ç®¡ç†è‡ªå·±çš„æœ¬åœ°ä»£ç . åšå®¢ Mac OSX 10.11.1+ å®‰è£… Cocoapodsä»‹ç»äº†å¦‚ä½•åœ¨æœ€æ–°ç‰ˆ MacOS ä¸­å®‰è£… Cocoapods ä»¥åŠæ³¨æ„äº‹é¡¹, å¹¶ä¸”ä½œè€…ä¿è¯æŒç»­ã€Œæ›´æ–°, æ›´æ­£ã€å†…å®¹. åˆ›å»ºå·¥ç¨‹ä½¿ç”¨ Xcode åˆ›å»ºä¸€ä¸ªå·¥ç¨‹, å·¥ç¨‹åå°±èµ·ä¸º TestPods å§. å·¥ç¨‹ç›®å½•å¯ä»¥é˜²æ­¢åœ¨æ¡Œé¢æˆ–è€…ä½ å–œæ¬¢çš„ç›®å½•ä¸‹é¢éƒ½å¯ä»¥. åœ¨ TestPods ä¸‹é¢åˆ›å»º LocalLib ç›®å½•, ç”¨æ¥æ”¾ç½®åˆ†ç¦»çš„ä»£ç .å½“ç„¶, ä½ ä¹Ÿå¯ä»¥å°† LocalLib è¿™ä¸ªç›®å½•æ”¾åˆ°å…¶ä»–ç›®å½•. åœ¨ LocalLib ä¸‹é¢, æˆ‘çš„ pod åº“ä»£ç åç§°ä¸º download. å¯ä»¥æ–°å»ºè¿™ä¸ªç›®å½•. ç›®å½•å¦‚ä¸‹: åˆ›å»º podspec æ–‡ä»¶åœ¨ download ç›®å½•ä¸‹é¢, åˆ›å»º podspec æ–‡ä»¶ 1pod spec create download åˆ›å»ºå®ŒæˆåŽ, ä¼šç”Ÿæˆ download.podspec æ–‡ä»¶. å…·ä½“å†…å®¹, åˆ›å»ºåŽ, å¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹. ä¿®æ”¹ podspec æ–‡ä»¶ä¿®æ”¹ download.podspec, ä¸»è¦ä¿®æ”¹å‡ ä¸ªå…³é”®åœ°æ–¹: æºç ä½ç½®æºç ç‰ˆæœ¬ 123456789101112131415â€•â€•â€• Source Location â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•# # # Specify the location from where the source should be retrieved. # Supports git, hg, bzr, svn and HTTP. # s.source = &#123; :git =&gt; &quot;&quot;, :tag =&gt; &quot;0.0.1&quot; &#125; # â€•â€•â€• Source Code â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•# # # CocoaPods is smart about how it includes source code. For source files # giving a folder will include any swift, h, m, mm, c &amp; cpp files. # For header files it will include any header in the folder. # Not including the public_header_files will make all headers public. # s.source_files = &quot;Source&quot;, &quot;Source/**/*.&#123;h,m&#125;&quot; s.exclude_files = &quot;Source/Exclude&quot; å¦å¤–, é…ç½®å¥½ç›¸å…³æè¿°ä¿¡æ¯, ä¸è¦åŒ…å« â€˜Exampleâ€™ çš„å­—æ ·, ä¸ç„¶, æ–°ç‰ˆçš„ Cocoapods æ‰§è¡Œ pod install æ—¶å€™, ä¼šæŠ¥å‡ºè­¦å‘Šå’Œé”™è¯¯. è¿™æ ·, å·¥ç¨‹å¯ä»¥ä½¿ç”¨ pods åº“äº†. å·¥ç¨‹ä½¿ç”¨ pod åº“å°† TestPods æ”¹ä¸º cocoapods é¡¹ç›®. åœ¨ TestPods ç›®å½•, æ‰§è¡Œ 1pod init ä¼šç”Ÿæˆ Podfile ç­‰æ–‡ä»¶. ä¿®æ”¹ Podfile æ–‡ä»¶ 123456789101112# Uncomment this line to define a global platform for your project# platform :ios, &apos;7.0&apos;# Uncomment this line if you&apos;re using Swift# use_frameworks!target &apos;TestPods&apos; dopod &apos;download&apos;, :path =&gt; &apos;./LocalLib/download/&apos;#pod &apos;core_lib_spec&apos;, :svn =&gt; &apos;http://svn.ids111.com/o2o/client/ios/trunks/master/Frameworks/CoreLibrary&apos;endtarget &apos;TestPodsTests&apos; doendtarget &apos;TestPodsUITests&apos; doend å…³é”®æ˜¯æŒ‡æ˜Ž pod åº“çš„ä½ç½®.è·¯å¾„ä¸€å®šè¦æ­£ç¡®.å¦åˆ™æ— æ³•æ‰¾åˆ°è¯¥åº“. 1pod &apos;download&apos;, :path =&gt; &apos;./LocalLib/download/&apos; åœ¨ TestPods ä¸‹é¢, pod install å³å¯. å¦‚æžœ, pod install æŠ¥é”™, ä¸€èˆ¬éƒ½æ˜¯ä½ çš„ pod åº“çš„é…ç½®æ–‡ä»¶(.podspec)é‡Œé¢å†™çš„ä¸ç¬¦åˆè¦æ±‚. æ ¹æ®æŠ¥é”™ä¿¡æ¯, åŠ ä»¥ä¿®æ”¹å³å¯. xcode æ‰“å¼€å·¥ç¨‹. ç¤ºä¾‹ä¸‹è½½å·¥ç¨‹ç¤ºä¾‹ä»£ç , å¯ä»¥ æˆ³è¿™é‡Œä¸‹è½½ çŽ©è€! æ‰«ç å…³æ³¨ï¼Œä½ æˆ‘å°±å„å¤šä¸€ä¸ªæœ‹å‹~]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS Cocoapods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RN: å¦‚ä½•å¯åŠ¨ local server]]></title>
    <url>%2F2016%2F09%2F22%2FRN-%E5%A6%82%E4%BD%95%E5%90%AF%E5%8A%A8-local-server%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨ react-native init åˆ›å»ºçš„å·¥ç¨‹, åœ¨ xcode ä¸­è¿è¡Œä¼šè‡ªåŠ¨å¯åŠ¨ä¸€ä¸ª RN çš„æœ¬åœ° Server. åƒä¸‹é¢å›¾ç‰‡å±•ç¤ºè¿™æ ·: é‚£ä¹ˆ, è¿™é‡Œé—®é¢˜æ¥äº†. æ¯”å¦‚, æˆ‘æƒ³æš‚æ—¶ä¸å¯åŠ¨è¿™ä¸ªæœ¬åœ° Server, é‚£ä¹ˆå¦‚ä½•å…³é—­å‘¢? ä¸‹é¢è·Ÿå¤§å®¶ä¸€èµ·æŽ¢è®¨å’Œè¿½ç©¶ä¸€ä¸‹. æ‰¾åˆ°å¯åŠ¨çš„æ ¹æºå¯åŠ¨è¿™ä¸ªç»ˆç«¯çš„æ˜¯åœ¨ä¸€ä¸ª React.xcodeproj å·¥ç¨‹çš„ ã€ŒBuild Phasesã€ä¸­è„šæœ¬é‡Œé¢é…ç½®çš„. è„šæœ¬å†…å®¹å¦‚ä¸‹: 12345678if nc -w 5 -z localhost 8081 ; then if ! curl -s &quot;http://localhost:8081/status&quot; | grep -q &quot;packager-status:running&quot; ; then echo &quot;Port 8081 already in use, packager is either not running or not running correctly&quot; exit 2 fielse open &quot;$SRCROOT/../packager/launchPackager.command&quot; || echo &quot;Can&apos;t start packager automatically&quot;fi çœŸæ­£èµ·ä½œç”¨çš„æ˜¯: 1open &quot;$SRCROOT/../packager/launchPackager.command&quot; è§£å†³æ–¹æ¡ˆè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å…³é—­è¿™ä¸ªè‡ªå¯åŠ¨äº†, ç¤ºä¾‹ä»£ç å¦‚ä¸‹: 123456789if nc -w 5 -z localhost 8081 ; then if ! curl -s &quot;http://localhost:8081/status&quot; | grep -q &quot;packager-status:running&quot; ; then echo &quot;Port 8081 already in use, packager is either not running or not running correctly&quot; exit 2 fielse#open &quot;$SRCROOT/../packager/launchPackager.command&quot; || echo &quot;Can&apos;t start packager automatically&quot; echo &quot;Nothing...&quot;fi çœ‹çœ‹ launchPackager.commandè¿™ä¸ªæ–‡ä»¶åœ¨ã€Œnode_modules/react-native/packager/ã€ä¸‹é¢. è¯¥æ–‡ä»¶æ˜¯å¯åŠ¨å¦å¤–ä¸€ä¸ªè„šæœ¬ packager.sh, æ ¸å¿ƒä»£ç : 1source ./packager.sh æœ€ç»ˆæ‰§è¡Œ: 1node &quot;$THIS_DIR/../local-cli/cli.js&quot; start &quot;$@&quot; å¤§å®¶æœ‰å…´è¶£å¯ä»¥åŽ»çœ‹çœ‹æºç , ä¸€æŽ¢ç©¶ç«Ÿ.]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>ReactNative iOS Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RN: åˆ›å»ºiOSå·¥ç¨‹ä»£ç çš„indenté—®é¢˜]]></title>
    <url>%2F2016%2F09%2F19%2FRN-%E5%88%9B%E5%BB%BAiOS%E5%B7%A5%E7%A8%8B%E4%BB%A3%E7%A0%81%E7%9A%84indent%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[èµ·å› ä½¿ç”¨æœ€æ–°ç‰ˆRN(0.33)æ¥åˆ›å»ºå·¥ç¨‹, å¤§å®¶å¯ä»¥å‘çŽ°, OC ä»£ç çš„é€€æ ¼å˜æˆäº†ä¸¤ä¸ªç©ºæ ¼.å¦‚ä¸‹: 12345678910111213141516- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions&#123; NSURL *jsCodeLocation; jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@&quot;index.ios&quot; fallbackResource:nil]; RCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation moduleName:@&quot;Mark&quot; initialProperties:nil launchOptions:launchOptions]; rootView.backgroundColor = [[UIColor alloc] initWithRed:1.0f green:1.0f blue:1.0f alpha:1]; self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; UIViewController *rootViewController = [UIViewController new]; rootViewController.view = rootView; self.window.rootViewController = rootViewController; [self.window makeKeyAndVisible]; return YES;&#125; æ— è®ºä½ å›žè½¦æˆ–è€… tab æˆ–è€…æ ¼å¼åŒ–(å³é”®/Structure/Re-Indent)ä»£ç , ä¼šå‘çŽ°, éƒ½æ˜¯è¿™ç§è°ƒè°ƒ. é¢å¯¹è¿™çªå¦‚å…¶æ¥çš„å˜åŒ–, æˆ‘å¼€å§‹è§‰å¾—æœ‰ç‚¹æ·¡æ·¡çš„å¿§ä¼¤. å¯¹äºŽä¸€ç›´ä½¿ç”¨ tab width = 4 çš„æˆ‘æ¥è¯´, æ— æ³•å¿å—. å¿…é¡»æ”¹è¿‡æ¥. æ€è€ƒæ‰“å¼€ Xcode çš„ preferences, çœ‹åˆ°å…¶ã€Žè®¾ç½®ã€æ­£å¸¸çš„ä¸è¦ä¸è¦çš„. æ‰€ä»¥å¯ä»¥æ–­å®šä¸æ˜¯ Xcode çš„é—®é¢˜. å› ä¸ºå‡çº§äº† Xcode åˆ°æœ€æ–°ç‰ˆ Xcode8, è¿˜ä»¥ä¸ºæ˜¯ Xcode8 çš„ bug, æ‰“å¼€ä¹‹å‰çš„ React Native å·¥ç¨‹æˆ–è€…å…¶ä»– Xcode å·¥ç¨‹, å°±æ²¡æœ‰è¿™ä¸ªã€Œè›‹ç–¼ã€çš„é—®é¢˜. æœ€ç»ˆçŒœæƒ³æ˜¯å·¥ç¨‹é…ç½®æ–‡ä»¶å¼•èµ·çš„â€¦ è§£å†³æ—¢ç„¶å’Œ Xcode æ²¡æœ‰å…³ç³», é‚£ä¹ˆé—®é¢˜å°±ä¸€å®šå‡ºçŽ°åœ¨é…ç½®æ–‡ä»¶ä¸Šé¢. ç½ªé­ç¥¸é¦– project.pbxproj 123indentWidth = 2;sourceTree = &quot;&lt;group&gt;&quot;;tabWidth = 2; ä¿®æ”¹ä¸º: 123indentWidth = 4;sourceTree = &quot;&lt;group&gt;&quot;;tabWidth = 4; æˆ–è€…ç›´æŽ¥åˆ é™¤: 12indentWidth = 2;tabWidth = 2; å…³é—­å·¥ç¨‹, é‡å¯ Xcode å°±å¯ä»¥äº†.]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>ReactNative iOS Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RN: Mac é…ç½® ES6 ç®€æ˜“å¼€å‘çŽ¯å¢ƒ]]></title>
    <url>%2F2016%2F09%2F16%2FRN-Mac-%E9%85%8D%E7%BD%AE-ES6-%E7%AE%80%E6%98%93%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%2F</url>
    <content type="text"><![CDATA[åˆ›å»ºæ–‡ä»¶å¤¹ ES6123ES6-lib-src ä½ å¯ä»¥ä»»æ„å–ä¸€ä¸ªä½ å–œæ¬¢çš„ç›®å½•åç§°. åˆå§‹åŒ–é¡¹ç›®1npm init å¡«å†™é¡¹ç›®ä¿¡æ¯. æŸ¥çœ‹ä¸€ä¸‹ package.json 1cat package.json 123456789101112131415&#123; &quot;name&quot;: &quot;es6tutorials&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;Tutorial&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot; &#125;, &quot;keywords&quot;: [ &quot;es6&quot;, &quot;.etc&quot; ], &quot;author&quot;: &quot;mark.zhang&quot;, &quot;license&quot;: &quot;MIT&quot;&#125; ç›®å½•ç»“æž„å¦‚ä¸‹ å®‰è£… babel-cli1npm install --save-dev babel-cli ä¹Ÿå¯ä»¥å…¨å±€å®‰è£… 1npm install babel-cli -g å…¨å±€å®‰è£…ä¸ŠåŽï¼Œä¼šå®‰è£…å¦‚ä¸‹å››ä¸ªç¨‹åºåˆ°å…¨å±€çŽ¯å¢ƒä¸­ï¼š 1234babelbabel-nodebabel-doctorbabel-external-helpers å®‰è£… babel-core1npm install babel-core --save å®‰è£… ES2015 æ’ä»¶1npm install babel-preset-es2015 ç¼–å†™é…ç½®æ–‡ä»¶ .babelrc æ³¨æ„è¯¥æ–‡ä»¶æœ‰ä¸ªç‚¹ç¬¦å·. åœ¨å·¥ç¨‹ç›®å½•ä¸‹æ–°å»ºè¯¥æ–‡ä»¶ 1touch .babelrc å†™å…¥å¦‚ä¸‹å†…å®¹ 123456&#123; &quot;presets&quot;: [ &quot;es2015&quot;, ], &quot;plugins&quot;: []&#125; ç¼–å†™æµ‹è¯•ä»£ç  tutorials.js 12345678910111213141516171819202122function test()&#123; console.log(a); var a = 0;&#125;test();var a = [];for (var i = 0; i &lt; 10; i++) &#123; var c = i; a[i] = function () &#123; console.log(c); &#125;;&#125;a[6](); // 9var b = [];for (var i=0; i&lt;10; i++) &#123; let c = i; //let æ˜¯ es6ä¸­çš„å…³é”®å­— b[i] = function() &#123; console.log(c) &#125;;&#125;b[6](); ç¼–è¯‘ 1babel src/tutorials.js è¿è¡Œ 1babel-node src/tutorials.js è¿™é‡Œå¯ä»¥ä¸‹è½½ å·¥ç¨‹æºç . å…¶ä»–æ“ä½œ1.å°† ES6 è¯­æ³•çš„æ–‡ä»¶è½¬æ¢ä¸º ES5 çš„è¯­æ³•1babel -d lib/ src/ åœ¨ lib ç›®å½•ä¸‹ä¼šç”Ÿæˆ src ç›®å½•ä¸­å¯¹åº”çš„æ–‡ä»¶. 2.è¿›å…¥äº¤äº’æ¨¡å¼1babel-node ä¸¤æ¬¡ ctrl+c é€€å‡º 3.æ£€æŸ¥babelçŠ¶å†µ1babel-doctor æ£€æŸ¥ä»¥ä¸‹å†…å®¹ é…ç½®æ–‡ä»¶.babelrc æ˜¯å¦æœ‰é‡å¤çš„babelå®‰è£…åŒ…ï¼Œæ¯”å¦‚è¯´å®‰è£…äº†5å’Œ6 babelå®‰è£…åŒ…æ˜¯å¦å·²ç»å‡çº§åˆ°äº†æœ€æ–°ç‰ˆ npm &gt;= 3.3.0 4.å¸è½½å…¨å±€çš„ babel-cli1npm uninstall --global babel-cli æ„Ÿè°¢ Babel comes with a built-in CLI which can be used to compile files from the command line. é˜®ä¸€å³°è€å¸ˆçš„ ECMAScript 6å…¥é—¨]]></content>
      <categories>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>ReactNative</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS: æ‰‹æœºæ˜¯å¦è®¾ç½®ç½‘ç»œä»£ç†]]></title>
    <url>%2F2016%2F09%2F16%2FiOS-%E6%89%8B%E6%9C%BA%E6%98%AF%E5%90%A6%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[æƒ…æ™¯é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­, ä¼šé‡åˆ°ä¸‹é¢è¿™æ ·ä¸€ç§æƒ…æ™¯: äº§å“æˆ–è€…è®¾è®¡åŒäº‹éœ€è¦ä½“éªŒç›®å‰äº§å“å¼€å‘çš„è¿›åº¦, ç„¶åŽè¦æ±‚å¼€å‘äººå‘˜, å°†çŽ°åœ¨çš„ç‰ˆæœ¬ç»™ä»–ä»¬ä½“éªŒ.åšè¿‡ç¨‹åºå¼€å‘çš„äººéƒ½çŸ¥é“, å¼€å‘ç‰ˆæœ¬ä¼šæœ‰ä¸å°‘é—®é¢˜.è¿™æ—¶, äº§å“å’Œè®¾è®¡åŒäº‹å°±ä¼šæŠ±æ€¨, æ€Žä¹ˆç™»å½•ä¸äº†, è¿™é‡Œæ²¡æœ‰æ•°æ®äº†!æœ‰ä¸ªå°ä¼™ä¼´è¢«æŠ˜è…¾çš„å®žåœ¨å—ä¸äº†, è¿žç½‘é¡µéƒ½æ‰“ä¸å¼€äº†.æœ€åŽæ‰¾åˆ°åŽŸå› :ä»–æ‰‹æœºè¢«ä¹‹å‰çš„ç¨‹åºçŒ¿è®¾ç½®äº†ç½‘ç»œä»£ç†, ä»£ç†åˆ°ç¨‹åºçŒ¿å“¥å“¥çš„ç”µè„‘ä¸Šæ¥æŠ“åŒ…è°ƒè¯•é—®é¢˜, å¿˜è®°å–æ¶ˆè®¾ç½®äº†. å‡å¦‚å¯ä»¥åˆ¤æ–­å½“å‰æ‰‹æœºæ˜¯å¦è®¾ç½®äº†ç½‘ç»œä»£ç†, å°±å¯ä»¥å¾ˆå¥½åœ°è§£å†³ä¸Šé¢æƒ…æ™¯ä¸­æåˆ°çš„é—®é¢˜äº†. æ‰¾åˆ°çº¿ç´¢åœ¨ ASIHttpRequest ä¸­æ‰¾åˆ°å¦‚ä¸‹æ–¹æ³•: 12345678910111213141516171819202122232425262728293031323334353637383940414243- (BOOL)configureProxies&#123; // Have details of the proxy been set on this request if (![self isPACFileRequest] &amp;&amp; (![self proxyHost] &amp;&amp; ![self proxyPort])) &#123; // If not, we need to figure out what they&apos;ll be NSArray *proxies = nil; // Have we been given a proxy auto config file? if ([self PACurl]) &#123; // If yes, we&apos;ll need to fetch the PAC file asynchronously, so we stop this request to wait until we have the proxy details. [self fetchPACFile]; return NO; // Detect proxy settings and apply them &#125; else &#123;#if TARGET_OS_IPHONE NSDictionary *proxySettings = [NSMakeCollectable(CFNetworkCopySystemProxySettings()) autorelease];#else NSDictionary *proxySettings = [NSMakeCollectable(SCDynamicStoreCopyProxies(NULL)) autorelease];#endif proxies = [NSMakeCollectable(CFNetworkCopyProxiesForURL((CFURLRef)[self url], (CFDictionaryRef)proxySettings)) autorelease]; // Now check to see if the proxy settings contained a PAC url, we need to run the script to get the real list of proxies if so NSDictionary *settings = [proxies objectAtIndex:0]; if ([settings objectForKey:(NSString *)kCFProxyAutoConfigurationURLKey]) &#123; [self setPACurl:[settings objectForKey:(NSString *)kCFProxyAutoConfigurationURLKey]]; [self fetchPACFile]; return NO; &#125; &#125; if (!proxies) &#123; [self setReadStream:nil]; [self failWithError:[NSError errorWithDomain:NetworkRequestErrorDomain code:ASIInternalErrorWhileBuildingRequestType userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@&quot;Unable to obtain information on proxy servers needed for request&quot;,NSLocalizedDescriptionKey,nil]]]; return NO; &#125; // I don&apos;t really understand why the dictionary returned by CFNetworkCopyProxiesForURL uses different key names from CFNetworkCopySystemProxySettings/SCDynamicStoreCopyProxies // and why its key names are documented while those we actually need to use don&apos;t seem to be (passing the kCF* keys doesn&apos;t seem to work) if ([proxies count] &gt; 0) &#123; NSDictionary *settings = [proxies objectAtIndex:0]; [self setProxyHost:[settings objectForKey:(NSString *)kCFProxyHostNameKey]]; [self setProxyPort:[[settings objectForKey:(NSString *)kCFProxyPortNumberKey] intValue]]; [self setProxyType:[settings objectForKey:(NSString *)kCFProxyTypeKey]]; &#125; &#125; return YES;&#125; è¸ç ´é“éž‹æ— è§…å¤„â€¦ åˆ¤æ–­ iphone æ˜¯å¦è®¾ç½®ç½‘ç»œä»£ç†çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122+ (BOOL)hasSetProxy&#123; BOOL proxy = NO; NSDictionary *proxySettings = (__bridge NSDictionary *)(CFNetworkCopySystemProxySettings()); NSURL *url = [NSURL URLWithString:@&quot;http://www.baidu.com&quot;]; NSArray *proxies = (__bridge NSArray *)(CFNetworkCopyProxiesForURL((__bridge CFURLRef)(url), (__bridge CFDictionaryRef)(proxySettings))); MZLOG(@&quot;proxies:%@&quot;, proxies); NSDictionary *settings = proxies[0]; MZLOG(@&quot;kCFProxyHostNameKey: %@&quot;, [settings objectForKey:(NSString *)kCFProxyHostNameKey]); MZLOG(@&quot;kCFProxyPortNumberKey: %@&quot;, [settings objectForKey:(NSString *)kCFProxyPortNumberKey]); MZLOG(@&quot;kCFProxyTypeKey: %@&quot;, [settings objectForKey:(NSString *)kCFProxyTypeKey]); if ([[settings objectForKey:(NSString *)kCFProxyTypeKey] isEqualToString:@&quot;kCFProxyTypeNone&quot;]) &#123; proxy = NO; &#125; else &#123; proxy = YES; &#125; return proxy;&#125; ç”¨æˆ·ä½“éªŒåˆ¤æ–­å¦‚æžœè®¾ç½®äº†ä»£ç†, æç¤ºç”¨æˆ·, å¸®ä»–ç›´æŽ¥è·³åˆ° wifi è®¾ç½®ç•Œé¢. ä¸‹é¢è¯´è¯´å¦‚ä½•è·³åˆ°ç³»ç»Ÿçš„ wifi è®¾ç½®ç•Œé¢. 1.é…ç½® URL TYPES æ³¨æ„è¿™é‡Œçš„é…ç½®æ˜¯ prefs. 2.openURL 1234567891011121314NSString * urlString = @&quot;prefs:root=WIFI&quot;;NSURL *url = [NSURL URLWithString:urlString];UIApplication *app = [UIApplication sharedApplication];if ([app canOpenURL:[NSURL URLWithString:urlString]]) &#123; if ([[UIDevice currentDevice].systemVersion doubleValue] &gt;= 10.0) &#123; [app openURL:url options:@&#123;&#125; completionHandler:nil]; &#125; else &#123; [app openURL:url]; &#125;&#125; å¦å¤–, è·³è½¬åˆ°ç³»ç»Ÿå…¶ä»–ç•Œé¢çš„ URL å¦‚ä¸‹: 123456789101112131415161718192021222324252627281.ç³»ç»Ÿè®¾ç½®prefs:root=INTERNET_TETHERING2.WIFIè®¾ç½®prefs:root=WIFI3.è“ç‰™è®¾ç½®prefs:root=Bluetooth4.ç³»ç»Ÿé€šçŸ¥prefs:root=NOTIFICATIONS_ID5.é€šç”¨è®¾ç½®prefs:root=General6.æ˜¾ç¤ºè®¾ç½®prefs:root=DISPLAY&amp;BRIGHTNESS7.å£çº¸è®¾ç½®prefs:root=Wallpaper8.å£°éŸ³è®¾ç½®prefs:root=Sounds9.éšç§è®¾ç½®prefs:root=privacy10.æ‰“å¼€ APP Storeprefs:root=STORE11.æ‰“å¼€ Notesprefs:root=NOTES12.æ‰“å¼€ Safariprefs:root=Safari13.æ‰“å¼€ Musicprefs:root=MUSIC14.æ‰“å¼€ photoprefs:root=Photos]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS proxy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸Ž CSDN çš„è¯€åˆ«]]></title>
    <url>%2F2016%2F09%2F10%2F%E4%B8%8E-CSDN-%E7%9A%84%E8%AF%80%E5%88%AB%2F</url>
    <content type="text"><![CDATA[å†™è¿™ä¸ªè¯é¢˜, å†…å¿ƒè¿˜æ˜¯è›®æ²‰é‡çš„. å‡ å¹´å‰ä¸Ž CSDN ä¸æœŸè€Œé‡, åœ¨é‡Œé¢å„ç§æŠ˜è…¾, ç¿»é˜…å¤§ç‰›ä»¬çš„åšå®¢, å†™è¯„è®º, ç”šè‡³æ‰“å°å‡ºæ¥. åœ¨æŠ€æœ¯è®ºå›ä¸åœåœ°â€çŒæ°´â€, è®¢é˜… CSDN æ‚å¿—, å‡†å¤‡ç»ƒå°±ä¸€èº«æ­¦è‰º. äº’è”ç½‘çš„è“¬å‹ƒå‘å±•, è®©æˆ‘åŽŸæ¥ä¸å®‰çš„å¿ƒæœ‰äº†æ›´åŠ ç‹‚èºçš„å†²åŠ¨. åœ¨æŸä¸ªå¤œæ·±äººé™çš„å¤œæ™š, å¼€å¯äº†å¥‹ç¬”ç–¾ä¹¦çš„åŽ†ç¨‹, è¸ä¸Šäº† CSDN çš„åšå®¢ä¹‹æ—….è¿™ä¹ˆå¤šå¹´ä»¥æ¥, CSDN å°±åƒæˆ‘çš„ä¸€ä¸ªæœ‹å‹, ä¸ç®¡æ˜¯å®¶é•¿é‡ŒçŸ­, è¿˜æ˜¯æŠ€æœ¯è®¨è®º, å„ç§å¿ƒé…¸, æˆ‘éƒ½ä¼šè®°å½•åœ¨é‚£é‡Œ. ä¸€åšæŒå°±æ˜¯å‡ å¹´â€¦ å¦‚ä»Š, è¦ç¦»å¼€ CSDN çš„åšå®¢äº†, ä¸å‡†å¤‡åœ¨é‚£é‡Œç»§ç»­â€™è€•è€˜â€™äº†.æ€»ç»“èµ·æ¥æœ‰å¦‚ä¸‹å‡ ä¸ªåŽŸå› : æ–‡ç« è¢«ä»»æ„çš„è½¬è½½, æ²¡ç»è¿‡æœ¬äººçš„å…è®¸.æˆ‘åœ¨è®ºå›ä¹Ÿé—®è¿‡è¯¥äº‹, æ²¡æœ‰ä»»ä½•å›žåº”, å¾ˆå¤±æœ›! å¹¿å‘Šè¶Šæ¥è¶Šå¤š. ç›¸æ¯”ä»¥å‰, å¾ˆéš¾æ‰¾åˆ°è®©äººæ»¡æ„çš„æœ‰è´¨é‡çš„æ–‡ç« . å†è§, CSDN! è¯·åŽŸè°…æˆ‘çš„ä¸è¾žè€Œåˆ«!]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´» å†™ä½œ</tag>
      </tags>
  </entry>
</search>
